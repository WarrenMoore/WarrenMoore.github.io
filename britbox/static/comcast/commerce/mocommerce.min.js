/*! For license information please see mocommerce.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.commerce=t():e.commerce=t()}(self,(()=>(()=>{var e={8:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},757:(e,t,r)=>{e.exports=r(666)},669:(e,t,r)=>{e.exports=r(609)},448:(e,t,r)=>{"use strict";var n=r(867),o=r(26),i=r(372),a=r(327),s=r(97),c=r(109),u=r(985),l=r(61);e.exports=function(e){return new Promise((function(t,r){var p=e.data,f=e.headers,d=e.responseType;n.isFormData(p)&&delete f["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(y+":"+g)}var b=s(e.baseURL,e.url);function v(){if(h){var n="getAllResponseHeaders"in h?c(h.getAllResponseHeaders()):null,i={data:d&&"text"!==d&&"json"!==d?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h};o(t,r,i),h=null}}if(h.open(e.method.toUpperCase(),a(b,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,"onloadend"in h?h.onloadend=v:h.onreadystatechange=function(){h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))&&setTimeout(v)},h.onabort=function(){h&&(r(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){r(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(l(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var m=(e.withCredentials||u(b))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;m&&(f[e.xsrfHeaderName]=m)}"setRequestHeader"in h&&n.forEach(f,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete f[t]:h.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),d&&"json"!==d&&(h.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),r(e),h=null)})),p||(p=null),h.send(p)}))}},609:(e,t,r)=>{"use strict";var n=r(867),o=r(849),i=r(321),a=r(185);function s(e){var t=new i(e),r=o(i.prototype.request,t);return n.extend(r,i.prototype,t),n.extend(r,t),r}var c=s(r(655));c.Axios=i,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=r(263),c.CancelToken=r(972),c.isCancel=r(502),c.all=function(e){return Promise.all(e)},c.spread=r(713),c.isAxiosError=r(268),e.exports=c,e.exports.default=c},263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},972:(e,t,r)=>{"use strict";var n=r(263);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,r)=>{"use strict";var n=r(867),o=r(327),i=r(782),a=r(572),s=r(185),c=r(875),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean,"1.0.0"),forcedJSONParsing:u.transitional(u.boolean,"1.0.0"),clarifyTimeoutError:u.transitional(u.boolean,"1.0.0")},!1);var r=[],n=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(n=n&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var o,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!n){var l=[a,void 0];for(Array.prototype.unshift.apply(l,r),l=l.concat(i),o=Promise.resolve(e);l.length;)o=o.then(l.shift(),l.shift());return o}for(var p=e;r.length;){var f=r.shift(),d=r.shift();try{p=f(p)}catch(e){d(e);break}}try{o=a(p)}catch(e){return Promise.reject(e)}for(;i.length;)o=o.then(i.shift(),i.shift());return o},l.prototype.getUri=function(e){return e=s(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,r){return this.request(s(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,r,n){return this.request(s(n||{},{method:e,url:t,data:r}))}})),e.exports=l},782:(e,t,r)=>{"use strict";var n=r(867);function o(){this.handlers=[]}o.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},97:(e,t,r)=>{"use strict";var n=r(793),o=r(303);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},61:(e,t,r)=>{"use strict";var n=r(481);e.exports=function(e,t,r,o,i){var a=new Error(e);return n(a,t,r,o,i)}},572:(e,t,r)=>{"use strict";var n=r(867),o=r(527),i=r(502),a=r(655);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},185:(e,t,r)=>{"use strict";var n=r(867);e.exports=function(e,t){t=t||{};var r={},o=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function u(o){n.isUndefined(t[o])?n.isUndefined(e[o])||(r[o]=c(void 0,e[o])):r[o]=c(e[o],t[o])}n.forEach(o,(function(e){n.isUndefined(t[e])||(r[e]=c(void 0,t[e]))})),n.forEach(i,u),n.forEach(a,(function(o){n.isUndefined(t[o])?n.isUndefined(e[o])||(r[o]=c(void 0,e[o])):r[o]=c(void 0,t[o])})),n.forEach(s,(function(n){n in t?r[n]=c(e[n],t[n]):n in e&&(r[n]=c(void 0,e[n]))}));var l=o.concat(i).concat(a).concat(s),p=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return n.forEach(p,u),r}},26:(e,t,r)=>{"use strict";var n=r(61);e.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},527:(e,t,r)=>{"use strict";var n=r(867),o=r(655);e.exports=function(e,t,r){var i=this||o;return n.forEach(r,(function(r){e=r.call(i,e,t)})),e}},655:(e,t,r)=>{"use strict";var n=r(867),o=r(16),i=r(481),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(c=r(448)),c),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,r){if(n.isString(e))try{return(0,JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,r=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,a=!r&&"json"===this.responseType;if(a||o&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw i(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){u.headers[e]=n.merge(a)})),e.exports=u},849:e=>{"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},327:(e,t,r)=>{"use strict";var n=r(867);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(n.isURLSearchParams(t))i=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},372:(e,t,r)=>{"use strict";var n=r(867);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(o)&&s.push("path="+o),n.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},985:(e,t,r)=>{"use strict";var n=r(867);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},16:(e,t,r)=>{"use strict";var n=r(867);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},109:(e,t,r)=>{"use strict";var n=r(867),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,i,a={};return e?(n.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},875:(e,t,r)=>{"use strict";var n=r(593),o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var i={},a=n.version.split(".");function s(e,t){for(var r=t?t.split("."):a,n=e.split("."),o=0;o<3;o++){if(r[o]>n[o])return!0;if(r[o]<n[o])return!1}return!1}o.transitional=function(e,t,r){var o=t&&s(t);function a(e,t){return"[Axios v"+n.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,n,s){if(!1===e)throw new Error(a(n," has been removed in "+t));return o&&!i[n]&&(i[n]=!0,console.warn(a(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;o-- >0;){var i=n[o],a=t[i];if(a){var s=e[i],c=void 0===s||a(s,i,e);if(!0!==c)throw new TypeError("option "+i+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+i)}},validators:o}},867:(e,t,r)=>{"use strict";var n=r(849),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===o.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function r(r,n){c(t[n])&&c(r)?t[n]=e(t[n],r):c(r)?t[n]=e({},r):i(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)l(arguments[n],r);return t},extend:function(e,t,r){return l(t,(function(t,o){e[o]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},533:(e,t,r)=>{"use strict";var n=r(446);function o(e,t){return{status:e[0],data:(r=e[1],n.isArrayBuffer(r)||n.isBuffer(r)||n.isStream(r)||n.isBlob(r)?r:n.isObjectOrArray(r)?JSON.parse(JSON.stringify(r)):r),headers:e[2],config:t,request:{responseURL:t.url}};var r}e.exports=function(e,t,r,i){var a=i.url||"";i.baseURL&&a.substr(0,i.baseURL.length)===i.baseURL&&(a=a.slice(i.baseURL.length)),delete i.adapter,e.history[i.method].push(i);var s=n.findHandler(e.handlers,i.method,a,i.data,i.params,i.headers,i.baseURL);if(s)if(7===s.length&&n.purgeIfReplyOnce(e,s),2===s.length)e.originalAdapter(i).then(t,r);else if("function"!=typeof s[3])n.settle(t,r,o(s.slice(3),i),e.delayResponse);else{var c=s[3](i);"function"!=typeof c.then?n.settle(t,r,o(c,i),e.delayResponse):c.then((function(a){a.config&&a.status?n.settle(t,r,o([a.status,a.data,a.headers],a.config),0):n.settle(t,r,o(a,i),e.delayResponse)}),(function(t){e.delayResponse>0?setTimeout((function(){r(t)}),e.delayResponse):r(t)}))}else switch(e.onNoMatch){case"passthrough":e.originalAdapter(i).then(t,r);break;case"throwException":throw n.createCouldNotFindMockError(i);default:n.settle(t,r,{status:404,config:i},e.delayResponse)}}},413:(e,t,r)=>{"use strict";var n=r(533),o=r(446),i=["get","post","head","delete","patch","put","options","list"];function a(){return i.reduce((function(e,t){return e[t]=[],e}),{})}function s(){c.call(this),u.call(this)}function c(){this.handlers=a()}function u(){this.history=a()}function l(e,t){if(s.call(this),!e)throw new Error("Please provide an instance of axios to mock");this.axiosInstance=e,this.originalAdapter=e.defaults.adapter,this.delayResponse=t&&t.delayResponse>0?t.delayResponse:null,this.onNoMatch=t&&t.onNoMatch||null,e.defaults.adapter=this.adapter.call(this)}function p(e,t,r){if("any"===e)i.forEach((function(e){t[e].push(r)}));else{var n=function(e,t,r){for(var n=-1,i=0;i<t[e].length;i+=1){var a=t[e][i],s=7===a.length;(a[0]instanceof RegExp&&r[0]instanceof RegExp?String(a[0])===String(r[0]):a[0]===r[0])&&o.isEqual(a[1],r[1])&&o.isEqual(a[2],r[2])&&!s&&(n=i)}return n}(e,t,r);n>-1&&r.length<7?t[e].splice(n,1,r):t[e].push(r)}}l.prototype.adapter=function(){return function(e){var t=this;if(3!==arguments.length)return new Promise((function(r,o){n(t,r,o,e)}));n(t,arguments[0],arguments[1],arguments[2])}.bind(this)},l.prototype.restore=function(){this.axiosInstance&&(this.axiosInstance.defaults.adapter=this.originalAdapter,this.axiosInstance=void 0)},l.prototype.reset=s,l.prototype.resetHandlers=c,l.prototype.resetHistory=u,i.concat("any").forEach((function(e){var t="on"+e.charAt(0).toUpperCase()+e.slice(1);l.prototype[t]=function(t,r,n){var i=this;function a(o,a,s){var c=[t,r,n,o,a,s];return p(e,i.handlers,c),i}function s(o,a,s){var c=[t,r,n,o,a,s,!0];return p(e,i.handlers,c),i}return t=void 0===t?/.*/:t,{reply:a,replyOnce:s,passThrough:function(){var n=[t,r];return p(e,i.handlers,n),i},abortRequest:function(){return a((function(e){var t=o.createAxiosError("Request aborted",e,void 0,"ECONNABORTED");return Promise.reject(t)}))},abortRequestOnce:function(){return s((function(e){var t=o.createAxiosError("Request aborted",e,void 0,"ECONNABORTED");return Promise.reject(t)}))},networkError:function(){return a((function(e){var t=o.createAxiosError("Network Error",e);return Promise.reject(t)}))},networkErrorOnce:function(){return s((function(e){var t=o.createAxiosError("Network Error",e);return Promise.reject(t)}))},timeout:function(){return a((function(e){var t=o.createAxiosError(e.timeoutErrorMessage||"timeout of "+e.timeout+"ms exceeded",e,void 0,"ECONNABORTED");return Promise.reject(t)}))},timeoutOnce:function(){return s((function(e){var t=o.createAxiosError(e.timeoutErrorMessage||"timeout of "+e.timeout+"ms exceeded",e,void 0,"ECONNABORTED");return Promise.reject(t)}))}}}})),e.exports=l,e.exports.default=l},446:(e,t,r)=>{"use strict";var n=r(8),o=r(669),i=r(63),a=r(738),s=r(456),c=Object.prototype.toString,u=!!o.create().defaults.headers;function l(e,t){for(var r=e.length,n=0;n<r;n++){var o=e[n];if(t(o))return o}}function p(e){return"[object Function]"===c.call(e)}function f(e){return null!==e&&"object"===n(e)}function d(e,t){return e?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):t}function h(e,t){return("/"===e[0]?e.substr(1):e)===("/"===t[0]?t.substr(1):t)}function y(e,t,r,n){return["delete","get","head","options"].indexOf(e.toLowerCase())>=0?g(r,n?n.params:void 0):function(e,t){if(void 0===t)return!0;var r;try{r=JSON.parse(e)}catch(e){}return g(r||e,t)}(t,n)}function g(e,t){return void 0===t||("function"==typeof t.asymmetricMatch?t.asymmetricMatch(e):i(e,t))}function b(e,t,r,n){var o=new Error(e);return o.isAxiosError=!0,o.config=t,void 0!==r&&(o.response=r),void 0!==n&&(o.code=n),o.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},o}e.exports={find:l,findHandler:function(e,t,r,n,o,i,a){return l(e[t.toLowerCase()],(function(e){return"string"==typeof e[0]?(h(r,e[0])||h(d(a,r),e[0]))&&y(t,n,o,e[1])&&g(i,e[2]):e[0]instanceof RegExp?(e[0].test(r)||e[0].test(d(a,r)))&&y(t,n,o,e[1])&&g(i,e[2]):void 0}))},purgeIfReplyOnce:function(e,t){Object.keys(e.handlers).forEach((function(r){var n=e.handlers[r].indexOf(t);n>-1&&e.handlers[r].splice(n,1)}))},settle:function e(t,r,n,o){if(o>0)setTimeout(e,o,t,r,n);else if(u||n.config&&n.config.validateStatus)if(!n.config.validateStatus||n.config.validateStatus(n.status))t(n);else{if(!u)return r(n);r(b("Request failed with status code "+n.status,n.config,n))}else n.status>=200&&n.status<300?t(n):r(n)},isStream:function(e){return f(e)&&p(e.pipe)},isArrayBuffer:function(e){return"[object ArrayBuffer]"===c.call(e)},isFunction:p,isObjectOrArray:f,isBuffer:a,isBlob:s,isEqual:i,createAxiosError:b,createCouldNotFindMockError:function(e){var t="Could not find mock for: \n"+JSON.stringify(e,["method","url"],2),r=new Error(t);return r.isCouldNotFindMockError=!0,r.url=e.url,r.method=e.method,r}}},897:(e,t)=>{t.defaults={},t.set=function(e,r,n){var o=n||{},i=t.defaults,a=o.expires||i.expires,s=o.domain||i.domain,c=void 0!==o.path?o.path:void 0!==i.path?i.path:"/",u=void 0!==o.secure?o.secure:i.secure,l=void 0!==o.httponly?o.httponly:i.httponly,p=void 0!==o.samesite?o.samesite:i.samesite,f=a?new Date("number"==typeof a?(new Date).getTime()+864e5*a:a):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+r.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(f&&f.getTime()>=0?";expires="+f.toUTCString():"")+(s?";domain="+s:"")+(c?";path="+c:"")+(u?";secure":"")+(l?";httponly":"")+(p?";samesite="+p:"")},t.get=function(e){for(var t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=");if(n=n<0?r.length:n,decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))===e)return decodeURIComponent(r.slice(n+1))}return null},t.erase=function(e,r){t.set(e,"",{expires:-1,domain:r&&r.domain,path:r&&r.path,secure:0,httponly:0})},t.all=function(){for(var e={},t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=");n=n<0?r.length:n,e[decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))]=decodeURIComponent(r.slice(n+1))}return e}},601:e=>{e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABIxJREFUWAnFmU2IVlUYx+e1hCxBtJCcWiQzC1NnoUJtgsBF0CIyN6IL3blRF7lRhLpgSFtxBjctI5gxMAqqRYtaRExgieUHLvwAUcsP+lDJD2j6/ca578zc97n33Pu+M/TAj3vvc/7Pc56595xzz32n1delTUxMDBD6NmyA/hlw2ndtBj9x/nmr1bpgQ1NrNQmgqOXod8M7sBYewUm4CnlRnPatAIt+EdbDk3AaPoMRir3Bce6MwhZDBnfgLozBNliS6gXN0intKMd7YI4MFqdia7WTaDP8Bg9hGLyLXRmxz8NRMJc5N3eVyCCCW5DBv/AlDHadrBBIrgH4CsydQaOhZnGL4Bhoh6BZgkJB0SU5F8CHoNnXokjX4UPonfsU/oGtHYI5dtCHY9m+LDJ9IxBloM17cfnfSl8WqWW5LzwicEI4Lg6Fgnl00qeP277jiUODS4kzywmRvtVBsd3GmYpYx6QTxxo6lyCcGTj9G89WYpxUo+BYugnvBvUnXcQ5u61h9qPGsRxcQIeTWQIBcRZXtJ2BNOkiieuktUyvt1x8AL4hpp3JVI8FxOyEyLybG2umacuIcTH3jXNQ5+RY4+JXzs/yjtzSVpacoH2OpjfAP+Y1cFCXjdkJ2n6AK3AbPqKPUxwrjT5GEaxBO+Tg9LlryWUFzWpwEHdrPrrXK6ujEU2+7Ax4sRccmHVe/OfQ9Wpf1yjQDcYj2LsAsfu5k9zOv6oCETv1V1Vpara9nNJRyx9ofoYNFui+zf1cpRF0F8EvJaKH+PdDvnH1XF9k30TOwOe47fcRn4eRQNDhQrcLIttXFCPaFwnxvVLURtfo3Nqdt0AH7oFIVPShewocG0VzBz3LEPQXRVzfmyWquEB7AO74iF0KahmP+T7CskdXzBHl9Y2zrCisurbA6+DYSRrJNyJ6OhBuD3w7Ap/r5e7AH7ms6ZqP+Fs4HimKPnQfQ2QPcDrmVkyxn6O+yC7jLFvY212iOQ7fuTn9BO8gj+/VdmvJCdpLNL1U0tzEvZT+/qwKoK8fab/oI/a7dR2O5EKN7gT0aidqFGct62DcR9zkVbcG/VXo1lzSXkj9hWjyV93KybGAo8lmwcHre/tZ8MPczcIzEJkz/gh8D36se/f82K806hlDsBrt0KQQRy/brVXE34bI3qqsJGgkiXtTt34H281TThfs4bazwQlxb0JxAT/cIEVbSp4R+Bvc1k0bjgzc1TTe8puFuE0wDmfBD6AnprPXOyNmEKzhvY4InD1/NHUkbeCgf5c8P9h+t5YwlIb/87PTXzD87NwUFpc7EWSgJXfYeUyvR/ua7DF6tMXkCL3V/gzhR8+8F2kfU30dK9ZSek2Auw6L1ObrxyNvhLk1+6r341FeNQEmyMBxMdc/vzlbzWnuzhmbF1HnSAInjl9yTn93uY2/nfN+jAXXOXM5W6snRB6YOpIo+gnYsZPcYKgBtWPgG8JF+H2Il5JCMcl92Uw9Sb17e8C/fC2U/Yju+1rcGLgrWQhnwH3nEd6xtzjWskYFzsxIsVX/hnCX7q/+HsfhC4pyL9nY/gMXG2+mRBQhagAAAABJRU5ErkJggg=="},163:e=>{e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAEICAYAAACj9mr/AAAAAXNSR0IArs4c6QAAFLpJREFUeF7tnUGSG0kOBNn/f3Svjc1tbVTOKhcsk0zfKzqAQAAIJrUa9c/v7+/vq/+lQAqkwH8o8JNBtBcpkAJ/UiCDaDdSIAX+qEAG0XKkQApkEO1ACqTAfQV6QdzXLEQKHKNABnHMqGs0Be4rkEHc1yxEChyjQAZxzKhrNAXuK5BB3NcsRAoco0AGccyoazQF7iuQQdzXLEQKHKNABnHMqGs0Be4rkEHc1yxEChyjQAZxzKhrNAXuK5BB3NcsRAoco0AGccyoazQF7iuQQdzXLEQKHKNABnHMqGs0Be4rkEHc1yxEChyjQAZxzKhrNAXuK5BB3NcsRAoco0AGccyoazQF7iuQQdzXLEQKHKNABnHMqGs0Be4rkEHc1yxEChyjQAZxzKhrNAXuK5BB3NcsRAoco0AGccyoazQF7iuQQdzXLEQKHKNABnHMqGs0Be4rkEHc1yxEChyjwHKD+Pn5+Wqxf39/L/uj/glP4k3np/oUt/wIT/V3j9v52/4yCKsg4GnAtOCEJ/rT+ak+xS0/wlP93eN2/ra/DMIqmEEoBenA6UAIr8htAKb+pylmEMMK04BpwQlP9KfzU32KW36Ep/q7x+38bX8ZhFWwF4RSkA6cDoTwitwGYOp/mmIGMawwDZgWnPBEfzo/1ae45Ud4qr973M7f9pdBWAV7QSgF6cDpQAivyG0Apv6nKWYQwwrTgGnBCU/0p/NTfYpbfoSn+rvH7fxtf9sbxGqBSGBaUMt/9/zEj/SjOOlH9QlP9afju/PPIOQGTA949/zET8r7ogOn+oS3/Cx+d/4ZhJzw9IB3z0/8pLwZBPxNXKsv4TMIUgjidCD2E2z3/MRPyptBZBDX/y2GPTC7oISnA7H8d89P/Eg/ipN+VJ/wVH86vjv/XhByA6YHvHt+4ifl7QXRC6IXxNUR0QHaT0ibn/AZxLUCpJ+dr9W/F4RUcHrAu+cnflLeXhC9INwL4tsXlPqznzA2P+F3N4hP52/1JfzHvyC+fcDUXwbRBwwduYlnEKAeHeDuB0zLYfkTnupTfFr/T+dP+tl4BpFBXCpgD9QuqK1v8bvzt/wIn0FkEBkEXYmIW4MivKD2FjSDyCAyiLdO5dkP0YHTVxzCP2P1PiqDyCAyiPfv5fZP0oFnECCpFYjwtyf6f4DVA6b+iB/1b/MTnupTnPqj+hZP/Chu6xOe6tt4L4jNXxB2wISnAyM8xacXnPhTfcJTfxS39QlP9W08g8gg7A6pryi2OB04HRjhLT9bn/CWH+EziAyCdkTFpxecDpzqE141/3p9/F8VzyAyCHsDvSAuFLAGRfjR4b1erwwigxjdsekFpxcA1Se8FcfWJ7zlR/gMIoOgHVHx6QWnA6f6hFfN9xXDyvd60YAasNf4KgPpb6vT/Gx+4k/1CW/52fqEt/wI3wuiFwTtiIpPLzgdONUnvGq+F4SVrxeEXVB7ANN42hDqf5of1Sf+FJ/mT/VtvBfE4heEXdDpBSR+VJ8W1OafxhN/ipM+lj/Vt/EMIoO4VGB6gW3+abw9sAxCKnj6gKl/knd6AYkf1Sf+Nv80nvhTnPSx/Km+jfeC6AXRC8Je0QU+g5DiWgclvKQ3/ldlLf/pBSR+VJ/0t/mn8cSf4qSP5U/1bbwXRC+IXhD2inpBzCloHZTwlvn0J4Dlv5of1Sf9qX/KP40n/hSf5k/1bfzjXxBWAIufXlBaMMuf8NQf4W2c+id+hLf8LH53/hmEnLAdsMVL+ggnfphA/gAdOPEjvKSn4bvzzyDkiO2ALV7SRzjxwwTyB+jAiR/hJT0N351/BiFHbAds8ZI+wokfJpA/QAdO/Agv6Wn47vwzCDliO2CLl/QRTvwwgfwBOnDiR3hJT8N3559ByBHbAVu8pI9w4ocJ5A/QgRM/wkt6Gr47/wxCjtgO2OIlfYQTP0wgf4AOnPgRXtLT8N35ZxByxHbAFi/pI5z4YQL5A3TgxI/wkp6G785/e4PQE1icgBbULkj4n8UTni1P+zNb/QP+0dppAabz04A78OsDt/pNz3c6P/U/Xb8XxLDCNOAMIoO4WkHan+H13f+fvZ8WYDo/DTiDyCAyiAsF6ECmD3g6fwbxeykxzd/qNz3f6fzU/3T9vmIMK0wDnj6Q0+sPj3c8Pc1vmkAGMawwDTiD6CtGXzH6ivFHBTKIDCKDGP6U/ub00wZC2tELiPCWP+UvPqvA8q8Ys+19fnZ7YIQnhTIIUui74xnE5vOlA6cDJjy1T/kJT/Vtfqpf3CmQQTj9xtH2wAhPDdgDpvo2P/Ev7hTIIJx+42h7YISnBuwBU32bn/gXdwpkEE6/cbQ9MMJTA/aAqb7NT/yLOwUyCKffONoeGOGpAXvAVN/mJ/7FnQIZhNNvHG0PjPDUgD1gqm/zE//iToHtDYIWzLW/Hk0HQv1b/LQClh/hiT/pR3hbn/ITv+n6yO93NQNgSAJSg7vHSX7q3+Kn9bH8CE/8ST/C2/qUn/hN10d+GQRJNBunBbALRPjZ7l7jv/yY+Nv+aT5Un+LEb7o+8ssgSKLZOC2AXSDCz3aXQZC+NB/aD8pv4/0ZhFVQ4mkB7AIRXtJH+HR/RMD2T/ypPsWJ33R95NcLgiSajdMC2AUi/Gx3vSBIX5oP7Qflt/FeEFZBiacFsAtEeEkf4dP9EQHbP/Gn+hQnftP1kV8vCJJoNk4LYBeI8LPd9YIgfWk+tB+U38a//gWxWmAakF0Qiyd+FLf1LX6a3+r8VH86nkFMKwz57YFYvG3f1rd44v/p+am/6XgGMa1wBnGpwKcf8DT/xeu5/vdikAA0AML3FeP6n50n/ShO8yH9LX6a3+r8VH863gtiWuFeEL0gFu+YKZ9BGPX+AtZ+glq8bcHWt3ji/+n5qb/peAYxrXAviF4Qi3fMlM8gjHp/AWs/4SzetmDrWzzx//T81N90fLlB0ABJgOk/BJvmR/3Z+DR/m5/6+/T5Wn2of9LPxjOIX/fLZWkAywf8c/2bqyx/ewDT9Ul/y391ftLPxjOIDOJyh6YPgBbY1rf4aX42P+FtPIPIIDIIcUWrDUhQfwuaQWQQGcRbp/LfP5RBCPHega7+Dvj1A+7PIC7XcPX+0Y3QfhLexntB9ILoBSGuiA542oAE9begGUQGkUG8dSp9xRAyzUGtAxMz+wlg8cRvdZz6I340P8o/jSf+xI/wlj/ln44vf0FQgyQw4SlOC0D1LZ74rY5Tf8RvWj/iR/WJP+UnPNW3+am+jWcQ8isGDZgWxA5wGk/9UX3qn/JP44k/8SO85U/5p+MZRAah/gyCFtQeyDSe+GcQVgFSWMZpQWT68d/8NM3f9k94ux7UP+Wfxu/eP/GbjveC6AXRC+JCATIwOlBrcJR/Op5BZBAZRAbxRwUyiAwig8ggPtcg7BPKPvEIT/zoiTqdn/hNx6m/1foQP6uP7Y/wlh/ht39BUAMUpwWgARCe6q/OT/ym46Tfan2In9XH9kd4y4/wGYT8ikEC04DtglJ+4jcdp/6IP+GJ/3T+6frEn+rbeAaRQdgdusTTgdMBEJ7IT+efrk/8qb6NZxAZhN2hDEL8IScZYAYxup6vlx0A4Yk+DXg6P/GbjlN/q/UhflYf2x/hLT/C94LoBUE7ouJ0gHQAhCdy0/mn6xN/qm/jGUQGYXeorxh9xZjbIfqEsA46nX9OmX8zT/On/NTft8+H9Pn6/n9th7RBED99ACTfan2In12f6f6IP8Wn+U3np/4ovvwrxrRA0/lJYBuf5k/5iX8Gcf2Ll0g/0t/qS/UpnkHAn0GQgNPx6QWi/NSfXWCqb/MTf4pP85vOT/1RPIPIIGhHLuP2gLc/EPi1AV/ff38G4Z6I6rreAE8fEOUnil9/IBnE2o9QWtBvX0A6wNX6EL9vn89q/a2+ND+K9xVjrT/SfPq/ORfPJ4NYbFF2ALvjyQFIfurP5ie8rU/5bf+Ep/rU33R+4mfrU36Kf/wLwg54Gk8DoAUgfjY/4W19ym/7JzzVp/6m8xM/W5/yUzyDkH8IRQtGA6AFmM5P/Gx9ym/7JzzVp/6m8xM/W5/yUzyDyCAud4QOiBaM4nQAVJ/wVH91fuJn+6P8FM8gMogM4kIBe6BkQHSgtj7lp3gGkUFkEBnEHxXIIDKIDCKDyCD+pAA9AemJR3h6wq3OT/xsf5Tf9k94qk/9TecnfrY+5af4178gSIDlA5AvGOqP4nQghCf9KP/ueOrfxq0+tj7hM4gv/5t6uABgUITf/cC3P8DFHxA03wwig6AduYxnEEq+8b9K79i9XhlEBqF2KINQ8mUQJJ99AhKe6tOCE97Gif80P6pP/RE/yr87nvq3cauPrU/4XhC9IGhH+oqhFLoGZxAgrhWI8DRb+gQjvI0T/2l+VJ/6I36Uf3c89W/jVh9bn/C9IHpB0I70glAK9YJQ8k076LfnV+K/Xi/6BLf5SX+bfxpP+lB/hJ/mb/N//AuCBJge4Or81D/FpxeY9CF+q+OkD/VH+NX9Uf0MQn7FmF4Qyk8Dpvj0Ak/zp/5snPSh/ghv+U3jM4gMYnTH6IBGi/+F5HTg1B/h/wLF0RQZRAYxu2Dyr3KPknsjOR14BvGGiOZHpgX+9vxG+3+wdAA2P+lv80/jSR/qj/DT/G3+XhC9IOwOXeLpgEaL/4XkdODUH+H/AsXRFBlEBjG7YH3FGNV3Ovlyg5hucPf89AlE/OkTivJb/Gp+VJ/ipA/hV+tH/Gw8g7AKSvzqBV294NQ/8ZPy439NSfmJH/Vn8xPexjMIq6DETy8Q5V+94JaflD+DAAEzCLthEk8HQuntgVv8an5Un+Kr9Sd+NB/C23gGYRWU+NULSgu4Oz8pfy+IXhB2hWbxux/g7vzsdFb3R/zJwAlv470grIISv3pBaQF35yfl7wXRC8Ku0Cx+9wPcnZ+dzur+iD8ZOOFtfPkLwg7ICjCNpwFT/4S3/Km+zU/8qf6n46f1s/kJn0GQQjI+veCSnn5iU/3p/nc3GNKH4qQf4W08g7AKAp4GbBfc0qf6Nv90/8R/df1p/Wx+wmcQpJCMTy+opNcLQv5mKzIoOx/aH5uf8BkEKSTjNGBaMMJLehlEBnG5QhmEvbC+YlwqQAZnDXJ3vF0v0s/mJ3wGQQrJOA3YLrik1wuiF0QvCHtEBp9B/F4v4PCBTutPBm925x8s8bf5Cb/9C2K1QCjg4Qtu50MHZvNPz4/yU3x1/8jvd3oCwGB3gVDADIIkGn1BqOKvF37Fmj6P3fe/F4TcMDvg3fEkjz0g2z/xo/jp9VGfXhAk0XXcLtjueFIngyCFZvfHVWd0LwjWaPSJnEH8XOprDYjGa/Wn/BRfXR/59YIgiWY/AeyCTONJHXvAlj/xo/jp9VGfDIIkyiCuFMgg1u6Pq87ovmKwRn3FuFAgg3ALtPoFQ+w/3iBIYBKA4nQAVH8aT/yJH+Epbvuj/Kvjq/uj+tP6ZBCgMA2IDnAaTwtC/AhPcdsf5V8dX90f1Z/WJ4PIINSO0QJPG5Qi/wZ4dX9U/40W1I9kEBmEWiBa4AxCydt/i0ELtHoBbf1pPK0f6Ut4itv+KP/q+Or+qP60Pr0gekGoHaMFnjYoRf4N8Or+qP4bLagfySAyCLVAtMAZhJK3rxi0QKsX0NafxtP6kb6Ep7jtj/Kvjq/uj+pP69MLYvMXBC2AXaDTDYT0I30sfnq+lJ/iGUQGQTui4tMHpMi98S82ZRA0QTsBwK8eALVH8qzmT/yoP+JPeIoTv+n60/ym+6P81J+N94LoBWF36BJPC55BXMtP+o0O759/cevT/2vO6QWjAVF9i6cFoPyEJ/6Epzjxm64/zW+6P8pP/dl4BtELwu5QL4gLBawBZhDD/+ir3X4aEC2AxRN/yk944k94ihO/6frT/Kb7o/zUn433gugFYXeoF0QviLkdok8QclDCW+a2fvjZX5xD86X9oPlM55/mR/wp3gti8xcELbBdsE/H44LLr7DT+a3+xM/GM4gMYvQrwrTB0QFMH6DNb/HUv41nEBlEBiGuyB64xQvqb0EziAwig3jrVP77h+yBW7yg/hY0g8ggMoi3TiWDEDI9h1oHJfxzZv8ip79DE//qX/+/IDRfq+90/ml+xJ/ivSB6QfSCoCu5iNsDt3hB/S3oxxvEW10O/pAdMOEHqb+Vml4wlGS6P8uP+E/HSZ/V/WUQcgPsgAkv6Wm4XdDp/iw/LZBMQPqs7i+DWDxgWhBJT8Ptgk73Z/lpgWQC0md1fxnE4gHTgkh6Gm4XdLo/y08LJBOQPqv7yyAWD5gWRNLTcLug0/1ZflogmYD0Wd1fBrF4wLQgkp6G2wWd7s/y0wLJBKTP6v4yiMUDpgWR9DTcLuh0f5afFkgmIH1W95dBLB4wLYikp+F2Qaf7s/y0QDIB6bO6v+0NQuq/HD49YLtghJ8WkPSZ5kf1bf+W/zQ/6i+DIIVkfHrAtIBUn/CyfYSv5kf1sQH4AavvND/qL4MghWR8esC0gFSf8LJ9hK/mR/WxgQzCSnSNX72gs93xf+xl65N+dACEt/wIv5of1Sf+FLf6TvND/rv/XgxqYPf49IBpAak+4af1Xc2P6tv+rb7T/Ki/vmKQQjI+PWBaQKpPeNk+wlfzo/rYQF8xrER9xZhUkA6cDoDwk9z/yb2aH9W3/Vt9p/lRf70gSCEZnx4wLSDVJ7xsH+Gr+VF9bKAXhJUofAqkwKcqsPwF8anCxTsFTlAggzhhyvWYAg8VyCAeChcsBU5QIIM4Ycr1mAIPFcggHgoXLAVOUCCDOGHK9ZgCDxXIIB4KFywFTlAggzhhyvWYAg8VyCAeChcsBU5QIIM4Ycr1mAIPFcggHgoXLAVOUCCDOGHK9ZgCDxXIIB4KFywFTlAggzhhyvWYAg8VyCAeChcsBU5QIIM4Ycr1mAIPFcggHgoXLAVOUCCDOGHK9ZgCDxXIIB4KFywFTlAggzhhyvWYAg8VyCAeChcsBU5QIIM4Ycr1mAIPFcggHgoXLAVOUCCDOGHK9ZgCDxXIIB4KFywFTlAggzhhyvWYAg8VyCAeChcsBU5QIIM4Ycr1mAIPFcggHgoXLAVOUCCDOGHK9ZgCDxXIIB4KFywFTlDgf/73nhVM7/lcAAAAAElFTkSuQmCC"},63:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!=o--;){var a=i[o];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}},456:e=>{"use strict";e.exports=e=>"undefined"!=typeof Blob&&(e instanceof Blob||"[object Blob]"===Object.prototype.toString.call(e))},738:e=>{e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),a=new I(n||[]);return i._invoke=function(e,t,r){var n=p;return function(o,i){if(n===d)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=O(a,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?h:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p="suspendedStart",f="suspendedYield",d="executing",h="completed",y={};function g(){}function b(){}function v(){}var m={};c(m,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(D([])));w&&w!==r&&n.call(w,i)&&(m=w);var E=v.prototype=g.prototype=Object.create(m);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function O(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function D(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:C}}function C(){return{value:t,done:!0}}return b.prototype=v,c(E,"constructor",v),c(v,"constructor",b),b.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},S(T.prototype),c(T.prototype,a,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),c(E,s,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=D,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},75:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},171:(e,t,r)=>{var n=r(217),o=r(75);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},593:e=>{"use strict";e.exports=JSON.parse('{"_args":[["axios@0.21.4","/tmp/build/80754af9/code"]],"_from":"axios@0.21.4","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"axios@0.21.4","name":"axios","escapedName":"axios","rawSpec":"0.21.4","saveSpec":null,"fetchSpec":"0.21.4"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_spec":"0.21.4","_where":"/tmp/build/80754af9/code","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}function i(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,c,"next",e)}function c(e){a(i,n,o,s,c,"throw",e)}s(void 0)}))}}r.d(n,{default:()=>An});var c=r(757),u=r.n(c),l=r(413),p=r.n(l),f=r(669),d=r.n(f),h=r(171),y=r.n(h),g=r(897);function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function S(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e,t,r){return k=O()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&x(o,r.prototype),o},k.apply(null,arguments)}function A(e){var t="function"==typeof Map?new Map:void 0;return A=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return k(e,arguments,T(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),x(n,e)},A(e)}var I=function(e){w(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=T(t);if(r){var o=T(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return S(this,e)});function o(e,t,r,i){var a;return m(this,o),(a=n.call(this,e)).transactionId=t,a.name="TransactionError",a.statusCode=r,a.data=i,a}return v(o)}(A(Error));const D=Object.freeze({OAT:"CommerceOat",BEARERTOKEN:"CommerceBearerToken",D:"CommerceD",ST:"CommerceST"}),C=JSON.parse('{"sG":"YOUR_MOCKED_XSCD","Q$":"YOUR_MOCKED_THOR_TOKEN"}');var B={timezone:(new Date).getTimezoneOffset(),deviceCapabilities:{videoDimensions:[window.innerWidth,window.innerHeight]}};function P(){return R.apply(this,arguments)}function R(){return(R=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return U.apply(this,arguments)}function U(){return(U=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return e.abrupt("return",e.sent.timezone);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return L.apply(this,arguments)}function L(){return(L=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.sG);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return M.apply(this,arguments)}function M(){return(M=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.Q$);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return H.apply(this,arguments)}function H(){return(H=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X,G,z,Q=new URL(window.location.href).searchParams.get("CommerceConf");if(Q){var Y=Q?JSON.parse(decodeURIComponent(Q)):{};X="".concat(Y.apiBaseUrl,"/commerce"),G="".concat(Y.apiBaseUrl,"/consent"),z=Y.snitchBaseUrl}else{var K=new URL(window.location.href).searchParams.get("ConfidentialCommerceConfig");if(K){var V=K?JSON.parse(decodeURIComponent(K)):{};X=V.apiBaseUrl,G="".concat(new URL(X).origin,"/consent"),z=V.snitchBaseUrl}else X="".concat("https://api.commerce.comcast.com","/commerce"),G="".concat("https://api.commerce.comcast.com","/consent")}var q=new URL(window.location.href).searchParams.get("skin")||null,W=";v=1.0.0",J={auth:W,productDetails:W,subscribe:";v=1.0.1",unsubscribe:W,change:";v=1.0.1",allSubscriptions:";v=1.0.1",offerTextOverlay:";v=1.0.1",allPurchases:W,bundledEntitlements:W,consentTextOverlayV1:"",consentTextOverlayV2:";vnd.ccs.v2",consent:";vnd.ccs.v2",eligibility:";vnd.ccs.v2"};const Z={baseUrl:X,baseCnsntsrvURL:G,acceptHeader:function(e){return"application/json".concat("".concat(J[e]),";CommerceSDK.v=","1.4.3")},baseSnitchURL:z||"http://snitch.xidio.com/snitch",overlaySkin:q};var $=function(e){w(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=T(t);if(r){var o=T(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return S(this,e)});function o(e,t,r){var i;return m(this,o),(i=n.call(this,e||"Authentication failed",t,r)).name="AuthError",i}return v(o)}(I),ee={all:0,trace:1,debug:2,info:3,warn:4,error:5,none:6};Object.keys(ee).forEach((function(e){ee[e.toUpperCase()]=ee[e]})),Object.freeze(ee);var te={toBrowserConsole:function(e,t){for(var r,n=e.toUpperCase()+" -> "+t,o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];(r=window.console).log.apply(r,[n].concat(i))},log:function(e,t){if(this.currentLogLevel<ee.none&&ee[e]>=this.currentLogLevel){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];te.toBrowserConsole.apply(te,[e,t].concat(n))}},validateLogLevel:function(e){if("string"==typeof e&&void 0!==ee[e])return ee[e];if("number"==typeof e&&e>=ee.all&&e<=ee.none)return e;throw new Error("Invalid Log level "+e)}};const re=new(function(){function e(t){m(this,e),this.setCurrentLogLevel(t)}return v(e,[{key:"getCurrentLogLevel",value:function(){return this.currentLogLevel}},{key:"setCurrentLogLevel",value:function(e){this.currentLogLevel=te.validateLogLevel(e)}},{key:"trace",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=te.log).call.apply(t,[this,"trace",e].concat(n))}},{key:"debug",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=te.log).call.apply(t,[this,"debug",e].concat(n))}},{key:"info",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=te.log).call.apply(t,[this,"info",e].concat(n))}},{key:"warn",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=te.log).call.apply(t,[this,"warn",e].concat(n))}},{key:"error",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=te.log).call.apply(t,[this,"error",e].concat(n))}}]),e}())(3);function ne(){var e=navigator.userAgent.split(" "),t="";return e.forEach((function(e){var r=e.split(":");"partnerId"===r[0]&&(t=r[1])})),t}const oe=Object.freeze({NO_RE_AUTH:"NO_RE_AUTH",RE_AUTH:"RE_AUTH",FORCE_AUTH:"FORCE_AUTH"});var ie=1/24,ae=null,se=g.get(D.D);function ce(){return ue.apply(this,arguments)}function ue(){return ue=s(u().mark((function e(){var t,r,n,o,i,a,s,c,l,p=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:oe.RE_AUTH,!ae){e.next=3;break}return e.abrupt("return",ae);case 3:if(re.info("Authenticating user."),r=g.get(D.BEARERTOKEN),n=g.get(D.OAT),t!==oe.NO_RE_AUTH||!n||!r){e.next=8;break}return e.abrupt("return",Promise.resolve({bearerToken:r,oat:n,d:se}));case 8:return e.prev=8,e.next=11,j();case 11:o=e.sent,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(8),re.error(e.t0.message),o=null;case 18:return e.prev=18,e.next=21,_();case 21:i=e.sent,e.next=28;break;case 24:e.prev=24,e.t1=e.catch(18),re.error(e.t1.message),i=null;case 28:if(i||o){e.next=30;break}return e.abrupt("return",Promise.reject(new Error("Thor and xscd are both null value")));case 30:return a="".concat(Z.baseUrl,"/account/authenticate"),s={partnerId:ne()},c=0===s.partnerId.length,l={xscd:o,thor:i,Accept:Z.acceptHeader("auth"),"Content-Type":"application/json"},n&&r&&(l.Authorization=r,l.oat=n,l.d=se),ae=d().post(a,s,{headers:l}).then((function(e){return re.debug("Authenticated user successfully."),g.set(D.BEARERTOKEN,e.data.bearerToken,{expires:ie}),g.set(D.OAT,e.data.oat,{expires:ie}),e.data.d&&(g.set(D.D,e.data.d,{expires:ie}),se=e.data.d),ae=null,{bearerToken:e.data.bearerToken,oat:e.data.oat,d:se,acInfo:e.data}}),(function(e){return!0===c?(ae=null,re.info("Retrying to get partnerId one more time"),s.partnerId=ne(),d().post(a,s,{headers:l}).then((function(e){return g.set(D.BEARERTOKEN,e.data.bearerToken,{expires:ie}),g.set(D.OAT,e.data.oat,{expires:ie}),e.data.d&&(g.set(D.D,e.data.d,{expires:ie}),se=e.data.d),{bearerToken:e.data.bearerToken,oat:e.data.oat,d:se,acInfo:e.data}}),(function(e){return re.error("Failed to authenticated user."),Promise.reject(new $(e.response&&e.response.data.errorMessage,e.response&&e.response.headers.txid,e.response&&e.response.status))}))):(ae=null,re.error("Failed to authenticated user."),Promise.reject(new $(e.response&&e.response.data.errorMessage,e.response&&e.response.headers.txid,e.response&&e.response.status)))})),e.abrupt("return",ae);case 37:case"end":return e.stop()}}),e,null,[[8,14],[18,24]])}))),ue.apply(this,arguments)}function le(){return(le=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ce().then((function(e){return e.oat})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return(pe=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ce().then((function(e){for(var t={},r=0,n=Object.keys(e.acInfo);r<n.length;r++){var o=n[r];"d"!==o&&"bearerToken"!==o&&(t[o]=e.acInfo[o])}return t})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const fe=ce;function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?de(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ye=d().create({baseURL:Z.baseUrl,timeout:2e4});ye.interceptors.request.use((function(e){return fe(e.authType).then((function(t){return e.headers.Authorization=t.bearerToken,e["CnstSrv-OAT-header"]?e.headers[e["CnstSrv-OAT-header"]]=t.oat:e.headers.oat=t.oat,e.headers.d=t.d,e.headers.tId=y()(),e.url=e.url.replace("{oat}",t.oat),e}))})),ye.interceptors.response.use(void 0,(function(e){var t;return e instanceof Error&&!e.config?Promise.reject(e):e.response?401!==e.response.status||e.config.retry?(t=e.response.data instanceof Object&&e.response.data.errorMessage?e.response.data.errorMessage:"Request for ".concat(e.config.url.replace(e.config.baseURL,"")," failed"),Promise.reject(new I(t,e.response.headers.txid,e.response.status))):function(e){g.erase("CommerceOat"),g.erase("CommerceBearerToken");var t=he(he({},e),{},{retry:!0});return ye(t).then((function(e){return e}),(function(e){return Promise.reject(e)}))}(e.config):Promise.reject(new I("Request could not be made to ".concat(e.config.url.replace(e.config.baseURL,""))))}));const ge=ye;var be={INVALID:"INVALID",NEVER_SUBSCRIBED:"NEVER_SUBSCRIBED",SUBSCRIBED:"SUBSCRIBED",ENTITLED_UNSUBSCRIBED:"ENTITLED_UNSUBSCRIBED",EXPIRED:"EXPIRED",FUTURE_SUBSCRIPTION:"FUTURE_SUBSCRIPTION",CONVERTED:"CONVERTED",PURCHASED:"PURCHASED",STOPPED:"STOPPED"},ve="expired",me="current",xe="future",we="active",Ee="stopped",Se={NEVER_SUBSCRIBED:"NEVER_SUBSCRIBED",SUBSCRIBED:"SUBSCRIBED",SUBSCRIBED_TO_OTHER:"SUBSCRIBED_TO_OTHER",NEVER_BOUGHT:"NEVER_BOUGHT",BAD_AUTHORIZATION:"BAD_AUTHORIZATION",INVALID_SKU:"INVALID_SKU",INVALID_PURCHASEID:"INVALID_PURCHASEID",OAT_MISMATCH:"OAT_MISMATCH",HAVE_BOUGHT:"HAVE_BOUGHT",BAD_USER_STANDING:"BAD_USER_STANDING",SUBSCRIBED_AND_NOT_RENEWING:"SUBSCRIBED_AND_NOT_RENEWING",NEW_TO_PROMO:"NEW_TO_PROMO",CURRENTLY_IN_PROMO:"CURRENTLY_IN_PROMO",ALL_SUBSCRIPTION_EMPTY:"ALL_SUBSCRIPTION_EMPTY",INVALID_UPGRADEOPTION:"INVALID_UPGRADEOPTION",INVALID_TIER_CHANGE:"INVALID_TIER_CHANGE",UPGRADE_TO_TRIAL:"UPGRADE_TO_TRIAL",TRIAL_TO_PAID:"TRIAL_TO_PAID",PAID_TO_PAID:"PAID_TO_PAID",INELIGIBLE:"INELIGIBLE"},Te={statusCode:200,errorMessage:"",mockScenario:""},Oe={};function ke(e){for(var t={},r=200,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];o&&o.length>0&&void 0!==o[0].sku?o.forEach((function(e){if(e.timing){var r=Oe[e.timing];t[r]||(t[r]=[]),t[r].push(e.toPurchaseObject())}})):(r=404,t.errorMessage="Not Found"),e.onGet("/subscriptions").reply(r,t,{txid:"MOCKED_TRANSACTION_ID"})}Oe.expired="expiredSubscriptions",Oe.current="currentSubscriptions",Oe.future="futureSubscriptions";var Ae=864e5,Ie=0,De=Object.values(be),Ce={};Ce[be.SUBSCRIBED]=me,Ce[be.ENTITLED_UNSUBSCRIBED]=me,Ce[be.EXPIRED]=ve,Ce[be.FUTURE_SUBSCRIPTION]=xe,Ce[be.CONVERTED]=me,Ce[be.STOPPED]=me;var Be={};Be[be.SUBSCRIBED]=we,Be[be.ENTITLED_UNSUBSCRIBED]=Ee,Be[be.EXPIRED]="stopped_and_expired",Be[be.FUTURE_SUBSCRIPTION]=we,Be[be.CONVERTED]="converted",Be[be.STOPPED]=Ee;var Pe=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"MOCKED_PURCHASE_ID_".concat(Ie++);m(this,e),this.sku=t,this.state=De.includes(r)?r:be.NEVER_SUBSCRIBED,this.timing=Ce[this.state],this.autoRenewStatus=Be[this.state],this.purchaseId=n}return v(e,[{key:"toPurchaseObject",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.offset,n=void 0===r?Ae:r,o=t.period,i=void 0===o?30*Ae:o;switch(this.autoRenewStatus){case"active":e=Date.now()+n;break;case"stopped":e=Date.now()-i-n;break;case"converted":e=Date.now()-n;break;default:e=Date.now()}return{sku:this.sku,autoRenewStatus:this.autoRenewStatus,purchaseId:this.purchaseId,startTimeMillis:e.toString(),expiryTimeMillis:(e+i).toString()}}}]),e}();function Re(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o={bundledEntitlements:r},i=200;e.onGet("/account/YOUR_MOCKED_OAT/entitlements").reply(i,o,{txid:"MOCKED_TRANSACTION_ID"})}const Ne=Object.freeze({ADD:"ADD",CANCEL:"CANCEL",CHANGE:"CHANGE",PURCHASE:"PURCHASE"}),Ue=Object.freeze({UPGRADE:"UPGRADE",DOWNGRADE:"DOWNGRADE"});var je=JSON.parse(new URL(window.location.href).searchParams.get("enableStatefulMocommerce")),Le={};function _e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";!0===je?""!==t&&(Le[t]?Le[t].subState=r:(Le=e({},t,{subState:r}),""!==n&&(Le[t].pairSKU=n,Le[n]={subState:o})),"undefined"!=typeof Storage&&sessionStorage.setItem("subscriptionProduct",JSON.stringify(Le))):He()}function Me(){return!0===je&&(0!==Object.keys(Le).length?Le:"")}function Fe(e){delete Le[e],"undefined"!=typeof Storage&&sessionStorage.setItem("subscriptionProduct",JSON.stringify(Le))}function He(){sessionStorage.getItem("subscriptionProduct")&&sessionStorage.removeItem("subscriptionProduct"),Le={}}sessionStorage.getItem("subscriptionProduct")&&(Le=JSON.parse(sessionStorage.getItem("subscriptionProduct")));var Xe={statusCode:200,errorMessage:"",inPromo:!1},Ge={statusCode:200,errorMessage:""},ze={statusCode:200,errorMessage:"",mockScenario:""};function Qe(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var i=(t=[]).concat.apply(t,n),a=i.map((function(e){return{description:"With this subscription product, you will be gaining access to a multitude of services that will provide unlimited entertainment.",freeTrial:"30 days",price:"4.99",priceCurrencyCode:"USD",sku:e,skuType:"SUBSCRIPTION",subscriptionPeriod:"Monthly",termsAndConditions:"Offer limited to eligible X1/Flex residential customers with Xfinity Internet service. You will continue to be charged for Pandora Premium as long as you remain an Xfinity customer or until you cancel your plan. Pandora Premium uses your Internet service and will count against any Xfinity data plan.  Restrictions apply.  Offer may be terminated or changed by Comcast at any time.  After trial regular charges apply, currently $9.99 per month.  There are no refunds or credits for partial months.  Pricing subject to change.  Equipment, taxes and fees extra and subject to change during and after the promo.  © 2019.  All rights reserved",title:"A Mocked Subscription Product"}}));e.onGet("/product/details/".concat(i.join(","))).reply(200,a,{txid:"MOCKED_TRANSACTION_ID"})}var Ye=864e5,Ke="Offer limited to eligible X1/Flex residential customers with Xfinity Internet service. You will continue to be charged for The Mocked Product as long as you remain an Xfinity customer or until you cancel your plan. The Mocked Product uses your Internet service and will count against any Xfinity data plan.  Restrictions apply.  Offer may be terminated or changed by Comcast at any time.  After trial regular charges apply, currently $9.99 per month.  There are no refunds or credits for partial months.  Pricing subject to change.  Equipment, taxes and fees extra and subject to change during and after the promo.  © 2019.  All rights reserved",Ve="With this subscription product, you will be gaining access to a multitude of services that will provide unlimited entertainment.";function qe(){var e=new Date;return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}var We=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.title,o=void 0===n?"The Mocked Product":n,i=r.description,a=void 0===i?Ve:i,s=r.termsAndConditions,c=void 0===s?Ke:s,u=r.trialDurationInDays,l=void 0===u?30:u,p=r.price,f=void 0===p?"$9.99":p,d=r.discount,h=void 0===d?"$4.98":d;m(this,e),this.sku=t,this.title=o,this.description=a,this.termsAndConditions=c,this.trialDuration=0===l?void 0:"".concat(l," day"),this.trialDurationMS=Ye*l,this.price=f,this.discount=h,this.period="month",this.periodMS=qe()}return v(e,[{key:"toUpgradeObject",value:function(e,t){var r,n=this.periodMS/2,o=new Date(Date.now()+n),i="".concat(o.getMonth()+1,"/").concat(o.getDate(),"/").concat(o.getFullYear()),a=new Pe(this.sku,be.SUBSCRIBED).toPurchaseObject();switch(t){case Se.UPGRADE_TO_TRIAL:r="",a.priceText="Your ".concat(this.trialDuration," free trial will end on ").concat(i,". Your subscription will automatically renew for ").concat(this.price," per month after trial ends.");break;case Se.TRIAL_TO_PAID:r=" The price difference of ".concat(this.price," will be charged today."),a.priceText="Your subscription will automatically renew for ".concat(this.price," per month on ").concat(i,".");break;case Se.PAID_TO_PAID:r=" The price difference of $5 will be charged today.",a.priceText="Your subscription will automatically renew for ".concat(this.price," per month on ").concat(i,".");break;default:r="",a.priceText="The remaining value from your ".concat(this.title," subscription has been applied to today's charge of ").concat(this.discount,".")}return a.headerText="Thanks!",a.offerText="You're now subscribed to ".concat(this.title,". ").concat(r),a.productText="You can unsubscribe any time from the X1/Flex Settings menu.",a.linkedPurchaseId=e,a}},{key:"toDowngradeObject",value:function(e){var t=this.periodMS/2,r=new Date(Date.now()+t),n="".concat(r.getMonth()+1,"/").concat(r.getDate(),"/").concat(r.getFullYear()),o=new Date(Date.now()+t+864e5),i="".concat(o.getMonth()+1,"/").concat(o.getDate(),"/").concat(o.getFullYear()),a=new Pe(this.sku,be.FUTURE_SUBSCRIPTION).toPurchaseObject();return a.headerText="Thanks!",a.offerText="You will have access to ".concat(this.title," through ").concat(n,"."),a.priceText="Your subscription to ".concat(this.title," for ").concat(this.price," per ").concat(this.period," will start ").concat(i,"."),a.productText="You can unsubscribe any time from the X1/Flex Settings menu.",a.linkedPurchaseId=e,a}},{key:"toUnsubscribeObject",value:function(e){var t=this.periodMS/2,r=new Date(Date.now()+t),n="".concat(r.getMonth()+1,"/").concat(r.getDate(),"/").concat(r.getFullYear()),o=new Pe(this.sku,be.ENTITLED_UNSUBSCRIBED,e).toPurchaseObject({offset:-t,period:this.periodMS});return o.headerText="You're no longer subscribed to ".concat(this.title),o.offerText="This service will end on ".concat(n,"."),o.productText="We are sorry to see you go!",o}},{key:"toSubscribeObject",value:function(e){var t=new Date(Date.now()+this.trialDurationMS),r="".concat(t.getMonth()+1,"/").concat(t.getDate(),"/").concat(t.getFullYear()),n=new Pe(this.sku,be.SUBSCRIBED).toPurchaseObject({offset:0}),o=e?"Your free trial will end on ".concat(r,". "):"";return n.headerText="Thanks!",n.offerText="You're now subscribed to ".concat(this.title,"."),n.priceText="".concat(o,"Your subscription will automatically renew for ").concat(this.price," per ").concat(this.period," after trial ends."),n.productText="You can unsubscribe any time from the X1/Flex Settings menu.",n}},{key:"toBuyObject",value:function(){var e=new Pe(this.sku,be.PURCHASED).toPurchaseObject({offset:0});return e.headerText="Thanks!",e.offerText="You've now purchased ".concat(this.title,"."),e.priceText="For the price of ".concat(this.price),e.productText="",e}}]),e}();const Je=Object.freeze({P1D:"P1D",P1W:"P1W",P1Y:"P1Y",P6M:"P6M",P3M:"P3M",P1M:"P1M"});var Ze={statusCode:200,errorMessage:""};function $e(e){var t=new Date(e);return"".concat(t.getMonth()+1,"/").concat(t.getDate(),"/").concat(t.getFullYear())}function et(e){for(var t=0,r=0,n=0;n<e.length;n++)t+=Number(e[n].chargeAmount),e[n].productPrice&&(r+=Number(e[n].productPrice));return{totalChargeAmt:t.toFixed(2),totalPriceAmt:r.toFixed(2)}}function tt(e){var t="";switch(e){case Je.P1D:t="per day";break;case Je.P1W:t="per week";break;case Je.P1M:t="per month";break;case Je.P3M:t="per quarter";break;case Je.P6M:t="per semi-annum";break;case Je.P1Y:t="per year"}return t}var rt={statusCode:200,errorMessage:""};const nt=Object.freeze({X1D:"X1D",FLX:"FLX",PLC:"PLC"});function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ot(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var at=new URL(location.href),st="MOCKED_PRIMARY_PURCHASE_ID",ct=function(){function e(t,r){m(this,e),this.authMock=t,this.ajaxMock=r,this.productOneDefaults={},this.productTwoDefaults={title:"The Other Mocked Product"},this.subscriptions=[],this.bundleEntitlements=[]}return v(e,[{key:"addSubscription",value:function(e,t,r){e instanceof Pe?this.subscriptions.push(e):this.subscriptions.push(new Pe(e,t,r))}},{key:"addOfferedSubscription",value:function(e,t,r){this.addSubscription(e),t&&this.addSubscription(t),function(e,t,r){var n,o,i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Te,s=a.statusCode,c=void 0===s?200:s,u=a.errorMessage,l=void 0===u?"":u,p=a.mockScenario,f=void 0===p?"":p,d=new Date(Date.now()+t.periodMS/2),h="".concat(d.getMonth()+1,"/").concat(d.getDate(),"/").concat(d.getFullYear());switch(f){case Se.NEW_TO_PROMO:case Se.UPGRADE_TO_TRIAL:n="Start your ".concat(t.trialDuration," free trial today!"),o="".concat(t.price," per month after trial ends");break;case Se.TRIAL_TO_PAID:case Se.PAID_TO_PAID:n="Start your ".concat(t.title," subscription today!"),o="".concat(t.price," per month. You will be charged ").concat(t.title," price difference for the remaining portion of your subscription cycle.");break;case Se.CURRENTLY_IN_PROMO:n="Your current free trial will end on ".concat(h,"."),o="".concat(t.price," per ").concat(t.period," after trial ends");break;default:r?(n=null,o=null):(n=null,o="".concat(t.price," per ").concat(t.period))}f===Se.NEVER_SUBSCRIBED||f===Se.SUBSCRIBED_AND_NOT_RENEWING?i=[{type:"subscribe",overlayOfferText:{header:t.title,promotionText:n,priceText:o,description:t.description,termsAndConditions:t.termsAndConditions}}]:f===Se.SUBSCRIBED?i=r?[{type:"upgrade",overlayOfferText:{header:"You are changing your subscription to ".concat(t.title),promotionText:n||"Start your ".concat(t.title," subscription today!"),priceText:o||"".concat(t.price," per ").concat(t.period,". ").concat(t.discount," from your ").concat(r.title," subscription will be applied to today's charge."),description:t.description,termsAndConditions:t.termsAndConditions}},{type:"downgrade",overlayOfferText:{header:"You are changing your subscription to ".concat(t.title),promotionText:"Your ".concat(r.title," features will expire on ").concat(h," and your subscription will automatically renew for ").concat(t.title,"."),priceText:o||"".concat(t.price," per ").concat(t.period," unless you cancel your subscription"),description:t.description,termsAndConditions:t.termsAndConditions}}]:[{type:"unsubscribe",overlayOfferText:{header:"You're currently subscribed to ".concat(t.title),promotionText:"Your ".concat(t.trialDuration," free trial will end on ").concat(h,"."),priceText:"If you choose to unsubscribe, you can continue to enjoy this service through ".concat(h)}}]:(i=[{type:"subscribe",overlayOfferText:{header:t.title,promotionText:n,priceText:o,description:t.description,termsAndConditions:t.termsAndConditions}},{type:"unsubscribe",overlayOfferText:{header:"You're currently subscribed to ".concat(t.title),promotionText:"Your ".concat(t.trialDuration," free trial will end on ").concat(h,"."),priceText:"If you choose to unsubscribe, you can continue to enjoy this service through ".concat(h)}}],r&&i.push({type:"upgrade",overlayOfferText:{header:"You are changing your subscription to ".concat(t.title),promotionText:n||"Start your ".concat(t.title," subscription today!"),priceText:o||"".concat(t.price," per ").concat(t.period,". ").concat(t.discount," from your ").concat(r.title," subscription will be applied to today's charge."),description:t.description,termsAndConditions:t.termsAndConditions}},{type:"downgrade",overlayOfferText:{header:"You are changing your subscription to ".concat(t.title),promotionText:"Your ".concat(r.title," features will expire on ").concat(h," and your subscription will automatically renew for ").concat(t.title,"."),priceText:o||"".concat(t.price," per ").concat(t.period," unless you cancel your subscription"),description:t.description,termsAndConditions:t.termsAndConditions}}));var y={sku:t.sku,actions:i};200!==c&&(y={errorMessage:l}),e.onGet("/product/offer/sku/".concat(t.sku)).reply(c,y,{txid:"MOCKED_TRANSACTION_ID"})}(this.ajaxMock,new We(e.sku,this.productOneDefaults),t?new We(t.sku,this.productTwoDefaults):void 0,r)}},{key:"addOfferedConsent",value:function(e){var t=200;e===Se.BAD_USER_STANDING&&(t=400),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ze,r=t.statusCode,n=void 0===r?200:r,o=t.errorMessage,i=void 0===o?"":o,a={};200!==n&&(a={errorMessage:i});var s=new RegExp("".concat("/consent/overlay","/*"));e.onPost(s).reply((function(e){if(200===n){if(e.headers.Accept.includes("vnd.ccs.v2")){var t=JSON.parse(e.data),r=$e(t.productDetails[0].endDate),o=t.appName,i=et(t.productDetails);return a.formattedTotal="$".concat(i.totalChargeAmt," will be charged today and will renew $").concat(i.totalPriceAmt," ").concat(tt(t.productDetails[0].frequency)," beginning on ").concat(r),a.disclaimer="With Pay with Xfinity, these and any future charges from ".concat(o," will appear on your Xfinity bill. You can manage your account, view and cancel subscriptions, and view purchase history at any time via the ").concat(o," website."),a.termsAndConditions="Xfinity will continue to be your method of payment for ".concat(o," as long as you remain an Xfinity customer or until you cancel with ").concat(o,". If you are purchasing the ").concat(o," Bundle and have an existing subscription that is part of the ").concat(o," Bundle, you will continue to be billed separately for that product, and your ").concat(o," Bundle charge will be adjusted accordingly. Taxes and fees extra. Pricing subject to change. There are no refunds or credits for partial months. ").concat(o," content is Internet delivered and will count against any Xfinity data plan, if applicable. Use of service is governed by the ").concat(o," Subscriber Agreement [www.somewebsitez.com/legal/subscriber-agreement] and Privacy Policy [www.somewebsitez.com/legal/privacy-policy]."),[200,a,{txid:"MOCKED_TRANSACTION_ID"}]}var s=JSON.parse(e.data),c=s.appName;return a.formattedTotal="".concat(s.total," will be added to your Xfinity bill"),a.disclaimer="With Pay with Xfinity, these and any future charges from ".concat(c," will appear on your Xfinity bill. You can manage your account, view and cancel subscriptions, and view purchase history at any time via the ").concat(c," website."),a.termsAndConditions="Xfinity will continue to be your method of payment for ".concat(c," as long as you remain an Xfinity customer or until you cancel with ").concat(c,". If you are purchasing the ").concat(c," Bundle and have an existing subscription that is part of the ").concat(c," Bundle, you will continue to be billed separately for that product, and your ").concat(c," Bundle charge will be adjusted accordingly. Taxes and fees extra. Pricing subject to change. There are no refunds or credits for partial months. ").concat(c," content is Internet delivered and will count against any Xfinity data plan, if applicable. Use of service is governed by the ").concat(c," Subscriber Agreement [www.somewebsitez.com/legal/subscriber-agreement] and Privacy Policy [www.somewebsitez.com/legal/privacy-policy]."),[200,a,{txid:"MOCKED_TRANSACTION_ID"}]}return[n,a,{txid:"MOCKED_TRANSACTION_ID"}]}))}(this.ajaxMock),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt,r=t.statusCode,n=void 0===r?200:r,o=t.errorMessage,i=void 0===o?"":o,a={consentToken:"MOCKED_CONSENT_TOKEN=="};200!==n&&(a={errorMessage:i});var s=new RegExp("".concat("/consent/token","/*"));e.onPost(s).reply((function(){return 200===n?[200,a,{txid:"MOCKED_TRANSACTION_ID"}]:[n,a,{txid:"MOCKED_TRANSACTION_ID"}]}))}(this.ajaxMock,{statusCode:t})}},{key:"addBundleEntitlements",value:function(){var e;this.bundleEntitlements=((e=[]).push({id:"896da83-76-34t6-8456-2811855677"}),e.push({id:"574bt65-37-34t6-2873-2958287221"}),e)}},{key:"clearSubscriptions",value:function(){this.subscriptions=[]}},{key:"clear",value:function(){this.clearSubscriptions(),this.ajaxMock.reset(),this.authMock.reset()}},{key:"mockAuth",value:function(e){!function(e,t){var r="".concat(Z.baseUrl,"/account/authenticate"),n=t?401:200,o={bearerToken:"YOUR_MOCKED_BEARER_TOKEN",oat:"YOUR_MOCKED_OAT",d:"YOUR_MOCKED_D"};200!==n&&(o={errorMessage:"UnAuthorized."}),e.onPost(r).reply(n,o,{txid:"MOCKED_TRANSACTION_ID"})}(this.authMock,e)}},{key:"mockEligibility",value:function(){!function(e){var t="".concat(Z.baseCnsntsrvURL,"/eligibility"),r={header:"User Ineligible",reason:"Issue with the account",solution:"Contact Customer Support"};(at.searchParams.get("skin")?at.searchParams.get("skin"):nt.X1D)===nt.PLC&&(r={headerText:"Looks like account info is needed to continue",leftResolution:{leftOptionHeader:"Is your payment method up to date?",leftOptionSolutionOne:"Update your payment info at XClassTV.com/payment",leftOptionSolutionTwo:"or scan the QR below using your smartphone camera."},rightResolution:{rightOptionHeader:"Don't have a XClass TV Account?",rightOptionSolutionOneA:"Create a free account by pressing",rightOptionSolutionOneB:"on your remote.",rightOptionSolutionTwo:"Select Network > Add this TV to your XClass TV account",rightOptionNextStep:"Then reopen <app> to finish."}});var n={eligibility:!1,data:it({},r)};e.onGet(t).reply(200,n,{txid:"MOCKED_TRANSACTION_ID"})}(this.ajaxMock)}},{key:"mockAllSubscriptions",value:function(){ke.apply(void 0,[this.ajaxMock].concat(i(this.subscriptions)))}},{key:"mockBundledEntitlements",value:function(){Re.apply(void 0,[this.ajaxMock].concat(i(this.bundleEntitlements)))}},{key:"mockSnitchEvent",value:function(){!function(e){var t="".concat(Z.baseSnitchURL,"/mailbox");e.onPut(t).reply(200,{},{})}(this.authMock)}},{key:"mockScenario",value:function(e,t){var r=t.sku,n=t.oldSku,o=t.changeType,i=t.upgradeOption;this.mockAuth(),this.mockSnitchEvent(),this.mockEligibility(),Qe(this.ajaxMock,r);var a,s,c={},u={};switch(e){case Se.NEVER_SUBSCRIBED:c.mockScenario=Se.NEVER_SUBSCRIBED,this.addOfferedSubscription(new Pe(r),null,c),this.mockAllSubscriptions();break;case Se.SUBSCRIBED:c.mockScenario=Se.SUBSCRIBED,this.addOfferedSubscription(new Pe(r,be.SUBSCRIBED,st),null,c),this.mockAllSubscriptions();break;case Se.SUBSCRIBED_TO_OTHER:this.addOfferedSubscription(new Pe(r),new Pe(n,be.SUBSCRIBED,st)),this.mockAllSubscriptions();break;case Se.NEVER_BOUGHT:this.addOfferedSubscription(new Pe(r)),this.mockAllSubscriptions();break;case Se.HAVE_BOUGHT:c.statusCode=404,c.errorMessage="User Already Subscribed to the SKU",this.addOfferedSubscription(new Pe(r),null,c);break;case Se.INVALID_SKU:c.statusCode=404,c.errorMessage="Not Found",this.addOfferedSubscription(new Pe(r),null,c),this.mockAllSubscriptions();break;case Se.OAT_MISMATCH:u.statusCode=404,u.errorMessage="Given appName does not match with oat.",this.addOfferedSubscription(new Pe(r),null,c),this.mockAllSubscriptions();break;case Se.INVALID_PURCHASEID:u.statusCode=404,this.addOfferedSubscription(new Pe(r,be.SUBSCRIBED,st)),this.mockAllSubscriptions();break;case Se.BAD_USER_STANDING:u.statusCode=400,u.errorMessage="We need some help with your account.",this.addOfferedSubscription(new Pe(r,be.SUBSCRIBED,st)),this.mockAllSubscriptions();break;case Se.NEW_TO_PROMO:u.inPromo=!0,c.mockScenario=Se.NEW_TO_PROMO,this.addOfferedSubscription(new Pe(r,be.SUBSCRIBED,st),null,c),this.mockAllSubscriptions();break;case Se.CURRENTLY_IN_PROMO:u.inPromo=!0,c.mockScenario=Se.CURRENTLY_IN_PROMO,this.addOfferedSubscription(new Pe(r,be.SUBSCRIBED,st),null,c),this.mockAllSubscriptions();break;case Se.SUBSCRIBED_AND_NOT_RENEWING:c.mockScenario=Se.SUBSCRIBED_AND_NOT_RENEWING,this.addOfferedSubscription(new Pe(r,be.SUBSCRIBED,st),null,c),this.mockAllSubscriptions();break;case Se.INVALID_UPGRADEOPTION:"UPGRADE"===o&&(u.statusCode=400,u.errorMessage="Upgrade option: ".concat(i," is invalid")),this.addOfferedSubscription(new Pe(r),new Pe(n,be.SUBSCRIBED,st)),this.mockAllSubscriptions();break;case Se.INVALID_TIER_CHANGE:u.statusCode=500,u.errorMessage="Internal Server Error",this.addOfferedSubscription(new Pe(r),new Pe(n,be.SUBSCRIBED,st)),this.mockAllSubscriptions();break;case Se.UPGRADE_TO_TRIAL:c.mockScenario=Se.UPGRADE_TO_TRIAL,u.mockScenario=Se.UPGRADE_TO_TRIAL,this.addOfferedSubscription(new Pe(r),new Pe(n,be.SUBSCRIBED,st),c),this.mockAllSubscriptions();break;case Se.TRIAL_TO_PAID:c.mockScenario=Se.TRIAL_TO_PAID,u.mockScenario=Se.TRIAL_TO_PAID,this.addOfferedSubscription(new Pe(r),new Pe(n,be.SUBSCRIBED,st),c),this.mockAllSubscriptions();break;case Se.PAID_TO_PAID:c.mockScenario=Se.PAID_TO_PAID,u.mockScenario=Se.PAID_TO_PAID,this.addOfferedSubscription(new Pe(r),new Pe(n,be.SUBSCRIBED,st),c),this.mockAllSubscriptions();break;default:throw new Error("Invalid scenario: ".concat(e))}!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xe,n=r.statusCode,o=void 0===n?200:n,i=r.errorMessage,a=void 0===i?"":i,s=r.inPromo,c=void 0!==s&&s,u=t.toSubscribeObject(c);200!==o&&(u={errorMessage:a}),e.onPost("/subscriptions/sku/".concat(t.sku)).reply((function(){return 200===o?(_e(u.sku,be.SUBSCRIBED),[200,u,{txid:"MOCKED_TRANSACTION_ID"}]):[o,u,{txid:"MOCKED_TRANSACTION_ID"}]}))}(this.ajaxMock,new We(r,this.productOneDefaults),u),function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ge,o=n.statusCode,i=void 0===o?200:o,a=n.errorMessage,s=void 0===a?"":a,c=t.toUnsubscribeObject(r);200!==i&&(c={errorMessage:s}),e.onDelete("/subscriptions/purchaseIds/".concat(r)).reply((function(){if(200===i){var e=Me();return e[c.sku]&&e[c.sku].subState===be.FUTURE_SUBSCRIPTION?(_e(e[c.sku].pairSKU,be.STOPPED),Fe(c.sku)):_e(c.sku,be.STOPPED),[200,c,{txid:"MOCKED_TRANSACTION_ID"}]}return[i,c,{txid:"MOCKED_TRANSACTION_ID"}]}))}(this.ajaxMock,new We(r,this.productOneDefaults),st,u),o&&function(e,t,r,n,o){var i,a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ze,c=s.statusCode,u=void 0===c?200:c,l=s.errorMessage,p=void 0===l?"":l,f=s.mockScenario,d=void 0===f?"":f;200!==u?i={errorMessage:p}:r===Ue.UPGRADE?(i=t.toUpgradeObject(n,d),a=be.SUBSCRIBED):(i=t.toDowngradeObject(n),a=be.FUTURE_SUBSCRIPTION),e.onPost("/subscriptions/serviceChange").reply((function(){return 200===u?(_e(i.sku,a,o,r===Ue.UPGRADE?be.EXPIRED:be.CONVERTED),[200,i,{txid:"MOCKED_TRANSACTION_ID"}]):[u,i,{txid:"MOCKED_TRANSACTION_ID"}]}))}(this.ajaxMock,new We(r,this.productOneDefaults),o,st,n,u),a=this.ajaxMock,s=new We(r,this.productOneDefaults),a.onPost("/purchases/oneTimeProducts/sku/".concat(s.sku)).reply(200,s.toBuyObject(),{txid:"MOCKED_TRANSACTION_ID"}),this.ajaxMock.onAny().reply(404,{errorMessage:"Mocked server error occured "})}}]),e}();const ut=Object.freeze({DISCOUNT:"DISCOUNT",CHANGE_PAYMENT_INFO:"CHANGE_PAYMENT_INFO",CONVERT_WITHIN_SAME_PERIOD:"CONVERT_WITHIN_SAME_PERIOD"});var lt=Object.values(Ne),pt=Object.values(Ue),ft=Object.values(ut);function dt(e){return"string"===E(e)}var ht=v((function e(t){var r=t.type,n=t.sku,o=t.oldSku,i=t.quantity,a=void 0===i?1:i,s=t.changeType,c=t.upgradeOption;if(m(this,e),!lt.includes(r))throw new TypeError('property type, "'.concat(r,'", is not a valid TransactionType'));if(this.type=r,r===Ne.CHANGE){if(o===n)throw new Error("expected different values for sku and oldSku, but values were there same");if(!dt(o))throw new TypeError('expected property oldSku to be of type "string" or "number" in CHANGE transaction, but was of type '.concat(E(o)));if(this.oldSku=o,!s||!pt.includes(s))throw new TypeError('"'.concat(s,'" is not a valid changeType of a transaction'));if(this.changeType=s,"UPGRADE"===s){if(!c||!ft.includes(c))throw new TypeError('"'.concat(c,'" is not a valid upgradeOption of a transaction'));this.upgradeOption=c}}if(!dt(n))throw new TypeError('expected property sku to be of type "string" or "number", but was of type '.concat(E(n)));if(this.sku=n,this.quantity=parseInt(a,10),Number.isNaN(this.quantity))throw new TypeError("quantity could not be resolved to a number value")}));const yt=ht,gt=function(){function e(){m(this,e),this.merchantTransactionId=null,this.transactions=[],this.add.apply(this,arguments)}return v(e,[{key:"add",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=this.transactions).push.apply(e,i(r.map((function(e){return e instanceof yt?e:new yt(e)}))))}}]),e}(),bt=Object.freeze({vidDownSub:"vidDownSub",vidStreamSub:"vidStreamSub",vidFeatSub:"vidFeatSub",audDownSub:"audDownSub",audStreamSub:"audStreamSub",onDemand:"onDemand",PPV:"PPV",videoEST:"videoEST",audioEST:"audioEST",digitalEST:"digitalEST"}),vt=Object.freeze({PromoSub:"PromoSub",PaidSub:"PaidSub",RenewSub:"RenewSub",OneTime:"OneTime"});var mt=Object.values(bt),xt=Object.values(vt),wt=Object.values(Je);function Et(e){return"string"===E(e)}function St(e){return new Date(e).getTime()>0}function Tt(e){return/^\d+(\.\d{1,2})?$/.test(e)}const Ot=v((function e(t){var r,n=this,o=t.appName,i=t.appId,a=t.currency,s=t.productDetails;if(m(this,e),this.productSubscriptionInfo={},!o)throw new TypeError("Must provide an appName");if(this.appName=o,!o)throw new TypeError("Must provide an appId");if(this.appId=i,!a)throw new TypeError("Must provide a currency");if(this.currency=a,!s)throw new TypeError("Must provide an productDetails");if(this.productDescription="",!Array.isArray(s))throw new TypeError("productDetails must be type of Array");s.forEach((function(e){if(!e.description)throw new TypeError("Must provide a description");if(n.productDescription?n.productDescription+=", ".concat(e.description):n.productDescription=e.description,!e.sku)throw new TypeError("Must provide a SKU");if(!xt.includes(e.chargeCategory))throw new TypeError('property type, "'.concat(e.chargeCategory,'", is not a valid chargeCategoryType'));if(!e.startDate)throw new TypeError("Must provide an startDate");if(!St(e.startDate))throw new TypeError("startDate must be a valid UNIX supported timestamp");if(e.chargeCategory!==vt.OneTime){if(!e.endDate)throw new TypeError("Must provide an endDate");if(!St(e.endDate))throw new TypeError("endDate must be a valid UNIX supported timestamp");if(e.startDate>e.endDate)throw new TypeError("endDate must be ahead of startDate");if(!wt.includes(e.frequency))throw new TypeError('property type, "'.concat(e.frequency,'", is not a valid frequencyType'));if("{}"===JSON.stringify(n.productSubscriptionInfo))n.productSubscriptionInfo.frequency=e.frequency,n.productSubscriptionInfo.endDate=e.endDate;else if(n.productSubscriptionInfo.frequency!==e.frequency||n.productSubscriptionInfo.endDate!==e.endDate)throw new TypeError("Consent only supports product type of subscription with the same frequency and endDate")}var t=e.productCategory;if(!mt.includes(t)&&!t.startsWith("vudu"))throw new TypeError('property type, "'.concat(e.productCategory,'", is not a valid productCategory'));if(!e.productPrice)throw new TypeError("Must provide an productPrice");if(!Et(e.productPrice))throw new TypeError("productPrice must be a type of string");if(!Tt(e.productPrice))throw new TypeError("productPrice must be in a valid currency format");if(!e.chargeAmount)throw new TypeError("Must provide an chargeAmount");if(!Et(e.chargeAmount))throw new TypeError("chargeAmount must be a type of string");if(!Tt(e.chargeAmount))throw new TypeError("chargeAmount must be in a valid currency format")})),this.productDescription.length>270&&(this.productDescription=(r=this.productDescription.slice(0,260),"".concat(r," ...(more)"))),this.productDetails=s,this.productSubscriptionInfo={}}));function kt(){return At.apply(this,arguments)}function At(){return(At=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,j();case 4:t.xscd=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t.xscd=null;case 10:return e.next=12,_();case 12:return t.thor=e.sent,e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}var It={startTimeMillis:"",expiryTimeMillis:"",linkedPurchaseId:""},Dt=function(){function e(t,r,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:It,s=a.startTimeMillis,c=void 0===s?"":s,u=a.expiryTimeMillis,l=void 0===u?"":u,p=a.linkedPurchaseId,f=void 0===p?"":p;m(this,e);var d=ne();this.snitchPayloadData={eventName:"SubscriptionEvents",eventOrigin:"CommerceSDK",productID:t,uuid:o,transactionID:o,linkedPurchaseId:f,eventType:r,eventState:n?"Success":"Exception",partnerId:d,oat:g.get(D.OAT),subscriptionStartDate:c,subscriptionEndDate:l,timestamp:Date.now(),timezone:i}}var t;return v(e,[{key:"sendSnitchEvent",value:(t=s(u().mark((function e(){var t,r,n,o=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt();case 2:t=e.sent,r="".concat(Z.baseSnitchURL,"/mailbox"),n={headers:{Accept:Z.acceptHeader("subscribe"),"Content-Type":"application/json",xscd:t.xscd,thor:t.thor}},d().put(r,this.snitchPayloadData,n).then((function(){re.debug("Sending snitch data successfully.")}),(function(e){re.error("Snitch ".concat(e," with transactionId: ").concat(o.snitchPayloadData.transactionID))}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();const Ct=Dt;var Bt=function(){function e(t){m(this,e),this.description=t.description,this.freeTrial=t.freeTrial,this.price=t.price,this.priceCurrencyCode=t.priceCurrencyCode,this.sku=t.sku,this.subscriptionPeriod=t.subscriptionPeriod,this.title=t.title,this.skuType=t.skuType,this.termsAndConditions=t.termsAndConditions}var t,r,n,o;return v(e,[{key:"subscribe",value:(o=s(u().mark((function e(){var t,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return t=e.sent,re.info("Subscribing user to ".concat(this.sku,".")),e.abrupt("return",ge.post("/subscriptions/sku/".concat(this.sku),void 0,{headers:{Accept:Z.acceptHeader("subscribe")},params:{timeZoneMinutes:t},authType:oe.NO_RE_AUTH}).then((function(e){return re.debug("User successfully subscribed to ".concat(r.sku,".")),new Ct(r.sku,"subscribe",!0,e.headers.txid,t,e.data).sendSnitchEvent(),Ft(e)}),(function(e){return re.error("Failed to subscribe user to ".concat(r.sku,".")),new Ct(r.sku,"subscribe",!1,e.transactionId,t).sendSnitchEvent(),Promise.reject(e)})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"unsubscribe",value:(n=s(u().mark((function e(t){var r,n,o,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return r=e.sent,re.info("Unsubscribing user to the product with purchaseId: ".concat(t,".")),n="/subscriptions/purchaseIds/".concat(t),o={url:n,method:"DELETE",headers:{Accept:Z.acceptHeader("unsubscribe")},params:{timeZoneMinutes:r},authType:oe.NO_RE_AUTH},e.abrupt("return",ge(o).then((function(e){return re.debug("User successfully unsubscribed to the product with purchaseId: ".concat(t,".")),new Ct(i.sku,"unsubscribe",!0,e.headers.txid,r,e.data).sendSnitchEvent(),Ft(e)}),(function(e){return re.error("Failed to unsubscribe user to the product with purchaseId: ".concat(t,".")),new Ct(i.sku,"unsubscribe",!1,e.transactionId,r).sendSnitchEvent(),Promise.reject(e)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"change",value:(r=s(u().mark((function e(t,r,n){var o,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return o=e.sent,re.info("change user to the product: ".concat(this.sku," from the product: ").concat(t,".")),i={url:"/subscriptions/serviceChange",method:"POST",headers:{Accept:Z.acceptHeader("change")},params:{timeZoneMinutes:o},authType:oe.NO_RE_AUTH,data:{newSku:this.sku,oldSku:t,changeType:r}},"UPGRADE"===r&&(i.data.upgradeOption=n),e.abrupt("return",ge(i).then((function(e){return re.debug("User successfully change to the product: ".concat(a.sku," from the product: ").concat(t,".")),new Ct(a.sku,r.toLowerCase(),!0,e.headers.txid,o,e.data).sendSnitchEvent(),Ft(e)}),(function(e){return re.error("Failed to change to the product: ".concat(a.sku," from the product: ").concat(t,".")),new Ct(a.sku,r.toLowerCase(),!1,e.transactionId,o).sendSnitchEvent(),Promise.reject(e)})));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"purchase",value:(t=s(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re.info("User is purchasing a product with productId ".concat(this.sku,".")),e.t0=ge,e.t1="/purchases/oneTimeProducts/sku/".concat(this.sku),e.t2=void 0,e.t3={Accept:Z.acceptHeader("subscribe")},e.next=7,N();case 7:return e.t4=e.sent,e.t5={timeZoneMinutes:e.t4},e.t6={headers:e.t3,params:e.t5},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t6).then((function(e){return re.debug("User successfully subscribed to ".concat(t.sku,".")),Ft(e)}),(function(e){return re.error("Failed to subscribe user to ".concat(t.sku,".")),Promise.reject(e)})));case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"toObject",value:function(){return{description:this.description,freeTrial:this.freeTrial,price:this.price,priceCurrencyCode:this.priceCurrencyCode,sku:this.sku,subscriptionPeriod:this.subscriptionPeriod,title:this.title,skuType:this.skuType,termsAndConditions:this.termsAndConditions}}}]),e}(),Pt={};function Rt(){return Nt.apply(this,arguments)}function Nt(){return Nt=s(u().mark((function e(){var t,r,n,o,i,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=a.length,n=new Array(r),o=0;o<r;o++)n[o]=a[o];return re.trace("Fetching products: ".concat(n.join(", "),".")),i=(t=[]).concat.apply(t,n),e.abrupt("return",ge.get(Mt(i),{headers:{Accept:Z.acceptHeader("productDetails")}}).then((function(e){return re.trace("Successfully fetched products: ".concat(n.join(", "),".")),_t(e.data),e.data}),(function(e){return re.error("Failed to fetch products: ".concat(n.join(", "),".")),Promise.reject(e)})));case 4:case"end":return e.stop()}}),e)}))),Nt.apply(this,arguments)}function Ut(){return jt.apply(this,arguments)}function jt(){return jt=s(u().mark((function e(){var t,r,n,o,i,a,s,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=c.length,n=new Array(r),o=0;o<r;o++)n[o]=c[o];if(re.info("Getting products: ".concat(n.join(", "),".")),i=(t=[]).concat.apply(t,n),a=i.filter((function(e){return!Pt[e]})),s=function(){var e=i.map((function(e){return Pt[e]}));return re.debug("Got products: ".concat(n.join(", "),".")),1===e.length?e[0]:e},0===a.length){e.next=7;break}return e.abrupt("return",Rt(a).then((function(){return Promise.resolve(s())})));case 7:return e.abrupt("return",Promise.resolve(s()));case 8:case"end":return e.stop()}}),e)}))),jt.apply(this,arguments)}function Lt(){return Lt=s(u().mark((function e(){var t=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ut.apply(void 0,t).then((function(e){return e instanceof Array?e.map((function(e){return e.toObject()})):e.toObject()})));case 1:case"end":return e.stop()}}),e)}))),Lt.apply(this,arguments)}function _t(e){for(var t=0;t<e.length;t++)Pt[e[t].sku]=new Bt(e[t])}function Mt(e){return"/product/details/"+e.join(",")}function Ft(e){var t=e.data;return{data:{autoRenew:t.autoRenew,autoRenewStatus:t.autoRenewStatus,expiryTimeMillis:t.expiryTimeMillis,purchaseId:t.purchaseId,linkedPurchaseId:t.linkedPurchaseId||void 0,sku:t.sku,startTimeMillis:t.startTimeMillis,endData:t.endData},templateData:{headerText:t.headerText,confirmationProductText:t.productText,confirmationOfferText:t.offerText,confirmationPriceText:t.priceText},transactionId:e.headers.txid}}const Ht=Bt;var Xt=v((function e(t){m(this,e),t?(this.expiredSubscriptions=t.expiredSubscriptions,this.currentSubscriptions=t.currentSubscriptions,this.futureSubscriptions=t.futureSubscriptions):(this.expiredSubscriptions=[],this.currentSubscriptions=[],this.futureSubscriptions=[])})),Gt="/subscriptions";function zt(){return Qt.apply(this,arguments)}function Qt(){return(Qt=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re.trace("Fetching all subscriptions."),e.t0=ge,e.t1=Gt,e.t2={Accept:Z.acceptHeader("allSubscriptions")},e.next=6,N();case 6:return e.t3=e.sent,e.t4={types:"current,future,expired",timeZoneMinutes:e.t3},e.t5={headers:e.t2,params:e.t4},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t5).then((function(e){return re.debug("Successfully get all subscriptions."),{data:new Xt(e.data),transactionId:e.headers.txid}})).catch((function(e){return 404===e.statusCode?{data:new Xt,transactionId:e.transactionId}:(re.error("Failed to get all subscriptions."),Promise.reject(e))})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(){return Kt.apply(this,arguments)}function Kt(){return(Kt=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zt().then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vt=v((function e(t){m(this,e),this.bundledEntitlements=t?t.bundledEntitlements:[]})),qt="/account/{oat}/entitlements";function Wt(){return Jt.apply(this,arguments)}function Jt(){return(Jt=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re.trace("Fetching all bundle entitlements."),e.abrupt("return",ge.get(qt,{headers:{Accept:Z.acceptHeader("bundledEntitlements")}}).then((function(e){return re.debug("Successfully get all bundle entitlements."),{data:new Vt(e.data),transactionId:e.headers.txid}})).catch((function(e){return 404===e.statusCode?{data:new Vt,transactionId:e.transactionId}:(re.error("Failed to get all bundle entitlements."),Promise.reject(e))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zt(){return(Zt=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt().then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $t,er=v((function e(t){m(this,e),this.purchaseDetails=t?t.purchaseDetails:[]})),tr="/purchases/oneTimeProducts";function rr(){return nr.apply(this,arguments)}function nr(){return(nr=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re.trace("Fetching all purchases."),e.t0=ge,e.t1=tr,e.t2={Accept:Z.acceptHeader("allPurchases")},e.next=6,N();case 6:return e.t3=e.sent,e.t4={timeZoneMinutes:e.t3},e.t5={headers:e.t2,params:e.t4},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t5).then((function(e){return re.debug("Successfully get all purchases."),{data:new er(e.data),transactionId:e.headers.txid}})).catch((function(e){return 404===e.statusCode?{data:new er,transactionId:e.transactionId}:(re.error("Failed to get all purchases."),Promise.reject(e))})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function or(){return(or=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr().then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ir(){return(ir=s(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t){e.next=2;break}return e.abrupt("return",Promise.resolve({eligibility:!0}));case 2:return r="".concat(Z.baseCnsntsrvURL,"/eligibility"),re.info("Checking user eligibility."),$t=ge.get(r,{headers:{Accept:Z.acceptHeader("eligibility")},"CnstSrv-OAT-header":"x-ccs-oat"}).then((function(e){return e.data})).catch((function(e){return Promise.reject(e)})),e.abrupt("return",$t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const ar=function(e){return ir.apply(this,arguments)},sr="#8C8C8C",cr="#E5E5E5",ur="#000000",lr="#2B9CD8",pr='"Xfinity Sans Reg", XFINITYSans, sans-serif';var fr={X1D:{oldButtonStyle:{"background-color":"",color:cr,height:"61px",padding:"15px 0px 0px 4px"},buttonStyle:{"background-color":"",color:lr,height:"61px",padding:"15px 0px 0px 4px"},scrollType:"ALLOW",buttonOrientation:"LEFT_TO_RIGHT"},FLX:{oldButtonStyle:{"background-color":"#282B2C",color:sr,height:"62px",padding:"13px 20px"},buttonStyle:{"background-color":sr,color:cr,height:"75px",padding:"20px 20px"},scrollType:"ALLOW",buttonOrientation:"LEFT_TO_RIGHT"},PLC:{oldButtonStyle:{"background-color":ur,color:cr,height:"62px",padding:"13px 20px"},buttonStyle:{"background-color":cr,color:ur,height:"62px",padding:"13px 20px"},scrollType:"NONE",buttonOrientation:"UP_TO_DOWN"}},dr={X1D:{focusButtonStyle:{"background-color":"",color:lr,height:"61px",padding:"15px 0px 0px 4px"}},FLX:{focusButtonStyle:{"background-color":sr,color:cr,height:"62px",padding:"13px 20px"}},PLC:{focusButtonStyle:{"background-color":cr,color:ur,height:"62px",padding:"13px 20px"}}};function hr(e){return"commerceButtonCalled"+e.toLowerCase()}var yr={top:"50%",left:"50%","-webkit-transform":"translate(-50%,-50%)",transform:"translate(-50%,-50%)"};function gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var br=Object.assign({width:"880px","box-sizing":"border-box",padding:"71px 56px",background:ur,display:"block",position:"absolute"},yr),vr={display:"block",margin:"1em 0","font-size":"24px","font-family":'"Xfinity Sans Ex Lgt", XFINITYSans-ExLgt, sans-serif'},mr={display:"block",margin:"20px 0 0"},xr={display:"block","font-family":pr,"font-size":"20px","line-height":"26px","max-height":"78px",overflow:"hidden",color:sr},wr={X1D:{dialogOverlay:br,dialogHeader:{display:"block",margin:"0 0 1em","font-size":"42px",color:lr,width:"100%","white-space":"normal","margin-bottom":"16px"},dialogBody:vr,dialogFooter:mr,dialogFooterText:xr,baseBackground:"rgba(51, 51, 51, .8)"},FLX:{dialogOverlay:br,dialogHeader:{display:"block",margin:"0 0 1em","font-size":"42px",color:sr,width:"100%","white-space":"normal","margin-bottom":"16px"},dialogBody:vr,dialogFooter:mr,dialogFooterText:xr,baseBackground:"rgba(51, 51, 51, .8)"},PLC:{dialogOverlay:function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?gr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({width:"100%","box-sizing":"border-box",padding:"71px 56px",background:ur,display:"block",position:"absolute"},yr),dialogHeader:{display:"block",color:cr,margin:"0 0 0","font-size":"48px","font-family":"fonts/xfinitybrown-bold.woff",width:"100%","white-space":"normal","margin-top":"25px","text-align":"center","font-weight":"600"},dialogBody:{display:"block",margin:"1em 0","font-size":"24px","font-family":pr,"text-align":"center"},dialogFooter:mr,dialogFooterText:{display:"block","font-family":pr,"font-size":"24px","line-height":"26px",height:"auto",overflow:"hidden","text-align":"center"},baseBackground:"rgba(0, 0, 0, 1)"}},Er={X1D:{actionBarStyles:{"border-top":"1px solid #505050","border-bottom":"1px solid #505050",position:"relative",width:"100%",display:"block"},actionBarFocusStyles:{border:"4px solid #E5E5E5","border-width":"4px 0",height:"54px",position:"absolute","padding-right":"6px",transition:"width .4s, left .4s","-webkit-transition":"width .4s, left .4s",display:"block"},actionBarButtonStyles:{display:"inline-block",height:"61px","-webkit-backface-visibility":"hidden","backface-visibility":"hidden","box-sizing":"border-box","vertical-align":"middle","font-size":"28px","margin-right":"28px","padding-left":"4px","padding-top":"15px"}},FLX:{actionBarStyles:{position:"relative",width:"100%",display:"block",height:"85px"},actionBarFocusStyles:{height:"54px",position:"absolute","padding-right":"6px",display:"hidden"},actionBarButtonStyles:{display:"inline-block",height:"62px","-webkit-backface-visibility":"hidden","backface-visibility":"hidden","box-sizing":"border-box","vertical-align":"middle","font-size":"28px","margin-right":"28px","margin-top":"20px",padding:"13px 20px",color:"#949a9f",border:"1px solid black","border-radius":"5px","background-color":"#282b2c"}},PLC:{actionBarStyles:{position:"relative",width:"30%",display:"block",height:"auto","margin-right":"auto","margin-left":"auto","margin-bottom":"15px"},actionBarFocusStyles:{height:"54px",position:"absolute","padding-right":"6px",display:"hidden"},actionBarButtonStyles:{display:"block",height:"62px","-webkit-backface-visibility":"hidden","backface-visibility":"hidden","box-sizing":"border-box","vertical-align":"middle","text-align":"center","font-size":"28px","margin-right":"0px","margin-top":"20px",padding:"13px 20px",color:"#FFFFFF",border:"1px solid #FFFFFF","border-radius":"5px","background-color":"#000000"}}};function Sr(e,t){if(0===e.length)throw new Error("Expected an array containing at least one string");for(var r=[{attrs:{id:"commerceActionBarFocus"},styles:Er[t].actionBarFocusStyles}],n=0;n<e.length;n++)r.push({attrs:{id:hr(e[n])},styles:Er[t].actionBarButtonStyles,text:e[n]});return{styles:Er[t].actionBarStyles,children:r}}var Tr={display:"block",width:"0",height:"0","border-left":"7px solid transparent","border-right":"7px solid transparent"},Or=Object.assign({visibility:"hidden","border-bottom":"7px solid #505050"},Tr),kr=Object.assign({"border-top":"7px solid #505050"},Tr);function Ar(e,t){return{type:"footer",styles:wr[t].dialogFooter,children:[{styles:Or,attrs:{id:"commerceScrollingTextUpArrow"}},{styles:wr[t].dialogFooterText,children:[{styles:{display:"block"},attrs:{id:"commerceScrollingTextText"},text:e}]},{styles:kr,attrs:{id:"commerceScrollingTextDownArrow"}}]}}function Ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ir(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Cr={width:"100%",height:"100%","box-sizing":"border-box",padding:"71px 32px",background:"#000000",display:"block",position:"absolute",top:"48%",left:"50%","-webkit-transform":"translate(-50%,-50%)",transform:"translate(-50%,-50%)"},Br={display:"block",margin:"0 0 1em","font-size":"32px",color:"#FFFFFF",width:"100%","white-space":"normal","margin-bottom":"16px","text-align":"center","font-weight":"600"},Pr={display:"block",margin:"1em 0",width:"48%","font-size":"40px","font-family":'"Xfinity Standard-Medium", Xfinity Brown-Bold, sans-serif',float:"left","text-align":"center","margin-top":"10px"},Rr={display:"block",margin:"1em 0",width:"4%",float:"left","margin-top":"30px"},Nr={display:"block",margin:"1em 0",width:"48%","font-size":"40px","font-family":'"Xfinity Standard-Medium", Xfinity Brown-Bold, sans-serif',float:"left","text-align":"center","margin-top":"10px"},Ur={"font-size":"20px","font-family":'"Xfinity Sans Ex Lgt", XFINITYSans-ExLgt, sans-serif',"text-align":"center","margin-top":"10px","margin-bottom":"0px"},jr=[{"border-left":"2px solid gray",height:"100px",position:"relative",left:"50%","margin-top":"10px"},{"border-left":"2px solid gray",height:"100px",position:"relative",left:"50%","margin-top":"10px"}],Lr=r(163),_r=r.n(Lr),Mr=r(601),Fr=r.n(Mr),Hr={width:"100%",height:"1%",clear:"both"};function Xr(e){e.off(["key:select","key:left","key:right","key:up","key:down","key:back"])}var Gr=function(){function e(t,r,n,o,i){m(this,e),this.productId=t,this.setButtons(i),this.scrollTextHeight=0,this.scrollTextOffset=0,this.confirmIsFocused=!1,this.view=r,this.eventBus=n,this.platformType=o,this.isNotEligible=!1,this.errorData={},this.transactionId=""}var t,r,n;return v(e,[{key:"addEventListeners",value:function(){var e=this;this.eventBus.on("key:select",s(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==e.isNotEligible){t.next=19;break}if("Cancel"!==e.focusedButton){t.next=5;break}e.eventBus.emit("error",e.errorData,e.transactionId),t.next=18;break;case 5:if("Continue"!==e.focusedButton){t.next=18;break}return e.view.wait(),t.prev=7,t.next=10,e.render();case 10:e.view.continue(),t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(7),e.view.continue(),e.eventBus.emit("error",t.t0),t.abrupt("return");case 18:return t.abrupt("return");case 19:if(!e.confirmIsFocused){t.next=34;break}return re.debug("User confirmed dialog."),e.showLoading(),t.prev=22,t.next=25,e.execute();case 25:e.hideLoading(),t.next=32;break;case 28:t.prev=28,t.t1=t.catch(22),e.hideLoading(),e.eventBus.emit("error",t.t1);case 32:t.next=35;break;case 34:e.closeDialog();case 35:case"end":return t.stop()}}),t,null,[[7,13],[22,28]])})))),this.eventBus.on("key:left",(function(){e.navigateButtons("left")})),this.eventBus.on("key:right",(function(){e.navigateButtons("right")})),this.eventBus.on("key:up",(function(t){t?(e.focusedButton=e.buttons[t.button],e.confirmIsFocused=!1):e.navigateButtons("up")})),this.eventBus.on("key:down",(function(t){t?(e.focusedButton=e.buttons[t.button],e.confirmIsFocused=!0):e.navigateButtons("down")})),this.eventBus.on("key:back",(function(){re.debug("User dismissed dialog."),e.eventBus.emit("dismiss",{message:"User dismissed the dialog"})}))}},{key:"fetchData",value:(n=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(this.productId);case 2:this.product=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getDialogRenderObject",value:function(){return function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nt.X1D,s=[],c=!1;if(s.push({type:"header",styles:wr[a].dialogHeader,text:e}),t&&t.length>0){var u=Dr({},wr[a].dialogBody);a===nt.PLC&&(c=!0,u.margin="0em 0"),s.push({type:"p",styles:u,text:t})}var l=Dr({},wr[a].dialogBody);return c||a!==nt.PLC?l.margin="1em 0":l.margin="0em 0",s.push({type:"p",styles:l,text:r}),n&&n.length>0&&s.push({type:"p",styles:wr[a].dialogBody,text:n}),s.push(Sr(i,a)),o&&o.length>0&&s.push(Ar(o,a)),{styles:wr[a].dialogOverlay,children:s}}(this.offerTextOverlay.header,this.offerTextOverlay.promotionText,this.offerTextOverlay.priceText,this.offerTextOverlay.description,this.offerTextOverlay.termsAndConditions,this.buttons,this.platformType)}},{key:"execute",value:(r=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"render",value:(t=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.view.wait(),e.prev=1,re.debug("Fetching render data."),e.next=5,this.fetchData();case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),this.view.continue(),this.eventBus.emit("error",e.t0),e.abrupt("return");case 12:if(!0!==this.isNotEligible){e.next=17;break}return this.platformType===nt.PLC&&(this.$el=this.view.render((t=this.templateData,r=this.buttons,void 0,void 0,void 0,a=void 0,void 0,void 0,void 0,n=t.headerText,o=t.leftResolution,i=t.rightResolution,a=[],s=[{type:"p",styles:{"font-size":"25px","margin-bottom":"8px","font-weight":"600"},text:o.leftOptionHeader},{type:"p",styles:{"font-size":"21px",margin:"0"},text:o.leftOptionSolutionOne},{type:"p",styles:{"font-size":"21px",margin:"0"},text:o.leftOptionSolutionTwo},{type:"img",attrs:{src:_r(),width:"140",height:"140"},styles:{"margin-top":"20px"}}],c=[{type:"div",styles:jr[0]},{type:"p",styles:Ur,text:"OR"},{type:"div",styles:jr[1]}],u=[{type:"p",styles:{"font-size":"25px","margin-bottom":"8px","font-weight":"600"},text:i.rightOptionHeader},{type:"p",styles:{"font-size":"21px",margin:"0"},children:[{type:"span",text:i.rightOptionSolutionOneA},{type:"img",styles:{"margin-left":"4px","margin-right":"4px"},attrs:{src:Fr(),width:"20",height:"20"}},{type:"span",text:i.rightOptionSolutionOneB}]},{type:"p",styles:{"font-size":"21px",margin:"0"},text:i.rightOptionSolutionTwo},{type:"p",styles:{"font-size":"20px",margin:"0"},text:i.rightOptionNextStep}],a.push({type:"header",styles:Br,text:n}),a.push({type:"div",styles:Pr,children:s}),a.push({type:"div",styles:Rr,children:c}),a.push({type:"div",styles:Nr,children:u}),a.push({type:"div",styles:Hr}),a.push(Sr(r,nt.PLC)),{styles:Cr,children:a}),Xr(this.eventBus),"ineligible"),this.focusButton(this.focusedButton)),this.addEventListeners(),this.view.continue(),e.abrupt("return");case 17:if(re.debug("Rendering dialog for product ".concat(this.productId,".")),this.$el=this.view.render(this.getDialogRenderObject(),Xr(this.eventBus),this.offerTextOverlay.type,this.platformType),this.focusButton(this.focusedButton),this.$el){e.next=24;break}return this.addEventListeners(),this.view.continue(),e.abrupt("return");case 24:this.$scrollingTextText=this.$el.querySelector("#commerceScrollingTextText"),this.$scrollingTextText&&("ALLOW"!==fr[this.platformType].scrollType?this.$el.querySelector("#commerceScrollingTextDownArrow").style.display="none":(this.scrollTextHeight=this.$scrollingTextText.offsetHeight,this.$el.querySelector("#commerceScrollingTextDownArrow").style.visibility=this.scrollTextHeight<=78?"hidden":"visible")),this.addEventListeners(),this.view.continue();case 28:case"end":return e.stop()}var t,r,n,o,i,a,s,c,u}),e,this,[[1,7]])}))),function(){return t.apply(this,arguments)})},{key:"showLoading",value:function(){this.view.wait()}},{key:"hideLoading",value:function(){this.view.continue()}},{key:"closeDialog",value:function(e){re.debug("User cancelled dialog."),this.eventBus.emit("dismiss",e||"")}},{key:"setButtons",value:function(e){this.buttons=e,this.focusedButton=e[0]}},{key:"navigateButtons",value:function(e){"LEFT_TO_RIGHT"===fr[this.platformType].buttonOrientation?("left"===e&&(this.focusButton(this.buttons[0]),this.confirmIsFocused=!1),"right"===e&&(this.focusButton(this.buttons[1]),this.confirmIsFocused=!0),"up"===e&&this.scrollTextUp(),"down"===e&&this.scrollTextDown()):("up"===e&&(this.focusButton(this.buttons[0]),this.confirmIsFocused=!1),"down"===e&&(this.focusButton(this.buttons[1]),this.confirmIsFocused=!0))}},{key:"focusButton",value:function(e){if(this.$el){re.debug("Focusing dialog button: ".concat(e,"."));var t=this.$el.querySelector("#"+hr(this.focusedButton)),r=this.$el.querySelector("#"+hr(e)),n=this.$el.querySelector("#commerceActionBarFocus");this.focusedButton=e,n.style.width=r.offsetWidth+"px",n.style.left=r.offsetLeft+"px",t.style["background-color"]=fr[this.platformType].oldButtonStyle["background-color"],t.style.color=fr[this.platformType].oldButtonStyle.color,t.style.height=fr[this.platformType].oldButtonStyle.height,t.style.padding=fr[this.platformType].oldButtonStyle.padding,r.style["background-color"]=fr[this.platformType].buttonStyle["background-color"],r.style.color=fr[this.platformType].buttonStyle.color,r.style.height=fr[this.platformType].buttonStyle.height,r.style.padding=fr[this.platformType].buttonStyle.padding}}},{key:"scrollTextUp",value:function(){re.trace("Attempting to scroll text up."),this.$scrollingTextText&&this.scrollTextOffset<0&&(re.debug("Scrolling text down."),this.scrollTextOffset+=26,this.$scrollingTextText.style.marginTop=this.scrollTextOffset+"px",0===this.scrollTextOffset&&(re.trace("Reached top of scrolling text."),this.$el.querySelector("#commerceScrollingTextUpArrow").style.visibility="hidden"),this.$el.querySelector("#commerceScrollingTextDownArrow").style.visibility="visible")}},{key:"scrollTextDown",value:function(){re.trace("Attempting to scroll text down."),this.$scrollingTextText&&this.scrollTextOffset+this.scrollTextHeight>78&&(re.debug("Scrolling text down."),this.scrollTextOffset-=26,this.$scrollingTextText.style.marginTop=this.scrollTextOffset+"px",this.scrollTextOffset+this.scrollTextHeight===78&&(re.trace("Reached bottom of scrolling text."),this.$el.querySelector("#commerceScrollingTextDownArrow").style.visibility="hidden"),this.$el.querySelector("#commerceScrollingTextUpArrow").style.visibility="visible")}}]),e}();const zr=Object.freeze({UNAUTHORIZED:401,FORBIDDEN:403,NOTFOUND:404,INELIGIBLE:{MO:400,PP:403},INTERNAL_SERVER_ERROR:500});var Qr=v((function e(t){m(this,e),this.sku=t.sku,this.type=t.type,this.header=t.header,this.promotionText=t.promotionText,this.priceText=t.priceText,this.description=t.description,this.termsAndConditions=t.termsAndConditions}));function Yr(e,t){return Kr.apply(this,arguments)}function Kr(){return(Kr=s(u().mark((function e(t,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re.trace("Fetching offer overlay with type=".concat(r,".")),e.t0=ge,e.t1="/product/offer/sku/".concat(t),e.t2={Accept:Z.acceptHeader("offerTextOverlay")},e.next=6,N();case 6:return e.t3=e.sent,e.t4={timeZoneMinutes:e.t3},e.t5={headers:e.t2,params:e.t4},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t5).then((function(e){re.debug("Successfully fetch the offer text overlays.");var n=e.data.actions.find((function(e){return e.type===r}));if(!n){re.error("Failed to fetch the offer text overlay for the order of type ".concat(r));var o="User is already ".concat(r,"d to the SKU");return Promise.reject(new I(o,e.headers.txid,zr.FORBIDDEN))}return new Qr({sku:t,type:r,header:n.overlayOfferText.header,promotionText:n.overlayOfferText.promotionText,priceText:n.overlayOfferText.priceText,description:n.overlayOfferText.description,termsAndConditions:n.overlayOfferText.termsAndConditions})})).catch((function(e){return re.error("Failed to fetch the offer text overlay"),Promise.reject(e)})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vr(e){return qr.apply(this,arguments)}function qr(){return(qr=s(u().mark((function e(t){var r,n,o,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n="consentTextOverlayV2",r={appId:t.appId,appName:t.appName,partnerId:ne(),productDetails:t.productDetails},e.next=5,kt();case 5:return o=e.sent,i="".concat(Z.baseCnsntsrvURL,"/overlay"),e.abrupt("return",ge.post(i,r,{headers:{Accept:Z.acceptHeader(n),xscd:o.xscd,thor:o.thor},"CnstSrv-OAT-header":"x-ccs-oat"}).then((function(e){re.debug("Successfully fetch the offer text overlays.");var r=e.data;return new Qr({sku:"consent",type:"CONSENT",header:t.appName,promotionText:t.productDescription,priceText:r.formattedTotal,description:r.disclaimer,termsAndConditions:r.termsAndConditions})})).catch((function(e){return re.error("Failed to fetch the offer text overlay"),Promise.reject(e)})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const Wr=function(){function e(t){m(this,e),this.consentPayloadData=[{appId:t.appId,oat:g.get(D.OAT),msoPartner:ne(),currency:t.currency,totalChargeAmount:t.formattedTotal,productDetails:t.productDetails}]}var t;return v(e,[{key:"consent",value:(t=s(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re.trace("Fetching Consent token"),t="".concat(Z.baseCnsntsrvURL,"/token"),r={url:t,method:"POST",headers:{Accept:Z.acceptHeader("consent")},data:this.consentPayloadData,"CnstSrv-OAT-header":"x-ccs-oat"},e.abrupt("return",ge(r).then((function(e){return re.debug("Successfully get consent token"),e}),(function(e){return re.error("Unsuccessfully get consent token"),Promise.reject(e)})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();var Jr=function(){function e(t,r,n,o,i){m(this,e),this.templateData=t,this.errorData=r,this.transactionId=r.transactionId,this.button="Close",this.view=n,this.eventBus=o,this.platformType=i}return v(e,[{key:"addEventListeners",value:function(){var e=this;this.eventBus.on(["key:select","key:back"],(function(){re.debug("User dismissed Error dialog."),e.eventBus.emit("error",e.errorData,e.transactionId)}))}},{key:"render",value:function(){var e,t,r,n,o,i;re.debug("Rendering Error dialog."),this.$el=this.view.render((e=this.templateData,t=this.platformType,r=e.header,n=e.reason,o=e.solution,i=[{type:"header",styles:wr[t].dialogHeader,text:r},{type:"p",styles:vr,text:n},{type:"p",styles:vr,text:o},Sr(["Close"],t)],{styles:br,children:i}),void this.eventBus.off(["key:select","key:back"]),"ineligible"),this.focusButton(),this.addEventListeners()}},{key:"focusButton",value:function(){if(this.$el){re.debug("Focusing dialog button: ".concat(this.button,"."));var e=this.$el.querySelector("#".concat(hr(this.button))),t=this.$el.querySelector("#commerceActionBarFocus");t.style.width=e.offsetWidth+"px",t.style.left=e.offsetLeft+"px",e.style["background-color"]=dr[this.platformType].focusButtonStyle["background-color"],e.style.color=dr[this.platformType].focusButtonStyle.color,e.style.height=dr[this.platformType].focusButtonStyle.color,e.style.padding=dr[this.platformType].focusButtonStyle.color}}}]),e}();var Zr=function(e){w(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(n);if(o){var r=T(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t,r,n,o,s){var c;return m(this,a),(c=i.call(this,e,n,o,s,["Cancel","Confirm"])).product=new Ht({sku:c.productId}),c.productInfo=t,c.checkForEligibility=r,c}return v(a,[{key:"showLoading",value:function(){this.consentLoading=this.view.getConsentLoadingSpinner(440,140),this.consentLoading.render()}},{key:"hideLoading",value:function(){this.consentLoading.stop(),this.pinErr&&this.render()}},{key:"fetchData",value:(r=s(u().mark((function e(){var t,r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(this.checkForEligibility);case 2:if(!0!==(t=e.sent).eligibility){e.next=12;break}if(this.pinErr){e.next=8;break}return e.next=7,Vr(this.productInfo);case 7:this.offerTextOverlay=e.sent;case 8:this.consentToken=new Wr(this.productInfo),this.isNotEligible=!1,e.next=13;break;case 12:t.hasOwnProperty("data")?(this.isNotEligible=!0,r=t.data,this.platformType!==nt.PLC?new Jr(r,new I("User Ineligible",t.transactionId,zr.INELIGIBLE.PP),this.view,this.eventBus,this.platformType).render():(this.templateData=r,this.setButtons(["Continue","Cancel"]),this.errorData=new I("User Ineligible",t.transactionId,zr.INELIGIBLE.PP),this.transactionId=t.transactionId)):(n=new I(t.eligibility,t.transactionId,zr.INELIGIBLE.PP),this.eventBus.emit("error",n,t.transactionId));case 13:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"execute",value:(t=s(u().mark((function e(){var t,r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.pinErr=null,e.next=4,F();case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(0),"USER_DISMISSED_OVERLAY"===e.t0.status||"LOCKED"===e.t0.status){e.next=10;break}throw e.t0;case 10:return this.pinErr=e.t0,e.abrupt("return");case 12:return e.prev=12,e.next=15,this.consentToken.consent();case 15:t=e.sent,this.eventBus.emit("success",{consentToken:t.data.consentToken},t.headers.txid),this.closeDialog(),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(12),e.t1.statusCode===zr.INELIGIBLE.PP?e.t1.data?new Jr(e.t1.data,new I(e.t1.data,e.t1.transactionId,e.t1.statusCode),this.view,this.eventBus).render():(r=new I("false",e.t1.transactionId,e.t1.statusCode),this.eventBus.emit("error",r,e.t1.transactionId)):(n=new I("false",e.t1.transactionId,e.t1.statusCode),this.eventBus.emit("error",n,e.t1.transactionId));case 23:case"end":return e.stop()}}),e,this,[[0,6],[12,20]])}))),function(){return t.apply(this,arguments)})}]),a}(Gr);function $r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var en=function(){function t(e,r,n,o,i,a){m(this,t),this.templateData=e,this.successData=r,this.transactionId=n,this.button="Close",this.view=o,this.eventBus=i,this.platformType=a}return v(t,[{key:"addEventListeners",value:function(){var e=this;this.eventBus.on(["key:select","key:back"],(function(){re.debug("User dismissed success dialog."),e.eventBus.emit("success",e.successData,e.transactionId)}))}},{key:"render",value:function(){re.debug("Rendering success dialog."),this.$el=this.view.render(function(t,r){var n=t.headerText,o=t.confirmationProductText,i=t.confirmationOfferText,a=t.confirmationPriceText,s=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?$r(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},wr[r].dialogBody);r===nt.PLC&&(s.margin="0em 0px");var c=[{type:"header",styles:wr[r].dialogHeader,text:n},{type:"p",styles:s,text:i},{type:"p",styles:wr[r].dialogBody,text:a},{type:"p",styles:wr[r].dialogBody,text:o},Sr(["Close"],r)];return{styles:br,children:c}}(this.templateData,this.platformType),void this.eventBus.off(["key:select","key:back"]),"success"),this.focusButton(),this.addEventListeners()}},{key:"focusButton",value:function(){if(this.$el){re.debug("Focusing dialog button: ".concat(this.button,"."));var e=this.$el.querySelector("#".concat(hr(this.button))),t=this.$el.querySelector("#commerceActionBarFocus");t.style.width=e.offsetWidth+"px",t.style.left=e.offsetLeft+"px",e.style["background-color"]=dr[this.platformType].focusButtonStyle["background-color"],e.style.color=dr[this.platformType].focusButtonStyle.color,e.style.height=dr[this.platformType].focusButtonStyle.color,e.style.padding=dr[this.platformType].focusButtonStyle.color}}}]),t}();const tn=Object.freeze({subscribe:"subscribe",unsubscribe:"unsubscribe",upgrade:"upgrade",downgrade:"downgrade"});var rn=function(e){w(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(n);if(o){var r=T(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t,r,n){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nt.X1D;return m(this,a),(o=i.call(this,e,r,n,s,["Cancel","Subscribe"])).product=new Ht({sku:o.productId}),o.checkForEligibility=t,o}return v(a,[{key:"fetchData",value:(r=s(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ar(this.checkForEligibility);case 3:if(!0!==(t=e.sent).eligibility){e.next=10;break}return e.next=7,Yr(this.productId,tn.subscribe);case 7:return this.offerTextOverlay=e.sent,this.isNotEligible=!1,e.abrupt("return",this.offerTextOverlay);case 10:if(!t.hasOwnProperty("data")){e.next=16;break}this.isNotEligible=!0,r=t.data,this.platformType!==nt.PLC?new Jr(r,new I("User Ineligible",t.transactionId,zr.INELIGIBLE.MO),this.view,this.eventBus,this.platformType).render():(this.templateData=r,this.setButtons(["Continue","Cancel"]),this.errorData=new I("User Ineligible",t.transactionId,zr.INELIGIBLE.MO),this.transactionId=t.transactionId),e.next=17;break;case 16:throw new I(t.eligibility,t.transactionId,zr.INELIGIBLE.MO);case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 22:case"end":return e.stop()}}),e,this,[[0,19]])}))),function(){return r.apply(this,arguments)})},{key:"execute",value:(t=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F();case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),"USER_DISMISSED_OVERLAY"===e.t0.status||"LOCKED"===e.t0.status){e.next=9;break}throw e.t0;case 9:return e.abrupt("return");case 10:return e.prev=10,e.next=13,this.product.subscribe();case 13:t=e.sent,Object.assign(t.data,{type:"ADD"}),new en(t.templateData,t.data,t.transactionId,this.view,this.eventBus,this.platformType).render(),e.next=31;break;case 19:if(e.prev=19,e.t1=e.catch(10),e.t1.statusCode!==zr.INELIGIBLE.MO){e.next=30;break}if(!e.t1.data){e.next=27;break}new Jr(e.t1.data,new I(e.t1.data,e.t1.transactionId,e.t1.statusCode),this.view,this.eventBus).render(),e.next=28;break;case 27:throw new I("false",e.t1.transactionId,e.t1.statusCode);case 28:e.next=31;break;case 30:return e.abrupt("return",Promise.reject(e.t1));case 31:case"end":return e.stop()}}),e,this,[[0,5],[10,19]])}))),function(){return t.apply(this,arguments)})}]),a}(Gr);function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var on=function(e){w(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(n);if(o){var r=T(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nt.X1D;return m(this,a),(n=i.call(this,e,t,r,o,["Close","Unsubscribe"])).product=new Ht({sku:n.productId}),n}return v(a,[{key:"fetchData",value:(r=s(u().mark((function e(){var t,r,n,o,i,a,s=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Yt(),Yr(this.productId,tn.unsubscribe)]);case 2:if(t=e.sent,r=nn(t,2),this.allSubscriptions=r[0],this.offerTextOverlay=r[1],n=this.allSubscriptions.futureSubscriptions,o=this.allSubscriptions.currentSubscriptions,i=o&&o.find((function(e){return e.sku===s.productId&&"active"===e.autoRenewStatus.toLowerCase()})),a=n&&n.find((function(e){return e.sku===s.productId&&"active"===e.autoRenewStatus.toLowerCase()})),i||a){e.next=13;break}throw re.debug("User cannot unsubscribe to the product: ".concat(this.productId," not in active state.")),new Error("User cannot unsubscribe to the product: ".concat(this.productId," not in active state."));case 13:this.purchaseId=a?a.purchaseId:i.purchaseId;case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"execute",value:(t=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.product.unsubscribe(this.purchaseId);case 2:t=e.sent,Object.assign(t.data,{type:"CANCEL"}),new en(t.templateData,t.data,t.transactionId,this.view,this.eventBus,this.platformType).render();case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(Gr);var an=function(e){w(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(n);if(o){var r=T(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t,r,n,o,s,c){var u,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:nt.X1D;return m(this,a),(u=i.call(this,e,s,c,l,["Cancel","Change"])).oldProductId=t,u.changeType=n,u.upgradeOption=o,u.product=new Ht({sku:u.productId}),u.checkForEligibility=r,u}return v(a,[{key:"fetchData",value:(r=s(u().mark((function e(){var t,r,n,o,i,a,s,c,l,p,f,d=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ar(this.checkForEligibility);case 3:if(!0!==(t=e.sent).eligibility){e.next=28;break}return e.next=7,Promise.all([Yt(),Yr(this.productId,this.changeType.toLowerCase())]);case 7:if(r=e.sent,n=nn(r,2),this.allSubscriptions=n[0],this.offerTextOverlay=n[1],o=this.allSubscriptions.currentSubscriptions,i=this.allSubscriptions.futureSubscriptions,o){e.next=16;break}throw re.debug("User cannot make ".concat(this.changeType," change order")),new Error("User cannot make ".concat(this.changeType," change order"));case 16:if(a=o.find((function(e){return e.sku===d.productId})),s=o.find((function(e){return e.sku===d.productId&&"active"===e.autoRenewStatus.toLowerCase()})),c=i&&i.find((function(e){return e.sku===d.productId})),l=o.find((function(e){return e.sku===d.oldProductId&&"active"===e.autoRenewStatus.toLowerCase()})),p=i&&i.find((function(e){return e.sku===d.oldProductId&&"active"===e.autoRenewStatus.toLowerCase()})),f=l||p,!(a&&c||s)&&f){e.next=26;break}throw re.debug("User cannot make ".concat(this.changeType," change order")),new Error("User cannot make ".concat(this.changeType," change order"));case 26:e.next=34;break;case 28:if(!t.hasOwnProperty("data")){e.next=33;break}new Jr(t.eligibility,new I(t.data,t.headers.txid,zr.INELIGIBLE.MO),this.view,this.eventBus).render(),e.next=34;break;case 33:throw new I(t.eligibility,t.transactionId,zr.INELIGIBLE.MO);case 34:e.next=39;break;case 36:return e.prev=36,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 39:case"end":return e.stop()}}),e,this,[[0,36]])}))),function(){return r.apply(this,arguments)})},{key:"execute",value:(t=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F();case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),"USER_DISMISSED_OVERLAY"===e.t0.status||"LOCKED"===e.t0.status){e.next=9;break}throw e.t0;case 9:return e.abrupt("return");case 10:return e.prev=10,e.next=13,this.product.change(this.oldProductId,this.changeType,this.upgradeOption);case 13:t=e.sent,Object.assign(t.data,{type:"CHANGE ".concat(this.changeType)}),new en(t.templateData,t.data,t.transactionId,this.view,this.eventBus,this.platformType).render(),e.next=31;break;case 19:if(e.prev=19,e.t1=e.catch(10),e.t1.statusCode!==zr.INELIGIBLE.MO){e.next=30;break}if(!e.t1.data){e.next=27;break}new Jr(e.t1.data,new I(e.t1.data,e.t1.transactionId,e.t1.statusCode),this.view,this.eventBus,this.platformType).render(),e.next=28;break;case 27:throw new I("false",e.t1.transactionId,e.t1.statusCode);case 28:e.next=31;break;case 30:return e.abrupt("return",Promise.reject(e.t1));case 31:case"end":return e.stop()}}),e,this,[[0,5],[10,19]])}))),function(){return t.apply(this,arguments)})}]),a}(Gr);var sn=function(e){w(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(n);if(o){var r=T(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t,r){var n;return m(this,a),(n=i.call(this,e,t,r,["Cancel","Buy"])).product=new Ht({sku:n.productId}),n}return v(a,[{key:"fetchData",value:(r=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yr(this.productId,tn.subscribe);case 2:this.offerTextOverlay=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"execute",value:(t=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F();case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),"USER_DISMISSED_OVERLAY"===e.t0.status||"LOCKED"===e.t0.status){e.next=9;break}throw e.t0;case 9:return e.abrupt("return");case 10:return e.next=12,this.product.purchase();case 12:t=e.sent,Object.assign(t.data,{type:"BUY"}),new en(t.templateData,t.data,t.transactionId,this.view,this.eventBus).render();case 16:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return t.apply(this,arguments)})}]),a}(Gr);function cn(){return un.apply(this,arguments)}function un(){return(un=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z.overlaySkin){e.next=2;break}return e.abrupt("return",Z.overlaySkin);case 2:return e.next=4,P();case 4:if("xglobal"!==(t=e.sent).partnerId){e.next=7;break}return e.abrupt("return",nt.PLC);case 7:if(null===t.userExperience){e.next=12;break}if("1001"!==t.userExperience){e.next=10;break}return e.abrupt("return",nt.FLX);case 10:if("1000"!==t.userExperience){e.next=12;break}return e.abrupt("return",nt.X1D);case 12:return e.abrupt("return",nt.X1D);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ln=null;try{ln=commerceRender}catch(e){re.error(e)}function pn(e){return"boolean"===E(e)}function fn(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{complete:r,data:e,transactionId:t,oat:g.get(D.OAT)}}function dn(e,t){ln.renderEB.on("success",(function(t,r){re.debug("Order flow succeded."),hn(e,fn(t,r,!0))})),ln.renderEB.on("error",(function(e){re.debug("Order flow failed."),e instanceof Error?hn(t,e):hn(t,new Error("Unspecified error occurred"))})),ln.renderEB.on("dismiss",(function(t){re.debug("User dismissed order."),hn(e,fn(t))}))}function hn(e,t){ln.renderEB.clear(),ln.unmount(),e(t)}const yn={getOAccountToken:function(){return le.apply(this,arguments)},getAccountInfo:function(){return pe.apply(this,arguments)},getEligibility:ar,getVersion:function(){return"v".concat("1.4.3")},setLogLevel:function(e){return re.setCurrentLogLevel(e)},LogLevels:ee,Transaction:yt,Order:gt,Consent:Ot,productCategory:bt,chargeCategoryType:vt,frequencyType:Je,transactionType:Ne,changeType:Ue,upgradeOption:ut,order:{render:function(e){var t=arguments;return s(u().mark((function r(){var n,o,i,a,s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],null!==ln){r.next=3;break}return r.abrupt("return",Promise.reject(new TypeError("Render script is not loaded")));case 3:if(pn(n)){r.next=5;break}throw new TypeError('expected property checkForEligibility to be of type "boolean", but was of type '.concat(E(n)));case 5:if(!(e instanceof gt)){r.next=43;break}if(1===e.transactions.length){r.next=8;break}return r.abrupt("return",Promise.reject(new Error("commerce.order.render only works for 1 transaction")));case 8:return o=new Promise(dn),r.next=11,cn();case 11:return i=r.sent,r.next=14,ln.mount(i);case 14:a=e.transactions[0],re.info("Starting order flow for transaction type: ".concat(a.type,".")),r.prev=16,r.t0=a.type,r.next=r.t0===Ne.ADD?20:r.t0===Ne.CANCEL?24:r.t0===Ne.CHANGE?28:r.t0===Ne.PURCHASE?32:36;break;case 20:return s=new rn(a.sku,n,ln.renderer,ln.renderEB,i),r.next=23,s.render();case 23:return r.abrupt("break",37);case 24:return s=new on(a.sku,ln.renderer,ln.renderEB,i),r.next=27,s.render();case 27:return r.abrupt("break",37);case 28:return s=new an(a.sku,a.oldSku,n,a.changeType,a.upgradeOption,ln.renderer,ln.renderEB,i),r.next=31,s.render();case 31:return r.abrupt("break",37);case 32:return s=new sn(a.sku,ln.renderer,ln.renderEB,i),r.next=35,s.render();case 35:return r.abrupt("break",37);case 36:ln.renderEB.emit("error",new Error("Encountered unknown transactionType, ".concat(a.type)));case 37:r.next=42;break;case 39:r.prev=39,r.t1=r.catch(16),ln.renderEB.emit("error",new Error("Uncaught error occurred in SDK"));case 42:return r.abrupt("return",o);case 43:return r.abrupt("return",Promise.reject(new TypeError("commerce.order.render requires an order as an argument")));case 44:case"end":return r.stop()}}),r,null,[[16,39]])})))()}},product:{get:function(){return Lt.apply(this,arguments)}},allSubscriptions:{get:Yt},allPurchases:{get:function(){return or.apply(this,arguments)}},bundledEntitlements:{get:function(){return Zt.apply(this,arguments)}},render:function(e){var t=arguments;return s(u().mark((function r(){var n,o,i,a,s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],null!==ln){r.next=3;break}return r.abrupt("return",Promise.reject(new TypeError("Render script is not loaded")));case 3:if(pn(n)){r.next=5;break}throw new TypeError('expected property checkForEligibility to be of type "boolean", but was of type '.concat(E(n)));case 5:if(null!==ln){r.next=7;break}return r.abrupt("return",Promise.reject(new TypeError("Render script is not loaded")));case 7:return r.next=9,cn();case 9:if(o=r.sent,i=e,!(e instanceof Ot)){r.next=25;break}return a=new Promise(dn),r.next=15,ln.mount(o);case 15:return r.prev=15,s=new Zr("consent",i,n,ln.renderer,ln.renderEB,o),r.next=19,s.render();case 19:r.next=24;break;case 21:r.prev=21,r.t0=r.catch(15),ln.renderEB.emit("error",new Error("Uncaught error occurred in SDK"));case 24:return r.abrupt("return",a);case 25:return r.abrupt("return",Promise.reject(new TypeError("commerce.render requires an argument")));case 26:case"end":return r.stop()}}),r,null,[[15,21]])})))()}};function gn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bn(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?gn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var vn=new(p())(ge,{delayResponse:300}),mn=new ct(new(p())(d(),{delayResponse:300}),vn);re.info("mocommerce is loaded"),_e("");var xn,wn=[],En=!1,Sn=function(e){return s(u().mark((function t(){var r,n,o,i,a=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=a.length,n=new Array(r),o=0;o<r;o++)n[o]=a[o];return i=new Promise(function(){var t=s(u().mark((function t(r,o){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:wn.push({promise:e,args:n,resolve:r,reject:o}),Tn();case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),t.abrupt("return",i);case 3:case"end":return t.stop()}}),t)})))};function Tn(){if(En)return!1;var e=wn.shift();if(!e)return!1;try{En=!0,mn.clear(),e.promise.apply(e,i(e.args)).then((function(t){En=!1,e.resolve(t),Tn()})).catch((function(t){En=!1,e.reject(t),Tn()}))}catch(t){En=!1,e.reject(t),Tn()}return!0}var On=!1,kn=Object.values(Se);const An=bn(bn({},yn),{},{getVersion:function(){return"v".concat("1.4.3","-mocommerce")},mock:{setScenario:function(e){if(!kn.includes(e))throw new Error("Tried to set invalid mock scenario: ".concat(e));xn=e,On=e===Se.BAD_AUTHORIZATION},clearScenario:function(){xn=void 0,On=!1,He()},scenarioPicker:function(e){return this.setScenario(e),xn},scenarios:Se},getOAccountToken:Sn((function(){return mn.mockAuth(On),yn.getOAccountToken()})),getAccountInfo:Sn((function(){return mn.mockAuth(On),yn.getAccountInfo()})),getEligibility:Sn((function(){return mn.mockAuth(On),mn.mockEligibility(),yn.getEligibility()})),product:{get:Sn((function(){mn.mockAuth(On);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Qe.apply(void 0,[vn].concat(t)),yn.product.get(t)}))},allSubscriptions:{get:Sn((function(){if(mn.mockAuth(On),xn!==Se.ALL_SUBSCRIPTION_EMPTY){var e=Me(),t=Object.keys(e);!1!==e&&""!==e?t.forEach((function(t){mn.addSubscription(t,e[t].subState)})):!1===e&&(xn===Se.SUBSCRIBED_AND_NOT_RENEWING?mn.addSubscription("SKU_FOR_CURRENT_SUB",be.STOPPED):(mn.addSubscription("SKU_FOR_EXPIRED_SUB",be.EXPIRED),mn.addSubscription("SKU_FOR_CURRENT_SUB",be.SUBSCRIBED),mn.addSubscription("SKU_FOR_FUTURE_SUB",be.FUTURE_SUBSCRIPTION)))}return mn.mockAllSubscriptions(),yn.allSubscriptions.get()}))},bundledEntitlements:{get:Sn((function(){return mn.mockAuth(On),mn.addBundleEntitlements(),mn.mockBundledEntitlements(),yn.bundledEntitlements.get()}))},render:Sn((function(e,t){return mn.mockAuth(On),mn.addOfferedConsent(xn),mn.mockEligibility(),yn.render(e,t)})),order:{render:Sn((function(e,t){var r=e.transactions[0],n=xn||function(e){var t=e.sku,r=void 0===t?"":t,n=e.oldSku,o=void 0===n?"":n,i=e.type,a=void 0===i?"":i,s=e.changeType,c=void 0===s?"":s;if(!0!==je)return He(),"";if(0===Object.keys(Le).length)return a!==Ne.ADD?Se.NEVER_SUBSCRIBED:"";var u=Le[r]?Le[r].subState:"",l=Le[o]?Le[o].subState:"";switch(a){case Ne.ADD:if(u===be.STOPPED||""===u)return Se.NEVER_SUBSCRIBED;if(u===be.SUBSCRIBED||u===be.EXPIRED||u===be.FUTURE_SUBSCRIPTION)return Se.SUBSCRIBED;break;case Ne.CANCEL:if(u===be.SUBSCRIBED)return Se.SUBSCRIBED;if(u===be.STOPPED||""===u)return Se.NEVER_SUBSCRIBED;break;case Ne.CHANGE:if(c!==Ue.UPGRADE)return u===be.SUBSCRIBED&&l!==be.EXPIRED&&u!==be.CONVERTED&&l!==be.FUTURE_SUBSCRIPTION||l===be.SUBSCRIBED?Se.SUBSCRIBED_TO_OTHER:Se.NEVER_SUBSCRIBED;if(u===be.SUBSCRIBED&&""===l)return Se.SUBSCRIBED_TO_OTHER;if(u===be.CONVERTED)return Se.SUBSCRIBED;if(u===be.STOPPED||l===be.STOPPED||u===be.FUTURE_SUBSCRIPTION||u===be.SUBSCRIBED&&l===be.EXPIRED)return Se.NEVER_SUBSCRIBED;break;default:return""}return""}(r);if(On)return mn.mockAuth(On),yn.order.render(e);if(n===Se.BAD_USER_STANDING&&r.type===Ne.CANCEL&&(n=Se.SUBSCRIBED),!n||n===Se.ALL_SUBSCRIPTION_EMPTY)switch(r.type){case Ne.ADD:n=Se.NEVER_SUBSCRIBED;break;case Ne.CANCEL:n=Se.SUBSCRIBED;break;case Ne.CHANGE:n=Se.SUBSCRIBED_TO_OTHER;break;case Ne.PURCHASE:n=Se.NEVER_BOUGHT;break;default:n=Se.NEVER_SUBSCRIBED}return mn.mockScenario(n,r),yn.order.render(e,t)}))}})})(),n.default})()));
//# sourceMappingURL=mocommerce.min.js.map
/**
 * App version: 0.0.0
 * SDK version: 4.8.3
 * CLI version: 2.8.0
 *
 * Generated: Fri, 21 Apr 2023 16:46:50 GMT
 */

var APP_uk_fxdigital_britbox_cdtv=function(){"use strict";function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread2(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function asyncGeneratorStep(t,r,i,a,u,l,c){try{var d=t[l](c),g=d.value}catch(t){return void i(t)}d.done?r(g):Promise.resolve(g).then(a,u)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(a,u){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,a,u,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,u,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}function _defineProperty(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _construct(t,r,i){return _construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(t,r,i){var a=[null];a.push.apply(a,r);var u=new(Function.bind.apply(t,a));return i&&_setPrototypeOf(u,i.prototype),u},_construct.apply(null,arguments)}function _wrapNativeSuper(t){var r="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t)},_wrapNativeSuper(t)}function _objectWithoutProperties(t,r){if(null==t)return{};var i,a,u=function _objectWithoutPropertiesLoose(t,r){if(null==t)return{};var i,a,u={},l=Object.keys(t);for(a=0;a<l.length;a++)i=l[a],r.indexOf(i)>=0||(u[i]=t[i]);return u}(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)i=l[a],r.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(u[i]=t[i])}return u}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,r){if(r&&("object"==typeof r||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _createSuper(t){var r=_isNativeReflectConstruct();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _get(t,r,i){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,i){var a=_superPropBase(t,r);if(a){var u=Object.getOwnPropertyDescriptor(a,r);return u.get?u.get.call(i):u.value}},_get(t,r,i||t)}function set$2(t,r,i,a){return set$2="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function set(t,r,i,a){var u,l=_superPropBase(t,r);if(l){if((u=Object.getOwnPropertyDescriptor(l,r)).set)return u.set.call(a,i),!0;if(!u.writable)return!1}if(u=Object.getOwnPropertyDescriptor(a,r)){if(!u.writable)return!1;u.value=i,Object.defineProperty(a,r,u)}else _defineProperty(a,r,i);return!0},set$2(t,r,i,a)}function _set(t,r,i,a,u){if(!set$2(t,r,i,a||t)&&u)throw new Error("failed to set property");return i}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var a,u,l=[],c=!0,d=!1;try{for(i=i.call(t);!(c=(a=i.next()).done)&&(l.push(a.value),!r||l.length!==r);c=!0);}catch(t){d=!0,u=t}finally{try{c||null==i.return||i.return()}finally{if(d)throw u}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,F=function(){};return{s:F,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,c=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return l=t.done,t},e:function(t){c=!0,u=t},f:function(){try{l||null==i.return||i.return()}finally{if(c)throw u}}}}var t,r={},i={},u=function dotGrab(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(null!==t){for(var i=r.split("."),a=0;a<i.length;a++)t=t[i[a]]=void 0!==t[i[a]]?t[i[a]]:{};return"object"==typeof t&&null!==t?Object.keys(t).length?t:void 0:t}},l=function get(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,l=u(r[t],i);return void 0!==l?l:a},c=function clearSubscribers(){var t,r=_createForOfIteratorHelper(Object.getOwnPropertyNames(i));try{for(r.s();!(t=r.n()).done;){var a=t.value;delete i[a]}}catch(t){r.e(t)}finally{r.f()}},d=function prepLog(t,r){return["%c"+((r=Array.from(r)).length>1&&"string"==typeof r[0]?r.shift():t),"background-color: "+{Info:"green",Debug:"gray",Warn:"orange",Error:"red"}[t]+"; color: white; padding: 2px 4px; border-radius: 2px",r]},g=function info(){l("platform","log")&&console.log.apply(console,d("Info",arguments))},p=function debug(){l("platform","log")&&console.debug.apply(console,d("Debug",arguments))},m=function error(){l("platform","log")&&console.error.apply(console,d("Error",arguments))},v=function warn(){l("platform","log")&&console.warn.apply(console,d("Warn",arguments))},b=function sendMetric(t,r,i){g("Sending metric",t,r,i)},M=function errorMetric(t,r,i,a){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};u=_objectSpread2({params:u},{message:r,code:i,visible:a}),b(t,"error",u)},S=function Metric(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.reduce((function(r,a){return r[a]=function(r){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u=_objectSpread2(_objectSpread2(_objectSpread2({},i),r?{name:r}:{}),u),b(t,a,u)},r}),{error:function error(r,i,a){M(t,r,i,a)},event:function event(r,i){b(t,r,i)}})},E=function Metrics(t){return Object.keys(t).reduce((function(r,i){return r[i]="media"===i?function(r){return S(i,t[i],{url:r})}:S(i,t[i]),r}),{error:M,event:b})}({app:["launch","loaded","ready","close"],page:["view","leave"],user:["click","input"],media:["abort","canplay","ended","pause","play","volumechange","waiting","seeking","seeked"]}),I={abort:"Abort",canplay:"CanPlay",canplaythrough:"CanPlayThrough",durationchange:"DurationChange",emptied:"Emptied",encrypted:"Encrypted",ended:"Ended",error:"Error",interruptbegin:"InterruptBegin",interruptend:"InterruptEnd",loadeddata:"LoadedData",loadedmetadata:"LoadedMetadata",loadstart:"LoadStart",pause:"Pause",play:"Play",playing:"Playing",progress:"Progress",ratechange:"Ratechange",seeked:"Seeked",seeking:"Seeking",stalled:"Stalled",timeupdate:"TimeUpdate",volumechange:"VolumeChange",waiting:"Waiting"},autoSetupMixin=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=!1,a=function doSetup(){!1===i&&(r(),i=!0)};return Object.keys(t).reduce((function(r,i){return"function"==typeof t[i]?r[i]=function(){return a(),t[i].apply(t,arguments)}:"function"==typeof Object.getOwnPropertyDescriptor(t,i).get?r.__defineGetter__(i,(function(){return a(),Object.getOwnPropertyDescriptor(t,i).get.apply(t)})):"function"==typeof Object.getOwnPropertyDescriptor(t,i).set?r.__defineSetter__(i,(function(){return a(),Object.getOwnPropertyDescriptor(t,i).set.sourceObject[i].apply(t,arguments)})):r[i]=t[i],r}),{})},D=null,easeExecution=function(t,r){clearTimeout(D),D=setTimeout((function(){t()}),r)},A=function asset(r){return t+r},C=function makeQueryString(){return R.apply(void 0,arguments)},N=function ensureUrlWithProtocol(){return k.apply(void 0,arguments)},k=function _ensureUrlWithProtocol(t){return/^\/\//.test(t)?window.location.protocol+t:/^(?:https?:)/i.test(t)?t:window.location.origin+t},O=function makeFullStaticPath(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",r=arguments.length>1?arguments[1]:void 0;return r="/"!==r.charAt(r.length-1)?r+"/":r,/^(?:https?:)?(?:\/\/)/.test(r)||"/"===r.charAt(0)?r:(t=L(t))+(r="/"!==(r="."===r.charAt(0)?r.substr(1):r).charAt(0)?"/"+r:r)},L=function cleanUpPathName(t){if("/"===t.slice(-1))return t.slice(0,-1);var r=t.split("/");return r[r.length-1].indexOf(".")>-1&&r.pop(),r.join("/")},R=function _makeQueryString(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"url";return r.operator="metrological",r[i]=t,Object.keys(r).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(""+r[t])})).join("&")},j=window.lng;j.Component;var B,U,z=function(){function localCookie(t){return _classCallCheck(this,localCookie),t=t||{},this.forceCookies=t.forceCookies||!1,!0===this._checkIfLocalStorageWorks()&&!0!==t.forceCookies?{getItem:this._getItemLocalStorage,setItem:this._setItemLocalStorage,removeItem:this._removeItemLocalStorage,clear:this._clearLocalStorage}:{getItem:this._getItemCookie,setItem:this._setItemCookie,removeItem:this._removeItemCookie,clear:this._clearCookies}}return _createClass(localCookie,[{key:"_checkIfLocalStorageWorks",value:function _checkIfLocalStorageWorks(){if("undefined"==typeof localStorage)return!1;try{return localStorage.setItem("feature_test","yes"),"yes"===localStorage.getItem("feature_test")&&(localStorage.removeItem("feature_test"),!0)}catch(t){return!1}}},{key:"_getItemLocalStorage",value:function _getItemLocalStorage(t){return window.localStorage.getItem(t)}},{key:"_setItemLocalStorage",value:function _setItemLocalStorage(t,r){return window.localStorage.setItem(t,r)}},{key:"_removeItemLocalStorage",value:function _removeItemLocalStorage(t){return window.localStorage.removeItem(t)}},{key:"_clearLocalStorage",value:function _clearLocalStorage(){return window.localStorage.clear()}},{key:"_getItemCookie",value:function _getItemCookie(t){var r=document.cookie.match(RegExp("(?:^|;\\s*)"+function(t){return t.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")}(t)+"=([^;]*)"));return r&&""===r[1]&&(r[1]=null),r?r[1]:null}},{key:"_setItemCookie",value:function _setItemCookie(t,r){var i=new Date,a=new Date(i.getTime()+15768e7);document.cookie="".concat(t,"=").concat(r,"; expires=").concat(a.toUTCString(),";")}},{key:"_removeItemCookie",value:function _removeItemCookie(t){document.cookie="".concat(t,"=;Max-Age=-99999999;")}},{key:"_clearCookies",value:function _clearCookies(){document.cookie.split(";").forEach((function(t){document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=Max-Age=-99999999")}))}}]),localCookie}(),Y=function namespacedKey(t){return B?[B,t].join("."):t},G=function get(t){try{return JSON.parse(U.getItem(Y(t)))}catch(t){return null}},H=function set(t,r){try{return U.setItem(Y(t),JSON.stringify(r)),!0}catch(t){return!1}},Q=function remove(t){U.removeItem(Y(t))},V=function clear(){B?U.keys().forEach((function(t){0===t.indexOf(B+".")&&U.removeItem(t)})):U.clear()},W=/\{\/(.*?)\/([igm]{0,3})\}/g,$=/^[!*$]$/,K=/\/:\w+?@@([0-9]+?)@@/,q=/^\/:/,X=function stripRegex(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"R";return W.test(t)&&(t=t.replace(W,r)),t},Z=function createRegister(t){var r=new Map;return[].concat(_toConsumableArray(Object.keys(t)),_toConsumableArray(Object.getOwnPropertySymbols(t))).forEach((function(i){r.set(i,t[i])})),r},J=function(){function Request(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,Request),this._hash=t,this._storeCaller=i,this._register=new Map,this._isCreated=!1,this._isSharedInstance=!1,this._cancelled=!1,this._copiedHistoryState=null,Pt(r)?this._register=Z(r):Ft(r)&&(this._storeCaller=r),this._register.set(Kt.store,this._storeCaller)}return _createClass(Request,[{key:"cancel",value:function cancel(){p("[router]:","cancelled ".concat(this._hash)),this._cancelled=!0}},{key:"url",get:function get(){return this._hash}},{key:"register",get:function get(){return this._register}},{key:"hash",get:function get(){return this._hash},set:function set(t){this._hash=t}},{key:"route",get:function get(){return this._route},set:function set(t){this._route=t}},{key:"provider",get:function get(){return this._provider},set:function set(t){this._provider=t}},{key:"providerType",get:function get(){return this._providerType},set:function set(t){this._providerType=t}},{key:"page",get:function get(){return this._page},set:function set(t){this._page=t}},{key:"isCreated",get:function get(){return this._isCreated},set:function set(t){this._isCreated=t}},{key:"isSharedInstance",get:function get(){return this._isSharedInstance},set:function set(t){this._isSharedInstance=t}},{key:"isCancelled",get:function get(){return this._cancelled}},{key:"copiedHistoryState",get:function get(){return this._copiedHistoryState},set:function set(t){this._copiedHistoryState=t}}]),Request}(),ee=function(){function Route(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,Route);var r=["on","before","after"].reduce((function(r,i){return jt(t[i])?i:r}),void 0);this._cfg=t,r&&(this._provider={type:r,request:t[r]})}return _createClass(Route,[{key:"path",get:function get(){return this._cfg.path}},{key:"component",get:function get(){return this._cfg.component}},{key:"options",get:function get(){return this._cfg.options}},{key:"widgets",get:function get(){return this._cfg.widgets}},{key:"cache",get:function get(){return this._cfg.cache}},{key:"hook",get:function get(){return this._cfg.hook}},{key:"beforeNavigate",get:function get(){return this._cfg.beforeNavigate}},{key:"provider",get:function get(){return this._provider}}]),Route}(),te=function getFloor(t){return X(t).split("/").length},re=function getRouteByHash(t){t=t.replace(/^#/,"");var r=/(\/?:?[^/]+)/g,i=function getRoutesByFloor(t){var r,i=[],a=_createForOfIteratorHelper(ht.entries());try{for(a.s();!(r=a.n()).done;){var u=_slicedToArray(r.value,1)[0];te(u)===t&&i.push(u)}}catch(t){a.e(t)}finally{a.f()}return i}(te(t)),a=t.match(r)||[],u=[],l=i.filter((function(t){var i=!0;if(W.test(t)){var l=t.match(W);l&&l.length&&(t=l.reduce((function(t,r){var i=u.length;return t=t.replace(r,"@@".concat(i,"@@")),u.push(r.substring(1,r.length-1)),t}),t))}for(var c=t.match(r)||[],d=0,g=c.length;d<g;d++){var p=c[d],m=a[d];if(K.test(p)){var v=K.exec(p)[1],b=u[v],M=/\/([^\/]+)\/([igm]{0,3})/.exec(b);if(M&&M.length){var S=M[1],E=M[2];new RegExp("^/".concat(S,"$"),E).test(m)||(i=!1)}}else{if(q.test(p))continue;m&&p.toLowerCase()!==m.toLowerCase()&&(i=!1)}}return i}));if(l.length){if(-1!==l.indexOf(t)){var c=l[l.indexOf(t)];return ht.get(c)}if(l=l.sort((function(t){return q.test(t)?-1:1})),kt(l[0]))return ht.get(l[0])}return!1},ne=function getValuesFromHash(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;r=X(r,"");var i=/(\/?:?[\w%\s:.-]+)/g,a=t.match(i)||[],u=r.match(i)||[],l=/^\/:([\w-]+)\/?/;return u.reduce((function(t,r,i){var u=l.exec(r);return u&&u.length&&t.set(u[1],decodeURIComponent(a[i].replace(/^\//,""))),t}),new Map)},ie=function getOption(t,r){if(t&&t.hasOwnProperty(r))return t[r]},ae=function createRequest(t,r,i){return new J(t,r,i)},oe=function getHashByName(t){if(!t.to&&!t.name)return!1;var r=se(t.to||t.name),i=r;if(/\/:([\w-]+)\/?/.test(r)){if(t.params)i=Object.keys(t.params).reduce((function(r,i){return r.replace(":".concat(i),t.params[i])}),r);if(t.query)return"".concat(i).concat($t(t.query))}return i},se=function getRouteByName(t){var r,i=_createForOfIteratorHelper(ht.entries());try{for(i.s();!(r=i.n()).done;){var a=_slicedToArray(r.value,2),u=a[0];if(a[1].name===t)return u}}catch(t){i.e(t)}finally{i.f()}return!1},emit$3=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};zt(r)||(r=[r]),r.forEach((function(r){var a="_on".concat(Yt(r));jt(t[a])&&t[a](i)}))},ue=null,le=function getReferences(){if(Ce)return Ce.get().reduce((function(t,r){return t[r.ref.toLowerCase()]=r,t}),{})},ce=function restoreFocus(){ue=null,Ee._setState("")},de=function setActiveWidget(t){ue=t},fe=function createComponent(t,r){return t.c({type:r,visible:!1,widgets:le()})},he=[],ge=function updateHistory(t){var r=Dt();if(r){var i=t.register.get(Kt.store),a=re(r),u=ie(a.options,"preventStorage");if(Ft(i)?i:!u){var l=r.replace(/^\//,""),c=pe(l),d=me(Ct(),t),g=Lt();if(-1===c||g.get("storeSameHash"))he.push({hash:l,state:d});else{var p=he.splice(c,1)[0];he.push({hash:p.hash,state:d})}}}},pe=function locationInHistory(t){for(var r=0;r<he.length;r++)if(he[r].hash===t)return r;return-1},me=function getStateObject(t,r){if(r.isSharedInstance){if(r.copiedHistoryState)return r.copiedHistoryState}else if(t&&jt(t.historyState))return t.historyState();return null},ye=function getHistory(){return he.slice(0)},ve=function setHistory(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];zt(t)&&(he=t)},_e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var r=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})})),r}var Te=function isMergeableObject(t){return function isNonNullObject(t){return!!t&&"object"==typeof t}(t)&&!function isSpecial(t){var r=Object.prototype.toString.call(t);return"[object RegExp]"===r||"[object Date]"===r||function isReactElement(t){return t.$$typeof===be}(t)}(t)};var be="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cloneUnlessOtherwiseSpecified(t,r){return!1!==r.clone&&r.isMergeableObject(t)?deepmerge(function emptyTarget(t){return Array.isArray(t)?[]:{}}(t),t,r):t}function defaultArrayMerge(t,r,i){return t.concat(r).map((function(t){return cloneUnlessOtherwiseSpecified(t,i)}))}function getKeys$1(t){return Object.keys(t).concat(function getEnumerableOwnPropertySymbols(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(r){return t.propertyIsEnumerable(r)})):[]}(t))}function propertyIsOnObject(t,r){try{return r in t}catch(t){return!1}}function mergeObject(t,r,i){var a={};return i.isMergeableObject(t)&&getKeys$1(t).forEach((function(r){a[r]=cloneUnlessOtherwiseSpecified(t[r],i)})),getKeys$1(r).forEach((function(u){(function propertyIsUnsafe(t,r){return propertyIsOnObject(t,r)&&!(Object.hasOwnProperty.call(t,r)&&Object.propertyIsEnumerable.call(t,r))})(t,u)||(propertyIsOnObject(t,u)&&i.isMergeableObject(r[u])?a[u]=function getMergeFunction(t,r){if(!r.customMerge)return deepmerge;var i=r.customMerge(t);return"function"==typeof i?i:deepmerge}(u,i)(t[u],r[u],i):a[u]=cloneUnlessOtherwiseSpecified(r[u],i))})),a}function deepmerge(t,r,i){(i=i||{}).arrayMerge=i.arrayMerge||defaultArrayMerge,i.isMergeableObject=i.isMergeableObject||Te,i.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var a=Array.isArray(r);return a===Array.isArray(t)?a?i.arrayMerge(t,r,i):mergeObject(t,r,i):cloneUnlessOtherwiseSpecified(r,i)}deepmerge.all=function deepmergeAll(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,i){return deepmerge(t,i,r)}),{})};var Me,Se,Ee,Ie,De,Ae,Ce,Ne,xe,ke=deepmerge,we=!1,Oe=function deprecated(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0!==t&&!1!==we||console.warn(["The 'Locale'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.","Please consider using the new 'Language'-plugin instead.","https://rdkcentral.github.io/Lightning-SDK/#/plugins/language"].join("\n\n")),we=!0},Le=function(){function Locale(){_classCallCheck(this,Locale),this.__enabled=!1}var t;return _createClass(Locale,[{key:"load",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r=this;return regeneratorRuntime.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(this.__enabled){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,fetch(t).then((function(t){return t.json()})).then((function(t){r.loadFromObject(t)}));case 4:case"end":return i.stop()}}),_callee,this)}))),function load(r){return t.apply(this,arguments)})},{key:"setLanguage",value:function setLanguage(t){Oe(),this.__enabled=!0,this.language=t}},{key:"tr",get:function get(){return Oe(!0),this.__trObj[this.language]}},{key:"loadFromObject",value:function loadFromObject(t){Oe();var r="en";if(-1===Object.keys(t).indexOf(this.language)){if(v("No translations found for: "+this.language),!(Object.keys(t).indexOf(r)>-1)){var i="No translations found for fallback language: en";throw m(i),Error(i)}v("Using fallback language: en"),this.language=r}this.__trObj=t;for(var a=0,u=Object.values(this.__trObj);a<u.length;a++)for(var l=u[a],c=0,d=Object.keys(l);c<d.length;c++){var g=d[c];l[g]=new Re(l[g])}}}]),Locale}(),Re=function(t){_inherits(LocalizedString,t);var r=_createSuper(LocalizedString);function LocalizedString(){return _classCallCheck(this,LocalizedString),r.apply(this,arguments)}return _createClass(LocalizedString,[{key:"format",value:function format(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=r.reduce((function(t,r,i){return t.split("{".concat(i,"}")).join(r)}),this);return new LocalizedString(a)}}]),LocalizedString}(_wrapNativeSuper(String)),je=new Le,Pe=function(t){_inherits(VersionLabel,t);var r=_createSuper(VersionLabel);function VersionLabel(){return _classCallCheck(this,VersionLabel),r.apply(this,arguments)}return _createClass(VersionLabel,[{key:"_firstActive",value:function _firstActive(){this.tag("Text").text="APP - v".concat(this.version,"\nSDK - v").concat(this.sdkVersion),this.tag("Text").loadTexture(),this.w=this.tag("Text").renderWidth+40,this.h=this.tag("Text").renderHeight+5}}],[{key:"_template",value:function _template(){return{rect:!0,color:3137370284,h:40,w:100,x:function x(t){return t-50},y:function y(t){return t-50},mount:1,Text:{w:function w(t){return t},h:function h(t){return t},y:5,x:20,text:{fontSize:22,lineHeight:26}}}}}]),VersionLabel}(j.Component),Fe=function(t){_inherits(FpsIndicator,t);var r=_createSuper(FpsIndicator);function FpsIndicator(){return _classCallCheck(this,FpsIndicator),r.apply(this,arguments)}return _createClass(FpsIndicator,[{key:"_setup",value:function _setup(){var t=this;this.config=_objectSpread2(_objectSpread2({},{log:!1,interval:500,threshold:1}),l("platform","showFps")),this.fps=0,this.lastFps=this.fps-this.config.threshold;var r=function fpsCalculator(){t.fps=~~(1/t.stage.dt)};this.stage.on("frameStart",r),this.stage.off("framestart",r),this.interval=setInterval(this.showFps.bind(this),this.config.interval)}},{key:"_firstActive",value:function _firstActive(){this.showFps()}},{key:"_detach",value:function _detach(){clearInterval(this.interval)}},{key:"showFps",value:function showFps(){if(!(Math.abs(this.lastFps-this.fps)<=this.config.threshold)){this.lastFps=this.fps;var t=4278222848;this.fps<=40&&this.fps>20?t=4294944e3:this.fps<=20&&(t=4294901760),this.tag("Background").setSmooth("color",t),this.tag("Counter").text="".concat(this.fps),this.config.log&&g("FPS",this.fps)}}}],[{key:"_template",value:function _template(){return{rect:!0,color:4294967295,texture:j.Tools.getRoundRect(80,80,40),h:80,w:80,x:100,y:100,mount:1,Background:{x:3,y:3,texture:j.Tools.getRoundRect(72,72,36),color:4278222848},Counter:{w:function w(t){return t},h:function h(t){return t},y:10,text:{fontSize:32,textAlign:"center"}},Text:{w:function w(t){return t},h:function h(t){return t},y:48,text:{fontSize:15,textAlign:"center",text:"FPS"}}}}}]),FpsIndicator}(j.Component),Be={},Ue={},ze=null,Ye=function setTranslations(t){"meta"in t&&(Be=_objectSpread2({},t.meta),delete t.meta),Ue=t},Ge=function setLanguage(t){return ze=null,new Promise((function(r,i){if(t in Ue)ze=t;else if("map"in Be&&t in Be.map&&Be.map[t]in Ue)ze=Be.map[t];else if("default"in Be&&Be.default in Ue){var a="Translations for Language "+ze+" not found. Using default language "+Be.default;v(a),ze=Be.default}else{var u="Translations for Language "+ze+" not found.";m(u),i(u)}if(ze){g("Setting language to",ze);var l=Ue[ze];if("object"==typeof l)r();else if("string"==typeof l){var c=A(l);fetch(c).then((function(t){return t.json()})).then((function(t){Ue[ze]=t,r()})).catch((function(t){var r="Error while fetching "+c;m(r,t),i(r)}))}}}))},He={eventListeners:[],timeouts:[],intervals:[],targets:[]},Qe={setTimeout:function(t){function setTimeout(r,i){return t.apply(this,arguments)}return setTimeout.toString=function(){return t.toString()},setTimeout}((function(t,r){for(var i=arguments.length,a=new Array(i>2?i-2:0),u=2;u<i;u++)a[u-2]=arguments[u];var l=setTimeout((function(){He.timeouts=He.timeouts.filter((function(t){return t!==l})),t.apply(null,a)}),r,a);return g("Set Timeout","ID: "+l),He.timeouts.push(l),l})),clearTimeout:function(t){function clearTimeout(r){return t.apply(this,arguments)}return clearTimeout.toString=function(){return t.toString()},clearTimeout}((function(t){He.timeouts.indexOf(t)>-1?(He.timeouts=He.timeouts.filter((function(r){return r!==t})),g("Clear Timeout","ID: "+t),clearTimeout(t)):m("Clear Timeout","ID "+t+" not found")})),clearTimeouts:function clearTimeouts(){var t=this;He.timeouts.forEach((function(r){t.clearTimeout(r)}))},setInterval:function(t){function setInterval(r,i){return t.apply(this,arguments)}return setInterval.toString=function(){return t.toString()},setInterval}((function(t,r){for(var i=arguments.length,a=new Array(i>2?i-2:0),u=2;u<i;u++)a[u-2]=arguments[u];var l=setInterval((function(){He.intervals.filter((function(t){return t!==l})),t.apply(null,a)}),r,a);return g("Set Interval","ID: "+l),He.intervals.push(l),l})),clearInterval:function(t){function clearInterval(r){return t.apply(this,arguments)}return clearInterval.toString=function(){return t.toString()},clearInterval}((function(t){He.intervals.indexOf(t)>-1?(He.intervals=He.intervals.filter((function(r){return r!==t})),g("Clear Interval","ID: "+t),clearInterval(t)):m("Clear Interval","ID "+t+" not found")})),clearIntervals:function clearIntervals(){var t=this;He.intervals.forEach((function(r){t.clearInterval(r)}))},addEventListener:function addEventListener(t,r,i){t.addEventListener(r,i);var a=He.targets.indexOf(t)>-1?He.targets.indexOf(t):He.targets.push(t)-1;He.eventListeners[a]=He.eventListeners[a]||{},He.eventListeners[a][r]=He.eventListeners[a][r]||[],He.eventListeners[a][r].push(i),g("Add eventListener","Target:",t,"Event: "+r,"Handler:",i.toString())},removeEventListener:function removeEventListener(t,r,i){var a=He.targets.indexOf(t);a>-1&&He.eventListeners[a]&&He.eventListeners[a][r]&&He.eventListeners[a][r].indexOf(i)>-1?(He.eventListeners[a][r]=He.eventListeners[a][r].filter((function(t){return t!==i})),g("Remove eventListener","Target:",t,"Event: "+r,"Handler:",i.toString()),t.removeEventListener(r,i)):m("Remove eventListener","Not found","Target",t,"Event: "+r,"Handler",i.toString())},removeEventListeners:function removeEventListeners(t,r){var i=this;if(t&&r){var a=He.targets.indexOf(t);a>-1&&He.eventListeners[a][r].forEach((function(a){i.removeEventListener(t,r,a)}))}else if(t){var u=He.targets.indexOf(t);u>-1&&Object.keys(He.eventListeners[u]).forEach((function(r){i.removeEventListeners(t,r)}))}else Object.keys(He.eventListeners).forEach((function(t){i.removeEventListeners(He.targets[t])}))},clear:function clear(){this.clearTimeouts(),this.clearIntervals(),this.removeEventListeners(),He.eventListeners=[],He.timeouts=[],He.intervals=[],He.targets=[]}},Ve={white:"#ffffff",black:"#000000",red:"#ff0000",green:"#00ff00",blue:"#0000ff",yellow:"#feff00",cyan:"#00feff",magenta:"#ff00ff"},We={},$e=function addColors(t,r){!function isObject(t){return"object"==typeof t&&null!==t}(t)?function isString(t){return"string"==typeof t}(t)&&r&&(Ke(t),Ve[t]=r):(Object.keys(t).forEach((function(t){return Ke(t)})),Ve=Object.assign({},Ve,t))},Ke=function cleanUpNormalizedColors(t){for(var r in We)r.indexOf(t)>-1&&delete We[r]},qe="4.8.3",Xe={stage:{w:1920,h:1080,clearColor:0,canvas2d:!1},debug:!1,defaultFontFace:"RobotoRegular",keys:{8:"Back",13:"Enter",27:"Menu",37:"Left",38:"Up",39:"Right",40:"Down",174:"ChannelDown",175:"ChannelUp",178:"Stop",250:"PlayPause",191:"Search",409:"Search"}},Ze=[];function Application(t,r,i){var a=i.width,u=i.height;return a&&u&&(Xe.stage.w=a,Xe.stage.h=u,Xe.stage.precision=a/1920),a||u||720!==window.innerHeight||(Xe.stage.w=1280,Xe.stage.h=720,Xe.stage.precision=1280/1920),function(r){_inherits(Application,r);var a=_createSuper(Application);function Application(t){var r;_classCallCheck(this,Application);var i=ke(Xe,t);return t.stage.canvas&&(i.stage.canvas=t.stage.canvas),(r=a.call(this,i)).config=i,r}return _createClass(Application,[{key:"_setup",value:function _setup(){var r=this;Promise.all([this.loadFonts(t.config&&t.config.fonts||t.getFonts&&t.getFonts()||[]),je.load(t.config&&t.config.locale||t.getLocale&&t.getLocale()),t.language&&this.loadLanguage(t.language()),t.colors&&this.loadColors(t.colors())]).then((function(){E.app.loaded(),Me=r.stage.c({ref:"App",type:t,zIndex:1,forceZIndexContext:!!i.showVersion||!!i.showFps}),r.childList.a(Me),r._refocus(),g("App version",r.config.version),g("SDK version",qe),i.showVersion&&r.childList.a({ref:"VersionLabel",type:Pe,version:r.config.version,sdkVersion:qe,zIndex:1}),i.showFps&&r.childList.a({ref:"FpsCounter",type:Fe,zIndex:1}),_get(_getPrototypeOf(Application.prototype),"_setup",r).call(r)})).catch(console.error)}},{key:"_handleBack",value:function _handleBack(){this.closeApp()}},{key:"_handleExit",value:function _handleExit(){this.closeApp()}},{key:"closeApp",value:function closeApp(){g("Signaling App Close"),i.onClose&&"function"==typeof i.onClose?i.onClose.apply(i,arguments):this.close()}},{key:"close",value:function close(){g("Closing App"),c(),Qe.clear(),this.childList.remove(this.tag("App")),this.cleanupFonts(),this.stage.gc(),this.destroy()}},{key:"loadFonts",value:function loadFonts(t){return i.fontLoader&&"function"==typeof i.fontLoader?i.fontLoader(t,Ze):function fontLoader(t,r){return new Promise((function(i,a){t.map((function(t){var i=t.family,a=t.url,u=t.urls,l=t.descriptors;return function(){var t=u?u.map((function(t){return"url("+t+")"})):"url("+a+")",c=new FontFace(i,t,l||{});return r.push(c),g("Loading font",i),document.fonts.add(c),c.load()}})).reduce((function(t,r){return t.then((function(){return r()}))}),Promise.resolve(null)).then(i).catch(a)}))}(t,Ze)}},{key:"cleanupFonts",value:function cleanupFonts(){"delete"in document.fonts?Ze.forEach((function(t){g("Removing font",t.family),document.fonts.delete(t)})):g("No support for removing manually-added fonts")}},{key:"loadLanguage",value:function loadLanguage(t){var r=A("translations.json"),i=t;return"object"==typeof i&&(i=t.language||null,r=t.file||r),function initLanguage(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(i,a){fetch(t).then((function(t){return t.json()})).then((function(t){Ye(t),"object"==typeof r&&"then"in r&&"function"==typeof r.then?r.then((function(t){return Ge(t).then(i).catch(a)})).catch((function(t){m(t),a(t)})):Ge(r).then(i).catch(a)})).catch((function(){var r="Language file "+t+" not found";m(r),a(r)}))}))}(r,i)}},{key:"loadColors",value:function loadColors(t){var r=A("colors.json");return!t||"string"!=typeof t&&"object"!=typeof t||(r=t),function initColors(t){return new Promise((function(r,i){if("object"==typeof t)return $e(t),r();fetch(t).then((function(t){return t.json()})).then((function(t){return $e(t),r()})).catch((function(){var r="Colors file "+t+" not found";return m(r),i(r)}))}))}(r)}},{key:"focus",set:function set(t){this._focussed=t,this._refocus()}},{key:"_getFocused",value:function _getFocused(){return this._focussed||this.tag("App")}}],[{key:"_template",value:function _template(){return{w:1920,h:1080}}}]),Application}(j.Application)}var Je,et,tt,rt,nt,it,at,ot,st,ut,ct=!0,dt=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t,r){return regeneratorRuntime.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!0);case 1:case"end":return t.stop()}}),_callee)})));return function beforeEachRoute(r,i){return t.apply(this,arguments)}}(),ft=function afterEachRoute(){},ht=new Map,pt=new Map,mt=!1,yt=null,vt=function bootRouter(t,r){var i=t.appInstance,a=t.routes;r&&Bt(r)&&(Ee=r),Ee||(Ee=i||Me),Se=Ee.application,Ie=Se.childList,De=Ee.stage,Ae=Vt(),function mixin(t){t.pages&&(Ie=t.pages.childList),t.widgets&&t.widgets.children&&(Ce=t.widgets.childList).forEach((function(t){return t.visible=!1})),t._handleBack=function(t){Mr(-1),t.preventDefault()}}(Ee),zt(a)?_t(t):jt(a)&&(console.warn("[Router]: Calling Router.route() directly is deprecated."),console.warn("Use object config: https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration"))},_t=function setup(t){mt||Tt(t),t.routes.forEach((function(t){var r=Qt(t.path);if(kt(r))console.error("".concat(r," already exists in routes configuration"));else{var i=function createRoute(t){if("$"===t.path){var r={preventStorage:!0};Pt(t.options)&&(r=_objectSpread2(_objectSpread2({},t.options),r)),t.options=r,xe&&(t.after=xe)}return new ee(t)}(t);if(ht.set(r,i),i.component){var a=i.component;Ut(a)&&(Ae.get("lazyCreate")||(a=fe(De,a),Ie.a(a))),pt.set(r,a)}}}))},Tt=function init(t){Ne=t.root,jt(t.boot)&&(xe=t.boot),Ft(t.updateHash)&&(ct=t.updateHash),jt(t.beforeEachRoute)&&(dt=t.beforeEachRoute),jt(t.afterEachRoute)&&(ft=t.afterEachRoute),t.bootComponent&&(console.warn("[Router]: Boot Component is now available as a special router: https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration?id=special-routes"),console.warn("[Router]: setting { bootComponent } property will be deprecated in a future release"),Bt(t.bootComponent)?t.routes.push({path:"$",component:t.bootComponent,after:xe||null,options:{preventStorage:!0}}):console.error("[Router]: ".concat(t.bootComponent," is not a valid boot component"))),mt=!0},bt=function storeComponent(t,r){pt.has(t)&&pt.set(t,r)},Mt=function getComponent(t){return pt.has(t)?pt.get(t):null},St=function mustUpdateLocationHash(){if(!Ae||!Ae.size)return!1;var t=Ae.get("updateHash");return!(Ft(t)&&!t||Ft(ct)&&!ct)},Et=function onRequestResolved(t){var r=t.hash,i=t.route,a=t.register,u=t.page;ie(i.options,"clearHistory")?ve([]):r&&!$.test(i.path)&&ge(t),bt(i.path,u),t.isSharedInstance||!t.isCreated?emit$3(u,"changed"):t.isCreated&&emit$3(u,"mounted"),Ce&&function updateWidgets(t,r){var i=(t||[]).map((function(t){return t.toLowerCase()}));Ce.forEach((function(t){t.visible=-1!==i.indexOf(t.ref.toLowerCase()),t.visible&&emit$3(t,["activated"],r)})),"Widgets"===Ee.state&&ue&&!ue.visible&&Ee._setState("")}(i.widgets,u),Ct()&&!t.isSharedInstance&&It(yt,t),a.get(Kt.historyState)&&jt(u.historyState)&&u.historyState(a.get(Kt.historyState)),At(u),Je=t.hash,et=i.path;var l,c=_createForOfIteratorHelper(dr.values());try{for(c.s();!(l=c.n()).done;){var d=l.value;d.isCancelled&&d.hash&&dr.delete(d.hash)}}catch(t){c.e(t)}finally{c.f()}ft(t),g("[route]:",i.path),g("[hash]:",r)},It=function cleanUp(t,r){var i=et,a=r.register,u=Ae.get("lazyDestroy"),l=Ae.get("destroyOnHistoryBack"),c=a.get("keepAlive"),d=!1;a.get(Kt.backtrack)&&(l||u)&&(d=!0),u&&!c&&(d=!0),et===r.route.path&&(d=!0),d?(bt(i,t._routedType||t.constructor),Ie.remove(t),Ae.get("gcOnUnload")&&De.gc()):t.patch({x:0,y:0,scale:1,alpha:1,visible:!1})},Dt=function getActiveHash(){return Je},At=function setActivePage(t){yt=t},Ct=function getActivePage(){return yt},Nt=function getActiveRoute(){return et},xt=function getLastHash(){return tt},kt=function routeExists(t){return ht.has(t)},wt=function getRootHash(){return Ne},Ot=function getBootRequest(){return xe},Lt=function getRouterConfig(){return Ae},Rt=function getRoutes(){return ht},jt=function isFunction(t){return"function"==typeof t},Pt=function isObject(t){return"object"==typeof t&&null!==t},Ft=function isBoolean(t){return"boolean"==typeof t},Bt=function isPage(t){return!!(t instanceof j.Element||Ut(t))},Ut=function isComponentConstructor(t){return t.prototype&&"isComponent"in t.prototype},zt=function isArray(t){return Array.isArray(t)},Yt=function ucfirst(t){return"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1))},Gt=function isString(t){return"string"==typeof t},Ht=function isPromise(t){var r;if(jt(t))try{r=t.apply(null)}catch(t){r=t}else r=t;return Pt(r)&&jt(r.then)},Qt=function cleanHash(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.replace(/^#/,"").replace(/\/+$/,"")},Vt=function getConfigMap(){var t=l("platform","router"),r=Pt(t);return["backtrack","gcOnUnload","destroyOnHistoryBack","lazyCreate","lazyDestroy","reuseInstance","autoRestoreRemote","numberNavigation","updateHash","storeSameHash"].reduce((function(i,a){return i.set(a,r?t[a]:l("platform",a)),i}),new Map)},Wt=function getQueryStringParams(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt(),r=Er();"$"!==t&&t||!r||Gt(r)&&(t=r);var i="",a=/([?&].*)/,u=a.exec(t),l={};if(document.location&&document.location.search&&(i=document.location.search),u&&u.length){var c=u[1];i?(c=c.replace(/^\?/,""),i="".concat(i,"&").concat(c)):i=c}if(i){var d,g=new URLSearchParams(i),p=_createForOfIteratorHelper(g.entries());try{for(p.s();!(d=p.n()).done;){var m=_slicedToArray(d.value,2),v=m[0],b=m[1];l[v]=b}}catch(t){p.e(t)}finally{p.f()}return l}return!1},$t=function objectToQueryString(t){return Pt(t)?"?"+Object.keys(t).map((function(r){return"".concat(r,"=").concat(t[r])})).join("&"):""},Kt={route:Symbol("route"),hash:Symbol("hash"),store:Symbol("store"),fromHistory:Symbol("fromHistory"),expires:Symbol("expires"),resume:Symbol("resume"),backtrack:Symbol("backtrack"),historyState:Symbol("historyState"),queryParams:Symbol("queryParams")},qt={on:function on(t){return Ee.state,Ee._setState("Loading"),Xt(t)},before:function before(t){return Xt(t)},after:function after(t){try{Xt(t,!0)}catch(t){}return Promise.resolve()}},Xt=function execProvider(t,r){var i=t.route,a=i.provider,u=i.cache?1e3*i.cache:0,l=Zt(t);return a.request(t.page,_objectSpread2({},l)).then((function(){t.page[Kt.expires]=Date.now()+u,r&&emit$3(t.page,"dataProvided")})).catch((function(r){throw t.page[Kt.expires]=Date.now(),r}))},Zt=function addPersistData(t){var r,i=t.page,a=t.route,u=t.hash,l=t.register,c=void 0===l?new Map:l,d=ne(u,a.path),g=Wt(u),p={},m=_createForOfIteratorHelper(new Map([].concat(_toConsumableArray(d),_toConsumableArray(c))));try{for(m.s();!(r=m.n()).done;){var v=_slicedToArray(r.value,2),b=v[0],M=v[1];p[b]=M}}catch(t){m.e(t)}finally{m.f()}if(g&&(p[Kt.queryParams]=g),c.size){var S,E={},I=_createForOfIteratorHelper(c);try{for(I.s();!(S=I.n()).done;){var D=_slicedToArray(S.value,2),A=D[0],C=D[1];E[A]=C}}catch(t){I.e(t)}finally{I.f()}i.persist=E}return i.params=p,emit$3(i,["urlParams"],p),p},Jt=function isPageExpired(t){if(!t[Kt.expires])return!1;var r=t[Kt.expires];return Date.now()>=r},er=function hasProvider(t){return!!kt(t)&&!!ht.get(t).provider},tr=function getProvider(t){if(kt(t.path)){var r=ht.get(t.path).provider;return{type:r.type,provider:r.request}}},rr=function moveOnAxes(t,r,i,a){var u="x"===t?1920:1080;return new Promise((function(l){var c,d;(i.patch((_defineProperty(c={},"".concat(t),r?-1*u:u),_defineProperty(c,"visible",!0),_defineProperty(c,"smooth",_defineProperty({},"".concat(t),[0,{duration:.4,delay:.2}])),c)),a)&&a.patch((_defineProperty(d={},"".concat(t),0),_defineProperty(d,"smooth",_defineProperty({},"".concat(t),[r?u:-1*u,{duration:.4,delay:.2}])),d));i.transition(t).on("finish",(function(){l()}))}))},nr={fade:function fade(t,r){return new Promise((function(i){t.patch({alpha:0,visible:!0,smooth:{alpha:[1,{duration:.5,delay:.1}]}}),t.transition("alpha").on("finish",(function(){r&&(r.visible=!1),i()}))}))},crossFade:function crossFade(t,r){return new Promise((function(i){t.patch({alpha:0,visible:!0,smooth:{alpha:[1,{duration:.5,delay:.1}]}}),r&&r.patch({smooth:{alpha:[0,{duration:.5,delay:.3}]}}),t.transition("alpha").on("finish",(function(){i()}))}))},up:function up(t,r){return rr("y",0,t,r)},down:function down(t,r){return rr("y",1,t,r)},left:function left(t,r){return rr("x",0,t,r)},right:function right(t,r){return rr("x",1,t,r)}},ir=function executeTransition(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=t.pageTransition||t.easing,a=!!(t.smoothIn||t.smoothInOut||i),u=Lt().get("disableTransitions");if(t.easing&&console.warn("easing() method is deprecated and will be removed. Use pageTransition()"),!a||u)return t.visible=!0,r&&(r.visible=!1),Promise.resolve();if(i){var l;try{l=i.call(t,t,r)}catch(t){l="crossFade"}if(Ht(l))return l;if(Gt(l)){var c=nr[l];if(c)return c(t,r)}if(t.smoothIn){var d=function smooth(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(u){t.visible=!0,t.setSmooth(r,i,a),t.transition(r).on("finish",(function(){u()}))}))};return t.smoothIn({pageIn:t,smooth:d})}}return nr.crossFade(t,r)},ar=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r,i;return regeneratorRuntime.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return r=!1,a.prev=1,a.next=4,sr(t);case 4:if(!(t=a.sent)||t.isCancelled){a.next=12;break}if("Loading"===Ee.state&&Ee._setState(""),t.isSharedInstance||t.isCancelled){a.next=10;break}return a.next=10,ir(t.page,Ct());case 10:a.next=13;break;case 12:r=!0;case 13:if(!r&&!t.isCancelled){a.next=18;break}p("[router]:","Rejected ".concat(t.hash," because route to ").concat(xt()," started")),t.isCreated&&!t.isSharedInstance&&Ie.remove(t.page),a.next=20;break;case 18:return Et(t),a.abrupt("return",t.page);case 20:a.next=25;break;case 22:a.prev=22,a.t0=a.catch(1),a.t0.route?r||(i=a.t0.route,ie(i.options,"clearHistory")?ve([]):$.test(i.path)||ge(a.t0),a.t0.isCreated&&!a.t0.isSharedInstance&&Ie.remove(a.t0.page),ur(a.t0)):console.error(a.t0);case 25:case"end":return a.stop()}}),_callee,null,[[1,22]])})));return function load(r){return t.apply(this,arguments)}}(),sr=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(t){var r,i,a,u,l,c,d,g,p,m;return regeneratorRuntime.wrap((function _callee2$(v){for(;;)switch(v.prev=v.next){case 0:if(r=t.route,i=t.hash,a=t.register,u=Mt(r.path),l=Ut(u),c=!1,l||a.get(Kt.backtrack)||lr(r)||(u=u.constructor,l=!0),l?(t.page=fe(De,u),Ie.a(t.page),er(r.path)&&(c=!0),t.isCreated=!0):(t.page=u,er(r.path)&&(Jt(u)||u[Kt.hash]!==i)&&(c=!0),d=Ct()&&Ct()[Kt.route],r.path===d&&(t.isSharedInstance=!0,jt(t.page.historyState)&&(t.copiedHistoryState=t.page.historyState()))),t.page[Kt.hash]=i,t.page[Kt.route]=r.path,v.prev=10,!c){v.next=25;break}return g=tr(r),p=g.type,m=g.provider,t.provider=m,t.providerType=p,v.next=17,qt[p](t);case 17:if(i===xt()){v.next=21;break}return v.abrupt("return",!1);case 21:return"after"!==t.providerType&&emit$3(t.page,"dataProvided"),v.abrupt("return",t);case 23:v.next=27;break;case 25:return Zt(t),v.abrupt("return",t);case 27:v.next=33;break;case 29:return v.prev=29,v.t0=v.catch(10),t.error=v.t0,v.abrupt("return",Promise.reject(t));case 33:case"end":return v.stop()}}),_callee2,null,[[10,29]])})));return function loader(r){return t.apply(this,arguments)}}(),ur=function handleError(t){t&&t.error?console.error(t.error):t&&m(t),t.page&&kt("!")&&yr("!",{request:t},!1)},lr=function mustReuse(t){var r=ie(t.options,"reuseInstance"),i=Ae.get("reuseInstance");return Ft(r)?r:!(Ft(i)&&!1===i)},cr=function(t){_inherits(RoutedApp,t);var r=_createSuper(RoutedApp);function RoutedApp(){return _classCallCheck(this,RoutedApp),r.apply(this,arguments)}return _createClass(RoutedApp,[{key:"pages",get:function get(){return this.tag("Pages")}},{key:"widgets",get:function get(){return this.tag("Widgets")}},{key:"_handleBack",value:function _handleBack(){}},{key:"_getFocused",value:function _getFocused(){return Cr.getActivePage()}}],[{key:"_template",value:function _template(){return{Pages:{forceZIndexContext:!0},Loading:{rect:!0,w:1920,h:1080,color:4278190080,visible:!1,zIndex:99,Label:{mount:.5,x:960,y:540,text:{text:"Loading.."}}}}}},{key:"_states",value:function _states(){return[function(t){_inherits(Loading,t);var r=_createSuper(Loading);function Loading(){return _classCallCheck(this,Loading),r.apply(this,arguments)}return _createClass(Loading,[{key:"$enter",value:function $enter(){this.tag("Loading").visible=!0}},{key:"$exit",value:function $exit(){this.tag("Loading").visible=!1}}]),Loading}(this),function(t){_inherits(Widgets,t);var r=_createSuper(Widgets);function Widgets(){return _classCallCheck(this,Widgets),r.apply(this,arguments)}return _createClass(Widgets,[{key:"$enter",value:function $enter(t,r){this._widget=r,this._refocus()}},{key:"_getFocused",value:function _getFocused(){return this._widget}},{key:"reload",value:function reload(t){this._widget=t,this._refocus()}},{key:"_handleKey",value:function _handleKey(){var t=Ae.get("autoRestoreRemote");Ft(t)&&!0!==t||Cr.focusPage()}}]),Widgets}(this)]}}]),RoutedApp}(j.Component),dr=new Map,fr="",gr="",pr=function start(){var t=(Ir()||"").replace(/^#/,""),r="$",i=Wt(t),a=Ot(),u=wt(),l=-1!==t.indexOf(r);$.test(t)&&t!==r&&(t=""),gr=l?u:t||u;var c=function ready(){!t&&u?Gt(u)?yr(u):jt(u)&&u().then((function(t){Pt(t)?yr(t.path,t.params):yr(t)})):(vr(t),_r().then((function(){Ee._refocus()})).catch((function(t){console.error(t)})))};if(kt(r)){if(t&&!l&&!re(t))return void yr("*",{failedHash:t});yr(r,{resume:gr,reload:r===t},!1)}else jt(a)?a(i).then((function(){c()})).catch((function(t){mr(t)})):c()},mr=function handleBootError(t){kt("!")?yr("!",{request:{error:t}}):console.error(t)},yr=function navigate(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(!Pt(t)||(t=oe(t))){var a=Ir();!St()&&fr&&(a=fr),a.replace(/^#/,"")!==t?(vr(t,r,i),Dr(t),St()||(fr=t,_r(t).then((function(){Ee._refocus()})).catch((function(t){console.error(t)})))):r.reload&&(vr(t,r,i),_r(t).then((function(){Ee._refocus()})).catch((function(t){console.error(t)})))}},vr=function queue(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(t=Qt(t),!dr.has(t)){var a,u=_createForOfIteratorHelper(dr.values());try{for(u.s();!(a=u.n()).done;){var l=a.value;l.cancel()}}catch(t){u.e(t)}finally{u.f()}var c=ae(t,r,i);return dr.set(decodeURIComponent(t),c),c}return!1},_r=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r,i,a,u,l,c;return regeneratorRuntime.wrap((function _callee$(d){for(;;)switch(d.prev=d.next){case 0:if(r=Qt(t||Ir()),i=decodeURIComponent(r),(a=dr.get(i))||dr.size||(a=vr(r)),u=re(r)){d.next=8;break}return kt("*")?yr("*",{failedHash:r}):console.error("Unable to navigate to: ".concat(r)),d.abrupt("return");case 8:return a.hash=r,a.route=u,d.next=12,dt(Dt(),a);case 12:if(!(l=d.sent)||!u.beforeNavigate){d.next=17;break}return d.next=16,u.beforeNavigate(Dt(),a);case 16:l=d.sent;case 17:if(!Ft(l)){d.next=22;break}if(!l){d.next=20;break}return d.abrupt("return",Tr(a));case 20:d.next=25;break;case 22:a.cancel(),dr.delete(i),Gt(l)?yr(l):Pt(l)&&(c=!0,Ft(l.store)&&(c=l.store),yr(l.path,l.params,c));case 25:case"end":return d.stop()}}),_callee)})));return function handleHashChange(r){return t.apply(this,arguments)}}(),Tr=function resolveHashChange(t){var r=t.hash,i=t.route,a=decodeURIComponent(r);if(function setLastHash(t){tt=t}(r),i.path){var u=Mt(i.path);if(jt(i.hook)){var l,c=ne(r,i.path),d={},g=_createForOfIteratorHelper(c.keys());try{for(g.s();!(l=g.n()).done;){var p=l.value;d[p]=c.get(p)}}catch(t){g.e(t)}finally{g.f()}i.hook(Ee,_objectSpread2({},d))}if(u){var m=Ct();if(m){var v=function keepActivePageAlive(t,r){if(Gt(t)){var i=Rt();if(!i.has(t))return!1;t=i.get(t)}var a=r.register,u=t.options;return a.has("keepAlive")?a.get("keepAlive"):!(!u||!u.keepAlive)&&u.keepAlive}(Nt(),t);m&&i.path===Nt()&&!v&&m._setState("")}Bt(u)?ar(t).then((function(){Ee._refocus(),dr.delete(a)})):u().then((function(t){return t.default})).then((function(r){return bt(i.path,r),ar(t)})).then((function(){Ee._refocus(),dr.delete(a)}))}else dr.delete(a)}},Mr=function step(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!t||isNaN(t))return!1;var r=ye();if((t=Math.abs(t))>r.length)return jt(Ee._handleAppClose)?Ee._handleAppClose():Ee.application.closeApp();if(r.length){var i,a=r.splice(r.length-t,t)[0];return ve(r),yr(a.hash,(_defineProperty(i={},Kt.backtrack,!0),_defineProperty(i,Kt.historyState,a.state),i),!1)}if(Ae.get("backtrack")){var u=/(\/:?[\w%\s-]+)$/,l=X(Ir()),c=te(l);if(c>1)for(;c--;)if(l=l.replace(u,""),re(l))return yr(l,_defineProperty({},Kt.backtrack,!0),!1)}return!1},Sr=function isNavigating(){if(dr.size){var t,r=!1,i=_createForOfIteratorHelper(dr.values());try{for(i.s();!(t=i.n()).done;){t.value.isCancelled||(r=!0)}}catch(t){i.e(t)}finally{i.f()}return r}return!1},Er=function getResumeHash(){return gr},Ir=function getHash(){return document.location.hash},Dr=function setHash(t){document.location.hash=t},Ar=function registerListener(){Qe.addEventListener(window,"hashchange",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(!St()){t.next=9;break}return t.prev=1,t.next=4,_r();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0);case 9:case"end":return t.stop()}}),_callee2,null,[[1,6]])}))))},Cr={startRouter:function startRouter(t,r){vt(t,r),Ar(),pr()},navigate:yr,resume:function resume(){Gt(gr)?(yr(gr,!1),gr=""):jt(gr)?gr().then((function(t){gr="",Pt(t)?yr(t.path,t.params):yr(t)})):console.warn("[Router]: resume() called but no hash found")},step:Mr,go:Mr,back:Mr.bind(null,-1),activePage:Ct,getActivePage:function getActivePage$1(){return Ct()},getActiveRoute:Nt,getActiveHash:Dt,focusWidget:function focusWidget(t){var r=function getWidgetByName(t){return t=Yt(t),Ce.getByRef(t)||!1}(t);r&&(de(r),"Widgets"===Ee.state?Ee.reload(ue):Ee._setState("Widgets",[ue]))},getActiveWidget:function getActiveWidget(){return ue},restoreFocus:ce,isNavigating:Sr,getHistory:ye,setHistory:ve,getHistoryState:function getHistoryState(t){var r=null;he.length&&(t?-1!==pe(t)&&(r=he[pe(t)].state):r=he[he.length-1].state);return r},replaceHistoryState:function replaceHistoryState(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;if(he.length){var i=r?pe(r):he.length-1;-1!==i&&Pt(t)&&(he[i].state=t)}},getQueryStringParams:Wt,reload:function reload(){if(!Sr()){var t=Dt();yr(t,{reload:!0},!1)}},symbols:Kt,App:cr,focusPage:ce,root:function root(){var t=wt();Gt(t)?yr(t):jt(t)&&t().then((function(t){Pt(t)?yr(t.path,t.params):yr(t)}))},setupRoutes:function setupRoutes(){console.warn("Router: setupRoutes is deprecated, consolidate your configuration"),console.warn("https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration")},on:function on(){console.warn("Router.on() is deprecated, consolidate your configuration"),console.warn("https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration")},before:function before(){console.warn("Router.before() is deprecated, consolidate your configuration"),console.warn("https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration")},after:function after(){console.warn("Router.after() is deprecated, consolidate your configuration"),console.warn("https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration")}},Nr=[{number:1,name:"Metro News 1",description:"New York Cable News Channel",entitled:!0,program:{title:"The Morning Show",description:"New York's best morning show",startTime:new Date(new Date-3e5).toUTCString(),duration:1800,ageRating:0}},{number:2,name:"MTV",description:"Music Television",entitled:!0,program:{title:"Beavis and Butthead",description:"American adult animated sitcom created by Mike Judge",startTime:new Date(new Date-12e5).toUTCString(),duration:2700,ageRating:18}},{number:3,name:"NBC",description:"NBC TV Network",entitled:!1,program:{title:"The Tonight Show Starring Jimmy Fallon",description:"Late-night talk show hosted by Jimmy Fallon on NBC",startTime:new Date(new Date-6e5).toUTCString(),duration:3600,ageRating:10}}],xr=function channels(){return l("platform","tv",Nr)},kr=function randomChannel(){return xr()[~~(xr.length*Math.random())]},wr={},Or=function emit(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];wr[t]&&wr[t].forEach((function(t){t.apply(null,i)}))},Lr={getChannel:function getChannel(){return rt||(rt=kr()),new Promise((function(t,r){if(rt){var i=_objectSpread2({},rt);delete i.program,t(i)}else r("No channel found")}))},getProgram:function getProgram(){return rt||(rt=kr()),new Promise((function(t,r){rt.program?t(rt.program):r("No program found")}))},setChannel:function setChannel(t){return new Promise((function(r,i){if(t){var a=xr().find((function(r){return r.number===t}));if(a){var u=_objectSpread2({},rt=a);delete u.program,Or("channelChange",u),r(u)}else i("Channel not found")}else i("No channel number supplied")}))}},Rr=function(t){_inherits(PinInput,t);var r=_createSuper(PinInput);function PinInput(){return _classCallCheck(this,PinInput),r.apply(this,arguments)}return _createClass(PinInput,[{key:"index",set:function set(t){this.x=144*t}},{key:"nr",set:function set(t){var r=this;this._timeout&&clearTimeout(this._timeout),t?this.setSmooth("alpha",1):this.setSmooth("alpha",.5),this.tag("Nr").patch({text:{text:t&&t.toString()||"",fontSize:"*"===t?120:80}}),t&&"*"!==t&&(this._timeout=setTimeout((function(){r._timeout=null,r.nr="*"}),750))}}],[{key:"_template",value:function _template(){return{w:120,h:150,rect:!0,color:4287927187,alpha:.5,shader:{type:j.shaders.RoundedRectangle,radius:10},Nr:{w:function w(t){return t},y:24,text:{text:"",textColor:4281545523,fontSize:80,textAlign:"center",verticalAlign:"middle"}}}}}]),PinInput}(j.Component),jr=function(t){_inherits(PinDialog,t);var r=_createSuper(PinDialog);function PinDialog(){return _classCallCheck(this,PinDialog),r.apply(this,arguments)}return _createClass(PinDialog,[{key:"_init",value:function _init(){for(var t=[],r=0;r<4;r++)t.push({type:Rr,index:r});this.tag("Code").children=t}},{key:"pin",get:function get(){return this._pin||(this._pin=""),this._pin},set:function set(t){if(t.length<=4){var r=new Array(Math.max(t.length-1,0)).fill("*",0,t.length-1);t.length&&r.push(t.length>this._pin.length?t.slice(-1):"*");for(var i=0;i<4;i++)this.tag("Code").children[i].nr=r[i]||"";this._pin=t}}},{key:"msg",get:function get(){return this._msg||(this._msg=""),this._msg},set:function set(t){var r=this;this._timeout&&clearTimeout(this._timeout),this._msg=t,this._msg?(this.tag("Msg").text=this._msg,this.tag("Info").setSmooth("alpha",.5),this.tag("Code").setSmooth("alpha",.5)):(this.tag("Msg").text="",this.tag("Info").setSmooth("alpha",1),this.tag("Code").setSmooth("alpha",1)),this._timeout=setTimeout((function(){r.msg=""}),2e3)}},{key:"_firstActive",value:function _firstActive(){this.setSmooth("alpha",1)}},{key:"_handleKey",value:function _handleKey(t){if(this.msg)this.msg=!1;else{var r=parseInt(t.key);r>-1&&(this.pin+=r)}}},{key:"_handleBack",value:function _handleBack(){this.msg?this.msg=!1:this.pin.length?this.pin=this.pin.slice(0,this.pin.length-1):(Hr.hide(),this.resolve(!1))}},{key:"_handleEnter",value:function _handleEnter(){var t=this;this.msg?this.msg=!1:Hr.submit(this.pin).then((function(r){t.msg="Unlocking ...",setTimeout((function(){Hr.hide()}),1e3),t.resolve(r)})).catch((function(r){t.msg=r,t.reject(r)}))}}],[{key:"_template",value:function _template(){return{zIndex:1,w:function w(t){return t},h:function h(t){return t},rect:!0,color:3707764736,alpha:1e-6,Dialog:{w:648,h:320,y:function y(t){return(t-320)/2},x:function x(t){return(t-648)/2},rect:!0,color:3711120179,shader:{type:j.shaders.RoundedRectangle,radius:10},Info:{y:24,x:48,text:{text:"Please enter your PIN",fontSize:32}},Msg:{y:260,x:48,text:{text:"",fontSize:28,textColor:4294967295}},Code:{x:48,y:96}}}}}]),PinDialog}(j.Component),Pr=!1,Fr=["purchase","parental"],Ur=function submit(t,r){return new Promise((function(r,i){t.toString()===l("platform","pin","0000").toString()?r(Pr=!0):i("Incorrect pin")}))},zr=function check(t){return new Promise((function(t){t(Pr)}))},Yr=null,Gr=function contextCheck(t){return void 0===t?(g("Please provide context explicitly"),Fr[0]):Fr.includes(t)?t:(v("Incorrect context provided"),!1)},Hr={show:function show(){return new Promise((function(t,r){Yr=nt.stage.c({ref:"PinDialog",type:jr,resolve:t,reject:r}),nt.childList.a(Yr),nt.focus=Yr}))},hide:function hide(){nt.focus=null,nt.children=nt.children.map((function(t){return t!==Yr&&t})),Yr=null},submit:function submit(t,r){return new Promise((function(i,a){try{(r=Gr(r))?Ur(t,r).then(i).catch(a):a("Incorrect Context provided")}catch(t){a(t)}}))},unlocked:function unlocked(t){return new Promise((function(r,i){try{(t=Gr(t))?zr(t).then(r).catch(i):i("Incorrect Context provided")}catch(t){i(t)}}))},locked:function locked(t){return new Promise((function(r,i){try{(t=Gr(t))?zr(t).then((function(t){return r(!t)})).catch(i):i("Incorrect Context provided")}catch(t){i(t)}}))}},_Launch=function(i,a,u,c){!function initSettings(t,i){r.app=t,r.platform=i,r.user={}}(a,u),function initUtils(r){t=k(O(window.location.pathname,r.path||"/")),r.proxyUrl&&k(r.proxyUrl)}(u),function initStorage(){B=l("platform","id"),U=new z}(),u.plugins&&(u.plugins.profile&&u.plugins.profile,u.plugins.metrics&&function initMetrics(t){b=t.sendMetric}(u.plugins.metrics),u.plugins.mediaPlayer&&function initMediaPlayer(t){t.mediaUrl&&t.mediaUrl}(u.plugins.mediaPlayer),u.plugins.mediaPlayer&&Kr(u.plugins.mediaPlayer),u.plugins.ads&&dn(u.plugins.ads),u.plugins.router&&function initRouter(t){t.getHash&&(Ir=t.getHash),t.setHash&&(Dr=t.setHash)}(u.plugins.router),u.plugins.tv&&function initTV(t){Lr={},t.getChannel&&"function"==typeof t.getChannel&&(Lr.getChannel=t.getChannel),t.getProgram&&"function"==typeof t.getProgram&&(Lr.getProgram=t.getProgram),t.setChannel&&"function"==typeof t.setChannel&&(Lr.setChannel=t.setChannel),t.emit&&"function"==typeof t.emit&&t.emit(Or)}(u.plugins.tv),u.plugins.purchase&&function initPurchase(t){t.billingUrl}(u.plugins.purchase),u.plugins.pin&&function initPin(t){t.submit&&"function"==typeof t.submit&&(Ur=t.submit),t.check&&"function"==typeof t.check&&(zr=t.check)}(u.plugins.pin));var d=Application(i,0,u);return nt=new d(a)},Qr=function(t){_inherits(VideoTexture,t);var r=_createSuper(VideoTexture);function VideoTexture(){return _classCallCheck(this,VideoTexture),r.apply(this,arguments)}return _createClass(VideoTexture,[{key:"videoEl",get:function get(){return this._videoEl},set:function set(t){this._videoEl=t}},{key:"videoView",get:function get(){return this.tag("Video")}},{key:"videoTexture",get:function get(){return this.videoView.texture}},{key:"isVisible",get:function get(){return 1===this.videoView.alpha&&!0===this.videoView.visible}},{key:"_init",value:function _init(){this._createVideoTexture()}},{key:"_createVideoTexture",value:function _createVideoTexture(){var t=this.stage.gl,r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.videoTexture.options={source:r,w:this.videoEl.width,h:this.videoEl.height},this.videoView.w=this.videoEl.width/this.stage.getRenderPrecision(),this.videoView.h=this.videoEl.height/this.stage.getRenderPrecision()}},{key:"start",value:function start(){var t=this,r=this.stage;this._lastTime=0,this._updateVideoTexture||(this._updateVideoTexture=function(){if(t.videoTexture.options.source&&t.videoEl.videoWidth&&t.active){var i=r.gl,a=(new Date).getTime(),u=t.videoEl.getVideoPlaybackQuality(),l=u?u.totalVideoFrames:t.videoEl.webkitDecodedFrameCount;if(l?t._lastFrame!==l:t._lastTime<a-30){t._lastTime=a,t._lastFrame=l;try{i.bindTexture(i.TEXTURE_2D,t.videoTexture.options.source),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t.videoEl),t._lastFrame=t.videoEl.webkitDecodedFrameCount,t.videoView.visible=!0,t.videoTexture.options.w=t.videoEl.width,t.videoTexture.options.h=t.videoEl.height;var c=t.videoView.w/t.videoView.h,d=t.videoEl.width/t.videoEl.height;c>d?(t.videoView.scaleX=d/c,t.videoView.scaleY=1):(t.videoView.scaleY=c/d,t.videoView.scaleX=1)}catch(r){m("texImage2d video",r),t.stop()}t.videoTexture.source.forceRenderUpdate()}}}),this._updatingVideoTexture||(r.on("frameStart",this._updateVideoTexture),this._updatingVideoTexture=!0)}},{key:"stop",value:function stop(){var t=this.stage;if(t.removeListener("frameStart",this._updateVideoTexture),this._updatingVideoTexture=!1,this.videoView.visible=!1,this.videoTexture.options.source){var r=t.gl;r.bindTexture(r.TEXTURE_2D,this.videoTexture.options.source),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT)}}},{key:"position",value:function position(t,r){this.videoView.patch({smooth:{x:r,y:t}})}},{key:"size",value:function size(t,r){this.videoView.patch({smooth:{w:t,h:r}})}},{key:"show",value:function show(){this.videoView.setSmooth("alpha",1)}},{key:"hide",value:function hide(){this.videoView.setSmooth("alpha",0)}}],[{key:"_template",value:function _template(){return{Video:{alpha:1,visible:!1,pivot:.5,texture:{type:j.textures.StaticTexture,options:{}}}}}}]),VideoTexture}(j.Component),Vr=function mediaUrl(t){return t},Wr=1,$r=!1,Kr=function initVideoPlayer(t){t.mediaUrl&&(Vr=t.mediaUrl)},qr={},Xr={adsEnabled:!1,playing:!1,_playingAds:!1,get playingAds(){return this._playingAds},set playingAds(t){this._playingAds!==t&&(this._playingAds=t,en(!0===t?"AdStart":"AdEnd"))},skipTime:!1,playAfterSeek:null},Zr={play:function play(){Xr.playing=!0},pause:function pause(){Xr.playing=!1},seeked:function seeked(){!0===Xr.playAfterSeek&&un.play(),Xr.playAfterSeek=null},abort:function abort(){sn()}},Jr=function withPrecision(t){return Math.round(Wr*t)+"px"},en=function fireOnConsumer(t,r){st&&(st.fire("$videoPlayer"+t,r,it.currentTime),st.fire("$videoPlayerEvent",t,r,it.currentTime))},tn=null,rn=null,nn=function loader(t,r,i){return tn&&"function"==typeof tn?tn(t,r,i):new Promise((function(i){t=Vr(t),r.setAttribute("src",t),r.load(),i()}))},an=function registerEventListeners(){g("VideoPlayer","Registering event listeners"),Object.keys(I).forEach((function(t){var r=function handler(r){ot&&ot[t]&&"function"==typeof ot[t]&&ot[t]({currentTime:it.currentTime}),function fireHook(t,r){Zr[t]&&"function"==typeof Zr[t]&&Zr[t].call(null,t,r)}(t,{videoElement:it,event:r}),en(I[t],{videoElement:it,event:r})};qr[t]=r,it.addEventListener(t,r)}))},sn=function deregisterEventListeners(){g("VideoPlayer","Deregistering event listeners"),Object.keys(qr).forEach((function(t){it.removeEventListener(t,qr[t])})),qr={}},un={consumer:function consumer(t){st=t},loader:function loader(t){tn=t},unloader:function unloader(t){rn=t},position:function position(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;it.style.left=Jr(r),it.style.top=Jr(t),!0===$r&&at.position(t,r)},size:function size(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1920,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1080;it.style.width=Jr(t),it.style.height=Jr(r),it.width=parseFloat(it.style.width),it.height=parseFloat(it.style.height),!0===$r&&at.size(t,r)},area:function area(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1920,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1080,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.position(t,a),this.size(r-a,i-t)},open:function open(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.canInteract)if(ot=E.media(t),this.hide(),sn(),this.src==t)this.clear().then(this.open(t,i));else{var a={enabled:Xr.adsEnabled,duration:300};i.videoId&&(a.caid=i.videoId),mn.get(a,st).then((function(a){Xr.playingAds=!0,a.prerolls().then((function(){Xr.playingAds=!1,nn(t,it,i).then((function(){an(),r.show(),r.play()})).catch((function(t){en("error",{videoElement:it,event:t})}))}))}))}},reload:function reload(){if(this.canInteract){var t=it.getAttribute("src");this.close(),this.open(t)}},close:function close(){var t=this;mn.cancel(),Xr.playingAds&&(Xr.playingAds=!1,mn.stop(),setTimeout((function(){t.close()}))),this.canInteract&&(this.clear(),this.hide(),sn())},clear:function clear(){if(this.canInteract)return this.pause(),!0===$r&&at.stop(),function unloader(t){return rn&&"function"==typeof rn?rn(t):new Promise((function(r){t.removeAttribute("src"),t.load(),r()}))}(it).then((function(){en("Clear",{videoElement:it})}))},play:function play(){this.canInteract&&(!0===$r&&at.start(),function(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t&&"function"==typeof t)try{r=t.apply(a,i)}catch(t){r=t}else r=t;return null!==r&&"object"==typeof r&&r.then&&"function"==typeof r.then?r:new Promise((function(t,i){r instanceof Error?i(r):t(r)}))}(it.play,null,it).catch((function(t){en("error",{videoElement:it,event:t})})))},pause:function pause(){this.canInteract&&it.pause()},playPause:function playPause(){this.canInteract&&(!0===this.playing?this.pause():this.play())},mute:function mute(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.canInteract&&(it.muted=t)},loop:function loop(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];it.loop=t},seek:function seek(t){this.canInteract&&this.src&&(null===Xr.playAfterSeek&&(Xr.playAfterSeek=!!Xr.playing),this.pause(),it.currentTime=Math.max(0,Math.min(t,this.duration-.1)))},skip:function skip(t){var r=this;this.canInteract&&this.src&&(Xr.skipTime=(Xr.skipTime||it.currentTime)+t,easeExecution((function(){r.seek(Xr.skipTime),Xr.skipTime=!1}),300))},show:function show(){this.canInteract&&(!0===$r?at.show():(it.style.display="block",it.style.visibility="visible"))},hide:function hide(){this.canInteract&&(!0===$r?at.hide():(it.style.display="none",it.style.visibility="hidden"))},enableAds:function enableAds(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Xr.adsEnabled=t},get duration(){return it&&(isNaN(it.duration)?1/0:it.duration)},get currentTime(){return it&&it.currentTime},get muted(){return it&&it.muted},get looped(){return it&&it.loop},get src(){return it&&it.getAttribute("src")},get playing(){return Xr.playing},get playingAds(){return Xr.playingAds},get canInteract(){return!1===Xr.playingAds},get top(){return it&&parseFloat(it.style.top)},get left(){return it&&parseFloat(it.style.left)},get bottom(){return it&&parseFloat(it.style.top-it.style.height)},get right(){return it&&parseFloat(it.style.left-it.style.width)},get width(){return it&&parseFloat(it.style.width)},get height(){return it&&parseFloat(it.style.height)},get visible(){return!0===$r?at.isVisible:it&&"block"===it.style.display},get adsEnabled(){return Xr.adsEnabled},get _videoEl(){return it},get _consumer(){return st}},ln=autoSetupMixin(un,(function(){Wr=nt&&nt.stage&&nt.stage.getRenderPrecision()||Wr,it=function setupVideoTag(){var t=document.getElementsByTagName("video");if(t&&t.length)return t[0];var r=document.createElement("video"),i=l("platform","width")?l("platform","width"):1920,a=l("platform","height")?l("platform","height"):1080;return r.setAttribute("id","video-player"),r.setAttribute("width",Jr(i)),r.setAttribute("height",Jr(a)),r.style.position="absolute",r.style.zIndex="1",r.style.display="none",r.style.visibility="hidden",r.style.top=Jr(0),r.style.left=Jr(0),r.style.width=Jr(i),r.style.height=Jr(a),document.body.appendChild(r),r}(),!0===($r=l("platform","textureMode",!1))&&(it.setAttribute("crossorigin","anonymous"),at=function setUpVideoTexture(){if(!nt.tag("VideoTexture")){var t=nt.stage.c({type:Qr,ref:"VideoTexture",zIndex:0,videoEl:it});nt.childList.addAt(t,0)}return nt.tag("VideoTexture")}())})),cn=function getAds(){return Promise.resolve({prerolls:[],midrolls:[],postrolls:[]})},dn=function initAds(t){t.getAds&&(cn=t.getAds)},fn={active:!1},hn=function playAd(t){return new Promise((function(r){if(!1===fn.active)return g("Ad","Skipping add due to inactive state"),r();var i=document.getElementsByTagName("video")[0];i.style.display="block",i.style.visibility="visible",i.src=Vr(t.url),i.load();var a,u=null,l=function cleanup(){Object.keys(c).forEach((function(t){return i.removeEventListener(t,c[t])})),r()},c={play:function play(){g("Ad","Play ad",t.url),pn("Play",t),gn(t.callbacks,"defaultImpression")},ended:function ended(){pn("Ended",t),gn(t.callbacks,"complete"),l()},timeupdate:function timeupdate(){!u&&i.duration&&(u={firstQuartile:i.duration/4,midPoint:i.duration/2,thirdQuartile:i.duration/4*3},g("Ad","Calculated quartiles times",{timeEvents:u})),u&&u.firstQuartile&&i.currentTime>=u.firstQuartile&&(pn("FirstQuartile",t),delete u.firstQuartile,gn(t.callbacks,"firstQuartile")),u&&u.midPoint&&i.currentTime>=u.midPoint&&(pn("MidPoint",t),delete u.midPoint,gn(t.callbacks,"midPoint")),u&&u.thirdQuartile&&i.currentTime>=u.thirdQuartile&&(pn("ThirdQuartile",t),delete u.thirdQuartile,gn(t.callbacks,"thirdQuartile"))},stalled:function stalled(){pn("Stalled",t),a=setTimeout((function(){l()}),5e3)},canplay:function canplay(){a&&clearTimeout(a)},error:function error(){pn("Error",t),l()},abort:function abort(){l()}};Object.keys(c).forEach((function(t){return i.addEventListener(t,c[t])})),i.play()}))},gn=function sendBeacon(t,r){if(t&&t[r])return g("Ad","Sending beacon",r,t[r]),t[r].reduce((function(t,i){return t.then((function(){return fetch(i).then((function(t){200===t.status?pn("Beacon"+r+"Sent"):pn("Beacon"+r+"Failed"+t.status),Promise.resolve(null)})).catch((function(){Promise.resolve(null)}))}))}),Promise.resolve(null));g("Ad","No callback found for "+r)},pn=function fireOnConsumer(t,r){ut&&(ut.fire("$ad"+t,r),ut.fire("$adEvent",t,r))},mn={get:function get(t,r){return!1===t.enabled?Promise.resolve({prerolls:function prerolls(){return Promise.resolve()}}):(ut=r,new Promise((function(r){g("Ad","Starting session"),cn(t).then((function(t){g("Ad","API result",t),r({prerolls:function prerolls(){return t.preroll?(fn.active=!0,pn("PrerollSlotImpression",t),gn(t.preroll.callbacks,"slotImpression"),function playSlot(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,r){return t.then((function(){return hn(r)}))}),Promise.resolve(null))}(t.preroll.ads).then((function(){pn("PrerollSlotEnd",t),gn(t.preroll.callbacks,"slotEnd"),fn.active=!1}))):Promise.resolve()},midrolls:function midrolls(){return Promise.resolve()},postrolls:function postrolls(){return Promise.resolve()}})}))})))},cancel:function cancel(){g("Ad","Cancel Ad"),fn.active=!1},stop:function stop(){g("Ad","Stop Ad"),fn.active=!1;var t=document.getElementsByTagName("video")[0];t.pause(),t.removeAttribute("src")}},yn=function(t){_inherits(ScaledImageTexture,t);var r=_createSuper(ScaledImageTexture);function ScaledImageTexture(t){var i;return _classCallCheck(this,ScaledImageTexture),(i=r.call(this,t))._scalingOptions=void 0,i}return _createClass(ScaledImageTexture,[{key:"options",set:function set(t){this.resizeMode=this._scalingOptions=t}},{key:"_getLookupId",value:function _getLookupId(){return"".concat(this._src,"-").concat(this._scalingOptions.type,"-").concat(this._scalingOptions.w,"-").concat(this._scalingOptions.h)}},{key:"getNonDefaults",value:function getNonDefaults(){var t=_get(_getPrototypeOf(ScaledImageTexture.prototype),"getNonDefaults",this).call(this);return this._src&&(t.src=this._src),t}}]),ScaledImageTexture}(j.textures.ImageTexture),Img=function(t,r){var i=l("platform","imageServerUrl"),a=function make(r){return/^(?:https?:)?\/\//i.test(t)||(t=A(t)),i&&-1===t.indexOf(window.location.origin)?t=N(i+"?"+C(t,r)):"crop"===r.type?r.type="cover":r.type="contain",{type:yn,src:t,options:r}},u=function setOptions(t){t=_objectSpread2(_objectSpread2({},{type:"contain",w:0,h:0}),t);var r=Math.max(.1,Math.min(1,(parseFloat(l("platform","image.quality"))||100)/100));return t.w=t.w*r,t.h=t.h*r,t};return r?a(u(r)):{exact:function exact(t,r){return a(u({type:"exact",w:t,h:r}))},landscape:function landscape(t){return a(u({type:"landscape",w:t}))},portrait:function portrait(t){return a(u({type:"portrait",h:t}))},cover:function cover(t,r){return a(u({type:"cover",w:t,h:r}))},contain:function contain(t,r){return a(u({type:"contain",w:t,h:r}))},original:function original(){return a(u({type:"contain"}))}}},vn=function(t){_inherits(ItemWrapper,t);var r=_createSuper(ItemWrapper);function ItemWrapper(){return _classCallCheck(this,ItemWrapper),r.apply(this,arguments)}return _createClass(ItemWrapper,[{key:"index",get:function get(){return this._index},set:function set(t){this._index=t}},{key:"construct",get:function get(){return this._construct},set:function set(t){this._construct=t}},{key:"item",get:function get(){return this._item},set:function set(t){this._item=t}},{key:"lngItem",get:function get(){return this._realItem},set:function set(t){this._realItem=t}},{key:"child",get:function get(){return this.children[0]}},{key:"create",value:function create(){var t=this._item;this.children=[{type:this._construct,item:t,index:this._index}],this._notifyOnItemCreation&&this.hasFocus()&&this._refocus()}},{key:"_firstActive",value:function _firstActive(){this.create(),ItemWrapper.FIRST_CREATED||(this.fireAncestors("$firstItemCreated"),ItemWrapper.FIRST_CREATED=!0)}},{key:"_getFocused",value:function _getFocused(){if(this.child)return this.child;this._notifyOnItemCreation=!0}}],[{key:"_template",value:function _template(){return{clipbox:!0}}}]),ItemWrapper}(j.Component);vn.FIRST_CREATED=!1;var _n=function(){function EventEmitter(){_classCallCheck(this,EventEmitter),_defineProperty(this,"_events",{})}return _createClass(EventEmitter,[{key:"addEventListener",value:function addEventListener(t,r){return"function"!=typeof r||(Array.isArray(this._events[t])?this.listeners(t).push(r):this._events[t]=[r]),this}},{key:"removeEventListener",value:function removeEventListener(t,r){if("function"!=typeof r)return this;if(!Object.prototype.hasOwnProperty.call(this._events,t))return this;for(var i=this.listeners(t),a=r.toString(),u=0;u<i.length;u+=1)i[u].toString()===a&&i.splice(u,1);return this}},{key:"emit",value:function emit(t,r){if(!Object.prototype.hasOwnProperty.call(this._events,t))return this;for(var i=this.listeners(t).slice(),a=0;a<i.length;a+=1)i[a]&&i[a].apply(this,[r]);return this}},{key:"listeners",value:function listeners(t){return Object.prototype.hasOwnProperty.call(this._events,t)?this._events[t]:[]}}],[{key:"getInstance",value:function getInstance(){return EventEmitter._instance||(EventEmitter._instance=new EventEmitter),EventEmitter._instance}}]),EventEmitter}();function maybeUseAutoResolution(t){if(!t.stage)return t;var r=t.stage,i=r.w,a=r.h,u=r.precision,l={h:a,w:i};return"auto"!==a&&"auto"!==i||(l.h=window.screen.height,l.w=window.screen.width),"auto"===u&&(l.precision=(l.h/1080).toFixed(3)/1),l}_defineProperty(_n,"_instance",void 0);var Tn={},bn={},Mn={};function isFunction$1(t){return"function"==typeof t}function hasLift$1(t){return isFunction$1(null==t?void 0:t.lift)}function operate$1(t){return function(r){if(hasLift$1(r))return r.lift((function(r){try{return t(r,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Sn=function extendStatics(t,r){return Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Sn(t,r)};function __extends$1(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}Sn(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}function __awaiter$j(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))}function __generator$j(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}}function __values$1(t){var r="function"==typeof Symbol&&Symbol.iterator,i=r&&t[r],a=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function next(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(t,r){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var a,u,l=i.call(t),c=[];try{for(;(void 0===r||r-- >0)&&!(a=l.next()).done;)c.push(a.value)}catch(t){u={error:t}}finally{try{a&&!a.done&&(i=l.return)&&i.call(l)}finally{if(u)throw u.error}}return c}function __spreadArray$2(t,r,i){if(i||2===arguments.length)for(var a,u=0,l=r.length;u<l;u++)!a&&u in r||(a||(a=Array.prototype.slice.call(r,0,u)),a[u]=r[u]);return t.concat(a||Array.prototype.slice.call(r))}function __await$1(t){return this instanceof __await$1?(this.v=t,this):new __await$1(t)}function __asyncGenerator$1(t,r,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,u=i.apply(t,r||[]),l=[];return a={},verb("next"),verb("throw"),verb("return"),a[Symbol.asyncIterator]=function(){return this},a;function verb(t){u[t]&&(a[t]=function(r){return new Promise((function(i,a){l.push([t,r,i,a])>1||resume(t,r)}))})}function resume(t,r){try{!function step(t){t.value instanceof __await$1?Promise.resolve(t.value.v).then(fulfill,reject):settle(l[0][2],t)}(u[t](r))}catch(t){settle(l[0][3],t)}}function fulfill(t){resume("next",t)}function reject(t){resume("throw",t)}function settle(t,r){t(r),l.shift(),l.length&&resume(l[0][0],l[0][1])}}function __asyncValues$1(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t[Symbol.asyncIterator];return i?i.call(t):(t=__values$1(t),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(i){r[i]=t[i]&&function(r){return new Promise((function(a,u){(function settle(t,r,i,a){Promise.resolve(a).then((function(r){t({value:r,done:i})}),r)})(a,u,(r=t[i](r)).done,r.value)}))}}}var En=function isArrayLike(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function isPromise$1(t){return isFunction$1(null==t?void 0:t.then)}function createErrorClass$1(t){var r=t((function _super(t){Error.call(t),t.stack=(new Error).stack}));return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var In=createErrorClass$1((function(t){return function UnsubscriptionErrorImpl(r){t(this),this.message=r?r.length+" errors occurred during unsubscription:\n"+r.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=r}}));function arrRemove$1(t,r){if(t){var i=t.indexOf(r);0<=i&&t.splice(i,1)}}var Dn=function(){function Subscription(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}return Subscription.prototype.unsubscribe=function(){var t,r,i,a,u;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var c=__values$1(l),d=c.next();!d.done;d=c.next()){d.value.remove(this)}}catch(r){t={error:r}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}else l.remove(this);var g=this.initialTeardown;if(isFunction$1(g))try{g()}catch(t){u=t instanceof In?t.errors:[t]}var p=this._teardowns;if(p){this._teardowns=null;try{for(var m=__values$1(p),v=m.next();!v.done;v=m.next()){var b=v.value;try{execTeardown$1(b)}catch(t){u=null!=u?u:[],t instanceof In?u=__spreadArray$2(__spreadArray$2([],__read$1(u)),__read$1(t.errors)):u.push(t)}}}catch(t){i={error:t}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}}if(u)throw new In(u)}},Subscription.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)execTeardown$1(t);else{if(t instanceof Subscription){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(t)}},Subscription.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},Subscription.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},Subscription.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&arrRemove$1(r,t)},Subscription.prototype.remove=function(t){var r=this._teardowns;r&&arrRemove$1(r,t),t instanceof Subscription&&t._removeParent(this)},Subscription.EMPTY=function(){var t=new Subscription;return t.closed=!0,t}(),Subscription}(),An=Dn.EMPTY;function isSubscription$1(t){return t instanceof Dn||t&&"closed"in t&&isFunction$1(t.remove)&&isFunction$1(t.add)&&isFunction$1(t.unsubscribe)}function execTeardown$1(t){isFunction$1(t)?t():t.unsubscribe()}var Cn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Nn={setTimeout:function(t){function setTimeout(){return t.apply(this,arguments)}return setTimeout.toString=function(){return t.toString()},setTimeout}((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=Nn.delegate;return((null==i?void 0:i.setTimeout)||setTimeout).apply(void 0,__spreadArray$2([],__read$1(t)))})),clearTimeout:function(t){function clearTimeout(r){return t.apply(this,arguments)}return clearTimeout.toString=function(){return t.toString()},clearTimeout}((function(t){var r=Nn.delegate;return((null==r?void 0:r.clearTimeout)||clearTimeout)(t)})),delegate:void 0};function reportUnhandledError$1(t){Nn.setTimeout((function(){var r=Cn.onUnhandledError;if(!r)throw t;r(t)}))}function noop$1(){}var xn=createNotification$1("C",void 0,void 0);function createNotification$1(t,r,i){return{kind:t,value:r,error:i}}var kn=null;function errorContext$1(t){if(Cn.useDeprecatedSynchronousErrorHandling){var r=!kn;if(r&&(kn={errorThrown:!1,error:null}),t(),r){var i=kn,a=i.errorThrown,u=i.error;if(kn=null,a)throw u}}else t()}var wn=function(t){function Subscriber(r){var i=t.call(this)||this;return i.isStopped=!1,r?(i.destination=r,isSubscription$1(r)&&r.add(i)):i.destination=jn,i}return __extends$1(Subscriber,t),Subscriber.create=function(t,r,i){return new Rn(t,r,i)},Subscriber.prototype.next=function(t){this.isStopped?handleStoppedNotification$1(function nextNotification$1(t){return createNotification$1("N",t,void 0)}(t),this):this._next(t)},Subscriber.prototype.error=function(t){this.isStopped?handleStoppedNotification$1(function errorNotification$1(t){return createNotification$1("E",void 0,t)}(t),this):(this.isStopped=!0,this._error(t))},Subscriber.prototype.complete=function(){this.isStopped?handleStoppedNotification$1(xn,this):(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},Subscriber.prototype._next=function(t){this.destination.next(t)},Subscriber.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},Subscriber.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},Subscriber}(Dn),On=Function.prototype.bind;function bind$5(t,r){return On.call(t,r)}var Ln=function(){function ConsumerObserver(t){this.partialObserver=t}return ConsumerObserver.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(t){handleUnhandledError$1(t)}},ConsumerObserver.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(t){handleUnhandledError$1(t)}else handleUnhandledError$1(t)},ConsumerObserver.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){handleUnhandledError$1(t)}},ConsumerObserver}(),Rn=function(t){function SafeSubscriber(r,i,a){var u,l,c=t.call(this)||this;isFunction$1(r)||!r?u={next:null!=r?r:void 0,error:null!=i?i:void 0,complete:null!=a?a:void 0}:c&&Cn.useDeprecatedNextContext?((l=Object.create(r)).unsubscribe=function(){return c.unsubscribe()},u={next:r.next&&bind$5(r.next,l),error:r.error&&bind$5(r.error,l),complete:r.complete&&bind$5(r.complete,l)}):u=r;return c.destination=new Ln(u),c}return __extends$1(SafeSubscriber,t),SafeSubscriber}(wn);function handleUnhandledError$1(t){Cn.useDeprecatedSynchronousErrorHandling?function captureError(t){Cn.useDeprecatedSynchronousErrorHandling&&kn&&(kn.errorThrown=!0,kn.error=t)}(t):reportUnhandledError$1(t)}function handleStoppedNotification$1(t,r){var i=Cn.onStoppedNotification;i&&Nn.setTimeout((function(){return i(t,r)}))}var jn={closed:!0,next:noop$1,error:function defaultErrorHandler$1(t){throw t},complete:noop$1},Pn="function"==typeof Symbol&&Symbol.observable||"@@observable";function identity$3(t){return t}function pipe$1(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return pipeFromArray$1(t)}function pipeFromArray$1(t){return 0===t.length?identity$3:1===t.length?t[0]:function piped(r){return t.reduce((function(t,r){return r(t)}),r)}}var Fn=function(){function Observable(t){t&&(this._subscribe=t)}return Observable.prototype.lift=function(t){var r=new Observable;return r.source=this,r.operator=t,r},Observable.prototype.subscribe=function(t,r,i){var a=this,u=function isSubscriber$1(t){return t&&t instanceof wn||function isObserver$1(t){return t&&isFunction$1(t.next)&&isFunction$1(t.error)&&isFunction$1(t.complete)}(t)&&isSubscription$1(t)}(t)?t:new Rn(t,r,i);return errorContext$1((function(){var t=a,r=t.operator,i=t.source;u.add(r?r.call(u,i):i?a._subscribe(u):a._trySubscribe(u))})),u},Observable.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},Observable.prototype.forEach=function(t,r){var i=this;return new(r=getPromiseCtor$1(r))((function(r,a){var u=new Rn({next:function next(r){try{t(r)}catch(t){a(t),u.unsubscribe()}},error:a,complete:r});i.subscribe(u)}))},Observable.prototype._subscribe=function(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)},Observable.prototype[Pn]=function(){return this},Observable.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return pipeFromArray$1(t)(this)},Observable.prototype.toPromise=function(t){var r=this;return new(t=getPromiseCtor$1(t))((function(t,i){var a;r.subscribe((function(t){return a=t}),(function(t){return i(t)}),(function(){return t(a)}))}))},Observable.create=function(t){return new Observable(t)},Observable}();function getPromiseCtor$1(t){var r;return null!==(r=null!=t?t:Cn.Promise)&&void 0!==r?r:Promise}function isInteropObservable$1(t){return isFunction$1(t[Pn])}function isAsyncIterable$1(t){return Symbol.asyncIterator&&isFunction$1(null==t?void 0:t[Symbol.asyncIterator])}function createInvalidObservableTypeError$1(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Bn=function getSymbolIterator$1(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function isIterable$1(t){return isFunction$1(null==t?void 0:t[Bn])}function readableStreamLikeToAsyncGenerator$1(t){return __asyncGenerator$1(this,arguments,(function readableStreamLikeToAsyncGenerator_1(){var r,i,a;return __generator$j(this,(function(u){switch(u.label){case 0:r=t.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,__await$1(r.read())];case 3:return i=u.sent(),a=i.value,i.done?[4,__await$1(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,__await$1(a)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}}))}))}function isReadableStreamLike$1(t){return isFunction$1(null==t?void 0:t.getReader)}function innerFrom$1(t){if(t instanceof Fn)return t;if(null!=t){if(isInteropObservable$1(t))return function fromInteropObservable$1(t){return new Fn((function(r){var i=t[Pn]();if(isFunction$1(i.subscribe))return i.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(t);if(En(t))return function fromArrayLike$1(t){return new Fn((function(r){for(var i=0;i<t.length&&!r.closed;i++)r.next(t[i]);r.complete()}))}(t);if(isPromise$1(t))return function fromPromise$1(t){return new Fn((function(r){t.then((function(t){r.closed||(r.next(t),r.complete())}),(function(t){return r.error(t)})).then(null,reportUnhandledError$1)}))}(t);if(isAsyncIterable$1(t))return fromAsyncIterable$1(t);if(isIterable$1(t))return function fromIterable$1(t){return new Fn((function(r){var i,a;try{for(var u=__values$1(t),l=u.next();!l.done;l=u.next()){var c=l.value;if(r.next(c),r.closed)return}}catch(t){i={error:t}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}r.complete()}))}(t);if(isReadableStreamLike$1(t))return function fromReadableStreamLike$1(t){return fromAsyncIterable$1(readableStreamLikeToAsyncGenerator$1(t))}(t)}throw createInvalidObservableTypeError$1(t)}function fromAsyncIterable$1(t){return new Fn((function(r){(function process$1(t,r){var i,a,u,l;return __awaiter$j(this,void 0,void 0,(function(){var c,d;return __generator$j(this,(function(g){switch(g.label){case 0:g.trys.push([0,5,6,11]),i=__asyncValues$1(t),g.label=1;case 1:return[4,i.next()];case 2:if((a=g.sent()).done)return[3,4];if(c=a.value,r.next(c),r.closed)return[2];g.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return d=g.sent(),u={error:d},[3,11];case 6:return g.trys.push([6,,9,10]),a&&!a.done&&(l=i.return)?[4,l.call(i)]:[3,8];case 7:g.sent(),g.label=8;case 8:return[3,10];case 9:if(u)throw u.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}}))}))})(t,r).catch((function(t){return r.error(t)}))}))}function createOperatorSubscriber$1(t,r,i,a,u){return new Un(t,r,i,a,u)}var Un=function(t){function OperatorSubscriber(r,i,a,u,l,c){var d=t.call(this,r)||this;return d.onFinalize=l,d.shouldUnsubscribe=c,d._next=i?function(t){try{i(t)}catch(t){r.error(t)}}:t.prototype._next,d._error=u?function(t){try{u(t)}catch(t){r.error(t)}finally{this.unsubscribe()}}:t.prototype._error,d._complete=a?function(){try{a()}catch(t){r.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,d}return __extends$1(OperatorSubscriber,t),OperatorSubscriber.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&(null===(r=this.onFinalize)||void 0===r||r.call(this))}},OperatorSubscriber}(wn);function audit(t){return operate$1((function(r,i){var a=!1,u=null,l=null,c=!1,d=function endDuration(){if(null==l||l.unsubscribe(),l=null,a){a=!1;var t=u;u=null,i.next(t)}c&&i.complete()},g=function cleanupDuration(){l=null,c&&i.complete()};r.subscribe(createOperatorSubscriber$1(i,(function(r){a=!0,u=r,l||innerFrom$1(t(r)).subscribe(l=createOperatorSubscriber$1(i,d,g))}),(function(){c=!0,(!a||!l||l.closed)&&i.complete()})))}))}var zn=function(t){function Action(r,i){return t.call(this)||this}return __extends$1(Action,t),Action.prototype.schedule=function(t,r){return this},Action}(Dn),Yn={setInterval:function(t){function setInterval(){return t.apply(this,arguments)}return setInterval.toString=function(){return t.toString()},setInterval}((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=Yn.delegate;return((null==i?void 0:i.setInterval)||setInterval).apply(void 0,__spreadArray$2([],__read$1(t)))})),clearInterval:function(t){function clearInterval(r){return t.apply(this,arguments)}return clearInterval.toString=function(){return t.toString()},clearInterval}((function(t){var r=Yn.delegate;return((null==r?void 0:r.clearInterval)||clearInterval)(t)})),delegate:void 0},Gn=function(t){function AsyncAction(r,i){var a=t.call(this,r,i)||this;return a.scheduler=r,a.work=i,a.pending=!1,a}return __extends$1(AsyncAction,t),AsyncAction.prototype.schedule=function(t,r){if(void 0===r&&(r=0),this.closed)return this;this.state=t;var i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(a,this.id,r),this},AsyncAction.prototype.requestAsyncId=function(t,r,i){return void 0===i&&(i=0),Yn.setInterval(t.flush.bind(t,this),i)},AsyncAction.prototype.recycleAsyncId=function(t,r,i){if(void 0===i&&(i=0),null!=i&&this.delay===i&&!1===this.pending)return r;Yn.clearInterval(r)},AsyncAction.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,r);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},AsyncAction.prototype._execute=function(t,r){var i,a=!1;try{this.work(t)}catch(t){a=!0,i=t||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),i},AsyncAction.prototype.unsubscribe=function(){if(!this.closed){var r=this.id,i=this.scheduler,a=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,arrRemove$1(a,this),null!=r&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},AsyncAction}(zn),Hn={now:function now(){return(Hn.delegate||Date).now()},delegate:void 0},Qn=function(){function Scheduler(t,r){void 0===r&&(r=Scheduler.now),this.schedulerActionCtor=t,this.now=r}return Scheduler.prototype.schedule=function(t,r,i){return void 0===r&&(r=0),new this.schedulerActionCtor(this,t).schedule(i,r)},Scheduler.now=Hn.now,Scheduler}(),Vn=function(t){function AsyncScheduler(r,i){void 0===i&&(i=Qn.now);var a=t.call(this,r,i)||this;return a.actions=[],a._active=!1,a._scheduled=void 0,a}return __extends$1(AsyncScheduler,t),AsyncScheduler.prototype.flush=function(t){var r=this.actions;if(this._active)r.push(t);else{var i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=r.shift());if(this._active=!1,i){for(;t=r.shift();)t.unsubscribe();throw i}}},AsyncScheduler}(Qn),Wn=new Vn(Gn),$n=Wn;function isScheduler(t){return t&&isFunction$1(t.schedule)}function isValidDate(t){return t instanceof Date&&!isNaN(t)}function timer(t,r,i){void 0===t&&(t=0),void 0===i&&(i=$n);var a=-1;return null!=r&&(isScheduler(r)?i=r:a=r),new Fn((function(r){var u=isValidDate(t)?+t-i.now():t;u<0&&(u=0);var l=0;return i.schedule((function(){r.closed||(r.next(l++),0<=a?this.schedule(void 0,a):r.complete())}),u)}))}function auditTime(t,r){return void 0===r&&(r=Wn),audit((function(){return timer(t,r)}))}function buffer(t){return operate$1((function(r,i){var a=[];return r.subscribe(createOperatorSubscriber$1(i,(function(t){return a.push(t)}),(function(){i.next(a),i.complete()}))),t.subscribe(createOperatorSubscriber$1(i,(function(){var t=a;a=[],i.next(t)}),noop$1)),function(){a=null}}))}function bufferCount(t,r){return void 0===r&&(r=null),r=null!=r?r:t,operate$1((function(i,a){var u=[],l=0;i.subscribe(createOperatorSubscriber$1(a,(function(i){var c,d,g,p,m=null;l++%r==0&&u.push([]);try{for(var v=__values$1(u),b=v.next();!b.done;b=v.next()){(E=b.value).push(i),t<=E.length&&(m=null!=m?m:[]).push(E)}}catch(t){c={error:t}}finally{try{b&&!b.done&&(d=v.return)&&d.call(v)}finally{if(c)throw c.error}}if(m)try{for(var M=__values$1(m),S=M.next();!S.done;S=M.next()){var E=S.value;arrRemove$1(u,E),a.next(E)}}catch(t){g={error:t}}finally{try{S&&!S.done&&(p=M.return)&&p.call(M)}finally{if(g)throw g.error}}}),(function(){var t,r;try{for(var i=__values$1(u),l=i.next();!l.done;l=i.next()){var c=l.value;a.next(c)}}catch(r){t={error:r}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}a.complete()}),void 0,(function(){u=null})))}))}function last$3(t){return t[t.length-1]}function popResultSelector(t){return isFunction$1(last$3(t))?t.pop():void 0}function popScheduler(t){return isScheduler(last$3(t))?t.pop():void 0}function popNumber(t,r){return"number"==typeof last$3(t)?t.pop():r}function executeSchedule$1(t,r,i,a,u){void 0===a&&(a=0),void 0===u&&(u=!1);var l=r.schedule((function(){i(),u?t.add(this.schedule(null,a)):this.unsubscribe()}),a);if(t.add(l),!u)return l}function bufferTime(t){for(var r,i,a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var l=null!==(r=popScheduler(a))&&void 0!==r?r:Wn,c=null!==(i=a[0])&&void 0!==i?i:null,d=a[1]||1/0;return operate$1((function(r,i){var a=[],u=!1,g=function emit(t){var r=t.buffer;t.subs.unsubscribe(),arrRemove$1(a,t),i.next(r),u&&p()},p=function startBuffer(){if(a){var r=new Dn;i.add(r);var u={buffer:[],subs:r};a.push(u),executeSchedule$1(r,l,(function(){return g(u)}),t)}};null!==c&&c>=0?executeSchedule$1(i,l,p,c,!0):u=!0,p();var m=createOperatorSubscriber$1(i,(function(t){var r,i,u=a.slice();try{for(var l=__values$1(u),c=l.next();!c.done;c=l.next()){var p=c.value,m=p.buffer;m.push(t),d<=m.length&&g(p)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}),(function(){for(;null==a?void 0:a.length;)i.next(a.shift().buffer);null==m||m.unsubscribe(),i.complete(),i.unsubscribe()}),void 0,(function(){return a=null}));r.subscribe(m)}))}function bufferToggle(t,r){return operate$1((function(i,a){var u=[];innerFrom$1(t).subscribe(createOperatorSubscriber$1(a,(function(t){var i=[];u.push(i);var l=new Dn;l.add(innerFrom$1(r(t)).subscribe(createOperatorSubscriber$1(a,(function emitBuffer(){arrRemove$1(u,i),a.next(i),l.unsubscribe()}),noop$1)))}),noop$1)),i.subscribe(createOperatorSubscriber$1(a,(function(t){var r,i;try{for(var a=__values$1(u),l=a.next();!l.done;l=a.next()){l.value.push(t)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}),(function(){for(;u.length>0;)a.next(u.shift());a.complete()})))}))}function bufferWhen(t){return operate$1((function(r,i){var a=null,u=null;!function openBuffer(){null==u||u.unsubscribe();var r=a;a=[],r&&i.next(r),innerFrom$1(t()).subscribe(u=createOperatorSubscriber$1(i,openBuffer,noop$1))}(),r.subscribe(createOperatorSubscriber$1(i,(function(t){return null==a?void 0:a.push(t)}),(function(){a&&i.next(a),i.complete()}),void 0,(function(){return a=u=null})))}))}function catchError(t){return operate$1((function(r,i){var a,u=null,l=!1;u=r.subscribe(createOperatorSubscriber$1(i,void 0,void 0,(function(c){a=innerFrom$1(t(c,catchError(t)(r))),u?(u.unsubscribe(),u=null,a.subscribe(i)):l=!0}))),l&&(u.unsubscribe(),u=null,a.subscribe(i))}))}var Kn=Array.isArray,qn=Object.getPrototypeOf,Xn=Object.prototype,Zn=Object.keys;function argsArgArrayOrObject(t){if(1===t.length){var r=t[0];if(Kn(r))return{args:r,keys:null};if(function isPOJO(t){return t&&"object"==typeof t&&qn(t)===Xn}(r)){var i=Zn(r);return{args:i.map((function(t){return r[t]})),keys:i}}}return{args:t,keys:null}}function observeOn$1(t,r){return void 0===r&&(r=0),operate$1((function(i,a){i.subscribe(createOperatorSubscriber$1(a,(function(i){return executeSchedule$1(a,t,(function(){return a.next(i)}),r)}),(function(){return executeSchedule$1(a,t,(function(){return a.complete()}),r)}),(function(i){return executeSchedule$1(a,t,(function(){return a.error(i)}),r)})))}))}function subscribeOn$1(t,r){return void 0===r&&(r=0),operate$1((function(i,a){a.add(t.schedule((function(){return i.subscribe(a)}),r))}))}function scheduleIterable$1(t,r){return new Fn((function(i){var a;return executeSchedule$1(i,r,(function(){a=t[Bn](),executeSchedule$1(i,r,(function(){var t,r,u;try{r=(t=a.next()).value,u=t.done}catch(t){return void i.error(t)}u?i.complete():i.next(r)}),0,!0)})),function(){return isFunction$1(null==a?void 0:a.return)&&a.return()}}))}function scheduleAsyncIterable$1(t,r){if(!t)throw new Error("Iterable cannot be null");return new Fn((function(i){executeSchedule$1(i,r,(function(){var a=t[Symbol.asyncIterator]();executeSchedule$1(i,r,(function(){a.next().then((function(t){t.done?i.complete():i.next(t.value)}))}),0,!0)}))}))}function scheduled$1(t,r){if(null!=t){if(isInteropObservable$1(t))return function scheduleObservable$1(t,r){return innerFrom$1(t).pipe(subscribeOn$1(r),observeOn$1(r))}(t,r);if(En(t))return function scheduleArray$1(t,r){return new Fn((function(i){var a=0;return r.schedule((function(){a===t.length?i.complete():(i.next(t[a++]),i.closed||this.schedule())}))}))}(t,r);if(isPromise$1(t))return function schedulePromise$1(t,r){return innerFrom$1(t).pipe(subscribeOn$1(r),observeOn$1(r))}(t,r);if(isAsyncIterable$1(t))return scheduleAsyncIterable$1(t,r);if(isIterable$1(t))return scheduleIterable$1(t,r);if(isReadableStreamLike$1(t))return function scheduleReadableStreamLike$1(t,r){return scheduleAsyncIterable$1(readableStreamLikeToAsyncGenerator$1(t),r)}(t,r)}throw createInvalidObservableTypeError$1(t)}function from$1(t,r){return r?scheduled$1(t,r):innerFrom$1(t)}function map$3(t,r){return operate$1((function(i,a){var u=0;i.subscribe(createOperatorSubscriber$1(a,(function(i){a.next(t.call(r,i,u++))})))}))}var Jn=Array.isArray;function mapOneOrManyArgs(t){return map$3((function(r){return function callOrApply(t,r){return Jn(r)?t.apply(void 0,__spreadArray$2([],__read$1(r))):t(r)}(t,r)}))}function createObject(t,r){return t.reduce((function(t,i,a){return t[i]=r[a],t}),{})}function combineLatest$1(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=popScheduler(t),a=popResultSelector(t),u=argsArgArrayOrObject(t),l=u.args,c=u.keys;if(0===l.length)return from$1([],i);var d=new Fn(combineLatestInit(l,i,c?function(t){return createObject(c,t)}:identity$3));return a?d.pipe(mapOneOrManyArgs(a)):d}function combineLatestInit(t,r,i){return void 0===i&&(i=identity$3),function(a){maybeSchedule(r,(function(){for(var u=t.length,l=new Array(u),c=u,d=u,g=function _loop_1(u){maybeSchedule(r,(function(){var g=from$1(t[u],r),p=!1;g.subscribe(createOperatorSubscriber$1(a,(function(t){l[u]=t,p||(p=!0,d--),d||a.next(i(l.slice()))}),(function(){--c||a.complete()})))}),a)},p=0;p<u;p++)g(p)}),a)}}function maybeSchedule(t,r,i){t?executeSchedule$1(i,t,r):r()}function mergeInternals$1(t,r,i,a,u,l,c,d){var g=[],p=0,m=0,v=!1,b=function checkComplete(){!v||g.length||p||r.complete()},M=function outerNext(t){return p<a?S(t):g.push(t)},S=function doInnerSub(t){l&&r.next(t),p++;var d=!1;innerFrom$1(i(t,m++)).subscribe(createOperatorSubscriber$1(r,(function(t){null==u||u(t),l?M(t):r.next(t)}),(function(){d=!0}),void 0,(function(){if(d)try{p--;for(var t=function _loop_1(){var t=g.shift();c?executeSchedule$1(r,c,(function(){return doInnerSub(t)})):doInnerSub(t)};g.length&&p<a;)t();b()}catch(t){r.error(t)}})))};return t.subscribe(createOperatorSubscriber$1(r,M,(function(){v=!0,b()}))),function(){null==d||d()}}function mergeMap$1(t,r,i){return void 0===i&&(i=1/0),isFunction$1(r)?mergeMap$1((function(i,a){return map$3((function(t,u){return r(i,t,a,u)}))(innerFrom$1(t(i,a)))}),i):("number"==typeof r&&(i=r),operate$1((function(r,a){return mergeInternals$1(r,a,t,i)})))}function scanInternals(t,r,i,a,u){return function(l,c){var d=i,g=r,p=0;l.subscribe(createOperatorSubscriber$1(c,(function(r){var i=p++;g=d?t(g,r,i):(d=!0,r),a&&c.next(g)}),u&&function(){d&&c.next(g),c.complete()}))}}function reduce$2(t,r){return operate$1(scanInternals(t,r,arguments.length>=2,!1,!0))}var ei=function arrReducer(t,r){return t.push(r),t};function toArray(){return operate$1((function(t,r){reduce$2(ei,[])(t).subscribe(r)}))}function joinAllInternals(t,r){return pipe$1(toArray(),mergeMap$1((function(r){return t(r)})),r?mapOneOrManyArgs(r):identity$3)}function combineLatestAll(t){return joinAllInternals(combineLatest$1,t)}var ti=combineLatestAll,ri=Array.isArray;function argsOrArgArray(t){return 1===t.length&&ri(t[0])?t[0]:t}function combineLatest(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=popResultSelector(t);return i?pipe$1(combineLatest.apply(void 0,__spreadArray$2([],__read$1(t))),mapOneOrManyArgs(i)):operate$1((function(r,i){combineLatestInit(__spreadArray$2([r],__read$1(argsOrArgArray(t))))(i)}))}function combineLatestWith(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return combineLatest.apply(void 0,__spreadArray$2([],__read$1(t)))}function mergeAll$2(t){return void 0===t&&(t=1/0),mergeMap$1(identity$3,t)}function concatAll(){return mergeAll$2(1)}function concat$3(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=popScheduler(t);return operate$1((function(r,a){concatAll()(from$1(__spreadArray$2([r],__read$1(t)),i)).subscribe(a)}))}function concatMap(t,r){return isFunction$1(r)?mergeMap$1(t,r,1):mergeMap$1(t,1)}function concatMapTo(t,r){return isFunction$1(r)?concatMap((function(){return t}),r):concatMap((function(){return t}))}function concatWith(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return concat$3.apply(void 0,__spreadArray$2([],__read$1(t)))}var ni=createErrorClass$1((function(t){return function ObjectUnsubscribedErrorImpl(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),ii=function(t){function Subject(){var r=t.call(this)||this;return r.closed=!1,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return __extends$1(Subject,t),Subject.prototype.lift=function(t){var r=new ai(this,this);return r.operator=t,r},Subject.prototype._throwIfClosed=function(){if(this.closed)throw new ni},Subject.prototype.next=function(t){var r=this;errorContext$1((function(){var i,a;if(r._throwIfClosed(),!r.isStopped){var u=r.observers.slice();try{for(var l=__values$1(u),c=l.next();!c.done;c=l.next()){c.value.next(t)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}}}))},Subject.prototype.error=function(t){var r=this;errorContext$1((function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var i=r.observers;i.length;)i.shift().error(t)}}))},Subject.prototype.complete=function(){var t=this;errorContext$1((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var r=t.observers;r.length;)r.shift().complete()}}))},Subject.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(Subject.prototype,"observed",{get:function get(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),Subject.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},Subject.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},Subject.prototype._innerSubscribe=function(t){var r=this,i=r.hasError,a=r.isStopped,u=r.observers;return i||a?An:(u.push(t),new Dn((function(){return arrRemove$1(u,t)})))},Subject.prototype._checkFinalizedStatuses=function(t){var r=this,i=r.hasError,a=r.thrownError,u=r.isStopped;i?t.error(a):u&&t.complete()},Subject.prototype.asObservable=function(){var t=new Fn;return t.source=this,t},Subject.create=function(t,r){return new ai(t,r)},Subject}(Fn),ai=function(t){function AnonymousSubject(r,i){var a=t.call(this)||this;return a.destination=r,a.source=i,a}return __extends$1(AnonymousSubject,t),AnonymousSubject.prototype.next=function(t){var r,i;null===(i=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===i||i.call(r,t)},AnonymousSubject.prototype.error=function(t){var r,i;null===(i=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===i||i.call(r,t)},AnonymousSubject.prototype.complete=function(){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===r||r.call(t)},AnonymousSubject.prototype._subscribe=function(t){var r,i;return null!==(i=null===(r=this.source)||void 0===r?void 0:r.subscribe(t))&&void 0!==i?i:An},AnonymousSubject}(ii);var oi={connector:function connector(){return new ii}};function connect(t,r){void 0===r&&(r=oi);var i=r.connector;return operate$1((function(r,a){var u=i();from$1(t(function fromSubscribable(t){return new Fn((function(r){return t.subscribe(r)}))}(u))).subscribe(a),a.add(r.subscribe(u))}))}function count(t){return reduce$2((function(r,i,a){return!t||t(i,a)?r+1:r}),0)}function debounce$1(t){return operate$1((function(r,i){var a=!1,u=null,l=null,c=function emit(){if(null==l||l.unsubscribe(),l=null,a){a=!1;var t=u;u=null,i.next(t)}};r.subscribe(createOperatorSubscriber$1(i,(function(r){null==l||l.unsubscribe(),a=!0,u=r,l=createOperatorSubscriber$1(i,c,noop$1),innerFrom$1(t(r)).subscribe(l)}),(function(){c(),i.complete()}),void 0,(function(){u=l=null})))}))}function debounceTime(t,r){return void 0===r&&(r=Wn),operate$1((function(i,a){var u=null,l=null,c=null,d=function emit(){if(u){u.unsubscribe(),u=null;var t=l;l=null,a.next(t)}};function emitWhenIdle(){var i=c+t,l=r.now();if(l<i)return u=this.schedule(void 0,i-l),void a.add(u);d()}i.subscribe(createOperatorSubscriber$1(a,(function(i){l=i,c=r.now(),u||(u=r.schedule(emitWhenIdle,t),a.add(u))}),(function(){d(),a.complete()}),void 0,(function(){l=u=null})))}))}function defaultIfEmpty(t){return operate$1((function(r,i){var a=!1;r.subscribe(createOperatorSubscriber$1(i,(function(t){a=!0,i.next(t)}),(function(){a||i.next(t),i.complete()})))}))}function concat$2(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return concatAll()(from$1(t,popScheduler(t)))}var si,ui=new Fn((function(t){return t.complete()}));function take$3(t){return t<=0?function(){return ui}:operate$1((function(r,i){var a=0;r.subscribe(createOperatorSubscriber$1(i,(function(r){++a<=t&&(i.next(r),t<=a&&i.complete())})))}))}function ignoreElements(){return operate$1((function(t,r){t.subscribe(createOperatorSubscriber$1(r,noop$1))}))}function mapTo(t){return map$3((function(){return t}))}function delayWhen(t,r){return r?function(i){return concat$2(r.pipe(take$3(1),ignoreElements()),i.pipe(delayWhen(t)))}:mergeMap$1((function(r,i){return t(r,i).pipe(take$3(1),mapTo(r))}))}function delay$1(t,r){void 0===r&&(r=Wn);var i=timer(t,r);return delayWhen((function(){return i}))}function of$2(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=popScheduler(t);return from$1(t,i)}function throwError(t,r){var i=isFunction$1(t)?t:function(){return t},a=function init(t){return t.error(i())};return new Fn(r?function(t){return r.schedule(a,0,t)}:a)}!function(t){t.NEXT="N",t.ERROR="E",t.COMPLETE="C"}(si||(si={}));var li=function(){function Notification(t,r,i){this.kind=t,this.value=r,this.error=i,this.hasValue="N"===t}return Notification.prototype.observe=function(t){return observeNotification(this,t)},Notification.prototype.do=function(t,r,i){var a=this,u=a.kind,l=a.value,c=a.error;return"N"===u?null==t?void 0:t(l):"E"===u?null==r?void 0:r(c):null==i?void 0:i()},Notification.prototype.accept=function(t,r,i){var a;return isFunction$1(null===(a=t)||void 0===a?void 0:a.next)?this.observe(t):this.do(t,r,i)},Notification.prototype.toObservable=function(){var t=this,r=t.kind,i=t.value,a=t.error,u="N"===r?of$2(i):"E"===r?throwError((function(){return a})):"C"===r?ui:0;if(!u)throw new TypeError("Unexpected notification kind "+r);return u},Notification.createNext=function(t){return new Notification("N",t)},Notification.createError=function(t){return new Notification("E",void 0,t)},Notification.createComplete=function(){return Notification.completeNotification},Notification.completeNotification=new Notification("C"),Notification}();function observeNotification(t,r){var i,a,u,l=t,c=l.kind,d=l.value,g=l.error;if("string"!=typeof c)throw new TypeError('Invalid notification, missing "kind"');"N"===c?null===(i=r.next)||void 0===i||i.call(r,d):"E"===c?null===(a=r.error)||void 0===a||a.call(r,g):null===(u=r.complete)||void 0===u||u.call(r)}function dematerialize(){return operate$1((function(t,r){t.subscribe(createOperatorSubscriber$1(r,(function(t){return observeNotification(t,r)})))}))}function distinct(t,r){return operate$1((function(i,a){var u=new Set;i.subscribe(createOperatorSubscriber$1(a,(function(r){var i=t?t(r):r;u.has(i)||(u.add(i),a.next(r))}))),null==r||r.subscribe(createOperatorSubscriber$1(a,(function(){return u.clear()}),noop$1))}))}function distinctUntilChanged(t,r){return void 0===r&&(r=identity$3),t=null!=t?t:defaultCompare,operate$1((function(i,a){var u,l=!0;i.subscribe(createOperatorSubscriber$1(a,(function(i){var c=r(i);!l&&t(u,c)||(l=!1,u=c,a.next(i))})))}))}function defaultCompare(t,r){return t===r}function distinctUntilKeyChanged(t,r){return distinctUntilChanged((function(i,a){return r?r(i[t],a[t]):i[t]===a[t]}))}var ci=createErrorClass$1((function(t){return function ArgumentOutOfRangeErrorImpl(){t(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}));function filter$3(t,r){return operate$1((function(i,a){var u=0;i.subscribe(createOperatorSubscriber$1(a,(function(i){return t.call(r,i,u++)&&a.next(i)})))}))}var di=createErrorClass$1((function(t){return function EmptyErrorImpl(){t(this),this.name="EmptyError",this.message="no elements in sequence"}}));function throwIfEmpty(t){return void 0===t&&(t=defaultErrorFactory),operate$1((function(r,i){var a=!1;r.subscribe(createOperatorSubscriber$1(i,(function(t){a=!0,i.next(t)}),(function(){return a?i.complete():i.error(t())})))}))}function defaultErrorFactory(){return new di}function elementAt(t,r){if(t<0)throw new ci;var i=arguments.length>=2;return function(a){return a.pipe(filter$3((function(r,i){return i===t})),take$3(1),i?defaultIfEmpty(r):throwIfEmpty((function(){return new ci})))}}function endWith(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(r){return concat$2(r,of$2.apply(void 0,__spreadArray$2([],__read$1(t))))}}function every(t,r){return operate$1((function(i,a){var u=0;i.subscribe(createOperatorSubscriber$1(a,(function(l){t.call(r,l,u++,i)||(a.next(!1),a.complete())}),(function(){a.next(!0),a.complete()})))}))}function exhaustAll(){return operate$1((function(t,r){var i=!1,a=null;t.subscribe(createOperatorSubscriber$1(r,(function(t){a||(a=innerFrom$1(t).subscribe(createOperatorSubscriber$1(r,void 0,(function(){a=null,i&&r.complete()}))))}),(function(){i=!0,!a&&r.complete()})))}))}var fi=exhaustAll;function exhaustMap(t,r){return r?function(i){return i.pipe(exhaustMap((function(i,a){return innerFrom$1(t(i,a)).pipe(map$3((function(t,u){return r(i,t,a,u)})))})))}:operate$1((function(r,i){var a=0,u=null,l=!1;r.subscribe(createOperatorSubscriber$1(i,(function(r){u||(u=createOperatorSubscriber$1(i,void 0,(function(){u=null,l&&i.complete()})),innerFrom$1(t(r,a++)).subscribe(u))}),(function(){l=!0,!u&&i.complete()})))}))}function expand(t,r,i){return void 0===r&&(r=1/0),r=(r||0)<1?1/0:r,operate$1((function(a,u){return mergeInternals$1(a,u,t,r,void 0,!0,i)}))}function finalize(t){return operate$1((function(r,i){try{r.subscribe(i)}finally{i.add(t)}}))}function find$2(t,r){return operate$1(createFind(t,r,"value"))}function createFind(t,r,i){var a="index"===i;return function(i,u){var l=0;i.subscribe(createOperatorSubscriber$1(u,(function(c){var d=l++;t.call(r,c,d,i)&&(u.next(a?d:c),u.complete())}),(function(){u.next(a?-1:void 0),u.complete()})))}}function findIndex$2(t,r){return operate$1(createFind(t,r,"index"))}function first(t,r){var i=arguments.length>=2;return function(a){return a.pipe(t?filter$3((function(r,i){return t(r,i,a)})):identity$3,take$3(1),i?defaultIfEmpty(r):throwIfEmpty((function(){return new di})))}}function groupBy$2(t,r,i,a){return operate$1((function(u,l){var c;r&&"function"!=typeof r?(i=r.duration,c=r.element,a=r.connector):c=r;var d=new Map,g=function notify(t){d.forEach(t),t(l)},p=function handleError(t){return g((function(r){return r.error(t)}))},m=0,v=!1,b=new Un(l,(function(r){try{var u=t(r),g=d.get(u);if(!g){d.set(u,g=a?a():new ii);var M=function createGroupedObservable(t,r){var i=new Fn((function(t){m++;var i=r.subscribe(t);return function(){i.unsubscribe(),0==--m&&v&&b.unsubscribe()}}));return i.key=t,i}(u,g);if(l.next(M),i){var S=createOperatorSubscriber$1(g,(function(){g.complete(),null==S||S.unsubscribe()}),void 0,void 0,(function(){return d.delete(u)}));b.add(innerFrom$1(i(M)).subscribe(S))}}g.next(c?c(r):r)}catch(t){p(t)}}),(function(){return g((function(t){return t.complete()}))}),p,(function(){return d.clear()}),(function(){return v=!0,0===m}));u.subscribe(b)}))}function isEmpty$2(){return operate$1((function(t,r){t.subscribe(createOperatorSubscriber$1(r,(function(){r.next(!1),r.complete()}),(function(){r.next(!0),r.complete()})))}))}function takeLast$2(t){return t<=0?function(){return ui}:operate$1((function(r,i){var a=[];r.subscribe(createOperatorSubscriber$1(i,(function(r){a.push(r),t<a.length&&a.shift()}),(function(){var t,r;try{for(var u=__values$1(a),l=u.next();!l.done;l=u.next()){var c=l.value;i.next(c)}}catch(r){t={error:r}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}i.complete()}),void 0,(function(){a=null})))}))}function last$2(t,r){var i=arguments.length>=2;return function(a){return a.pipe(t?filter$3((function(r,i){return t(r,i,a)})):identity$3,takeLast$2(1),i?defaultIfEmpty(r):throwIfEmpty((function(){return new di})))}}function materialize(){return operate$1((function(t,r){t.subscribe(createOperatorSubscriber$1(r,(function(t){r.next(li.createNext(t))}),(function(){r.next(li.createComplete()),r.complete()}),(function(t){r.next(li.createError(t)),r.complete()})))}))}function max$2(t){return reduce$2(isFunction$1(t)?function(r,i){return t(r,i)>0?r:i}:function(t,r){return t>r?t:r})}function merge$4(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=popScheduler(t),a=popNumber(t,1/0);return t=argsOrArgArray(t),operate$1((function(r,u){mergeAll$2(a)(from$1(__spreadArray$2([r],__read$1(t)),i)).subscribe(u)}))}var hi=mergeMap$1;function mergeMapTo(t,r,i){return void 0===i&&(i=1/0),isFunction$1(r)?mergeMap$1((function(){return t}),r,i):("number"==typeof r&&(i=r),mergeMap$1((function(){return t}),i))}function mergeScan(t,r,i){return void 0===i&&(i=1/0),operate$1((function(a,u){var l=r;return mergeInternals$1(a,u,(function(r,i){return t(l,r,i)}),i,(function(t){l=t}),!1,void 0,(function(){return l=null}))}))}function mergeWith$2(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return merge$4.apply(void 0,__spreadArray$2([],__read$1(t)))}function min$2(t){return reduce$2(isFunction$1(t)?function(r,i){return t(r,i)<0?r:i}:function(t,r){return t<r?t:r})}function refCount(){return operate$1((function(t,r){var i=null;t._refCount++;var a=createOperatorSubscriber$1(r,void 0,void 0,void 0,(function(){if(!t||t._refCount<=0||0<--t._refCount)i=null;else{var a=t._connection,u=i;i=null,!a||u&&a!==u||a.unsubscribe(),r.unsubscribe()}}));t.subscribe(a),a.closed||(i=t.connect())}))}var gi=function(t){function ConnectableObservable(r,i){var a=t.call(this)||this;return a.source=r,a.subjectFactory=i,a._subject=null,a._refCount=0,a._connection=null,hasLift$1(r)&&(a.lift=r.lift),a}return __extends$1(ConnectableObservable,t),ConnectableObservable.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},ConnectableObservable.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},ConnectableObservable.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,null==t||t.unsubscribe()},ConnectableObservable.prototype.connect=function(){var t=this,r=this._connection;if(!r){r=this._connection=new Dn;var i=this.getSubject();r.add(this.source.subscribe(createOperatorSubscriber$1(i,void 0,(function(){t._teardown(),i.complete()}),(function(r){t._teardown(),i.error(r)}),(function(){return t._teardown()})))),r.closed&&(this._connection=null,r=Dn.EMPTY)}return r},ConnectableObservable.prototype.refCount=function(){return refCount()(this)},ConnectableObservable}(Fn);function multicast(t,r){var i=isFunction$1(t)?t:function(){return t};return isFunction$1(r)?connect(r,{connector:i}):function(t){return new gi(t,i)}}function onErrorResumeNext$1(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=argsOrArgArray(t);return operate$1((function(t,r){var a=__spreadArray$2([t],__read$1(i));!function subscribeNext(){if(!r.closed)if(a.length>0){var t=void 0;try{t=innerFrom$1(a.shift())}catch(t){return void subscribeNext()}var i=createOperatorSubscriber$1(r,void 0,noop$1,noop$1);t.subscribe(i),i.add(subscribeNext)}else r.complete()}()}))}function pairwise(){return operate$1((function(t,r){var i,a=!1;t.subscribe(createOperatorSubscriber$1(r,(function(t){var u=i;i=t,a&&r.next([u,t]),a=!0})))}))}function not$2(t,r){return function(i,a){return!t.call(r,i,a)}}function pluck$2(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=t.length;if(0===i)throw new Error("list of properties cannot be empty.");return map$3((function(r){for(var a=r,u=0;u<i;u++){var l=null==a?void 0:a[t[u]];if(void 0===l)return;a=l}return a}))}function publish$1(t){return t?function(r){return connect(t)(r)}:function(t){return multicast(new ii)(t)}}var pi=function(t){function BehaviorSubject(r){var i=t.call(this)||this;return i._value=r,i}return __extends$1(BehaviorSubject,t),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function get(){return this.getValue()},enumerable:!1,configurable:!0}),BehaviorSubject.prototype._subscribe=function(r){var i=t.prototype._subscribe.call(this,r);return!i.closed&&r.next(this._value),i},BehaviorSubject.prototype.getValue=function(){var t=this,r=t.hasError,i=t.thrownError,a=t._value;if(r)throw i;return this._throwIfClosed(),a},BehaviorSubject.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},BehaviorSubject}(ii);function publishBehavior(t){return function(r){var i=new pi(t);return new gi(r,(function(){return i}))}}var mi=function(t){function AsyncSubject(){var r=null!==t&&t.apply(this,arguments)||this;return r._value=null,r._hasValue=!1,r._isComplete=!1,r}return __extends$1(AsyncSubject,t),AsyncSubject.prototype._checkFinalizedStatuses=function(t){var r=this,i=r.hasError,a=r._hasValue,u=r._value,l=r.thrownError,c=r.isStopped,d=r._isComplete;i?t.error(l):(c||d)&&(a&&t.next(u),t.complete())},AsyncSubject.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},AsyncSubject.prototype.complete=function(){var r=this,i=r._hasValue,a=r._value;r._isComplete||(this._isComplete=!0,i&&t.prototype.next.call(this,a),t.prototype.complete.call(this))},AsyncSubject}(ii);function publishLast(){return function(t){var r=new mi;return new gi(t,(function(){return r}))}}var yi=function(t){function ReplaySubject(r,i,a){void 0===r&&(r=1/0),void 0===i&&(i=1/0),void 0===a&&(a=Hn);var u=t.call(this)||this;return u._bufferSize=r,u._windowTime=i,u._timestampProvider=a,u._buffer=[],u._infiniteTimeWindow=!0,u._infiniteTimeWindow=i===1/0,u._bufferSize=Math.max(1,r),u._windowTime=Math.max(1,i),u}return __extends$1(ReplaySubject,t),ReplaySubject.prototype.next=function(r){var i=this,a=i.isStopped,u=i._buffer,l=i._infiniteTimeWindow,c=i._timestampProvider,d=i._windowTime;a||(u.push(r),!l&&u.push(c.now()+d)),this._trimBuffer(),t.prototype.next.call(this,r)},ReplaySubject.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(t),i=this._infiniteTimeWindow,a=this._buffer.slice(),u=0;u<a.length&&!t.closed;u+=i?1:2)t.next(a[u]);return this._checkFinalizedStatuses(t),r},ReplaySubject.prototype._trimBuffer=function(){var t=this,r=t._bufferSize,i=t._timestampProvider,a=t._buffer,u=t._infiniteTimeWindow,l=(u?1:2)*r;if(r<1/0&&l<a.length&&a.splice(0,a.length-l),!u){for(var c=i.now(),d=0,g=1;g<a.length&&a[g]<=c;g+=2)d=g;d&&a.splice(0,d+1)}},ReplaySubject}(ii);function publishReplay(t,r,i,a){i&&!isFunction$1(i)&&(a=i);var u=isFunction$1(i)?i:void 0;return function(i){return multicast(new yi(t,r,a),u)(i)}}function raceInit(t){return function(r){for(var i=[],a=function _loop_1(a){i.push(innerFrom$1(t[a]).subscribe(createOperatorSubscriber$1(r,(function(t){if(i){for(var u=0;u<i.length;u++)u!==a&&i[u].unsubscribe();i=null}r.next(t)}))))},u=0;i&&!r.closed&&u<t.length;u++)a(u)}}function raceWith(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.length?operate$1((function(r,i){raceInit(__spreadArray$2([r],__read$1(t)))(i)})):identity$3}function repeat$2(t){var r,i,a=1/0;return null!=t&&("object"==typeof t?(r=t.count,a=void 0===r?1/0:r,i=t.delay):a=t),a<=0?function(){return ui}:operate$1((function(t,r){var u,l=0,c=function resubscribe(){if(null==u||u.unsubscribe(),u=null,null!=i){var t="number"==typeof i?timer(i):innerFrom$1(i(l)),a=createOperatorSubscriber$1(r,(function(){a.unsubscribe(),d()}));t.subscribe(a)}else d()},d=function subscribeToSource(){var i=!1;u=t.subscribe(createOperatorSubscriber$1(r,void 0,(function(){++l<a?u?c():i=!0:r.complete()}))),i&&c()};d()}))}function repeatWhen(t){return operate$1((function(r,i){var a,u,l=!1,c=!1,d=!1,g=function checkComplete(){return d&&c&&(i.complete(),!0)},p=function getCompletionSubject(){return u||(u=new ii,t(u).subscribe(createOperatorSubscriber$1(i,(function(){a?m():l=!0}),(function(){c=!0,g()})))),u},m=function subscribeForRepeatWhen(){d=!1,a=r.subscribe(createOperatorSubscriber$1(i,void 0,(function(){d=!0,!g()&&p().next()}))),l&&(a.unsubscribe(),a=null,l=!1,subscribeForRepeatWhen())};m()}))}function retry(t){var r;void 0===t&&(t=1/0);var i=(r=t&&"object"==typeof t?t:{count:t}).count,a=void 0===i?1/0:i,u=r.delay,l=r.resetOnSuccess,c=void 0!==l&&l;return a<=0?identity$3:operate$1((function(t,r){var i,l=0;!function subscribeForRetry(){var d=!1;i=t.subscribe(createOperatorSubscriber$1(r,(function(t){c&&(l=0),r.next(t)}),void 0,(function(t){if(l++<a){var c=function resub_1(){i?(i.unsubscribe(),i=null,subscribeForRetry()):d=!0};if(null!=u){var g="number"==typeof u?timer(u):innerFrom$1(u(t,l)),p=createOperatorSubscriber$1(r,(function(){p.unsubscribe(),c()}),(function(){r.complete()}));g.subscribe(p)}else c()}else r.error(t)}))),d&&(i.unsubscribe(),i=null,subscribeForRetry())}()}))}function retryWhen(t){return operate$1((function(r,i){var a,u,l=!1;!function subscribeForRetryWhen(){a=r.subscribe(createOperatorSubscriber$1(i,void 0,void 0,(function(r){u||(u=new ii,t(u).subscribe(createOperatorSubscriber$1(i,(function(){return a?subscribeForRetryWhen():l=!0})))),u&&u.next(r)}))),l&&(a.unsubscribe(),a=null,l=!1,subscribeForRetryWhen())}()}))}function sample(t){return operate$1((function(r,i){var a=!1,u=null;r.subscribe(createOperatorSubscriber$1(i,(function(t){a=!0,u=t}))),t.subscribe(createOperatorSubscriber$1(i,(function(){if(a){a=!1;var t=u;u=null,i.next(t)}}),noop$1))}))}function interval(t,r){return void 0===t&&(t=0),void 0===r&&(r=Wn),t<0&&(t=0),timer(t,t,r)}function sampleTime(t,r){return void 0===r&&(r=Wn),sample(interval(t,r))}function scan$2(t,r){return operate$1(scanInternals(t,r,arguments.length>=2,!0))}function sequenceEqual(t,r){return void 0===r&&(r=function comparator(t,r){return t===r}),operate$1((function(i,a){var u={buffer:[],complete:!1},l={buffer:[],complete:!1},c=function emit(t){a.next(t),a.complete()},d=function createSubscriber(t,i){var u=createOperatorSubscriber$1(a,(function(a){var u=i.buffer,l=i.complete;0===u.length?l?c(!1):t.buffer.push(a):!r(a,u.shift())&&c(!1)}),(function(){t.complete=!0;var r=i.complete,a=i.buffer;r&&c(0===a.length),null==u||u.unsubscribe()}));return u};i.subscribe(d(u,l)),t.subscribe(d(l,u))}))}function share(t){void 0===t&&(t={});var r=t.connector,i=void 0===r?function(){return new ii}:r,a=t.resetOnError,u=void 0===a||a,l=t.resetOnComplete,c=void 0===l||l,d=t.resetOnRefCountZero,g=void 0===d||d;return function(t){var r=null,a=null,l=null,d=0,p=!1,m=!1,v=function cancelReset(){null==a||a.unsubscribe(),a=null},b=function reset(){v(),r=l=null,p=m=!1},M=function resetAndUnsubscribe(){var t=r;b(),null==t||t.unsubscribe()};return operate$1((function(t,S){d++,m||p||v();var E=l=null!=l?l:i();S.add((function(){0!==--d||m||p||(a=handleReset(M,g))})),E.subscribe(S),r||(r=new Rn({next:function next(t){return E.next(t)},error:function error(t){m=!0,v(),a=handleReset(b,u,t),E.error(t)},complete:function complete(){p=!0,v(),a=handleReset(b,c),E.complete()}}),from$1(t).subscribe(r))}))(t)}}function handleReset(t,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];return!0===r?(t(),null):!1===r?null:r.apply(void 0,__spreadArray$2([],__read$1(i))).pipe(take$3(1)).subscribe((function(){return t()}))}function shareReplay(t,r,i){var a,u,l,c=!1;return t&&"object"==typeof t?(l=null!==(a=t.bufferSize)&&void 0!==a?a:1/0,r=null!==(u=t.windowTime)&&void 0!==u?u:1/0,c=!!t.refCount,i=t.scheduler):l=null!=t?t:1/0,share({connector:function connector(){return new yi(l,r,i)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}var vi=createErrorClass$1((function(t){return function SequenceErrorImpl(r){t(this),this.name="SequenceError",this.message=r}})),_i=createErrorClass$1((function(t){return function NotFoundErrorImpl(r){t(this),this.name="NotFoundError",this.message=r}}));function single(t){return operate$1((function(r,i){var a,u=!1,l=!1,c=0;r.subscribe(createOperatorSubscriber$1(i,(function(d){l=!0,t&&!t(d,c++,r)||(u&&i.error(new vi("Too many matching values")),u=!0,a=d)}),(function(){u?(i.next(a),i.complete()):i.error(l?new _i("No matching values"):new di)})))}))}function skip(t){return filter$3((function(r,i){return t<=i}))}function skipLast(t){return t<=0?identity$3:operate$1((function(r,i){var a=new Array(t),u=0;return r.subscribe(createOperatorSubscriber$1(i,(function(r){var l=u++;if(l<t)a[l]=r;else{var c=l%t,d=a[c];a[c]=r,i.next(d)}}))),function(){a=null}}))}function skipUntil(t){return operate$1((function(r,i){var a=!1,u=createOperatorSubscriber$1(i,(function(){null==u||u.unsubscribe(),a=!0}),noop$1);innerFrom$1(t).subscribe(u),r.subscribe(createOperatorSubscriber$1(i,(function(t){return a&&i.next(t)})))}))}function skipWhile(t){return operate$1((function(r,i){var a=!1,u=0;r.subscribe(createOperatorSubscriber$1(i,(function(r){return(a||(a=!t(r,u++)))&&i.next(r)})))}))}function startWith(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=popScheduler(t);return operate$1((function(r,a){(i?concat$2(t,r,i):concat$2(t,r)).subscribe(a)}))}function switchMap$1(t,r){return operate$1((function(i,a){var u=null,l=0,c=!1,d=function checkComplete(){return c&&!u&&a.complete()};i.subscribe(createOperatorSubscriber$1(a,(function(i){null==u||u.unsubscribe();var c=0,g=l++;innerFrom$1(t(i,g)).subscribe(u=createOperatorSubscriber$1(a,(function(t){return a.next(r?r(i,t,g,c++):t)}),(function(){u=null,d()})))}),(function(){c=!0,d()})))}))}function switchAll(){return switchMap$1(identity$3)}function switchMapTo(t,r){return isFunction$1(r)?switchMap$1((function(){return t}),r):switchMap$1((function(){return t}))}function switchScan(t,r){return operate$1((function(i,a){var u=r;return switchMap$1((function(r,i){return t(u,r,i)}),(function(t,r){return u=r,r}))(i).subscribe(a),function(){u=null}}))}function takeUntil(t){return operate$1((function(r,i){innerFrom$1(t).subscribe(createOperatorSubscriber$1(i,(function(){return i.complete()}),noop$1)),!i.closed&&r.subscribe(i)}))}function takeWhile$2(t,r){return void 0===r&&(r=!1),operate$1((function(i,a){var u=0;i.subscribe(createOperatorSubscriber$1(a,(function(i){var l=t(i,u++);(l||r)&&a.next(i),!l&&a.complete()})))}))}function tap$2(t,r,i){var a=isFunction$1(t)||r||i?{next:t,error:r,complete:i}:t;return a?operate$1((function(t,r){var i;null===(i=a.subscribe)||void 0===i||i.call(a);var u=!0;t.subscribe(createOperatorSubscriber$1(r,(function(t){var i;null===(i=a.next)||void 0===i||i.call(a,t),r.next(t)}),(function(){var t;u=!1,null===(t=a.complete)||void 0===t||t.call(a),r.complete()}),(function(t){var i;u=!1,null===(i=a.error)||void 0===i||i.call(a,t),r.error(t)}),(function(){var t,r;u&&(null===(t=a.unsubscribe)||void 0===t||t.call(a)),null===(r=a.finalize)||void 0===r||r.call(a)})))})):identity$3}var Ti={leading:!0,trailing:!1};function throttle(t,r){return void 0===r&&(r=Ti),operate$1((function(i,a){var u=r.leading,l=r.trailing,c=!1,d=null,g=null,p=!1,m=function endThrottling(){null==g||g.unsubscribe(),g=null,l&&(M(),p&&a.complete())},v=function cleanupThrottling(){g=null,p&&a.complete()},b=function startThrottle(r){return g=innerFrom$1(t(r)).subscribe(createOperatorSubscriber$1(a,m,v))},M=function send(){if(c){c=!1;var t=d;d=null,a.next(t),!p&&b(t)}};i.subscribe(createOperatorSubscriber$1(a,(function(t){c=!0,d=t,(!g||g.closed)&&(u?M():b(t))}),(function(){p=!0,(!(l&&c&&g)||g.closed)&&a.complete()})))}))}function throttleTime(t,r,i){void 0===r&&(r=Wn),void 0===i&&(i=Ti);var a=timer(t,r);return throttle((function(){return a}),i)}function timeInterval(t){return void 0===t&&(t=Wn),operate$1((function(r,i){var a=t.now();r.subscribe(createOperatorSubscriber$1(i,(function(r){var u=t.now(),l=u-a;a=u,i.next(new bi(r,l))})))}))}var bi=function bi(t,r){this.value=t,this.interval=r},Mi=createErrorClass$1((function(t){return function TimeoutErrorImpl(r){void 0===r&&(r=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=r}}));function timeout$2(t,r){var i=isValidDate(t)?{first:t}:"number"==typeof t?{each:t}:t,a=i.first,u=i.each,l=i.with,c=void 0===l?timeoutErrorFactory:l,d=i.scheduler,g=void 0===d?null!=r?r:Wn:d,p=i.meta,m=void 0===p?null:p;if(null==a&&null==u)throw new TypeError("No timeout provided.");return operate$1((function(t,r){var i,l,d=null,p=0,v=function startTimer(t){l=executeSchedule$1(r,g,(function(){try{i.unsubscribe(),innerFrom$1(c({meta:m,lastValue:d,seen:p})).subscribe(r)}catch(t){r.error(t)}}),t)};i=t.subscribe(createOperatorSubscriber$1(r,(function(t){null==l||l.unsubscribe(),p++,r.next(d=t),u>0&&v(u)}),void 0,void 0,(function(){(null==l?void 0:l.closed)||null==l||l.unsubscribe(),d=null}))),v(null!=a?"number"==typeof a?a:+a-g.now():u)}))}function timeoutErrorFactory(t){throw new Mi(t)}function timeoutWith(t,r,i){var a,u,l;if(i=null!=i?i:$n,isValidDate(t)?a=t:"number"==typeof t&&(u=t),!r)throw new TypeError("No observable provided to switch to");if(l=function _with(){return r},null==a&&null==u)throw new TypeError("No timeout provided.");return timeout$2({first:a,each:u,scheduler:i,with:l})}function timestamp(t){return void 0===t&&(t=Hn),map$3((function(r){return{value:r,timestamp:t.now()}}))}function window$1(t){return operate$1((function(r,i){var a=new ii;i.next(a.asObservable());var u=function errorHandler(t){a.error(t),i.error(t)};return r.subscribe(createOperatorSubscriber$1(i,(function(t){return null==a?void 0:a.next(t)}),(function(){a.complete(),i.complete()}),u)),t.subscribe(createOperatorSubscriber$1(i,(function(){a.complete(),i.next(a=new ii)}),noop$1,u)),function(){null==a||a.unsubscribe(),a=null}}))}function windowCount(t,r){void 0===r&&(r=0);var i=r>0?r:t;return operate$1((function(r,a){var u=[new ii],l=0;a.next(u[0].asObservable()),r.subscribe(createOperatorSubscriber$1(a,(function(r){var c,d;try{for(var g=__values$1(u),p=g.next();!p.done;p=g.next()){p.value.next(r)}}catch(t){c={error:t}}finally{try{p&&!p.done&&(d=g.return)&&d.call(g)}finally{if(c)throw c.error}}var m=l-t+1;if(m>=0&&m%i==0&&u.shift().complete(),++l%i==0){var v=new ii;u.push(v),a.next(v.asObservable())}}),(function(){for(;u.length>0;)u.shift().complete();a.complete()}),(function(t){for(;u.length>0;)u.shift().error(t);a.error(t)}),(function(){null,u=null})))}))}function windowTime(t){for(var r,i,a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var l=null!==(r=popScheduler(a))&&void 0!==r?r:Wn,c=null!==(i=a[0])&&void 0!==i?i:null,d=a[1]||1/0;return operate$1((function(r,i){var a=[],u=!1,g=function closeWindow(t){var r=t.window,i=t.subs;r.complete(),i.unsubscribe(),arrRemove$1(a,t),u&&p()},p=function startWindow(){if(a){var r=new Dn;i.add(r);var u=new ii,c={window:u,subs:r,seen:0};a.push(c),i.next(u.asObservable()),executeSchedule$1(r,l,(function(){return g(c)}),t)}};null!==c&&c>=0?executeSchedule$1(i,l,p,c,!0):u=!0,p();var m=function loop(t){return a.slice().forEach(t)},v=function terminate(t){m((function(r){var i=r.window;return t(i)})),t(i),i.unsubscribe()};return r.subscribe(createOperatorSubscriber$1(i,(function(t){m((function(r){r.window.next(t),d<=++r.seen&&g(r)}))}),(function(){return v((function(t){return t.complete()}))}),(function(t){return v((function(r){return r.error(t)}))}))),function(){a=null}}))}function windowToggle(t,r){return operate$1((function(i,a){var u=[],l=function handleError(t){for(;0<u.length;)u.shift().error(t);a.error(t)};innerFrom$1(t).subscribe(createOperatorSubscriber$1(a,(function(t){var i=new ii;u.push(i);var c,d=new Dn;try{c=innerFrom$1(r(t))}catch(t){return void l(t)}a.next(i.asObservable()),d.add(c.subscribe(createOperatorSubscriber$1(a,(function closeWindow(){arrRemove$1(u,i),i.complete(),d.unsubscribe()}),noop$1,l)))}),noop$1)),i.subscribe(createOperatorSubscriber$1(a,(function(t){var r,i,a=u.slice();try{for(var l=__values$1(a),c=l.next();!c.done;c=l.next()){c.value.next(t)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}),(function(){for(;0<u.length;)u.shift().complete();a.complete()}),l,(function(){for(;0<u.length;)u.shift().unsubscribe()})))}))}function windowWhen(t){return operate$1((function(r,i){var a,u,l=function handleError(t){a.error(t),i.error(t)};!function openWindow(){var r;null==u||u.unsubscribe(),null==a||a.complete(),a=new ii,i.next(a.asObservable());try{r=innerFrom$1(t())}catch(t){return void l(t)}r.subscribe(u=createOperatorSubscriber$1(i,openWindow,openWindow,l))}(),r.subscribe(createOperatorSubscriber$1(i,(function(t){return a.next(t)}),(function(){a.complete(),i.complete()}),l,(function(){null==u||u.unsubscribe(),a=null})))}))}function withLatestFrom(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=popResultSelector(t);return operate$1((function(r,a){for(var u=t.length,l=new Array(u),c=t.map((function(){return!1})),d=!1,g=function _loop_1(r){innerFrom$1(t[r]).subscribe(createOperatorSubscriber$1(a,(function(t){l[r]=t,d||c[r]||(c[r]=!0,(d=c.every(identity$3))&&(c=null))}),noop$1))},p=0;p<u;p++)g(p);r.subscribe(createOperatorSubscriber$1(a,(function(t){if(d){var r=__spreadArray$2([t],__read$1(l));a.next(i?i.apply(void 0,__spreadArray$2([],__read$1(r))):r)}})))}))}function zip$3(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=popResultSelector(t),a=argsOrArgArray(t);return a.length?new Fn((function(t){var r=a.map((function(){return[]})),u=a.map((function(){return!1}));t.add((function(){r=u=null}));for(var l=function _loop_1(l){innerFrom$1(a[l]).subscribe(createOperatorSubscriber$1(t,(function(a){if(r[l].push(a),r.every((function(t){return t.length}))){var c=r.map((function(t){return t.shift()}));t.next(i?i.apply(void 0,__spreadArray$2([],__read$1(c))):c),r.some((function(t,r){return!t.length&&u[r]}))&&t.complete()}}),(function(){u[l]=!0,!r[l].length&&t.complete()})))},c=0;!t.closed&&c<a.length;c++)l(c);return function(){r=u=null}})):ui}function zip$2(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return operate$1((function(r,i){zip$3.apply(void 0,__spreadArray$2([r],__read$1(t))).subscribe(i)}))}function zipAll(t){return joinAllInternals(zip$3,t)}function zipWith$2(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return zip$2.apply(void 0,__spreadArray$2([],__read$1(t)))}var Si,Ei,Ii,Di=Object.freeze({__proto__:null,audit:audit,auditTime:auditTime,buffer:buffer,bufferCount:bufferCount,bufferTime:bufferTime,bufferToggle:bufferToggle,bufferWhen:bufferWhen,catchError:catchError,combineAll:ti,combineLatestAll:combineLatestAll,combineLatest:combineLatest,combineLatestWith:combineLatestWith,concat:concat$3,concatAll:concatAll,concatMap:concatMap,concatMapTo:concatMapTo,concatWith:concatWith,connect:connect,count:count,debounce:debounce$1,debounceTime:debounceTime,defaultIfEmpty:defaultIfEmpty,delay:delay$1,delayWhen:delayWhen,dematerialize:dematerialize,distinct:distinct,distinctUntilChanged:distinctUntilChanged,distinctUntilKeyChanged:distinctUntilKeyChanged,elementAt:elementAt,endWith:endWith,every:every,exhaust:fi,exhaustAll:exhaustAll,exhaustMap:exhaustMap,expand:expand,filter:filter$3,finalize:finalize,find:find$2,findIndex:findIndex$2,first:first,groupBy:groupBy$2,ignoreElements:ignoreElements,isEmpty:isEmpty$2,last:last$2,map:map$3,mapTo:mapTo,materialize:materialize,max:max$2,merge:merge$4,mergeAll:mergeAll$2,flatMap:hi,mergeMap:mergeMap$1,mergeMapTo:mergeMapTo,mergeScan:mergeScan,mergeWith:mergeWith$2,min:min$2,multicast:multicast,observeOn:observeOn$1,onErrorResumeNext:onErrorResumeNext$1,pairwise:pairwise,partition:function partition$3(t,r){return function(i){return[filter$3(t,r)(i),filter$3(not$2(t,r))(i)]}},pluck:pluck$2,publish:publish$1,publishBehavior:publishBehavior,publishLast:publishLast,publishReplay:publishReplay,race:function race(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return raceWith.apply(void 0,__spreadArray$2([],__read$1(argsOrArgArray(t))))},raceWith:raceWith,reduce:reduce$2,repeat:repeat$2,repeatWhen:repeatWhen,retry:retry,retryWhen:retryWhen,refCount:refCount,sample:sample,sampleTime:sampleTime,scan:scan$2,sequenceEqual:sequenceEqual,share:share,shareReplay:shareReplay,single:single,skip:skip,skipLast:skipLast,skipUntil:skipUntil,skipWhile:skipWhile,startWith:startWith,subscribeOn:subscribeOn$1,switchAll:switchAll,switchMap:switchMap$1,switchMapTo:switchMapTo,switchScan:switchScan,take:take$3,takeLast:takeLast$2,takeUntil:takeUntil,takeWhile:takeWhile$2,tap:tap$2,throttle:throttle,throttleTime:throttleTime,throwIfEmpty:throwIfEmpty,timeInterval:timeInterval,timeout:timeout$2,timeoutWith:timeoutWith,timestamp:timestamp,toArray:toArray,window:window$1,windowCount:windowCount,windowTime:windowTime,windowToggle:windowToggle,windowWhen:windowWhen,withLatestFrom:withLatestFrom,zip:zip$2,zipAll:zipAll,zipWith:zipWith$2}),Ai=getAugmentedNamespace(Di),Ci={name:"britbox-common",version:"1.5.2",private:!0,license:"MIT",scripts:{build:"yarn run tsc -b",watch:"yarn run tsc -w",test:"jest --passWithNoTests"},dependencies:{"@firebolt-js/sdk":"^0.7.0","@plussub/srt-vtt-parser":"^1.1.0",localcookies:"^2.0.0",marked:"^4.1.0",qs:"^6.10.1",ramda:"^0.27.1",rxjs:"^7.5.2"},devDependencies:{"@babel/core":"7.13.15","@babel/plugin-proposal-export-namespace-from":"^7.18.9","@babel/plugin-transform-modules-commonjs":"^7.18.6","@babel/runtime":"7.13.10","@types/jest":"26.0.22","@types/marked":"^4.0.6","@types/qs":"^6.9.7","@types/ramda":"^0.27.40","babel-jest":"^26.6.3",jest:"^26.6.3","jest-fetch-mock":"^3.0.3","ts-jest":"^26.5.6",typescript:"4.2.4"}},Ni={},xi={},ki={};Si=ki,Object.defineProperty(Si,"__esModule",{value:!0}),Si.ItemType=Si.PageEntryType=void 0,(Ei=Si.PageEntryType||(Si.PageEntryType={})).ItemEntry="ItemEntry",Ei.ItemDetailEntry="ItemDetailEntry",Ei.ListEntry="ListEntry",Ei.ListDetailEntry="ListDetailEntry",Ei.UserEntry="UserEntry",Ei.TextEntry="TextEntry",Ei.ImageEntry="ImageEntry",Ei.CustomEntry="CustomEntry",Ei.PeopleEntry="PeopleEntry",(Ii=Si.ItemType||(Si.ItemType={})).Movie="movie",Ii.Show="show",Ii.Season="season",Ii.Episode="episode",Ii.Program="program",Ii.Link="link",Ii.Trailer="trailer",Ii.VAM="VAM",Ii.Channel="channel",Ii.Live="live",Ii.CustomAsset="customAsset";var wi,Oi={};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.getAuthToken=Oi.setAuthToken=void 0;Oi.setAuthToken=function setAuthToken(t){wi=t};Oi.getAuthToken=function getAuthToken(){return wi};var Li,Ri={};Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.getSubscriptionCode=Ri.setSubscriptionCode=void 0;Ri.setSubscriptionCode=function setSubscriptionCode(t){Li=t};Ri.getSubscriptionCode=function getSubscriptionCode(){return Li};var ji={},Pi={now:function now(){return(Pi.delegate||performance).now()},delegate:void 0},Fi={schedule:function schedule(t){var r=requestAnimationFrame,i=cancelAnimationFrame,a=Fi.delegate;a&&(r=a.requestAnimationFrame,i=a.cancelAnimationFrame);var u=r((function(r){i=void 0,t(r)}));return new Dn((function(){return null==i?void 0:i(u)}))},requestAnimationFrame:function(t){function requestAnimationFrame(){return t.apply(this,arguments)}return requestAnimationFrame.toString=function(){return t.toString()},requestAnimationFrame}((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=Fi.delegate;return((null==i?void 0:i.requestAnimationFrame)||requestAnimationFrame).apply(void 0,__spreadArray$2([],__read$1(t)))})),cancelAnimationFrame:function(t){function cancelAnimationFrame(){return t.apply(this,arguments)}return cancelAnimationFrame.toString=function(){return t.toString()},cancelAnimationFrame}((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=Fi.delegate;return((null==i?void 0:i.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,__spreadArray$2([],__read$1(t)))})),delegate:void 0};function animationFramesFactory(t){var r=Fi.schedule;return new Fn((function(i){var a=new Dn,u=t||Pi,l=u.now();return a.add(r((function run(c){var d=u.now();i.next({timestamp:t?d:c,elapsed:d-l}),i.closed||a.add(r(run))}))),a}))}var Bi,Ui=animationFramesFactory(),zi=1,Yi={};function findAndClearHandle(t){return t in Yi&&(delete Yi[t],!0)}var Gi=function setImmediate(t){var r=zi++;return Yi[r]=!0,Bi||(Bi=Promise.resolve()),Bi.then((function(){return findAndClearHandle(r)&&t()})),r},Hi=function clearImmediate(t){findAndClearHandle(t)},Qi=Gi,Vi=Hi,Wi={setImmediate:function setImmediate(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=Wi.delegate;return((null==i?void 0:i.setImmediate)||Qi).apply(void 0,__spreadArray$2([],__read$1(t)))},clearImmediate:function clearImmediate(t){var r=Wi.delegate;return((null==r?void 0:r.clearImmediate)||Vi)(t)},delegate:void 0},$i=function(t){function AsapAction(r,i){var a=t.call(this,r,i)||this;return a.scheduler=r,a.work=i,a}return __extends$1(AsapAction,t),AsapAction.prototype.requestAsyncId=function(r,i,a){return void 0===a&&(a=0),null!==a&&a>0?t.prototype.requestAsyncId.call(this,r,i,a):(r.actions.push(this),r._scheduled||(r._scheduled=Wi.setImmediate(r.flush.bind(r,void 0))))},AsapAction.prototype.recycleAsyncId=function(r,i,a){if(void 0===a&&(a=0),null!=a&&a>0||null==a&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,i,a);r.actions.some((function(t){return t.id===i}))||(Wi.clearImmediate(i),r._scheduled=void 0)},AsapAction}(Gn),Ki=function(t){function AsapScheduler(){return null!==t&&t.apply(this,arguments)||this}return __extends$1(AsapScheduler,t),AsapScheduler.prototype.flush=function(t){this._active=!0;var r=this._scheduled;this._scheduled=void 0;var i,a=this.actions;t=t||a.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=a[0])&&t.id===r&&a.shift());if(this._active=!1,i){for(;(t=a[0])&&t.id===r&&a.shift();)t.unsubscribe();throw i}},AsapScheduler}(Vn),qi=new Ki($i),Xi=qi,Zi=function(t){function QueueAction(r,i){var a=t.call(this,r,i)||this;return a.scheduler=r,a.work=i,a}return __extends$1(QueueAction,t),QueueAction.prototype.schedule=function(r,i){return void 0===i&&(i=0),i>0?t.prototype.schedule.call(this,r,i):(this.delay=i,this.state=r,this.scheduler.flush(this),this)},QueueAction.prototype.execute=function(r,i){return i>0||this.closed?t.prototype.execute.call(this,r,i):this._execute(r,i)},QueueAction.prototype.requestAsyncId=function(r,i,a){return void 0===a&&(a=0),null!=a&&a>0||null==a&&this.delay>0?t.prototype.requestAsyncId.call(this,r,i,a):r.flush(this)},QueueAction}(Gn),Ji=function(t){function QueueScheduler(){return null!==t&&t.apply(this,arguments)||this}return __extends$1(QueueScheduler,t),QueueScheduler}(Vn),ea=new Ji(Zi),ta=ea,ra=function(t){function AnimationFrameAction(r,i){var a=t.call(this,r,i)||this;return a.scheduler=r,a.work=i,a}return __extends$1(AnimationFrameAction,t),AnimationFrameAction.prototype.requestAsyncId=function(r,i,a){return void 0===a&&(a=0),null!==a&&a>0?t.prototype.requestAsyncId.call(this,r,i,a):(r.actions.push(this),r._scheduled||(r._scheduled=Fi.requestAnimationFrame((function(){return r.flush(void 0)}))))},AnimationFrameAction.prototype.recycleAsyncId=function(r,i,a){if(void 0===a&&(a=0),null!=a&&a>0||null==a&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,i,a);r.actions.some((function(t){return t.id===i}))||(Fi.cancelAnimationFrame(i),r._scheduled=void 0)},AnimationFrameAction}(Gn),na=function(t){function AnimationFrameScheduler(){return null!==t&&t.apply(this,arguments)||this}return __extends$1(AnimationFrameScheduler,t),AnimationFrameScheduler.prototype.flush=function(t){this._active=!0;var r=this._scheduled;this._scheduled=void 0;var i,a=this.actions;t=t||a.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=a[0])&&t.id===r&&a.shift());if(this._active=!1,i){for(;(t=a[0])&&t.id===r&&a.shift();)t.unsubscribe();throw i}},AnimationFrameScheduler}(Vn),ia=new na(ra),aa=ia,oa=function(t){function VirtualTimeScheduler(r,i){void 0===r&&(r=sa),void 0===i&&(i=1/0);var a=t.call(this,r,(function(){return a.frame}))||this;return a.maxFrames=i,a.frame=0,a.index=-1,a}return __extends$1(VirtualTimeScheduler,t),VirtualTimeScheduler.prototype.flush=function(){for(var t,r,i=this.actions,a=this.maxFrames;(r=i[0])&&r.delay<=a&&(i.shift(),this.frame=r.delay,!(t=r.execute(r.state,r.delay))););if(t){for(;r=i.shift();)r.unsubscribe();throw t}},VirtualTimeScheduler.frameTimeFactor=10,VirtualTimeScheduler}(Vn),sa=function(t){function VirtualAction(r,i,a){void 0===a&&(a=r.index+=1);var u=t.call(this,r,i)||this;return u.scheduler=r,u.work=i,u.index=a,u.active=!0,u.index=r.index=a,u}return __extends$1(VirtualAction,t),VirtualAction.prototype.schedule=function(r,i){if(void 0===i&&(i=0),Number.isFinite(i)){if(!this.id)return t.prototype.schedule.call(this,r,i);this.active=!1;var a=new VirtualAction(this.scheduler,this.work);return this.add(a),a.schedule(r,i)}return Dn.EMPTY},VirtualAction.prototype.requestAsyncId=function(t,r,i){void 0===i&&(i=0),this.delay=t.frame+i;var a=t.actions;return a.push(this),a.sort(VirtualAction.sortActions),!0},VirtualAction.prototype.recycleAsyncId=function(t,r,i){},VirtualAction.prototype._execute=function(r,i){if(!0===this.active)return t.prototype._execute.call(this,r,i)},VirtualAction.sortActions=function(t,r){return t.delay===r.delay?t.index===r.index?0:t.index>r.index?1:-1:t.delay>r.delay?1:-1},VirtualAction}(Gn);function bindCallbackInternals(t,r,i,a){if(i){if(!isScheduler(i))return function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return bindCallbackInternals(t,r,a).apply(this,u).pipe(mapOneOrManyArgs(i))};a=i}return a?function(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return bindCallbackInternals(t,r).apply(this,i).pipe(subscribeOn$1(a),observeOn$1(a))}:function(){for(var i=this,a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var l=new mi,c=!0;return new Fn((function(u){var d=l.subscribe(u);if(c){c=!1;var g=!1,p=!1;r.apply(i,__spreadArray$2(__spreadArray$2([],__read$1(a)),[function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var a=r.shift();if(null!=a)return void l.error(a)}l.next(1<r.length?r:r[0]),p=!0,g&&l.complete()}])),p&&l.complete(),g=!0}return d}))}}function defer(t){return new Fn((function(r){innerFrom$1(t()).subscribe(r)}))}var ua={connector:function connector(){return new ii},resetOnDisconnect:!0};var la=["addListener","removeListener"],ca=["addEventListener","removeEventListener"],da=["on","off"];function toCommonHandlerRegistry(t,r){return function(i){return function(a){return t[i](r,a)}}}var fa=new Fn(noop$1);var ha=Object.freeze({__proto__:null,Observable:Fn,ConnectableObservable:gi,observable:Pn,animationFrames:function animationFrames(t){return t?animationFramesFactory(t):Ui},Subject:ii,BehaviorSubject:pi,ReplaySubject:yi,AsyncSubject:mi,asap:Xi,asapScheduler:qi,async:$n,asyncScheduler:Wn,queue:ta,queueScheduler:ea,animationFrame:aa,animationFrameScheduler:ia,VirtualTimeScheduler:oa,VirtualAction:sa,Scheduler:Qn,Subscription:Dn,Subscriber:wn,Notification:li,get NotificationKind(){return si},pipe:pipe$1,noop:noop$1,identity:identity$3,isObservable:function isObservable(t){return!!t&&(t instanceof Fn||isFunction$1(t.lift)&&isFunction$1(t.subscribe))},lastValueFrom:function lastValueFrom(t,r){var i="object"==typeof r;return new Promise((function(a,u){var l,c=!1;t.subscribe({next:function next(t){l=t,c=!0},error:u,complete:function complete(){c?a(l):i?a(r.defaultValue):u(new di)}})}))},firstValueFrom:function firstValueFrom(t,r){var i="object"==typeof r;return new Promise((function(a,u){var l=new Rn({next:function next(t){a(t),l.unsubscribe()},error:u,complete:function complete(){i?a(r.defaultValue):u(new di)}});t.subscribe(l)}))},ArgumentOutOfRangeError:ci,EmptyError:di,NotFoundError:_i,ObjectUnsubscribedError:ni,SequenceError:vi,TimeoutError:Mi,UnsubscriptionError:In,bindCallback:function bindCallback(t,r,i){return bindCallbackInternals(!1,t,r,i)},bindNodeCallback:function bindNodeCallback(t,r,i){return bindCallbackInternals(!0,t,r,i)},combineLatest:combineLatest$1,concat:concat$2,connectable:function connectable(t,r){void 0===r&&(r=ua);var i=null,a=r.connector,u=r.resetOnDisconnect,l=void 0===u||u,c=a(),d=new Fn((function(t){return c.subscribe(t)}));return d.connect=function(){return i&&!i.closed||(i=defer((function(){return t})).subscribe(c),l&&i.add((function(){return c=a()}))),i},d},defer:defer,empty:function empty$2(t){return t?function emptyScheduled(t){return new Fn((function(r){return t.schedule((function(){return r.complete()}))}))}(t):ui},forkJoin:function forkJoin(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=popResultSelector(t),a=argsArgArrayOrObject(t),u=a.args,l=a.keys,c=new Fn((function(t){var r=u.length;if(r)for(var i=new Array(r),a=r,c=r,d=function _loop_1(r){var d=!1;innerFrom$1(u[r]).subscribe(createOperatorSubscriber$1(t,(function(t){d||(d=!0,c--),i[r]=t}),(function(){return a--}),void 0,(function(){a&&d||(c||t.next(l?createObject(l,i):i),t.complete())})))},g=0;g<r;g++)d(g);else t.complete()}));return i?c.pipe(mapOneOrManyArgs(i)):c},from:from$1,fromEvent:function fromEvent(t,r,i,a){if(isFunction$1(i)&&(a=i,i=void 0),a)return fromEvent(t,r,i).pipe(mapOneOrManyArgs(a));var u=__read$1(function isEventTarget(t){return isFunction$1(t.addEventListener)&&isFunction$1(t.removeEventListener)}(t)?ca.map((function(a){return function(u){return t[a](r,u,i)}})):function isNodeStyleEventEmitter(t){return isFunction$1(t.addListener)&&isFunction$1(t.removeListener)}(t)?la.map(toCommonHandlerRegistry(t,r)):function isJQueryStyleEventEmitter(t){return isFunction$1(t.on)&&isFunction$1(t.off)}(t)?da.map(toCommonHandlerRegistry(t,r)):[],2),l=u[0],c=u[1];if(!l&&En(t))return mergeMap$1((function(t){return fromEvent(t,r,i)}))(innerFrom$1(t));if(!l)throw new TypeError("Invalid event target");return new Fn((function(t){var r=function handler(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return t.next(1<r.length?r:r[0])};return l(r),function(){return c(r)}}))},fromEventPattern:function fromEventPattern(t,r,i){return i?fromEventPattern(t,r).pipe(mapOneOrManyArgs(i)):new Fn((function(i){var a=function handler(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return i.next(1===t.length?t[0]:t)},u=t(a);return isFunction$1(r)?function(){return r(a,u)}:void 0}))},generate:function generate(t,r,i,a,u){var l,c,d,g;function gen(){var t;return __generator$j(this,(function(a){switch(a.label){case 0:t=g,a.label=1;case 1:return r&&!r(t)?[3,4]:[4,d(t)];case 2:a.sent(),a.label=3;case 3:return t=i(t),[3,1];case 4:return[2]}}))}return 1===arguments.length?(g=(l=t).initialState,r=l.condition,i=l.iterate,c=l.resultSelector,d=void 0===c?identity$3:c,u=l.scheduler):(g=t,!a||isScheduler(a)?(d=identity$3,u=a):d=a),defer(u?function(){return scheduleIterable$1(gen(),u)}:gen)},iif:function iif(t,r,i){return defer((function(){return t()?r:i}))},interval:interval,merge:function merge$3(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=popScheduler(t),a=popNumber(t,1/0),u=t;return u.length?1===u.length?innerFrom$1(u[0]):mergeAll$2(a)(from$1(u,i)):ui},never:function never(){return fa},of:of$2,onErrorResumeNext:function onErrorResumeNext(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return onErrorResumeNext$1(argsOrArgArray(t))(ui)},pairs:function pairs(t,r){return from$1(Object.entries(t),r)},partition:function partition$2(t,r,i){return[filter$3(r,i)(innerFrom$1(t)),filter$3(not$2(r,i))(innerFrom$1(t))]},race:function race$1(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 1===(t=argsOrArgArray(t)).length?innerFrom$1(t[0]):new Fn(raceInit(t))},range:function range$2(t,r,i){if(null==r&&(r=t,t=0),r<=0)return ui;var a=r+t;return new Fn(i?function(r){var u=t;return i.schedule((function(){u<a?(r.next(u++),this.schedule()):r.complete()}))}:function(r){for(var i=t;i<a&&!r.closed;)r.next(i++);r.complete()})},throwError:throwError,timer:timer,using:function using(t,r){return new Fn((function(i){var a=t(),u=r(a);return(u?innerFrom$1(u):ui).subscribe(i),function(){a&&a.unsubscribe()}}))},zip:zip$3,scheduled:scheduled$1,EMPTY:ui,NEVER:fa,config:Cn,audit:audit,auditTime:auditTime,buffer:buffer,bufferCount:bufferCount,bufferTime:bufferTime,bufferToggle:bufferToggle,bufferWhen:bufferWhen,catchError:catchError,combineAll:ti,combineLatestAll:combineLatestAll,combineLatestWith:combineLatestWith,concatAll:concatAll,concatMap:concatMap,concatMapTo:concatMapTo,concatWith:concatWith,connect:connect,count:count,debounce:debounce$1,debounceTime:debounceTime,defaultIfEmpty:defaultIfEmpty,delay:delay$1,delayWhen:delayWhen,dematerialize:dematerialize,distinct:distinct,distinctUntilChanged:distinctUntilChanged,distinctUntilKeyChanged:distinctUntilKeyChanged,elementAt:elementAt,endWith:endWith,every:every,exhaust:fi,exhaustAll:exhaustAll,exhaustMap:exhaustMap,expand:expand,filter:filter$3,finalize:finalize,find:find$2,findIndex:findIndex$2,first:first,groupBy:groupBy$2,ignoreElements:ignoreElements,isEmpty:isEmpty$2,last:last$2,map:map$3,mapTo:mapTo,materialize:materialize,max:max$2,mergeAll:mergeAll$2,flatMap:hi,mergeMap:mergeMap$1,mergeMapTo:mergeMapTo,mergeScan:mergeScan,mergeWith:mergeWith$2,min:min$2,multicast:multicast,observeOn:observeOn$1,pairwise:pairwise,pluck:pluck$2,publish:publish$1,publishBehavior:publishBehavior,publishLast:publishLast,publishReplay:publishReplay,raceWith:raceWith,reduce:reduce$2,repeat:repeat$2,repeatWhen:repeatWhen,retry:retry,retryWhen:retryWhen,refCount:refCount,sample:sample,sampleTime:sampleTime,scan:scan$2,sequenceEqual:sequenceEqual,share:share,shareReplay:shareReplay,single:single,skip:skip,skipLast:skipLast,skipUntil:skipUntil,skipWhile:skipWhile,startWith:startWith,subscribeOn:subscribeOn$1,switchAll:switchAll,switchMap:switchMap$1,switchMapTo:switchMapTo,switchScan:switchScan,take:take$3,takeLast:takeLast$2,takeUntil:takeUntil,takeWhile:takeWhile$2,tap:tap$2,throttle:throttle,throttleTime:throttleTime,throwIfEmpty:throwIfEmpty,timeInterval:timeInterval,timeout:timeout$2,timeoutWith:timeoutWith,timestamp:timestamp,toArray:toArray,window:window$1,windowCount:windowCount,windowTime:windowTime,windowToggle:windowToggle,windowWhen:windowWhen,withLatestFrom:withLatestFrom,zipAll:zipAll,zipWith:zipWith$2}),ga=getAugmentedNamespace(ha);!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getRegion=t.setRegion=t.regionResponse$=void 0;var r,i=ga;t.regionResponse$=new i.ReplaySubject(1);t.setRegion=function setRegion(r){t.regionResponse$.next(r)};t.getRegion=function getRegion(){return r},t.regionResponse$.subscribe((function(t){r=t.region}))}(ji);var pa,ma={},ya={},va="undefined"!=typeof Symbol&&Symbol,_a=function hasSymbols(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},r=Symbol("test"),i=Object(r);if("string"==typeof r)return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(r in t[r]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var a=Object.getOwnPropertySymbols(t);if(1!==a.length||a[0]!==r)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var u=Object.getOwnPropertyDescriptor(t,r);if(42!==u.value||!0!==u.enumerable)return!1}return!0},Ta="Function.prototype.bind called on incompatible ",ba=Array.prototype.slice,Ma=Object.prototype.toString,Sa="[object Function]",Ea=function bind(t){var r=this;if("function"!=typeof r||Ma.call(r)!==Sa)throw new TypeError(Ta+r);for(var i,a=ba.call(arguments,1),u=function binder(){if(this instanceof i){var u=r.apply(this,a.concat(ba.call(arguments)));return Object(u)===u?u:this}return r.apply(t,a.concat(ba.call(arguments)))},l=Math.max(0,r.length-a.length),c=[],d=0;d<l;d++)c.push("$"+d);if(i=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),r.prototype){var g=function Empty(){};g.prototype=r.prototype,i.prototype=new g,g.prototype=null}return i},Ia=Function.prototype.bind||Ea,Da=Ia.call(Function.call,Object.prototype.hasOwnProperty),Aa=SyntaxError,Ca=Function,Na=TypeError,xa=function getEvalledConstructor(t){try{return Ca('"use strict"; return ('+t+").constructor;")()}catch(t){}},ka=Object.getOwnPropertyDescriptor;if(ka)try{ka({},"")}catch(t){ka=null}var wa=function throwTypeError(){throw new Na},Oa=ka?function(){try{return wa}catch(t){try{return ka(arguments,"callee").get}catch(t){return wa}}}():wa,La=function hasNativeSymbols(){return"function"==typeof va&&("function"==typeof Symbol&&("symbol"==typeof va("foo")&&("symbol"==typeof Symbol("bar")&&_a())))}(),Ra=Object.getPrototypeOf||function(t){return t.__proto__},ja={},Pa="undefined"==typeof Uint8Array?pa:Ra(Uint8Array),Fa={"%AggregateError%":"undefined"==typeof AggregateError?pa:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?pa:ArrayBuffer,"%ArrayIteratorPrototype%":La?Ra([][Symbol.iterator]()):pa,"%AsyncFromSyncIteratorPrototype%":pa,"%AsyncFunction%":ja,"%AsyncGenerator%":ja,"%AsyncGeneratorFunction%":ja,"%AsyncIteratorPrototype%":ja,"%Atomics%":"undefined"==typeof Atomics?pa:Atomics,"%BigInt%":"undefined"==typeof BigInt?pa:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?pa:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?pa:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?pa:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?pa:FinalizationRegistry,"%Function%":Ca,"%GeneratorFunction%":ja,"%Int8Array%":"undefined"==typeof Int8Array?pa:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?pa:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?pa:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":La?Ra(Ra([][Symbol.iterator]())):pa,"%JSON%":"object"==typeof JSON?JSON:pa,"%Map%":"undefined"==typeof Map?pa:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&La?Ra((new Map)[Symbol.iterator]()):pa,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?pa:Promise,"%Proxy%":"undefined"==typeof Proxy?pa:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?pa:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?pa:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&La?Ra((new Set)[Symbol.iterator]()):pa,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?pa:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":La?Ra(""[Symbol.iterator]()):pa,"%Symbol%":La?Symbol:pa,"%SyntaxError%":Aa,"%ThrowTypeError%":Oa,"%TypedArray%":Pa,"%TypeError%":Na,"%Uint8Array%":"undefined"==typeof Uint8Array?pa:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?pa:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?pa:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?pa:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?pa:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?pa:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?pa:WeakSet},Ba=function doEval(t){var r;if("%AsyncFunction%"===t)r=xa("async function () {}");else if("%GeneratorFunction%"===t)r=xa("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=xa("async function* () {}");else if("%AsyncGenerator%"===t){var i=doEval("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=doEval("%AsyncGenerator%");a&&(r=Ra(a.prototype))}return Fa[t]=r,r},Ua={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},za=Ia,Ya=Da,Ga=za.call(Function.call,Array.prototype.concat),Ha=za.call(Function.apply,Array.prototype.splice),Qa=za.call(Function.call,String.prototype.replace),Va=za.call(Function.call,String.prototype.slice),Wa=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$a=/\\(\\)?/g,Ka=function stringToPath(t){var r=Va(t,0,1),i=Va(t,-1);if("%"===r&&"%"!==i)throw new Aa("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==r)throw new Aa("invalid intrinsic syntax, expected opening `%`");var a=[];return Qa(t,Wa,(function(t,r,i,u){a[a.length]=i?Qa(u,$a,"$1"):r||t})),a},qa=function getBaseIntrinsic(t,r){var i,a=t;if(Ya(Ua,a)&&(a="%"+(i=Ua[a])[0]+"%"),Ya(Fa,a)){var u=Fa[a];if(u===ja&&(u=Ba(a)),void 0===u&&!r)throw new Na("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:a,value:u}}throw new Aa("intrinsic "+t+" does not exist!")},Xa=function GetIntrinsic(t,r){if("string"!=typeof t||0===t.length)throw new Na("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof r)throw new Na('"allowMissing" argument must be a boolean');var i=Ka(t),a=i.length>0?i[0]:"",u=qa("%"+a+"%",r),l=u.name,c=u.value,d=!1,g=u.alias;g&&(a=g[0],Ha(i,Ga([0,1],g)));for(var p=1,m=!0;p<i.length;p+=1){var v=i[p],b=Va(v,0,1),M=Va(v,-1);if(('"'===b||"'"===b||"`"===b||'"'===M||"'"===M||"`"===M)&&b!==M)throw new Aa("property names with quotes must have matching quotes");if("constructor"!==v&&m||(d=!0),Ya(Fa,l="%"+(a+="."+v)+"%"))c=Fa[l];else if(null!=c){if(!(v in c)){if(!r)throw new Na("base intrinsic for "+t+" exists, but the property is not available.");return}if(ka&&p+1>=i.length){var S=ka(c,v);c=(m=!!S)&&"get"in S&&!("originalValue"in S.get)?S.get:c[v]}else m=Ya(c,v),c=c[v];m&&!d&&(Fa[l]=c)}}return c},Za={exports:{}};!function(t){var r=Ia,i=Xa,a=i("%Function.prototype.apply%"),u=i("%Function.prototype.call%"),l=i("%Reflect.apply%",!0)||r.call(u,a),c=i("%Object.getOwnPropertyDescriptor%",!0),d=i("%Object.defineProperty%",!0),g=i("%Math.max%");if(d)try{d({},"a",{value:1})}catch(t){d=null}t.exports=function callBind(t){var i=l(r,u,arguments);if(c&&d){var a=c(i,"length");a.configurable&&d(i,"length",{value:1+g(0,t.length-(arguments.length-1))})}return i};var p=function applyBind(){return l(r,a,arguments)};d?d(t.exports,"apply",{value:p}):t.exports.apply=p}(Za);var Ja=Xa,eo=Za.exports,to=eo(Ja("String.prototype.indexOf")),ro=getAugmentedNamespace(Object.freeze({__proto__:null,default:{}})),no="function"==typeof Map&&Map.prototype,io=Object.getOwnPropertyDescriptor&&no?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ao=no&&io&&"function"==typeof io.get?io.get:null,oo=no&&Map.prototype.forEach,so="function"==typeof Set&&Set.prototype,uo=Object.getOwnPropertyDescriptor&&so?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,lo=so&&uo&&"function"==typeof uo.get?uo.get:null,co=so&&Set.prototype.forEach,fo="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,ho="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,go="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,po=Boolean.prototype.valueOf,mo=Object.prototype.toString,yo=Function.prototype.toString,vo=String.prototype.match,_o="function"==typeof BigInt?BigInt.prototype.valueOf:null,To=Object.getOwnPropertySymbols,bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Mo="function"==typeof Symbol&&"object"==typeof Symbol.iterator,So=Object.prototype.propertyIsEnumerable,Eo=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null),Io=ro.custom,Do=Io&&isSymbol(Io)?Io:null,Ao="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function wrapQuotes(t,r,i){var a="double"===(i.quoteStyle||r)?'"':"'";return a+t+a}function quote(t){return String(t).replace(/"/g,"&quot;")}function isArray$3(t){return!("[object Array]"!==toStr(t)||Ao&&"object"==typeof t&&Ao in t)}function isSymbol(t){if(Mo)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!bo)return!1;try{return bo.call(t),!0}catch(t){}return!1}var Co=Object.prototype.hasOwnProperty||function(t){return t in this};function has$5(t,r){return Co.call(t,r)}function toStr(t){return mo.call(t)}function indexOf$2(t,r){if(t.indexOf)return t.indexOf(r);for(var i=0,a=t.length;i<a;i++)if(t[i]===r)return i;return-1}function inspectString(t,r){if(t.length>r.maxStringLength){var i=t.length-r.maxStringLength,a="... "+i+" more character"+(i>1?"s":"");return inspectString(t.slice(0,r.maxStringLength),r)+a}return wrapQuotes(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,lowbyte),"single",r)}function lowbyte(t){var r=t.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[r];return i?"\\"+i:"\\x"+(r<16?"0":"")+r.toString(16).toUpperCase()}function markBoxed(t){return"Object("+t+")"}function weakCollectionOf(t){return t+" { ? }"}function collectionOf(t,r,i,a){return t+" ("+r+") {"+(a?indentedJoin(i,a):i.join(", "))+"}"}function indentedJoin(t,r){if(0===t.length)return"";var i="\n"+r.prev+r.base;return i+t.join(","+i)+"\n"+r.prev}function arrObjKeys(t,r){var i=isArray$3(t),a=[];if(i){a.length=t.length;for(var u=0;u<t.length;u++)a[u]=has$5(t,u)?r(t[u],t):""}var l,c="function"==typeof To?To(t):[];if(Mo){l={};for(var d=0;d<c.length;d++)l["$"+c[d]]=c[d]}for(var g in t)has$5(t,g)&&(i&&String(Number(g))===g&&g<t.length||Mo&&l["$"+g]instanceof Symbol||(/[^\w$]/.test(g)?a.push(r(g,t)+": "+r(t[g],t)):a.push(g+": "+r(t[g],t))));if("function"==typeof To)for(var p=0;p<c.length;p++)So.call(t,c[p])&&a.push("["+r(c[p])+"]: "+r(t[c[p]],t));return a}var No=Xa,xo=function callBoundIntrinsic(t,r){var i=Ja(t,!!r);return"function"==typeof i&&to(t,".prototype.")>-1?eo(i):i},ko=function inspect_(t,r,i,a){var u=r||{};if(has$5(u,"quoteStyle")&&"single"!==u.quoteStyle&&"double"!==u.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$5(u,"maxStringLength")&&("number"==typeof u.maxStringLength?u.maxStringLength<0&&u.maxStringLength!==1/0:null!==u.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=!has$5(u,"customInspect")||u.customInspect;if("boolean"!=typeof l&&"symbol"!==l)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$5(u,"indent")&&null!==u.indent&&"\t"!==u.indent&&!(parseInt(u.indent,10)===u.indent&&u.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return inspectString(t,u);if("number"==typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"==typeof t)return String(t)+"n";var c=void 0===u.depth?5:u.depth;if(void 0===i&&(i=0),i>=c&&c>0&&"object"==typeof t)return isArray$3(t)?"[Array]":"[Object]";var d=function getIndent(t,r){var i;if("\t"===t.indent)i="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;i=Array(t.indent+1).join(" ")}return{base:i,prev:Array(r+1).join(i)}}(u,i);if(void 0===a)a=[];else if(indexOf$2(a,t)>=0)return"[Circular]";function inspect(t,r,l){if(r&&(a=a.slice()).push(r),l){var c={depth:u.depth};return has$5(u,"quoteStyle")&&(c.quoteStyle=u.quoteStyle),inspect_(t,c,i+1,a)}return inspect_(t,u,i+1,a)}if("function"==typeof t){var g=function nameOf(t){if(t.name)return t.name;var r=vo.call(yo.call(t),/^function\s*([\w$]+)/);if(r)return r[1];return null}(t),p=arrObjKeys(t,inspect);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(p.length>0?" { "+p.join(", ")+" }":"")}if(isSymbol(t)){var m=Mo?String(t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):bo.call(t);return"object"!=typeof t||Mo?m:markBoxed(m)}if(function isElement(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(t)){for(var v="<"+String(t.nodeName).toLowerCase(),b=t.attributes||[],M=0;M<b.length;M++)v+=" "+b[M].name+"="+wrapQuotes(quote(b[M].value),"double",u);return v+=">",t.childNodes&&t.childNodes.length&&(v+="..."),v+="</"+String(t.nodeName).toLowerCase()+">"}if(isArray$3(t)){if(0===t.length)return"[]";var S=arrObjKeys(t,inspect);return d&&!function singleLineValues(t){for(var r=0;r<t.length;r++)if(indexOf$2(t[r],"\n")>=0)return!1;return!0}(S)?"["+indentedJoin(S,d)+"]":"[ "+S.join(", ")+" ]"}if(function isError(t){return!("[object Error]"!==toStr(t)||Ao&&"object"==typeof t&&Ao in t)}(t)){var E=arrObjKeys(t,inspect);return 0===E.length?"["+String(t)+"]":"{ ["+String(t)+"] "+E.join(", ")+" }"}if("object"==typeof t&&l){if(Do&&"function"==typeof t[Do])return t[Do]();if("symbol"!==l&&"function"==typeof t.inspect)return t.inspect()}if(function isMap(t){if(!ao||!t||"object"!=typeof t)return!1;try{ao.call(t);try{lo.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(t)){var I=[];return oo.call(t,(function(r,i){I.push(inspect(i,t,!0)+" => "+inspect(r,t))})),collectionOf("Map",ao.call(t),I,d)}if(function isSet(t){if(!lo||!t||"object"!=typeof t)return!1;try{lo.call(t);try{ao.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(t)){var D=[];return co.call(t,(function(r){D.push(inspect(r,t))})),collectionOf("Set",lo.call(t),D,d)}if(function isWeakMap(t){if(!fo||!t||"object"!=typeof t)return!1;try{fo.call(t,fo);try{ho.call(t,ho)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(t))return weakCollectionOf("WeakMap");if(function isWeakSet(t){if(!ho||!t||"object"!=typeof t)return!1;try{ho.call(t,ho);try{fo.call(t,fo)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(t))return weakCollectionOf("WeakSet");if(function isWeakRef(t){if(!go||!t||"object"!=typeof t)return!1;try{return go.call(t),!0}catch(t){}return!1}(t))return weakCollectionOf("WeakRef");if(function isNumber(t){return!("[object Number]"!==toStr(t)||Ao&&"object"==typeof t&&Ao in t)}(t))return markBoxed(inspect(Number(t)));if(function isBigInt(t){if(!t||"object"!=typeof t||!_o)return!1;try{return _o.call(t),!0}catch(t){}return!1}(t))return markBoxed(inspect(_o.call(t)));if(function isBoolean(t){return!("[object Boolean]"!==toStr(t)||Ao&&"object"==typeof t&&Ao in t)}(t))return markBoxed(po.call(t));if(function isString(t){return!("[object String]"!==toStr(t)||Ao&&"object"==typeof t&&Ao in t)}(t))return markBoxed(inspect(String(t)));if(!function isDate(t){return!("[object Date]"!==toStr(t)||Ao&&"object"==typeof t&&Ao in t)}(t)&&!function isRegExp$1(t){return!("[object RegExp]"!==toStr(t)||Ao&&"object"==typeof t&&Ao in t)}(t)){var A=arrObjKeys(t,inspect),C=Eo?Eo(t)===Object.prototype:t instanceof Object||t.constructor===Object,N=t instanceof Object?"":"null prototype",k=!C&&Ao&&Object(t)===t&&Ao in t?toStr(t).slice(8,-1):N?"Object":"",O=(C||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(k||N?"["+[].concat(k||[],N||[]).join(": ")+"] ":"");return 0===A.length?O+"{}":d?O+"{"+indentedJoin(A,d)+"}":O+"{ "+A.join(", ")+" }"}return String(t)},wo=No("%TypeError%"),Oo=No("%WeakMap%",!0),Lo=No("%Map%",!0),Ro=xo("WeakMap.prototype.get",!0),jo=xo("WeakMap.prototype.set",!0),Po=xo("WeakMap.prototype.has",!0),Fo=xo("Map.prototype.get",!0),Bo=xo("Map.prototype.set",!0),Uo=xo("Map.prototype.has",!0),zo=function listGetNode(t,r){for(var i,a=t;null!==(i=a.next);a=i)if(i.key===r)return a.next=i.next,i.next=t.next,t.next=i,i},Yo=String.prototype.replace,Go=/%20/g,Ho="RFC3986",Qo={default:Ho,formatters:{RFC1738:function RFC1738(t){return Yo.call(t,Go,"+")},RFC3986:function RFC3986(t){return String(t)}},RFC1738:"RFC1738",RFC3986:Ho},Vo=Qo,Wo=Object.prototype.hasOwnProperty,$o=Array.isArray,Ko=function(){for(var t=[],r=0;r<256;++r)t.push("%"+((r<16?"0":"")+r.toString(16)).toUpperCase());return t}(),qo=function arrayToObject(t,r){for(var i=r&&r.plainObjects?Object.create(null):{},a=0;a<t.length;++a)void 0!==t[a]&&(i[a]=t[a]);return i},Xo={arrayToObject:qo,assign:function assignSingleSource(t,r){return Object.keys(r).reduce((function(t,i){return t[i]=r[i],t}),t)},combine:function combine(t,r){return[].concat(t,r)},compact:function compact(t){for(var r=[{obj:{o:t},prop:"o"}],i=[],a=0;a<r.length;++a)for(var u=r[a],l=u.obj[u.prop],c=Object.keys(l),d=0;d<c.length;++d){var g=c[d],p=l[g];"object"==typeof p&&null!==p&&-1===i.indexOf(p)&&(r.push({obj:l,prop:g}),i.push(p))}return function compactQueue(t){for(;t.length>1;){var r=t.pop(),i=r.obj[r.prop];if($o(i)){for(var a=[],u=0;u<i.length;++u)void 0!==i[u]&&a.push(i[u]);r.obj[r.prop]=a}}}(r),t},decode:function decode(t,r,i){var a=t.replace(/\+/g," ");if("iso-8859-1"===i)return a.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(a)}catch(t){return a}},encode:function encode(t,r,i,a,u){if(0===t.length)return t;var l=t;if("symbol"==typeof t?l=Symbol.prototype.toString.call(t):"string"!=typeof t&&(l=String(t)),"iso-8859-1"===i)return escape(l).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var c="",d=0;d<l.length;++d){var g=l.charCodeAt(d);45===g||46===g||95===g||126===g||g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122||u===Vo.RFC1738&&(40===g||41===g)?c+=l.charAt(d):g<128?c+=Ko[g]:g<2048?c+=Ko[192|g>>6]+Ko[128|63&g]:g<55296||g>=57344?c+=Ko[224|g>>12]+Ko[128|g>>6&63]+Ko[128|63&g]:(d+=1,g=65536+((1023&g)<<10|1023&l.charCodeAt(d)),c+=Ko[240|g>>18]+Ko[128|g>>12&63]+Ko[128|g>>6&63]+Ko[128|63&g])}return c},isBuffer:function isBuffer(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function isRegExp(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function maybeMap(t,r){if($o(t)){for(var i=[],a=0;a<t.length;a+=1)i.push(r(t[a]));return i}return r(t)},merge:function merge(t,r,i){if(!r)return t;if("object"!=typeof r){if($o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(i&&(i.plainObjects||i.allowPrototypes)||!Wo.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return $o(t)&&!$o(r)&&(a=qo(t,i)),$o(t)&&$o(r)?(r.forEach((function(r,a){if(Wo.call(t,a)){var u=t[a];u&&"object"==typeof u&&r&&"object"==typeof r?t[a]=merge(u,r,i):t.push(r)}else t[a]=r})),t):Object.keys(r).reduce((function(t,a){var u=r[a];return Wo.call(t,a)?t[a]=merge(t[a],u,i):t[a]=u,t}),a)}},Zo=function getSideChannel(){var t,r,i,a={assert:function assert(t){if(!a.has(t))throw new wo("Side channel does not contain "+ko(t))},get:function get(a){if(Oo&&a&&("object"==typeof a||"function"==typeof a)){if(t)return Ro(t,a)}else if(Lo){if(r)return Fo(r,a)}else if(i)return function listGet(t,r){var i=zo(t,r);return i&&i.value}(i,a)},has:function has(a){if(Oo&&a&&("object"==typeof a||"function"==typeof a)){if(t)return Po(t,a)}else if(Lo){if(r)return Uo(r,a)}else if(i)return function listHas(t,r){return!!zo(t,r)}(i,a);return!1},set:function set(a,u){Oo&&a&&("object"==typeof a||"function"==typeof a)?(t||(t=new Oo),jo(t,a,u)):Lo?(r||(r=new Lo),Bo(r,a,u)):(i||(i={key:{},next:null}),function listSet(t,r,i){var a=zo(t,r);a?a.value=i:t.next={key:r,next:t.next,value:i}}(i,a,u))}};return a},Jo=Xo,es=Qo,ts=Object.prototype.hasOwnProperty,rs={brackets:function brackets(t){return t+"[]"},comma:"comma",indices:function indices(t,r){return t+"["+r+"]"},repeat:function repeat(t){return t}},ns=Array.isArray,as=Array.prototype.push,os=function pushToArray(t,r){as.apply(t,ns(r)?r:[r])},ss=Date.prototype.toISOString,us=es.default,ls={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Jo.encode,encodeValuesOnly:!1,format:us,formatter:es.formatters[us],indices:!1,serializeDate:function serializeDate(t){return ss.call(t)},skipNulls:!1,strictNullHandling:!1},cs=function stringify(t,r,i,a,u,l,c,d,g,p,m,v,b,M,S){var E=t;if(S.has(t))throw new RangeError("Cyclic object value");if("function"==typeof c?E=c(r,E):E instanceof Date?E=p(E):"comma"===i&&ns(E)&&(E=Jo.maybeMap(E,(function(t){return t instanceof Date?p(t):t}))),null===E){if(a)return l&&!b?l(r,ls.encoder,M,"key",m):r;E=""}if(function isNonNullishPrimitive(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||"bigint"==typeof t}(E)||Jo.isBuffer(E))return l?[v(b?r:l(r,ls.encoder,M,"key",m))+"="+v(l(E,ls.encoder,M,"value",m))]:[v(r)+"="+v(String(E))];var I,D=[];if(void 0===E)return D;if("comma"===i&&ns(E))I=[{value:E.length>0?E.join(",")||null:void 0}];else if(ns(c))I=c;else{var A=Object.keys(E);I=d?A.sort(d):A}for(var C=0;C<I.length;++C){var N=I[C],k="object"==typeof N&&void 0!==N.value?N.value:E[N];if(!u||null!==k){var O=ns(E)?"function"==typeof i?i(r,N):r:r+(g?"."+N:"["+N+"]");S.set(t,!0);var L=Zo();os(D,stringify(k,O,i,a,u,l,c,d,g,p,m,v,b,M,L))}}return D},ds=Xo,fs=Object.prototype.hasOwnProperty,hs=Array.isArray,gs={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ds.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},ps=function interpretNumericEntities(t){return t.replace(/&#(\d+);/g,(function(t,r){return String.fromCharCode(parseInt(r,10))}))},ms=function parseArrayValue(t,r){return t&&"string"==typeof t&&r.comma&&t.indexOf(",")>-1?t.split(","):t},ys=function parseQueryStringKeys(t,r,i,a){if(t){var u=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,l=/(\[[^[\]]*])/g,c=i.depth>0&&/(\[[^[\]]*])/.exec(u),d=c?u.slice(0,c.index):u,g=[];if(d){if(!i.plainObjects&&fs.call(Object.prototype,d)&&!i.allowPrototypes)return;g.push(d)}for(var p=0;i.depth>0&&null!==(c=l.exec(u))&&p<i.depth;){if(p+=1,!i.plainObjects&&fs.call(Object.prototype,c[1].slice(1,-1))&&!i.allowPrototypes)return;g.push(c[1])}return c&&g.push("["+u.slice(c.index)+"]"),function parseObject(t,r,i,a){for(var u=a?r:ms(r,i),l=t.length-1;l>=0;--l){var c,d=t[l];if("[]"===d&&i.parseArrays)c=[].concat(u);else{c=i.plainObjects?Object.create(null):{};var g="["===d.charAt(0)&&"]"===d.charAt(d.length-1)?d.slice(1,-1):d,p=parseInt(g,10);i.parseArrays||""!==g?!isNaN(p)&&d!==g&&String(p)===g&&p>=0&&i.parseArrays&&p<=i.arrayLimit?(c=[])[p]=u:c[g]=u:c={0:u}}u=c}return u}(g,r,i,a)}},vs=function stringify_1(t,r){var i,a=t,u=function normalizeStringifyOptions(t){if(!t)return ls;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var r=t.charset||ls.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=es.default;if(void 0!==t.format){if(!ts.call(es.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var a=es.formatters[i],u=ls.filter;return("function"==typeof t.filter||ns(t.filter))&&(u=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:ls.addQueryPrefix,allowDots:void 0===t.allowDots?ls.allowDots:!!t.allowDots,charset:r,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:ls.charsetSentinel,delimiter:void 0===t.delimiter?ls.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:ls.encode,encoder:"function"==typeof t.encoder?t.encoder:ls.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:ls.encodeValuesOnly,filter:u,format:i,formatter:a,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:ls.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:ls.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:ls.strictNullHandling}}(r);"function"==typeof u.filter?a=(0,u.filter)("",a):ns(u.filter)&&(i=u.filter);var l,c=[];if("object"!=typeof a||null===a)return"";l=r&&r.arrayFormat in rs?r.arrayFormat:r&&"indices"in r?r.indices?"indices":"repeat":"indices";var d=rs[l];i||(i=Object.keys(a)),u.sort&&i.sort(u.sort);for(var g=Zo(),p=0;p<i.length;++p){var m=i[p];u.skipNulls&&null===a[m]||os(c,cs(a[m],m,d,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,g))}var v=c.join(u.delimiter),b=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),v.length>0?b+v:""},_s=function parse(t,r){var i=function normalizeParseOptions(t){if(!t)return gs;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=void 0===t.charset?gs.charset:t.charset;return{allowDots:void 0===t.allowDots?gs.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:gs.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:gs.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:gs.arrayLimit,charset:r,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:gs.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:gs.comma,decoder:"function"==typeof t.decoder?t.decoder:gs.decoder,delimiter:"string"==typeof t.delimiter||ds.isRegExp(t.delimiter)?t.delimiter:gs.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:gs.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:gs.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:gs.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:gs.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:gs.strictNullHandling}}(r);if(""===t||null==t)return i.plainObjects?Object.create(null):{};for(var a="string"==typeof t?function parseQueryStringValues(t,r){var i,a={},u=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,l=r.parameterLimit===1/0?void 0:r.parameterLimit,c=u.split(r.delimiter,l),d=-1,g=r.charset;if(r.charsetSentinel)for(i=0;i<c.length;++i)0===c[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===c[i]?g="utf-8":"utf8=%26%2310003%3B"===c[i]&&(g="iso-8859-1"),d=i,i=c.length);for(i=0;i<c.length;++i)if(i!==d){var p,m,v=c[i],b=v.indexOf("]="),M=-1===b?v.indexOf("="):b+1;-1===M?(p=r.decoder(v,gs.decoder,g,"key"),m=r.strictNullHandling?null:""):(p=r.decoder(v.slice(0,M),gs.decoder,g,"key"),m=ds.maybeMap(ms(v.slice(M+1),r),(function(t){return r.decoder(t,gs.decoder,g,"value")}))),m&&r.interpretNumericEntities&&"iso-8859-1"===g&&(m=ps(m)),v.indexOf("[]=")>-1&&(m=hs(m)?[m]:m),fs.call(a,p)?a[p]=ds.combine(a[p],m):a[p]=m}return a}(t,i):t,u=i.plainObjects?Object.create(null):{},l=Object.keys(a),c=0;c<l.length;++c){var d=l[c],g=ys(d,a[d],i,"string"==typeof t);u=ds.merge(u,g,i)}return!0===i.allowSparse?u:ds.compact(u)},Ts={formats:Qo,parse:_s,stringify:vs},bs={},Ms={};Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.getAuthToken=Ms.setAuthToken=void 0;var Ss={token:"",refreshToken:""};Ms.setAuthToken=function setAuthToken(t){Ss=t};Ms.getAuthToken=function getAuthToken(){return Ss};var Es={},Is=function F(){return!1},Ds=function T(){return!0};function _isPlaceholder$1(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function _curry1$1(t){return function f1(r){return 0===arguments.length||_isPlaceholder$1(r)?f1:t.apply(this,arguments)}}function _curry2$1(t){return function f2(r,i){switch(arguments.length){case 0:return f2;case 1:return _isPlaceholder$1(r)?f2:_curry1$1((function(i){return t(r,i)}));default:return _isPlaceholder$1(r)&&_isPlaceholder$1(i)?f2:_isPlaceholder$1(r)?_curry1$1((function(r){return t(r,i)})):_isPlaceholder$1(i)?_curry1$1((function(i){return t(r,i)})):t(r,i)}}}var As=_curry2$1((function add(t,r){return Number(t)+Number(r)}));function _concat(t,r){var i;r=r||[];var a=(t=t||[]).length,u=r.length,l=[];for(i=0;i<a;)l[l.length]=t[i],i+=1;for(i=0;i<u;)l[l.length]=r[i],i+=1;return l}function _arity(t,r){switch(t){case 0:return function(){return r.apply(this,arguments)};case 1:return function(t){return r.apply(this,arguments)};case 2:return function(t,i){return r.apply(this,arguments)};case 3:return function(t,i,a){return r.apply(this,arguments)};case 4:return function(t,i,a,u){return r.apply(this,arguments)};case 5:return function(t,i,a,u,l){return r.apply(this,arguments)};case 6:return function(t,i,a,u,l,c){return r.apply(this,arguments)};case 7:return function(t,i,a,u,l,c,d){return r.apply(this,arguments)};case 8:return function(t,i,a,u,l,c,d,g){return r.apply(this,arguments)};case 9:return function(t,i,a,u,l,c,d,g,p){return r.apply(this,arguments)};case 10:return function(t,i,a,u,l,c,d,g,p,m){return r.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function _curryN(t,r,i){return function(){for(var a=[],u=0,l=t,c=0;c<r.length||u<arguments.length;){var d;c<r.length&&(!_isPlaceholder$1(r[c])||u>=arguments.length)?d=r[c]:(d=arguments[u],u+=1),a[c]=d,_isPlaceholder$1(d)||(l-=1),c+=1}return l<=0?i.apply(this,a):_arity(l,_curryN(t,a,i))}}var Cs=_curry2$1((function curryN(t,r){return 1===t?_curry1$1(r):_arity(t,_curryN(t,[],r))})),Ns=Cs,xs=_curry1$1((function addIndex(t){return Ns(t.length,(function(){var r=0,i=arguments[0],a=arguments[arguments.length-1],u=Array.prototype.slice.call(arguments,0);return u[0]=function(){var t=i.apply(this,_concat(arguments,[r,a]));return r+=1,t},t.apply(this,u)}))})),ks=xs;function _curry3$1(t){return function f3(r,i,a){switch(arguments.length){case 0:return f3;case 1:return _isPlaceholder$1(r)?f3:_curry2$1((function(i,a){return t(r,i,a)}));case 2:return _isPlaceholder$1(r)&&_isPlaceholder$1(i)?f3:_isPlaceholder$1(r)?_curry2$1((function(r,a){return t(r,i,a)})):_isPlaceholder$1(i)?_curry2$1((function(i,a){return t(r,i,a)})):_curry1$1((function(a){return t(r,i,a)}));default:return _isPlaceholder$1(r)&&_isPlaceholder$1(i)&&_isPlaceholder$1(a)?f3:_isPlaceholder$1(r)&&_isPlaceholder$1(i)?_curry2$1((function(r,i){return t(r,i,a)})):_isPlaceholder$1(r)&&_isPlaceholder$1(a)?_curry2$1((function(r,a){return t(r,i,a)})):_isPlaceholder$1(i)&&_isPlaceholder$1(a)?_curry2$1((function(i,a){return t(r,i,a)})):_isPlaceholder$1(r)?_curry1$1((function(r){return t(r,i,a)})):_isPlaceholder$1(i)?_curry1$1((function(i){return t(r,i,a)})):_isPlaceholder$1(a)?_curry1$1((function(a){return t(r,i,a)})):t(r,i,a)}}}var ws=_curry3$1((function adjust(t,r,i){if(t>=i.length||t<-i.length)return i;var a=(t<0?i.length:0)+t,u=_concat(i);return u[a]=r(i[a]),u})),Os=Array.isArray||function _isArray(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function _isTransformer(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function _dispatchable(t,r,i){return function(){if(0===arguments.length)return i();var a=Array.prototype.slice.call(arguments,0),u=a.pop();if(!Os(u)){for(var l=0;l<t.length;){if("function"==typeof u[t[l]])return u[t[l]].apply(u,a);l+=1}if(_isTransformer(u)){var c=r.apply(null,a);return c(u)}}return i.apply(this,arguments)}}function _reduced(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var Ls={init:function init(){return this.xf["@@transducer/init"]()},result:function result(t){return this.xf["@@transducer/result"](t)}},Rs=function(){function XAll(t,r){this.xf=r,this.f=t,this.all=!0}return XAll.prototype["@@transducer/init"]=Ls.init,XAll.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},XAll.prototype["@@transducer/step"]=function(t,r){return this.f(r)||(this.all=!1,t=_reduced(this.xf["@@transducer/step"](t,!1))),t},XAll}(),js=_curry2$1(_dispatchable(["all"],_curry2$1((function _xall(t,r){return new Rs(t,r)})),(function all(t,r){for(var i=0;i<r.length;){if(!t(r[i]))return!1;i+=1}return!0}))),Ps=_curry2$1((function max(t,r){return r>t?r:t}));function _map(t,r){for(var i=0,a=r.length,u=Array(a);i<a;)u[i]=t(r[i]),i+=1;return u}function _isString$1(t){return"[object String]"===Object.prototype.toString.call(t)}var Fs=_curry1$1((function isArrayLike(t){return!!Os(t)||!!t&&("object"==typeof t&&(!_isString$1(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),Bs=function(){function XWrap(t){this.f=t}return XWrap.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},XWrap.prototype["@@transducer/result"]=function(t){return t},XWrap.prototype["@@transducer/step"]=function(t,r){return this.f(t,r)},XWrap}();function _xwrap(t){return new Bs(t)}var Us=_curry2$1((function bind(t,r){return _arity(t.length,(function(){return t.apply(r,arguments)}))})),zs=Us;function _iterableReduce(t,r,i){for(var a=i.next();!a.done;){if((r=t["@@transducer/step"](r,a.value))&&r["@@transducer/reduced"]){r=r["@@transducer/value"];break}a=i.next()}return t["@@transducer/result"](r)}function _methodReduce(t,r,i,a){return t["@@transducer/result"](i[a](zs(t["@@transducer/step"],t),r))}var Ys="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function _reduce(t,r,i){if("function"==typeof t&&(t=_xwrap(t)),Fs(i))return function _arrayReduce(t,r,i){for(var a=0,u=i.length;a<u;){if((r=t["@@transducer/step"](r,i[a]))&&r["@@transducer/reduced"]){r=r["@@transducer/value"];break}a+=1}return t["@@transducer/result"](r)}(t,r,i);if("function"==typeof i["fantasy-land/reduce"])return _methodReduce(t,r,i,"fantasy-land/reduce");if(null!=i[Ys])return _iterableReduce(t,r,i[Ys]());if("function"==typeof i.next)return _iterableReduce(t,r,i);if("function"==typeof i.reduce)return _methodReduce(t,r,i,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Gs=function(){function XMap(t,r){this.xf=r,this.f=t}return XMap.prototype["@@transducer/init"]=Ls.init,XMap.prototype["@@transducer/result"]=Ls.result,XMap.prototype["@@transducer/step"]=function(t,r){return this.xf["@@transducer/step"](t,this.f(r))},XMap}(),Hs=_curry2$1((function _xmap(t,r){return new Gs(t,r)}));function _has$1(t,r){return Object.prototype.hasOwnProperty.call(r,t)}var Qs=Object.prototype.toString,Vs=function(){return"[object Arguments]"===Qs.call(arguments)?function _isArguments(t){return"[object Arguments]"===Qs.call(t)}:function _isArguments(t){return _has$1("callee",t)}}(),Ws=Vs,$s=!{toString:null}.propertyIsEnumerable("toString"),Ks=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],qs=function(){return arguments.propertyIsEnumerable("length")}(),Xs=function contains(t,r){for(var i=0;i<t.length;){if(t[i]===r)return!0;i+=1}return!1},Zs="function"!=typeof Object.keys||qs?_curry1$1((function keys(t){if(Object(t)!==t)return[];var r,i,a=[],u=qs&&Ws(t);for(r in t)!_has$1(r,t)||u&&"length"===r||(a[a.length]=r);if($s)for(i=Ks.length-1;i>=0;)_has$1(r=Ks[i],t)&&!Xs(a,r)&&(a[a.length]=r),i-=1;return a})):_curry1$1((function keys(t){return Object(t)!==t?[]:Object.keys(t)})),Js=Zs,eu=_curry2$1(_dispatchable(["fantasy-land/map","map"],Hs,(function map(t,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return Ns(r.length,(function(){return t.call(this,r.apply(this,arguments))}));case"[object Object]":return _reduce((function(i,a){return i[a]=t(r[a]),i}),{},Js(r));default:return _map(t,r)}}))),tu=eu,ru=Number.isInteger||function _isInteger(t){return t<<0===t},nu=_curry2$1((function nth(t,r){var i=t<0?r.length+t:t;return _isString$1(r)?r.charAt(i):r[i]})),iu=_curry2$1((function paths(t,r){return t.map((function(t){for(var i,a=r,u=0;u<t.length;){if(null==a)return;i=t[u],a=ru(i)?nu(i,a):a[i],u+=1}return a}))})),au=iu,ou=_curry2$1((function path(t,r){return au([t],r)[0]})),su=_curry2$1((function prop(t,r){return ou([t],r)})),uu=_curry2$1((function pluck(t,r){return tu(su(t),r)})),lu=_curry3$1(_reduce),cu=_curry1$1((function allPass(t){return Ns(lu(Ps,0,uu("length",t)),(function(){for(var r=0,i=t.length;r<i;){if(!t[r].apply(this,arguments))return!1;r+=1}return!0}))})),du=cu,fu=_curry1$1((function always(t){return function(){return t}})),hu=_curry2$1((function and(t,r){return t&&r})),gu=function(){function XAny(t,r){this.xf=r,this.f=t,this.any=!1}return XAny.prototype["@@transducer/init"]=Ls.init,XAny.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},XAny.prototype["@@transducer/step"]=function(t,r){return this.f(r)&&(this.any=!0,t=_reduced(this.xf["@@transducer/step"](t,!0))),t},XAny}(),pu=_curry2$1(_dispatchable(["any"],_curry2$1((function _xany(t,r){return new gu(t,r)})),(function any(t,r){for(var i=0;i<r.length;){if(t(r[i]))return!0;i+=1}return!1}))),mu=_curry1$1((function anyPass(t){return Ns(lu(Ps,0,uu("length",t)),(function(){for(var r=0,i=t.length;r<i;){if(t[r].apply(this,arguments))return!0;r+=1}return!1}))})),yu=mu,vu=_curry2$1((function ap(t,r){return"function"==typeof r["fantasy-land/ap"]?r["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(r):"function"==typeof t?function(i){return t(i)(r(i))}:_reduce((function(t,i){return _concat(t,tu(i,r))}),[],t)}));function _aperture(t,r){for(var i=0,a=r.length-(t-1),u=new Array(a>=0?a:0);i<a;)u[i]=Array.prototype.slice.call(r,i,i+t),i+=1;return u}var _u=function(){function XAperture(t,r){this.xf=r,this.pos=0,this.full=!1,this.acc=new Array(t)}return XAperture.prototype["@@transducer/init"]=Ls.init,XAperture.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},XAperture.prototype["@@transducer/step"]=function(t,r){return this.store(r),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},XAperture.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},XAperture.prototype.getCopy=function(){return _concat(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},XAperture}(),Tu=_curry2$1(_dispatchable([],_curry2$1((function _xaperture(t,r){return new _u(t,r)})),_aperture)),bu=_curry2$1((function append(t,r){return _concat(r,[t])})),Mu=_curry2$1((function apply(t,r){return t.apply(this,r)})),Su=_curry1$1((function values(t){for(var r=Js(t),i=r.length,a=[],u=0;u<i;)a[u]=t[r[u]],u+=1;return a})),Eu=Su;function mapValues(t,r){return Js(r).reduce((function(i,a){return i[a]=t(r[a]),i}),{})}var Iu=_curry1$1((function applySpec(t){return t=mapValues((function(t){return"function"==typeof t?t:applySpec(t)}),t),Ns(lu(Ps,0,uu("length",Eu(t))),(function(){var r=arguments;return mapValues((function(t){return Mu(t,r)}),t)}))})),Du=Iu,Au=_curry2$1((function applyTo(t,r){return r(t)})),Cu=_curry3$1((function ascend(t,r,i){var a=t(r),u=t(i);return a<u?-1:a>u?1:0})),Nu=_curry3$1((function assoc(t,r,i){var a={};for(var u in i)a[u]=i[u];return a[t]=r,a})),xu=Nu,ku=_curry1$1((function isNil(t){return null==t})),wu=_curry3$1((function assocPath(t,r,i){if(0===t.length)return r;var a=t[0];if(t.length>1){var u=!ku(i)&&_has$1(a,i)?i[a]:ru(t[1])?[]:{};r=assocPath(Array.prototype.slice.call(t,1),r,u)}if(ru(a)&&Os(i)){var l=[].concat(i);return l[a]=r,l}return xu(a,r,i)})),Ou=wu,Lu=_curry2$1((function nAry(t,r){switch(t){case 0:return function(){return r.call(this)};case 1:return function(t){return r.call(this,t)};case 2:return function(t,i){return r.call(this,t,i)};case 3:return function(t,i,a){return r.call(this,t,i,a)};case 4:return function(t,i,a,u){return r.call(this,t,i,a,u)};case 5:return function(t,i,a,u,l){return r.call(this,t,i,a,u,l)};case 6:return function(t,i,a,u,l,c){return r.call(this,t,i,a,u,l,c)};case 7:return function(t,i,a,u,l,c,d){return r.call(this,t,i,a,u,l,c,d)};case 8:return function(t,i,a,u,l,c,d,g){return r.call(this,t,i,a,u,l,c,d,g)};case 9:return function(t,i,a,u,l,c,d,g,p){return r.call(this,t,i,a,u,l,c,d,g,p)};case 10:return function(t,i,a,u,l,c,d,g,p,m){return r.call(this,t,i,a,u,l,c,d,g,p,m)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}})),Ru=_curry1$1((function binary(t){return Lu(2,t)}));function _isFunction(t){var r=Object.prototype.toString.call(t);return"[object Function]"===r||"[object AsyncFunction]"===r||"[object GeneratorFunction]"===r||"[object AsyncGeneratorFunction]"===r}var ju=_curry2$1((function liftN(t,r){var i=Ns(t,r);return Ns(t,(function(){return _reduce(vu,tu(i,arguments[0]),Array.prototype.slice.call(arguments,1))}))})),Pu=ju,Fu=_curry1$1((function lift(t){return Pu(t.length,t)})),Bu=_curry2$1((function both(t,r){return _isFunction(t)?function _both(){return t.apply(this,arguments)&&r.apply(this,arguments)}:Fu(hu)(t,r)})),Uu=Bu,zu=_curry1$1((function curry(t){return Ns(t.length,t)})),Yu=zu((function call(t){return t.apply(this,Array.prototype.slice.call(arguments,1))})),Gu=Yu;function _makeFlat(t){return function flatt(r){for(var i,a,u,l=[],c=0,d=r.length;c<d;){if(Fs(r[c]))for(u=0,a=(i=t?flatt(r[c]):r[c]).length;u<a;)l[l.length]=i[u],u+=1;else l[l.length]=r[c];c+=1}return l}}var Hu=function _xcat(t){var r=function preservingReduced(t){return{"@@transducer/init":Ls.init,"@@transducer/result":function transducerResult(r){return t["@@transducer/result"](r)},"@@transducer/step":function transducerStep(r,i){var a=t["@@transducer/step"](r,i);return a["@@transducer/reduced"]?function _forceReduced(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}}(a):a}}}(t);return{"@@transducer/init":Ls.init,"@@transducer/result":function transducerResult(t){return r["@@transducer/result"](t)},"@@transducer/step":function transducerStep(t,i){return Fs(i)?_reduce(r,t,i):_reduce(r,t,[i])}}},Qu=_curry2$1(_dispatchable(["fantasy-land/chain","chain"],_curry2$1((function _xchain(t,r){return tu(t,Hu(r))})),(function chain(t,r){return"function"==typeof r?function(i){return t(r(i))(i)}:_makeFlat(!1)(tu(t,r))}))),Vu=_curry3$1((function clamp(t,r,i){if(t>r)throw new Error("min must not be greater than max in clamp(min, max, value)");return i<t?t:i>r?r:i})),Wu=Vu;function _cloneRegExp(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}var $u=_curry1$1((function type(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function _clone(t,r,i,a){var u=function copy(u){for(var l=r.length,c=0;c<l;){if(t===r[c])return i[c];c+=1}for(var d in r[c+1]=t,i[c+1]=u,t)u[d]=a?_clone(t[d],r,i,!0):t[d];return u};switch($u(t)){case"Object":return u({});case"Array":return u([]);case"Date":return new Date(t.valueOf());case"RegExp":return _cloneRegExp(t);default:return t}}var Ku=_curry1$1((function clone(t){return null!=t&&"function"==typeof t.clone?t.clone():_clone(t,[],[],!0)})),qu=_curry1$1((function comparator(t){return function(r,i){return t(r,i)?-1:t(i,r)?1:0}})),Xu=_curry1$1((function not(t){return!t})),Zu=Fu(Xu);function _pipe(t,r){return function(){return r.call(this,t.apply(this,arguments))}}function _checkForMethod(t,r){return function(){var i=arguments.length;if(0===i)return r();var a=arguments[i-1];return Os(a)||"function"!=typeof a[t]?r.apply(this,arguments):a[t].apply(a,Array.prototype.slice.call(arguments,0,i-1))}}var Ju=_curry3$1(_checkForMethod("slice",(function slice(t,r,i){return Array.prototype.slice.call(i,t,r)}))),el=_curry1$1(_checkForMethod("tail",Ju(1,1/0)));function pipe(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return _arity(arguments[0].length,lu(_pipe,arguments[0],el(arguments)))}var tl=_curry1$1((function reverse(t){return _isString$1(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));function compose(){if(0===arguments.length)throw new Error("compose requires at least one argument");return pipe.apply(this,tl(arguments))}function composeK(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var t=Array.prototype.slice.call(arguments),r=t.pop();return compose(compose.apply(this,tu(Qu,t)),r)}function _pipeP(t,r){return function(){var i=this;return t.apply(i,arguments).then((function(t){return r.call(i,t)}))}}function pipeP(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return _arity(arguments[0].length,lu(_pipeP,arguments[0],el(arguments)))}var rl=nu(0);function _identity(t){return t}var nl=_curry1$1(_identity),il=_curry2$1((function pipeWith(t,r){if(r.length<=0)return nl;var i=rl(r),a=el(r);return _arity(i.length,(function(){return _reduce((function(r,i){return t.call(this,i,r)}),i.apply(this,arguments),a)}))})),al=il,ol=_curry2$1((function composeWith(t,r){return al.apply(this,[t,tl(r)])}));function _arrayFromIterator$1(t){for(var r,i=[];!(r=t.next()).done;)i.push(r.value);return i}function _includesWith$1(t,r,i){for(var a=0,u=i.length;a<u;){if(t(r,i[a]))return!0;a+=1}return!1}var sl="function"==typeof Object.is?Object.is:function _objectIs$2(t,r){return t===r?0!==t||1/t==1/r:t!=t&&r!=r};function _uniqContentEquals$1(t,r,i,a){var u=_arrayFromIterator$1(t);function eq(t,r){return _equals$1(t,r,i.slice(),a.slice())}return!_includesWith$1((function(t,r){return!_includesWith$1(eq,r,t)}),_arrayFromIterator$1(r),u)}function _equals$1(t,r,i,a){if(sl(t,r))return!0;var u=$u(t);if(u!==$u(r))return!1;if(null==t||null==r)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof r["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](r)&&"function"==typeof r["fantasy-land/equals"]&&r["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof r.equals)return"function"==typeof t.equals&&t.equals(r)&&"function"==typeof r.equals&&r.equals(t);switch(u){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function _functionName$1(t){var r=String(t).match(/^function (\w*)/);return null==r?"":r[1]}(t.constructor))return t===r;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof r||!sl(t.valueOf(),r.valueOf()))return!1;break;case"Date":if(!sl(t.valueOf(),r.valueOf()))return!1;break;case"Error":return t.name===r.name&&t.message===r.message;case"RegExp":if(t.source!==r.source||t.global!==r.global||t.ignoreCase!==r.ignoreCase||t.multiline!==r.multiline||t.sticky!==r.sticky||t.unicode!==r.unicode)return!1}for(var l=i.length-1;l>=0;){if(i[l]===t)return a[l]===r;l-=1}switch(u){case"Map":return t.size===r.size&&_uniqContentEquals$1(t.entries(),r.entries(),i.concat([t]),a.concat([r]));case"Set":return t.size===r.size&&_uniqContentEquals$1(t.values(),r.values(),i.concat([t]),a.concat([r]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=Js(t);if(c.length!==Js(r).length)return!1;var d=i.concat([t]),g=a.concat([r]);for(l=c.length-1;l>=0;){var p=c[l];if(!_has$1(p,r)||!_equals$1(r[p],t[p],d,g))return!1;l-=1}return!0}var ul=_curry2$1((function equals(t,r){return _equals$1(t,r,[],[])}));function _indexOf(t,r,i){var a,u;if("function"==typeof t.indexOf)switch(typeof r){case"number":if(0===r){for(a=1/r;i<t.length;){if(0===(u=t[i])&&1/u===a)return i;i+=1}return-1}if(r!=r){for(;i<t.length;){if("number"==typeof(u=t[i])&&u!=u)return i;i+=1}return-1}return t.indexOf(r,i);case"string":case"boolean":case"function":case"undefined":return t.indexOf(r,i);case"object":if(null===r)return t.indexOf(r,i)}for(;i<t.length;){if(ul(t[i],r))return i;i+=1}return-1}function _includes(t,r){return _indexOf(r,t,0)>=0}function _quote(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var ll=function pad(t){return(t<10?"0":"")+t},cl="function"==typeof Date.prototype.toISOString?function _toISOString(t){return t.toISOString()}:function _toISOString(t){return t.getUTCFullYear()+"-"+ll(t.getUTCMonth()+1)+"-"+ll(t.getUTCDate())+"T"+ll(t.getUTCHours())+":"+ll(t.getUTCMinutes())+":"+ll(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function _complement(t){return function(){return!t.apply(this,arguments)}}function _filter(t,r){for(var i=0,a=r.length,u=[];i<a;)t(r[i])&&(u[u.length]=r[i]),i+=1;return u}function _isObject(t){return"[object Object]"===Object.prototype.toString.call(t)}var dl=function(){function XFilter(t,r){this.xf=r,this.f=t}return XFilter.prototype["@@transducer/init"]=Ls.init,XFilter.prototype["@@transducer/result"]=Ls.result,XFilter.prototype["@@transducer/step"]=function(t,r){return this.f(r)?this.xf["@@transducer/step"](t,r):t},XFilter}(),fl=_curry2$1(_dispatchable(["filter"],_curry2$1((function _xfilter(t,r){return new dl(t,r)})),(function(t,r){return _isObject(r)?_reduce((function(i,a){return t(r[a])&&(i[a]=r[a]),i}),{},Js(r)):_filter(t,r)}))),hl=_curry2$1((function reject(t,r){return fl(_complement(t),r)}));function _toString(t,r){var i=function recur(i){var a=r.concat([t]);return _includes(i,a)?"<Circular>":_toString(i,a)},a=function mapPairs(t,r){return _map((function(r){return _quote(r)+": "+i(t[r])}),r.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+_map(i,t).join(", ")+"))";case"[object Array]":return"["+_map(i,t).concat(a(t,hl((function(t){return/^\d+$/.test(t)}),Js(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+i(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?i(NaN):_quote(cl(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+i(t.valueOf())+")":1/t==-1/0?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+i(t.valueOf())+")":_quote(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var u=t.toString();if("[object Object]"!==u)return u}return"{"+a(t,Js(t)).join(", ")+"}"}}var gl=_curry1$1((function toString(t){return _toString(t,[])})),pl=_curry2$1((function concat(t,r){if(Os(t)){if(Os(r))return t.concat(r);throw new TypeError(gl(r)+" is not an array")}if(_isString$1(t)){if(_isString$1(r))return t+r;throw new TypeError(gl(r)+" is not a string")}if(null!=t&&_isFunction(t["fantasy-land/concat"]))return t["fantasy-land/concat"](r);if(null!=t&&_isFunction(t.concat))return t.concat(r);throw new TypeError(gl(t)+' does not have a method named "concat" or "fantasy-land/concat"')})),ml=_curry1$1((function cond(t){var r=lu(Ps,0,tu((function(t){return t[0].length}),t));return _arity(r,(function(){for(var r=0;r<t.length;){if(t[r][0].apply(this,arguments))return t[r][1].apply(this,arguments);r+=1}}))})),yl=ml,vl=_curry2$1((function constructN(t,r){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new r}:zu(Lu(t,(function(t,i,a,u,l,c,d,g,p,m){switch(arguments.length){case 1:return new r(t);case 2:return new r(t,i);case 3:return new r(t,i,a);case 4:return new r(t,i,a,u);case 5:return new r(t,i,a,u,l);case 6:return new r(t,i,a,u,l,c);case 7:return new r(t,i,a,u,l,c,d);case 8:return new r(t,i,a,u,l,c,d,g);case 9:return new r(t,i,a,u,l,c,d,g,p);case 10:return new r(t,i,a,u,l,c,d,g,p,m)}})))})),_l=vl,Tl=_curry1$1((function construct(t){return _l(t.length,t)})),bl=_curry2$1(_includes),Ml=_curry2$1((function converge(t,r){return Ns(lu(Ps,0,uu("length",r)),(function(){var i=arguments,a=this;return t.apply(a,_map((function(t){return t.apply(a,i)}),r))}))})),Sl=Ml,El=function(){function XReduceBy(t,r,i,a){this.valueFn=t,this.valueAcc=r,this.keyFn=i,this.xf=a,this.inputs={}}return XReduceBy.prototype["@@transducer/init"]=Ls.init,XReduceBy.prototype["@@transducer/result"]=function(t){var r;for(r in this.inputs)if(_has$1(r,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[r]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},XReduceBy.prototype["@@transducer/step"]=function(t,r){var i=this.keyFn(r);return this.inputs[i]=this.inputs[i]||[i,this.valueAcc],this.inputs[i][1]=this.valueFn(this.inputs[i][1],r),t},XReduceBy}(),Il=_curryN(4,[],_dispatchable([],_curryN(4,[],(function _xreduceBy(t,r,i,a){return new El(t,r,i,a)})),(function reduceBy(t,r,i,a){return _reduce((function(a,u){var l=i(u);return a[l]=t(_has$1(l,a)?a[l]:_clone(r,[],[],!1),u),a}),{},a)}))),Dl=Il((function(t,r){return t+1}),0),Al=As(-1),Cl=_curry2$1((function defaultTo(t,r){return null==r||r!=r?t:r})),Nl=_curry3$1((function descend(t,r,i){var a=t(r),u=t(i);return a>u?-1:a<u?1:0}));function hasOrAdd(t,r,i){var a,u=typeof t;switch(u){case"string":case"number":return 0===t&&1/t==-1/0?!!i._items["-0"]||(r&&(i._items["-0"]=!0),!1):null!==i._nativeSet?r?(a=i._nativeSet.size,i._nativeSet.add(t),i._nativeSet.size===a):i._nativeSet.has(t):u in i._items?t in i._items[u]||(r&&(i._items[u][t]=!0),!1):(r&&(i._items[u]={},i._items[u][t]=!0),!1);case"boolean":if(u in i._items){var l=t?1:0;return!!i._items[u][l]||(r&&(i._items[u][l]=!0),!1)}return r&&(i._items[u]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==i._nativeSet?r?(a=i._nativeSet.size,i._nativeSet.add(t),i._nativeSet.size===a):i._nativeSet.has(t):u in i._items?!!_includes(t,i._items[u])||(r&&i._items[u].push(t),!1):(r&&(i._items[u]=[t]),!1);case"undefined":return!!i._items[u]||(r&&(i._items[u]=!0),!1);case"object":if(null===t)return!!i._items.null||(r&&(i._items.null=!0),!1);default:return(u=Object.prototype.toString.call(t))in i._items?!!_includes(t,i._items[u])||(r&&i._items[u].push(t),!1):(r&&(i._items[u]=[t]),!1)}}var xl=function(){function _Set(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return _Set.prototype.add=function(t){return!hasOrAdd(t,!0,this)},_Set.prototype.has=function(t){return hasOrAdd(t,!1,this)},_Set}(),kl=_curry2$1((function difference(t,r){for(var i=[],a=0,u=t.length,l=r.length,c=new xl,d=0;d<l;d+=1)c.add(r[d]);for(;a<u;)c.add(t[a])&&(i[i.length]=t[a]),a+=1;return i})),wl=kl,Ol=_curry3$1((function differenceWith(t,r,i){for(var a=[],u=0,l=r.length;u<l;)_includesWith$1(t,r[u],i)||_includesWith$1(t,r[u],a)||a.push(r[u]),u+=1;return a})),Ll=Ol,Rl=_curry2$1((function dissoc(t,r){var i={};for(var a in r)i[a]=r[a];return delete i[t],i})),jl=Rl,Pl=_curry3$1((function remove(t,r,i){var a=Array.prototype.slice.call(i,0);return a.splice(t,r),a})),Fl=Pl,Bl=_curry3$1((function update(t,r,i){return ws(t,fu(r),i)})),Ul=_curry2$1((function dissocPath(t,r){switch(t.length){case 0:return r;case 1:return ru(t[0])&&Os(r)?Fl(t[0],1,r):jl(t[0],r);default:var i=t[0],a=Array.prototype.slice.call(t,1);return null==r[i]?r:ru(i)&&Os(r)?Bl(i,dissocPath(a,r[i]),r):xu(i,dissocPath(a,r[i]),r)}})),zl=Ul,Yl=_curry2$1((function divide(t,r){return t/r})),Gl=function(){function XDrop(t,r){this.xf=r,this.n=t}return XDrop.prototype["@@transducer/init"]=Ls.init,XDrop.prototype["@@transducer/result"]=Ls.result,XDrop.prototype["@@transducer/step"]=function(t,r){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,r)},XDrop}(),Hl=_curry2$1(_dispatchable(["drop"],_curry2$1((function _xdrop(t,r){return new Gl(t,r)})),(function drop(t,r){return Ju(Math.max(0,t),1/0,r)}))),Ql=function(){function XTake(t,r){this.xf=r,this.n=t,this.i=0}return XTake.prototype["@@transducer/init"]=Ls.init,XTake.prototype["@@transducer/result"]=Ls.result,XTake.prototype["@@transducer/step"]=function(t,r){this.i+=1;var i=0===this.n?t:this.xf["@@transducer/step"](t,r);return this.n>=0&&this.i>=this.n?_reduced(i):i},XTake}(),Vl=_curry2$1(_dispatchable(["take"],_curry2$1((function _xtake(t,r){return new Ql(t,r)})),(function take(t,r){return Ju(0,t<0?1/0:t,r)})));function dropLast$2(t,r){return Vl(t<r.length?r.length-t:0,r)}var Wl=function(){function XDropLast(t,r){this.xf=r,this.pos=0,this.full=!1,this.acc=new Array(t)}return XDropLast.prototype["@@transducer/init"]=Ls.init,XDropLast.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},XDropLast.prototype["@@transducer/step"]=function(t,r){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(r),t},XDropLast.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},XDropLast}(),$l=_curry2$1(_dispatchable([],_curry2$1((function _xdropLast(t,r){return new Wl(t,r)})),dropLast$2));function dropLastWhile$2(t,r){for(var i=r.length-1;i>=0&&t(r[i]);)i-=1;return Ju(0,i+1,r)}var Kl=function(){function XDropLastWhile(t,r){this.f=t,this.retained=[],this.xf=r}return XDropLastWhile.prototype["@@transducer/init"]=Ls.init,XDropLastWhile.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},XDropLastWhile.prototype["@@transducer/step"]=function(t,r){return this.f(r)?this.retain(t,r):this.flush(t,r)},XDropLastWhile.prototype.flush=function(t,r){return t=_reduce(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,r)},XDropLastWhile.prototype.retain=function(t,r){return this.retained.push(r),t},XDropLastWhile}(),ql=_curry2$1(_dispatchable([],_curry2$1((function _xdropLastWhile(t,r){return new Kl(t,r)})),dropLastWhile$2)),Xl=function(){function XDropRepeatsWith(t,r){this.xf=r,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return XDropRepeatsWith.prototype["@@transducer/init"]=Ls.init,XDropRepeatsWith.prototype["@@transducer/result"]=Ls.result,XDropRepeatsWith.prototype["@@transducer/step"]=function(t,r){var i=!1;return this.seenFirstValue?this.pred(this.lastValue,r)&&(i=!0):this.seenFirstValue=!0,this.lastValue=r,i?t:this.xf["@@transducer/step"](t,r)},XDropRepeatsWith}(),Zl=_curry2$1((function _xdropRepeatsWith(t,r){return new Xl(t,r)})),Jl=nu(-1),ec=_curry2$1(_dispatchable([],Zl,(function dropRepeatsWith(t,r){var i=[],a=1,u=r.length;if(0!==u)for(i[0]=r[0];a<u;)t(Jl(i),r[a])||(i[i.length]=r[a]),a+=1;return i}))),tc=_curry1$1(_dispatchable([],Zl(ul),ec(ul))),rc=function(){function XDropWhile(t,r){this.xf=r,this.f=t}return XDropWhile.prototype["@@transducer/init"]=Ls.init,XDropWhile.prototype["@@transducer/result"]=Ls.result,XDropWhile.prototype["@@transducer/step"]=function(t,r){if(this.f){if(this.f(r))return t;this.f=null}return this.xf["@@transducer/step"](t,r)},XDropWhile}(),nc=_curry2$1(_dispatchable(["dropWhile"],_curry2$1((function _xdropWhile(t,r){return new rc(t,r)})),(function dropWhile(t,r){for(var i=0,a=r.length;i<a&&t(r[i]);)i+=1;return Ju(i,1/0,r)}))),ic=_curry2$1((function or(t,r){return t||r})),ac=_curry2$1((function either(t,r){return _isFunction(t)?function _either(){return t.apply(this,arguments)||r.apply(this,arguments)}:Fu(ic)(t,r)})),oc=ac,sc=_curry1$1((function empty(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():Os(t)?[]:_isString$1(t)?"":_isObject(t)?{}:Ws(t)?function(){return arguments}():void 0})),uc=sc,lc=_curry2$1((function takeLast(t,r){return Hl(t>=0?r.length-t:0,r)})),cc=_curry2$1((function(t,r){return ul(lc(t.length,r),t)})),dc=_curry3$1((function eqBy(t,r,i){return ul(t(r),t(i))})),fc=_curry3$1((function eqProps(t,r,i){return ul(r[t],i[t])})),hc=fc,gc=_curry2$1((function evolve(t,r){var i,a,u,l=r instanceof Array?[]:{};for(a in r)u=typeof(i=t[a]),l[a]="function"===u?i(r[a]):i&&"object"===u?evolve(i,r[a]):r[a];return l})),pc=gc,mc=function(){function XFind(t,r){this.xf=r,this.f=t,this.found=!1}return XFind.prototype["@@transducer/init"]=Ls.init,XFind.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},XFind.prototype["@@transducer/step"]=function(t,r){return this.f(r)&&(this.found=!0,t=_reduced(this.xf["@@transducer/step"](t,r))),t},XFind}(),yc=_curry2$1(_dispatchable(["find"],_curry2$1((function _xfind(t,r){return new mc(t,r)})),(function find(t,r){for(var i=0,a=r.length;i<a;){if(t(r[i]))return r[i];i+=1}}))),vc=function(){function XFindIndex(t,r){this.xf=r,this.f=t,this.idx=-1,this.found=!1}return XFindIndex.prototype["@@transducer/init"]=Ls.init,XFindIndex.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},XFindIndex.prototype["@@transducer/step"]=function(t,r){return this.idx+=1,this.f(r)&&(this.found=!0,t=_reduced(this.xf["@@transducer/step"](t,this.idx))),t},XFindIndex}(),_c=_curry2$1(_dispatchable([],_curry2$1((function _xfindIndex(t,r){return new vc(t,r)})),(function findIndex(t,r){for(var i=0,a=r.length;i<a;){if(t(r[i]))return i;i+=1}return-1}))),Tc=function(){function XFindLast(t,r){this.xf=r,this.f=t}return XFindLast.prototype["@@transducer/init"]=Ls.init,XFindLast.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},XFindLast.prototype["@@transducer/step"]=function(t,r){return this.f(r)&&(this.last=r),t},XFindLast}(),bc=_curry2$1(_dispatchable([],_curry2$1((function _xfindLast(t,r){return new Tc(t,r)})),(function findLast(t,r){for(var i=r.length-1;i>=0;){if(t(r[i]))return r[i];i-=1}}))),Mc=function(){function XFindLastIndex(t,r){this.xf=r,this.f=t,this.idx=-1,this.lastIdx=-1}return XFindLastIndex.prototype["@@transducer/init"]=Ls.init,XFindLastIndex.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},XFindLastIndex.prototype["@@transducer/step"]=function(t,r){return this.idx+=1,this.f(r)&&(this.lastIdx=this.idx),t},XFindLastIndex}(),Sc=_curry2$1(_dispatchable([],_curry2$1((function _xfindLastIndex(t,r){return new Mc(t,r)})),(function findLastIndex(t,r){for(var i=r.length-1;i>=0;){if(t(r[i]))return i;i-=1}return-1}))),Ec=_curry1$1(_makeFlat(!0)),Ic=_curry1$1((function flip(t){return Ns(t.length,(function(r,i){var a=Array.prototype.slice.call(arguments,0);return a[0]=i,a[1]=r,t.apply(this,a)}))})),Dc=Ic,Ac=_curry2$1(_checkForMethod("forEach",(function forEach(t,r){for(var i=r.length,a=0;a<i;)t(r[a]),a+=1;return r}))),Cc=_curry2$1((function forEachObjIndexed(t,r){for(var i=Js(r),a=0;a<i.length;){var u=i[a];t(r[u],u,r),a+=1}return r})),Nc=_curry1$1((function fromPairs(t){for(var r={},i=0;i<t.length;)r[t[i][0]]=t[i][1],i+=1;return r})),xc=Nc,kc=_curry2$1(_checkForMethod("groupBy",Il((function(t,r){return null==t&&(t=[]),t.push(r),t}),null))),wc=_curry2$1((function(t,r){for(var i=[],a=0,u=r.length;a<u;){for(var l=a+1;l<u&&t(r[l-1],r[l]);)l+=1;i.push(r.slice(a,l)),a=l}return i})),Oc=_curry2$1((function gt(t,r){return t>r})),Lc=_curry2$1((function gte(t,r){return t>=r})),Rc=_curry2$1((function hasPath(t,r){if(0===t.length||ku(r))return!1;for(var i=r,a=0;a<t.length;){if(ku(i)||!_has$1(t[a],i))return!1;i=i[t[a]],a+=1}return!0})),jc=_curry2$1((function has(t,r){return Rc([t],r)})),Pc=jc,Fc=_curry2$1((function hasIn(t,r){return t in r})),Bc=Fc,Uc=_curry2$1(sl),zc=_curry3$1((function ifElse(t,r,i){return Ns(Math.max(t.length,r.length,i.length),(function _ifElse(){return t.apply(this,arguments)?r.apply(this,arguments):i.apply(this,arguments)}))})),Yc=zc,Gc=As(1),Hc=_curry2$1(_includes),Qc=Il((function(t,r){return r}),null),Vc=_curry2$1((function indexOf(t,r){return"function"!=typeof r.indexOf||Os(r)?_indexOf(r,t,0):r.indexOf(t)})),Wc=Ju(0,-1),$c=_curry3$1((function innerJoin(t,r,i){return _filter((function(r){return _includesWith$1(t,r,i)}),r)})),Kc=_curry3$1((function insert(t,r,i){t=t<i.length&&t>=0?t:i.length;var a=Array.prototype.slice.call(i,0);return a.splice(t,0,r),a})),qc=_curry3$1((function insertAll(t,r,i){return t=t<i.length&&t>=0?t:i.length,[].concat(Array.prototype.slice.call(i,0,t),r,Array.prototype.slice.call(i,t))})),Xc=_curry2$1((function uniqBy(t,r){for(var i,a,u=new xl,l=[],c=0;c<r.length;)i=t(a=r[c]),u.add(i)&&l.push(a),c+=1;return l})),Zc=Xc,Jc=Zc(nl),ed=_curry2$1((function intersection(t,r){var i,a;return t.length>r.length?(i=t,a=r):(i=r,a=t),Jc(_filter(Dc(_includes)(i),a))})),td=_curry2$1(_checkForMethod("intersperse",(function intersperse(t,r){for(var i=[],a=0,u=r.length;a<u;)a===u-1?i.push(r[a]):i.push(r[a],t),a+=1;return i}))),rd=td;var nd="function"==typeof Object.assign?Object.assign:function _objectAssign(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),i=1,a=arguments.length;i<a;){var u=arguments[i];if(null!=u)for(var l in u)_has$1(l,u)&&(r[l]=u[l]);i+=1}return r},ad=_curry2$1((function objOf(t,r){var i={};return i[t]=r,i})),od={"@@transducer/init":Array,"@@transducer/step":function transducerStep(t,r){return t.push(r),t},"@@transducer/result":_identity},sd={"@@transducer/init":String,"@@transducer/step":function transducerStep(t,r){return t+r},"@@transducer/result":_identity},ud={"@@transducer/init":Object,"@@transducer/step":function transducerStep(t,r){return nd(t,Fs(r)?ad(r[0],r[1]):r)},"@@transducer/result":_identity};var ld=_curry3$1((function into(t,r,i){return _isTransformer(t)?_reduce(r(t),t["@@transducer/init"](),i):_reduce(r(function _stepCat(t){if(_isTransformer(t))return t;if(Fs(t))return od;if("string"==typeof t)return sd;if("object"==typeof t)return ud;throw new Error("Cannot create transformer for "+t)}(t)),_clone(t,[],[],!1),i)})),cd=_curry1$1((function invert(t){for(var r=Js(t),i=r.length,a=0,u={};a<i;){var l=r[a],c=t[l],d=_has$1(c,u)?u[c]:u[c]=[];d[d.length]=l,a+=1}return u})),dd=cd,fd=_curry1$1((function invertObj(t){for(var r=Js(t),i=r.length,a=0,u={};a<i;){var l=r[a];u[t[l]]=l,a+=1}return u})),hd=fd,gd=_curry2$1((function invoker(t,r){return Ns(t+1,(function(){var i=arguments[t];if(null!=i&&_isFunction(i[r]))return i[r].apply(i,Array.prototype.slice.call(arguments,0,t));throw new TypeError(gl(i)+' does not have a method named "'+r+'"')}))})),pd=gd,md=_curry2$1((function is(t,r){return null!=r&&r.constructor===t||r instanceof t})),yd=_curry1$1((function isEmpty(t){return null!=t&&ul(t,uc(t))})),vd=pd(1,"join"),_d=_curry1$1((function juxt(t){return Sl((function(){return Array.prototype.slice.call(arguments,0)}),t)})),Td=_d,bd=_curry1$1((function keysIn(t){var r,i=[];for(r in t)i[i.length]=r;return i})),Md=bd,Sd=_curry2$1((function lastIndexOf(t,r){if("function"!=typeof r.lastIndexOf||Os(r)){for(var i=r.length-1;i>=0;){if(ul(r[i],t))return i;i-=1}return-1}return r.lastIndexOf(t)}));function _isNumber(t){return"[object Number]"===Object.prototype.toString.call(t)}var Ed=_curry1$1((function length(t){return null!=t&&_isNumber(t.length)?t.length:NaN})),Id=_curry2$1((function lens(t,r){return function(i){return function(a){return tu((function(t){return r(t,a)}),i(t(a)))}}})),Dd=_curry1$1((function lensIndex(t){return Id(nu(t),Bl(t))})),Ad=_curry1$1((function lensPath(t){return Id(ou(t),Ou(t))})),Cd=_curry1$1((function lensProp(t){return Id(su(t),xu(t))})),Nd=_curry2$1((function lt(t,r){return t<r})),xd=_curry2$1((function lte(t,r){return t<=r})),kd=_curry3$1((function mapAccum(t,r,i){for(var a=0,u=i.length,l=[],c=[r];a<u;)c=t(c[0],i[a]),l[a]=c[1],a+=1;return[c[0],l]})),wd=_curry3$1((function mapAccumRight(t,r,i){for(var a=i.length-1,u=[],l=[r];a>=0;)l=t(l[0],i[a]),u[a]=l[1],a-=1;return[l[0],u]})),Od=_curry2$1((function mapObjIndexed(t,r){return _reduce((function(i,a){return i[a]=t(r[a],a,r),i}),{},Js(r))})),Ld=_curry2$1((function match(t,r){return r.match(t)||[]})),Rd=_curry2$1((function mathMod(t,r){return ru(t)?!ru(r)||r<1?NaN:(t%r+r)%r:NaN})),jd=_curry3$1((function maxBy(t,r,i){return t(i)>t(r)?i:r})),Pd=lu(As,0),Fd=_curry1$1((function mean(t){return Pd(t)/t.length})),Bd=_curry1$1((function median(t){var r=t.length;if(0===r)return NaN;var i=2-r%2,a=(r-i)/2;return Fd(Array.prototype.slice.call(t,0).sort((function(t,r){return t<r?-1:t>r?1:0})).slice(a,a+i))})),Ud=_curry2$1((function memoizeWith(t,r){var i={};return _arity(r.length,(function(){var a=t.apply(this,arguments);return _has$1(a,i)||(i[a]=r.apply(this,arguments)),i[a]}))})),zd=Ud,Yd=_curry2$1((function merge(t,r){return nd({},t,r)})),Gd=_curry1$1((function mergeAll(t){return nd.apply(null,[{}].concat(t))})),Hd=_curry3$1((function mergeWithKey(t,r,i){var a,u={};for(a in r)_has$1(a,r)&&(u[a]=_has$1(a,i)?t(a,r[a],i[a]):r[a]);for(a in i)_has$1(a,i)&&!_has$1(a,u)&&(u[a]=i[a]);return u})),Qd=_curry3$1((function mergeDeepWithKey(t,r,i){return Hd((function(r,i,a){return _isObject(i)&&_isObject(a)?mergeDeepWithKey(t,i,a):t(r,i,a)}),r,i)})),Vd=_curry2$1((function mergeDeepLeft(t,r){return Qd((function(t,r,i){return r}),t,r)})),Wd=_curry2$1((function mergeDeepRight(t,r){return Qd((function(t,r,i){return i}),t,r)})),$d=_curry3$1((function mergeDeepWith(t,r,i){return Qd((function(r,i,a){return t(i,a)}),r,i)})),Kd=_curry2$1((function mergeLeft(t,r){return nd({},r,t)})),qd=_curry2$1((function mergeRight(t,r){return nd({},t,r)})),Xd=_curry3$1((function mergeWith(t,r,i){return Hd((function(r,i,a){return t(i,a)}),r,i)})),Zd=_curry2$1((function min(t,r){return r<t?r:t})),Jd=_curry3$1((function minBy(t,r,i){return t(i)<t(r)?i:r})),ef=_curry2$1((function modulo(t,r){return t%r})),tf=_curry3$1((function(t,r,i){var a=i.length,u=i.slice(),l=t<0?a+t:t,c=r<0?a+r:r,d=u.splice(l,1);return l<0||l>=i.length||c<0||c>=i.length?i:[].concat(u.slice(0,c)).concat(d).concat(u.slice(c,i.length))})),rf=tf,nf=_curry2$1((function multiply(t,r){return t*r})),af=_curry1$1((function negate(t){return-t})),of=_curry2$1((function none(t,r){return js(_complement(t),r)})),sf=_curry1$1((function nthArg(t){return Ns(t<0?1:t+1,(function(){return nu(t,arguments)}))})),uf=sf,lf=_curry3$1((function o(t,r,i){return t(r(i))})),cf=lf;function _of(t){return[t]}var df=_curry1$1(_of),ff=_curry2$1((function omit(t,r){for(var i={},a={},u=0,l=t.length;u<l;)a[t[u]]=1,u+=1;for(var c in r)a.hasOwnProperty(c)||(i[c]=r[c]);return i})),hf=ff,gf=_curry1$1((function once(t){var r,i=!1;return _arity(t.length,(function(){return i?r:(i=!0,r=t.apply(this,arguments))}))})),pf=gf;function _assertPromise(t,r){if(null==r||!_isFunction(r.then))throw new TypeError("`"+t+"` expected a Promise, received "+_toString(r,[]))}var mf=_curry2$1((function otherwise(t,r){return _assertPromise("otherwise",r),r.then(null,t)})),yf=function Identity(t){return{value:t,map:function map(r){return Identity(r(t))}}},vf=_curry3$1((function over(t,r,i){return t((function(t){return yf(r(t))}))(i).value})),_f=vf,Tf=_curry2$1((function pair(t,r){return[t,r]}));function _createPartialApplicator(t){return _curry2$1((function(r,i){return _arity(Math.max(0,r.length-i.length),(function(){return r.apply(this,t(i,arguments))}))}))}var bf=_createPartialApplicator(_concat),Mf=_createPartialApplicator(Dc(_concat)),Sf=Td([fl,hl]),Ef=_curry3$1((function pathEq(t,r,i){return ul(ou(t,i),r)})),If=_curry3$1((function pathOr(t,r,i){return Cl(t,ou(r,i))})),Df=_curry3$1((function pathSatisfies(t,r,i){return t(ou(r,i))})),Af=_curry2$1((function pick(t,r){for(var i={},a=0;a<t.length;)t[a]in r&&(i[t[a]]=r[t[a]]),a+=1;return i})),Cf=_curry2$1((function pickAll(t,r){for(var i={},a=0,u=t.length;a<u;){var l=t[a];i[l]=r[l],a+=1}return i})),Nf=Cf,xf=_curry2$1((function pickBy(t,r){var i={};for(var a in r)t(r[a],a,r)&&(i[a]=r[a]);return i})),kf=xf;var wf=_curry2$1((function prepend(t,r){return _concat([t],r)})),Of=lu(nf,1),Lf=_curry2$1((function useWith(t,r){return Ns(r.length,(function(){for(var i=[],a=0;a<r.length;)i.push(r[a].call(this,arguments[a])),a+=1;return t.apply(this,i.concat(Array.prototype.slice.call(arguments,r.length)))}))})),Rf=Lf,jf=Rf(_map,[Nf,nl]),Pf=_curry3$1((function propEq(t,r,i){return ul(r,i[t])})),Ff=Pf,Bf=_curry3$1((function propIs(t,r,i){return md(t,i[r])})),Uf=Bf,zf=_curry3$1((function propOr(t,r,i){return If(t,[r],i)})),Yf=_curry3$1((function propSatisfies(t,r,i){return t(i[r])})),Gf=Yf,Hf=_curry2$1((function props(t,r){return t.map((function(t){return ou([t],r)}))})),Qf=_curry2$1((function range(t,r){if(!_isNumber(t)||!_isNumber(r))throw new TypeError("Both arguments to range must be numbers");for(var i=[],a=t;a<r;)i.push(a),a+=1;return i})),Vf=Qf,Wf=_curry3$1((function reduceRight(t,r,i){for(var a=i.length-1;a>=0;)r=t(i[a],r),a-=1;return r})),$f=_curryN(4,[],(function _reduceWhile(t,r,i,a){return _reduce((function(i,a){return t(i,a)?r(i,a):_reduced(i)}),i,a)})),Kf=_curry1$1(_reduced),qf=_curry2$1((function times(t,r){var i,a=Number(r),u=0;if(a<0||isNaN(a))throw new RangeError("n must be a non-negative number");for(i=new Array(a);u<a;)i[u]=t(u),u+=1;return i})),Xf=_curry2$1((function repeat(t,r){return qf(fu(t),r)})),Zf=_curry3$1((function replace(t,r,i){return i.replace(t,r)})),Jf=_curry3$1((function scan(t,r,i){for(var a=0,u=i.length,l=[r];a<u;)r=t(r,i[a]),l[a+1]=r,a+=1;return l})),eh=_curry2$1((function sequence(t,r){return"function"==typeof r.sequence?r.sequence(t):Wf((function(t,r){return vu(tu(wf,t),r)}),t([]),r)})),th=eh,rh=_curry3$1((function set(t,r,i){return _f(t,fu(r),i)})),nh=rh,ih=_curry2$1((function sort(t,r){return Array.prototype.slice.call(r,0).sort(t)})),ah=ih,oh=_curry2$1((function sortBy(t,r){return Array.prototype.slice.call(r,0).sort((function(r,i){var a=t(r),u=t(i);return a<u?-1:a>u?1:0}))})),sh=_curry2$1((function sortWith(t,r){return Array.prototype.slice.call(r,0).sort((function(r,i){for(var a=0,u=0;0===a&&u<t.length;)a=t[u](r,i),u+=1;return a}))})),uh=pd(1,"split"),lh=_curry2$1((function splitAt(t,r){return[Ju(0,t,r),Ju(t,Ed(r),r)]})),ch=lh,dh=_curry2$1((function splitEvery(t,r){if(t<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var i=[],a=0;a<r.length;)i.push(Ju(a,a+=t,r));return i})),fh=_curry2$1((function splitWhen(t,r){for(var i=0,a=r.length,u=[];i<a&&!t(r[i]);)u.push(r[i]),i+=1;return[u,Array.prototype.slice.call(r,i)]})),hh=fh,gh=_curry2$1((function(t,r){return ul(Vl(t.length,r),t)})),ph=gh,mh=_curry2$1((function subtract(t,r){return Number(t)-Number(r)})),yh=_curry2$1((function symmetricDifference(t,r){return pl(wl(t,r),wl(r,t))})),vh=_curry3$1((function symmetricDifferenceWith(t,r,i){return pl(Ll(t,r,i),Ll(t,i,r))})),_h=_curry2$1((function takeLastWhile(t,r){for(var i=r.length-1;i>=0&&t(r[i]);)i-=1;return Ju(i+1,1/0,r)})),Th=function(){function XTakeWhile(t,r){this.xf=r,this.f=t}return XTakeWhile.prototype["@@transducer/init"]=Ls.init,XTakeWhile.prototype["@@transducer/result"]=Ls.result,XTakeWhile.prototype["@@transducer/step"]=function(t,r){return this.f(r)?this.xf["@@transducer/step"](t,r):_reduced(t)},XTakeWhile}(),bh=_curry2$1(_dispatchable(["takeWhile"],_curry2$1((function _xtakeWhile(t,r){return new Th(t,r)})),(function takeWhile(t,r){for(var i=0,a=r.length;i<a&&t(r[i]);)i+=1;return Ju(0,i,r)}))),Mh=function(){function XTap(t,r){this.xf=r,this.f=t}return XTap.prototype["@@transducer/init"]=Ls.init,XTap.prototype["@@transducer/result"]=Ls.result,XTap.prototype["@@transducer/step"]=function(t,r){return this.f(r),this.xf["@@transducer/step"](t,r)},XTap}(),Sh=_curry2$1(_dispatchable([],_curry2$1((function _xtap(t,r){return new Mh(t,r)})),(function tap(t,r){return t(r),r})));var Eh=_curry2$1((function test(t,r){if(!function _isRegExp(t){return"[object RegExp]"===Object.prototype.toString.call(t)}(t))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+gl(t));return _cloneRegExp(t).test(r)})),Ih=_curry2$1((function andThen(t,r){return _assertPromise("andThen",r),r.then(t)})),Dh=pd(0,"toLowerCase"),Ah=_curry1$1((function toPairs(t){var r=[];for(var i in t)_has$1(i,t)&&(r[r.length]=[i,t[i]]);return r})),Ch=Ah,Nh=_curry1$1((function toPairsIn(t){var r=[];for(var i in t)r[r.length]=[i,t[i]];return r})),xh=Nh,kh=pd(0,"toUpperCase"),wh=Ns(4,(function transduce(t,r,i,a){return _reduce(t("function"==typeof r?_xwrap(r):r),i,a)})),Oh=_curry1$1((function transpose(t){for(var r=0,i=[];r<t.length;){for(var a=t[r],u=0;u<a.length;)void 0===i[u]&&(i[u]=[]),i[u].push(a[u]),u+=1;r+=1}return i})),Lh=_curry3$1((function traverse(t,r,i){return"function"==typeof i["fantasy-land/traverse"]?i["fantasy-land/traverse"](r,t):th(t,tu(r,i))})),Rh=Lh,jh="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Ph=_curry1$1("function"==typeof String.prototype.trim&&!jh.trim()&&"​".trim()?function trim(t){return t.trim()}:function trim(t){var r=new RegExp("^["+jh+"]["+jh+"]*"),i=new RegExp("["+jh+"]["+jh+"]*$");return t.replace(r,"").replace(i,"")}),Fh=_curry2$1((function _tryCatch(t,r){return _arity(t.length,(function(){try{return t.apply(this,arguments)}catch(t){return r.apply(this,_concat([t],arguments))}}))})),Bh=Fh,Uh=_curry1$1((function unapply(t){return function(){return t(Array.prototype.slice.call(arguments,0))}})),zh=Uh,Yh=_curry1$1((function unary(t){return Lu(1,t)})),Gh=_curry2$1((function uncurryN(t,r){return Ns(t,(function(){for(var i,a=1,u=r,l=0;a<=t&&"function"==typeof u;)i=a===t?arguments.length:l+u.length,u=u.apply(this,Array.prototype.slice.call(arguments,l,i)),a+=1,l=i;return u}))})),Hh=Gh,Qh=_curry2$1((function unfold(t,r){for(var i=t(r),a=[];i&&i.length;)a[a.length]=i[0],i=t(i[1]);return a})),Vh=Qh,Wh=_curry2$1(compose(Jc,_concat)),$h=_curry2$1((function uniqWith(t,r){for(var i,a=0,u=r.length,l=[];a<u;)_includesWith$1(t,i=r[a],l)||(l[l.length]=i),a+=1;return l})),Kh=_curry3$1((function unionWith(t,r,i){return $h(t,_concat(r,i))})),qh=_curry3$1((function unless(t,r,i){return t(i)?i:r(i)})),Xh=Qu(_identity),Zh=_curry3$1((function until(t,r,i){for(var a=i;!t(a);)a=r(a);return a})),Jh=Zh,eg=_curry1$1((function valuesIn(t){var r,i=[];for(r in t)i[i.length]=t[r];return i})),tg=eg,rg=function Const(t){return{value:t,"fantasy-land/map":function fantasyLandMap(){return this}}},ng=_curry2$1((function view(t,r){return t(rg)(r).value})),ig=ng,ag=_curry3$1((function when(t,r,i){return t(i)?r(i):i})),og=_curry2$1((function where(t,r){for(var i in t)if(_has$1(i,t)&&!t[i](r[i]))return!1;return!0})),sg=og,ug=_curry2$1((function whereEq(t,r){return sg(tu(ul,t),r)})),lg=_curry2$1((function(t,r){return hl(Dc(_includes)(t),r)})),cg=_curry2$1((function xor(t,r){return Boolean(!t^!r)})),dg=_curry2$1((function xprod(t,r){for(var i,a=0,u=t.length,l=r.length,c=[];a<u;){for(i=0;i<l;)c[c.length]=[t[a],r[i]],i+=1;a+=1}return c})),fg=_curry2$1((function zip(t,r){for(var i=[],a=0,u=Math.min(t.length,r.length);a<u;)i[a]=[t[a],r[a]],a+=1;return i})),hg=_curry2$1((function zipObj(t,r){for(var i=0,a=Math.min(t.length,r.length),u={};i<a;)u[t[i]]=r[i],i+=1;return u})),gg=hg,pg=_curry3$1((function zipWith(t,r,i){for(var a=[],u=0,l=Math.min(r.length,i.length);u<l;)a[u]=t(r[u],i[u]),u+=1;return a})),mg=_curry1$1((function thunkify(t){return Ns(t.length,(function createThunk(){var r=arguments;return function invokeThunk(){return t.apply(this,r)}}))})),yg=mg,vg=Object.freeze({__proto__:null,F:Is,T:Ds,__:{"@@functional/placeholder":!0},add:As,addIndex:ks,adjust:ws,all:js,allPass:du,always:fu,and:hu,any:pu,anyPass:yu,ap:vu,aperture:Tu,append:bu,apply:Mu,applySpec:Du,applyTo:Au,ascend:Cu,assoc:xu,assocPath:Ou,binary:Ru,bind:zs,both:Uu,call:Gu,chain:Qu,clamp:Wu,clone:Ku,comparator:qu,complement:Zu,compose:compose,composeK:composeK,composeP:function composeP(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return pipeP.apply(this,tl(arguments))},composeWith:ol,concat:pl,cond:yl,construct:Tl,constructN:_l,contains:bl,converge:Sl,countBy:Dl,curry:zu,curryN:Ns,dec:Al,defaultTo:Cl,descend:Nl,difference:wl,differenceWith:Ll,dissoc:jl,dissocPath:zl,divide:Yl,drop:Hl,dropLast:$l,dropLastWhile:ql,dropRepeats:tc,dropRepeatsWith:ec,dropWhile:nc,either:oc,empty:uc,endsWith:cc,eqBy:dc,eqProps:hc,equals:ul,evolve:pc,filter:fl,find:yc,findIndex:_c,findLast:bc,findLastIndex:Sc,flatten:Ec,flip:Dc,forEach:Ac,forEachObjIndexed:Cc,fromPairs:xc,groupBy:kc,groupWith:wc,gt:Oc,gte:Lc,has:Pc,hasIn:Bc,hasPath:Rc,head:rl,identical:Uc,identity:nl,ifElse:Yc,inc:Gc,includes:Hc,indexBy:Qc,indexOf:Vc,init:Wc,innerJoin:$c,insert:Kc,insertAll:qc,intersection:ed,intersperse:rd,into:ld,invert:dd,invertObj:hd,invoker:pd,is:md,isEmpty:yd,isNil:ku,join:vd,juxt:Td,keys:Js,keysIn:Md,last:Jl,lastIndexOf:Sd,length:Ed,lens:Id,lensIndex:Dd,lensPath:Ad,lensProp:Cd,lift:Fu,liftN:Pu,lt:Nd,lte:xd,map:tu,mapAccum:kd,mapAccumRight:wd,mapObjIndexed:Od,match:Ld,mathMod:Rd,max:Ps,maxBy:jd,mean:Fd,median:Bd,memoizeWith:zd,merge:Yd,mergeAll:Gd,mergeDeepLeft:Vd,mergeDeepRight:Wd,mergeDeepWith:$d,mergeDeepWithKey:Qd,mergeLeft:Kd,mergeRight:qd,mergeWith:Xd,mergeWithKey:Hd,min:Zd,minBy:Jd,modulo:ef,move:rf,multiply:nf,nAry:Lu,negate:af,none:of,not:Xu,nth:nu,nthArg:uf,o:cf,objOf:ad,of:df,omit:hf,once:pf,or:ic,otherwise:mf,over:_f,pair:Tf,partial:bf,partialRight:Mf,partition:Sf,path:ou,paths:au,pathEq:Ef,pathOr:If,pathSatisfies:Df,pick:Af,pickAll:Nf,pickBy:kf,pipe:pipe,pipeK:function pipeK(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return composeK.apply(this,tl(arguments))},pipeP:pipeP,pipeWith:al,pluck:uu,prepend:wf,product:Of,project:jf,prop:su,propEq:Ff,propIs:Uf,propOr:zf,propSatisfies:Gf,props:Hf,range:Vf,reduce:lu,reduceBy:Il,reduceRight:Wf,reduceWhile:$f,reduced:Kf,reject:hl,remove:Fl,repeat:Xf,replace:Zf,reverse:tl,scan:Jf,sequence:th,set:nh,slice:Ju,sort:ah,sortBy:oh,sortWith:sh,split:uh,splitAt:ch,splitEvery:dh,splitWhen:hh,startsWith:ph,subtract:mh,sum:Pd,symmetricDifference:yh,symmetricDifferenceWith:vh,tail:el,take:Vl,takeLast:lc,takeLastWhile:_h,takeWhile:bh,tap:Sh,test:Eh,andThen:Ih,times:qf,toLower:Dh,toPairs:Ch,toPairsIn:xh,toString:gl,toUpper:kh,transduce:wh,transpose:Oh,traverse:Rh,trim:Ph,tryCatch:Bh,type:$u,unapply:zh,unary:Yh,uncurryN:Hh,unfold:Vh,union:Wh,unionWith:Kh,uniq:Jc,uniqBy:Zc,uniqWith:$h,unless:qh,unnest:Xh,until:Jh,update:Bl,useWith:Rf,values:Eu,valuesIn:tg,view:ig,when:ag,where:sg,whereEq:ug,without:lg,xor:cg,xprod:dg,zip:fg,zipObj:gg,zipWith:pg,thunkify:yg}),_g=getAugmentedNamespace(vg),Tg={},bg={};Object.defineProperty(bg,"__esModule",{value:!0}),bg.baseUrl=bg.apiKeyComcast=bg.apiKeyFetch=void 0,bg.apiKeyFetch="3OLR63@C!E8M3EE$ZACDP1N$NC9@FETV",bg.apiKeyComcast="NV3K&TZ7V26D!L28X9S2BR7R@XFINITYCOMCAST",bg.baseUrl="https://rest-stage-va.evergent.com/britbox";var Mg={},Sg={};Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.default=function convertColourToHex(t){return t.startsWith("0x")?10===t.length?t.substring(4):t.substring(2):t.startsWith("#")?7===t.length?t.substring(1):t.substring(3):t};var Eg={},Ig={},Dg={};Object.defineProperty(Dg,"__esModule",{value:!0});var Ag={};!function(t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorButton=void 0,(r=t.ErrorButton||(t.ErrorButton={})).Back="back",r.Login="login",r.TryAgain="try-again",r.DifferentEmail="different-email",r.DifferentPassword="different-password",r.Signin="sign-in",r.Home="home-page",r.Subscribe="subscribe",r.Dismiss="dismiss",r.Ok="Ok",r.SignInPW="sign-in-new-pw",r.SignInCode="sign-in-code"}(Ag),function(t){var r=_e&&_e.__createBinding||(Object.create?function(t,r,i,a){void 0===a&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function get(){return r[i]}})}:function(t,r,i,a){void 0===a&&(a=i),t[a]=r[i]}),i=_e&&_e.__exportStar||function(t,i){for(var a in t)"default"===a||Object.prototype.hasOwnProperty.call(i,a)||r(i,t,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorButton=void 0,i(Dg,t);var a=Ag;Object.defineProperty(t,"ErrorButton",{enumerable:!0,get:function get(){return a.ErrorButton}})}(Ig),Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.hlsErrorMapper=Eg.errorMapper=void 0;var Cg=Ig;Eg.errorMapper=function errorMapper(t){switch(t){case"0C-A400":return{buttons:[Cg.ErrorButton.TryAgain,Cg.ErrorButton.Back],description:"Could't connect to BritBox. Please try again later or \nrestart your home network and streaming device. \nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:"0C-A400",type:"network"};case"0C-A401":return{buttons:[Cg.ErrorButton.Login,Cg.ErrorButton.Back],description:"Unauthorized Request. Please try again later or restart \nyour home network and streaming device. \nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:"0C-A401",type:"entitlement"};case"0C-A403":return{buttons:[Cg.ErrorButton.Back],description:"Unauthorized Request. Please try again later or restart \nyour home network and streaming device. \nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:"0C-A403",type:"entitlement"};case"0C-A404":return{buttons:[Cg.ErrorButton.Back],description:"Not found. Please try again later or restart your \nhome network and streaming device. \nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:"0C-A404",type:"other"};case"0C-A500":return{buttons:[Cg.ErrorButton.Back],description:"Internal Server Error. Please try again later or restart \nyour home network and streaming device. \nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:"0C-A500",type:"network"};case"0C-A503":return{buttons:[Cg.ErrorButton.Back],description:"Service Unavailable. Please try again later or restart \nyour home network and streaming device.\nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:"0C-A503",type:"network"};case"0C-B402":return{buttons:[Cg.ErrorButton.Ok],title:"Unable to sign you in",description:"We don't recognise that email and password combination. Please try again.\r\n\r\nIf you cannot remember your password, you can request a password reset \nby going to <color=0xff00b6e6>britbox.com</color> and clicking the ‘Sign In’ button. On the Sign In screen, \nclick the ‘Forgot password?’ link and follow the instructions.",errorCode:"",type:"other"};case"0C-B403":return{buttons:[Cg.ErrorButton.DifferentEmail,Cg.ErrorButton.Signin],title:"That account already exists",description:"The email you entered is used for an existing BritBox account.\r\n\r\nYou can either create an account using a different email, or \nuse that email to sign in",errorCode:"",type:"other"};case"0C-B405":return{buttons:[Cg.ErrorButton.DifferentEmail],title:"The email you entered is invalid",description:"Please enter a valid email and try again.",errorCode:"",type:"other"};case"0C-B406":return{buttons:[Cg.ErrorButton.DifferentPassword],title:"The password you entered is invalid",description:"Your password must be 6 characters or longer,\nand contain at least one number or special character.",errorCode:"",type:"other"};case"OUT-OF-LOCATION":return{buttons:[],description:"Unfortunately, Britbox is not \ncurrently available in your country.",errorCode:"",type:"restriction"};case"FORGOT-PASSWORD":return{buttons:[Cg.ErrorButton.SignInPW,Cg.ErrorButton.SignInCode],title:"Forgot your password?",description:"On a laptop or mobile device, go to <color=0xff00b6e6>britbox.com</color> and click the \n‘Sign In’ button. On the Sign In screen, click the ‘Forgot password?’ link \nand follow the instructions to reset your password.\r\n\r\nWhen you are ready, come back here and sign in with your new password. \nYou can also sign in with a code on the BritBox website.",errorCode:"",type:"other"};case"0C-D000":return{buttons:[Cg.ErrorButton.Back],description:"Not found. Please try again later or restart \nyourhome network and streaming device. \nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:"0C-D000",type:"media"};case"0C-D001":return{buttons:[Cg.ErrorButton.Back],title:"You need a subscription",description:"You currently don't have an active BritBox subscription.\r\n\r\nTo watch this and all our other great content, \ngo to <color=0xff00b6e6>britbox.com</color> and start a subscription.",errorCode:"",type:"entitlement",platformOverrides:{Xfinity:{description:"You currently don't have an active BritBox subscription.",buttons:[Cg.ErrorButton.Subscribe,Cg.ErrorButton.Dismiss]}}};case"0C-D003":return{buttons:[Cg.ErrorButton.Back],description:"You are streaming on the maximum number of devices right now. \nTo watch please stop playing on one of the screens. \nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:"0C-D003",type:"restriction"};case"0C-D005":return{buttons:[Cg.ErrorButton.Back],description:"This video is unavailable. Please try again later or \nrestart your home network and streaming device. \nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:"0C-D005",type:"media"};case"0C-D007":return{buttons:[Cg.ErrorButton.Back],description:"Bad Request. Please try again or restart your \nhome network and streaming device. \nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:"0C-D007",type:"media"};case"1G-0001":case"1E-0025":return{buttons:[Cg.ErrorButton.Back],description:"Something went wrong. You don't have permission to watch this content. \nThis can be because you're in a country where BritBox is not available, \nor because you're using a VPN. If you believe you're seeing \nthis message in error, please visit <color=0xff00b6e6>britbox.me/location</color> to learn more.",errorCode:"",type:"restriction"};case"ACTIVE-SUBSCRIPTION":return{buttons:[Cg.ErrorButton.Back],title:"Active subscription",description:"There's already an active subscription on this account. \nTo manage your subscriptions please check your settings. \r\n\r\nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:"",type:"other"};case"SUBSCRIPTION-DATA":return{buttons:[Cg.ErrorButton.Home],description:"Oops looks like something went wrong getting the plans for subscription, \nplease try again later.",errorCode:"",type:"other"};case"1E-0010":case"1E-0011":case"1E-0012":case"1E-0013":case"1E-0014":case"1E-0015":case"1E-0016":case"1E-0017":case"1E-0018":case"1E-0019":case"1E-0020":case"1E-0021":case"1E-0022":case"1E-0023":case"1E-0024":case"1E-0030":case"1E-0031":case"1E-0032":case"1E-0033":case"1E-0034":case"1E-0035":case"1G-0012":case"1G-0013":case"1G-0014":case"1G-0015":case"1G-0016":case"1G-0017":case"1G-0018":case"1G-0019":case"1G-0020":case"1G-0021":case"1G-0022":case"1G-0023":case"1G-0024":return{buttons:[Cg.ErrorButton.Back],description:"Something went wrong, please try again later or \nrestart your home network and streaming device. \nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:t,type:"media"};case"1E-0026":case"1E-0027":case"1E-0028":case"1E-0029":case"1G-0002":case"1G-0003":case"1G-0004":case"1G-0005":case"1G-0006":case"1G-0007":case"1G-0008":case"1G-0009":case"1G-0010":case"1G-0011":return{buttons:[Cg.ErrorButton.Back],description:"Something went wrong, please try again later or \nrestart your home network and streaming device. \nFor more information visit <color=0xff00b6e6>britbox.com/help</color>.",errorCode:t,type:"network"};default:return{buttons:[Cg.ErrorButton.Back],description:"Oops looks like something went wrong, \nplease try again later.",errorCode:"",type:"other"}}};Eg.hlsErrorMapper=function hlsErrorMapper(t){switch(t){case"manifestLoadError":return"1G-0001";case"manifestLoadTimeOut":return"1G-0002";case"manifestParsingError":return"1G-0003";case"levelLoadError":return"1G-0004";case"levelLoadTimeOut":return"1G-0005";case"audioTrackLoadError":return"1G-0006";case"audioTrackLoadTimeOut":return"1G-0007";case"fragLoadError":return"1G-0008";case"fragLoadTimeOut":return"1G-0009";case"keyLoadError":return"1G-0010";case"keyLoadTimeOut":return"1G-0011";case"manifestIncompatibleCodecsError":return"1G-0012";case"fragDecryptError":return"1G-0013";case"fragParsingError":return"1G-0014";case"bufferAddCodecError":return"1G-0015";case"bufferAppendError":return"1G-0016";case"bufferAppendingError":return"1G-0017";case"bufferStalledError":return"1G-0018";case"bufferFullError":return"1G-0019";case"bufferSeekOverHole":return"1G-0020";case"bufferNudgeOnStall":return"1G-0021";case"remuxAllocError":return"1G-0022";case"levelSwitchError":return"1G-0023";case"internalException":return"1G-0024";default:return t}};var Ng={},xg={};!function(t){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _createForOfIteratorHelperLoose(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function getDefaults(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var r=/[&<>"']/,i=/[&<>"']/g,a=/[<>"']|&(?!#?\w+;)/,u=/[<>"']|&(?!#?\w+;)/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=function getEscapeReplacement(t){return l[t]};function escape(t,l){if(l){if(r.test(t))return t.replace(i,c)}else if(a.test(t))return t.replace(u,c);return t}var d=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function unescape(t){return t.replace(d,(function(t,r){return"colon"===(r=r.toLowerCase())?":":"#"===r.charAt(0)?"x"===r.charAt(1)?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""}))}var g=/(^|[^\[])\^/g;function edit(t,r){t="string"==typeof t?t:t.source,r=r||"";var i={replace:function replace(r,a){return a=(a=a.source||a).replace(g,"$1"),t=t.replace(r,a),i},getRegex:function getRegex(){return new RegExp(t,r)}};return i}var p=/[^\w:]/g,m=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(t,r,i){if(t){var a;try{a=decodeURIComponent(unescape(i)).replace(p,"").toLowerCase()}catch(t){return null}if(0===a.indexOf("javascript:")||0===a.indexOf("vbscript:")||0===a.indexOf("data:"))return null}r&&!m.test(i)&&(i=function resolveUrl(t,r){v[" "+t]||(b.test(t)?v[" "+t]=t+"/":v[" "+t]=rtrim(t,"/",!0));var i=-1===(t=v[" "+t]).indexOf(":");return"//"===r.substring(0,2)?i?r:t.replace(M,"$1")+r:"/"===r.charAt(0)?i?r:t.replace(S,"$1")+r:t+r}(r,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(t){return null}return i}var v={},b=/^[^:]+:\/*[^/]*$/,M=/^([^:]+:)[\s\S]*$/,S=/^([^:]+:\/*[^/]*)[\s\S]*$/;var E={exec:function noopTest(){}};function merge(t){for(var r,i,a=1;a<arguments.length;a++)for(i in r=arguments[a])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}function splitCells(t,r){var i=t.replace(/\|/g,(function(t,r,i){for(var a=!1,u=r;--u>=0&&"\\"===i[u];)a=!a;return a?"|":" |"})).split(/ \|/),a=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>r)i.splice(r);else for(;i.length<r;)i.push("");for(;a<i.length;a++)i[a]=i[a].trim().replace(/\\\|/g,"|");return i}function rtrim(t,r,i){var a=t.length;if(0===a)return"";for(var u=0;u<a;){var l=t.charAt(a-u-1);if(l!==r||i){if(l===r||!i)break;u++}else u++}return t.slice(0,a-u)}function checkSanitizeDeprecation(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(t,r){if(r<1)return"";for(var i="";r>1;)1&r&&(i+=t),r>>=1,t+=t;return i+t}function outputLink(t,r,i,a){var u=r.href,l=r.title?escape(r.title):null,c=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){a.state.inLink=!0;var d={type:"link",raw:i,href:u,title:l,text:c,tokens:a.inlineTokens(c)};return a.state.inLink=!1,d}return{type:"image",raw:i,href:u,title:l,text:escape(c)}}var I=function(){function Tokenizer(r){this.options=r||t.defaults}var r=Tokenizer.prototype;return r.space=function space(t){var r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}},r.code=function code(t){var r=this.rules.block.code.exec(t);if(r){var i=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?i:rtrim(i,"\n")}}},r.fences=function fences(t){var r=this.rules.block.fences.exec(t);if(r){var i=r[0],a=function indentCodeCompensation(t,r){var i=t.match(/^(\s+)(?:```)/);if(null===i)return r;var a=i[1];return r.split("\n").map((function(t){var r=t.match(/^\s+/);return null===r?t:r[0].length>=a.length?t.slice(a.length):t})).join("\n")}(i,r[3]||"");return{type:"code",raw:i,lang:r[2]?r[2].trim():r[2],text:a}}},r.heading=function heading(t){var r=this.rules.block.heading.exec(t);if(r){var i=r[2].trim();if(/#$/.test(i)){var a=rtrim(i,"#");this.options.pedantic?i=a.trim():a&&!/ $/.test(a)||(i=a.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:i,tokens:this.lexer.inline(i)}}},r.hr=function hr(t){var r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:r[0]}},r.blockquote=function blockquote(t){var r=this.rules.block.blockquote.exec(t);if(r){var i=r[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:r[0],tokens:this.lexer.blockTokens(i,[]),text:i}}},r.list=function list(t){var r=this.rules.block.list.exec(t);if(r){var i,a,u,l,c,d,g,p,m,v,b,M,S=r[1].trim(),E=S.length>1,list={type:"list",raw:"",ordered:E,start:E?+S.slice(0,-1):"",loose:!1,items:[]};S=E?"\\d{1,9}\\"+S.slice(-1):"\\"+S,this.options.pedantic&&(S=E?S:"[*+-]");for(var I=new RegExp("^( {0,3}"+S+")((?:[\t ][^\\n]*)?(?:\\n|$))");t&&(M=!1,r=I.exec(t))&&!this.rules.block.hr.test(t);){if(i=r[0],t=t.substring(i.length),p=r[2].split("\n",1)[0],m=t.split("\n",1)[0],this.options.pedantic?(l=2,b=p.trimLeft()):(l=(l=r[2].search(/[^ ]/))>4?1:l,b=p.slice(l),l+=r[1].length),d=!1,!p&&/^ *$/.test(m)&&(i+=m+"\n",t=t.substring(m.length+1),M=!0),!M)for(var D=new RegExp("^ {0,"+Math.min(3,l-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),A=new RegExp("^ {0,"+Math.min(3,l-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),C=new RegExp("^ {0,"+Math.min(3,l-1)+"}(?:```|~~~)"),N=new RegExp("^ {0,"+Math.min(3,l-1)+"}#");t&&(p=v=t.split("\n",1)[0],this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!C.test(p))&&!N.test(p)&&!D.test(p)&&!A.test(t);){if(p.search(/[^ ]/)>=l||!p.trim())b+="\n"+p.slice(l);else{if(d)break;b+="\n"+p}d||p.trim()||(d=!0),i+=v+"\n",t=t.substring(v.length+1)}list.loose||(g?list.loose=!0:/\n *\n *$/.test(i)&&(g=!0)),this.options.gfm&&(a=/^\[[ xX]\] /.exec(b))&&(u="[ ] "!==a[0],b=b.replace(/^\[[ xX]\] +/,"")),list.items.push({type:"list_item",raw:i,task:!!a,checked:u,loose:!1,text:b}),list.raw+=i}list.items[list.items.length-1].raw=i.trimRight(),list.items[list.items.length-1].text=b.trimRight(),list.raw=list.raw.trimRight();var k=list.items.length;for(c=0;c<k;c++){this.lexer.state.top=!1,list.items[c].tokens=this.lexer.blockTokens(list.items[c].text,[]);var O=list.items[c].tokens.filter((function(t){return"space"===t.type})),L=O.every((function(t){for(var r,i=0,a=_createForOfIteratorHelperLoose(t.raw.split(""));!(r=a()).done;){if("\n"===r.value&&(i+=1),i>1)return!0}return!1}));!list.loose&&O.length&&L&&(list.loose=!0,list.items[c].loose=!0)}return list}},r.html=function html(t){var r=this.rules.block.html.exec(t);if(r){var i={type:"html",raw:r[0],pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:r[0]};if(this.options.sanitize){var a=this.options.sanitizer?this.options.sanitizer(r[0]):escape(r[0]);i.type="paragraph",i.text=a,i.tokens=this.lexer.inline(a)}return i}},r.def=function def(t){var r=this.rules.block.def.exec(t);if(r)return r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),{type:"def",tag:r[1].toLowerCase().replace(/\s+/g," "),raw:r[0],href:r[2],title:r[3]}},r.table=function table(t){var r=this.rules.block.table.exec(t);if(r){var i={type:"table",header:splitCells(r[1]).map((function(t){return{text:t}})),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=r[0];var a,u,l,c,d=i.align.length;for(a=0;a<d;a++)/^ *-+: *$/.test(i.align[a])?i.align[a]="right":/^ *:-+: *$/.test(i.align[a])?i.align[a]="center":/^ *:-+ *$/.test(i.align[a])?i.align[a]="left":i.align[a]=null;for(d=i.rows.length,a=0;a<d;a++)i.rows[a]=splitCells(i.rows[a],i.header.length).map((function(t){return{text:t}}));for(d=i.header.length,u=0;u<d;u++)i.header[u].tokens=this.lexer.inline(i.header[u].text);for(d=i.rows.length,u=0;u<d;u++)for(c=i.rows[u],l=0;l<c.length;l++)c[l].tokens=this.lexer.inline(c[l].text);return i}}},r.lheading=function lheading(t){var r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:"="===r[2].charAt(0)?1:2,text:r[1],tokens:this.lexer.inline(r[1])}},r.paragraph=function paragraph(t){var r=this.rules.block.paragraph.exec(t);if(r){var i="\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:i,tokens:this.lexer.inline(i)}}},r.text=function text(t){var r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}},r.escape=function escape$1(t){var r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:escape(r[1])}},r.tag=function tag(t){var r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):escape(r[0]):r[0]}},r.link=function link(t){var r=this.rules.inline.link.exec(t);if(r){var i=r[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;var a=rtrim(i.slice(0,-1),"\\");if((i.length-a.length)%2==0)return}else{var u=function findClosingBracket(t,r){if(-1===t.indexOf(r[1]))return-1;for(var i=t.length,a=0,u=0;u<i;u++)if("\\"===t[u])u++;else if(t[u]===r[0])a++;else if(t[u]===r[1]&&--a<0)return u;return-1}(r[2],"()");if(u>-1){var l=(0===r[0].indexOf("!")?5:4)+r[1].length+u;r[2]=r[2].substring(0,u),r[0]=r[0].substring(0,l).trim(),r[3]=""}}var c=r[2],d="";if(this.options.pedantic){var link=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(c);link&&(c=link[1],d=link[3])}else d=r[3]?r[3].slice(1,-1):"";return c=c.trim(),/^</.test(c)&&(c=this.options.pedantic&&!/>$/.test(i)?c.slice(1):c.slice(1,-1)),outputLink(r,{href:c?c.replace(this.rules.inline._escapes,"$1"):c,title:d?d.replace(this.rules.inline._escapes,"$1"):d},r[0],this.lexer)}},r.reflink=function reflink(t,r){var i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){var a=(i[2]||i[1]).replace(/\s+/g," ");if(!(a=r[a.toLowerCase()])||!a.href){var u=i[0].charAt(0);return{type:"text",raw:u,text:u}}return outputLink(i,a,i[0],this.lexer)}},r.emStrong=function emStrong(t,r,i){void 0===i&&(i="");var a=this.rules.inline.emStrong.lDelim.exec(t);if(a&&(!a[3]||!i.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var u=a[1]||a[2]||"";if(!u||u&&(""===i||this.rules.inline.punctuation.exec(i))){var l,c,d=a[0].length-1,g=d,p=0,m="*"===a[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(m.lastIndex=0,r=r.slice(-1*t.length+d);null!=(a=m.exec(r));)if(l=a[1]||a[2]||a[3]||a[4]||a[5]||a[6])if(c=l.length,a[3]||a[4])g+=c;else if(!((a[5]||a[6])&&d%3)||(d+c)%3){if(!((g-=c)>0)){if(c=Math.min(c,c+g+p),Math.min(d,c)%2){var v=t.slice(1,d+a.index+c);return{type:"em",raw:t.slice(0,d+a.index+c+1),text:v,tokens:this.lexer.inlineTokens(v)}}var b=t.slice(2,d+a.index+c-1);return{type:"strong",raw:t.slice(0,d+a.index+c+1),text:b,tokens:this.lexer.inlineTokens(b)}}}else p+=c}}},r.codespan=function codespan(t){var r=this.rules.inline.code.exec(t);if(r){var i=r[2].replace(/\n/g," "),a=/[^ ]/.test(i),u=/^ /.test(i)&&/ $/.test(i);return a&&u&&(i=i.substring(1,i.length-1)),i=escape(i,!0),{type:"codespan",raw:r[0],text:i}}},r.br=function br(t){var r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}},r.del=function del(t){var r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}},r.autolink=function autolink(t,r){var i,a,u=this.rules.inline.autolink.exec(t);if(u)return a="@"===u[2]?"mailto:"+(i=escape(this.options.mangle?r(u[1]):u[1])):i=escape(u[1]),{type:"link",raw:u[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}},r.url=function url(t,r){var i;if(i=this.rules.inline.url.exec(t)){var a,u;if("@"===i[2])u="mailto:"+(a=escape(this.options.mangle?r(i[0]):i[0]));else{var l;do{l=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(l!==i[0]);a=escape(i[0]),u="www."===i[1]?"http://"+a:a}return{type:"link",raw:i[0],text:a,href:u,tokens:[{type:"text",raw:a,text:a}]}}},r.inlineText=function inlineText(t,r){var i,a=this.rules.inline.text.exec(t);if(a)return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):escape(a[0]):a[0]:escape(this.options.smartypants?r(a[0]):a[0]),{type:"text",raw:a[0],text:i}},Tokenizer}(),D={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:E,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};D.def=edit(D.def).replace("label",D._label).replace("title",D._title).getRegex(),D.bullet=/(?:[*+-]|\d{1,9}[.)])/,D.listItemStart=edit(/^( *)(bull) */).replace("bull",D.bullet).getRegex(),D.list=edit(D.list).replace(/bull/g,D.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+D.def.source+")").getRegex(),D._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",D._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,D.html=edit(D.html,"i").replace("comment",D._comment).replace("tag",D._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),D.paragraph=edit(D._paragraph).replace("hr",D.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",D._tag).getRegex(),D.blockquote=edit(D.blockquote).replace("paragraph",D.paragraph).getRegex(),D.normal=merge({},D),D.gfm=merge({},D.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),D.gfm.table=edit(D.gfm.table).replace("hr",D.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",D._tag).getRegex(),D.gfm.paragraph=edit(D._paragraph).replace("hr",D.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",D.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",D._tag).getRegex(),D.pedantic=merge({},D.normal,{html:edit("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",D._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:E,paragraph:edit(D.normal._paragraph).replace("hr",D.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",D.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var A={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:E,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:E,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function smartypants(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function mangle(t){var r,i,a="",u=t.length;for(r=0;r<u;r++)i=t.charCodeAt(r),Math.random()>.5&&(i="x"+i.toString(16)),a+="&#"+i+";";return a}A._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",A.punctuation=edit(A.punctuation).replace(/punctuation/g,A._punctuation).getRegex(),A.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,A.escapedEmSt=/\\\*|\\_/g,A._comment=edit(D._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),A.emStrong.lDelim=edit(A.emStrong.lDelim).replace(/punct/g,A._punctuation).getRegex(),A.emStrong.rDelimAst=edit(A.emStrong.rDelimAst,"g").replace(/punct/g,A._punctuation).getRegex(),A.emStrong.rDelimUnd=edit(A.emStrong.rDelimUnd,"g").replace(/punct/g,A._punctuation).getRegex(),A._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,A._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,A._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,A.autolink=edit(A.autolink).replace("scheme",A._scheme).replace("email",A._email).getRegex(),A._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,A.tag=edit(A.tag).replace("comment",A._comment).replace("attribute",A._attribute).getRegex(),A._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,A._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,A._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,A.link=edit(A.link).replace("label",A._label).replace("href",A._href).replace("title",A._title).getRegex(),A.reflink=edit(A.reflink).replace("label",A._label).replace("ref",D._label).getRegex(),A.nolink=edit(A.nolink).replace("ref",D._label).getRegex(),A.reflinkSearch=edit(A.reflinkSearch,"g").replace("reflink",A.reflink).replace("nolink",A.nolink).getRegex(),A.normal=merge({},A),A.pedantic=merge({},A.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",A._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",A._label).getRegex()}),A.gfm=merge({},A.normal,{escape:edit(A.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),A.gfm.url=edit(A.gfm.url,"i").replace("email",A.gfm._extended_email).getRegex(),A.breaks=merge({},A.gfm,{br:edit(A.br).replace("{2,}","*").getRegex(),text:edit(A.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var C=function(){function Lexer(r){this.tokens=[],this.tokens.links=Object.create(null),this.options=r||t.defaults,this.options.tokenizer=this.options.tokenizer||new I,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var i={block:D.normal,inline:A.normal};this.options.pedantic?(i.block=D.pedantic,i.inline=A.pedantic):this.options.gfm&&(i.block=D.gfm,this.options.breaks?i.inline=A.breaks:i.inline=A.gfm),this.tokenizer.rules=i}Lexer.lex=function lex(t,r){return new Lexer(r).lex(t)},Lexer.lexInline=function lexInline(t,r){return new Lexer(r).inlineTokens(t)};var r=Lexer.prototype;return r.lex=function lex(t){var r;for(t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens},r.blockTokens=function blockTokens(t,r){var i,a,u,l,c=this;for(void 0===r&&(r=[]),t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,(function(t,r,i){return r+"    ".repeat(i.length)}));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(a){return!!(i=a.call({lexer:c},t,r))&&(t=t.substring(i.raw.length),r.push(i),!0)}))))if(i=this.tokenizer.space(t))t=t.substring(i.raw.length),1===i.raw.length&&r.length>0?r[r.length-1].raw+="\n":r.push(i);else if(i=this.tokenizer.code(t))t=t.substring(i.raw.length),!(a=r[r.length-1])||"paragraph"!==a.type&&"text"!==a.type?r.push(i):(a.raw+="\n"+i.raw,a.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=a.text);else if(i=this.tokenizer.fences(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.heading(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.hr(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.blockquote(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.list(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.html(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.def(t))t=t.substring(i.raw.length),!(a=r[r.length-1])||"paragraph"!==a.type&&"text"!==a.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(a.raw+="\n"+i.raw,a.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=a.text);else if(i=this.tokenizer.table(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.lheading(t))t=t.substring(i.raw.length),r.push(i);else if(u=t,this.options.extensions&&this.options.extensions.startBlock&&function(){var r=1/0,i=t.slice(1),a=void 0;c.options.extensions.startBlock.forEach((function(t){"number"==typeof(a=t.call({lexer:this},i))&&a>=0&&(r=Math.min(r,a))})),r<1/0&&r>=0&&(u=t.substring(0,r+1))}(),this.state.top&&(i=this.tokenizer.paragraph(u)))a=r[r.length-1],l&&"paragraph"===a.type?(a.raw+="\n"+i.raw,a.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):r.push(i),l=u.length!==t.length,t=t.substring(i.raw.length);else if(i=this.tokenizer.text(t))t=t.substring(i.raw.length),(a=r[r.length-1])&&"text"===a.type?(a.raw+="\n"+i.raw,a.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):r.push(i);else if(t){var d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}return this.state.top=!0,r},r.inline=function inline(t,r){return void 0===r&&(r=[]),this.inlineQueue.push({src:t,tokens:r}),r},r.inlineTokens=function inlineTokens(t,r){var i,a,u,l=this;void 0===r&&(r=[]);var c,d,g,p=t;if(this.tokens.links){var m=Object.keys(this.tokens.links);if(m.length>0)for(;null!=(c=this.tokenizer.rules.inline.reflinkSearch.exec(p));)m.includes(c[0].slice(c[0].lastIndexOf("[")+1,-1))&&(p=p.slice(0,c.index)+"["+repeatString("a",c[0].length-2)+"]"+p.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(c=this.tokenizer.rules.inline.blockSkip.exec(p));)p=p.slice(0,c.index)+"["+repeatString("a",c[0].length-2)+"]"+p.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(c=this.tokenizer.rules.inline.escapedEmSt.exec(p));)p=p.slice(0,c.index)+"++"+p.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(d||(g=""),d=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(a){return!!(i=a.call({lexer:l},t,r))&&(t=t.substring(i.raw.length),r.push(i),!0)}))))if(i=this.tokenizer.escape(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.tag(t))t=t.substring(i.raw.length),(a=r[r.length-1])&&"text"===i.type&&"text"===a.type?(a.raw+=i.raw,a.text+=i.text):r.push(i);else if(i=this.tokenizer.link(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(i.raw.length),(a=r[r.length-1])&&"text"===i.type&&"text"===a.type?(a.raw+=i.raw,a.text+=i.text):r.push(i);else if(i=this.tokenizer.emStrong(t,p,g))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.codespan(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.br(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.del(t))t=t.substring(i.raw.length),r.push(i);else if(i=this.tokenizer.autolink(t,mangle))t=t.substring(i.raw.length),r.push(i);else if(this.state.inLink||!(i=this.tokenizer.url(t,mangle))){if(u=t,this.options.extensions&&this.options.extensions.startInline&&function(){var r=1/0,i=t.slice(1),a=void 0;l.options.extensions.startInline.forEach((function(t){"number"==typeof(a=t.call({lexer:this},i))&&a>=0&&(r=Math.min(r,a))})),r<1/0&&r>=0&&(u=t.substring(0,r+1))}(),i=this.tokenizer.inlineText(u,smartypants))t=t.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(g=i.raw.slice(-1)),d=!0,(a=r[r.length-1])&&"text"===a.type?(a.raw+=i.raw,a.text+=i.text):r.push(i);else if(t){var v="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(v);break}throw new Error(v)}}else t=t.substring(i.raw.length),r.push(i);return r},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(Lexer,null,[{key:"rules",get:function get(){return{block:D,inline:A}}}]),Lexer}(),N=function(){function Renderer(r){this.options=r||t.defaults}var r=Renderer.prototype;return r.code=function code(t,r,i){var a=(r||"").match(/\S*/)[0];if(this.options.highlight){var u=this.options.highlight(t,a);null!=u&&u!==t&&(i=!0,t=u)}return t=t.replace(/\n$/,"")+"\n",a?'<pre><code class="'+this.options.langPrefix+escape(a,!0)+'">'+(i?t:escape(t,!0))+"</code></pre>\n":"<pre><code>"+(i?t:escape(t,!0))+"</code></pre>\n"},r.blockquote=function blockquote(t){return"<blockquote>\n"+t+"</blockquote>\n"},r.html=function html(t){return t},r.heading=function heading(t,r,i,a){return this.options.headerIds?"<h"+r+' id="'+(this.options.headerPrefix+a.slug(i))+'">'+t+"</h"+r+">\n":"<h"+r+">"+t+"</h"+r+">\n"},r.hr=function hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.list=function list(t,r,i){var a=r?"ol":"ul";return"<"+a+(r&&1!==i?' start="'+i+'"':"")+">\n"+t+"</"+a+">\n"},r.listitem=function listitem(t){return"<li>"+t+"</li>\n"},r.checkbox=function checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},r.paragraph=function paragraph(t){return"<p>"+t+"</p>\n"},r.table=function table(t,r){return r&&(r="<tbody>"+r+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+r+"</table>\n"},r.tablerow=function tablerow(t){return"<tr>\n"+t+"</tr>\n"},r.tablecell=function tablecell(t,r){var i=r.header?"th":"td";return(r.align?"<"+i+' align="'+r.align+'">':"<"+i+">")+t+"</"+i+">\n"},r.strong=function strong(t){return"<strong>"+t+"</strong>"},r.em=function em(t){return"<em>"+t+"</em>"},r.codespan=function codespan(t){return"<code>"+t+"</code>"},r.br=function br(){return this.options.xhtml?"<br/>":"<br>"},r.del=function del(t){return"<del>"+t+"</del>"},r.link=function link(t,r,i){if(null===(t=cleanUrl(this.options.sanitize,this.options.baseUrl,t)))return i;var a='<a href="'+escape(t)+'"';return r&&(a+=' title="'+r+'"'),a+=">"+i+"</a>"},r.image=function image(t,r,i){if(null===(t=cleanUrl(this.options.sanitize,this.options.baseUrl,t)))return i;var a='<img src="'+t+'" alt="'+i+'"';return r&&(a+=' title="'+r+'"'),a+=this.options.xhtml?"/>":">"},r.text=function text(t){return t},Renderer}(),k=function(){function TextRenderer(){}var t=TextRenderer.prototype;return t.strong=function strong(t){return t},t.em=function em(t){return t},t.codespan=function codespan(t){return t},t.del=function del(t){return t},t.html=function html(t){return t},t.text=function text(t){return t},t.link=function link(t,r,i){return""+i},t.image=function image(t,r,i){return""+i},t.br=function br(){return""},TextRenderer}(),O=function(){function Slugger(){this.seen={}}var t=Slugger.prototype;return t.serialize=function serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function getNextSafeSlug(t,r){var i=t,a=0;if(this.seen.hasOwnProperty(i)){a=this.seen[t];do{i=t+"-"+ ++a}while(this.seen.hasOwnProperty(i))}return r||(this.seen[t]=a,this.seen[i]=0),i},t.slug=function slug(t,r){void 0===r&&(r={});var slug=this.serialize(t);return this.getNextSafeSlug(slug,r.dryrun)},Slugger}(),L=function(){function Parser(r){this.options=r||t.defaults,this.options.renderer=this.options.renderer||new N,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new k,this.slugger=new O}Parser.parse=function parse(t,r){return new Parser(r).parse(t)},Parser.parseInline=function parseInline(t,r){return new Parser(r).parseInline(t)};var r=Parser.prototype;return r.parse=function parse(t,r){void 0===r&&(r=!0);var i,a,u,l,c,d,g,p,m,v,b,M,S,E,I,D,A,C,N,k="",O=t.length;for(i=0;i<O;i++)if(v=t[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[v.type])||!1===(N=this.options.extensions.renderers[v.type].call({parser:this},v))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(v.type))switch(v.type){case"space":continue;case"hr":k+=this.renderer.hr();continue;case"heading":k+=this.renderer.heading(this.parseInline(v.tokens),v.depth,unescape(this.parseInline(v.tokens,this.textRenderer)),this.slugger);continue;case"code":k+=this.renderer.code(v.text,v.lang,v.escaped);continue;case"table":for(p="",g="",l=v.header.length,a=0;a<l;a++)g+=this.renderer.tablecell(this.parseInline(v.header[a].tokens),{header:!0,align:v.align[a]});for(p+=this.renderer.tablerow(g),m="",l=v.rows.length,a=0;a<l;a++){for(g="",c=(d=v.rows[a]).length,u=0;u<c;u++)g+=this.renderer.tablecell(this.parseInline(d[u].tokens),{header:!1,align:v.align[u]});m+=this.renderer.tablerow(g)}k+=this.renderer.table(p,m);continue;case"blockquote":m=this.parse(v.tokens),k+=this.renderer.blockquote(m);continue;case"list":for(b=v.ordered,M=v.start,S=v.loose,l=v.items.length,m="",a=0;a<l;a++)D=(I=v.items[a]).checked,A=I.task,E="",I.task&&(C=this.renderer.checkbox(D),S?I.tokens.length>0&&"paragraph"===I.tokens[0].type?(I.tokens[0].text=C+" "+I.tokens[0].text,I.tokens[0].tokens&&I.tokens[0].tokens.length>0&&"text"===I.tokens[0].tokens[0].type&&(I.tokens[0].tokens[0].text=C+" "+I.tokens[0].tokens[0].text)):I.tokens.unshift({type:"text",text:C}):E+=C),E+=this.parse(I.tokens,S),m+=this.renderer.listitem(E,A,D);k+=this.renderer.list(m,b,M);continue;case"html":k+=this.renderer.html(v.text);continue;case"paragraph":k+=this.renderer.paragraph(this.parseInline(v.tokens));continue;case"text":for(m=v.tokens?this.parseInline(v.tokens):v.text;i+1<O&&"text"===t[i+1].type;)m+="\n"+((v=t[++i]).tokens?this.parseInline(v.tokens):v.text);k+=r?this.renderer.paragraph(m):m;continue;default:var L='Token with "'+v.type+'" type was not found.';if(this.options.silent)return void console.error(L);throw new Error(L)}else k+=N||"";return k},r.parseInline=function parseInline(t,r){r=r||this.renderer;var i,a,u,l="",c=t.length;for(i=0;i<c;i++)if(a=t[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type])||!1===(u=this.options.extensions.renderers[a.type].call({parser:this},a))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))switch(a.type){case"escape":case"text":l+=r.text(a.text);break;case"html":l+=r.html(a.text);break;case"link":l+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break;case"image":l+=r.image(a.href,a.title,a.text);break;case"strong":l+=r.strong(this.parseInline(a.tokens,r));break;case"em":l+=r.em(this.parseInline(a.tokens,r));break;case"codespan":l+=r.codespan(a.text);break;case"br":l+=r.br();break;case"del":l+=r.del(this.parseInline(a.tokens,r));break;default:var d='Token with "'+a.type+'" type was not found.';if(this.options.silent)return void console.error(d);throw new Error(d)}else l+=u||"";return l},Parser}();function marked(t,r,i){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if("function"==typeof r&&(i=r,r=null),checkSanitizeDeprecation(r=merge({},marked.defaults,r||{})),i){var a,u=r.highlight;try{a=C.lex(t,r)}catch(t){return i(t)}var l=function done(t){var l;if(!t)try{r.walkTokens&&marked.walkTokens(a,r.walkTokens),l=L.parse(a,r)}catch(r){t=r}return r.highlight=u,t?i(t):i(null,l)};if(!u||u.length<3)return l();if(delete r.highlight,!a.length)return l();var c=0;return marked.walkTokens(a,(function(t){"code"===t.type&&(c++,setTimeout((function(){u(t.text,t.lang,(function(r,i){if(r)return l(r);null!=i&&i!==t.text&&(t.text=i,t.escaped=!0),0===--c&&l()}))}),0))})),void(0===c&&l())}function onError(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",r.silent)return"<p>An error occurred:</p><pre>"+escape(t.message+"",!0)+"</pre>";throw t}try{var d=C.lex(t,r);if(r.walkTokens){if(r.async)return Promise.all(marked.walkTokens(d,r.walkTokens)).then((function(){return L.parse(d,r)})).catch(onError);marked.walkTokens(d,r.walkTokens)}return L.parse(d,r)}catch(t){onError(t)}}marked.options=marked.setOptions=function(r){return merge(marked.defaults,r),function changeDefaults(r){t.defaults=r}(marked.defaults),marked},marked.getDefaults=getDefaults,marked.defaults=t.defaults,marked.use=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a,u=merge.apply(void 0,[{}].concat(r)),l=marked.defaults.extensions||{renderers:{},childTokens:{}};r.forEach((function(t){if(t.extensions&&(a=!0,t.extensions.forEach((function(t){if(!t.name)throw new Error("extension name required");if(t.renderer){var r=l.renderers?l.renderers[t.name]:null;l.renderers[t.name]=r?function(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];var l=t.renderer.apply(this,a);return!1===l&&(l=r.apply(this,a)),l}:t.renderer}if(t.tokenizer){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");l[t.level]?l[t.level].unshift(t.tokenizer):l[t.level]=[t.tokenizer],t.start&&("block"===t.level?l.startBlock?l.startBlock.push(t.start):l.startBlock=[t.start]:"inline"===t.level&&(l.startInline?l.startInline.push(t.start):l.startInline=[t.start]))}t.childTokens&&(l.childTokens[t.name]=t.childTokens)}))),t.renderer&&function(){var r=marked.defaults.renderer||new N,i=function _loop(i){var a=r[i];r[i]=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var d=t.renderer[i].apply(r,l);return!1===d&&(d=a.apply(r,l)),d}};for(var a in t.renderer)i(a);u.renderer=r}(),t.tokenizer&&function(){var r=marked.defaults.tokenizer||new I,i=function _loop2(i){var a=r[i];r[i]=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var d=t.tokenizer[i].apply(r,l);return!1===d&&(d=a.apply(r,l)),d}};for(var a in t.tokenizer)i(a);u.tokenizer=r}(),t.walkTokens){var r=marked.defaults.walkTokens;u.walkTokens=function(i){var a=[];return a.push(t.walkTokens.call(this,i)),r&&(a=a.concat(r.call(this,i))),a}}a&&(u.extensions=l),marked.setOptions(u)}))},marked.walkTokens=function(t,r){for(var i,a=[],u=function _loop3(){var t=i.value;switch(a=a.concat(r.call(marked,t)),t.type){case"table":for(var u,l=_createForOfIteratorHelperLoose(t.header);!(u=l()).done;){var c=u.value;a=a.concat(marked.walkTokens(c.tokens,r))}for(var d,g=_createForOfIteratorHelperLoose(t.rows);!(d=g()).done;)for(var p,m=_createForOfIteratorHelperLoose(d.value);!(p=m()).done;){var v=p.value;a=a.concat(marked.walkTokens(v.tokens,r))}break;case"list":a=a.concat(marked.walkTokens(t.items,r));break;default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[t.type]?marked.defaults.extensions.childTokens[t.type].forEach((function(i){a=a.concat(marked.walkTokens(t[i],r))})):t.tokens&&(a=a.concat(marked.walkTokens(t.tokens,r)))}},l=_createForOfIteratorHelperLoose(t);!(i=l()).done;)u();return a},marked.parseInline=function(t,r){if(null==t)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");checkSanitizeDeprecation(r=merge({},marked.defaults,r||{}));try{var i=C.lexInline(t,r);return r.walkTokens&&marked.walkTokens(i,r.walkTokens),L.parseInline(i,r)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",r.silent)return"<p>An error occurred:</p><pre>"+escape(t.message+"",!0)+"</pre>";throw t}},marked.Parser=L,marked.parser=L.parse,marked.Renderer=N,marked.TextRenderer=k,marked.Lexer=C,marked.lexer=C.lex,marked.Tokenizer=I,marked.Slugger=O,marked.parse=marked;var R=marked.options,j=marked.setOptions,B=marked.use,U=marked.walkTokens,z=marked.parseInline,Y=marked,G=L.parse,H=C.lex;t.Lexer=C,t.Parser=L,t.Renderer=N,t.Slugger=O,t.TextRenderer=k,t.Tokenizer=I,t.getDefaults=getDefaults,t.lexer=H,t.marked=marked,t.options=R,t.parse=Y,t.parseInline=z,t.parser=G,t.setOptions=j,t.use=B,t.walkTokens=U}(xg);var kg={},wg={},Og={};Object.defineProperty(Og,"__esModule",{value:!0}),Og.colourPalette=void 0;Og.colourPalette={primary:"#00B6E6",secondary:"#EB123F",darkBlue500:"#00202B",red500:"#EB123F",lightBlue500:"#00B6E6",lightBlue200:"#66D3EB",lightBlue100:"#CCF1FA",lightBlue50:"#F1FBFE",lightGrey500:"#EDEDED",white500:"#FFFFFF",mutedBlue500:"#042C39",mutedBlue200:"#9BABB0",mutedGrey500:"#384A50",lightBlue150:"#00B5E6",accountHeadingBackground:"#001117",naturalLight500:"#E8EDF2",verificationFailed:"#F44446",cardOverlayTop:["#1E2023",0],cardOverlayBottom:["#1E2023",100],heroOverlayStart:["#000000",75],heroOverlayEnd:["#000000",0],featuredHeaderOverlay:["#00202B",0],lightBlue500Transparent:["#00B6E6",40],white500Transparent:["#FFFFFF",70],playerOverlayStart:["#000000",80],playerOverlayEnd:["#000000",0],playerProgressBar:["#FFFFFF",50],playerAutoNextCard:["#000000",40],playerSubtitleOverlay:["#000000",70],playerSeekDisplay:["#00202B",60],errorLeftStart:["#00B6E6",25],errorLeftEnd:["#00B6E6",0],errorRightStart:["#EB123F",28],errorRightEnd:["#EB123F",0]};var Lg={};Object.defineProperty(Lg,"__esModule",{value:!0});Lg.default=function number2Hex(t){return Math.round(2.55*t).toString(16)};var Rg=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wg,"__esModule",{value:!0});var jg,Pg=Og,Fg=Rg(Lg),Bg=function bootstrapColours(t){for(var r={},i=Object.keys(t),a=0;a<=i.length-1;a+=1){var u=i[a],l=t[u],c="";if(Array.isArray(l)){var d=l[0],g=l[1];c="0x"+Fg.default(g)+d.substring(1)}else c="0xff"+l.substring(1);r[u]=parseInt(c,16)}return Object.freeze(r)}(Pg.colourPalette),Ug=wg.default=Bg,zg={},Yg={};Object.defineProperty(Yg,"__esModule",{value:!0}),function(t){t[t.h1=64]="h1",t[t.h2=42]="h2",t[t.h3=30]="h3",t[t.h4=28]="h4",t[t.h5=26]="h5",t[t.ctaLabel=28]="ctaLabel",t[t.navLink=32]="navLink",t[t.featuredCopy=32]="featuredCopy",t[t.bodyCopy=28]="bodyCopy",t[t.helperBody=28]="helperBody",t[t.smallCopy=22]="smallCopy",t[t.subtitle=48]="subtitle"}(jg||(jg={})),Yg.default=jg;var Gg,Hg={};Object.defineProperty(Hg,"__esModule",{value:!0}),function(t){t.thin="100",t.extraLight="200",t.light="300",t.regular="400",t.medium="500",t.semiBold="600",t.bold="700",t.extraBold="800"}(Gg||(Gg={})),Hg.default=Gg;var Qg={},Vg=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.helperBody=Qg.subtitle=Qg.smallCopy=Qg.bodyCopy=Qg.featuredCopy=Qg.navLink=Qg.ctaLabel=Qg.h5=Qg.h4=Qg.h3=Qg.h2=Qg.h1=void 0;var Wg=Vg(Yg),$g=Vg(Hg),Kg={fontFamily:"MuseoSansRounded_bold",fontFace:"MuseoSansRounded_bold",fontSize:Wg.default.h1,fontStyle:"normal",fontWeight:$g.default.bold};Qg.h1=Kg;var qg={fontFamily:"MuseoSansRounded_medium",fontFace:"MuseoSansRounded_medium",fontSize:Wg.default.h2,fontStyle:"normal",fontWeight:$g.default.light,lineHeight:63};Qg.h2=qg;var Xg={fontFamily:"MuseoSansRounded_bold",fontFace:"MuseoSansRounded_bold",fontSize:Wg.default.h3,fontStyle:"normal",fontWeight:$g.default.bold};Qg.h3=Xg;var Zg={fontFamily:"MuseoSansRounded_medium",fontFace:"MuseoSansRounded_medium",fontSize:Wg.default.h4,fontStyle:"normal",fontWeight:$g.default.medium};Qg.h4=Zg;var Jg={fontFamily:"MuseoSansRounded_medium",fontFace:"MuseoSansRounded_medium",fontSize:Wg.default.h5,fontStyle:"normal",fontWeight:$g.default.medium,textTransform:"uppercase"};Qg.h5=Jg;var ep={fontFamily:"MuseoSansRounded_bold",fontFace:"MuseoSansRounded_bold",fontSize:Wg.default.ctaLabel,lineHeight:0,fontStyle:"normal",fontWeight:$g.default.bold};Qg.ctaLabel=ep;var tp={fontFamily:"MuseoSansRounded_medium",fontFace:"MuseoSansRounded_medium",fontSize:Wg.default.navLink,fontStyle:"normal",fontWeight:$g.default.regular,textTransform:"uppercase"};Qg.navLink=tp;var rp={fontFamily:"MuseoSansRounded_medium",fontFace:"MuseoSansRounded_medium",fontSize:Wg.default.helperBody,fontStyle:"normal",fontWeight:$g.default.regular};Qg.helperBody=rp;var np={fontFamily:"MuseoSansRounded_medium",fontFace:"MuseoSansRounded_medium",fontSize:Wg.default.featuredCopy,fontStyle:"normal",fontWeight:$g.default.medium,textTransform:"uppercase"};Qg.featuredCopy=np;var ip={fontFamily:"MuseoSansRounded_medium",fontFace:"MuseoSansRounded_medium",fontSize:Wg.default.bodyCopy,fontStyle:"normal",fontWeight:$g.default.medium,textTransform:"uppercase"};Qg.bodyCopy=ip;var op={fontFamily:"MuseoSansRounded_medium",fontFace:"MuseoSansRounded_medium",fontSize:Wg.default.smallCopy,fontStyle:"normal",fontWeight:$g.default.medium,textTransform:"uppercase"};Qg.smallCopy=op;var sp={fontFamily:"MuseoSansRounded_medium",fontFace:"MuseoSansRounded_medium",fontSize:Wg.default.subtitle,fontStyle:"normal",fontWeight:$g.default.medium,lineHeight:54};Qg.subtitle=sp;var lp=_e&&_e.__createBinding||(Object.create?function(t,r,i,a){void 0===a&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function get(){return r[i]}})}:function(t,r,i,a){void 0===a&&(a=i),t[a]=r[i]}),cp=_e&&_e.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),dp=_e&&_e.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&lp(r,t,i);return cp(r,t),r};Object.defineProperty(zg,"__esModule",{value:!0}),zg.TextStyles=zg.FontWeight=zg.FontSize=void 0,zg.FontSize=dp(Yg),zg.FontWeight=dp(Hg),zg.TextStyles=dp(Qg),function(t){var r=_e&&_e.__createBinding||(Object.create?function(t,r,i,a){void 0===a&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function get(){return r[i]}})}:function(t,r,i,a){void 0===a&&(a=i),t[a]=r[i]}),i=_e&&_e.__exportStar||function(t,i){for(var a in t)"default"===a||Object.prototype.hasOwnProperty.call(i,a)||r(i,t,a)},a=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.colours=void 0;var u=a(wg);t.colours=u.default,i(zg,t)}(kg);var fp=_e&&_e.__assign||function(){return fp=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var u in r=arguments[i])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t},fp.apply(this,arguments)};Object.defineProperty(Ng,"__esModule",{value:!0});var hp=xg,gp=kg,pp=function formatText(t){return t.replace(/(\*\*|__)(\w+(?:[\s\S])*)\1/,"<b>$2</b>").replace(/(\*|_)(\w+(?:[\s\S])*)\1/,"<i>$2</i>").replace(/\n|\r|\t|\f|\v/g," ").replace(/[.]./g,". ")},mp=function includesStartTag(t,r){return t[t.length-2].includes("<"+r+">")&&!t[t.length-2].includes("</"+r+">")};Ng.default=function formatEditorialText(t){var r=(new hp.Lexer).lex(t),i=["heading","list","paragraph","blockquote"],a=[],u=144;return r.forEach((function(t,r){var l,c=t,d=c.items,g=c.ordered,p=c.type,m=c.raw,v=t.text,b=r>=0?24:0;if(!v&&!m)return null;if(!i.includes(p))return null;if("heading"===t.type){t.text&&(v=pp(t.text));var M=0;v&&(M=Math.ceil(v.length/110));var S="Heading_"+(r+1),E=function findHeadingStyles(t){var r={};switch(t){case 1:r.typography=gp.TextStyles.h1,r.lineHeight=96;break;case 2:r.typography=gp.TextStyles.h2,r.lineHeight=63;break;case 3:r.typography=gp.TextStyles.h3,r.lineHeight=45;break;default:r.typography=gp.TextStyles.h4,r.lineHeight=28;break;case 5:r.typography=gp.TextStyles.h5,r.lineHeight=28}return r}(t.depth);a.push(((l={})[S]={text:fp(fp({h:E.lineHeight*M+b,text:v,advancedRenderer:!0},null==E?void 0:E.typography),{wordWrapWidth:1690,lineHeight:E.lineHeight})},l)),u+=E.lineHeight*M+b}if("paragraph"===t.type||"blockquote"===t.type){M=0;v&&(M=Math.ceil(v.length/120));var I=function chunkArr(t){var r=!1,i=[];if(t.length<=120)return i.push(t),i;do{var a=t.slice(0,120).lastIndexOf(" ");i.push(t.slice(0,a)),t=t.slice(a).trimStart(),i.length>1&&(mp(i,"b")&&(i[i.length-1]="<b>"+i[i.length-1]),mp(i,"i")&&(i[i.length-1]="<i>"+i[i.length-1])),t.length<120&&(t.includes("</b>")&&(t="<b>"+t),t.includes("</i>")&&(t="<i>"+t),i.push(t),r=!0)}while(!r);return i}(pp(v));I.forEach((function(t,i){var u,l="Paragraph_"+r+"_"+i,c=i!==I.length-1?42:70;a.push(((u={})[l]={text:fp({h:c,text:t,advancedRenderer:!0,wordWrap:!0,wordWrapWidth:1690,lineHeight:42},gp.TextStyles.bodyCopy)},u))})),u+=42*M+b}if("list"===t.type&&g){var D={ListItems:{flex:{direction:"column"}}};d&&(d.forEach((function(t,r){var i=t.raw;v=pp(i);var a="OLItem_"+(r+1);D.ListItems&&(D.ListItems[a]={h:42,text:fp({text:v,wordWrap:!0,wordWrapWidth:1690,lineHeight:42},gp.TextStyles.bodyCopy)})})),D.h=42*d.length+b,u+=42*d.length+b,a.push({OrderedList:D}))}if("list"===t.type&&!t.ordered){var A={ListItems:{flex:{direction:"column"}}};d&&(d.forEach((function(t,r){var i=t.raw.replace("*","•");v=pp(i);var a="ULItem_"+(r+1);A.ListItems&&(A.ListItems[a]={h:42,text:fp({text:v,wordWrap:!0,wordWrapWidth:1690,lineHeight:42},gp.TextStyles.bodyCopy)})})),A.h=42*d.length+b,u+=42*d.length+b,a.push({UnorderedList:A}))}})),{height:u,formattedText:a}};var yp,vp,_p,Tp,bp={},Mp={},Sp="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),Ep=[],Ip={};function handle(t){var r;try{r=function getResult(t,r){var i=function dotGrab$1(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(arguments.length>1?arguments[1]:void 0).split("."),i=t,a=0;a<r.length;a++)i=i[r[a]]||{};return i}(vp,t);t.match(/^[a-zA-Z]+\.on[A-Za-z]+$/)&&(i={event:t,listening:!0});return"function"==typeof i?null==r?i():i(r):i}(t.method,t.params)}catch(r){setTimeout((function(){return _p(JSON.stringify({jsonrpc:"2.0",error:{code:-32602,message:"Invalid params (this is a mock error from the mock transport layer)"},id:t.id}))}))}setTimeout((function(){return _p(JSON.stringify({jsonrpc:"2.0",result:r,id:t.id}))}))}function event(t,r,i){var a=Object.entries(Ip).find((function(i){var a=_slicedToArray(i,2);return a[0],a[1].toLowerCase()===t.toLowerCase()+"."+r.toLowerCase()}));if(a){var u=JSON.stringify({jsonrpc:"2.0",id:a[0],result:i});_p(u)}}Sp.__firebolt&&Sp.__firebolt.testHarness&&(Tp=Sp.__firebolt.testHarness);var Dp={send:function send(t){console.debug("Sending message to transport: "+t);var r=JSON.parse(t);if(Array.isArray(r))r.forEach((function(t){return send(JSON.stringify(t))}));else{var i=_slicedToArray(r.method.split("."),2),a=i[0],u=i[1];Tp&&Tp.onSend&&Tp.onSend(a,u,r.params,r.id),u.match(/^on[A-Z]/)&&(r.params.listen?Ip[r.id]=a.toLowerCase()+"."+u[2].toLowerCase()+u.substr(3):Object.keys(Ip).forEach((function(t){Ip[t]===a.toLowerCase()+"."+u[2].toLowerCase()+u.substr(3)&&delete Ip[t]}))),vp?handle(r):Ep.push(r)}},receive:function receive(t){_p=t,Tp&&"function"==typeof Tp.initialize&&Tp.initialize({emit:event,listen:function listen(){yp.apply(void 0,arguments)}})},event:event},Ap={};var Cp={mock:function mock(t,r,i,a){var u="".concat(t,".").concat(r);if(null==i||0===i.length)return Ap[u]&&null!=Ap[u].value?Ap[u].value:a;var l=Ap[u];return null==l&&(l={subscribers:[]}),Ap[u]=l,l.value=i[0].value,Dp.event(t,r+"Changed",{value:i[0].value}),{}}},Np={closedCaptions:{enabled:!0,styles:{fontFamily:"Monospace sans-serif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle"}},closedCaptionsSettings:function closedCaptionsSettings(){return Cp.mock("accessibility","closedCaptionsSettings",arguments,{enabled:!0,styles:{fontFamily:"Monospace sans-serif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle"}})},voiceGuidance:{enabled:!0,speed:5},voiceGuidanceSettings:function voiceGuidanceSettings(){return Cp.mock("accessibility","voiceGuidanceSettings",arguments,{enabled:!0,speed:5})}},xp={id:function id(){return Cp.mock("account","id",arguments,"123")},uid:function uid(){return Cp.mock("account","uid",arguments,"ee6723b8-7ab3-462c-8d93-dbf61227998e")}},kp={config:{adServerUrl:"http://demo.v.fwmrm.net/ad/p/1",adServerUrlTemplate:"http://demo.v.fwmrm.net/ad/p/1?flag=+sltp+exvt+slcb+emcr+amcb+aeti&prof=12345:caf_allinone_profile &nw=12345&mode=live&vdur=123&caid=a110523018&asnw=372464&csid=gmott_ios_tablet_watch_live_ESPNU&ssnw=372464&vip=198.205.92.1&resp=vmap1&metr=1031&pvrn=12345&vprn=12345&vcid=1X0Ce7L3xRWlTeNhc7br8Q%3D%3D",adNetworkId:"519178",adProfileId:"12345:caf_allinone_profile",adSiteSectionId:"caf_allinone_profile_section",adOptOut:!0,privacyData:"ew0KICAicGR0IjogImdkcDp2MSIsDQogICJ1c19wcml2YWN5IjogIjEtTi0iLA0KICAibG10IjogIjEiIA0KfQ0K",ifaValue:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa:"ewogICJ2YWx1ZSI6ICIwMTIzNDU2Ny04OUFCLUNERUYtR0gwMS0yMzQ1Njc4OUFCQ0QiLAogICJpZmFfdHlwZSI6ICJzc3BpZCIsCiAgImxtdCI6ICIwIgp9Cg==",appName:"FutureToday",appBundleId:"FutureToday.comcast",distributorAppId:"1001",deviceAdAttributes:"ewogICJib0F0dHJpYnV0ZXNGb3JSZXZTaGFyZUlkIjogIjEyMzQiCn0=",coppa:0,authenticationEntity:"60f72475281cfba3852413bd53e957f6"},policy:function policy(){return Cp.mock("advertising","policy",arguments,{skipRestriction:"adsUnwatched",limitAdTracking:!1})},advertisingId:{ifa:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa_type:"idfa",lmt:"0"},deviceAttributes:{},appBundleId:"operator.app"},wp={id:function id(){return Cp.mock("device","id",arguments,"123")},distributor:function distributor(){return Cp.mock("device","distributor",arguments,"Company")},platform:function platform(){return Cp.mock("device","platform",arguments,"WPE")},uid:function uid(){return Cp.mock("device","uid",arguments,"ee6723b8-7ab3-462c-8d93-dbf61227998e")},type:function type(){return Cp.mock("device","type",arguments,"STB")},model:function model(){return Cp.mock("device","model",arguments,"xi6")},sku:function sku(){return Cp.mock("device","sku",arguments,"AX061AEI")},make:function make(){return Cp.mock("device","make",arguments,"Arris")},version:function version(){return Cp.mock("device","version",arguments,{sdk:{major:0,minor:5,patch:0,readable:"Firebolt JS SDK v0.5.0"},os:{major:0,minor:1,patch:0,readable:"Firebolt OS v0.1.0"},debug:""})},hdcp:function hdcp(){return Cp.mock("device","hdcp",arguments,{"hdcp1.4":!0,"hdcp2.2":!0})},hdr:function hdr(){return Cp.mock("device","hdr",arguments,{hdr10:!0,hdr10Plus:!0,dolbyVision:!0,hlg:!0})},audio:function audio(){return Cp.mock("device","audio",arguments,{stereo:!0,"dolbyDigital5.1":!0,"dolbyDigital5.1+":!0,dolbyAtmos:!0})},screenResolution:function screenResolution(){return Cp.mock("device","screenResolution",arguments,[1920,1080])},videoResolution:function videoResolution(){return Cp.mock("device","videoResolution",arguments,[1920,1080])},name:function name(){return Cp.mock("device","name",arguments,"Living Room")},network:function network(){return Cp.mock("device","network",arguments,{state:"connected",type:"wifi"})}},Op={policy:function policy(){return Cp.mock("discovery","policy",arguments,{enableRecommendations:!0,shareWatchHistory:!0,rememberWatchedPrograms:!0})},entityInfo:!0,purchasedContent:!0,watched:!0,watchNext:!0,entitlements:!0,launch:!0,signIn:!0,signOut:!0},Lp={state:"inactive",previous:"initializing"},Rp={state:"foreground",previous:"inactive"},jp={state:"unloading",previous:"inactive"},Pp=function emit(t){Dp.event("Lifecycle",t.state,t)},Fp=!(!Sp||!Sp.__firebolt)&&!!Sp.__firebolt.automation,Bp={ready:function ready(){Lp.previous="initializing",setTimeout((function(){return Pp(Lp)}),Fp?1:500),Rp.previous="inactive",setTimeout((function(){return Pp(Rp)}),Fp?2:1e3)},close:function close(t){var r=t.reason;if("remoteButton"===r)Lp.previous="foreground",setTimeout((function(){return Pp(Lp)}),Fp?1:500);else{if(!["userExit","error"].includes(r))throw"Invalid close reason";Lp.previous="foreground",jp.previous="inactive",setTimeout((function(){return Pp(Lp)}),Fp?1:500),setTimeout((function(){return Pp(jp)}),Fp?2:1e3)}},finished:function finished(){Sp.location&&(Sp.location.href="about:blank")}},Up={locality:"Philadelphia",postalCode:"19103",countryCode:"US",language:function language(){return Cp.mock("localization","language",arguments,"en")},locale:"en-US",latlon:[39.9549,75.1699],additionalInfo:{}},zp={protocols:{"dial1.7":!0},device:"device-id",friendlyName:function friendlyName(){return Cp.mock("secondscreen","friendlyName",arguments,"Living Room")}},Yp={localization:Up,device:wp,accessibility:Np},Gp=function(){function Queue(){_classCallCheck(this,Queue),this._callback=null,this._queue=[]}return _createClass(Queue,[{key:"send",value:function send(t){this._queue.push(t)}},{key:"receive",value:function receive(t){this._callback=t}},{key:"flush",value:function flush(t){t.receive(this._callback),this._queue.forEach((function(r){return t.send(r)}))}}]),Queue}(),Hp={},Qp={},Vp=function dotGrab(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=r.split("."),a=0;a<i.length;a++)t=t[i[a]]=void 0!==t[i[a]]?t[i[a]]:{};return"object"==typeof t?Object.keys(t).length?t:void 0:t},Wp={get:function get(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=Vp(Hp[t],r);return void 0!==a?a:i},has:function has(t,r){return!!this.get(t,r)},set:function set(t,r){Hp.user[t]=r,function publish(t,r){Qp[t]&&Qp[t].forEach((function(t){return t(r)}))}(t,r)},subscribe:function subscribe(t,r){Qp[t]=Qp[t]||[],Qp[t].push(r)},unsubscribe:function unsubscribe(t,r){if(r){var i=Qp[t]&&Qp[t].findIndex((function(t){return t===r}));i>-1&&Qp[t].splice(i,1)}else t in Qp&&(Qp[t]=[])},clearSubscribers:function clearSubscribers(){var t,r=_createForOfIteratorHelper(Object.getOwnPropertyNames(Qp));try{for(r.s();!(t=r.n()).done;){var i=t.value;delete Qp[i]}}catch(t){r.e(t)}finally{r.f()}},setLogLevel:function setLogLevel(t){Hp.platform.logLevel=t},getLogLevel:function getLogLevel(){return Hp.platform.logLevel}},$p=function(){function LegacyTransport(t){_classCallCheck(this,LegacyTransport),this.bridge=t}return _createClass(LegacyTransport,[{key:"send",value:function send(t){this.bridge.JSMessageChanged(t,(function(){}))}},{key:"receive",value:function receive(t){window.$badger=window.$badger||{};var r=window.$badger.callback?window.$badger.callback.bind(window.$badger):null,i=window.$badger.event?window.$badger.event.bind(window.$badger):null;window.$badger.callback=function(i,a,u){u.jsonrpc?t(JSON.stringify(u)):r&&r(i,a,u)},window.$badger.event=function(r,a){a.jsonrpc?t(JSON.stringify(a)):i&&i(r,a)}}}],[{key:"isLegacy",value:function isLegacy(t){return LegacyTransport.isXREProxy(t)||void 0===t.send&&t.JSMessageChanged}},{key:"isXREProxy",value:function isXREProxy(t){return void 0!==t.proxyObjectTest}}]),LegacyTransport}(),Kp=function(){function WebsocketTransport(t){_classCallCheck(this,WebsocketTransport),this._endpoint=t,this._ws=null,this._connected=!1,this._queue=[],this._callbacks=[]}return _createClass(WebsocketTransport,[{key:"send",value:function send(t){this._connect(),this._connected?this._ws.send(t):this._queue.length<100&&this._queue.push(t)}},{key:"receive",value:function receive(t){t&&(this._connect(),this._callbacks.push(t))}},{key:"_notifyCallbacks",value:function _notifyCallbacks(t){for(var r=this,i=function _loop(i){setTimeout((function(){return r._callbacks[i](t)}),1)},a=0;a<this._callbacks.length;a++)i(a)}},{key:"_connect",value:function _connect(){var t=this;this._ws||(this._ws=new WebSocket(this._endpoint,["jsonrpc"]),this._ws.addEventListener("message",(function(r){t._notifyCallbacks(r.data)})),this._ws.addEventListener("error",(function(t){})),this._ws.addEventListener("close",(function(r){t._ws=null,t._connected=!1})),this._ws.addEventListener("open",(function(r){t._connected=!0;for(var i=0;i<t._queue.length;i++)t._ws.send(t._queue[i]);t._queue=[]})))}}]),WebsocketTransport}(),qp=null,Xp=function(){function Transport(){_classCallCheck(this,Transport),this._promises=[],this._transport=null,this._id=1,this._eventEmitters=[],this._eventMap={},this._queue=new Gp,this._deprecated={},this.isMock=!1}return _createClass(Transport,[{key:"_endpoint",value:function _endpoint(){return Sp.__firebolt&&Sp.__firebolt.endpoint?Sp.__firebolt.endpoint:null}},{key:"constructTransportLayer",value:function constructTransportLayer(){var t,r=this,i=this._endpoint();return i&&(i.startsWith("ws://")||i.startsWith("wss://"))?(t=new Kp(i)).receive(this.receiveHandler.bind(this)):void 0!==Sp.ServiceManager&&Sp.ServiceManager&&Sp.ServiceManager.version?(t=this._queue,Sp.ServiceManager.getServiceForJavaScript("com.comcast.BridgeObject_1",(function(i){t=$p.isLegacy(i)?new $p(i):i,r.setTransportLayer(t)}))):(this.isMock=!0,(t=Dp).receive(this.receiveHandler.bind(this))),t}},{key:"setTransportLayer",value:function setTransportLayer(t){this._transport=t,this._queue.flush(t)}},{key:"_send",value:function _send(t,r,i){if(Array.isArray(t)&&!r&&!i)return this._batch(t);var a=this._processRequest(t,r,i),u=a.promise,l=a.json;a.id;var c=JSON.stringify(l);return"DEBUG"===Wp.getLogLevel()&&console.debug("Sending message to transport: "+c),this._transport.send(c),u}},{key:"_batch",value:function _batch(t){var r=this,i=[],a=[];t.forEach((function(t){var u=t.module,l=t.method,c=t.params,d=r._processRequest(u,l,c);i.push({promise:d.promise,id:d.id}),a.push(d.json)}));var u=JSON.stringify(a);return"DEBUG"===Wp.getLogLevel()&&console.debug("Sending message to transport: "+u),this._transport.send(u),i}},{key:"_processRequest",value:function _processRequest(t,r,i){var a={promise:this._addPromiseToQueue(t,r,i),json:this._createRequestJSON(t,r,i),id:this._id};return this._id++,a}},{key:"_createRequestJSON",value:function _createRequestJSON(t,r,i){return{jsonrpc:"2.0",method:t+"."+r,params:i,id:this._id}}},{key:"_addPromiseToQueue",value:function _addPromiseToQueue(t,r,i){var a=this;return new Promise((function(u,l){a._promises[a._id]={},a._promises[a._id].promise=a,a._promises[a._id].resolve=u,a._promises[a._id].reject=l;var c=a._deprecated[t.toLowerCase()+"."+r.toLowerCase()];c&&console.warn("WARNING: ".concat(t,".").concat(r,"() is deprecated. ")+c.alternative),r.match(/^on[A-Z]/)&&(i.listen?a._eventMap[a._id]=t.toLowerCase()+"."+r[2].toLowerCase()+r.substr(3):Object.keys(a._eventMap).forEach((function(i){a._eventMap[i]===t.toLowerCase()+"."+r[2].toLowerCase()+r.substr(3)&&delete a._eventMap[i]})))}))}},{key:"receiveHandler",value:function receiveHandler(t){"DEBUG"===Wp.getLogLevel()&&console.debug("Received message from transport: "+t);var r=JSON.parse(t),i=this._promises[r.id];if(i&&(r.error?i.reject(r.error):i.resolve(r.result),delete this._promises[r.id]),this._eventMap[r.id]&&!function isEventSuccess(t){return t&&"string"==typeof t.event&&"boolean"==typeof t.listening}(r.result)){var a=this._eventMap[r.id];a&&this._eventEmitters.forEach((function(t){t(a.split(".")[0],a.split(".")[1],r.result)}))}}},{key:"init",value:function init(){!function initSettings(t,r){Hp.app=t,Hp.platform=_objectSpread2({logLevel:"WARN"},r),Hp.user={}}({},{log:!0}),this._queue.receive(this.receiveHandler.bind(this)),Sp.__firebolt&&(!0===Sp.__firebolt.mockTransportLayer?(this.isMock=!0,this.setTransportLayer(Dp)):Sp.__firebolt.getTransportLayer&&this.setTransportLayer(Sp.__firebolt.getTransportLayer())),null==this._transport&&(this._transport=this.constructTransportLayer())}}],[{key:"addEventEmitter",value:function addEventEmitter(t){Transport.get()._eventEmitters.push(t)}},{key:"registerDeprecatedMethod",value:function registerDeprecatedMethod(t,r,i){Transport.get()._deprecated[t.toLowerCase()+"."+r.toLowerCase()]={alternative:i||""}}},{key:"send",value:function send(t,r,i){return Transport.get()._send(t,r,i)}},{key:"getEventMap",value:function getEventMap(){return Transport.get()._eventMap}},{key:"get",value:function get(){return Sp.__firebolt.transport?Sp.__firebolt.transport:qp}}]),Transport}();if(Sp.__firebolt=Sp.__firebolt||{},null==Sp.__firebolt.transport&&null==qp){var Zp=new Xp;Zp.init(),Zp.isMock?qp=Zp:(Sp.__firebolt=Sp.__firebolt||{},Sp.__firebolt.transport=Zp),Sp.__firebolt.setTransportLayer=Zp.setTransportLayer.bind(Zp)}var Jp=0,tm={},rm={},nm=[],im={},am=!1,om=function emit(t,r,i){um(tm[t+".*"],[r,i]),um(tm[t+"."+r],[i])},sm=function registerEvents(t,r){im[t.toLowerCase()]=r.concat()},um=function callCallbacks(t,r){t&&Object.keys(t).forEach((function(i){var a=t[i];nm.indexOf(parseInt(i))>=0&&(nm.splice(nm.indexOf(parseInt(i)),1),delete t[i]),a.apply(null,r)}))},lm=function doListen(t,r,i,a){if("function"!=typeof i)return Promise.reject("No valid callback function provided.");if("*"===t)return Promise.reject("No valid module name provided");var u,l,c="*"===r?im[t]:[r],d=[],g=t+"."+r;Jp++,tm[g]=tm[g]||{},tm[g][""+Jp]=i,a&&nm.push(Jp),c.forEach((function(r){rm[t+"."+r]||(d.push(Xp.send(t,"on"+r[0].toUpperCase()+r.substr(1),{listen:!0})),rm[t+"."+r]=!0)}));var p=new Promise((function(t,r){u=t,l=r}));return d.length?Promise.all(d).then((function(t){u(Jp)})).catch((function(t){"*"===r?u(Jp):l(t)})):u(Jp),p},cm=function getListenArgs(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=r.pop(),u=r[0].toLowerCase()||"*",l=r[1]||"*";return[u,l,a]},dm=function listen(){fm();var t=cm.apply(void 0,arguments),r=_slicedToArray(t,3),i=r[0],a=r[1],u=r[2];return lm(i,a,u,!1)},fm=function init(){am||(Xp.addEventEmitter(om),function setMockListener(t){yp=t}(dm),am=!0)},hm={listen:dm,once:function once(){var t=cm.apply(void 0,arguments),r=_slicedToArray(t,3),i=r[0],a=r[1],u=r[2];return lm(i,a,u,!0)},clear:function clear(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("number"==typeof t){var i=t.toString();Object.keys(tm).every((function(t){return!tm[t][i]||(delete tm[t][i],0===Object.keys(tm[t]).length&&delete tm[t],!1)}))}else t||r?r?delete tm[t+"."+r]:Object.keys(tm).forEach((function(r){0===r.indexOf(t.toLowerCase())&&delete tm[r]})):Object.keys(tm).forEach((function(t){delete tm[t]}))},broadcast:function broadcast(t,r){om("app",t,r)}};var gm={prop:function prop(t,r,i,a,u){if(0===i.length)return Xp.send(t,r);if(1===i.length&&"function"==typeof i[0]){if(a)throw new Error("Cannot subscribe to an immutable property");return hm.listen(t,r+"Changed",i[0])}if(a)throw new Error("Cannot set a value to an immutable property");if(u)throw new Error("Cannot set a value to a readonly property");return Xp.send(t,"set"+r[0].toUpperCase()+r.substring(1),{value:i[0]})}};sm("Accessibility",Object.values(["closedCaptionsSettingsChanged","voiceGuidanceSettingsChanged"])),Xp.registerDeprecatedMethod("Accessibility","closedCaptions","Use Accessibility.closedCaptionsSettings() instead."),Xp.registerDeprecatedMethod("Accessibility","voiceGuidance","Use Accessibility.voiceGuidanceSettings() instead.");var pm={events:{closedCaptionsSettingsChanged:"closedCaptionsSettingsChanged",voiceGuidanceSettingsChanged:"voiceGuidanceSettingsChanged"},closedCaptions:function closedCaptions(){return Xp.send("accessibility","closedCaptions",{})},closedCaptionsSettings:function closedCaptionsSettings(){return gm.prop("accessibility","closedCaptionsSettings",arguments,!1,!0)},voiceGuidance:function voiceGuidance(){return Xp.send("accessibility","voiceGuidance",{})},voiceGuidanceSettings:function voiceGuidanceSettings$1(){return gm.prop("accessibility","voiceGuidanceSettings",arguments,!1,!0)},listen:function listen$6(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.listen.apply(hm,["accessibility"].concat(r))},once:function once$6(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.once.apply(hm,["accessibility"].concat(r))},clear:function clear$6(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.clear.apply(hm,["accessibility"].concat(r))}};var mm={id:function id$1(){return gm.prop("account","id",arguments,!0,!0)},uid:function uid$1(){return gm.prop("account","uid",arguments,!0,!0)}};sm("Advertising",Object.values(["policyChanged"]));var ym={events:{policyChanged:"policyChanged"},SkipRestriction:{NONE:"none",ADS_UNWATCHED:"adsUnwatched",ADS_ALL:"adsAll",ALL:"all"},config:function config$2(t){return Xp.send("advertising","config",{options:t})},policy:function policy$1(){return gm.prop("advertising","policy",arguments,!1,!0)},advertisingId:function advertisingId(){return Xp.send("advertising","advertisingId",{})},deviceAttributes:function deviceAttributes(){return Xp.send("advertising","deviceAttributes",{})},appBundleId:function appBundleId(){return Xp.send("advertising","appBundleId",{})},listen:function listen$5(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.listen.apply(hm,["advertising"].concat(r))},once:function once$5(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.once.apply(hm,["advertising"].concat(r))},clear:function clear$5(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.clear.apply(hm,["advertising"].concat(r))}};var vm={TokenType:{PLATFORM:"platform",DEVICE:"device",DISTRIBUTOR:"distributor"},token:function token(t,r){return Xp.send("authentication","token",{type:t,options:r})}};sm("Device",Object.values(["deviceNameChanged","hdcpChanged","hdrChanged","audioChanged","screenResolutionChanged","videoResolutionChanged","nameChanged","networkChanged"])),Xp.registerDeprecatedMethod("Device","onDeviceNameChanged","Use Device.name() instead.");var _m={events:{deviceNameChanged:"deviceNameChanged",hdcpChanged:"hdcpChanged",hdrChanged:"hdrChanged",audioChanged:"audioChanged",screenResolutionChanged:"screenResolutionChanged",videoResolutionChanged:"videoResolutionChanged",nameChanged:"nameChanged",networkChanged:"networkChanged"},NetworkType:{WIFI:"wifi",ETHERNET:"ethernet",HYBRID:"hybrid"},NetworkState:{CONNECTED:"connected",DISCONNECTED:"disconnected"},AudioProfile:{STEREO:"stereo",DOLBY_DIGITAL_5_1:"dolbyDigital5.1",DOLBY_DIGITAL_7_1:"dolbyDigital7.1",DOLBY_DIGITAL_5_1_PLUS:"dolbyDigital5.1+",DOLBY_DIGITAL_7_1_PLUS:"dolbyDigital7.1+",DOLBY_ATMOS:"dolbyAtmos"},version:function version(){return new Promise((function(t,r){Xp.send("device","version").then((function(r){(r=r||{}).sdk=r.sdk||{},r.sdk.major=parseInt("0"),r.sdk.minor=parseInt("7"),r.sdk.patch=parseInt("0"),r.sdk.readable="The Firebolt JS SDK",t(r)})).catch((function(t){r(t)}))}))},id:function id(){return gm.prop("device","id",arguments,!0,!0)},distributor:function distributor(){return gm.prop("device","distributor",arguments,!0,!0)},platform:function platform(){return gm.prop("device","platform",arguments,!0,!0)},uid:function uid(){return gm.prop("device","uid",arguments,!0,!0)},type:function type$2(){return gm.prop("device","type",arguments,!0,!0)},model:function model(){return gm.prop("device","model",arguments,!0,!0)},sku:function sku(){return gm.prop("device","sku",arguments,!0,!0)},make:function make(){return gm.prop("device","make",arguments,!0,!0)},hdcp:function hdcp(){return gm.prop("device","hdcp",arguments,!1,!0)},hdr:function hdr(){return gm.prop("device","hdr",arguments,!1,!0)},audio:function audio(){return gm.prop("device","audio",arguments,!1,!0)},screenResolution:function screenResolution(){return gm.prop("device","screenResolution",arguments,!1,!0)},videoResolution:function videoResolution(){return gm.prop("device","videoResolution",arguments,!1,!0)},name:function name(){return gm.prop("device","name",arguments,!1,!0)},network:function network(){return gm.prop("device","network",arguments,!1,!0)},listen:function listen$4(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.listen.apply(hm,["device"].concat(r))},once:function once$4(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.once.apply(hm,["device"].concat(r))},clear:function clear$4(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.clear.apply(hm,["device"].concat(r))}};var Tm={ErrorType:{NETWORK:"network",MEDIA:"media",RESTRICTION:"restriction",ENTITLEMENT:"entitlement",OTHER:"other"},startContent:function startContent(t){return Xp.send("metrics","startContent",{entityId:t})},stopContent:function stopContent(t){return Xp.send("metrics","stopContent",{entityId:t})},page:function page(t){return Xp.send("metrics","page",{pageId:t})},action:function action(t,r,i){return Xp.send("metrics","action",{category:t,type:r,parameters:i})},error:function error$1(t,r,i,a,u){return Xp.send("metrics","error",{type:t,code:r,description:i,visible:a,parameters:u})},mediaLoadStart:function mediaLoadStart(t){return Xp.send("metrics","mediaLoadStart",{entityId:t})},mediaPlay:function mediaPlay(t){return Xp.send("metrics","mediaPlay",{entityId:t})},mediaPlaying:function mediaPlaying(t){return Xp.send("metrics","mediaPlaying",{entityId:t})},mediaPause:function mediaPause(t){return Xp.send("metrics","mediaPause",{entityId:t})},mediaWaiting:function mediaWaiting(t){return Xp.send("metrics","mediaWaiting",{entityId:t})},mediaProgress:function mediaProgress(t,r){return Xp.send("metrics","mediaProgress",{entityId:t,progress:r})},mediaSeeking:function mediaSeeking(t,r){return Xp.send("metrics","mediaSeeking",{entityId:t,target:r})},mediaSeeked:function mediaSeeked(t,r){return Xp.send("metrics","mediaSeeked",{entityId:t,position:r})},mediaRateChange:function mediaRateChange(t,r){return Xp.send("metrics","mediaRateChange",{entityId:t,rate:r})},mediaRenditionChange:function mediaRenditionChange(t,r,i,a,u){return Xp.send("metrics","mediaRenditionChange",{entityId:t,bitrate:r,width:i,height:a,profile:u})},mediaEnded:function mediaEnded(t){return Xp.send("metrics","mediaEnded",{entityId:t})}};sm("Discovery",Object.values(["navigateTo","policyChanged"]));var bm=!1;var Mm=!1;var Sm={events:{navigateTo:"navigateTo",policyChanged:"policyChanged"},policy:function policy(){return gm.prop("discovery","policy",arguments,!1,!0)},entityInfo:function entityInfo(t){if(1===arguments.length&&"function"==typeof arguments[0]){if(bm)return Promise.reject("Cannot register more than one entityInfo handler.");var r=arguments[0];return bm=!0,hm.listen("discovery","pullEntityInfo",(function(t){if("boolean"!=typeof t)try{r(t.parameters).then((function(r){var i={correlationId:t.correlationId,result:r};Xp.send("discovery","entityInfo",i).catch((function(t){var r="string"==typeof t?t:t.message||"Unknown Error";console.error("Failed to send entityInfo pull response through Transport Layer: ".concat(r))}))})).catch((function(t){var r="string"==typeof t?t:t.message||"Unknown Error";console.error("App 'entityInfo' callback failed: ".concat(r))}))}catch(t){var i="string"==typeof t?t:t.message||"Unknown Error";console.error("App 'entityInfo' callback failed: ".concat(i))}}))}return Xp.send("discovery","entityInfo",{correlationId:null,result:t})},purchasedContent:function purchasedContent(t){if(1===arguments.length&&"function"==typeof arguments[0]){if(Mm)return Promise.reject("Cannot register more than one purchasedContent handler.");var r=arguments[0];return Mm=!0,hm.listen("discovery","pullPurchasedContent",(function(t){if("boolean"!=typeof t)try{r(t.parameters).then((function(r){var i={correlationId:t.correlationId,result:r};Xp.send("discovery","purchasedContent",i).catch((function(t){var r="string"==typeof t?t:t.message||"Unknown Error";console.error("Failed to send purchasedContent pull response through Transport Layer: ".concat(r))}))})).catch((function(t){var r="string"==typeof t?t:t.message||"Unknown Error";console.error("App 'purchasedContent' callback failed: ".concat(r))}))}catch(t){var i="string"==typeof t?t:t.message||"Unknown Error";console.error("App 'purchasedContent' callback failed: ".concat(i))}}))}return Xp.send("discovery","purchasedContent",{correlationId:null,result:t})},watched:function watched(t,r,i,a){return 1===arguments.length&&Array.isArray(arguments[0])?Xp.send("discovery","watched",arguments[0]):Xp.send("discovery","watched",{entityId:t,progress:r,completed:i,watchedOn:a})},watchNext:function watchNext(t,r,i,a){return Xp.send("discovery","watchNext",{title:t,identifiers:r,expires:i,images:a})},entitlements:function entitlements(t){return Xp.send("discovery","entitlements",{entitlements:t})},launch:function launch(t,r){return Xp.send("discovery","launch",{appId:t,intent:r})},signIn:function signIn(t){var r=Xp.send("discovery","signIn",{entitlements:t});return r.then((function(t){setTimeout((function(t){!function signIn$1(){return Xp.send("metrics","signIn",{})}()}))})),r},signOut:function signOut(){var t=Xp.send("discovery","signOut",{});return t.then((function(t){setTimeout((function(t){!function signOut$1(){return Xp.send("metrics","signOut",{})}()}))})),t},listen:function listen$3(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.listen.apply(hm,["discovery"].concat(r))},once:function once$3(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.once.apply(hm,["discovery"].concat(r))},clear:function clear$3(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.clear.apply(hm,["discovery"].concat(r))}};var Em={EmailUsage:{SIGN_IN:"signIn",SIGN_UP:"signUp"},email:function email(t,r){return Xp.send("keyboard","email",{type:t,message:r})},password:function password(t){return Xp.send("keyboard","password",{message:t})},standard:function standard(t){return Xp.send("keyboard","standard",{message:t})}};sm("Lifecycle",Object.values(["inactive","foreground","background","suspended","unloading"]));var Im={_current:"initializing",get current(){return this._current}};hm.listen("Lifecycle",(function(t,r){Im._current=t}));var Dm={events:{inactive:"inactive",foreground:"foreground",background:"background",suspended:"suspended",unloading:"unloading"},LifecycleState:{INITIALIZING:"initializing",INACTIVE:"inactive",BACKGROUND:"background",FOREGROUND:"foreground",SUSPENDED:"suspended",UNLOADING:"unloading"},CloseReason:{REMOTE_BUTTON:"remoteButton",USER_EXIT:"userExit",ERROR:"error"},state:function state$1(){return Im.current},finished:function finished(){if("unloading"===Im.current)return Xp.send("lifecycle","finished");throw"Cannot call finished() except when in the unloading transition"},ready:function ready(){var t=Xp.send("lifecycle","ready",{});return t.then((function(t){setTimeout((function(t){!function ready$1(){return Xp.send("metrics","ready",{})}()}))})),t},close:function close(t){return Xp.send("lifecycle","close",{reason:t})},listen:function listen$2(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.listen.apply(hm,["lifecycle"].concat(r))},once:function once$2(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.once.apply(hm,["lifecycle"].concat(r))},clear:function clear$2(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.clear.apply(hm,["lifecycle"].concat(r))}};sm("Localization",Object.values(["languageChanged"]));var Am={events:{languageChanged:"languageChanged"},locality:function locality(){return Xp.send("localization","locality",{})},postalCode:function postalCode(){return Xp.send("localization","postalCode",{})},countryCode:function countryCode(){return Xp.send("localization","countryCode",{})},language:function language(){return gm.prop("localization","language",arguments,!1,!0)},locale:function locale(){return Xp.send("localization","locale",{})},latlon:function latlon(){return Xp.send("localization","latlon",{})},additionalInfo:function additionalInfo(){return Xp.send("localization","additionalInfo",{})},listen:function listen$1(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.listen.apply(hm,["localization"].concat(r))},once:function once$1(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.once.apply(hm,["localization"].concat(r))},clear:function clear$1(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.clear.apply(hm,["localization"].concat(r))}};var Cm={initialization:function initialization(){return Xp.send("parameters","initialization",{})}};var Nm={approveContentRating:function approveContentRating(){return Xp.send("profile","approveContentRating",{})},approvePurchase:function approvePurchase(){return Xp.send("profile","approvePurchase",{})},flags:function flags(){return Xp.send("profile","flags",{})}};sm("SecondScreen",Object.values(["launchRequest","closeRequest","friendlyNameChanged"]));var xm={events:{launchRequest:"launchRequest",closeRequest:"closeRequest",friendlyNameChanged:"friendlyNameChanged"},protocols:function protocols(){return Xp.send("secondscreen","protocols",{})},device:function device(t){return Xp.send("secondscreen","device",{type:t})},friendlyName:function friendlyName(){return gm.prop("secondscreen","friendlyName",arguments,!1,!0)},listen:function listen(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.listen.apply(hm,["secondscreen"].concat(r))},once:function once(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.once.apply(hm,["secondscreen"].concat(r))},clear:function clear(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return hm.clear.apply(hm,["secondscreen"].concat(r))}},km={Localization:Am,Device:_m,Accessibility:pm},wm=function prepLog(t,r){return["%c"+((r=Array.from(r)).length>1&&"string"==typeof r[0]?r.shift():t),"background-color: "+{Info:"green",Debug:"gray",Warn:"orange",Error:"red"}[t]+"; color: white; padding: 2px 4px; border-radius: 2px",r]},Om={info:function info(){Wp.get("platform","log")&&console.log.apply(console,wm("Info",arguments))},debug:function debug(){Wp.get("platform","log")&&console.debug.apply(console,wm("Debug",arguments))},error:function error(){Wp.get("platform","log")&&console.error.apply(console,wm("Error",arguments))},warn:function warn(){Wp.get("platform","log")&&console.warn.apply(console,wm("Warn",arguments))}};!function setMockResponses(t){vp=t,Ep.forEach((function(t){return handle(t)})),Ep.length=0}({accessibility:Np,account:xp,advertising:kp,authentication:{token:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",expires:"2022-04-23T18:25:43.511Z",type:"platform"}},device:wp,discovery:Op,keyboard:{email:"user@domain.com",password:"abc123",standard:"Living Room"},lifecycle:Bp,localization:Up,metrics:{ready:!0,signIn:!0,signOut:!0,startContent:!0,stopContent:!0,page:!0,action:!0,error:!0,mediaLoadStart:!0,mediaPlay:!0,mediaPlaying:!0,mediaPause:!0,mediaWaiting:!0,mediaProgress:!0,mediaSeeking:!0,mediaSeeked:!0,mediaRateChange:!0,mediaRenditionChange:!0,mediaEnded:!0},parameters:{initialization:{lmt:0,us_privacy:"1-Y-",discovery:{navigateTo:{action:"entity",data:{entityId:"abc",entityType:"program",programType:"movie"},context:{source:"voice"}}}}},profile:{approveContentRating:!1,approvePurchase:!1,flags:{userExperience:"1000"}},secondscreen:zp,platform:Yp});var Lm=getAugmentedNamespace(Object.freeze({__proto__:null,Accessibility:pm,Account:mm,Advertising:ym,Authentication:vm,Device:_m,Discovery:Sm,Keyboard:Em,Lifecycle:Dm,Localization:Am,Metrics:Tm,Parameters:Cm,Profile:Nm,SecondScreen:xm,Platform:km,Log:Om,Events:hm,Settings:Wp}));!function(t){var r=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},i=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ComcastDevice=void 0;var a,u=Lm;(a=t.ComcastDevice||(t.ComcastDevice={})).xclass="XClass",a.xfinity="Xfinity";t.default=function getComcastDeviceType(){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,u.Device.distributor()];case 1:return"xglobal"===t.sent()?[2,"XClass"]:[2,"Xfinity"]}}))}))}}(Mp);var Rm={};!function(t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceType=t.DeviceType=void 0,function(t){t.fetch="fetch",t.comcast="comcast",t.default="tv"}(r=t.DeviceType||(t.DeviceType={}));t.getDeviceType=function getDeviceType(){return r.fetch}}(Rm),function(t){var r=_e&&_e.__assign||function(){return r=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var u in r=arguments[i])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t},r.apply(this,arguments)},i=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t._errorStream$=void 0;var a=ga,u=Ai,l=i(Mp),c=Ig,d=Rm;t._errorStream$=new a.BehaviorSubject({buttons:[c.ErrorButton.Back],description:"Oops looks like something went wrong, \nplease try again later",errorCode:"",type:"other"});var g=a.from(new Promise((function(t){var r=d.getDeviceType();return r!==d.DeviceType.comcast?t(r):t(l.default())}))),p=t._errorStream$.pipe(u.combineLatestWith(g),u.map((function(t){var i=t[0],a=t[1],u={};return(null==i?void 0:i.platformOverrides)&&a in(null==i?void 0:i.platformOverrides)&&(u=i.platformOverrides[a]),r(r({},i),u)})));t.default=p}(bp);var jm={},Pm=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},Fm=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},Bm=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jm,"__esModule",{value:!0});var Um,zm=Bm(Mp),Ym=Rm,Gm=Math.round(1e12*Math.random()).toString();jm.default=function getDeviceDetails(){return Pm(void 0,void 0,void 0,(function(){var t,r,i,a,u;return Fm(this,(function(l){switch(l.label){case 0:return Um?[2,Promise.resolve(Um)]:"fetch"===Ym.getDeviceType()&&window.AVPlayer?(t=new window.AVPlayer,r=t.Ag_system_getSerialNum(),i=t.Ag_system_getModeNo(),Um={serialNo:r,deviceType:"Fetch",deviceName:"FetchTV",modelNo:i,brand:"Fetch"},[2,Promise.resolve(Um)]):[3,3];case 1:return a=l.sent(),[4,zm.default()];case 2:return u=l.sent(),Um={serialNo:a,deviceType:u,deviceName:"ComcastRDK",modelNo:"ComcastRDK",brand:"Comcast"},[2,Promise.resolve(Um)];case 3:return Um={serialNo:Gm,deviceType:"",deviceName:"",modelNo:"",brand:""},[2,Promise.resolve(Um)]}}))}))};var Hm={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getRocketDeviceType=t.RocketDeviceType=void 0;var r,i=Rm;!function(t){t.fetch="tv_fetch",t.comcast="tv_comcast",t.default="tv_generic"}(r=t.RocketDeviceType||(t.RocketDeviceType={}));t.getRocketDeviceType=function getRocketDeviceType(){switch(i.getDeviceType()){case i.DeviceType.fetch:return r.fetch;case i.DeviceType.comcast:return r.comcast;default:return r.default}}}(Hm);var Qm={};Object.defineProperty(Qm,"__esModule",{value:!0});Qm.default=function getIndexFromTime(t,r,i){if(!t.length)return null;var a=t[i],u=t[i+1];if(r>=(null==a?void 0:a.from)&&r<(null==a?void 0:a.to))return i;if(r>(null==a?void 0:a.to)&&u&&r<(null==u?void 0:u.from))return null;if(r>(null==u?void 0:u.from)&&r<(null==u?void 0:u.to))return i+1;var l=function findCurrentIndex(t,r){for(var i=0,a=t.length-1;i<=a;){var u=Math.floor((a+i)/2),l=t[u];if(l.from<=r&&r<l.to)return u;l.to<r?i=u+1:a=u-1}return-1}(t,r);return-1===l?null:l};var Vm={};Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.setItemImageType=Vm.getItemImageType=void 0;var Wm=_g,$m={};Vm.getItemImageType=function getItemImageType(t){return Wm.pathOr("tile",[t],$m)};Vm.setItemImageType=function setItemImageType(t){$m=t};var Km={};Object.defineProperty(Km,"__esModule",{value:!0});var qm=new ga.BehaviorSubject(!1);Km.default=qm;var Xm={};Object.defineProperty(Xm,"__esModule",{value:!0});Xm.default=function loadScript(t){return new Promise((function(r,i){var a=document.createElement("script");a.onload=function(){r(!0)},a.onerror=function(){i(new Error("Failed to load script: "+t))},a.async=!0,a.src=t,document.body.appendChild(a)}))};var Zm={};!function(t){var r=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.mapColorWithOpacity=t.percentToHex=t.getMappedFontName=void 0;var i,a,u=kg,l=r(Yg),c=r(Sg);function mapFontSize(t){switch(t){case i.small:case i.smallXClass:return l.default.featuredCopy;case i.medium:case i.mediumXClass:return l.default.h2;case i.large:case i.largeXClass:return l.default.subtitle;case i.veryLargeXClass:case i.veryLarge:return l.default.h1;default:return l.default.subtitle}}function mapOpacity(t){switch(t){case a.transparent:case a.transparentXClass:return 0;case a.translucent:case a.translucentXClass:return 50;case a.solid:case a.solidXClass:return 100;default:return t}}!function(t){t[t.small=11]="small",t[t.medium=20]="medium",t[t.large=29]="large",t[t.veryLarge=42]="veryLarge",t[t.smallXClass=.5]="smallXClass",t[t.mediumXClass=1]="mediumXClass",t[t.largeXClass=1.5]="largeXClass",t[t.veryLargeXClass=2]="veryLargeXClass"}(i||(i={})),function(t){t[t.transparent=0]="transparent",t[t.translucent=50]="translucent",t[t.solid=100]="solid",t.transparentXClass="transparent",t[t.translucentXClass=.5]="translucentXClass",t[t.solidXClass=1]="solidXClass"}(a||(a={}));var d={casual:"Averia",cursive:"Farsan",monospaced_sanserif:"Roboto",monospaced_serif:"Noto",proportional_sanserif:"RobotoCondensed",proportional_serif:"RobotoSlab",smallcaps:"Alegreya"};t.getMappedFontName=function getMappedFontName(t){return d[t]||"Roboto"};t.percentToHex=function percentToHex(t){return Math.ceil(t/100*255).toString(16)};t.mapColorWithOpacity=function mapColorWithOpacity(r,i){var a="0x"+t.percentToHex(i)+c.default(r);return Number(a)},t.default=function mapClosedCaptionsSettingsToLightning(r){if(!(null==r?void 0:r.enabled))return{enabled:!1,styles:null};var i=r.styles,a=i.fontFamily,l=void 0===a?u.TextStyles.subtitle.fontFace:a,d=i.fontSize,g=void 0===d?u.TextStyles.subtitle.fontSize:d,p=i.textAlign,m=void 0===p?"center":p,v=i.fontOpacity,b=void 0===v?100:v,M=i.fontColor,S=void 0===M?"0xffffffff":M,E=i.backgroundOpacity,I=void 0===E?50:E,D=i.backgroundColor,A=void 0===D?"0xff000000":D,C=i.fontEdge,N=void 0===C?"none":C,k=i.fontEdgeColor,O=void 0===k?"#ffffff":k,L=i.textAlignVertical,R=void 0===L?"middle":L,j=t.mapColorWithOpacity(S,mapOpacity(b)),B=t.mapColorWithOpacity(A,mapOpacity(I)),U=["left","center","right"].includes(m)?m:"center",z=["top","middle","bottom"].includes(R)?R:"middle",Y="0xff"+c.default(O);return{enabled:!0,styles:{textColor:j,textAlign:U,verticalAlign:z,fontFace:l,fontSize:mapFontSize(g),highlight:!0,highlightPaddingLeft:16,highlightPaddingRight:16,highlightColor:B,shadow:"none"!==N,shadowColor:Number(Y),shadowBlur:4}}}}(Zm);var Jm={},ey={},ty={},ry={};Object.defineProperty(ry,"__esModule",{value:!0}),ry.isEntryFromPartial=void 0;ry.isEntryFromPartial=function isEntryFromPartial(t){return"string"==typeof t.id&&"number"==typeof t.from&&"number"==typeof t.to&&"string"==typeof t.text};var ny={};Object.defineProperty(ny,"__esModule",{value:!0}),ny.isBlank=void 0;ny.isBlank=function isBlank(t){return!t||/^\s*$/.test(t)},Object.defineProperty(ty,"__esModule",{value:!0}),ty.srtParser=void 0;var iy=ry,ay=ny,oy="ID",sy="TIME_LINE",uy="TEXT",ly="MULTI_LINE_TEXT",cy="FIN_ENTRY",dy="FINISH",fy=function timestampToMillisecond(t){var r,i,a,u,l,c=t.split(":");return 2===c.length?(u=(r=_slicedToArray(c,2))[0],l=r[1]):(a=(i=_slicedToArray(c,3))[0],u=i[1],l=i[2]),parseInt(l.replace(",",""),10)+60*parseInt(u,10)*1e3+60*(a?parseInt(a,10):0)*60*1e3},hy=function SrtMachine(){var t;return _defineProperty(t={start:function start(t){for(var r=oy,i={tokens:t.split(/\n/),pos:0,result:[],current:{}};r!==dy;){var a=this[r](i);i=a.params,r=a.next}return i.result}},oy,(function(t){var r=t.tokens,i=t.pos,a=t.current;if(r.length<=i)return{next:dy,params:t};if(ay.isBlank(r[i]))return{next:oy,params:_objectSpread2(_objectSpread2({},t),{},{pos:i+1})};var u=r[i].includes("--\x3e");return a.id=u?"":r[i],{next:sy,params:_objectSpread2(_objectSpread2({},t),{},{current:a,tokens:r,pos:u?i:i+1})}})),_defineProperty(t,sy,(function(t){var r=t.tokens,i=t.pos,a=t.current,u=_slicedToArray(r[i].split("--\x3e"),2),l=u[0],c=u[1];return a.from=fy(l),a.to=fy(c),{next:uy,params:_objectSpread2(_objectSpread2({},t),{},{current:a,pos:i+1})}})),_defineProperty(t,uy,(function(t){var r=t.tokens,i=t.pos,a=t.current;return r.length<=i?{next:dy,params:t}:(a.text=r[i],{next:ly,params:_objectSpread2(_objectSpread2({},t),{},{current:a,pos:i+1})})})),_defineProperty(t,ly,(function(t){var r=t.tokens,i=t.pos,a=t.current;return r.length<=i?{next:dy,params:t}:ay.isBlank(r[i])?{next:cy,params:t}:(a.text="".concat(a.text,"\n").concat(r[i]),{next:ly,params:_objectSpread2(_objectSpread2({},t),{},{current:a,pos:i+1})})})),_defineProperty(t,cy,(function(t){var r=t.pos,i=t.current,a=t.result;if(!iy.isEntryFromPartial(i))throw new Error("Parsing error current not complete ".concat(JSON.stringify(i)));return a.push(i),{next:oy,params:_objectSpread2(_objectSpread2({},t),{},{current:{},pos:r+1})}})),_defineProperty(t,dy,(function(t){return{next:dy,params:t}})),t};ty.srtParser=function srtParser(t){return{entries:hy().start(t)}};var gy={};Object.defineProperty(gy,"__esModule",{value:!0}),gy.vttParser=void 0;var py=ry,my=ny,yy="HEADER",vy="ID",_y="TIME_LINE",Ty="ID_OR_NOTE_OR_STYLE",by="STYLE",My="NOTE",Sy="TEXT",Ey="MULTI_LINE_TEXT",Iy="FIN_ENTRY",Dy="FINISH",Ay=function timestampToMillisecond(t){var r,i,a,u,l,c=t.split(":");return 2===c.length?(u=(r=_slicedToArray(c,2))[0],l=r[1]):(a=(i=_slicedToArray(c,3))[0],u=i[1],l=i[2]),parseInt(l.replace(".",""),10)+60*parseInt(u,10)*1e3+60*(a?parseInt(a,10):0)*60*1e3},Cy=function VttMachine(){var t;return _defineProperty(t={start:function start(t){for(var r=yy,i={tokens:t.split(/\n/),pos:0,result:[],current:{}};r!==Dy;){var a=this[r](i);i=a.params,r=a.next}return i.result}},yy,(function(t){return{next:Ty,params:_objectSpread2(_objectSpread2({},t),{},{pos:t.pos+1})}})),_defineProperty(t,Ty,(function(t){var r=t.tokens,i=t.pos;return r.length<=i?{next:Dy,params:t}:my.isBlank(r[i])?{next:Ty,params:_objectSpread2(_objectSpread2({},t),{},{pos:i+1})}:r[i].toUpperCase().includes("NOTE")?{next:My,params:t}:r[i].toUpperCase().includes("STYLE")?{next:by,params:t}:{next:vy,params:t}})),_defineProperty(t,by,(function(t){var r=t.tokens,i=t.pos;return my.isBlank(r[i])?{next:Ty,params:_objectSpread2(_objectSpread2({},t),{},{pos:i+1})}:{next:by,params:_objectSpread2(_objectSpread2({},t),{},{pos:i+1})}})),_defineProperty(t,My,(function(t){var r=t.tokens,i=t.pos;return my.isBlank(r[i])?{next:Ty,params:_objectSpread2(_objectSpread2({},t),{},{pos:i+1})}:{next:by,params:_objectSpread2(_objectSpread2({},t),{},{pos:i+1})}})),_defineProperty(t,vy,(function(t){var r=t.tokens,i=t.pos,a=t.current;if(r.length<=i)return{next:Dy,params:t};if(my.isBlank(r[i]))return{next:vy,params:_objectSpread2(_objectSpread2({},t),{},{pos:i+1})};var u=r[i].includes("--\x3e");return a.id=u?"":r[i],{next:_y,params:_objectSpread2(_objectSpread2({},t),{},{current:a,tokens:r,pos:u?i:i+1})}})),_defineProperty(t,_y,(function(t){var r=t.tokens,i=t.pos,a=t.current,u=_slicedToArray(r[i].split("--\x3e"),2),l=u[0],c=u[1];return a.from=Ay(l),a.to=Ay(c),{next:Sy,params:_objectSpread2(_objectSpread2({},t),{},{current:a,pos:i+1})}})),_defineProperty(t,Sy,(function(t){var r=t.tokens,i=t.pos,a=t.current;return r.length<=i?{next:Dy,params:t}:(a.text=r[i],{next:Ey,params:_objectSpread2(_objectSpread2({},t),{},{current:a,pos:i+1})})})),_defineProperty(t,Ey,(function(t){var r=t.tokens,i=t.pos,a=t.current;return r.length<=i?{next:Dy,params:t}:my.isBlank(r[i])?{next:Iy,params:t}:(a.text="".concat(a.text,"\n").concat(r[i]),{next:Ey,params:_objectSpread2(_objectSpread2({},t),{},{current:a,pos:i+1})})})),_defineProperty(t,Iy,(function(t){var r=t.pos,i=t.current,a=t.result;if(!py.isEntryFromPartial(i))throw new Error("Parsing error current not complete ".concat(JSON.stringify(i)));return a.push(i),{next:Ty,params:_objectSpread2(_objectSpread2({},t),{},{current:{},pos:r+1})}})),_defineProperty(t,Dy,(function(t){return{next:Dy,params:t}})),t};gy.vttParser=function vttParser(t){return{entries:Cy().start(t)}},Object.defineProperty(ey,"__esModule",{value:!0}),ey.parse=void 0;var Ny=ty,xy=gy;ey.parse=function parse(t){return t.startsWith("WEBVTT")?xy.vttParser(t):Ny.srtParser(t)},function(t){var r=_e&&_e.__assign||function(){return r=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var u in r=arguments[i])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t},r.apply(this,arguments)},i=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},a=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},u=_e&&_e.__rest||function(t,r){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&r.indexOf(a)<0&&(i[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(a=Object.getOwnPropertySymbols(t);u<a.length;u++)r.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(t,a[u])&&(i[a[u]]=t[a[u]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.parseVTT=void 0;var l=ey;t.parseVTT=function parseVTT(t){return i(void 0,void 0,void 0,(function(){var i,c,d;return a(this,(function(a){switch(a.label){case 0:return[4,fetch(t)];case 1:return 200!==(i=a.sent()).status?[3,3]:[4,i.text()];case 2:return c=a.sent(),(d=l.parse(c)).entries=d.entries.map((function(t){var i=t.from,a=t.to,l=u(t,["from","to"]);return r({from:i/1e3,to:a/1e3},l)})),[2,d];case 3:return[2,void 0]}}))}))},t.default=t.parseVTT}(Jm);var ky={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pronounceTTS=t.seasonEpisode=t.passwordPhonetics=t.urlPhonetics=void 0;t.urlPhonetics=function urlPhonetics(t){return t.replace(/\./g," dot ").replace(/-/g," dash ").replace(/:/g," colon ").replace(/[/]/g," slash ").replace(/#/g," hash ").replace(/_/g," underscore ")};var r={" ":"space",",":"comma",".":"dot","-":"dash",":":"colon","/":"slash","#":"number sign",_:"underscore","!":"exclamation mark","@":"at sign",$:"dollar sign",";":"semi colon","%":"percentage sign","(":"open parenthesis",")":"close parenthesis","=":"equals","+":"plus","\\":"back slash",'"':"quotation mark","'":"apostrophe","*":"asterisk","[":"open bracket","]":"close bracket","{":"open curly bracket","}":"close curly bracket"};t.passwordPhonetics=function passwordPhonetics(t){return t.split("").map((function(t){return t in r?r[t]:t})).join(",")};t.seasonEpisode=function seasonEpisode(t){return t.replace(/(S){1}(?=\d)/g,"Season ").replace(/(E){1}(?=\d)/g,"Episode ")};t.pronounceTTS=function pronounceTTS(r,i){if(""===r)return null;r&&r.includes("\n")&&r.split("\n").join("");var a=/([(http(s)?):/(www.)?a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b[-a-zA-Z0-9@:%_+.~#?&//=]*)/g;return r&&(a.test(r)&&(r=r.replace(a,t.urlPhonetics)),"password"===i&&(r=t.passwordPhonetics(r))),r&&/[SE][0-9]/g.test(r)&&(r=t.seasonEpisode(r)),(null==r?void 0:r.includes("xclass"))&&(r=r.replace("xclass","x class")),r&&/(<([^>]+)>)/g.test(r)&&(r=null==r?void 0:r.replace(/(<([^>]+)>)/g,"")),r},t.default=t.pronounceTTS}(ky);var wy={},Oy=function(){function localCookie(t){return _classCallCheck(this,localCookie),t=t||{},this.forceCookies=t.forceCookies||!1,!0===this._checkIfLocalStorageWorks()&&!0!==t.forceCookies?{getItem:this._getItemLocalStorage,setItem:this._setItemLocalStorage,removeItem:this._removeItemLocalStorage,clear:this._clearLocalStorage,keys:this._getLocalStorageKeys}:{getItem:this._getItemCookie,setItem:this._setItemCookie,removeItem:this._removeItemCookie,clear:this._clearCookies,keys:this._getCookieKeys}}return _createClass(localCookie,[{key:"_checkIfLocalStorageWorks",value:function _checkIfLocalStorageWorks(){if("undefined"==typeof localStorage)return!1;try{return localStorage.setItem("feature_test","yes"),"yes"===localStorage.getItem("feature_test")&&(localStorage.removeItem("feature_test"),!0)}catch(t){return!1}}},{key:"_getItemLocalStorage",value:function _getItemLocalStorage(t){return window.localStorage.getItem(t)}},{key:"_setItemLocalStorage",value:function _setItemLocalStorage(t,r){return window.localStorage.setItem(t,r)}},{key:"_removeItemLocalStorage",value:function _removeItemLocalStorage(t){return window.localStorage.removeItem(t)}},{key:"_clearLocalStorage",value:function _clearLocalStorage(){return window.localStorage.clear()}},{key:"_getLocalStorageKeys",value:function _getLocalStorageKeys(){return Object.keys(window.localStorage)}},{key:"_getItemCookie",value:function _getItemCookie(t){var r=document.cookie.match(RegExp("(?:^|;\\s*)"+function(t){return t.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")}(t)+"=([^;]*)"));return r&&""===r[1]&&(r[1]=null),r?r[1]:null}},{key:"_setItemCookie",value:function _setItemCookie(t,r){var i=new Date,a=new Date(i.getTime()+15768e7);document.cookie="".concat(t,"=").concat(r,"; expires=").concat(a.toUTCString(),";")}},{key:"_removeItemCookie",value:function _removeItemCookie(t){document.cookie="".concat(t,"=;Max-Age=-99999999;")}},{key:"_clearCookies",value:function _clearCookies(){document.cookie.split(";").forEach((function(t){document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=Max-Age=-99999999")}))}},{key:"_getCookieKeys",value:function _getCookieKeys(){return document.cookie.split(";").map((function(t){return t.split("=")[0]}))}}]),localCookie}(),Ly=getAugmentedNamespace(Object.freeze({__proto__:null,default:Oy})),Ry={},jy={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sendEvent=t.events$=t.PlayerActions=t.PageActions=t.AppActions=void 0;var r,i,a=ga;(r=t.AppActions||(t.AppActions={})).INIT="app:init",r.EXIT="app:exit",r.FOREGROUND="app:foreground",r.BACKGROUND="app:background",r.INACTIVE="app:inactive",(t.PageActions||(t.PageActions={})).LOADED="page:loaded",(i=t.PlayerActions||(t.PlayerActions={})).INIT="player:init",i.MEDIA_START="player:media_start",i.PAUSE="player:pause",i.PLAY="player:play",i.BUFFER="player:buffer",i.FAST_FORWARD="player:ff",i.REWIND="player:rw",i.SEEK_START="player:seek_start",i.STOP="player:stop",i.ENDED="player:ended",t.events$=new a.Subject;t.sendEvent=function sendEvent(r){return t.events$.next(r)}}(jy);var Py={};!function(t){var r=_e&&_e.__assign||function(){return r=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var u in r=arguments[i])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.user$=t.getUser=t.sendUserEvent=t.userEvents$=t.UserActions=void 0;var i,a=ga,u=Ai;(i=t.UserActions||(t.UserActions={})).DETAILS="user:details",i.LOGIN="user:login",i.LOGOUT="user:logout",t.userEvents$=new a.Subject;var l;t.sendUserEvent=function sendUserEvent(r,i){return void 0===i&&(i={subscriptionCode:void 0,userId:void 0,entitlements:void 0,address:{}}),t.userEvents$.next({type:"user",action:r,data:i})};t.getUser=function getUser(){return l},t.user$=t.userEvents$.pipe(u.filter((function(t){return!!t.data})),u.map((function(t){return t.data})),u.scan((function(t,i){return r(r({},t),i)}),{}),u.tap((function(t){l=t})),u.distinctUntilChanged())}(Py),function(t){var r=_e&&_e.__createBinding||(Object.create?function(t,r,i,a){void 0===a&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function get(){return r[i]}})}:function(t,r,i,a){void 0===a&&(a=i),t[a]=r[i]}),i=_e&&_e.__exportStar||function(t,i){for(var a in t)"default"===a||Object.prototype.hasOwnProperty.call(i,a)||r(i,t,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(jy,t),i(Py,t)}(Ry);var Fy=_e&&_e.__assign||function(){return Fy=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var u in r=arguments[i])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t},Fy.apply(this,arguments)},By=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wy,"__esModule",{value:!0}),wy.recordExistsForCustomId=wy.addPlayRecordForCustomId=wy.bootstrapPlayRecords=void 0;var Uy=By(Ly),zy=_g,Yy=Ry,Gy="thinkanalytics::playRecords",Hy=new Uy.default,Qy={},Vy=function getPlayRecordsByUserId(t){return Qy[t]||{}};function storePlayRecords(){Hy.setItem(Gy,JSON.stringify(Qy))}wy.bootstrapPlayRecords=function bootstrapPlayRecords(t){var r=Hy.getItem(Gy),i=r?JSON.parse(r):{},a=new Date,u=zy.pathOr(30,["general","customFields","taExpiryDays"],t),l={};Object.entries(i).forEach((function(t){var r=t[0],i=t[1],c={};Object.entries(i).forEach((function(t){var r=t[0],i=t[1];a.getTime()-i<864e5*u&&(c[r]=i)})),Object.keys(c).length>0&&(l[r]=c)})),Qy=l,storePlayRecords()},wy.addPlayRecordForCustomId=function addPlayRecordForCustomId(t){var r=(Yy.getUser()||{}).userId,i=void 0===r?"":r,a=Fy({},Vy(i)),u=(new Date).getTime();a[t]=u,function setPlayRecordsByUserId(t,r){Qy[t]=r}(i,a),storePlayRecords()},wy.recordExistsForCustomId=function recordExistsForCustomId(t){var r=(Yy.getUser()||{}).userId,i=Vy(void 0===r?"":r);return Boolean(i[t])};var Wy,$y={};Object.defineProperty($y,"__esModule",{value:!0});$y.default=function reformatImageSrc(t,r){var i=t,a=function getPrecision(){return Wy||(Wy=window.innerHeight/1080)}();if(i=r.format?i.replace(/Format='(jpg|png)'*/,"Format='"+r.format+"'"):i.replace(/Format='(jpg|png)'*/,"Format='jpg'"),r.h){var u=Math.ceil(r.h*a);i=i.replace(/&Height=([0-9])*/,"&Height="+u)}else i=i.replace(/&Height=([0-9])*/,"");if(r.w){var l=Math.ceil(r.w*a);i=i.replace(/&Width=([0-9])*/,"&Width="+l)}else i=i.replace(/&Width=([0-9])*/,"");return r.railFormat&&(i+="&ResizeAction=%27fill%27&HorizontalAlignment=%27center%27&VerticalAlignment=%27top%27"),i};var Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});var qy={allowZeroHour:!0,leadingZeroes:{hours:!1,minutes:!0,seconds:!0}};Ky.default=function secondsToTime(t,r){void 0===r&&(r=qy);var i=Math.floor(t%60),a=Math.floor(t/60%60),u=Math.floor(t/3600%24);return u=u<10&&r.leadingZeroes.hours?"0"+u:String(u),a=a<10&&r.leadingZeroes.minutes?"0"+a:String(a),i=i<10&&r.leadingZeroes.seconds?"0"+i:String(i),r.allowZeroHour||0!==parseInt(u,10)?u+":"+a+":"+i:a+":"+i};var Xy,Zy={},Jy=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},ev=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}};Object.defineProperty(Zy,"__esModule",{value:!0});Zy.default=function supports4k(){return Jy(void 0,void 0,void 0,(function(){var t,r,i;return ev(this,(function(a){switch(a.label){case 0:return void 0!==Xy?[2,Xy]:[3,2];case 1:return t=a.sent(),r=t[0],i=t[1],[2,Xy=3840===r&&2160===i];case 2:return window.fetchHardwareAdapter?[2,Xy=window.fetchHardwareAdapter.is4KAvailable()]:[2,!1]}}))}))},function(t){var r=_e&&_e.__createBinding||(Object.create?function(t,r,i,a){void 0===a&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function get(){return r[i]}})}:function(t,r,i,a){void 0===a&&(a=i),t[a]=r[i]}),i=_e&&_e.__exportStar||function(t,i){for(var a in t)"default"===a||Object.prototype.hasOwnProperty.call(i,a)||r(i,t,a)},a=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.supports4k=t.secondsToTime=t.reformatImageSrc=t.pronounceTTS=t.parseVTT=t.getMappedFontName=t.mapClosedCaptionsSettingsToLightning=t.loadScript=t.loadingSpinnerVisible$=t.getIndexFromTime=t.getDeviceDetails=t.getComcastDeviceType=t._errorStream$=t.errorStream$=t.formatEditorialText=t.convertColourToHex=void 0;var u=Sg;Object.defineProperty(t,"convertColourToHex",{enumerable:!0,get:function get(){return a(u).default}}),i(Eg,t);var l=Ng;Object.defineProperty(t,"formatEditorialText",{enumerable:!0,get:function get(){return a(l).default}});var c=bp;Object.defineProperty(t,"errorStream$",{enumerable:!0,get:function get(){return a(c).default}}),Object.defineProperty(t,"_errorStream$",{enumerable:!0,get:function get(){return c._errorStream$}});var d=Mp;Object.defineProperty(t,"getComcastDeviceType",{enumerable:!0,get:function get(){return a(d).default}});var g=jm;Object.defineProperty(t,"getDeviceDetails",{enumerable:!0,get:function get(){return a(g).default}}),i(Rm,t),i(Hm,t);var p=Qm;Object.defineProperty(t,"getIndexFromTime",{enumerable:!0,get:function get(){return a(p).default}}),i(Vm,t);var m=Km;Object.defineProperty(t,"loadingSpinnerVisible$",{enumerable:!0,get:function get(){return a(m).default}});var v=Xm;Object.defineProperty(t,"loadScript",{enumerable:!0,get:function get(){return a(v).default}});var b=Zm;Object.defineProperty(t,"mapClosedCaptionsSettingsToLightning",{enumerable:!0,get:function get(){return a(b).default}}),Object.defineProperty(t,"getMappedFontName",{enumerable:!0,get:function get(){return b.getMappedFontName}});var M=Jm;Object.defineProperty(t,"parseVTT",{enumerable:!0,get:function get(){return a(M).default}});var S=ky;Object.defineProperty(t,"pronounceTTS",{enumerable:!0,get:function get(){return a(S).default}}),i(wy,t);var E=$y;Object.defineProperty(t,"reformatImageSrc",{enumerable:!0,get:function get(){return a(E).default}});var I=Ky;Object.defineProperty(t,"secondsToTime",{enumerable:!0,get:function get(){return a(I).default}});var D=Zy;Object.defineProperty(t,"supports4k",{enumerable:!0,get:function get(){return a(D).default}})}(Mg);var tv=_e&&_e.__assign||function(){return tv=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var u in r=arguments[i])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t},tv.apply(this,arguments)};Object.defineProperty(Tg,"__esModule",{value:!0});var rv=Ms,nv=bg,iv=ji,av=Mg,ov=av.getDeviceType()===av.DeviceType.comcast?nv.apiKeyComcast:nv.apiKeyFetch;Tg.default=function baseFetch(t,r,i){var a;void 0===i&&(i={method:"GET"});var u=""+nv.baseUrl+t,l=new Headers({"Content-Type":"application/json"}),c=rv.getAuthToken().token;c&&l.set("Authorization","Bearer "+c);var d={method:i.method,headers:l},g={channelPartnerID:"BRITBOX"+iv.getRegion(),apiKey:ov};return i.body&&(g=tv(tv({},g),i.body)),d.body=JSON.stringify(((a={})[r]=g,a)),fetch(u,d).then((function(t){if(t.ok)return t.json();throw Error("0C-A"+t.status)}))};var sv={};!function(t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCodes=void 0,(r=t.ErrorCodes||(t.ErrorCodes={})).AuthenticationFailed="111111111",r.AuthorizationHeaderMissing="eV2192",r.DeviceIdNull="ev2219",r.DeviceNotFound="eV1733",r.InvalidRefreshToken="eV2767",r.MissingRequiredParameter="20003",r.SerialNumberEmpty="eV1082",r.ExistingCustomerUsername="eV4014",r.InvalidEmail="eV1058",r.InvalidPassword="eV4049",r.WrongCredentials="eV2134"}(sv);var uv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Es,"__esModule",{value:!0});var lv=_g,cv=uv(Tg),dv=sv,fv=lv.pathEq(["failureMessage","errorCode"],dv.ErrorCodes.AuthenticationFailed);Es.default=function getAccountDetail(){return cv.default("/getAccountDetail","GetAccountDetailRequestMessage",{method:"POST"}).then((function(t){var r=t.GetAccountDetailResponseMessage;if("0"===r.responseCode&&fv(r))throw Error("0C-A401");return r}))};var hv={},gv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hv,"__esModule",{value:!0});var pv=_g,mv=gv(Tg),yv=sv,vv=pv.pathEq(["failureMessage","errorCode"],yv.ErrorCodes.AuthenticationFailed);hv.default=function getAccountDetail(){return mv.default("/getActiveSubscriptions","GetActiveSubscriptionsRequestMessage",{method:"POST"}).then((function(t){var r=t.GetActiveSubscriptionsResponseMessage;if("0"===r.responseCode&&vv(r))throw Error("0C-A401");if(0===r.AccountServiceMessage.length)throw Error("0C-D001");return r}))};var _v={},Tv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_v,"__esModule",{value:!0});var bv=Tv(Tg);_v.default=function getParentalControlDetails(){return bv.default("/getParentalControlDetails","GetParentalControlDetailsRequestMessage",{method:"POST"}).then((function(t){return t.GetParentalControlDetailsResponseMessage}))};var Mv={},Sv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mv,"__esModule",{value:!0});var Ev=Sv(Tg);Mv.default=function generateDeviceActivationCode(t){return Ev.default("/generateDeviceActivationCode","GenerateDeviceActivationCodeRequestMessage",{method:"POST",body:{deviceDetails:t}}).then((function(t){return t.GenerateDeviceActivationCodeResponseMessage}))};var Iv={},Dv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Iv,"__esModule",{value:!0});var Av=Dv(Tg);Iv.default=function logOutUser(){return Av.default("/logOutUser","LogOutUserRequestMessage",{method:"POST"}).then((function(t){return t.LogOutUserResponseMessage}))};var Cv={},Nv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cv,"__esModule",{value:!0});var xv=Nv(Tg);Cv.default=function refreshAuthToken(t){return xv.default("/refreshToken","RefreshTokenRequestMessage",{method:"POST",body:{refreshToken:t}}).then((function(t){return t.RefreshTokenResponseMessage}))};var kv={},wv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kv,"__esModule",{value:!0});var Ov=wv(Tg);kv.default=function removeDevice(t){return Ov.default("/removeDevice","RemoveDeviceRequestMessage",{method:"POST",body:{deviceDetails:t}}).then((function(t){return t.RemoveDeviceResponseMessage}))};var Lv={},Rv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lv,"__esModule",{value:!0});var jv=Rv(Tg);Lv.default=function updateProfile(t){return jv.default("/updateProfile","UpdateProfileRequestMessage",{method:"POST",body:t}).then((function(t){return t.UpdateProfileResponseMessage}))};var Pv={},Fv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pv,"__esModule",{value:!0});var Bv=Fv(Tg);Pv.default=function updateParentalControl(t){return Bv.default("/updateParentalControlDetails","UpdateParentalControlDetailsRequestMessage",{method:"POST",body:t}).then((function(t){return t.UpdateParentalControlDetailsResponseMessage}))};var Uv={},zv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Uv,"__esModule",{value:!0});var Yv=zv(Tg);Uv.default=function validateContactPassword(t){return Yv.default("/validateContactPassword","ValidateContactPasswordRequestMessage",{method:"POST",body:t}).then((function(t){return t.ValidateContactPasswordResponseMessage}))};var Gv={},Hv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gv,"__esModule",{value:!0});var Qv=Hv(Tg);Gv.default=function validateParentalControlPIN(t){return Qv.default("/validateParentalControlPIN","ValidateParentalControlPINRequestMessage",{method:"POST",body:t}).then((function(t){return t.ValidateParentalControlPINResponseMessage}))};var Vv={},Wv=_e&&_e.__assign||function(){return Wv=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var u in r=arguments[i])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t},Wv.apply(this,arguments)},$v=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},Kv=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},qv=_e&&_e.__rest||function(t,r){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&r.indexOf(a)<0&&(i[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(a=Object.getOwnPropertySymbols(t);u<a.length;u++)r.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(t,a[u])&&(i[a[u]]=t[a[u]])}return i},Xv=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vv,"__esModule",{value:!0});var Zv=_g,Jv=Mg,e_=xi,t_=Xv(Tg),r_=sv,n_=Zv.pathEq(["failureMessage",0,"errorCode"],r_.ErrorCodes.AuthenticationFailed),i_=Zv.pathEq(["failureMessage",0,"errorCode"],r_.ErrorCodes.ExistingCustomerUsername),a_=Zv.pathEq(["failureMessage",0,"errorCode"],r_.ErrorCodes.InvalidEmail),o_=Zv.pathEq(["failureMessage",0,"errorCode"],r_.ErrorCodes.InvalidPassword);Vv.default=function createUser(t){return $v(void 0,void 0,void 0,(function(){var r,i,a,u,l,c=t.email,d=t.alertNotificationEmail,g=qv(t,["email","alertNotificationEmail"]);return Kv(this,(function(t){switch(t.label){case 0:return r=e_.getRegion(),[4,Jv.getDeviceDetails()];case 1:return i=t.sent(),[4,t_.default("/createUserV2","CreateUserV2RequestMessage",{method:"POST",body:Wv(Wv({},g),{alertNotificationEmail:String(d),email:c,customerUsername:c,country:r,deviceDetails:i})})];case 2:if(a=t.sent(),"0"===(u=a.CreateUserV2ResponseMessage).responseCode){if(n_(u))throw Error("0C-A401");if(i_(u))throw Error("0C-B403");if(a_(u))throw Error("0C-B405");if(o_(u))throw Error("0C-B406");throw l=Zv.pathOr("",["failureMessage",0,"errorMessage"],u),Error(l)}return[2,u]}}))}))};var s_={},u_=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},l_=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},c_=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s_,"__esModule",{value:!0});var d_=_g,f_=Mg,h_=c_(Tg),g_=sv,p_=d_.pathEq(["failureMessage",0,"errorCode"],g_.ErrorCodes.AuthenticationFailed),m_=d_.pathEq(["failureMessage",0,"errorCode"],g_.ErrorCodes.WrongCredentials);s_.default=function authenticateCustomer(t){var r=t.contactUserName,i=t.contactPassword;return u_(void 0,void 0,void 0,(function(){var t,a,u;return l_(this,(function(l){switch(l.label){case 0:return[4,f_.getDeviceDetails()];case 1:return t=l.sent(),[4,h_.default("/authenticateCustomer","AuthenticateCustomerRequestMessage",{method:"POST",body:{contactUserName:r,contactPassword:i,deviceDetails:t}})];case 2:if(a=l.sent(),"0"===(u=a.AuthenticateCustomerResponseMessage).responseCode){if(p_(u))throw Error("0C-A401");if(m_(u))throw Error("0C-B402")}return[2,u]}}))}))};var y_={},v_=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(y_,"__esModule",{value:!0});var T_=v_(Tg);y_.default=function getProducts(){return T_.default("/getProducts","GetProductsRequestMessage",{method:"POST",body:{dmaID:"001",returnAppChannels:"T",appChannels:{appID:"",appName:"",appChannel:"Comcast Xfinity"}}}).then((function(t){return t.GetProductsResponseMessage}))};var b_={},M_=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(b_,"__esModule",{value:!0});var S_=M_(Tg);b_.default=function isEligibleForFreeTrial(){return S_.default("/isCustomerEligibleForFreeTrial","IsCustomerEligibleForFreeTrialRequestMessage",{method:"POST"}).then((function(t){return"1"===t.IsCustomerEligibleForFreeTrialResponseMessage.responseCode}))};var E_={},I_=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(E_,"__esModule",{value:!0});var D_=I_(Tg);E_.default=function activateCustomer(t,r,i,a){return D_.default("/activateCustomer","ActivateCustomerRequestMessage",{method:"POST",body:{paymentMethod:"Comcast Xfinity",appServiceID:t,transactionID:r,OAT:i,purchaseID:a}}).then((function(t){return t.ActivateCustomerResponseMessage}))},function(t){var r=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.activateCustomer=t.isEligibleForFreeTrial=t.getProducts=t.authenticateCustomer=t.createUser=t.validateParentalControlPIN=t.validateContactPassword=t.updateParentalControl=t.updateProfile=t.removeDevice=t.refreshAuthToken=t.logOutUser=t.generateDeviceActivationCode=t.getParentalControlDetails=t.getActiveSubscriptions=t.getAccountDetail=t.setEvergentAuthToken=t.getEvergentAuthToken=void 0;var i=Ms;Object.defineProperty(t,"getEvergentAuthToken",{enumerable:!0,get:function get(){return i.getAuthToken}}),Object.defineProperty(t,"setEvergentAuthToken",{enumerable:!0,get:function get(){return i.setAuthToken}});var a=Es;Object.defineProperty(t,"getAccountDetail",{enumerable:!0,get:function get(){return r(a).default}});var u=hv;Object.defineProperty(t,"getActiveSubscriptions",{enumerable:!0,get:function get(){return r(u).default}});var l=_v;Object.defineProperty(t,"getParentalControlDetails",{enumerable:!0,get:function get(){return r(l).default}});var c=Mv;Object.defineProperty(t,"generateDeviceActivationCode",{enumerable:!0,get:function get(){return r(c).default}});var d=Iv;Object.defineProperty(t,"logOutUser",{enumerable:!0,get:function get(){return r(d).default}});var g=Cv;Object.defineProperty(t,"refreshAuthToken",{enumerable:!0,get:function get(){return r(g).default}});var p=kv;Object.defineProperty(t,"removeDevice",{enumerable:!0,get:function get(){return r(p).default}});var m=Lv;Object.defineProperty(t,"updateProfile",{enumerable:!0,get:function get(){return r(m).default}});var v=Pv;Object.defineProperty(t,"updateParentalControl",{enumerable:!0,get:function get(){return r(v).default}});var b=Uv;Object.defineProperty(t,"validateContactPassword",{enumerable:!0,get:function get(){return r(b).default}});var M=Gv;Object.defineProperty(t,"validateParentalControlPIN",{enumerable:!0,get:function get(){return r(M).default}});var S=Vv;Object.defineProperty(t,"createUser",{enumerable:!0,get:function get(){return r(S).default}});var E=s_;Object.defineProperty(t,"authenticateCustomer",{enumerable:!0,get:function get(){return r(E).default}});var I=y_;Object.defineProperty(t,"getProducts",{enumerable:!0,get:function get(){return r(I).default}});var D=b_;Object.defineProperty(t,"isEligibleForFreeTrial",{enumerable:!0,get:function get(){return r(D).default}});var A=E_;Object.defineProperty(t,"activateCustomer",{enumerable:!0,get:function get(){return r(A).default}})}(bs);var A_={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.baseUrl=void 0,t.baseUrl="https://stag-rocket.bbc-massive.com",t.default=t.baseUrl}(A_);var C_=_e&&_e.__assign||function(){return C_=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var u in r=arguments[i])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t},C_.apply(this,arguments)},N_=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},x_=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}};Object.defineProperty(ya,"__esModule",{value:!0});var k_=Ts,w_=bs,O_=Oi,L_=Ri,R_=A_,j_=ji,P_=Mg;ya.default=function get(t,r,i,a){void 0===r&&(r={}),void 0===i&&(i="GET");var u=new Headers,l=L_.getSubscriptionCode(),c=O_.getAuthToken();c&&u.set("Authorization","Bearer "+c),"POST"===i&&u.set("Content-Type","application/json");var d={device:P_.getRocketDeviceType(),segments:j_.getRegion(),c:"tv_generic",v:"3.0.0"};c&&l&&(d.sub=l);var g=k_.stringify(C_(C_({},d),r),{arrayFormat:"comma",skipNulls:!0}),p=""+R_.baseUrl+t+"?"+g,m=a?JSON.stringify(a):null;return fetch(p,{method:i,headers:u,body:m}).then((function(a){return N_(void 0,void 0,void 0,(function(){var u,l,d,g;return x_(this,(function(p){switch(p.label){case 0:if(204===a.status)return[2,null];if(a.ok)return[2,a.json()];if(401!==a.status||!c)return[3,2];if(!(u=w_.getEvergentAuthToken().refreshToken))throw Error("0C-A401");return[4,w_.refreshAuthToken(u)];case 1:if(l=p.sent(),d=l.accessToken,g=l.refreshToken,d&&g)return O_.setAuthToken(d),w_.setEvergentAuthToken({token:d,refreshToken:g}),[2,get(t,r,i)];p.label=2;case 2:throw Error("0C-A"+a.status)}}))}))}))};var F_=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ma,"__esModule",{value:!0});var B_=F_(ya);ma.default=function getAccount(){return B_.default("/account-extended",{segments:void 0})};var U_={},z_=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(U_,"__esModule",{value:!0});var Y_=z_(ya);U_.default=function getBookmarksList(){return Y_.default("/account/profile/bookmarks/list",{page_size:50})};var G_={},H_=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(G_,"__esModule",{value:!0});var Q_=H_(ya);G_.default=function getContinueWatchingList(){return Q_.default("/account/profile/continue-watching/list",{page_size:50,include:"show"})};var V_={},W_=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},$_=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},K_=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(V_,"__esModule",{value:!0});var q_=K_(ya);V_.default=function getAppConfig(){return W_(void 0,void 0,void 0,(function(){var t,r,i,a,u,l;return $_(this,(function(c){switch(c.label){case 0:return t={include:["general","playback","classification"]},[4,q_.default("/config",t)];case 1:return r=c.sent(),i=r.classification,a=r.general,u=r.playback,l=r.ratings,[2,{classification:Object.values(i),general:a,playback:u,ratings:l}]}}))}))};var X_={},Z_=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},J_=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},eT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(X_,"__esModule",{value:!0});var tT=_g,rT=eT(ya);X_.default=function getMenuBar(){return Z_(void 0,void 0,void 0,(function(){var t,r;return J_(this,(function(i){switch(i.label){case 0:return t={include:"navigation"},[4,rT.default("/config",t)];case 1:return r=i.sent(),[2,tT.pathOr([],["navigation","header"],r).filter((function(t){var r=t.featured,i=void 0!==r&&r,a=t.label,u=t.path;return i&&a&&u}))]}}))}))};var nT={},iT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nT,"__esModule",{value:!0});var aT=iT(ya);nT.default=function getNextPage(t,r,i,a,u){var l={page:r,page_size:i,order:a,order_by:u};return aT.default(t,l)};var oT={},sT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oT,"__esModule",{value:!0});var uT=sT(ya);oT.default=function getNextVideo(t){return uT.default("/account/profile/items/"+t+"/next")};var lT={},cT=_e&&_e.__assign||function(){return cT=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var u in r=arguments[i])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t},cT.apply(this,arguments)},dT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lT,"__esModule",{value:!0});var fT=dT(ya),hT=ji,gT=/\/(season|show|movie|episode)\//;lT.default=function getPage(t,r){void 0===r&&(r={});var i=cT({path:t,list_page_size:24,max_list_prefetch:15,item_detail_expand:"all"},r);return gT.test(t)&&(i.segments=hT.getRegion()+",supportTA"),fT.default("/page",i)};var pT={},mT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pT,"__esModule",{value:!0});var yT=mT(ya);pT.default=function getRecommendationsList(t){return yT.default("/account/profile/recommendations/list/"+t,{limit:20}).then((function(t){return t.items}))};var vT={},_T=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vT,"__esModule",{value:!0});var bT=_T(ya);vT.default=function getRecommendedItems(t){return bT.default("/account/profile/recommendations/item/"+t,{limit:20}).catch((function(){return[]}))};var MT={},ST=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(MT,"__esModule",{value:!0});var ET=ST(ya);MT.default=function getRelatedContent(t,r){return void 0===r&&(r=3),ET.default("/items/"+t+"/related",{page_size:r})};var IT={},DT=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},AT=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},CT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(IT,"__esModule",{value:!0});var NT=CT(ya);IT.default=function getSearch(t,r){return DT(void 0,void 0,void 0,(function(){var i;return AT(this,(function(a){return i={term:t,group:r,ff:"cas"},[2,NT.default("/search",i)]}))}))};var xT={},kT=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},wT=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},OT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xT,"__esModule",{value:!0});var LT=Oi,RT=OT(ya),jT=Mg;xT.default=function getVideoInfo(t,r){return kT(void 0,void 0,void 0,(function(){var i,a,u;return wT(this,(function(l){switch(l.label){case 0:return u={delivery:"stream"},(a=r)?[4,jT.supports4k()]:[3,2];case 1:a=l.sent(),l.label=2;case 2:return u.resolution=a?"HD-4K":"HD-1080",u.formats="mpd",i=u,[2,RT.default("/account/items/"+t+"/videos",i).then((function(t){return t[0]})).catch((function(t){if("0C-A401"===t.message||"0C-A403"===t.message){if(LT.getAuthToken())throw Error("0C-D001");throw Error("0C-D002")}if("0C-A404"===t.message)throw Error("0C-D000");throw Error(t.message)}))]}}))}))};var PT={},FT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(PT,"__esModule",{value:!0});var BT=FT(ya);PT.default=function getWatchedItems(){return BT.default("/account/profile/watched")};var UT={},zT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(UT,"__esModule",{value:!0});var YT=zT(ya);UT.default=function getWatchedItemById(t){return YT.default("/account/profile/watched/"+t).catch((function(t){if("0C-A404"===t.message)return{};throw Error(t.message)}))};var GT={},HT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(GT,"__esModule",{value:!0});var QT=HT(ya);GT.default=function reportPlaybackPosition(t,r){return QT.default("/account/profile/watched/"+t,{position:r},"PUT")};var VT={},WT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(VT,"__esModule",{value:!0});var $T=WT(ya);VT.default=function checkRegion(){return $T.default("/check-region",{},"POST").catch((function(t){if("0C-A403"===t.message)return{};throw Error(t.message)}))};var KT={},qT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(KT,"__esModule",{value:!0});var XT=qT(ya);KT.default=function getLists(t,r,i,a,u){var l={ids:t,page:r,page_size:i,order:a,order_by:u};return XT.default("/lists",l)};var ZT={},JT=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ZT,"__esModule",{value:!0});var eb=JT(ya);ZT.default=function getItem(t){return eb.default("/items/"+t)};var tb={},rb=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tb,"__esModule",{value:!0}),tb.removeWatchlist=tb.addWatchlist=tb.getWatchlist=void 0;var nb=rb(ya);tb.getWatchlist=function getWatchlist(){return nb.default("/account/profile/bookmarks")};tb.addWatchlist=function addWatchlist(t){return nb.default("/account/profile/bookmarks/"+t,{},"PUT")};tb.removeWatchlist=function removeWatchlist(t){return nb.default("/account/profile/bookmarks/"+t,{},"DELETE")},function(t){var r=_e&&_e.__createBinding||(Object.create?function(t,r,i,a){void 0===a&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function get(){return r[i]}})}:function(t,r,i,a){void 0===a&&(a=i),t[a]=r[i]}),i=_e&&_e.__exportStar||function(t,i){for(var a in t)"default"===a||Object.prototype.hasOwnProperty.call(i,a)||r(i,t,a)},a=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.getItem=t.getLists=t.checkRegion=t.reportPlaybackPosition=t.getWatchedItemById=t.getWatched=t.getVideoInfo=t.getSearch=t.getRelatedContent=t.getRecommendedItems=t.getRecommendationsList=t.getPage=t.getNextVideo=t.getNextPage=t.getMenuBar=t.getAppConfig=t.getContinueWatchingList=t.getBookmarksList=t.getAccount=t.regionResponse$=t.setRegion=t.getRegion=t.setSubscriptionCode=t.setRocketAuthToken=void 0,i(ki,t);var u=Oi;Object.defineProperty(t,"setRocketAuthToken",{enumerable:!0,get:function get(){return u.setAuthToken}});var l=Ri;Object.defineProperty(t,"setSubscriptionCode",{enumerable:!0,get:function get(){return l.setSubscriptionCode}});var c=ji;Object.defineProperty(t,"getRegion",{enumerable:!0,get:function get(){return c.getRegion}}),Object.defineProperty(t,"setRegion",{enumerable:!0,get:function get(){return c.setRegion}}),Object.defineProperty(t,"regionResponse$",{enumerable:!0,get:function get(){return c.regionResponse$}});var d=ma;Object.defineProperty(t,"getAccount",{enumerable:!0,get:function get(){return a(d).default}});var g=U_;Object.defineProperty(t,"getBookmarksList",{enumerable:!0,get:function get(){return a(g).default}});var p=G_;Object.defineProperty(t,"getContinueWatchingList",{enumerable:!0,get:function get(){return a(p).default}});var m=V_;Object.defineProperty(t,"getAppConfig",{enumerable:!0,get:function get(){return a(m).default}});var v=X_;Object.defineProperty(t,"getMenuBar",{enumerable:!0,get:function get(){return a(v).default}});var b=nT;Object.defineProperty(t,"getNextPage",{enumerable:!0,get:function get(){return a(b).default}});var M=oT;Object.defineProperty(t,"getNextVideo",{enumerable:!0,get:function get(){return a(M).default}});var S=lT;Object.defineProperty(t,"getPage",{enumerable:!0,get:function get(){return a(S).default}});var E=pT;Object.defineProperty(t,"getRecommendationsList",{enumerable:!0,get:function get(){return a(E).default}});var I=vT;Object.defineProperty(t,"getRecommendedItems",{enumerable:!0,get:function get(){return a(I).default}});var D=MT;Object.defineProperty(t,"getRelatedContent",{enumerable:!0,get:function get(){return a(D).default}});var A=IT;Object.defineProperty(t,"getSearch",{enumerable:!0,get:function get(){return a(A).default}});var C=xT;Object.defineProperty(t,"getVideoInfo",{enumerable:!0,get:function get(){return a(C).default}});var N=PT;Object.defineProperty(t,"getWatched",{enumerable:!0,get:function get(){return a(N).default}});var k=UT;Object.defineProperty(t,"getWatchedItemById",{enumerable:!0,get:function get(){return a(k).default}});var O=GT;Object.defineProperty(t,"reportPlaybackPosition",{enumerable:!0,get:function get(){return a(O).default}});var L=VT;Object.defineProperty(t,"checkRegion",{enumerable:!0,get:function get(){return a(L).default}});var R=KT;Object.defineProperty(t,"getLists",{enumerable:!0,get:function get(){return a(R).default}});var j=ZT;Object.defineProperty(t,"getItem",{enumerable:!0,get:function get(){return a(j).default}}),i(tb,t)}(xi);var ib,ab={},ob={};Object.defineProperty(ob,"__esModule",{value:!0}),ob.setBaseUrl=ob.getBaseUrl=void 0;ob.getBaseUrl=function getBaseUrl(){return ib};ob.setBaseUrl=function setBaseUrl(t){ib=t};var sb={},ub={},lb=_e&&_e.__assign||function(){return lb=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var u in r=arguments[i])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t},lb.apply(this,arguments)};Object.defineProperty(ub,"__esModule",{value:!0});var cb=ob;ub.default=function get(t,r,i){var a=function formatObjectToString(t){return Object.keys(t).reduce((function(r,i){return r+"/"+i+"/"+t[i]}),"")}(lb({proto:"https"},i)),u=""+cb.getBaseUrl()+t+a;return r&&(u+="?saml_auth="+encodeURIComponent(r)),fetch(u).then((function(t){if(t.ok)return t.json();throw new Error(""+t.status)}))};var db=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sb,"__esModule",{value:!0});var fb=Mg,hb=db(ub);sb.default=function getDRMInfo(t,r){var i={version:"2.0",cvid:t,mediaset:"iptv-all-drm",licence:fb.getDeviceType()===fb.DeviceType.fetch?"pr":"wv",cors:1};return hb.default("/drmauth/1",r,i)};var gb={},pb={},mb={};!function(t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MediaSet=void 0,(r=t.MediaSet||(t.MediaSet={})).ALL="iptv-all",r.DRM="iptv-all-drm",r.UHD="iptv-uhd"}(mb);var yb=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},vb=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}};Object.defineProperty(pb,"__esModule",{value:!0});var _b=Mg,Tb=mb;pb.default=function getMediaSet(t){return yb(void 0,void 0,void 0,(function(){var r;return vb(this,(function(i){switch(i.label){case 0:return(null==t?void 0:t.drm)?[2,Tb.MediaSet.DRM]:(r=null==t?void 0:t.uhd)?[4,_b.supports4k()]:[3,2];case 1:r=i.sent(),i.label=2;case 2:return r?[2,Tb.MediaSet.UHD]:[2,Tb.MediaSet.ALL]}}))}))};var bb={},Mb=_e&&_e.__spreadArray||function(t,r){for(var i=0,a=r.length,u=t.length;i<a;i++,u++)t[u]=r[i];return t};Object.defineProperty(bb,"__esModule",{value:!0});var Sb=_g;bb.default=function loadBalance(t){if(1===t.length)return t;for(var r,i=0,a=Sb.sortWith([Sb.descend(Sb.propOr(-1,"dpw")),Sb.ascend(Sb.prop("priority"))],t),u=Math.ceil(100*Math.random()),l=0;l<a.length;l+=1){var c=a[l].dpw;c?(i+=parseInt(c,10),void 0===r&&u<=i&&(r=l)):void 0===r&&(r=l)}return i>100||0===i?a=Sb.sortWith([Sb.ascend(Sb.prop("priority"))],t):r&&(a=Mb(Mb([a[r]],a.slice(0,r)),a.slice(r+1))),a};var Eb=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},Ib=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},Db=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gb,"__esModule",{value:!0});var Ab=_g,Cb=Db(ub),Nb=Db(pb),xb=Db(bb);gb.default=function getManifests(t,r,i){return Eb(void 0,void 0,void 0,(function(){var a,u;return Ib(this,(function(l){switch(l.label){case 0:return[4,Nb.default(i)];case 1:return a=l.sent(),u={mediaset:a,format:"json"},(null==i?void 0:i.live)?(u.cors=1,u.version="2.0",u.vpid=t,u.transferformat="hls"):(u.version="3.0",u.cvid=t,u.transferformat="dash"),[2,Cb.default("/mediaselector/6/select",r,u).then((function(t){if(!t||!t.media||!function hasVideoManifest(t){return Ab.any(Ab.propEq("kind","video"),t)}(t.media))throw Error("404");var r=t.media.find((function(t){return"en-US"===t.language}));return t.media.reduce((function(t,i){var a=xb.default(i.connection);if("captions"!==i.kind)return t[i.kind]=a,t;if("en-US"!==i.language&&"en-GB"!==i.language)return t;var u=Ab.path([0,"href"],a);return!u||!i.language||"en-GB"===i.language&&r||t.captions.push({href:u,language:i.language,purpose:i.purpose}),t}),{captions:[],thumbnails:[],video:[]})})).catch((function(t){var r=t.message,i=void 0===r?"":r;if("400"===i)throw Error("0C-D007");if("401"===i)throw Error("0C-D001");if("403"===i)throw Error("0C-D005");if("404"===i)throw Error("0C-D000");throw Error(i)}))]}}))}))};var kb={},wb={};Object.defineProperty(wb,"__esModule",{value:!0});wb.default="https://staging-api.britbox.takeoffmedia.com/v1";var Ob=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kb,"__esModule",{value:!0});var Lb=Mg,Rb=Ob(wb);kb.default=function getCaptionVTT(t){if(!t)return Promise.reject();var r=new URL(t),i=r.hostname,a=r.pathname,u=r.search,l=Rb.default+"/subtitles/?qs="+btoa(u)+"&fn="+btoa(a)+"&ch="+i;return Lb.parseVTT(l)};var jb={},Pb=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jb,"__esModule",{value:!0});var Fb=Mg,Bb=Pb(wb);jb.default=function getThumbnailVTT(t){if(!t)return Promise.reject();var r=new URL(t),i=r.hostname,a=r.pathname,u=r.search,l=Bb.default+"/thumbnail/?qs="+btoa(u)+"&fn="+btoa(a)+"&ch="+i;return Fb.parseVTT(l)},function(t){var r=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.getThumbnailVTT=t.getCaptionVTT=t.getMediaSet=t.getManifests=t.getDRMInfo=t.setMediaSelectorBaseUrl=void 0;var i=ob;Object.defineProperty(t,"setMediaSelectorBaseUrl",{enumerable:!0,get:function get(){return i.setBaseUrl}});var a=sb;Object.defineProperty(t,"getDRMInfo",{enumerable:!0,get:function get(){return r(a).default}});var u=gb;Object.defineProperty(t,"getManifests",{enumerable:!0,get:function get(){return r(u).default}});var l=pb;Object.defineProperty(t,"getMediaSet",{enumerable:!0,get:function get(){return r(l).default}});var c=kb;Object.defineProperty(t,"getCaptionVTT",{enumerable:!0,get:function get(){return r(c).default}});var d=jb;Object.defineProperty(t,"getThumbnailVTT",{enumerable:!0,get:function get(){return r(d).default}})}(ab),function(t){var r=_e&&_e.__createBinding||(Object.create?function(t,r,i,a){void 0===a&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function get(){return r[i]}})}:function(t,r,i,a){void 0===a&&(a=i),t[a]=r[i]}),i=_e&&_e.__exportStar||function(t,i){for(var a in t)"default"===a||Object.prototype.hasOwnProperty.call(i,a)||r(i,t,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(xi,t),i(ab,t),i(bs,t)}(Ni);var Ub={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.echoEnvironment=void 0,t.echoEnvironment="test",t.default=t.echoEnvironment}(Ub);var zb={};Object.defineProperty(zb,"__esModule",{value:!0});zb.default=function formatPagePath(t){return"/"===t?"home":"/"===t[0]?t.slice(1).replace("/","."):t.replace("/",".")};var Yb=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},Gb=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},Hb=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mn,"__esModule",{value:!0});var Qb=Ai,Vb=Ci,Wb=Ni,$b=Ub,Kb=Ry,qb=Mg,Xb=Hb(zb);Mn.default=function bootstrapEcho(){return Yb(void 0,void 0,void 0,(function(){var t,r,i,a,u,l,c,d,g,p,m,v,b,M,S,E,I;return Gb(this,(function(D){switch(D.label){case 0:return window.echo_js?(t="prod"===$b.echoEnvironment,r=window.echo_js,i=r.ConfigKeys,a=r.EchoClient,u=r.Enums,l=r.Media,c=r.getImplementationVersion,(E={})[i.DESTINATION]=t?u.Destinations.BRITBOX:u.Destinations.BRITBOX_TEST,E[i.PRODUCER]=u.Producers.BRITBOX,d=E,g=qb.getDeviceType(),[4,qb.getDeviceDetails()]):[2];case 1:return p=D.sent(),m=function getDeviceProperties(t,r){var i=t.modelNo,a=void 0===i?"":i;switch(r){case qb.DeviceType.fetch:return{appName:"britbox-fetchtv-"+a,platform:"FetchTV-"+a.toUpperCase()};case qb.DeviceType.comcast:return{appName:"britbox-comcastrdk",platform:"ComcastRDK"};default:return{appName:"britbox-tv",platform:"TV"}}}(p,g),v=m.appName,b=m.platform,(M=new a(v,u.ApplicationType.BIGSCREEN_HTML,d)).setAppVersion(Vb.version),(I={})[u.EchoLabelKeys.LEVEL_1_SITE]=t?598259:598260,I[u.EchoLabelKeys.LEVEL_2_SITE]=34,I[u.EchoLabelKeys.APP_TYPE]=u.ApplicationType.BIGSCREEN_HTML,I[u.EchoLabelKeys.APP_NAME]=v,I[u.EchoLabelKeys.LANGUAGE]="en-US",I[u.EchoLabelKeys.LIBRARY_VERSION]=c(),I[u.EchoLabelKeys.CUSTOM_VAR_3]=b,S=I,Kb.user$.subscribe((function(t){var r=t.subscriptionCode,i=t.userId;i?M.setLoggedInToBBCId(i):M.setLoggedOutOfBBCId();var a=r?r.toLowerCase():"unauth",l=Wb.getRegion()||"";S[u.EchoLabelKeys.CUSTOM_VAR_1]=l.toLowerCase(),S[u.EchoLabelKeys.CUSTOM_VAR_2]=a})),Kb.events$.pipe(Qb.filter((function(t){return"page"===t.type}))).subscribe({next:function next(t){var r=t.data,i=r.path,a=r.title;S[u.EchoLabelKeys.PAGE_TITLE]="BritBox TV - "+a,M.viewEvent(Xb.default(i),S)}}),Kb.events$.pipe(Qb.filter((function(t){return"player"===t.type&&t.action===Kb.PlayerActions.INIT})),Qb.tap((function(t){var r=t.data.asset,i=r.duration,a=r.id,c=r.isLive,d=r.title,g=c?u.MediaConsumptionMode.LIVE:u.MediaConsumptionMode.ON_DEMAND,p=new l(u.AvType.VIDEO,g);p.setProducer(u.Producers.BRITBOX),c?p.setServiceId(a):(p.setVersionId(a),p.setLength(1e3*i)),p.setMediaPlayerName("fx-tvplayer"),p.setMediaPlayerVersion(Vb.version),p.setName(d),M.setMedia(p)})),Qb.switchMapTo(Kb.events$.pipe(Qb.filter((function(t){return"player"===t.type}))))).subscribe({next:function next(t){var r=t,i=r.action,a=r.data,u=a.callbacks,l=a.currentTime,c=a.speed,d=void 0===c?1:c;switch(i){case Kb.PlayerActions.MEDIA_START:M.setPlayerDelegate(u),M.avPlayEvent(l);break;case Kb.PlayerActions.PLAY:M.avPlayEvent(l);break;case Kb.PlayerActions.PAUSE:M.avPauseEvent(l);break;case Kb.PlayerActions.BUFFER:M.avBufferEvent(l);break;case Kb.PlayerActions.FAST_FORWARD:M.avFastForwardEvent(l,d);break;case Kb.PlayerActions.REWIND:M.avRewindEvent(l,d);break;case Kb.PlayerActions.SEEK_START:M.avSeekEvent(l);break;case Kb.PlayerActions.STOP:case Kb.PlayerActions.ENDED:M.avEndEvent(l)}}}),[2]}}))}))};var Zb={};Object.defineProperty(Zb,"__esModule",{value:!0}),function(t){var r=_e&&_e.__createBinding||(Object.create?function(t,r,i,a){void 0===a&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function get(){return r[i]}})}:function(t,r,i,a){void 0===a&&(a=i),t[a]=r[i]}),i=_e&&_e.__exportStar||function(t,i){for(var a in t)"default"===a||Object.prototype.hasOwnProperty.call(i,a)||r(i,t,a)},a=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrapEcho=void 0;var u=Mn;Object.defineProperty(t,"bootstrapEcho",{enumerable:!0,get:function get(){return a(u).default}}),i(Zb,t)}(bn);var Jb={},eM={},tM={},rM={};Object.defineProperty(rM,"__esModule",{value:!0});var nM=ji,iM=Mg;rM.default=function getUserAccountData(){var t=iM.getRocketDeviceType(),r=nM.getRegion();return{device:t,country:(null==r?void 0:r.toLowerCase())||"",region:(null==r?void 0:r.toUpperCase())||""}};var aM=_e&&_e.__assign||function(){return aM=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++)for(var u in r=arguments[i])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t},aM.apply(this,arguments)},oM=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},sM=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},uM=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tM,"__esModule",{value:!0});var lM=uM(ya),cM=uM(rM);tM.default=function get(t,r){return oM(void 0,void 0,void 0,(function(){var i,a;return sM(this,(function(u){switch(u.label){case 0:return[4,cM.default()];case 1:return i=u.sent(),a=aM(aM({},r),i),[4,lM.default(t,void 0,"POST",a)];case 2:return u.sent(),[2]}}))}))};var dM=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},fM=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},hM=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eM,"__esModule",{value:!0});var gM=hM(tM),pM=Mg;eM.default=function sendPlayLearnAction(t){return dM(this,void 0,void 0,(function(){var r;return fM(this,(function(i){switch(i.label){case 0:return r=t.customId,pM.recordExistsForCustomId(r)?[2]:(pM.addPlayRecordForCustomId(r),[4,gM.default("/analytics/learn/play",t)]);case 1:return i.sent(),[2]}}))}))};var mM={},yM=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},vM=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},_M=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mM,"__esModule",{value:!0});var TM=_M(tM);mM.default=function sendStopLearnAction(t){return yM(void 0,void 0,void 0,(function(){return vM(this,(function(r){return[2,TM.default("/analytics/learn/stop-play",t)]}))}))};var bM={},MM=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},SM=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},EM=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bM,"__esModule",{value:!0});var IM=EM(tM);bM.default=function sendAddToWatchlistAction(t){return MM(void 0,void 0,void 0,(function(){return SM(this,(function(r){return[2,IM.default("/analytics/learn/add-to-watchlist",t)]}))}))};var DM={},AM=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},CM=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}},NM=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(DM,"__esModule",{value:!0});var xM=NM(tM);DM.default=function sendRemoveFromWatchlistAction(t){return AM(void 0,void 0,void 0,(function(){return CM(this,(function(r){return[2,xM.default("/analytics/learn/remove-from-watchlist",t)]}))}))},function(t){var r=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendRemoveFromWatchlistAction=t.sendAddToWatchlistAction=t.sendStopLearnAction=t.sendPlayLearnAction=void 0;var i=eM;Object.defineProperty(t,"sendPlayLearnAction",{enumerable:!0,get:function get(){return r(i).default}});var a=mM;Object.defineProperty(t,"sendStopLearnAction",{enumerable:!0,get:function get(){return r(a).default}});var u=bM;Object.defineProperty(t,"sendAddToWatchlistAction",{enumerable:!0,get:function get(){return r(u).default}});var l=DM;Object.defineProperty(t,"sendRemoveFromWatchlistAction",{enumerable:!0,get:function get(){return r(l).default}})}(Jb),function(t){var r=_e&&_e.__createBinding||(Object.create?function(t,r,i,a){void 0===a&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function get(){return r[i]}})}:function(t,r,i,a){void 0===a&&(a=i),t[a]=r[i]}),i=_e&&_e.__exportStar||function(t,i){for(var a in t)"default"===a||Object.prototype.hasOwnProperty.call(i,a)||r(i,t,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(bn,t),i(Jb,t)}(Tn);var kM={},wM={},OM={};Object.defineProperty(OM,"__esModule",{value:!0});OM.default=function getProductBySKU(t){return commerce.product.get(t)};var LM={},RM={};Object.defineProperty(RM,"__esModule",{value:!0});RM.default="test";var jM=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(LM,"__esModule",{value:!0});var PM=Mg;jM(RM),LM.default=function loadComcastScripts(){return PM.loadScript("./static/comcast/commerce/commerce-render-lightning.min.js").then((function(){return PM.loadScript("./static/comcast/commerce/commerce.min.js")})).catch((function(t){}))};var FM={};Object.defineProperty(FM,"__esModule",{value:!0});FM.default=function makePurchase(t){if(!t)return Promise.reject(new Error("Invalid SKU"));var r=new commerce.Order,i=new commerce.Transaction({sku:t,type:commerce.transactionType.ADD});return r.add(i),commerce.order.render(r)};var BM={};Object.defineProperty(BM,"__esModule",{value:!0});BM.default=function getAllSubscriptions(){return commerce.allSubscriptions.get()},function(t){var r=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAllSubscriptions=t.makePurchase=t.loadComcastScripts=t.getProductBySKU=void 0;var i=OM;Object.defineProperty(t,"getProductBySKU",{enumerable:!0,get:function get(){return r(i).default}});var a=LM;Object.defineProperty(t,"loadComcastScripts",{enumerable:!0,get:function get(){return r(a).default}});var u=FM;Object.defineProperty(t,"makePurchase",{enumerable:!0,get:function get(){return r(u).default}});var l=BM;Object.defineProperty(t,"getAllSubscriptions",{enumerable:!0,get:function get(){return r(l).default}})}(wM),function(t){var r=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},i=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAllSubscriptions=t.makePurchase=t.getProductBySKU=t.bootstrapIAP=void 0;var a=Mg,u=wM;Object.defineProperty(t,"getProductBySKU",{enumerable:!0,get:function get(){return u.getProductBySKU}}),Object.defineProperty(t,"makePurchase",{enumerable:!0,get:function get(){return u.makePurchase}}),Object.defineProperty(t,"getAllSubscriptions",{enumerable:!0,get:function get(){return u.getAllSubscriptions}});t.bootstrapIAP=function bootstrapIAP(){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return a.getDeviceType()===a.DeviceType.comcast?[3,1]:[3,3];case 1:return[4,a.getComcastDeviceType()];case 2:return"Xfinity"===t.sent()&&u.loadComcastScripts(),[3,4];case 3:return[3,4];case 4:return[2]}}))}))}}(kM);var UM={},zM={},YM={};Object.defineProperty(YM,"__esModule",{value:!0});var GM=Lm,HM=ga,QM=Ry;YM.default=function bootstrap(){QM.events$.pipe(HM.filter((function(t){return"player"===t.type&&t.action===QM.PlayerActions.STOP}))).subscribe((function(t){var r=t.data;r.assetId&&void 0!==r.finished&&function reportContentWatched(t,r,i){var a=(new Date).toISOString();GM.Discovery.watched(t,i,r,a).catch((function(t){return!1}))}(r.assetId,r.finished,r.progress)}))};var VM={},WM={};Object.defineProperty(WM,"__esModule",{value:!0});var $M=new ga.Subject;WM.default=$M,function(t){var r=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.getColdStartDeeplink=t.bootstrapDeeplink=void 0;var i=Lm,a=r(WM),u=function resolveDeeplinkIntent(t){if(!t.action)return null;switch(t.action){case"entity":var r=t.data,i=r.entityId,a=r.programType;return{action:"entity",customId:i,entityType:"series"===a?"show":a};case"playback":var u=t.data,l=u.assetId;i=u.entityId;return{action:"playback",customId:l||i};case"search":return{action:"search",searchQuery:(t.data||{}).query};default:return{action:"home"}}};t.bootstrapDeeplink=function bootstrapDeeplink(){i.Discovery.listen("navigateTo",(function(t){var r=u(t);r&&a.default.next(r)}))};t.getColdStartDeeplink=function getColdStartDeeplink(){return i.Parameters.initialization().then((function(t){var r=t.discovery;return r&&r.navigateTo?u(r.navigateTo):null})).catch((function(){return null}))},t.default=t.bootstrapDeeplink}(VM);var KM={};Object.defineProperty(KM,"__esModule",{value:!0});var qM=Lm,XM=_g,ZM=ga,JM=Ry;KM.default=function bootstrap(){JM.userEvents$.pipe(ZM.filter((function(t){return void 0!==t.data.entitlements}))).subscribe((function(t){var r=XM.pathOr([],["data","entitlements"],t).map((function(t){return{entitlementId:"britbox_britbox",startTime:t.activationDate,endTime:t.expirationDate}}));r.length>0&&qM.Discovery.entitlements(r).catch((function(t){}))}))};var eS={};Object.defineProperty(eS,"__esModule",{value:!0});var tS=ga,rS=Lm,nS=Ry;eS.default=function bootstrap(){rS.Lifecycle.listen("foreground",(function(t){var r=t.state,i=t.previous;nS.sendEvent({type:"app",action:nS.AppActions.FOREGROUND,data:{state:{curr:r,prev:i}}})})),rS.Lifecycle.listen("background",(function(t){var r=t.state,i=t.previous;nS.sendEvent({type:"app",action:nS.AppActions.BACKGROUND,data:{state:{curr:r,prev:i}}})})),rS.Lifecycle.listen("inactive",(function(t){var r=t.state,i=t.previous;nS.sendEvent({type:"app",action:nS.AppActions.INACTIVE,data:{state:{curr:r,prev:i}}})})),rS.Lifecycle.once("unloading",(function(){rS.Lifecycle.clear(),rS.Lifecycle.finished()})),nS.events$.pipe(tS.filter((function(t){return"app"===t.type}))).subscribe((function(t){switch(t.action){case nS.AppActions.INIT:rS.Lifecycle.ready();break;case nS.AppActions.EXIT:rS.Lifecycle.close(rS.Lifecycle.CloseReason.USER_EXIT)}}))};var iS={},aS={};Object.defineProperty(aS,"__esModule",{value:!0});var oS=new ga.BehaviorSubject({enabled:!1,styles:{}});aS.default=oS;var sS=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(iS,"__esModule",{value:!0});var uS=ga,lS=Lm,cS=Ry,dS=sS(aS);iS.default=function bootstrapAccessibilitySettingsListener(){cS.events$.pipe(uS.filter((function(t){return t.action===cS.AppActions.FOREGROUND}))).subscribe((function(){!function getClosedCaptionSettings(){lS.Accessibility.closedCaptionsSettings().then((function(t){return!!t&&(dS.default.next(t),!1)})).catch((function(t){console.error(t)}))}()}))};var fS={},hS=_e&&_e.__awaiter||function(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))},gS=_e&&_e.__generator||function(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}};Object.defineProperty(fS,"__esModule",{value:!0});var pS=Lm,mS=ga,yS=Ry;fS.default=function bootstrap(){yS.userEvents$.pipe(mS.filter((function(t){return t.action===yS.UserActions.LOGIN||t.action===yS.UserActions.LOGOUT}))).subscribe((function(t){t.action===yS.UserActions.LOGIN?function reportSignIn(){hS(void 0,void 0,void 0,(function(){return gS(this,(function(t){return[2,pS.Discovery.signIn().catch((function(t){return!1}))]}))}))}():function reportSignOut(){hS(void 0,void 0,void 0,(function(){return gS(this,(function(t){return[2,pS.Discovery.signOut().catch((function(t){return!1}))]}))}))}()}))};var vS={},_S={};Object.defineProperty(_S,"__esModule",{value:!0});var TS=new ga.BehaviorSubject(!1);_S.default=TS;var bS=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vS,"__esModule",{value:!0});var MS=ga,SS=Lm,ES=Ry,IS=bS(_S);vS.default=function bootstrapVoiceGuidanceSettings(){ES.events$.pipe(MS.filter((function(t){return t.action===ES.AppActions.FOREGROUND}))).subscribe((function(){!function getVoiceGuidanceSettings(){SS.Accessibility.voiceGuidanceSettings().then((function(t){return IS.default.next(t.enabled)})).catch((function(t){}))}()}))};var DS={};Object.defineProperty(DS,"__esModule",{value:!0});var AS=Ai,CS=Lm,NS=Ry;DS.default=function bootstrap(){NS.events$.pipe(AS.filter((function(t){return"player"===t.type}))).subscribe({next:function next(t){var r,i,a=t.action,u=t.data;"player:media_start"===a&&function metricsStartContent(t){CS.Metrics.startContent(t).then((function(t){return null})).catch((function(t){}))}(null===(r=u)||void 0===r?void 0:r.assetId),"player:stop"===a&&function metricsStopContent(t){CS.Metrics.stopContent(t).then((function(t){return null})).catch((function(t){}))}(null===(i=u)||void 0===i?void 0:i.assetId)}})};var xS={};Object.defineProperty(xS,"__esModule",{value:!0});var kS=Lm;xS.default=function metricsError(t){var r=t.type,i=t.title,a=t.description,u=t.errorCode,l=i?i+" "+a:a;kS.Metrics.error(r,u,l,!0).then((function(t){return null})).catch((function(t){}))},function(t){var r=_e&&_e.__createBinding||(Object.create?function(t,r,i,a){void 0===a&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function get(){return r[i]}})}:function(t,r,i,a){void 0===a&&(a=i),t[a]=r[i]}),i=_e&&_e.__exportStar||function(t,i){for(var a in t)"default"===a||Object.prototype.hasOwnProperty.call(i,a)||r(i,t,a)},a=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.metricsError=t.bootstrapMetricsPlayerEvents=t.bootstrapVoiceGuidanceSettings=t.bootstrapStatusReporter=t.bootstrapAccessibilitySettingsListener=t.bootstrapLifecycle=t.bootstrapEntitlementReporter=t.bootstrapContentWatchedReporter=void 0;var u=YM;Object.defineProperty(t,"bootstrapContentWatchedReporter",{enumerable:!0,get:function get(){return a(u).default}}),i(VM,t);var l=KM;Object.defineProperty(t,"bootstrapEntitlementReporter",{enumerable:!0,get:function get(){return a(l).default}});var c=eS;Object.defineProperty(t,"bootstrapLifecycle",{enumerable:!0,get:function get(){return a(c).default}});var d=iS;Object.defineProperty(t,"bootstrapAccessibilitySettingsListener",{enumerable:!0,get:function get(){return a(d).default}});var g=fS;Object.defineProperty(t,"bootstrapStatusReporter",{enumerable:!0,get:function get(){return a(g).default}});var p=vS;Object.defineProperty(t,"bootstrapVoiceGuidanceSettings",{enumerable:!0,get:function get(){return a(p).default}});var m=DS;Object.defineProperty(t,"bootstrapMetricsPlayerEvents",{enumerable:!0,get:function get(){return a(m).default}});var v=xS;Object.defineProperty(t,"metricsError",{enumerable:!0,get:function get(){return a(v).default}})}(zM),function(t){var r=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.voiceGuidanceEnabled$=t.deeplink$=t.accessibilitySettings$=t.default=t.getColdStartDeeplink=void 0;var i=zM;Object.defineProperty(t,"getColdStartDeeplink",{enumerable:!0,get:function get(){return i.getColdStartDeeplink}});var a=Mg,u=r(aS);t.accessibilitySettings$=u.default;var l=r(WM);t.deeplink$=l.default;var c=r(_S);t.voiceGuidanceEnabled$=c.default;t.default=function bootstrapPlugins(){if(a.getDeviceType()===a.DeviceType.comcast)i.bootstrapContentWatchedReporter(),i.bootstrapDeeplink(),i.bootstrapEntitlementReporter(),i.bootstrapLifecycle(),i.bootstrapStatusReporter(),i.bootstrapVoiceGuidanceSettings(),i.bootstrapMetricsPlayerEvents(),i.bootstrapAccessibilitySettingsListener()}}(UM);var wS=getDefaultExportFromCjs(UM);function debounce(t,r,i){var a,u,l,c,d;function later(){var g=Date.now()-c;g<r&&g>=0?a=setTimeout(later,r-g):(a=null,i||(d=t.apply(l,u),l=u=null))}null==r&&(r=100);var g=function debounced(){l=this,u=arguments,c=Date.now();var g=i&&!a;return a||(a=setTimeout(later,r)),g&&(d=t.apply(l,u),l=u=null),d};return g.clear=function(){a&&(clearTimeout(a),a=null)},g.flush=function(){a&&(d=t.apply(l,u),l=u=null,clearTimeout(a),a=null)},g}debounce.debounce=debounce;var OS,LS=debounce;function flattenStrings(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=[],i=0;i<t.length&&("string"==typeof t[i]&&!t[i].includes("PAUSE-"));i++)r.push(t[i]);return[r.join(", ")].concat(t.slice(i))}function delay(t){return new Promise((function(r){setTimeout(r,t)}))}function speak(t,r){var i=window.speechSynthesis;return new Promise((function(a,u){var l=new SpeechSynthesisUtterance(t);l.onend=function(){a()},l.onerror=function(t){u(t)},r.push(l),i.speak(l)}))}function speakSeries(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=window.speechSynthesis,a=flattenStrings(Array.isArray(t)?t:[t]),u=[],l=[],c=!0,d=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t,r,i,d,g,p;return regeneratorRuntime.wrap((function _callee$(m){for(;;)switch(m.prev=m.next){case 0:m.prev=0;case 1:if(!c||!a.length){m.next=62;break}return m.next=4,Promise.resolve(a.shift());case 4:if(t=m.sent,c){m.next=9;break}return m.abrupt("break",62);case 9:if("string"!=typeof t||!t.includes("PAUSE-")){m.next=16;break}return r=1e3*t.split("PAUSE-")[1],isNaN(r)&&(r=0),m.next=14,delay(r);case 14:m.next=60;break;case 16:if("string"!=typeof t||!t.length){m.next=48;break}d=i=3;case 19:if(!(c&&d>0)){m.next=46;break}return m.prev=20,m.next=23,speak(t,l);case 23:d=0,m.next=44;break;case 26:if(m.prev=26,m.t0=m.catch(20),!(m.t0 instanceof SpeechSynthesisErrorEvent)){m.next=43;break}if("network"!==m.t0.error){m.next=36;break}return d--,console.warn("Speech synthesis network error. Retries left: ".concat(d)),m.next=34,delay(500*(i-d));case 34:m.next=41;break;case 36:if("canceled"!==m.t0.error&&"interrupted"!==m.t0.error){m.next=40;break}d=0,m.next=41;break;case 40:throw new Error("SpeechSynthesisErrorEvent: ".concat(m.t0.error));case 41:m.next=44;break;case 43:throw m.t0;case 44:m.next=19;break;case 46:m.next=60;break;case 48:if("function"!=typeof t){m.next=55;break}return g=speakSeries(t(),!1),u.push(g),m.next=53,g.series;case 53:m.next=60;break;case 55:if(!Array.isArray(t)){m.next=60;break}return p=speakSeries(t,!1),u.push(p),m.next=60,p.series;case 60:m.next=1;break;case 62:return m.prev=62,c=!1,m.finish(62);case 65:case"end":return m.stop()}}),_callee,null,[[0,,62,65],[20,26]])})))();return{series:d,get active(){return c},append:function append(t){a.push(t)},cancel:function cancel(){c&&(r&&i.cancel(),u.forEach((function(t){t.cancel()})),c=!1)}}}function Speech(t){return OS&&OS.cancel(),OS=speakSeries(t)}var RS=3e5;function elmName(t){return t.ref||t.constructor.name}function isFunction(t){return"function"==typeof t}function operate(t){return function(r){if(function hasLift(t){return isFunction(null==t?void 0:t.lift)}(r))return r.lift((function(r){try{return t(r,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var jS=function extendStatics(t,r){return jS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},jS(t,r)};function __extends(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}jS(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}function __awaiter(t,r,i,a){return new(i||(i=Promise))((function(u,l){function fulfilled(t){try{step(a.next(t))}catch(t){l(t)}}function rejected(t){try{step(a.throw(t))}catch(t){l(t)}}function step(t){t.done?u(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())}))}function __generator(t,r){var i,a,u,l,c={label:0,sent:function sent(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function verb(l){return function(d){return function step(l){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(u=2&l[0]?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[2&l[0],u.value]),l[0]){case 0:case 1:u=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(u=c.trys,(u=u.length>0&&u[u.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!u||l[1]>u[0]&&l[1]<u[3])){c.label=l[1];break}if(6===l[0]&&c.label<u[1]){c.label=u[1],u=l;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(l);break}u[2]&&c.ops.pop(),c.trys.pop();continue}l=r.call(t,c)}catch(t){l=[6,t],a=0}finally{i=u=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,d])}}}function __values(t){var r="function"==typeof Symbol&&Symbol.iterator,i=r&&t[r],a=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function next(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,r){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var a,u,l=i.call(t),c=[];try{for(;(void 0===r||r-- >0)&&!(a=l.next()).done;)c.push(a.value)}catch(t){u={error:t}}finally{try{a&&!a.done&&(i=l.return)&&i.call(l)}finally{if(u)throw u.error}}return c}function __spreadArray(t,r,i){if(i||2===arguments.length)for(var a,u=0,l=r.length;u<l;u++)!a&&u in r||(a||(a=Array.prototype.slice.call(r,0,u)),a[u]=r[u]);return t.concat(a||Array.prototype.slice.call(r))}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,r,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,u=i.apply(t,r||[]),l=[];return a={},verb("next"),verb("throw"),verb("return"),a[Symbol.asyncIterator]=function(){return this},a;function verb(t){u[t]&&(a[t]=function(r){return new Promise((function(i,a){l.push([t,r,i,a])>1||resume(t,r)}))})}function resume(t,r){try{!function step(t){t.value instanceof __await?Promise.resolve(t.value.v).then(fulfill,reject):settle(l[0][2],t)}(u[t](r))}catch(t){settle(l[0][3],t)}}function fulfill(t){resume("next",t)}function reject(t){resume("throw",t)}function settle(t,r){t(r),l.shift(),l.length&&resume(l[0][0],l[0][1])}}function __asyncValues(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t[Symbol.asyncIterator];return i?i.call(t):(t=__values(t),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(i){r[i]=t[i]&&function(r){return new Promise((function(a,u){(function settle(t,r,i,a){Promise.resolve(a).then((function(r){t({value:r,done:i})}),r)})(a,u,(r=t[i](r)).done,r.value)}))}}}var PS=function isArrayLike(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function isPromise(t){return isFunction(null==t?void 0:t.then)}function createErrorClass(t){var r=t((function _super(t){Error.call(t),t.stack=(new Error).stack}));return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var FS=createErrorClass((function(t){return function UnsubscriptionErrorImpl(r){t(this),this.message=r?r.length+" errors occurred during unsubscription:\n"+r.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=r}}));function arrRemove(t,r){if(t){var i=t.indexOf(r);0<=i&&t.splice(i,1)}}var BS=function(){function Subscription(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}return Subscription.prototype.unsubscribe=function(){var t,r,i,a,u;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var c=__values(l),d=c.next();!d.done;d=c.next()){d.value.remove(this)}}catch(r){t={error:r}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}else l.remove(this);var g=this.initialTeardown;if(isFunction(g))try{g()}catch(t){u=t instanceof FS?t.errors:[t]}var p=this._teardowns;if(p){this._teardowns=null;try{for(var m=__values(p),v=m.next();!v.done;v=m.next()){var b=v.value;try{execTeardown(b)}catch(t){u=null!=u?u:[],t instanceof FS?u=__spreadArray(__spreadArray([],__read(u)),__read(t.errors)):u.push(t)}}}catch(t){i={error:t}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}}if(u)throw new FS(u)}},Subscription.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)execTeardown(t);else{if(t instanceof Subscription){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(t)}},Subscription.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},Subscription.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},Subscription.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&arrRemove(r,t)},Subscription.prototype.remove=function(t){var r=this._teardowns;r&&arrRemove(r,t),t instanceof Subscription&&t._removeParent(this)},Subscription.EMPTY=function(){var t=new Subscription;return t.closed=!0,t}(),Subscription}(),US=BS.EMPTY;function isSubscription(t){return t instanceof BS||t&&"closed"in t&&isFunction(t.remove)&&isFunction(t.add)&&isFunction(t.unsubscribe)}function execTeardown(t){isFunction(t)?t():t.unsubscribe()}var zS={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},YS={setTimeout:function(t){function setTimeout(){return t.apply(this,arguments)}return setTimeout.toString=function(){return t.toString()},setTimeout}((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=YS.delegate;return((null==i?void 0:i.setTimeout)||setTimeout).apply(void 0,__spreadArray([],__read(t)))})),clearTimeout:function(t){function clearTimeout(r){return t.apply(this,arguments)}return clearTimeout.toString=function(){return t.toString()},clearTimeout}((function(t){var r=YS.delegate;return((null==r?void 0:r.clearTimeout)||clearTimeout)(t)})),delegate:void 0};function reportUnhandledError(t){YS.setTimeout((function(){throw t}))}function noop(){}var GS=createNotification("C",void 0,void 0);function createNotification(t,r,i){return{kind:t,value:r,error:i}}var HS=null;function errorContext(t){if(zS.useDeprecatedSynchronousErrorHandling){var r=!HS;if(r&&(HS={errorThrown:!1,error:null}),t(),r){var i=HS,a=i.errorThrown,u=i.error;if(HS=null,a)throw u}}else t()}var QS=function(t){function Subscriber(r){var i=t.call(this)||this;return i.isStopped=!1,r?(i.destination=r,isSubscription(r)&&r.add(i)):i.destination=KS,i}return __extends(Subscriber,t),Subscriber.create=function(t,r,i){return new $S(t,r,i)},Subscriber.prototype.next=function(t){this.isStopped?handleStoppedNotification(function nextNotification(t){return createNotification("N",t,void 0)}(t),this):this._next(t)},Subscriber.prototype.error=function(t){this.isStopped?handleStoppedNotification(function errorNotification(t){return createNotification("E",void 0,t)}(t),this):(this.isStopped=!0,this._error(t))},Subscriber.prototype.complete=function(){this.isStopped?handleStoppedNotification(GS,this):(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},Subscriber.prototype._next=function(t){this.destination.next(t)},Subscriber.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},Subscriber.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},Subscriber}(BS),VS=Function.prototype.bind;function bind(t,r){return VS.call(t,r)}var WS=function(){function ConsumerObserver(t){this.partialObserver=t}return ConsumerObserver.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(t){handleUnhandledError(t)}},ConsumerObserver.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(t){handleUnhandledError(t)}else handleUnhandledError(t)},ConsumerObserver.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){handleUnhandledError(t)}},ConsumerObserver}(),$S=function(t){function SafeSubscriber(r,i,a){var u,l,c=t.call(this)||this;isFunction(r)||!r?u={next:null!=r?r:void 0,error:null!=i?i:void 0,complete:null!=a?a:void 0}:c&&zS.useDeprecatedNextContext?((l=Object.create(r)).unsubscribe=function(){return c.unsubscribe()},u={next:r.next&&bind(r.next,l),error:r.error&&bind(r.error,l),complete:r.complete&&bind(r.complete,l)}):u=r;return c.destination=new WS(u),c}return __extends(SafeSubscriber,t),SafeSubscriber}(QS);function handleUnhandledError(t){reportUnhandledError(t)}function handleStoppedNotification(t,r){var i=zS.onStoppedNotification;i&&YS.setTimeout((function(){return i(t,r)}))}var KS={closed:!0,next:noop,error:function defaultErrorHandler(t){throw t},complete:noop},qS="function"==typeof Symbol&&Symbol.observable||"@@observable";function identity(t){return t}function pipeFromArray(t){return 0===t.length?identity:1===t.length?t[0]:function piped(r){return t.reduce((function(t,r){return r(t)}),r)}}var XS=function(){function Observable(t){t&&(this._subscribe=t)}return Observable.prototype.lift=function(t){var r=new Observable;return r.source=this,r.operator=t,r},Observable.prototype.subscribe=function(t,r,i){var a=this,u=function isSubscriber(t){return t&&t instanceof QS||function isObserver(t){return t&&isFunction(t.next)&&isFunction(t.error)&&isFunction(t.complete)}(t)&&isSubscription(t)}(t)?t:new $S(t,r,i);return errorContext((function(){var t=a,r=t.operator,i=t.source;u.add(r?r.call(u,i):i?a._subscribe(u):a._trySubscribe(u))})),u},Observable.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},Observable.prototype.forEach=function(t,r){var i=this;return new(r=getPromiseCtor(r))((function(r,a){var u=new $S({next:function next(r){try{t(r)}catch(t){a(t),u.unsubscribe()}},error:a,complete:r});i.subscribe(u)}))},Observable.prototype._subscribe=function(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)},Observable.prototype[qS]=function(){return this},Observable.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return pipeFromArray(t)(this)},Observable.prototype.toPromise=function(t){var r=this;return new(t=getPromiseCtor(t))((function(t,i){var a;r.subscribe((function(t){return a=t}),(function(t){return i(t)}),(function(){return t(a)}))}))},Observable.create=function(t){return new Observable(t)},Observable}();function getPromiseCtor(t){var r;return null!==(r=null!=t?t:zS.Promise)&&void 0!==r?r:Promise}function isInteropObservable(t){return isFunction(t[qS])}function isAsyncIterable(t){return Symbol.asyncIterator&&isFunction(null==t?void 0:t[Symbol.asyncIterator])}function createInvalidObservableTypeError(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ZS=function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function isIterable(t){return isFunction(null==t?void 0:t[ZS])}function readableStreamLikeToAsyncGenerator(t){return __asyncGenerator(this,arguments,(function readableStreamLikeToAsyncGenerator_1(){var r,i,a;return __generator(this,(function(u){switch(u.label){case 0:r=t.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,__await(r.read())];case 3:return i=u.sent(),a=i.value,i.done?[4,__await(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,__await(a)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}}))}))}function isReadableStreamLike(t){return isFunction(null==t?void 0:t.getReader)}function innerFrom(t){if(t instanceof XS)return t;if(null!=t){if(isInteropObservable(t))return function fromInteropObservable(t){return new XS((function(r){var i=t[qS]();if(isFunction(i.subscribe))return i.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(t);if(PS(t))return function fromArrayLike(t){return new XS((function(r){for(var i=0;i<t.length&&!r.closed;i++)r.next(t[i]);r.complete()}))}(t);if(isPromise(t))return function fromPromise(t){return new XS((function(r){t.then((function(t){r.closed||(r.next(t),r.complete())}),(function(t){return r.error(t)})).then(null,reportUnhandledError)}))}(t);if(isAsyncIterable(t))return fromAsyncIterable(t);if(isIterable(t))return function fromIterable(t){return new XS((function(r){var i,a;try{for(var u=__values(t),l=u.next();!l.done;l=u.next()){var c=l.value;if(r.next(c),r.closed)return}}catch(t){i={error:t}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}r.complete()}))}(t);if(isReadableStreamLike(t))return function fromReadableStreamLike(t){return fromAsyncIterable(readableStreamLikeToAsyncGenerator(t))}(t)}throw createInvalidObservableTypeError(t)}function fromAsyncIterable(t){return new XS((function(r){(function process(t,r){var i,a,u,l;return __awaiter(this,void 0,void 0,(function(){var c,d;return __generator(this,(function(g){switch(g.label){case 0:g.trys.push([0,5,6,11]),i=__asyncValues(t),g.label=1;case 1:return[4,i.next()];case 2:if((a=g.sent()).done)return[3,4];if(c=a.value,r.next(c),r.closed)return[2];g.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return d=g.sent(),u={error:d},[3,11];case 6:return g.trys.push([6,,9,10]),a&&!a.done&&(l=i.return)?[4,l.call(i)]:[3,8];case 7:g.sent(),g.label=8;case 8:return[3,10];case 9:if(u)throw u.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}}))}))})(t,r).catch((function(t){return r.error(t)}))}))}function createOperatorSubscriber(t,r,i,a,u){return new JS(t,r,i,a,u)}var JS=function(t){function OperatorSubscriber(r,i,a,u,l,c){var d=t.call(this,r)||this;return d.onFinalize=l,d.shouldUnsubscribe=c,d._next=i?function(t){try{i(t)}catch(t){r.error(t)}}:t.prototype._next,d._error=u?function(t){try{u(t)}catch(t){r.error(t)}finally{this.unsubscribe()}}:t.prototype._error,d._complete=a?function(){try{a()}catch(t){r.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,d}return __extends(OperatorSubscriber,t),OperatorSubscriber.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&(null===(r=this.onFinalize)||void 0===r||r.call(this))}},OperatorSubscriber}(QS),eE={now:function now(){return(eE.delegate||Date).now()},delegate:void 0};function executeSchedule(t,r,i,a,u){void 0===a&&(a=0),void 0===u&&(u=!1);var l=r.schedule((function(){i(),u?t.add(this.schedule(null,a)):this.unsubscribe()}),a);if(t.add(l),!u)return l}function observeOn(t,r){return void 0===r&&(r=0),operate((function(i,a){i.subscribe(createOperatorSubscriber(a,(function(i){return executeSchedule(a,t,(function(){return a.next(i)}),r)}),(function(){return executeSchedule(a,t,(function(){return a.complete()}),r)}),(function(i){return executeSchedule(a,t,(function(){return a.error(i)}),r)})))}))}function subscribeOn(t,r){return void 0===r&&(r=0),operate((function(i,a){a.add(t.schedule((function(){return i.subscribe(a)}),r))}))}function scheduleAsyncIterable(t,r){if(!t)throw new Error("Iterable cannot be null");return new XS((function(i){executeSchedule(i,r,(function(){var a=t[Symbol.asyncIterator]();executeSchedule(i,r,(function(){a.next().then((function(t){t.done?i.complete():i.next(t.value)}))}),0,!0)}))}))}function scheduled(t,r){if(null!=t){if(isInteropObservable(t))return function scheduleObservable(t,r){return innerFrom(t).pipe(subscribeOn(r),observeOn(r))}(t,r);if(PS(t))return function scheduleArray(t,r){return new XS((function(i){var a=0;return r.schedule((function(){a===t.length?i.complete():(i.next(t[a++]),i.closed||this.schedule())}))}))}(t,r);if(isPromise(t))return function schedulePromise(t,r){return innerFrom(t).pipe(subscribeOn(r),observeOn(r))}(t,r);if(isAsyncIterable(t))return scheduleAsyncIterable(t,r);if(isIterable(t))return function scheduleIterable(t,r){return new XS((function(i){var a;return executeSchedule(i,r,(function(){a=t[ZS](),executeSchedule(i,r,(function(){var t,r,u;try{r=(t=a.next()).value,u=t.done}catch(t){return void i.error(t)}u?i.complete():i.next(r)}),0,!0)})),function(){return isFunction(null==a?void 0:a.return)&&a.return()}}))}(t,r);if(isReadableStreamLike(t))return function scheduleReadableStreamLike(t,r){return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(t),r)}(t,r)}throw createInvalidObservableTypeError(t)}function from(t,r){return r?scheduled(t,r):innerFrom(t)}function map(t,r){return operate((function(i,a){var u=0;i.subscribe(createOperatorSubscriber(a,(function(i){a.next(t.call(r,i,u++))})))}))}var tE=createErrorClass((function(t){return function ObjectUnsubscribedErrorImpl(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),rE=function(t){function Subject(){var r=t.call(this)||this;return r.closed=!1,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return __extends(Subject,t),Subject.prototype.lift=function(t){var r=new nE(this,this);return r.operator=t,r},Subject.prototype._throwIfClosed=function(){if(this.closed)throw new tE},Subject.prototype.next=function(t){var r=this;errorContext((function(){var i,a;if(r._throwIfClosed(),!r.isStopped){var u=r.observers.slice();try{for(var l=__values(u),c=l.next();!c.done;c=l.next()){c.value.next(t)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}}}))},Subject.prototype.error=function(t){var r=this;errorContext((function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var i=r.observers;i.length;)i.shift().error(t)}}))},Subject.prototype.complete=function(){var t=this;errorContext((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var r=t.observers;r.length;)r.shift().complete()}}))},Subject.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(Subject.prototype,"observed",{get:function get(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),Subject.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},Subject.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},Subject.prototype._innerSubscribe=function(t){var r=this,i=r.hasError,a=r.isStopped,u=r.observers;return i||a?US:(u.push(t),new BS((function(){return arrRemove(u,t)})))},Subject.prototype._checkFinalizedStatuses=function(t){var r=this,i=r.hasError,a=r.thrownError,u=r.isStopped;i?t.error(a):u&&t.complete()},Subject.prototype.asObservable=function(){var t=new XS;return t.source=this,t},Subject.create=function(t,r){return new nE(t,r)},Subject}(XS),nE=function(t){function AnonymousSubject(r,i){var a=t.call(this)||this;return a.destination=r,a.source=i,a}return __extends(AnonymousSubject,t),AnonymousSubject.prototype.next=function(t){var r,i;null===(i=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===i||i.call(r,t)},AnonymousSubject.prototype.error=function(t){var r,i;null===(i=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===i||i.call(r,t)},AnonymousSubject.prototype.complete=function(){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===r||r.call(t)},AnonymousSubject.prototype._subscribe=function(t){var r,i;return null!==(i=null===(r=this.source)||void 0===r?void 0:r.subscribe(t))&&void 0!==i?i:US},AnonymousSubject}(rE),iE=new XS((function(t){return t.complete()}));function filter(t,r){return operate((function(i,a){var u=0;i.subscribe(createOperatorSubscriber(a,(function(i){return t.call(r,i,u++)&&a.next(i)})))}))}var aE=function(t){function ReplaySubject(r,i,a){void 0===r&&(r=1/0),void 0===i&&(i=1/0),void 0===a&&(a=eE);var u=t.call(this)||this;return u._bufferSize=r,u._windowTime=i,u._timestampProvider=a,u._buffer=[],u._infiniteTimeWindow=!0,u._infiniteTimeWindow=i===1/0,u._bufferSize=Math.max(1,r),u._windowTime=Math.max(1,i),u}return __extends(ReplaySubject,t),ReplaySubject.prototype.next=function(r){var i=this,a=i.isStopped,u=i._buffer,l=i._infiniteTimeWindow,c=i._timestampProvider,d=i._windowTime;a||(u.push(r),!l&&u.push(c.now()+d)),this._trimBuffer(),t.prototype.next.call(this,r)},ReplaySubject.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(t),i=this._infiniteTimeWindow,a=this._buffer.slice(),u=0;u<a.length&&!t.closed;u+=i?1:2)t.next(a[u]);return this._checkFinalizedStatuses(t),r},ReplaySubject.prototype._trimBuffer=function(){var t=this,r=t._bufferSize,i=t._timestampProvider,a=t._buffer,u=t._infiniteTimeWindow,l=(u?1:2)*r;if(r<1/0&&l<a.length&&a.splice(0,a.length-l),!u){for(var c=i.now(),d=0,g=1;g<a.length&&a[g]<=c;g+=2)d=g;d&&a.splice(0,d+1)}},ReplaySubject}(rE);var oE,sE,uE,lE=function encodePath(t){return encodeURIComponent(t).replace("(","%28").replace(")","%29")},cE=function decodePath(t){return decodeURIComponent(t).replace("%28","(").replace("%29",")")},dE=function formatWatchPath(t){return"/watch/".concat(lE(t.replace("/watch/","")))},fE={},hE=function getConfig(){return fE},gE=function setConfig(t){fE=t},pE=null===(oE=Intl)||void 0===oE||null===(sE=oE.DateTimeFormat())||void 0===sE||null===(uE=sE.resolvedOptions())||void 0===uE?void 0:uE.timeZone;function getThinkAnalyticsData(){var t,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(r){var i,a,u=Cr.getHistory();t=null!==(i=null===(a=u[u.length-1])||void 0===a?void 0:a.state)&&void 0!==i?i:{}}else t=Cr.getActivePage();var l=t,c=l.taArgs,d=(c=void 0===c?{}:c).pagePath,g=void 0===d?"":d,p=c.pageTemplate,m=void 0===p?"":p,v=c.refUseCase,b=void 0===v?"":v,M={timezone:pE,pageTemplate:m,pagePath:g};return""===b||(M.refUseCase=b),M}var mE=!1,yE=function isLoggedIn(t){return void 0!==t&&(mE=t),mE};function _isPlaceholder(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function _curry1(t){return function f1(r){return 0===arguments.length||_isPlaceholder(r)?f1:t.apply(this,arguments)}}function _curry2(t){return function f2(r,i){switch(arguments.length){case 0:return f2;case 1:return _isPlaceholder(r)?f2:_curry1((function(i){return t(r,i)}));default:return _isPlaceholder(r)&&_isPlaceholder(i)?f2:_isPlaceholder(r)?_curry1((function(r){return t(r,i)})):_isPlaceholder(i)?_curry1((function(i){return t(r,i)})):t(r,i)}}}function _curry3(t){return function f3(r,i,a){switch(arguments.length){case 0:return f3;case 1:return _isPlaceholder(r)?f3:_curry2((function(i,a){return t(r,i,a)}));case 2:return _isPlaceholder(r)&&_isPlaceholder(i)?f3:_isPlaceholder(r)?_curry2((function(r,a){return t(r,i,a)})):_isPlaceholder(i)?_curry2((function(i,a){return t(r,i,a)})):_curry1((function(a){return t(r,i,a)}));default:return _isPlaceholder(r)&&_isPlaceholder(i)&&_isPlaceholder(a)?f3:_isPlaceholder(r)&&_isPlaceholder(i)?_curry2((function(r,i){return t(r,i,a)})):_isPlaceholder(r)&&_isPlaceholder(a)?_curry2((function(r,a){return t(r,i,a)})):_isPlaceholder(i)&&_isPlaceholder(a)?_curry2((function(i,a){return t(r,i,a)})):_isPlaceholder(r)?_curry1((function(r){return t(r,i,a)})):_isPlaceholder(i)?_curry1((function(i){return t(r,i,a)})):_isPlaceholder(a)?_curry1((function(a){return t(r,i,a)})):t(r,i,a)}}}function _has(t,r){return Object.prototype.hasOwnProperty.call(r,t)}var vE=Object.prototype.toString,_E=function(){return"[object Arguments]"===vE.call(arguments)?function _isArguments(t){return"[object Arguments]"===vE.call(t)}:function _isArguments(t){return _has("callee",t)}}(),TE=_E,bE=!{toString:null}.propertyIsEnumerable("toString"),ME=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],SE=function(){return arguments.propertyIsEnumerable("length")}(),IE=function contains(t,r){for(var i=0;i<t.length;){if(t[i]===r)return!0;i+=1}return!1},DE="function"!=typeof Object.keys||SE?_curry1((function keys(t){if(Object(t)!==t)return[];var r,i,a=[],u=SE&&TE(t);for(r in t)!_has(r,t)||u&&"length"===r||(a[a.length]=r);if(bE)for(i=ME.length-1;i>=0;)_has(r=ME[i],t)&&!IE(a,r)&&(a[a.length]=r),i-=1;return a})):_curry1((function keys(t){return Object(t)!==t?[]:Object.keys(t)})),AE=DE,CE=Number.isInteger||function _isInteger(t){return t<<0===t},NE=_curry2((function nth(t,r){var i=t<0?r.length+t:t;return function _isString(t){return"[object String]"===Object.prototype.toString.call(t)}(r)?r.charAt(i):r[i]})),xE=_curry2((function paths(t,r){return t.map((function(t){for(var i,a=r,u=0;u<t.length;){if(null==a)return;i=t[u],a=CE(i)?NE(i,a):a[i],u+=1}return a}))})),kE=_curry2((function path(t,r){return xE([t],r)[0]})),wE=_curry1((function type(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function _arrayFromIterator(t){for(var r,i=[];!(r=t.next()).done;)i.push(r.value);return i}function _includesWith(t,r,i){for(var a=0,u=i.length;a<u;){if(t(r,i[a]))return!0;a+=1}return!1}var OE="function"==typeof Object.is?Object.is:function _objectIs(t,r){return t===r?0!==t||1/t==1/r:t!=t&&r!=r};function _uniqContentEquals(t,r,i,a){var u=_arrayFromIterator(t);function eq(t,r){return _equals(t,r,i.slice(),a.slice())}return!_includesWith((function(t,r){return!_includesWith(eq,r,t)}),_arrayFromIterator(r),u)}function _equals(t,r,i,a){if(OE(t,r))return!0;var u=wE(t);if(u!==wE(r))return!1;if(null==t||null==r)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof r["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](r)&&"function"==typeof r["fantasy-land/equals"]&&r["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof r.equals)return"function"==typeof t.equals&&t.equals(r)&&"function"==typeof r.equals&&r.equals(t);switch(u){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function _functionName(t){var r=String(t).match(/^function (\w*)/);return null==r?"":r[1]}(t.constructor))return t===r;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof r||!OE(t.valueOf(),r.valueOf()))return!1;break;case"Date":if(!OE(t.valueOf(),r.valueOf()))return!1;break;case"Error":return t.name===r.name&&t.message===r.message;case"RegExp":if(t.source!==r.source||t.global!==r.global||t.ignoreCase!==r.ignoreCase||t.multiline!==r.multiline||t.sticky!==r.sticky||t.unicode!==r.unicode)return!1}for(var l=i.length-1;l>=0;){if(i[l]===t)return a[l]===r;l-=1}switch(u){case"Map":return t.size===r.size&&_uniqContentEquals(t.entries(),r.entries(),i.concat([t]),a.concat([r]));case"Set":return t.size===r.size&&_uniqContentEquals(t.values(),r.values(),i.concat([t]),a.concat([r]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=AE(t);if(c.length!==AE(r).length)return!1;var d=i.concat([t]),g=a.concat([r]);for(l=c.length-1;l>=0;){var p=c[l];if(!_has(p,r)||!_equals(r[p],t[p],d,g))return!1;l-=1}return!0}var LE=_curry2((function equals(t,r){return _equals(t,r,[],[])})),RE=_curry2((function defaultTo(t,r){return null==r||r!=r?t:r})),jE=_curry3((function pathEq(t,r,i){return LE(kE(t,i),r)})),PE=_curry3((function pathOr(t,r,i){return RE(t,kE(r,i))})),FE=function hasTagline(t){return kE(["__childList","_refs","Tagline"],t)};function isValidTAVideoType(t){return"movie"===t||"episode"===t}var BE=function parentalLevelEnum(t){var r,i=hE().classification;return(r=i.find((function(r){return r.level===t})))||(r=function getClosest(t,r){return t.reduce((function(t,i){return Math.abs(i.level-r)<Math.abs(t.level-r)?i:t}))}(i,t)),r.name},UE=function parentalControlGroup(t){switch(t){case"TV-G":case"TV-Y":case"TV-Y7":case"G":return 1;case"TV-PG":case"PG":return 10;case"TV-14":case"M":case"MA15+":return 14;case"TV-MA":case"NR":case"E":case"R18+":return 17;default:return 0}},zE=[],YE=function addRecentSearch(t){var r=G("recent_searches")||[];r.includes(t)||(r.unshift(t),r.length>5&&r.pop(),H("recent_searches",r),zE=r)},GE=function clearRecentSearches(){Q("recent_searches"),zE=[]},HE=function setRecentSearches(t){zE=t},QE=function getRecentSearches(){return zE},VE="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMTAwNiIgaGVpZ2h0PSI0MTkiIHZpZXdCb3g9IjAgMCAxMDA2IDQxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgb3BhY2l0eT0iMC41IiBjbGlwLXBhdGg9InVybCgjY2xpcDBfMjY2XzY3MykiPgo8cGF0aCBkPSJNMjI2LjQ0OCAxMDkuODAyVjg0LjcwNTlIMjA1LjkxMkMyMDEuNjQgODQuNzA1OSAxOTguMTI1IDg4LjIxMjUgMTk4LjEyNSA5Mi40NzU0VjI2Mi4yMzRIMjI2Ljc5M1YxNzAuOTk1QzIyOC41ODUgMTM4LjY4IDI1NS4xODUgMTEzLjAzMyAyODcuMzY4IDExMi41NTJMMjk2LjUzNCAxMTIuNDE1Vjg0LjYzNzJMMjg2Ljg4NiA4NC43MDU5QzI2NC41NTggODUuMDQ5NyAyNDMuMTI2IDkzLjkxOTMgMjI2LjQ0OCAxMDkuODAyWk00MzAuMzY0IDIyNC4xNDNDNDI0Ljk4OCAyMjAuNzc0IDQyMC45OTEgMjE1LjU0OSA0MTkuMiAyMDkuNDk4QzQxNy44OSAyMDUuMzczIDQxNy44OSAyMDEuMTc5IDQxNy44OSAxOTYuNzc4VjExMi44MjdINDY5Ljc4MlY4NC41Njg0SDQxNy44OVY4LjczMDQ0SDM5Ny4zNTRDMzkzLjA4MSA4LjczMDQ0IDM4OS41NjcgMTIuMjM3IDM4OS41NjcgMTYuNDk5OVY4NC42MzcySDM1OC4zNDlWMTEyLjg5NkgzODkuNDk4VjIwMi42MjNDMzg5LjQ5OCAyMDUuNzE3IDM5MC4yNTYgMjMzLjM1NyA0MTUuNzU0IDI0OC40ODNDNDM1LjM5NCAyNjAuMTcyIDQ1OC4yMDUgMjY1LjM5NyA0NTkuMTY5IDI2NS42NzJMNDY4LjEyOCAyNjcuNzM1TDQ3NC4zOTkgMjQwLjE2NEw0NjUuNDQxIDIzOC4xMDFDNDY0LjY4MyAyMzcuODk1IDQ0NS40NTYgMjMzLjM1NyA0MzAuMzY0IDIyNC4xNDNaTTMwNy4zNTMgMjIuOTYzTDMyNy40MDcgMy4wMjM2OEwzNDcuMzkyIDIyLjk2M0wzMjcuNDA3IDQyLjk3MUwzMDcuMzUzIDIyLjk2M1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0zMjEgODQuNjM5OUMzMTYuNzI3IDg0LjYzOTkgMzEzLjIxMiA4OC4xNDY0IDMxMy4yMTIgOTIuNDA5M1YyNjIuMTY4SDM0MS41MzZWODQuNjM5OUgzMjFaTTkyLjYyMDIgMjMzLjk3OEM1OS4zMzQ5IDIzMy45NzggMzIuMjUxOSAyMDYuODIgMzIuMjUxOSAxNzMuNDczQzMyLjI1MTkgMTQwLjEyNiA1OS4zMzQ5IDExMi45NjcgOTIuNjIwMiAxMTIuOTY3QzEyNS45MDUgMTEyLjk2NyAxNTIuOTg4IDE0MC4xMjYgMTUyLjk4OCAxNzMuNDczQzE1Mi45ODggMjA2LjgyIDEyNS45NzQgMjMzLjk3OCA5Mi42MjAyIDIzMy45NzhaTTkyLjYyMDIgODQuNjM5OUM3NS4xODUxIDg0LjYzOTkgNTkuNjEwNiA5MC44Mjc5IDQ0LjQ0OTYgOTYuODc4NEM0Mi4yNDQ0IDk3Ljc3MjMgNDAuMDM5MiA5OC41OTc0IDM3LjkwMjggOTkuNDkxMkwzMS4zNTYxIDEwMi4wMzVWOC42NjQzMUgxMC44MTk4QzYuNDc4MjcgOC43MzMwNiAzLjAzMjU5IDEyLjE3MDkgMy4wMzI1OSAxNi41MDI1VjE3Mi4xNjZDMy4wMzI1OSAxODYuNzQzIDYuMDY0NzkgMjAwLjIxOSAxMS45OTE0IDIxMi4yNTFDMjcuMjIxMiAyNDIuNzc5IDU4LjQzOTEgMjYyLjA5OSA5Mi41NTEzIDI2Mi4yMzdDMTQxLjQ4IDI2Mi4yMzcgMTgxLjI0MyAyMjIuNDI3IDE4MS4yNDMgMTczLjQ3M0MxODEuMjQzIDEyNC41MTggMTQxLjU0OSA4NC42Mzk5IDkyLjYyMDIgODQuNjM5OVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik03NzAuOCAyMzQuMTg1QzczNy4xNyAyMzQuMTg1IDcwOS45NDkgMjA3LjAyNyA3MDkuOTQ5IDE3My40NzRDNzA5Ljk0OSAxMzkuOTIxIDczNy4xNyAxMTIuNzYyIDc3MC44IDExMi43NjJDODA0LjQzIDExMi43NjIgODMxLjY1MSAxMzkuOTIxIDgzMS42NTEgMTczLjQ3NEM4MzEuNTgyIDIwNy4wMjcgODA0LjM2MSAyMzQuMTE3IDc3MC44IDIzNC4xODVaTTc3MC44IDg0LjcwOTRDNzIxLjY2NSA4NC43MDk0IDY4MS44MzMgMTI0LjQ1IDY4MS44MzMgMTczLjQ3NEM2ODEuODMzIDIyMi40OTcgNzIxLjY2NSAyNjIuMjM4IDc3MC44IDI2Mi4yMzhDODE5LjkzNSAyNjIuMjM4IDg1OS43NjcgMjIyLjQ5NyA4NTkuNzY3IDE3My40NzRDODU5Ljc2NyAxMjQuNDUgODE5LjkzNSA4NC43MDk0IDc3MC44IDg0LjcwOTRaTTU3Ni4yNTcgMjMzLjkxQzU0Mi45NzIgMjMzLjkxIDUxNS44ODkgMjA2LjgyIDUxNS44ODkgMTczLjQwNUM1MTUuODg5IDEzOS45ODkgNTQyLjk3MiAxMTIuODk5IDU3Ni4yNTcgMTEyLjg5OUM2MDkuNTQyIDExMi44OTkgNjM2LjYyNSAxNDAuMDU4IDYzNi42MjUgMTczLjQwNUM2MzYuNjI1IDIwNi43NTIgNjA5LjU0MiAyMzMuOTEgNTc2LjI1NyAyMzMuOTFaTTU3Ni4yNTcgODQuNjQwN0M1NTguODIyIDg0LjY0MDcgNTQzLjI0OCA5MC44Mjg3IDUyOC4wODcgOTYuODc5MkM1MjUuODgxIDk3Ljc3MzEgNTIzLjY3NiA5OC41OTgyIDUyMS41NCA5OS40OTJMNTE0Ljk5MyAxMDIuMDM2VjguODAyNjFINDk0LjQ1N0M0OTAuMTg0IDguODAyNjEgNDg2LjczOSAxMi4yNDA0IDQ4Ni42NyAxNi40MzQ1VjE3Mi4xNjdDNDg2LjY3IDE4Ni43NDQgNDg5LjcwMiAyMDAuMjIgNDk1LjYyOCAyMTIuMjUyQzUxMC44NTggMjQyLjc4IDU0Mi4wNzYgMjYyLjEgNTc2LjE4OCAyNjIuMjM4QzYyNS4xMTcgMjYyLjIzOCA2NjQuODggMjIyLjQyOCA2NjQuODggMTczLjQ3NEM2NjQuODggMTI0LjUxOSA2MjUuMTE3IDg0LjY0MDcgNTc2LjI1NyA4NC42NDA3WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTEwMDIuOTcgOTguODAxTDk4MC41MDIgODIuMDI0NUw5MjkuMzY5IDE1MC4wOTNMODc4LjMwNCA4Mi4wMjQ1TDg1NS44MzggOTguODAxTDkxMS44NjQgMTczLjQ3TDg1NS44MzggMjQ4LjIwOEw4NzguMzA0IDI2NC45ODVMOTI5LjM2OSAxOTYuODQ3TDk4MC41MDIgMjY0Ljk4NUwxMDAyLjk3IDI0OC4yMDhMOTQ2Ljk0MSAxNzMuNDdMMTAwMi45NyA5OC44MDFaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTc0Ny4xMDkgMzIwLjEwOFYzNzYuMDcxSDY4Ny42OVYzMjAuMTA4SDc0Ny4xMDlaTTcxNy40IDMyNy45OTJINzAzLjMxN1YzNjguMTg3SDcxOS40NzlDNzE5LjQ3OSAzNjguMTg3IDczMi45NjcgMzY4LjI0NiA3MzIuOTY3IDM1Ni44NjNDNzMyLjk2NyAzNTYuODYzIDczMy4yNjUgMzQ5LjE1NyA3MjQuMTczIDM0Ni44NDVDNzI0LjE3MyAzNDYuODQ1IDcyOS40MDIgMzQ0LjY1MSA3MjkuMzQzIDMzOC43ODJDNzI5LjM0MyAzMzguNzgyIDczMC4xMTUgMzI5LjE3OCA3MTcuNCAzMjcuOTkyWk04MTUuNjIgMzc2LjEzMUg3NTYuMlYzMjAuMTY3SDgxNS42MlYzNzYuMTMxWk03NzcuNDcyIDM2Ni43MDRDNzkxLjYxNCAzNzIuMjc3IDgwMy44NTUgMzY1LjA0NSA4MDMuODU1IDM2NS4wNDVWMzU3LjMzOEM3OTQuNzY0IDM2My4xNDcgNzg4LjA0OSAzNjIuMzE4IDc4OC4wNDkgMzYyLjMxOEM3NzIuMDY1IDM2MS41NDcgNzcyLjYgMzQ4LjA4OSA3NzIuNiAzNDguMDg5Qzc3My4yNTQgMzMzLjQ0NiA3ODguMjI3IDMzMy43NDMgNzg4LjIyNyAzMzMuNzQzQzc5Ni4yNDkgMzMzLjg2MSA4MDMuNDk4IDMzOC4zMDggODAzLjQ5OCAzMzguMzA4VjMzMC44OTdDNzk2Ljk2MiAzMjguMTcgNzkyLjM4NyAzMjcuNjk2IDc5Mi4zODcgMzI3LjY5NkM3ODQuNzIyIDMyNi45ODUgNzgwLjUwMyAzMjguNTg1IDc4MC41MDMgMzI4LjU4NUM3NjQuNjM4IDMzMy40NDcgNzY1LjExMyAzNDguMDg5IDc2NS4xMTMgMzQ4LjA4OUM3NjUuNTg5IDM2Mi4zNzcgNzc3LjQ3MiAzNjYuNzA0IDc3Ny40NzIgMzY2LjcwNFpNNjQ5LjU0MyAzNTAuOTk0QzY1Ny4zMjcgMzUwLjkzNSA2NTcuMDg5IDM1Ni4yNzEgNjU3LjA4OSAzNTYuMjcxQzY1Ny4wODkgMzYyLjM3NyA2NDkuNDgzIDM2Mi4wMjEgNjQ5LjU0MyAzNjEuOTYySDY0MS45OTZWMzUwLjk5NEg2NDkuNTQzWk04NDUuMjQ4IDM0Ny4xNDFWMzQ3LjI2Qzg0MC43OTEgMzQ4LjgwMSA4MzguMTE3IDM1My4xMjkgODM4LjE3NyAzNTcuNjM0QzgzOC4xNzcgMzY0LjYzIDg0NC4wNTkgMzcwLjA4NCA4NTMuMDMyIDM3MC4wODRDODYyLjQ3OSAzNzAuMDg0IDg2OC4wNjUgMzY0LjQ1MiA4NjguMDY1IDM1NS45NzRWMzUxLjA1NEg4NzAuOTc2Qzg3Mi41MjEgMzUxLjA1NCA4NzMuNDEyIDM1MC4yMjQgODczLjQxMiAzNDguNjIzVjM0Ni45NjNDODczLjQxMiAzNDUuNDIyIDg3Mi41ODEgMzQ0LjUzMiA4NzAuOTc2IDM0NC41MzJIODY4LjA2NVYzNDEuMTUzQzg2OC4wNjUgMzM5Ljc5IDg2Ny4xNzMgMzM5LjEzOCA4NjUuNTY5IDMzOS4xMzhIODYzLjA3NEM4NjEuNDY5IDMzOS4xMzggODYwLjU3OCAzMzkuOTA4IDg2MC41NzggMzQxLjUwOVYzNDQuNDczSDg1My45MjNDODQ4LjkzMiAzNDQuNDczIDg0Ny41NjUgMzQxLjMzMSA4NDcuNTY1IDMzOC45NkM4NDcuNTY1IDMzNS44NzcgODQ5LjgyMyAzMzMuMzg3IDg1My42MjYgMzMzLjM4N0g4NTUuNTg3Qzg1Ny4xMzIgMzMzLjM4NyA4NTguMDIzIDMzMi42MTcgODU4LjAyMyAzMzEuMDE2VjMyOS41MzRDODU4LjAyMyAzMjcuOTkyIDg1Ny4xOTEgMzI3LjEwMyA4NTUuNTg3IDMyNy4xMDNIODUzLjA5MUM4NDUuOTAxIDMyNy4xMDMgODM5Ljk1OSAzMzAuNzE5IDgzOS45NTkgMzM4LjA3MUM4MzkuOTU5IDM0NS4wNjYgODQ1LjI0OCAzNDcuMTQxIDg0NS4yNDggMzQ3LjE0MVpNODYwLjUxOCAzNTUuNjE4Qzg2MC41MTggMzYwLjY1OCA4NTcuNzI2IDM2My4yMDcgODUyLjk3MiAzNjMuMjA3Qzg0OC42OTQgMzYzLjIwNyA4NDUuODQyIDM2MC40OCA4NDUuODQyIDM1Ny4yMTlDODQ1Ljg0MiAzNTMuMTg4IDg0OC44MTMgMzUxLjExMyA4NTMuNDQ4IDM1MS4xMTNIODYwLjUxOFYzNTUuNjE4Wk05MTEuNTM3IDM3NS44OTNMOTEyLjkwNCAzNzYuMDcxTDkxOC4wNzMgMzc2LjAxMkw5MTkuMzgxIDM3NS44MzRDOTIxLjEwNCAzNzUuNjU2IDkyMi44MjcgMzc1LjI0MSA5MjQuNDkxIDM3NC43MDhDOTI2Ljg2OCAzNzMuOTM3IDkyOS4xODUgMzcyLjgxMSA5MzEuMjA1IDM3MS4zMjlDOTMxLjYyMSAzNzEuMDMyIDkzMi4wMzcgMzcwLjczNiA5MzIuMzk0IDM3MC40MzlDOTMyLjUxNiAzNzAuNTI0IDkzMi42MzkgMzcwLjYxIDkzMi43NjIgMzcwLjY5N0M5MzIuODk2IDM3MC43OTMgOTMzLjAzMSAzNzAuODkgOTMzLjE2NiAzNzAuOTg2QzkzMy42ODEgMzcxLjM1NSA5MzQuMTk2IDM3MS43MjQgOTM0LjcxMSAzNzIuMDRDOTM2LjczMSAzNzMuMjg1IDkzOC45MyAzNzQuMjMzIDk0MS4yNDcgMzc0LjgyNkM5NDIuNzkyIDM3NS4yNDEgOTQ0LjMzNyAzNzUuNTM4IDk0NS45NDEgMzc1LjcxNkM5NDYuNzcyIDM3NS44MzQgOTQ3LjY2MyAzNzUuODkzIDk0OC41NTMgMzc1Ljk1M0w5NDguNTU2IDM3NS45NTNMOTQ5LjAzMSAzNzYuMDEySDk1Mi4wMDJDOTUyLjM1OCAzNzUuOTUzIDk1Mi43MTUgMzc1Ljg5MyA5NTMuMDcyIDM3NS44OTNDOTU2LjEwMiAzNzUuNjU2IDk1OS4wMTMgMzc0Ljk0NSA5NjEuODA2IDM3My43NTlDOTY2LjAyNSAzNzEuOTgxIDk2OS41OSAzNjguOTU3IDk3Mi4wMjYgMzY1LjA0NUw5NzIuMDg2IDM2NC45ODVMOTcyLjI2NCAzNjUuMjgyQzk3My4wNjQgMzY2LjQ2NCA5NzMuODQ5IDM2Ny42NjEgOTc0LjYzNCAzNjguODU4TDk3NC42NCAzNjguODY3Qzk3NS40MjcgMzcwLjA2OCA5NzYuMjE1IDM3MS4yNjkgOTc3LjAxOCAzNzIuNDU1Qzk3OC4yMDYgMzc0LjQ3MSA5ODAuMjg2IDM3NS44MzQgOTgyLjY2MiAzNzUuOTUzQzk4Mi43MjIgMzc1Ljk1MyA5ODIuNzY2IDM3NS45NjggOTgyLjgxMSAzNzUuOTgyQzk4Mi44NTYgMzc1Ljk5NyA5ODIuOSAzNzYuMDEyIDk4Mi45NiAzNzYuMDEySDk4NS44NzFMOTg3LjIzOCAzNzUuNzc1Qzk4OC45MDEgMzc1LjUzOCA5OTAuNTA2IDM3NC43MDggOTkxLjYzNSAzNzMuNDA0Qzk5Mi4yMjkgMzcyLjc1MSA5OTIuNzA0IDM3Mi4wNCA5OTMuMTggMzcxLjMyOUM5OTguMzQ5IDM2My4wMjkgMTAwMi42MyAzNTQuMjU1IDEwMDYuMDEgMzQ1LjEyNUMxMDA2LjMxIDM0NC4yOTUgMTAwNi42MSAzNDMuNDY1IDEwMDYuODUgMzQyLjYzNUMxMDA2Ljg1IDM0Mi42MiAxMDA2Ljg1IDM0Mi42IDEwMDYuODYgMzQyLjU3OEMxMDA2Ljg2IDM0Mi41NTkgMTAwNi44NyAzNDIuNTM4IDEwMDYuODggMzQyLjUxN0MxMDA2Ljg5IDM0Mi40NzIgMTAwNi45MSAzNDIuNDI4IDEwMDYuOTEgMzQyLjM5OEMxMDA3LjAyIDM0MS44MDUgMTAwNi42NyAzNDEuMjcyIDEwMDYuMDcgMzQxLjE1M0wxMDA1Ljg0IDM0MS4wOTRMMTAwMy40IDM0MC4zMjNDMTAwMi45NCAzNDAuMTg1IDEwMDIuNDkgMzQwLjA0IDEwMDIuMDMgMzM5Ljg5NUwxMDAyLjAzIDMzOS44OTRDMTAwMS4xMiAzMzkuNjA1IDEwMDAuMjEgMzM5LjMxNSA5OTkuMyAzMzkuMDc4Qzk5OS4xODEgMzM5LjAxOSA5OTkuMDYyIDMzOC45NiA5OTguOTQzIDMzOC45NkM5OTguMjMgMzM4Ljg0MSA5OTcuNTc3IDMzOS4zNzUgOTk3LjQ1OCAzNDAuMDg2Qzk5Ni4yNjkgMzQ0LjA1OCA5OTQuODQzIDM0Ny45NzEgOTkzLjI5OCAzNTEuODI0Qzk5MS43NTQgMzU1Ljc5NiA5ODkuOTcxIDM1OS42NSA5ODcuOTUxIDM2My4zODVDOTg3Ljg5MSAzNjMuNTAzIDk4Ny44MzIgMzYzLjU2MiA5ODcuNzcyIDM2My42ODFMOTg3LjQ3NSAzNjMuMjA3Qzk4Ni4zOTcgMzYxLjMwMiA5ODUuMzI4IDM1OS4zODkgOTg0LjI1NyAzNTcuNDc0TDk4NC4yNTUgMzU3LjQ3TDk4NC4yNTMgMzU3LjQ2N0M5ODIuNDkzIDM1NC4zMTcgOTgwLjcyOSAzNTEuMTYyIDk3OC45MTkgMzQ4LjAzQzk3Ny43MjUgMzQ1Ljk0NSA5NzYuNDQ3IDM0My45NDMgOTc1LjE1NiAzNDEuOTE5Qzk3NC45MDUgMzQxLjUyNyA5NzQuNjU0IDM0MS4xMzMgOTc0LjQwMyAzNDAuNzM4Qzk3My44NjggMzM5Ljc5IDk3Mi45MTggMzM5LjEzOCA5NzEuNzg5IDMzOC45MDFDOTcxLjAxNiAzMzguNzgyIDk3MC4yNDQgMzM4Ljc4MiA5NjkuNDcxIDMzOC45NkM5NjYuNjE5IDMzOS40MzQgOTY0LjA2NCAzNDAuODU3IDk2Mi4xMDMgMzQyLjkzMkM5NjAuNzk2IDM0NC4xNzcgOTYwLjQ0IDM0Ni4xOTIgOTYxLjI3MSAzNDcuNzkzQzk2MS40NTUgMzQ4LjE5NyA5NjEuNjg1IDM0OC41NzggOTYxLjkxNyAzNDguOTY0Qzk2Mi4wNjEgMzQ5LjIwMiA5NjIuMjA1IDM0OS40NDIgOTYyLjM0MSAzNDkuNjlDOTYyLjc1NyAzNTAuNDAyIDk2My4xMTMgMzUxLjExMyA5NjMuNDcgMzUxLjg4NEM5NjQuNDIxIDM1NC4xOTYgOTY0LjU5OSAzNTYuODA0IDk2My45NDUgMzU5LjIzNUM5NjIuOTk1IDM2Mi42MTQgOTYwLjczNyAzNjQuNzQ4IDk1Ny41ODcgMzY2LjA1MkM5NTYuMDQyIDM2Ni43MDQgOTU0LjM3OSAzNjcuMDYgOTUyLjcxNSAzNjcuMTE5Qzk1MS4wNTEgMzY3LjIzOCA5NDkuMzg4IDM2Ny4xMTkgOTQ3LjcyNCAzNjYuNzA0Qzk0NC44MTIgMzY2LjA1MiA5NDIuMzc2IDM2NC4wMzcgOTQxLjI0NyAzNjEuMzFDOTQwLjU5MyAzNTkuNjUgOTQwLjIzNyAzNTcuODEyIDk0MC4yMzcgMzU2LjAzM1YzNDguMTQ5SDk0MC4yOTZMOTQwLjUzNCAzNDguMjA4Qzk0MS44NDEgMzQ4LjY4MiA5NDMuMjY3IDM0OC45MTkgOTQ0LjY5MyAzNDguOTE5SDk1Mi4xOEM5NTIuNjU2IDM0OC44NiA5NTMuMDcyIDM0OC4zODYgOTUzLjAxMiAzNDcuODUyVjM0MC42NzlDOTUzLjA3MiAzNDAuMTQ2IDk1Mi41OTYgMzM5LjY3MSA5NTIuMDYxIDMzOS42NzFIOTQwLjIzN1YzMjcuOTMzQzk0MC4yOTYgMzI2Ljc0NyA5MzkuNzAyIDMyNS42MjEgOTM4LjY5MiAzMjQuOTY5QzkzOC4yMTcgMzI0LjY3MyA5MzcuNjgyIDMyNC40MzUgOTM3LjE0NyAzMjQuMjU4QzkzNS4yNDYgMzIzLjcyNCA5MzMuMzQ0IDMyMy42MDUgOTMxLjQ0MyAzMjMuNzgzQzkzMC41NTIgMzIzLjg0MyA5MjkuNjAxIDMyNC4wMiA5MjguNzEgMzI0LjE5OEM5MjguMjk0IDMyNC4zMTcgOTI3Ljg3OCAzMjQuNDk1IDkyNy41MjEgMzI0LjY3M0M5MjYuMjE0IDMyNS4yMDYgOTI1LjQ0MSAzMjYuNTEgOTI1LjUwMSAzMjcuOTMzVjM1NC44NDhDOTI1LjUwMSAzNTYuMTUyIDkyNS40NDIgMzU3LjUxNiA5MjUuMzgyIDM1OC44MkM5MjUuMzIzIDM2MC4zMDIgOTI0Ljk2NiAzNjEuNzg0IDkyNC4zMTIgMzYzLjE0N0M5MjMuMzAyIDM2NS40IDkyMS4xNjMgMzY2Ljk0MiA5MTguNzI3IDM2Ny4yMzhDOTE3LjY1OCAzNjcuNDE2IDkxNi41MjkgMzY3LjQxNiA5MTUuNCAzNjcuMjk3QzkxNC4yMTEgMzY3LjE3OSA5MTMuMDgyIDM2Ni43NjQgOTEyLjA3MiAzNjYuMTEyQzkxMC4yMyAzNjQuODY3IDkwOS4xNjEgMzYyLjczMiA5MDkuMjIgMzYwLjUzOUM5MDkuMTggMzU3LjIyMSA5MDkuMTk0IDM1My45MyA5MDkuMjA3IDM1MC42M0M5MDkuMjEzIDM0OC45NzcgOTA5LjIyIDM0Ny4zMjEgOTA5LjIyIDM0NS42NTlWMzQwLjk3NUM5MDkuMjc5IDM0MC40NDIgOTA4Ljk4MiAzMzkuOTY4IDkwOC41MDcgMzM5Ljc5QzkwOC4zMjkgMzM5LjczMSA5MDguMDkxIDMzOS43MzEgOTA3LjkxMyAzMzkuNzMxSDg5NS4yNTZDODk0LjY2MiAzMzkuNzkgODk0LjI0NiAzNDAuMzIzIDg5NC4zMDYgMzQwLjkxNlYzNTguMjg2Qzg5NC4zMDYgMzYwLjEyNCA4OTQuNTQzIDM2Mi4wMjEgODk1LjA3OCAzNjMuOEM4OTYuMDI5IDM2Ny41OTQgODk4LjUyNSAzNzAuODU0IDkwMS45MTEgMzcyLjg3QzkwNC44MjMgMzc0LjU4OSA5MDguMTUgMzc1LjU5NyA5MTEuNTM3IDM3NS44OTNaTTg5NC4zNjUgMzI1Ljc0TDg5NC4xODcgMzI3LjE2Mkw4OTQuMjQ2IDMyNy40Qzg5NC4yNjQgMzI3LjU0IDg5NC4yODIgMzI3LjY4NiA4OTQuMjk5IDMyNy44MzRMODk0LjMzNSAzMjguMTM3TDg5NC4zMzUgMzI4LjE0MUM4OTQuMzY1IDMyOC4zOTMgODk0LjM5NSAzMjguNjQ1IDg5NC40MjUgMzI4Ljg4MkM4OTQuNzIyIDMzMC42NiA4OTUuNzMyIDMzMi4yNjEgODk3LjIxNyAzMzMuMzI4Qzg5OS4zNTYgMzM0LjgxIDkwMi4xNDkgMzM1LjE2NiA5MDQuNTg1IDMzNC4yNzZDOTA2LjY2NSAzMzMuNjI0IDkwOC4zMjkgMzMxLjk2NCA5MDguOTIzIDMyOS44M0M5MDkuNTE3IDMyNy45MzMgOTA5LjMzOSAzMjUuODU4IDkwOC41NjYgMzI0LjA4QzkwNy43OTQgMzIyLjI0MiA5MDYuMjQ5IDMyMC44MTkgOTA0LjM0OCAzMjAuMjg2QzkwMi45ODEgMzE5Ljg3MSA5MDEuNDk1IDMxOS43NTIgOTAwLjA2OSAzMjAuMDQ4Qzg5Ny4xNTggMzIwLjUyMyA4OTQuODQgMzIyLjgzNSA4OTQuMzY1IDMyNS43NFpNNjE5LjE3OSAzNzYuMDcxSDY3OC41OThWMzIwLjEwN0g2MTkuMTc5VjM3Ni4wNzFaTTYzNC44MDYgMzI3Ljk5Mkg2NDguOTQ4QzY2MS42NjQgMzI5LjE3OCA2NjAuODkxIDMzOC43ODIgNjYwLjg5MSAzMzguNzgyQzY2MC45NTEgMzQ0LjY1MSA2NTUuNzIyIDM0Ni44NDQgNjU1LjcyMiAzNDYuODQ0QzY2NC44MTMgMzQ5LjE1NiA2NjQuNTE2IDM1Ni44NjMgNjY0LjUxNiAzNTYuODYzQzY2NC41MTYgMzY4LjI0NiA2NTAuOTY4IDM2OC4xODYgNjUwLjk2OCAzNjguMTg2SDYzNC44MDZWMzI3Ljk5MlpNNzI1LjU5OSAzNTYuMjdDNzI1LjU5OSAzNTYuMjcgNzI1LjgzNyAzNTAuOTM1IDcxOC4wNTMgMzUwLjk5NEg3MTAuNDQ3VjM2MS45NjJINzE3Ljk5NEM3MTcuOTk0IDM2Mi4wMjEgNzI1LjU5OSAzNjIuMzc3IDcyNS41OTkgMzU2LjI3Wk03MjEuOTc0IDMzOS4wMTlDNzIxLjk3NCAzMzkuMDE5IDcyMi4yMTIgMzM0LjU3MiA3MTYuMjEgMzM0LjI3Nkg3MTAuNDQ3VjM0NC43MUg3MTUuMzc4QzcxNS4zNzggMzQ0LjcxIDcyMS45NzQgMzQ0LjU5MSA3MjEuOTc0IDMzOS4wMTlaTTY1My40NjMgMzM5LjAxOUM2NTMuNDYzIDMzOS4wMTkgNjUzLjcwMSAzMzQuNTcyIDY0Ny43IDMzNC4yNzZINjQxLjkzNlYzNDQuNzFINjQ2Ljg2OEM2NDYuODY4IDM0NC43MSA2NTMuNDYzIDM0NC41OTEgNjUzLjQ2MyAzMzkuMDE5Wk01MjkuNTMzIDMzMS4zOTdDNTI5LjUzMyAzMjkuODU0IDUzMC4zNDIgMzI5LjAwNSA1MzEuODc3IDMyOS4wMDVINTQ0LjEzMUM1NTEuNTI3IDMyOS4wMDUgNTU2Ljg0NyAzMzIuNzY1IDU1Ni44NDcgMzM5LjQwMkM1NTYuODQ3IDM0My4xNjMgNTU1LjAwMiAzNDYuNDA5IDU1MS44NzggMzQ4LjA2N1YzNDguMTgzQzU1Ni4zMjYgMzQ5LjQ5NCA1NTguNDY2IDM1My41OTUgNTU4LjQ2NiAzNTcuNjk3QzU1OC40NjYgMzY1Ljc4NCA1NTEuOTM3IDM2OS40MzMgNTQ0LjMwNiAzNjkuNDMzSDUzMS44NjVDNTMwLjMwNyAzNjkuNDMzIDUyOS41MjEgMzY4LjYzMSA1MjkuNTIxIDM2Ny4wMzdMNTI5LjUzMyAzMzEuMzk3Wk01NDQuMTgzIDM0NS41MjZDNTQ3LjQxOSAzNDUuNTI2IDU0OS4yMTIgMzQzLjI0MyA1NDkuMjEyIDM0MC4zMjdDNTQ5LjIxMiAzMzcuNDEgNTQ3LjQ1NCAzMzUuMzEyIDU0NC4wMDcgMzM1LjMxMkg1MzYuODY5VjM0NS41MDhMNTQ0LjE4MyAzNDUuNTI2Wk01NDQuODc2IDM2My4xMjZDNTQ4LjY5IDM2My4xMjYgNTUwLjgyOSAzNjAuNjc2IDU1MC44MjkgMzU3LjI2MkM1NTAuODI5IDM1My44NDkgNTQ4LjYzMSAzNTEuNDUyIDU0NC44NzYgMzUxLjQ1Mkg1MzYuODY5VjM2My4xMjZINTQ0Ljg3NlpNNTYzLjQwMSAzMzEuODU1TDU3NS4zNTUgMzUyLjUyNEw1NzUuMzM4IDM2Ny4wNDNDNTc1LjMzOCAzNjguNjM2IDU3Ni4xNDIgMzY5LjQzMyA1NzcuNzUxIDM2OS40MzNINTgwLjM3OUM1ODEuOTA3IDM2OS40MzMgNTgyLjcxMSAzNjguNjM2IDU4Mi43MTEgMzY3LjA0M1YzNTIuNTI0TDU5NC43MjMgMzMxLjg1NUM1OTUuNjQ1IDMzMC4yNjIgNTk0Ljk1OCAzMjkuMDA4IDU5My4wNjMgMzI5LjAwOEg1ODkuODM5QzU4OC42MyAzMjguOTQ2IDU4Ny41MTYgMzI5LjY1OCA1ODcuMDc3IDMzMC43NzZMNTgxLjU2OSAzNDAuOTEzQzU4MC4zMDMgMzQzLjQzNiA1NzkuMDk2IDM0Ni4zMjMgNTc5LjA5NiAzNDYuMzIzSDU3OC45ODFDNTc4Ljk4MSAzNDYuMzIzIDU3Ny43NjggMzQzLjQyIDU3Ni41MDkgMzQwLjkxM0w1NzAuOTg0IDMzMC43NzZDNTcwLjU0NyAzMjkuNjU5IDU2OS40MzUgMzI4Ljk0NiA1NjguMjI3IDMyOS4wMDhINTY1LjAwOUM1NjMuMTY3IDMyOS4wMDggNTYyLjQyMSAzMzAuMjYyIDU2My40MDEgMzMxLjg1NVoiIGZpbGw9IndoaXRlIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMjY2XzY3MyI+CjxyZWN0IHdpZHRoPSIxMDA2IiBoZWlnaHQ9IjQxOSIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",WE=function addPlaceholder(t,r,i){t.patch({Image:{Placeholder:{w:function w(t){return t},h:function h(t){return t},rect:!0,color:kg.colours.mutedBlue500,flex:{alignItems:"center",justifyContent:"center"},Img:{texture:j.Tools.getSvgTexture(VE,r,i)}}}})},$E=function preLoadImage(t){var r=t.ref,i=t.width,a=t.height,u=t.skipAnim;r.tag("Image").on("txError",(function(){r.tag("Placeholder")||WE(r,i,a)})),WE(r,i,a),r.tag("Image").on("txLoaded",(function(){if(r.tag("Placeholder")){var t=u?{duration:0,delay:0}:{duration:.5,delay:.3};r.tag("Placeholder").setSmooth("alpha",0,t)}}))},KE=function renderBorder(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;return{Top:{x:-a,y:-a,w:t+2*a,h:0,color:kg.colours.primary,rect:!0},Right:{x:t+a,y:r+a-i,w:0,h:r+a-i,color:kg.colours.primary,rect:!0,mount:1},Bottom:{x:t+a,y:r+a-i,w:t+2*a,h:0,color:kg.colours.primary,rect:!0,mount:1},Left:{x:-a,y:0,w:0,h:r+a-i,color:kg.colours.primary,rect:!0}}},qE=function sendPageEvent(t,r){return Ry.sendEvent({type:"page",action:t,data:r})},XE=function sendPlayerEvent(t,r){return Ry.sendEvent({type:"player",action:t,data:r})},ZE=function setAuthToken(t,r){yE(!!t),Ni.setEvergentAuthToken({token:t,refreshToken:r}),Ni.setRocketAuthToken(t)},JE=function titleCase(t){return t.replace(/\b\S/g,(function(t){return t.toUpperCase()}))},eI=[],tI=function addWatchlistItem(t){return Ni.addWatchlist(t).then((function(){return eI.push(t),""})).catch((function(t){}))},rI=function setWatchlist(t){eI=t},nI=function getWatchlist(){return eI},iI=function isOnWatchlist(t){return nI().includes(t)},aI=function analyticsSendAddToWatchlistAction(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){var r=_objectSpread2({customId:t},getThinkAnalyticsData(!1));Tn.sendAddToWatchlistAction(r)}},oI=function(t){_inherits(Banner,t);var r=_createSuper(Banner);function Banner(){return _classCallCheck(this,Banner),r.apply(this,arguments)}return _createClass(Banner,[{key:"items",set:function set(t){var r=_slicedToArray(t,1)[0];this._item=r;var i=this._item.imageSrc;this.patch({Image:{texture:Img(i).cover(Banner.width,Banner.height-72)}})}},{key:"item",get:function get(){return this._item||{}}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(Banner.prototype),"_focus",this).call(this),this.patch({Borders:{Top:{h:8},Right:{w:8},Bottom:{h:8},Left:{w:8}}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(Banner.prototype),"_unfocus",this).call(this),this.patch({Borders:{Top:{h:0},Right:{w:0},Bottom:{h:0},Left:{w:0}}})}},{key:"_handleEnter",value:function _handleEnter(){return!this.item.path||Cr.navigate("dynamic/".concat(lE(this.item.path)))}},{key:"announce",get:function get(){return this._item.title.replace(/Live/g,"Lighv")}}],[{key:"_template",value:function _template(){return{Image:{y:0,x:0,h:Banner.height-72,w:Banner.width},Borders:KE(Banner.width,Banner.height,72)}}},{key:"width",get:function get(){return 1690}},{key:"height",get:function get(){return Banner.width/7+72}},{key:"offset",get:function get(){return 0}}]),Banner}(j.Component),sI=function(t){_inherits(Button,t);var r=_createSuper(Button);function Button(){var t;_classCallCheck(this,Button);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_disabled",!1),t}return _createClass(Button,[{key:"label",get:function get(){return this._label},set:function set(t){this._label=t,this.tag("Label").patch({text:{text:t}})}},{key:"textOverflow",set:function set(t){this.tag("Label").text.textOverflow=t}},{key:"item",get:function get(){return this._item||{}},set:function set(t){this._item=t;var r=this._item,i=r.callback,a=r.text,u=r.instructions;this.callback=i,this.announceInstructions=u,this.tag("Label").patch({text:{text:a}}),this.tag("Label").loadTexture();var l=this.tag("Label").renderWidth+80;l<=379||this.patch({w:l})}},{key:"disabled",get:function get(){return this._disabled},set:function set(t){var r=t?kg.colours.mutedGrey500:kg.colours.lightBlue50;this.patch({Borders:{color:"none",shader:{strokeColor:r}},Label:{text:{textColor:r}}}),this._disabled=t}},{key:"deeplinkParams",set:function set(t){this._deeplinkParams=t}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(Button.prototype),"_focus",this).call(this),this.patch({Borders:{color:kg.colours.primary,shader:{strokeColor:kg.colours.primary}},Label:{text:{textColor:kg.colours.darkBlue500}}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(Button.prototype),"_unfocus",this).call(this),this.patch({Borders:{color:"none",shader:{strokeColor:kg.colours.lightBlue50}},Label:{text:{textColor:kg.colours.lightBlue50}}})}},{key:"_handleEnter",value:function _handleEnter(){if("function"==typeof this.callback)return this.callback(this.item);if(!this.item.path)return!0;var t=this.item.static?this.item.path:"dynamic/".concat(lE(this.item.path));return this._deeplinkParams&&Cr.replaceHistoryState({deeplinkUrl:this._deeplinkParams}),this.item.redirectURL||this._deeplinkParams?Cr.navigate(t,{redirectUrl:this.item.redirectURL,deeplinkParams:this._deeplinkParams}):Cr.navigate(t)}},{key:"announce",get:function get(){var t=this.item,r=t.text,i=t.tts;return this.announceInstructions?[].concat(_toConsumableArray(this.announceInstructions),["".concat(i||r||"",". button")]):"".concat(i||r,". button")}}],[{key:"_template",value:function _template(){return{w:Button.width,h:Button.height,Borders:{w:function w(t){return t},h:Button.height,rect:!0,color:"none",shader:{type:j.shaders.RoundedRectangle,radius:45,stroke:4,strokeColor:kg.colours.lightBlue50}},Label:{w:function w(t){return t-80},h:Button.height-44,x:40,y:22,text:_objectSpread2({text:"",textAlign:"center",verticalAlign:"center",textColor:kg.colours.lightBlue50,wordWrap:!1,textOverflow:"ellipsis"},kg.TextStyles.ctaLabel)}}}},{key:"width",get:function get(){return 379}},{key:"height",get:function get(){return 86}},{key:"offset",get:function get(){return 20}}]),Button}(j.Component),uI=function(t){_inherits(ButtonWithIcon,t);var r=_createSuper(ButtonWithIcon);function ButtonWithIcon(){return _classCallCheck(this,ButtonWithIcon),r.apply(this,arguments)}return _createClass(ButtonWithIcon,[{key:"item",set:function set(t){this._item=t;var r=this._item,i=r.callback,a=r.text,u=r.icon,l=r.iconPosition,c=void 0===l?"after":l;this.callback=i,this.tag("Label").patch({text:{text:a}}),"before"===c&&this.tag("IconBefore").patch({visible:!0,texture:j.Tools.getSvgTexture(u,25,26)}),"after"===c&&this.tag("IconAfter").patch({visible:!0,texture:j.Tools.getSvgTexture(u,25,26)})}},{key:"_focus",value:function _focus(){this.patch({Borders:{color:kg.colours.primary,shader:{strokeColor:kg.colours.primary}},Container:{IconBefore:{color:kg.colours.darkBlue500},Label:{text:{textColor:kg.colours.darkBlue500}},IconAfter:{color:kg.colours.darkBlue500}}})}},{key:"_unfocus",value:function _unfocus(){this.patch({Borders:{color:"none",shader:{strokeColor:kg.colours.lightBlue50}},Container:{IconBefore:{color:kg.colours.lightBlue50},Label:{text:{textColor:kg.colours.lightBlue50}},IconAfter:{color:kg.colours.lightBlue50}}})}},{key:"announce",get:function get(){var t=this._item.text;return"".concat(t," button")}}],[{key:"_template",value:function _template(){return{h:ButtonWithIcon.height,Borders:{w:function w(t){return t},h:function h(t){return t},rect:!0,color:"none",shader:{type:j.shaders.RoundedRectangle,radius:45,stroke:4,strokeColor:kg.colours.lightBlue50}},Container:{w:function w(t){return t},h:function h(t){return t},flex:{direction:"row",alignItems:"center",justifyContent:"center",wrap:!1},IconBefore:{flexItem:{marginRight:20},visible:!1,w:25,h:26},Label:{y:2,text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.ctaLabel),{},{lineHeight:42,verticalAlign:"middle"})},IconAfter:{flexItem:{marginLeft:20},visible:!1,w:25,h:26}}}}},{key:"height",get:function get(){return 86}}]),ButtonWithIcon}(sI),lI=function(t){_inherits(Tag,t);var r=_createSuper(Tag);function Tag(){return _classCallCheck(this,Tag),r.apply(this,arguments)}return _createClass(Tag,[{key:"label",set:function set(t){this.patch({text:{text:t.toUpperCase()}})}}],[{key:"_template",value:function _template(){return{text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.smallCopy),{},{textColor:kg.colours.mutedBlue500,highlight:!0,highlightColor:kg.colours.lightBlue500,highlightPaddingLeft:6,highlightPaddingRight:6,paddingLeft:6,paddingRight:6})}}}]),Tag}(j.Component),cI=function(t){_inherits(Card,t);var r,i=_createSuper(Card);function Card(){return _classCallCheck(this,Card),i.apply(this,arguments)}return _createClass(Card,[{key:"item",get:function get(){return this._item||{}},set:function set(t){this._item=t;var r=this._item,i=r.assetTitlePosition,a=r.imageSrc,u=r.tag,l=r.text,c=r.progressPercent,d=r.isViewAll,g=r.showTitle,p=r.title,m=r.seasonNumber,v=r.episodeNumber,b=r.type;if(d)this.patch({Background:{visible:!0},ViewAllText:{visible:!0}});else{if($E({ref:this,width:150,height:57}),a&&this.patch({Image:{texture:Img(a).cover(Card.width,Card.height)}}),u&&this.tag("Tag").patch({visible:!0,label:u}),"below"===i){var M=m?"".concat(g," S").concat(m," E").concat(v):p,S=M&&("episode"===b||"link")&&l!==M?"".concat(M,"\n").concat(l):l;this.tag("BelowText").patch({visible:!0,text:{text:S}})}"overlay"===i&&this.patch({Overlay:{visible:!0},OverlayText:{visible:!0,text:{text:l}}}),c&&this.patch({ProgressBar:{visible:!0,Background:{Background:{w:Card.width*c/100}}}})}}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(Card.prototype),"_focus",this).call(this),this.fireAncestors("$announcerRefresh"),this.tag("Borders").patch({Top:{h:8},Right:{w:8},Bottom:{h:8},Left:{w:8}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(Card.prototype),"_unfocus",this).call(this),this.tag("Borders").patch({Top:{h:0},Right:{w:0},Bottom:{h:0},Left:{w:0}})}},{key:"_handleEnter",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t,r,i,a,u,l,c,d,g,p,m,v,b,M;return regeneratorRuntime.wrap((function _callee$(S){for(;;)switch(S.prev=S.next){case 0:if(this.item.path||this.item.watchPath){S.next=3;break}return S.abrupt("return",!0);case 3:if(t=this.item,r=t.path,i=t.refUseCase,a=t.type,u=t.watchPath,l=Cr.getActivePage()||{},c=l.pagePath,d=l.pageTemplate,g={refUseCase:i,pagePath:c,pageTemplate:d},"link"!==a||!r.includes("episode/")){S.next=14;break}return p=r.split("episode/")[1],S.next=10,Ni.getItem(p);case 10:return m=S.sent,v=lE("/show/".concat(m.showId)),b={focusIndex:1,focusedItemIndex:m.episodeNumber,y:-758,focusType:"episode",secondaryFocus:m.seasonId,taArgs:g},S.abrupt("return",Cr.navigate("dynamic/".concat(v),b));case 14:if("episode"!==a&&"trailer"!==a&&"program"!==a){S.next=17;break}return M=dE(u),S.abrupt("return",Cr.navigate(M));case 17:return S.abrupt("return",Cr.navigate("dynamic/".concat(lE(r)),{taArgs:g}));case 18:case"end":return S.stop()}}),_callee,this)}))),function _handleEnter(){return r.apply(this,arguments)})},{key:"announce",get:function get(){var t=this._item,r=t.isViewAll,i=t.tag,a=void 0===i?"":i,u=t.title,l=void 0===u?"":u,c=t.text,d=void 0===c?"":c;return r?this.tag("ViewAllText").text.text:"\n          ".concat(a,"\n          ").concat(Mg.pronounceTTS(l===d?l:"".concat(l,", ").concat(d)),"\n      ")}}],[{key:"_template",value:function _template(){return{Image:{y:0,x:0,w:Card.width,h:Card.imageHeight,zIndex:1},Borders:KE(Card.width,Card.imageHeight),Tag:{visible:!1,x:0,y:0,type:lI,zIndex:3},BelowText:{visible:!1,y:Card.imageHeight+8,text:_objectSpread2({text:"",wordWrapWidth:Card.width,maxLines:2,lineHeight:33},kg.TextStyles.smallCopy)},Overlay:{visible:!1,x:0,y:0,zIndex:2,w:Card.width,h:Card.imageHeight,rect:!0,colorTop:kg.colours.cardOverlayTop,colorBottom:kg.colours.cardOverlayBottom},OverlayText:{visible:!1,x:12,y:Card.imageHeight-12,zIndex:3,mountY:1,text:_objectSpread2({text:"",wordWrapWidth:Card.width-24,maxLines:2,lineHeight:33,verticalAlign:"middle"},kg.TextStyles.smallCopy)},ProgressBar:{visible:!1,y:Card.imageHeight-6,zIndex:3,Background:{color:kg.colours.lightBlue500Transparent,rect:!0,w:Card.width,h:6,Background:{color:kg.colours.red500,rect:!0,h:6}}},Background:{visible:!1,color:kg.colours.mutedGrey500,rect:!0,w:Card.width,h:Card.imageHeight},ViewAllText:{x:90,y:55,zIndex:3,flex:{direction:"column",justifyContent:"center",alignItems:"center"},visible:!1,text:_objectSpread2({text:"View all",textAlign:"center",verticalAlign:"middle"},kg.TextStyles.h2)}}}},{key:"width",get:function get(){return 322}},{key:"imageHeight",get:function get(){return 173}},{key:"textHeight",get:function get(){return 0}},{key:"height",get:function get(){return Card.imageHeight+Card.textHeight}},{key:"offset",get:function get(){return 20}}]),Card}(j.Component),dI=function(t){_inherits(HorizontalRail,t);var r=_createSuper(HorizontalRail);function HorizontalRail(){return _classCallCheck(this,HorizontalRail),r.apply(this,arguments)}return _createClass(HorizontalRail,[{key:"_construct",value:function _construct(){this._index=0,this.createItem=this.createItem.bind(this)}},{key:"activeItem",get:function get(){return this.tag("Items").children[this._index]}},{key:"container",get:function get(){return this._container},set:function set(t){this._container=t}},{key:"items",set:function set(t){this._items=t,vn.FIRST_CREATED=!1,this.tag("Items").patch({children:this._items.map(this.createItem)})}},{key:"itemComponent",get:function get(){throw new Error("itemComponent getter should return the class to use for rendering rail items.")}},{key:"_animateToSelected",value:function _animateToSelected(){this.tag("Items").setSmooth("x",-this.activeItem.finalX)}},{key:"createItem",value:function createItem(t,r){var i=this.itemComponent,a=i.height,u=i.offset,l=i.width;return{type:vn,construct:i,index:r,item:t,x:r*(l+u),w:l,h:a}}},{key:"_focus",value:function _focus(){this._animateToSelected()}},{key:"_unfocus",value:function _unfocus(){this.stage.gc()}},{key:"_handleUp",value:function _handleUp(){return!1}},{key:"_handleRight",value:function _handleRight(){return this._index<this.tag("Items").children.length-1&&(this._index+=1,this._animateToSelected(),!0)}},{key:"_handleDown",value:function _handleDown(){return!1}},{key:"_handleLeft",value:function _handleLeft(){return this._index>0&&(this._index+=-1,this._animateToSelected(),!0)}},{key:"_handleEnter",value:function _handleEnter(){this.activeItem.item}},{key:"$itemCreatedForFocus",value:function $itemCreatedForFocus(){this.application.updateFocusPath()}},{key:"_getFocused",value:function _getFocused(){return this.activeItem}}],[{key:"_template",value:function _template(){return{Container:{Items:{}}}}},{key:"height",get:function get(){throw new Error("height getter should return total height of the rail.")}}]),HorizontalRail}(j.Component);j.Component;var fI=function(t){_inherits(HorizontalRail,t);var r=_createSuper(HorizontalRail);function HorizontalRail(){var t;_classCallCheck(this,HorizontalRail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",1),t}return _createClass(HorizontalRail,[{key:"itemComponent",get:function get(){return cI}},{key:"heading",set:function set(t){t&&this.tag("Heading").patch({text:{text:t}})}},{key:"tagline",set:function set(t){t&&(this.patch({Tagline:{visible:!0,text:{text:t}}}),this.tag("Items").patch({y:134}))}},{key:"_focus",value:function _focus(){return!0}},{key:"_handleRight",value:function _handleRight(){return this._index<this.tag("Items").children.length-this._maxItems?(this._index+=1,this._animateToSelected(),!0):this._index===this.tag("Items").children.length-1?(this.fireAncestors("$announce",["You're on the last item of this rail."]),!0):(this._index+=1,!0)}},{key:"_handleLeft",value:function _handleLeft(){return this._index>0?(this._index-=1,this._index<this.tag("Items").children.length-this._maxItems&&this._animateToSelected(),!0):(this.fireAncestors("$announce",["You're on the first item of this rail."]),!1)}},{key:"announceContext",get:function get(){var t,r,i=[];return this.tag("Heading")&&""!==this.tag("Heading").text.text&&i.push("".concat(this.tag("Heading").text.text," rail")),(null===(t=this.tag("Items"))||void 0===t||null===(r=t.children)||void 0===r?void 0:r.length)>0&&i.push("Item ".concat(this._index+1," of ").concat(this.tag("Items").children.length)),i}}],[{key:"_template",value:function _template(){return{Heading:{y:0,x:0,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.h2)},Tagline:{visible:!1,y:64,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.featuredCopy)},Items:{y:96}}}},{key:"height",get:function get(){return cI.height+144+32}}]),HorizontalRail}(dI),hI="data:image/svg+xml;base64, PHN2ZyBoZWlnaHQ9IjU0IiB3aWR0aD0iNTIiIHZpZXdCb3g9IjAgMCA1MiA1NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI2LjAxOTIgNTIuNTEzOEMxMi40Nzc5IDUyLjUxMzggMS40Njg3NSA0MS4wODEyIDEuNDY4NzUgMjcuMDE5MUMxLjQ2ODc1IDEyLjk1NyAxMi40Nzc5IDEuNTI0NDEgMjYuMDE5MiAxLjUyNDQxQzM5LjU2MDUgMS41MjQ0MSA1MC41Njk3IDEyLjk1NyA1MC41Njk3IDI3LjAxOTFDNTAuNTY5NyA0MS4wODEyIDM5LjU2MDUgNTIuNTEzOCAyNi4wMTkyIDUyLjUxMzhaTTI2LjAxOTIgMy44ODcxNUMxMy43MjU2IDMuODg3MTUgMy43NDM5OCAxNC4yNTI3IDMuNzQzOTggMjcuMDE5MUMzLjc0Mzk4IDM5Ljc4NTUgMTMuNzI1NiA1MC4xNTExIDI2LjAxOTIgNTAuMTUxMUMzOC4zMTI4IDUwLjE1MTEgNDguMjk0NCAzOS43ODU1IDQ4LjI5NDQgMjcuMDE5MUM0OC4yOTQ0IDE0LjI1MjcgMzguMzEyOCAzLjg4NzE1IDI2LjAxOTIgMy44ODcxNVoiIGZpbGw9IiNGMUZCRkUiLz4KPHBhdGggZD0iTTI2LjAxODcgMzAuNDEwNkMyOS43MDc0IDMwLjQxMDYgMzIuNjk3NiAyNy4zMDU0IDMyLjY5NzYgMjMuNDc0OEMzMi42OTc2IDE5LjY0NDMgMjkuNzA3NCAxNi41MzkxIDI2LjAxODcgMTYuNTM5MUMyMi4zMzAxIDE2LjUzOTEgMTkuMzM5OCAxOS42NDQzIDE5LjMzOTggMjMuNDc0OEMxOS4zMzk4IDI3LjMwNTQgMjIuMzMwMSAzMC40MTA2IDI2LjAxODcgMzAuNDEwNloiIGZpbGw9IiNGMUZCRkUiLz4KPHBhdGggZD0iTTQyLjI3NTEgNDMuODYzMUMzOS4yNjU5IDM3Ljc2NTcgMzMuMTM3NCAzMy41NzM3IDI2LjA5MTYgMzMuNTczN0MxOC44OTg5IDMzLjU3MzcgMTIuNjk3MSAzNy45MTgxIDkuNzI0NjEgNDQuMTY4QzkuNzI0NjEgNDQuMTY4IDE5LjUyMjggNTEuMjk0MyAyNS43NjEzIDUxLjI5NDNDMzIuMjIgNTEuMjk0MyA0Mi4yNzUxIDQzLjg2MzEgNDIuMjc1MSA0My44NjMxWiIgZmlsbD0iI0YxRkJGRSIvPgo8L3N2Zz4K",gI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iNDMiIGhlaWdodD0iNDIiIHZpZXdCb3g9IjAgMCA0MyA0MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMzLjc1IDIyLjc1SDIzLjI1VjMzLjI1SDE5Ljc1VjIyLjc1SDkuMjVWMTkuMjVIMTkuNzVWOC43NUgyMy4yNVYxOS4yNUgzMy43NVYyMi43NVoiIGZpbGw9IiNGMUZCRkUiLz4KPC9zdmc+Cg==",pI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMzEiIHZpZXdCb3g9IjAgMCAxOCAzMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3Ljk5NTIgMi45NjYwNUwxNS4yNTEgMC4yMzczMDVMMC4wMDM5MDYyNSAxNS40OTk4TDE1LjI2NjQgMzAuNzYyM0wxNy45OTUyIDI4LjAzMzZMNS40NjE0MSAxNS40OTk4TDE3Ljk5NTIgMi45NjYwNVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",mI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMzEiIHZpZXdCb3g9IjAgMCAxOCAzMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAuMDA1ODU5MzggMjguMDMzNkwyLjczNDYxIDMwLjc2MjNMMTcuOTk3MSAxNS40OTk4TDIuNzM0NjEgMC4yMzczMDVMMC4wMDU4NTkzOCAyLjk2NjA1TDEyLjUzOTYgMTUuNDk5OEwwLjAwNTg1OTM4IDI4LjAzMzZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",yI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMzciIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAzNyAyOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMSAwLjVIMzMuNUMzNS4xNSAwLjUgMzYuNSAxLjg1IDM2LjUgMy41VjI0LjVDMzYuNSAyNi4xNSAzNS4xNSAyNy41IDMzLjUgMjcuNUgxMUM5Ljk2NSAyNy41IDkuMTU1IDI2Ljk2IDguNjE1IDI2LjE2NUwwLjUgMTRMOC42MTUgMS44MkM5LjE1NSAxLjAyNSA5Ljk2NSAwLjUgMTEgMC41Wk0yNi44ODUgMjEuNUwyOSAxOS4zODVMMjMuNjE1IDE0TDI5IDguNjE1TDI2Ljg4NSA2LjVMMjEuNSAxMS44ODVMMTYuMTE1IDYuNUwxNCA4LjYxNUwxOS4zODUgMTRMMTQgMTkuMzg1TDE2LjExNSAyMS41TDIxLjUgMTYuMTE1TDI2Ljg4NSAyMS41WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",vI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMTkiIHZpZXdCb3g9IjAgMCAyNSAxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTkuMDQyOTYgMTMuNjUzNkwzLjI4MDc0IDcuODkxNDJMMy4yODA2NSA3Ljg5MTM0QzIuNjQzOTkgNy4yNTQ5NyAxLjYxNDI1IDcuMjU0ODMgMC45Nzc2NDggNy44OTEzNEMwLjM0MDc4NCA4LjUyNzkgMC4zNDA3ODQgOS41NTgxMSAwLjk3NzY0OCAxMC4xOTQ3TDcuODkxMzYgMTcuMTA4Nkw4LjIyNTI4IDE2Ljc3NDdMNy44OTEzNyAxNy4xMDg2QzguMjA4ODMgMTcuNDI2MSA4LjYyNjUzIDE3LjU4NTggOS4wNDI5NSAxNy41ODU4QzkuNDU5MjggMTcuNTg1OCA5Ljg3NzIyIDE3LjQyNjEgMTAuMTk0NyAxNy4xMDg2TDI0LjAyMjYgMy4yODA3OUwyNC4wMjI2IDMuMjgwNzFDMjQuNjU5MSAyLjY0Mzk3IDI0LjY1OTEgMS42MTQyMyAyNC4wMjI2IDAuOTc3NDkzTDI0LjAyMjUgMC45NzczMjhDMjMuMzg1OCAwLjM0MDkzNiAyMi4zNTYgMC4zNDA4MTggMjEuNzE5NCAwLjk3NzQwN0w5LjA0Mjk2IDEzLjY1MzZaIiBmaWxsPSIjMDAyMDJCIiBzdHJva2U9IiMwMDIwMkIiLz4KPC9zdmc+Cg==",_I="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iNTIiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MiA1MyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjYiIGN5PSIyNi42OTM0IiByPSIyNC41IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjMiLz4KPC9zdmc+Cg==",TI="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjQ4LjUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMyIvPgo8cGF0aCBkPSJNNDMgNzMuOTk5NUM0MyA3MC4xMzc1IDQ2LjEzNDEgNjcgNTAgNjdDNTMuODY1OSA2NyA1NyA3MC4xMzc1IDU3IDczLjk5OTVDNTcgNzcuODY1NyA1My44NjU5IDgxIDUwIDgxQzQ2LjEzNDEgODEgNDMgNzcuODY1NyA0MyA3My45OTk1WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTUzLjQ5OTUgNjBINDYuNTAwNUw0MyAxOEg1N0w1My40OTk1IDYwWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+",bI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzgiIHZpZXdCb3g9IjAgMCAzOCAzOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjQyNDUzIDEwLjMzMTJMMy4xODEyIDYuMDg3OUw1LjQxMzcgMy44Mzk1N0wzMy40ODYyIDMxLjkyNzlMMzEuMjUzNyAzNC4xNjA0TDI1LjgzODcgMjguNzQ1NEMyMy43MTcgMjkuNTg0NiAyMS40MDU0IDMwLjA0MzcgMTguOTk4NyAzMC4wNDM3QzExLjA4MiAzMC4wNDM3IDQuMzIxMiAyNS4xMTk2IDEuNTgyMDMgMTguMTY4N0MyLjgwMTIgMTUuMDQ5NiA0Ljg0MzcgMTIuMzU3OSA3LjQyNDUzIDEwLjMzMTJaTTE4Ljk5ODcgOS40NjA0QzI0Ljk5OTUgOS40NjA0IDMwLjM1MTIgMTIuODMyOSAzMi45NjM3IDE4LjE2ODdDMzIuMDI5NSAyMC4xMDA0IDMwLjcxNTQgMjEuNzYyOSAyOS4xNDc5IDIzLjEwODdMMzEuMzgwNCAyNS4zNDEyQzMzLjU4MTIgMjMuMzkzNyAzNS4zMjI5IDIwLjk1NTQgMzYuNDE1NCAxOC4xNjg3QzMzLjY3NjIgMTEuMjE3OSAyNi45MTU0IDYuMjkzNzQgMTguOTk4NyA2LjI5Mzc0QzE2Ljk4NzkgNi4yOTM3NCAxNS4wNTYyIDYuNjEwNCAxMy4yMzU0IDcuMTk2MjRMMTUuODQ3OSA5LjgwODczQzE2Ljg3NyA5LjYwMjkgMTcuOTIyIDkuNDYwNCAxOC45OTg3IDkuNDYwNFpNMTcuMzA0NSAxMS4yNjU0TDIwLjU4MiAxNC41NDI5QzIxLjQ4NDUgMTQuOTM4NyAyMi4yMTI5IDE1LjY2NzEgMjIuNjA4NyAxNi41Njk2TDI1Ljg4NjIgMTkuODQ3MUMyNi4wMTI5IDE5LjMwODcgMjYuMTA3OSAxOC43Mzg3IDI2LjEwNzkgMTguMTUyOUMyNi4xMjM3IDE0LjIyNjIgMjIuOTI1NCAxMS4wNDM3IDE4Ljk5ODcgMTEuMDQzN0MxOC40MTI5IDExLjA0MzcgMTcuODU4NyAxMS4xMjI5IDE3LjMwNDUgMTEuMjY1NFpNMTUuMDU2MiAxNy45NjI5TDE5LjE4ODcgMjIuMDk1NEMxOS4xMjU0IDIyLjExMTIgMTkuMDYyIDIyLjEyNzEgMTguOTk4NyAyMi4xMjcxQzE2LjgxMzcgMjIuMTI3MSAxNS4wNDA0IDIwLjM1MzcgMTUuMDQwNCAxOC4xNjg3QzE1LjA0MDQgMTguMTI5MiAxNS4wNDQzIDE4LjA5NzUgMTUuMDQ4MyAxOC4wNjU4QzE1LjA1MjIgMTguMDM0MiAxNS4wNTYyIDE4LjAwMjUgMTUuMDU2MiAxNy45NjI5Wk0xMi40NDM3IDE1LjM1MDRMOS42NzI4NiAxMi41Nzk2QzcuNzU3MDMgMTQuMDM2MiA2LjE0MjAzIDE1LjkwNDYgNS4wMzM3IDE4LjE2ODdDNy42NDYyIDIzLjUwNDYgMTIuOTk3OSAyNi44NzcxIDE4Ljk5ODcgMjYuODc3MUMyMC41MDI5IDI2Ljg3NzEgMjEuOTU5NSAyNi42NTU0IDIzLjM1MjkgMjYuMjc1NEwyMS44MDEyIDI0LjcyMzdDMjAuOTQ2MiAyNS4wODc5IDE5Ljk5NjIgMjUuMjkzNyAxOC45OTg3IDI1LjI5MzdDMTUuMDcyIDI1LjI5MzcgMTEuODczNyAyMi4wOTU0IDExLjg3MzcgMTguMTY4N0MxMS44NzM3IDE3LjE3MTIgMTIuMDc5NSAxNi4yMjEyIDEyLjQ0MzcgMTUuMzUwNFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",MI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAyMiAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIuOTY3NSAwLjAzMzIwMzFMMTEgOC4wNDgyTDE5LjAzMjUgMC4wMzMyMDMxTDIxLjUgMi41MDA3TDExIDEzLjAwMDdMMC41IDIuNTAwN0wyLjk2NzUgMC4wMzMyMDMxWiIgZmlsbD0iI0YxRkJGRSIvPgo8L3N2Zz4K",SI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMjA4IiBoZWlnaHQ9IjY0IiB2aWV3Qm94PSIwIDAgMjA4IDY0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjA4IDY0SDBWMEgyMDhWNjRaIiBmaWxsPSIjRkYwMDAwIi8+CjxwYXRoIGQ9Ik01NC44MjkyIDIxLjQ1NjVINjQuMTMwNVYzOC42NzM2SDc4LjU0NDZWNDUuMDA3SDU0LjgyOTJWMjEuNDU2NVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik04Mi4xNzA1IDIxLjQ1NjlIOTEuNDcxOVY0NS4wMDc0SDgyLjE3MDVWMjEuNDU2OVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik05NC4xMDkzIDIxLjQ1NjVIMTA0LjMzNUwxMDkuNTEzIDM2LjU2MzNIMTA5LjU3OEwxMTQuNzU3IDIxLjQ1NjVIMTI0Ljk4MUwxMTQuNDI3IDQ1LjAwN0gxMDQuNjY1TDk0LjEwOTMgMjEuNDU2NVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMjYuODYgMjEuNDU2NUgxNTEuODk0VjI3LjE5NTVIMTM2LjE2MVYzMC4zNjE2SDE1MC43NzNWMzYuMTAwNkgxMzYuMTYxVjM5LjI2OEgxNTEuODk0VjQ1LjAwN0gxMjYuODZWMjEuNDU2NVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNjQuNjM0IDI3LjAzODhDMTY0LjIwOSAyNi42OTM3IDE2My42MzQgMjYuNTA1OCAxNjMuMDM3IDI2LjUxMzVDMTYyLjQ3MyAyNi41MjUgMTYxLjk1MyAyNi43MTY3IDE2MS41ODIgMjcuMDQ1MkMxNjEuMTMyIDI3LjQxNDYgMTYwLjg4MyAyNy45Mjk3IDE2MC44OTggMjguNDYwMkMxNjAuOTE0IDI4Ljk2NzYgMTYxLjE2MyAyOS40Mjc4IDE2MS41ODYgMjkuNzQyMkMxNjIuNzY3IDMwLjc0MTcgMTYzLjQxOSAzMS45OTU2IDE2My40MTkgMzMuMjc1MUMxNjMuNDE5IDM0LjYyMjMgMTYyLjc1IDM1LjkwNjkgMTYxLjUzNyAzNi44ODk4QzE2MS4wODIgMzcuMjU3OSAxNjAuODMxIDM3Ljc3NTYgMTYwLjg0NiAzOC4zMDk5QzE2MC44NjEgMzguODE4NiAxNjEuMTEyIDM5LjI4MTMgMTYxLjU0NSAzOS42MDM0QzE2MS45MzQgMzkuOTE1MyAxNjIuNDYyIDQwLjEwNTcgMTYyLjkzNCA0MC4xMTcyQzE2My4wNDEgNDAuMTQxNSAxNjMuMTUzIDQwLjE1MyAxNjMuMjY4IDQwLjE1M0MxNjMuNjk5IDQwLjE1MyAxNjQuMTU2IDM5Ljk4MyAxNjQuNTIzIDM5LjY4NjVDMTY2LjY0MSAzOC4wMTcyIDE2Ny44MDcgMzUuNzU0OCAxNjcuODA3IDMzLjMxNzNDMTY3LjgwNyAzMC45MjU4IDE2Ni42OCAyOC42OTY2IDE2NC42MzQgMjcuMDM4OFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNzIuOTQzIDIyLjEzNTRDMTcyLjEzMiAyMS40Nzg0IDE3MC43MDYgMjEuNDc4NCAxNjkuODk5IDIyLjEzNTRDMTY5LjQ2NSAyMi40ODU2IDE2OS4yMjYgMjIuOTY2MiAxNjkuMjI2IDIzLjQ4OUMxNjkuMjI2IDI0LjAxMDUgMTY5LjQ2NCAyNC40OTExIDE2OS44OTIgMjQuODM3NUMxNzIuNjcxIDI3LjEyOTIgMTc0LjIwMSAzMC4xNDA2IDE3NC4yMDEgMzMuMzE2OUMxNzQuMjAxIDM2LjUzNTQgMTcyLjYzNSAzOS41NzYyIDE2OS43OTMgNDEuODc4MkMxNjkuMzU5IDQyLjIyOTcgMTY5LjEyMSA0Mi43MTAzIDE2OS4xMjEgNDMuMjMxOEMxNjkuMTIxIDQzLjc1NDYgMTY5LjM1OSA0NC4yMzM5IDE2OS43OTMgNDQuNTg1NEMxNzAuMTk4IDQ0LjkxMzkgMTcwLjc0NiA0NS4xMDY5IDE3MS4yNjQgNDUuMTEzM0MxNzEuMzI5IDQ1LjExOTcgMTcxLjM5NyA0NS4xMjM1IDE3MS40NjYgNDUuMTIzNUMxNzEuOTQ5IDQ1LjEyMzUgMTcyLjQ0OSA0NC45NDMzIDE3Mi44MzUgNDQuNjMwMkMxNzYuNTggNDEuNjQxOCAxNzguNjQxIDM3LjYzODUgMTc4LjY0MSAzMy4zNjA0QzE3OC42NDEgMjkuMDk4OSAxNzYuNjE4IDI1LjExMjMgMTcyLjk0MyAyMi4xMzU0WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE4MS4yNTMgMTcuMTkwNkwxODEuMjUyIDE3LjE4OTNDMTgwLjg0NSAxNi44NjA4IDE4MC4zMDUgMTYuNjc5MyAxNzkuNzI4IDE2LjY3OTNDMTc5LjE0NCAxNi42NzkzIDE3OC42MTEgMTYuODYwOCAxNzguMTc4IDE3LjIxMzZDMTc3Ljc1MiAxNy41OTIgMTc3LjUyNiAxOC4wOTE3IDE3Ny41MzggMTguNjE4M0MxNzcuNTQ5IDE5LjEyOTYgMTc3Ljc4NiAxOS41OTg3IDE3OC4yMDMgMTkuOTM0OUMxODIuNjExIDIzLjU0NTcgMTg1LjAzNyAyOC4zMTM0IDE4NS4wMzcgMzMuMzYwOUMxODUuMDM3IDM4LjQ0ODEgMTgyLjU3NCA0My4yNDUxIDE3OC4xMDMgNDYuODY3NUMxNzcuNjY5IDQ3LjIxOSAxNzcuNDMgNDcuNjk5NiAxNzcuNDMgNDguMjIxMUMxNzcuNDMgNDguNzQyNiAxNzcuNjY4IDQ5LjIyMzIgMTc4LjEwMSA0OS41NzQ3QzE3OC41MTggNDkuOTEyMiAxNzkuMDgzIDUwLjEwNTIgMTc5LjY1IDUwLjEwNTJDMTgwLjE2OSA1MC4xMDUyIDE4MC43NDIgNDkuOTAxOSAxODEuMTQzIDQ5LjU3NzNDMTg2LjUxOCA0NS4yNjg1IDE4OS40NzcgMzkuNTA5IDE4OS40NzcgMzMuMzYwOUMxODkuNDc3IDI3LjI3MjkgMTg2LjU1NiAyMS41MzAxIDE4MS4yNTMgMTcuMTkwNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik00NS4wMzgyIDM2LjkwNjZDNDMuODI1MiAzNS45MjQ5IDQzLjE1NjcgMzQuNjQwNCA0My4xNTY3IDMzLjI5MzJDNDMuMTU2NyAzMi4wMTM3IDQzLjgwNjEgMzAuNzU5OCA0NC45NjkyIDI5Ljc3NjlDNDUuNDEwMiAyOS40NDcxIDQ1LjY2MDcgMjguOTg1NyA0NS42NzYgMjguNDc3QzQ1LjY5MTQgMjcuOTQ2NSA0NS40NDQ3IDI3LjQzMTQgNDUuMDA2MyAyNy4wNzM1QzQ0LjYyMTUgMjYuNzM0OCA0NC4xMDEzIDI2LjU0MzEgNDMuNTM4OSAyNi41MzE2QzQyLjkzNjkgMjYuNTI2NSA0Mi4zNjU1IDI2LjcxMTggNDEuOTM5OSAyNy4wNTY5QzM5Ljg5NDggMjguNzEzNCAzOC43Njg3IDMwLjk0MzkgMzguNzY4NyAzMy4zMzUzQzM4Ljc2ODcgMzUuNzcyOCAzOS45MzQ0IDM4LjAzNCA0Mi4wNDg2IDM5LjcwMDdDNDIuNDE2NyAzOS45OTk4IDQyLjg3NjggNDAuMTcxMSA0My4zMDc2IDQwLjE3MTFDNDMuNDIyNiA0MC4xNzExIDQzLjUzNTEgNDAuMTU4MyA0My41ODM3IDQwLjE0M0M0NC4xMTQxIDQwLjEyMjUgNDQuNjM5NCAzOS45MzMzIDQ1LjAxNzggMzkuNjMwNEM0NS40NjEzIDM5LjMwMDYgNDUuNzE0NCAzOC44Mzc5IDQ1LjcyOTcgMzguMzI3OUM0NS43NDUxIDM3Ljc5MzcgNDUuNDkzMyAzNy4yNzYgNDUuMDM4MiAzNi45MDY2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTM2Ljc4MjcgNDEuODk2QzMzLjk0IDM5LjU5MjcgMzIuMzc0MyAzNi41NTMyIDMyLjM3NDMgMzMuMzM0N0MzMi4zNzQzIDMwLjE1NzEgMzMuOTA0MyAyNy4xNDU3IDM2LjY3OTIgMjQuODU3OEMzNy4xMTEyIDI0LjUwNzUgMzcuMzQ5IDI0LjAyODIgMzcuMzQ5IDIzLjUwNTVDMzcuMzQ5IDIyLjk4NCAzNy4xMDk5IDIyLjUwMzQgMzYuNjc2NiAyMi4xNTE5QzM1Ljg2NjMgMjEuNDk2MSAzNC40NDQ5IDIxLjQ5NDkgMzMuNjMyIDIyLjE1MTlDMjkuOTU3MiAyNS4xMyAyNy45MzI2IDI5LjExNTQgMjcuOTMyNiAzMy4zNzgyQzI3LjkzMjYgMzcuNjU2MiAyOS45OTU2IDQxLjY1ODIgMzMuNzM4MSA0NC42NDY2QzM0LjEyNjcgNDQuOTYxMSAzNC42MjY0IDQ1LjE0MTMgMzUuMTA5NiA0NS4xNDEzQzM1LjE4MTIgNDUuMTQxMyAzNS4yNTE1IDQ1LjEzNzUgMzUuMjcwNiA0NS4xMzM2QzM1LjgyNTQgNDUuMTI0NyAzNi4zNzYzIDQ0LjkzMTcgMzYuNzgyNyA0NC42MDMyQzM3LjIxNiA0NC4yNTE3IDM3LjQ1MzggNDMuNzcxMSAzNy40NTM4IDQzLjI0OTZDMzcuNDUzOCA0Mi43MjgxIDM3LjIxNiA0Mi4yNDc1IDM2Ljc4MjcgNDEuODk2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTI4LjQ3NCA0Ni44ODU0QzI0LjAwMTcgNDMuMjYzIDIxLjUzODYgMzguNDY2IDIxLjUzODYgMzMuMzc3NUMyMS41Mzg2IDI4LjMzMTMgMjMuOTY1OSAyMy41NjM2IDI4LjM3MDUgMTkuOTU0QzI4Ljc4ODQgMTkuNjE1MyAyOS4wMjYyIDE5LjE0NzUgMjkuMDM3NyAxOC42MzYyQzI5LjA1MDUgMTguMTA4MyAyOC44MTY2IDE3LjYwMzUgMjguMzY5MiAxNy4yMDU5QzI3LjU1NzYgMTYuNTQ5IDI2LjEzNDkgMTYuNTQ3NyAyNS4zMjIgMTcuMjA3MkMyMC4wMTg4IDIxLjU0NzkgMTcuMDk4MiAyNy4yODk1IDE3LjA5ODIgMzMuMzc3NUMxNy4wOTgyIDM5LjUyNTYgMjAuMDU3MiA0NS4yODUxIDI1LjQzMDcgNDkuNTkzOUMyNS44MzMzIDQ5LjkxOTggMjYuNDA1OSA1MC4xMjMgMjYuOTI0OSA1MC4xMjNDMjcuNDkyNCA1MC4xMjMgMjguMDU3MyA0OS45Mjg4IDI4LjQ3NCA0OS41OTI2QzI4LjkwNzMgNDkuMjQxMSAyOS4xNDUxIDQ4Ljc2MDUgMjkuMTQ1MSA0OC4yMzlDMjkuMTQ1MSA0Ny43MTYyIDI4LjkwNzMgNDcuMjM2OSAyOC40NzQgNDYuODg1NFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",EI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMTM1IiBoZWlnaHQ9IjEzNiIgdmlld0JveD0iMCAwIDEzNSAxMzYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgb3BhY2l0eT0iMC4yIiBjeD0iNjgiIGN5PSI2OCIgcj0iNTIiIHN0cm9rZT0iI0YxRkJGRSIgc3Ryb2tlLXdpZHRoPSIxMCIvPgo8bWFzayBpZD0icGF0aC0yLWluc2lkZS0xXzQyNV8xMDk3NyIgZmlsbD0id2hpdGUiPgo8cGF0aCBkPSJNNzkuNDM1MiAxMi40MzQzQzg2LjczMjIgMTMuOTM2MiA5My42NjE5IDE2Ljg2MDcgOTkuODI4NyAyMS4wNDA3QzEwNS45OTYgMjUuMjIwNyAxMTEuMjc5IDMwLjU3NDQgMTE1LjM3NiAzNi43OTYxQzExOS40NzQgNDMuMDE3OSAxMjIuMzA2IDQ5Ljk4NTggMTIzLjcxMSA1Ny4zMDIxQzEyNS4xMTYgNjQuNjE4NCAxMjUuMDY2IDcyLjEzOTggMTIzLjU2NCA3OS40MzY4TDExNC4xNzQgNzcuNTA0QzExNS40MjIgNzEuNDQwMiAxMTUuNDYzIDY1LjE4OTkgMTE0LjI5NiA1OS4xMTAxQzExMy4xMjggNTMuMDMwMiAxMTAuNzc1IDQ3LjIzOTkgMTA3LjM3IDQyLjA2OTZDMTAzLjk2NCAzNi44OTkzIDk5LjU3NCAzMi40NTA0IDk0LjQ0OTQgMjguOTc2OEM4OS4zMjQ4IDI1LjUwMzIgODMuNTY2MiAyMy4wNzMgNzcuNTAyNCAyMS44MjQ5TDc5LjQzNTIgMTIuNDM0M1oiLz4KPC9tYXNrPgo8cGF0aCBkPSJNNzkuNDM1MiAxMi40MzQzQzg2LjczMjIgMTMuOTM2MiA5My42NjE5IDE2Ljg2MDcgOTkuODI4NyAyMS4wNDA3QzEwNS45OTYgMjUuMjIwNyAxMTEuMjc5IDMwLjU3NDQgMTE1LjM3NiAzNi43OTYxQzExOS40NzQgNDMuMDE3OSAxMjIuMzA2IDQ5Ljk4NTggMTIzLjcxMSA1Ny4zMDIxQzEyNS4xMTYgNjQuNjE4NCAxMjUuMDY2IDcyLjEzOTggMTIzLjU2NCA3OS40MzY4TDExNC4xNzQgNzcuNTA0QzExNS40MjIgNzEuNDQwMiAxMTUuNDYzIDY1LjE4OTkgMTE0LjI5NiA1OS4xMTAxQzExMy4xMjggNTMuMDMwMiAxMTAuNzc1IDQ3LjIzOTkgMTA3LjM3IDQyLjA2OTZDMTAzLjk2NCAzNi44OTkzIDk5LjU3NCAzMi40NTA0IDk0LjQ0OTQgMjguOTc2OEM4OS4zMjQ4IDI1LjUwMzIgODMuNTY2MiAyMy4wNzMgNzcuNTAyNCAyMS44MjQ5TDc5LjQzNTIgMTIuNDM0M1oiIHN0cm9rZT0iIzAwQjZFNiIgc3Ryb2tlLXdpZHRoPSIyMCIgbWFzaz0idXJsKCNwYXRoLTItaW5zaWRlLTFfNDI1XzEwOTc3KSIvPgo8L3N2Zz4K",II="data:image/svg+xml;base64, PHN2ZyBoZWlnaHQ9IjYwIiB3aWR0aD0iMTUxIiB2aWV3Qm94PSIwIDAgMTUxIDYwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfODAxOV8xOTk3KSI+CjxwYXRoIGQ9Ik00OC4wMTQ2IDEyLjAyNTVDNDcuMzY2NSAxMi4wMjU1IDQ2LjgzOTggMTIuNTU4IDQ2LjgzOTggMTMuMjEzNEw0Ni44NDM5IDM5LjE5NThINTEuMTE3NlYxMi4wMjU1SDQ4LjAxNDZaIiBmaWxsPSIjMDBCNkU2Ii8+CjxwYXRoIGQ9Ik0xMy41Mjk5IDM0Ljg3NDNDOC41MDI3NiAzNC44NzQzIDQuNDExMzkgMzAuNzE2NiA0LjQxMTM5IDI1LjYxMjdDNC40MTEzOSAyMC41MDQ3IDguNTAyNzYgMTYuMzUxMSAxMy41Mjk5IDE2LjM1MTFDMTguNTU3IDE2LjM1MTEgMjIuNjQ4NCAyMC41MDQ3IDIyLjY0ODQgMjUuNjEyN0MyMi42NTI0IDMwLjcxNjYgMTguNTYxMSAzNC44NzQzIDEzLjUyOTkgMzQuODc0M1pNMTMuNTI5OSAxMi4wMjU1QzEwLjkwMDkgMTIuMDI1NSA4LjUzOTIyIDEyLjk3NTggNi4yNTg1OCAxMy44OTc1QzUuOTI2NDEgMTQuMDMyNiA1LjU5ODI5IDE0LjE2MzcgNS4yNjYxMiAxNC4yOTQ4TDQuMjczNjYgMTQuNjgzOVYwLjQwMDM5MUgxLjE3NDc1QzAuNTI2NjEyIDAuNDAwMzkxIDAgMC45MzI5MDEgMCAxLjU5MjM5VjI1LjQxNjFDMCAyNy42NDQ0IDAuNDU3NzQ4IDI5LjcwODkgMS4zNTI5OSAzMS41NTYzQzMuNjUzODggMzYuMjI2IDguMzYwOTggMzkuMTg3NiAxMy41MjE4IDM5LjE5OTlDMjAuOTA2NSAzOS4xOTk5IDI2LjkxOCAzMy4xMDQ3IDI2LjkxOCAyNS42MTI3QzI2LjkxOCAxOC4xMjA3IDIwLjkxNDYgMTIuMDI1NSAxMy41Mjk5IDEyLjAyNTVaIiBmaWxsPSIjMDBCNkU2Ii8+CjxwYXRoIGQ9Ik0xMTUuOTM2IDM0LjkwNzFDMTEwLjg2NCAzNC45MDcxIDEwNi43NTIgMzAuNzQ5NCAxMDYuNzUyIDI1LjYyMDlDMTA2Ljc1MiAyMC40OTI0IDExMC44NjQgMTYuMzM0OCAxMTUuOTM2IDE2LjMzNDhDMTIxLjAwNyAxNi4zMzQ4IDEyNS4xMTkgMjAuNDkyNCAxMjUuMTE5IDI1LjYyMDlDMTI1LjExNSAzMC43NDk0IDEyMS4wMDcgMzQuOTAzIDExNS45MzYgMzQuOTA3MVpNMTE1LjkzNiAxMi4wMzc4QzEwOC41MTQgMTIuMDM3OCAxMDIuNTAzIDE4LjEyMDcgMTAyLjUwMyAyNS42MjA5QzEwMi41MDMgMzMuMTI1MiAxMDguNTE4IDM5LjIwNCAxMTUuOTM2IDM5LjIwNEMxMjMuMzU3IDM5LjIwNCAxMjkuMzY4IDMzLjEyMTEgMTI5LjM2OCAyNS42MjA5QzEyOS4zNzIgMTguMTE2NiAxMjMuMzU3IDEyLjAzNzggMTE1LjkzNiAxMi4wMzc4WiIgZmlsbD0iI0VCMTIzRiIvPgo8cGF0aCBkPSJNODYuNTU1MyAzNC44NjZDODEuNTI0MSAzNC44NjYgNzcuNDMyNyAzMC43MTY2IDc3LjQzMjcgMjUuNjA0NUM3Ny40MzI3IDIwLjQ5MjQgODEuNTI0MSAxNi4zNDI5IDg2LjU1NTMgMTYuMzQyOUM5MS41ODY0IDE2LjM0MjkgOTUuNjczOCAyMC40OTY1IDk1LjY3MzggMjUuNjA0NUM5NS42Nzc4IDMwLjcxMjUgOTEuNTg2NCAzNC44NjYgODYuNTU1MyAzNC44NjZaTTg2LjU1NTMgMTIuMDE3M0M4My45MjYzIDEyLjAxNzMgODEuNTY0NiAxMi45Njc2IDc5LjI4NCAxMy44ODkyQzc4Ljk1MTggMTQuMDI0NCA3OC42MjM3IDE0LjE1NTUgNzguMjkxNSAxNC4yODY2TDc3LjI5OTEgMTQuNjc1N1YwLjQwNDQ1OEg3NC4xOTYxQzczLjU1MiAwLjQwMDM2MiA3My4wMjk0IDAuOTI0Njc5IDczLjAyNTQgMS41NzU5OFYxLjU4MDA4VjI1LjQwMzdDNzMuMDI1NCAyNy42MzIxIDczLjQ4MzEgMjkuNjk2NiA3NC4zNzg0IDMxLjU0NEM3Ni42NzkzIDM2LjIxMzcgODEuMzg2NCAzOS4xNzUzIDg2LjU0NzIgMzkuMTg3NkM5My45MzE5IDM5LjE4NzYgOTkuOTQzNCAzMy4wOTI0IDk5Ljk0MzQgMjUuNjAwNEM5OS45NDM0IDE4LjExMjUgOTMuOTQgMTIuMDE3MyA4Ni41NTUzIDEyLjAxNzNaIiBmaWxsPSIjRUIxMjNGIi8+CjxwYXRoIGQ9Ik0xNTEgMTQuMTg4M0wxNDcuNjA2IDExLjYxOTlMMTM5Ljg4OSAyMi4wNDQ5TDEzMi4xNjggMTEuNjE5OUwxMjguNzc3IDE0LjE4ODNMMTM3LjI0IDI1LjYyMDlMMTI4Ljc3NyAzNy4wNTM0TDEzMi4xNjggMzkuNjIxOEwxMzkuODg5IDI5LjE5NjlMMTQ3LjYwNiAzOS42MjE4TDE1MSAzNy4wNTM0TDE0Mi41MzQgMjUuNjIwOUwxNTEgMTQuMTg4M1oiIGZpbGw9IiNFQjEyM0YiLz4KPHBhdGggZD0iTTQ4Ljk4MDkgLTAuNDcwMjUzTDQ1Ljk1OSAyLjU4NTQ5TDQ4Ljk4MDkgNS42NDEyNEw1Mi4wMDI4IDIuNTg1NDlMNDguOTgwOSAtMC40NzAyNTNaIiBmaWxsPSIjMDBCNkU2Ii8+CjxwYXRoIGQ9Ik0zMy43Mzk4IDE1Ljg2NzdWMTIuMDI5NkgzMC42MzI4QzI5Ljk4NDYgMTIuMDI5NiAyOS40NTggMTIuNTYyMSAyOS40NTggMTMuMjE3NVYzOS4xOTU4SDMzLjc4ODRWMjUuMjM1OEMzNC4wNTk4IDIwLjI5MTcgMzguMDc4MiAxNi4zNjM0IDQyLjkzOTMgMTYuMjkzOEw0NC4zMjg3IDE2LjI3MzNWMTIuMDI1NUw0Mi44NzQ1IDEyLjAzNzhDMzkuNDk2IDEyLjA4NjkgMzYuMjU1NCAxMy40NDY5IDMzLjczOTggMTUuODY3N1oiIGZpbGw9IiMwMEI2RTYiLz4KPHBhdGggZD0iTTY0LjUyNjUgMzMuMzc5MUM2My43MTYzIDMyLjg2MyA2My4xMTY4IDMyLjA2ODMgNjIuODQxNCAzMS4xMzg1QzYyLjY0MjkgMzAuNTA3NyA2Mi42NDI5IDI5Ljg2ODcgNjIuNjQyOSAyOS4xODg3VjE2LjMzNDdINzAuNDgxM1YxMi4wMTMySDYyLjYzODhWMC40MDQ0OEg1OS41Mzk5QzU4Ljg5MTggMC40MDg1NzYgNTguMzY5MiAwLjkzNjk5IDU4LjM2OTIgMS41OTIzOVYxMi4wMTczSDUzLjY2MjFWMTYuMzM4OEg1OC4zNjkyVjMwLjA2OTRDNTguMzY5MiAzMC41NDQ1IDU4LjQ4MjYgMzQuNzY3OCA2Mi4zMzkxIDM3LjA5NDRDNjUuMzA0MyAzOC44ODA0IDY4Ljc0NzUgMzkuNjg3MyA2OC44ODkzIDM5LjcyMDFMNzAuMjQyMyA0MC4wMzU1TDcxLjE5NDIgMzUuODIwNUw2OS44NDEyIDM1LjUwNTFDNjkuNzE1NyAzNS40NzY0IDY2LjgxMTIgMzQuNzg0MSA2NC41MjY1IDMzLjM3OTFaIiBmaWxsPSIjMDBCNkU2Ii8+CjxwYXRoIGQ9Ik05Ny4xMjc4IDUzLjAyMTFDOTcuMTI3OCA1My4wMjExIDk3LjE2ODMgNTIuMjMwNSA5Ni4xMTUxIDUyLjE3NzJIOTUuMTA2NFY1NC4wMjQ2SDk1Ljk2NTJDOTUuOTY1MiA1NC4wMjQ2IDk3LjEyMzggNTQuMDA4MyA5Ny4xMjM4IDUzLjAyNTIiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik04NS4xMjg4IDUzLjAyMTFDODUuMTI4OCA1My4wMjExIDg1LjE2OTMgNTIuMjMwNSA4NC4xMTYxIDUyLjE3NzJIODMuMTA3NFY1NC4wMjQ2SDgzLjk2NjJDODMuOTY2MiA1NC4wMjQ2IDg1LjEyNDggNTQuMDA4MyA4NS4xMjQ4IDUzLjAyNTIiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik03OS4xMTczIDU5LjU5NTVIODkuNTI0VjQ5LjY2MjJINzkuMTEzM0w3OS4xMTczIDU5LjU5NTVaTTgxLjg1MTcgNTEuMDU5SDg0LjMyMjdDODYuNTUwNyA1MS4yNjc5IDg2LjQxMjkgNTIuOTY3OCA4Ni40MTI5IDUyLjk2NzhDODYuNDIxIDU0LjAwODMgODUuNTEzNiA1NC4zOTc0IDg1LjUxMzYgNTQuMzk3NEM4Ny4xMDk3IDU0LjgwMyA4Ny4wNTMgNTYuMTc5MyA4Ny4wNTMgNTYuMTc5M0M4Ny4wNTMgNTguMjAyOCA4NC42ODMyIDU4LjE5NDYgODQuNjgzMiA1OC4xOTQ2SDgxLjg0NzZMODEuODUxNyA1MS4wNTlaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOTcuNzU5OCA1Ni4wODFDOTcuNzU5OCA1Ni4wODEgOTcuODAwMyA1NS4xMzQ3IDk2LjQzNTEgNTUuMTQ3SDk1LjEwNjRWNTcuMDk2OEg5Ni40MzExQzk2LjQzMTEgNTcuMDk2OCA5Ny43NTU3IDU3LjE1ODMgOTcuNzU5OCA1Ni4wODFaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOTEuMTIwMSA1OS41OTU1SDEwMS41MjdWNDkuNjYyMkg5MS4xMjAxVjU5LjU5NTVaTTkzLjg1MDQgNTEuMDU5SDk2LjMyMTRDOTguNTQ5NCA1MS4yNjc5IDk4LjQxMTcgNTIuOTY3OCA5OC40MTE3IDUyLjk2NzhDOTguNDE5OCA1NC4wMDgzIDk3LjUxMjQgNTQuMzk3NCA5Ny41MTI0IDU0LjM5NzRDOTkuMTA4NCA1NC44MDMgOTkuMDUxNyA1Ni4xNzkzIDk5LjA1MTcgNTYuMTc5M0M5OS4wNTE3IDU4LjIwMjggOTYuNjg2IDU4LjE5NDYgOTYuNjg2IDU4LjE5NDZIOTMuODUwNFY1MS4wNTlaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTAzLjExOSA1OS41OTk2SDExMy41M1Y0OS42NjYzSDEwMy4xMTlWNTkuNTk5NlpNMTExLjQ2OCA1Ny42Mzc1QzExMS40NjggNTcuNjM3NSAxMDkuMzI5IDU4LjkyMzggMTA2Ljg1IDU3LjkzMjVDMTA2Ljg1IDU3LjkzMjUgMTA0Ljc2OCA1Ny4xNjI0IDEwNC42ODcgNTQuNjM1QzEwNC42ODcgNTQuNjM1IDEwNC42MDIgNTIuMDMzOSAxMDcuMzc3IDUxLjE2OTZDMTA3LjM3NyA1MS4xNjk2IDEwOC4xMTggNTAuODgyOSAxMDkuNDUxIDUxLjAwOThDMTA5LjQ1MSA1MS4wMDk4IDExMC4yNDkgNTEuMDkxOCAxMTEuMzk5IDUxLjU3OTJWNTIuODk0MUMxMTEuMzk5IDUyLjg5NDEgMTEwLjEyNyA1Mi4xMDM1IDEwOC43MjEgNTIuMDg3MkMxMDguNzIxIDUyLjA4NzIgMTA2LjEwMSA1Mi4wMzM5IDEwNS45ODMgNTQuNjMwOUMxMDUuOTgzIDU0LjYzMDkgMTA1Ljg4NiA1Ny4wMTkgMTA4LjY5MyA1Ny4xNTgzQzEwOC42OTMgNTcuMTU4MyAxMDkuODY4IDU3LjMwMTYgMTExLjQ2NCA1Ni4yNzM1TDExMS40NjggNTcuNjM3NVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik04NS43NjA2IDU2LjA4MUM4NS43NjA2IDU2LjA4MSA4NS44MDExIDU1LjEzNDcgODQuNDM2IDU1LjE0N0g4My4xMTEzVjU3LjA5NjhIODQuNDMxOUM4NC40MzE5IDU3LjA5NjggODUuNzU2NiA1Ny4xNTgzIDg1Ljc1NjYgNTYuMDgxIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTIwLjQgNTQuNDgzNFY1NC40NjNDMTIwLjQgNTQuNDYzIDExOS40NzYgNTQuMDk4NCAxMTkuNDc2IDUyLjg1MzJDMTE5LjQ3NiA1MS41NDI0IDEyMC41MTcgNTAuOTExNSAxMjEuNzc3IDUwLjkxMTVIMTIyLjIxMUMxMjIuNDg2IDUwLjkxMTUgMTIyLjY0NCA1MS4wNjcyIDEyMi42NDQgNTEuMzQ1N1Y1MS42MDc5QzEyMi42NDQgNTEuODg2NCAxMjIuNDkgNTIuMDI5OCAxMjIuMjExIDUyLjAyOThIMTIxLjg3QzEyMS4yMDIgNTIuMDI5OCAxMjAuODEzIDUyLjQ3NjMgMTIwLjgxMyA1My4wMTdDMTIwLjgxMyA1My40Mzg5IDEyMS4wNDggNTMuOTkxOSAxMjEuOTIzIDUzLjk5MTlIMTIzLjA4NlY1My40NjM1QzEyMy4wODYgNTMuMTgwOSAxMjMuMjM5IDUzLjA0MTYgMTIzLjUxOSA1My4wNDE2SDEyMy45NjFDMTI0LjI0IDUzLjA0MTYgMTI0LjM5NCA1My4xNTYzIDEyNC4zOTQgNTMuMzkzOFY1My45OTZIMTI0LjkwOEMxMjUuMTg4IDUzLjk5NiAxMjUuMzQyIDU0LjE1MTcgMTI1LjM0MiA1NC40MzAyVjU0LjcyMUMxMjUuMzQyIDU1LjAwMzcgMTI1LjE4OCA1NS4xNTkzIDEyNC45MDggNTUuMTU5M0gxMjQuMzk0VjU2LjAzMThDMTI0LjM5NCA1Ny41MzkyIDEyMy40MTggNTguNTM0NiAxMjEuNzYxIDU4LjUzNDZDMTIwLjE4OSA1OC41MzQ2IDExOS4xNTYgNTcuNTY3OSAxMTkuMTU2IDU2LjMyMjdDMTE5LjE1NiA1NS41MTk4IDExOS42MyA1NC43NTM4IDEyMC40IDU0LjQ4MzRaTTEyMS43NTMgNTcuMzA5OEMxMjIuNTg3IDU3LjMwOTggMTIzLjA3NyA1Ni44NTExIDEyMy4wNzcgNTUuOTU4MVY1NS4xNTUySDEyMS44NDJDMTIxLjAzMiA1NS4xNTUyIDEyMC41MDUgNTUuNTE5OCAxMjAuNTA1IDU2LjIzNjZDMTIwLjUwOSA1Ni44MzA2IDEyMS4wMDMgNTcuMzA5OCAxMjEuNzUzIDU3LjMwOThaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMzLjk0NiA1OS41OTE0TDEzMy43MDcgNTkuNTYyN0MxMzMuMTEyIDU5LjUwOTUgMTMyLjUzMiA1OS4zMjkzIDEzMi4wMTggNTkuMDI2MUMxMzEuNDIyIDU4LjY2OTggMTMwLjk5MyA1OC4wODgxIDEzMC44MTUgNTcuNDEyMkMxMzAuNzI2IDU3LjA5MjcgMTMwLjY4MSA1Ni43NjA5IDEzMC42NzcgNTYuNDI5MVY1My4zNDA2QzEzMC42NjUgNTMuMjM0MSAxMzAuNzQyIDUzLjEzOTggMTMwLjg0NyA1My4xMzE3QzEzMC44NTUgNTMuMTMxNyAxMzAuODY3IDUzLjEzMTcgMTMwLjg3NiA1My4xMzE3SDEzMy4wNTlDMTMzLjA5NSA1My4xMzE3IDEzMy4xMjggNTMuMTM1NyAxMzMuMTY0IDUzLjE0MzlDMTMzLjI0OSA1My4xNzY3IDEzMy4zMDYgNTMuMjYyNyAxMzMuMjk0IDUzLjM1MjlWNTQuMTg4NUMxMzMuMjk0IDU1LjA2OTIgMTMzLjI4NiA1NS45NDk5IDEzMy4yOTQgNTYuODMwNkMxMzMuMjgyIDU3LjIyMzggMTMzLjQ3MiA1Ny41OTY1IDEzMy43OTIgNTcuODE3N0MxMzMuOTY2IDU3LjkzNjUgMTM0LjE2NSA1OC4wMDYyIDEzNC4zNzEgNTguMDI2N0MxMzQuNTY2IDU4LjA1MTIgMTM0Ljc2NCA1OC4wNTEyIDEzNC45NTkgNTguMDE4NUMxMzUuMzg4IDU3Ljk2NTIgMTM1Ljc1NyA1Ny42OTA4IDEzNS45MzUgNTcuMjkzNEMxMzYuMDQ4IDU3LjA1MTcgMTM2LjEwOSA1Ni43ODk2IDEzNi4xMjUgNTYuNTIzM0MxMzYuMTQyIDU2LjI4OTggMTM2LjE0NiA1Ni4wNTIzIDEzNi4xNDYgNTUuODE4OFY1MS4wNDI2QzEzNi4xMzQgNTAuNzkyNyAxMzYuMjc1IDUwLjU2MzMgMTM2LjUwMiA1MC40NjVDMTM2LjU2NyA1MC40MjgxIDEzNi42NCA1MC40MDM2IDEzNi43MDkgNTAuMzg3MkMxMzYuODY3IDUwLjM1MDMgMTM3LjAyOSA1MC4zMjU3IDEzNy4xOTEgNTAuMzEzNUMxMzcuNTI3IDUwLjI3NjYgMTM3Ljg2MyA1MC4zMDUzIDEzOC4xODcgNTAuMzk5NUMxMzguMjgxIDUwLjQyODEgMTM4LjM3IDUwLjQ3MzIgMTM4LjQ1NSA1MC41MjY1QzEzOC42MzMgNTAuNjQxMSAxMzguNzM0IDUwLjg0MTkgMTM4LjcyNiA1MS4wNTQ5VjUzLjA3NDNWNTMuMTM5OEgxNDAuNzExQzE0MC43MzkgNTMuMTM5OCAxNDAuNzY4IDUzLjEzOTggMTQwLjc5NiA1My4xMzk4QzE0MC44ODkgNTMuMTM5OCAxNDAuOTY2IDUzLjIyMTggMTQwLjk2NiA1My4zMTZDMTQwLjk2NiA1My4zMjAxIDE0MC45NjYgNTMuMzI0MiAxNDAuOTY2IDUzLjMyODNWNTMuNzUwMlY1NC41MzI2VjU0LjU5ODFDMTQwLjk3NCA1NC42OTIzIDE0MC45MSA1NC43NzQyIDE0MC44MTYgNTQuNzgyNEMxNDAuODA0IDU0Ljc4MjQgMTQwLjc5MiA1NC43ODI0IDE0MC43OCA1NC43ODI0SDE0MC4wOTFIMTM5LjUxMkMxMzkuMjY1IDU0Ljc4MjQgMTM5LjAxOCA1NC43NDE1IDEzOC43ODMgNTQuNjYzNkwxMzguNzQ2IDU0LjY1MTRIMTM4LjczNFY1NC42ODQxVjU2LjA1MjNDMTM4LjczIDU2LjM3MTggMTM4Ljc5NSA1Ni42OTEzIDEzOC45MTcgNTYuOTg2MkMxMzkuMTE1IDU3LjQ3MzcgMTM5LjUzNiA1Ny44MzQxIDE0MC4wNDcgNTcuOTQ0N0MxNDAuMzM0IDU4LjAxNDQgMTQwLjYzIDU4LjAzODkgMTQwLjkyNiA1OC4wMTg1QzE0MS4yMTcgNTguMDA2MiAxNDEuNTA5IDU3Ljk0NDcgMTQxLjc4IDU3LjgzNDFDMTQyLjMzMSA1Ny42MDQ3IDE0Mi43MjQgNTcuMjIzOCAxNDIuODkgNTYuNjI5OEMxNDMuMDA4IDU2LjE5OTcgMTQyLjk3NSA1NS43NDEgMTQyLjgwMSA1NS4zMjcyQzE0Mi43NDEgNTUuMTkyMSAxNDIuNjc2IDU1LjA2NTEgMTQyLjYwMyA1NC45MzgxQzE0Mi41NDIgNTQuODIzNCAxNDIuNDY5IDU0LjcxNjkgMTQyLjQxNiA1NC41OTgxQzE0Mi4yNzEgNTQuMzExNCAxNDIuMzI3IDUzLjk2MzIgMTQyLjU1OCA1My43Mzc5QzE0Mi44OTggNTMuMzY1MSAxNDMuMzUyIDUzLjExNTMgMTQzLjg1IDUzLjAzMzNDMTQzLjk4NCA1My4wMDQ3IDE0NC4xMTggNTMuMDAwNiAxNDQuMjUxIDUzLjAxN0MxNDQuNDQ2IDUzLjA1MzggMTQ0LjYxMiA1My4xNzI2IDE0NC43MTMgNTMuMzQ0N0MxNDQuOTgxIDUzLjc3NDggMTQ1LjI1MiA1NC4yMDA4IDE0NS40OTkgNTQuNjM5MUMxNDYuMDA2IDU1LjUzMiAxNDYuNSA1Ni40MzczIDE0Ni45OTggNTcuMzM0NEwxNDcuMDQ3IDU3LjQyMDRDMTQ3LjA1OSA1Ny4zOTk5IDE0Ny4wNjcgNTcuMzgzNSAxNDcuMDc5IDU3LjM2NzJDMTQ3LjQzMSA1Ni43MDM2IDE0Ny43NDMgNTYuMDE5NSAxNDguMDE5IDU1LjMxNDlDMTQ4LjI5IDU0LjYzMDkgMTQ4LjU0MSA1My45Mzg2IDE0OC43NDggNTMuMjM0MUMxNDguNzY0IDUzLjEwNzEgMTQ4Ljg4MiA1My4wMTcgMTQ5LjAwNyA1My4wMzMzQzE0OS4wMjcgNTMuMDM3NCAxNDkuMDQ4IDUzLjA0MTUgMTQ5LjA2OCA1My4wNDk3QzE0OS4zMTEgNTMuMTE1MyAxNDkuNTQ2IDUzLjE5MzEgMTQ5Ljc4NSA1My4yNjY4TDE1MC4yMTQgNTMuNDAyTDE1MC4yNTEgNTMuNDE0M0MxNTAuMzUyIDUzLjQzNDggMTUwLjQyMSA1My41MjkgMTUwLjQwMSA1My42MzE0QzE1MC4zOTcgNTMuNjQ3OCAxNTAuMzkzIDUzLjY2MDEgMTUwLjM4OSA1My42NzI0QzE1MC4zNDggNTMuODIzOSAxNTAuMjk5IDUzLjk3MTQgMTUwLjI0MyA1NC4xMTg4QzE0OS42NTEgNTUuNzQxIDE0OC44OTggNTcuMjk3NSAxNDcuOTk0IDU4Ljc2ODFDMTQ3LjkxMyA1OC44OTUxIDE0Ny44MjQgNTkuMDE3OSAxNDcuNzI3IDU5LjEzMjZDMTQ3LjUyNSA1OS4zNTc5IDE0Ny4yNTMgNTkuNTA5NSAxNDYuOTUzIDU5LjU1NDVMMTQ2LjcxNCA1OS41OTU1SDE0Ni4yQzE0Ni4xODQgNTkuNTk1NSAxNDYuMTYzIDU5LjU4NzMgMTQ2LjE0NyA1OS41ODczQzE0NS43MzQgNTkuNTYyNyAxNDUuMzYxIDU5LjMyOTMgMTQ1LjE1OSA1OC45NjQ3QzE0NC44NzkgNTguNTQyOCAxNDQuNjA0IDU4LjExNjggMTQ0LjMyNCA1Ny42OTA4TDE0NC4yOTIgNTcuNjQxNkMxNDQuMjg4IDU3LjY0NTcgMTQ0LjI4NCA1Ny42NDk4IDE0NC4yOCA1Ny42NThDMTQzLjg1OSA1OC4zNDYyIDE0My4yMzUgNTguODg2OSAxNDIuNDkzIDU5LjIwMjNDMTQyLjAwNyA1OS40MTUzIDE0MS40OTMgNTkuNTQyMyAxNDAuOTYyIDU5LjU3OTFDMTQwLjg5NyA1OS41NzkxIDE0MC44MzcgNTkuNTkxNCAxNDAuNzcyIDU5LjU5OTZIMTQwLjI0OUwxNDAuMTcyIDU5LjU5MTRDMTQwLjAxOCA1OS41NzkxIDEzOS44NiA1OS41NjY4IDEzOS43MSA1OS41NTA0QzEzOS40MzEgNTkuNTE3NyAxMzkuMTU2IDU5LjQ2NDQgMTM4Ljg4OCA1OS4zOTA3QzEzOC40ODMgNTkuMjg0MiAxMzguMDk4IDU5LjExNjMgMTM3Ljc0MiA1OC44OTUxQzEzNy42MDQgNTguODA5IDEzNy40NzQgNTguNzA2NiAxMzcuMzQxIDU4LjYxMjRDMTM3LjI3NiA1OC42NjE2IDEzNy4yMDcgNTguNzE4OSAxMzcuMTMgNTguNzcyMkMxMzYuNzc0IDU5LjAzNDMgMTM2LjM3NyA1OS4yMzUgMTM1Ljk1NSA1OS4zNzAyQzEzNS42NjQgNTkuNDY4NSAxMzUuMzY0IDU5LjUzNDEgMTM1LjA2IDU5LjU3MDlMMTM0LjgzNyA1OS41OTk2TDEzMy45NDYgNTkuNTkxNFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMzAuNjY1IDUwLjkxMTVDMTMwLjY3NyA1MC44MjU1IDEzMC42ODEgNTAuNzQzNiAxMzAuNjkzIDUwLjY2MTZDMTMwLjc4MyA1MC4xNDU1IDEzMS4xNzkgNDkuNzQgMTMxLjY5IDQ5LjY0OTlDMTMxLjk0MSA0OS42MDA3IDEzMi4xOTYgNDkuNjE3MSAxMzIuNDM5IDQ5LjY5MDhDMTMyLjc3MSA0OS43ODkxIDEzMy4wNDMgNTAuMDM5IDEzMy4xNzcgNTAuMzYyNkMxMzMuMzE4IDUwLjY4MjEgMTMzLjMzOSA1MS4wNDI2IDEzMy4yMzcgNTEuMzc4NUMxMzMuMTM2IDUxLjc1OTQgMTMyLjg0NCA1Mi4wNTg1IDEzMi40NzIgNTIuMTY5MUMxMzIuMDQyIDUyLjMyODggMTMxLjU2IDUyLjI2NzQgMTMxLjE4NCA1Mi4wMDUyQzEzMC45MiA1MS44MjA5IDEzMC43NDIgNTEuNTM0MSAxMzAuNjkzIDUxLjIxMDVDMTMwLjY3NyA1MS4xMjA0IDEzMC42NzMgNTEuMDM0NCAxMzAuNjY1IDUwLjk0NDNWNTAuOTExNVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik02MC4wMzgxIDUxLjYwMzhDNjAuMDM4MSA1MS4zMjUyIDYwLjE3OTkgNTEuMTY5NiA2MC40NTEzIDUxLjE2OTZINjIuNjE4NUM2My45MjY5IDUxLjE2OTYgNjQuODcwOCA1MS44NTM3IDY0Ljg3MDggNTMuMDU4QzY0Ljg3MDggNTMuNzQyIDY0LjU0MjYgNTQuMzMxOSA2My45OTE3IDU0LjYzMDlWNTQuNjUxNEM2NC43Nzc2IDU0Ljg4OSA2NS4xNTg0IDU1LjYzNDUgNjUuMTU4NCA1Ni4zOEM2NS4xNTg0IDU3Ljg1MDUgNjQuMDAzOSA1OC41MSA2Mi42NTQ5IDU4LjUxSDYwLjQ1MTNDNjAuMTc1OCA1OC41MSA2MC4wMzgxIDU4LjM2MjYgNjAuMDM4MSA1OC4wNzU4VjUxLjYwMzhaTTYyLjYzNDcgNTQuMTY4QzYzLjIwNTkgNTQuMTY4IDYzLjUyNTkgNTMuNzU0MyA2My41MjU5IDUzLjIyNTlDNjMuNTI1OSA1Mi42OTc1IDYzLjIxNCA1Mi4zMTY1IDYyLjYwNjMgNTIuMzE2NUg2MS4zNDI1VjU0LjE2OEg2Mi42MzQ3Wk02Mi43NTYyIDU3LjM2MzFDNjMuNDMyNyA1Ny4zNjMxIDYzLjgwOTQgNTYuOTE2NiA2My44MDk0IDU2LjI5ODFDNjMuODA5NCA1NS42Nzk1IDYzLjQyMDYgNTUuMjQ1MyA2Mi43NTYyIDU1LjI0NTNINjEuMzM4NFY1Ny4zNjMxSDYyLjc1NjJaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNjkuMzEwOCA1NS40NDE5TDY3LjE4NDEgNTEuNjg1N0M2Ny4wMDk5IDUxLjM5NDggNjcuMTQzNiA1MS4xNjk2IDY3LjQ3MTcgNTEuMTY5Nkg2OC4wNDI5QzY4LjI1NzYgNTEuMTU3MyA2OC40NTYxIDUxLjI4ODMgNjguNTMzMSA1MS40ODkxTDY5LjUxNzQgNTMuMzMyNEM2OS43NDAyIDUzLjc4NyA2OS45NTkgNTQuMzE1NSA2OS45NTkgNTQuMzE1NUg2OS45NzkyQzY5Ljk3OTIgNTQuMzE1NSA3MC4xOTM5IDUzLjc5MTEgNzAuNDE2NyA1My4zMzI0TDcxLjM5NyA1MS40ODkxQzcxLjQ3NCA1MS4yODQyIDcxLjY3MjUgNTEuMTU3MyA3MS44ODcyIDUxLjE2OTZINzIuNDYyNEM3Mi43OTg2IDUxLjE2OTYgNzIuOTI0MiA1MS4zOTQ4IDcyLjc1ODEgNTEuNjg1N0w3MC42MTkzIDU1LjQ0MTlWNTguMDc5OUM3MC42MTkzIDU4LjM3MDcgNzAuNDc3NSA1OC41MTQxIDcwLjIwNjEgNTguNTE0MUg2OS43NDAyQzY5LjQ1MjYgNTguNTE0MSA2OS4zMTA4IDU4LjM3MDcgNjkuMzEwOCA1OC4wNzk5VjU1LjQ0MTlaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzgwMTlfMTk5NyI+CjxyZWN0IHdpZHRoPSIxNTEiIGhlaWdodD0iNTkuMTk5MiIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMC40MDAzOTEpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==",DI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iNDMiIGhlaWdodD0iNDIiIHZpZXdCb3g9IjAgMCA0MyA0MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMzLjc1IDIyLjc1SDkuMjVWMTkuMjVIMzMuNzVWMjIuNzVaIiBmaWxsPSIjRjFGQkZFIi8+Cjwvc3ZnPgo=",AI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iNDk2IiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDQ5NiAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xODMuMjU5IDAuNjkzMzU5SDE0NC43NDFDMTQyLjAxNSAwLjY5NjQzIDEzOS40MDEgMS43ODA4MiAxMzcuNDczIDMuNzA4NjNDMTM1LjU0NSA1LjYzNjQ0IDEzNC40NjEgOC4yNTAyMyAxMzQuNDU4IDEwLjk3NjZWODkuMDIzNEMxMzQuNDYxIDkxLjc0OTggMTM1LjU0NSA5NC4zNjM2IDEzNy40NzMgOTYuMjkxNEMxMzkuNDAxIDk4LjIxOTIgMTQyLjAxNSA5OS4zMDM2IDE0NC43NDEgOTkuMzA2NkgxODMuMjU5QzE4NS45ODUgOTkuMzAzNiAxODguNTk5IDk4LjIxOTIgMTkwLjUyNyA5Ni4yOTE0QzE5Mi40NTUgOTQuMzYzNiAxOTMuNTM5IDkxLjc0OTggMTkzLjU0MiA4OS4wMjM0VjEwLjk3NjZDMTkzLjUzOSA4LjI1MDIzIDE5Mi40NTUgNS42MzY0NCAxOTAuNTI3IDMuNzA4NjNDMTg4LjU5OSAxLjc4MDgyIDE4NS45ODUgMC42OTY0MyAxODMuMjU5IDAuNjkzMzU5VjAuNjkzMzU5Wk0xNzUuNTc3IDQuMzg0NzdWNi43NzA0N0MxNzUuNTc2IDcuMjUyMzUgMTc1LjM4NCA3LjcxNDI1IDE3NS4wNDMgOC4wNTQ4OUMxNzQuNzAyIDguMzk1NTQgMTc0LjI0IDguNTg3MTQgMTczLjc1OCA4LjU4NzdIMTU0LjI0N0MxNTMuNzY1IDguNTg3MTQgMTUzLjMwMyA4LjM5NTUgMTUyLjk2MiA4LjA1NDgzQzE1Mi42MjIgNy43MTQxNSAxNTIuNDMgNy4yNTIyNSAxNTIuNDMgNi43NzA0N1Y0LjM4NDc3SDE3NS41NzdaTTE4OS44NSA4OS4wMjM0QzE4OS44NDggOTAuNzcxMSAxODkuMTUzIDkyLjQ0NjYgMTg3LjkxNyA5My42ODI0QzE4Ni42ODEgOTQuOTE4MiAxODUuMDA2IDk1LjYxMzMgMTgzLjI1OCA5NS42MTUySDE0NC43NDFDMTQyLjk5MyA5NS42MTMzIDE0MS4zMTggOTQuOTE4MiAxNDAuMDgyIDkzLjY4MjRDMTM4Ljg0NiA5Mi40NDY2IDEzOC4xNTEgOTAuNzcxMSAxMzguMTQ5IDg5LjAyMzRWMTAuOTc2NkMxMzguMTUxIDkuMjI4OTEgMTM4Ljg0NiA3LjU1MzM5IDE0MC4wODIgNi4zMTc2MkMxNDEuMzE4IDUuMDgxODQgMTQyLjk5MyA0LjM4NjcyIDE0NC43NDEgNC4zODQ3N0gxNDguNzM0VjYuNzcwNDdDMTQ4LjczNiA4LjIzMDkzIDE0OS4zMTYgOS42MzExIDE1MC4zNDkgMTAuNjYzOEMxNTEuMzgyIDExLjY5NjUgMTUyLjc4MiAxMi4yNzc0IDE1NC4yNDMgMTIuMjc5MUgxNzMuNzU0QzE3NS4yMTUgMTIuMjc3NCAxNzYuNjE1IDExLjY5NjYgMTc3LjY0OCAxMC42NjM5QzE3OC42ODEgOS42MzEyIDE3OS4yNjIgOC4yMzEwMyAxNzkuMjY0IDYuNzcwNDdWNC4zODQ3N0gxODMuMjU5QzE4NS4wMDcgNC4zODcgMTg2LjY4MiA1LjA4MjI0IDE4Ny45MTcgNi4zMTc5OUMxODkuMTUzIDcuNTUzNzQgMTg5Ljg0OCA5LjIyOTA5IDE4OS44NSAxMC45NzY2Vjg5LjAyMzRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTc1LjM0OSA4Ni44MjYySDE1Mi42NTFDMTUyLjE2MSA4Ni44MjYyIDE1MS42OTIgODcuMDIwNiAxNTEuMzQ2IDg3LjM2NjhDMTUxIDg3LjcxMjkgMTUwLjgwNSA4OC4xODI0IDE1MC44MDUgODguNjcxOUMxNTAuODA1IDg5LjE2MTQgMTUxIDg5LjYzMDggMTUxLjM0NiA4OS45NzdDMTUxLjY5MiA5MC4zMjMxIDE1Mi4xNjEgOTAuNTE3NiAxNTIuNjUxIDkwLjUxNzZIMTc1LjM0OUMxNzUuODM4IDkwLjUxNzYgMTc2LjMwOCA5MC4zMjMxIDE3Ni42NTQgODkuOTc3QzE3NyA4OS42MzA4IDE3Ny4xOTUgODkuMTYxNCAxNzcuMTk1IDg4LjY3MTlDMTc3LjE5NSA4OC4xODI0IDE3NyA4Ny43MTI5IDE3Ni42NTQgODcuMzY2OEMxNzYuMzA4IDg3LjAyMDYgMTc1LjgzOCA4Ni44MjYyIDE3NS4zNDkgODYuODI2MlY4Ni44MjYyWiIgZmlsbD0id2hpdGUiLz4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzExNDUzXzMxNzg3KSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjMzLjA2IDEyLjQ0NzFDMjMzLjA2IDEwLjc2NTUgMjM0LjQyNCA5LjQwMjM0IDIzNi4xMDUgOS40MDIzNEgzNTAuMzAzQzM1MS45ODUgOS40MDIzNCAzNTMuMzQ4IDEwLjc2NTUgMzUzLjM0OCAxMi40NDcxVjg0LjU4MkgyMzMuMDZWMTIuNDQ3MVpNMjM1LjMxNiAxNC42NjQ5SDM1MS4wOTNWODIuMzI2N0gyMzUuMzE2VjE0LjY2NDlaTTIyNS41NDIgODYuMDg1NkgzNjAuODY1Vjg3LjU1MTZDMzYwLjg2NSA4OS4yMzMyIDM1OS41MDIgOTAuNTk2NCAzNTcuODIxIDkwLjU5NjRIMjI4LjU4N0MyMjYuOTA2IDkwLjU5NjQgMjI1LjU0MiA4OS4yMzMyIDIyNS41NDIgODcuNTUxNlY4Ni4wODU2Wk0yODcuMTkgODcuNTg5MkMyODYuMzU5IDg3LjU4OTIgMjg1LjY4NiA4Ni45MTYxIDI4NS42ODYgODYuMDg1NkgzMDAuNzIyQzMwMC43MjIgODYuOTE2MSAzMDAuMDQ5IDg3LjU4OTIgMjk5LjIxOCA4Ny41ODkySDI4Ny4xOVoiIGZpbGw9IndoaXRlIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTE0NTNfMzE3ODciPgo8cmVjdCB3aWR0aD0iMTM2IiBoZWlnaHQ9IjgxLjE5NCIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNS41NDIgOS40MDIzNCkiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",CI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzgiIHZpZXdCb3g9IjAgMCAzOCAzOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgb3BhY2l0eT0iMC43Ij4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xLjU4MjAzIDE5QzQuMzIxMiAxMi4wNDkyIDExLjA4MiA3LjEyNSAxOC45OTg3IDcuMTI1QzI2LjkxNTQgNy4xMjUgMzMuNjc2MiAxMi4wNDkyIDM2LjQxNTQgMTlDMzMuNjc2MiAyNS45NTA4IDI2LjkxNTQgMzAuODc1IDE4Ljk5ODcgMzAuODc1QzExLjA4MiAzMC44NzUgNC4zMjEyIDI1Ljk1MDggMS41ODIwMyAxOVpNMzIuOTYzNyAxOUMzMC4zNTEyIDEzLjY2NDIgMjQuOTk5NSAxMC4yOTE3IDE4Ljk5ODcgMTAuMjkxN0MxMi45OTc5IDEwLjI5MTcgNy42NDYyIDEzLjY2NDIgNS4wMzM3IDE5QzcuNjQ2MiAyNC4zMzU4IDEyLjk5NzkgMjcuNzA4MyAxOC45OTg3IDI3LjcwODNDMjQuOTk5NSAyNy43MDgzIDMwLjM1MTIgMjQuMzM1OCAzMi45NjM3IDE5Wk0xOC45OTg3IDE1LjA0MTdDMjEuMTgzNyAxNS4wNDE3IDIyLjk1NyAxNi44MTUgMjIuOTU3IDE5QzIyLjk1NyAyMS4xODUgMjEuMTgzNyAyMi45NTgzIDE4Ljk5ODcgMjIuOTU4M0MxNi44MTM3IDIyLjk1ODMgMTUuMDQwNCAyMS4xODUgMTUuMDQwNCAxOUMxNS4wNDA0IDE2LjgxNSAxNi44MTM3IDE1LjA0MTcgMTguOTk4NyAxNS4wNDE3Wk0xMS44NzM3IDE5QzExLjg3MzcgMTUuMDczMyAxNS4wNzIgMTEuODc1IDE4Ljk5ODcgMTEuODc1QzIyLjkyNTQgMTEuODc1IDI2LjEyMzcgMTUuMDczMyAyNi4xMjM3IDE5QzI2LjEyMzcgMjIuOTI2NyAyMi45MjU0IDI2LjEyNSAxOC45OTg3IDI2LjEyNUMxNS4wNzIgMjYuMTI1IDExLjg3MzcgMjIuOTI2NyAxMS44NzM3IDE5WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8L3N2Zz4K",NI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iNDIiIGhlaWdodD0iNDIiIHZpZXdCb3g9IjAgMCA0MiA0MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyLjk2NzUgMTUuMDMzMkwyMSAyMy4wNDgyTDI5LjAzMjUgMTUuMDMzMkwzMS41IDE3LjUwMDdMMjEgMjguMDAwN0wxMC41IDE3LjUwMDdMMTIuOTY3NSAxNS4wMzMyWiIgZmlsbD0iI0YxRkJGRSIvPgo8L3N2Zz4K",xI="data:image/svg+xml;base64, PHN2ZyBoZWlnaHQ9IjU2IiB3aWR0aD0iNTYiIHZpZXdCb3g9IjAgMCA1NiA1NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIyLjExMjQgM0MzMi42NTAyIDMgNDEuMjI0OSAxMS4yNjg1IDQxLjIyNDkgMjEuNTA5NUM0MS4yMjQ5IDI1Ljg3MDQgMzkuNjcwMSAyOS44NzM2IDM3LjA3MSAzMy4wMzNMNTMgNDkuOTQwN0w0OS43NTI1IDUzTDMzLjg0OSAzNi4xMTkxQzMwLjYwNzUgMzguNTY0MiAyNi41MzI3IDQwLjAxOTEgMjIuMTEyNCA0MC4wMTkxQzExLjU3NDcgNDAuMDE5MSAzIDMxLjc1MDYgMyAyMS41MDk1QzMgMTEuMjY4NSAxMS41NzQ3IDMgMjIuMTEyNCAzWk0yMi4xMTI0IDcuNDYxNThDMTQuMDAzMiA3LjQ2MTU4IDcuNDYxNTggMTMuNzY5NiA3LjQ2MTU4IDIxLjUwOTVDNy40NjE1OCAyOS4yNDk1IDE0LjAwMzIgMzUuNTU3NSAyMi4xMTI0IDM1LjU1NzVDMzAuMjIxNyAzNS41NTc1IDM2Ljc2MzMgMjkuMjQ5NSAzNi43NjMzIDIxLjUwOTVDMzYuNzYzMyAxMy43Njk2IDMwLjIyMTcgNy40NjE1OCAyMi4xMTI0IDcuNDYxNThaIiBmaWxsPSIjRjFGQkZFIi8+Cjwvc3ZnPgo=",kI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAzMiAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI4IDBWOEg0VjBIMFYxMkgzMlYwSDI4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",wI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMTMwIiBoZWlnaHQ9IjgxIiB2aWV3Qm94PSIwIDAgMTMwIDgxIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfOTI5XzE5ODA3KSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTMwIDBIMFY3NC41ODQySDEzMFYwWk0xMjcuODA0IDIuMjAyOTZIMi4xOTYzN1Y3Mi4zODEySDEyNy44MDRWMi4yMDI5NloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik02Mi40MDc4IDc2Ljk4OTlWNzQuNTg0SDY0Ljk5OTlWNzkuNTk2M0w0Ni42NTYyIDgwLjk5OThWNzkuNTk2M0w2Mi40MDc4IDc2Ljk4OTlaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNjcuNTkyIDc2Ljk4OTlWNzQuNTg0SDY1Vjc5LjU5NjNMODMuMzQzNiA4MC45OTk4Vjc5LjU5NjNMNjcuNTkyIDc2Ljk4OTlaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzkyOV8xOTgwNyI+CjxyZWN0IHdpZHRoPSIxMzAiIGhlaWdodD0iODEiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==",OI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMTMwIiBoZWlnaHQ9IjgyIiB2aWV3Qm94PSIwIDAgMTMwIDgyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTE0NTNfMzE4MDcpIj4KPHBhdGggZD0iTTEzMC4yNzUgMC41VjAuMjI1SDEzMEgwSC0wLjI3NVYwLjVWNzUuMDg0MlY3NS4zNTkySDBIMTMwSDEzMC4yNzVWNzUuMDg0MlYwLjVaTTIuNDcxMzcgNzIuNjA2MlYyLjk3Nzk2SDEyNy41MjlWNzIuNjA2MkgyLjQ3MTM3WiIgZmlsbD0id2hpdGUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMC41NSIvPgo8cGF0aCBkPSJNNjIuNDA3OCA3Ny40ODk5Vjc1LjA4NEg2NC45OTk4VjgwLjA5NjNMNDYuNjU2MiA4MS40OTk4VjgwLjA5NjNMNjIuNDA3OCA3Ny40ODk5WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTY3LjU5MjIgNzcuNDg5OVY3NS4wODRINjUuMDAwMlY4MC4wOTYzTDgzLjM0MzggODEuNDk5OFY4MC4wOTYzTDY3LjU5MjIgNzcuNDg5OVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik03OC4yNSAzNy41NjdDNzguNTgzMyAzNy43NTk0IDc4LjU4MzMgMzguMjQwNiA3OC4yNSAzOC40MzNMNTguNzUgNDkuNjkxM0M1OC40MTY3IDQ5Ljg4MzggNTggNDkuNjQzMiA1OCA0OS4yNTgzTDU4IDI2Ljc0MTdDNTggMjYuMzU2OCA1OC40MTY3IDI2LjExNjIgNTguNzUgMjYuMzA4N0w3OC4yNSAzNy41NjdaIiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIzIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTE0NTNfMzE4MDciPgo8cmVjdCB3aWR0aD0iMTMwIiBoZWlnaHQ9IjgxIiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAwLjUpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==",LI="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iMjEwIiBoZWlnaHQ9Ijg1IiB2aWV3Qm94PSIwIDAgMjEwIDg1IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTEwNjdfMjgwNzQpIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04LjQ5MzA3IDQuOTQ3NjFDOC40OTMwNyAzLjI2NjAzIDkuODU2MjUgMS45MDI4MyAxMS41Mzc4IDEuOTAyODNIMTI1LjczNkMxMjcuNDE4IDEuOTAyODMgMTI4Ljc4MSAzLjI2NjAzIDEyOC43ODEgNC45NDc2MVY3Ny4wODI1SDguNDkzMDdWNC45NDc2MVpNMTAuNzQ4NiA3LjE2NTRIMTI2LjUyNVY3NC44MjcxSDEwLjc0ODZWNy4xNjU0Wk0wLjk3NTA5OCA3OC41ODYxSDEzNi4yOThWODAuMDUyMUMxMzYuMjk4IDgxLjczMzcgMTM0LjkzNSA4My4wOTY5IDEzMy4yNTMgODMuMDk2OUg0LjAxOTg3QzIuMzM4MjggODMuMDk2OSAwLjk3NTA5OCA4MS43MzM3IDAuOTc1MDk4IDgwLjA1MjFWNzguNTg2MVpNNjIuNjIyNCA4MC4wODk3QzYxLjc5MiA4MC4wODk3IDYxLjExODkgNzkuNDE2NSA2MS4xMTg5IDc4LjU4NjFINzYuMTU0OEM3Ni4xNTQ4IDc5LjQxNjUgNzUuNDgxNiA4MC4wODk3IDc0LjY1MTIgODAuMDg5N0g2Mi42MjI0WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8cGF0aCBkPSJNMjAyLjkyMiAwLjkxMzMzSDE3My4wOTZDMTY5LjcxOCAwLjkxMzMzIDE2Ni45NzUgMy42NTYxIDE2Ni45NzUgNy4wMzQ2MlY3Ny45NjUzQzE2Ni45NzUgODEuMzQzOCAxNjkuNzE4IDg0LjA4NjYgMTczLjA5NiA4NC4wODY2SDIwMi45MDRDMjA2LjI4MiA4NC4wODY2IDIwOS4wMjUgODEuMzQzOCAyMDkuMDI1IDc3Ljk2NTNWNy4wMzQ2MkMyMDkuMDI1IDMuNjU2MSAyMDYuMyAwLjkxMzMzIDIwMi45MjIgMC45MTMzM1pNMTg0LjUyMiAzLjU0NzEySDE5MS45NTFDMTkyLjE4NyAzLjU0NzEyIDE5Mi4zODcgMy43NDY5MiAxOTIuMzg3IDMuOTgzMDZDMTkyLjM4NyA0LjIxOTE5IDE5Mi4xODcgNC40MTg5OSAxOTEuOTUxIDQuNDE4OTlIMTg0LjUyMkMxODQuMjg1IDQuNDE4OTkgMTg0LjA4NiA0LjIxOTE5IDE4NC4wODYgMy45ODMwNkMxODQuMDg2IDMuNzQ2OTIgMTg0LjI4NSAzLjU0NzEyIDE4NC41MjIgMy41NDcxMlpNMTgzLjE5NiAzLjUxMDc5QzE4My40NjggMy41MTA3OSAxODMuNjg2IDMuNzI4NzYgMTgzLjY4NiA0LjAwMTIyQzE4My42ODYgNC4yNzM2OCAxODMuNDY4IDQuNDkxNjUgMTgzLjE5NiA0LjQ5MTY1QzE4Mi45MjMgNC40OTE2NSAxODIuNzA1IDQuMjczNjggMTgyLjcwNSA0LjAwMTIyQzE4Mi43MDUgMy43Mjg3NiAxODIuOTQxIDMuNTEwNzkgMTgzLjE5NiAzLjUxMDc5Wk0xOTIuMjA1IDgyLjIzMzhIMTg0LjE1OEMxODMuNTIzIDgyLjIzMzggMTgyLjk5NiA4MS43MDcxIDE4Mi45OTYgODEuMDcxM0MxODIuOTk2IDgwLjQzNTYgMTgzLjUyMyA3OS45MDg4IDE4NC4xNTggNzkuOTA4OEgxOTIuMjA1QzE5Mi44NDEgNzkuOTA4OCAxOTMuMzY3IDgwLjQzNTYgMTkzLjM2NyA4MS4wNzEzQzE5My4zNjcgODEuNzA3MSAxOTIuODQxIDgyLjIzMzggMTkyLjIwNSA4Mi4yMzM4Wk0yMDYuNDI3IDc3LjgwMThIMTY5Ljc1NFY3LjE3OTkzSDIwNi40MDlWNzcuODAxOEgyMDYuNDI3WiIgZmlsbD0id2hpdGUiLz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTEwNjdfMjgwNzQiPgo8cmVjdCB3aWR0aD0iMTM2IiBoZWlnaHQ9IjgxLjE5NCIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuOTc1MDk4IDEuOTAyODMpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==",RI=function(t){_inherits(LoadingSpinner,t);var r=_createSuper(LoadingSpinner);function LoadingSpinner(){return _classCallCheck(this,LoadingSpinner),r.apply(this,arguments)}return _createClass(LoadingSpinner,[{key:"_active",value:function _active(){var t=this;this.spinnerAnimation=this.animation({duration:1.25,delay:0,repeat:-1,repeatDelay:0,stopMethod:"forward",actions:[{p:"rotation",v:{0:{v:0,sm:0,s:0},1:{v:6.29,sm:0,s:0}}}]}),this.spinnerAnimation.start(),this.announceTimer=setTimeout((function(){t.fireAncestors("$announce",["Loading"])}),3e3)}},{key:"_inactive",value:function _inactive(){this.spinnerAnimation.stop(),clearTimeout(this.announceTimer)}}],[{key:"_template",value:function _template(){return{w:134,h:134,texture:j.Tools.getSvgTexture(EI,134,134)}}}]),LoadingSpinner}(j.Component),jI=function(t){_inherits(Loading,t);var r=_createSuper(Loading);function Loading(){return _classCallCheck(this,Loading),r.apply(this,arguments)}return _createClass(Loading,null,[{key:"_template",value:function _template(){return{x:0,y:0,w:function w(t){return t},h:function h(t){return t},rect:!0,color:Ug.darkBlue500,Container:{w:function w(t){return t},h:function h(t){return t},flex:{direction:"column",alignItems:"center",justifyContent:"center"},Spinner:{type:RI}}}}}]),Loading}(j.Component),PI=function(t){_inherits(Poster,t);var r,i=_createSuper(Poster);function Poster(){return _classCallCheck(this,Poster),i.apply(this,arguments)}return _createClass(Poster,[{key:"item",get:function get(){return this._item||{}},set:function set(t){if(this._item=t,this._item.isViewAll)this.patch({Text:{x:60,y:120,flex:{direction:"column",justifyContent:"center",alignItems:"center"},visible:!0,text:_objectSpread2({text:"View all",textAlign:"center",verticalAlign:"center",wordWrapWidth:100},kg.TextStyles.h1)},Background:{visible:!0}});else{var r=this._item,i=r.imageSrc,a=r.tag;$E({ref:this,width:150,height:57}),this.patch({Image:{texture:Img(i).cover(Poster.width,Poster.height)}}),a&&this.tag("Tag").patch({visible:!0,label:a})}}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(Poster.prototype),"_focus",this).call(this),this.fireAncestors("$announcerRefresh"),this.patch({Borders:{Top:{h:8},Right:{w:8},Bottom:{h:8},Left:{w:8}}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(Poster.prototype),"_unfocus",this).call(this),this.patch({Borders:{Top:{h:0},Right:{w:0},Bottom:{h:0},Left:{w:0}}})}},{key:"_handleEnter",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t,r,i,a,u,l,c,d,g,p,m,v;return regeneratorRuntime.wrap((function _callee$(b){for(;;)switch(b.prev=b.next){case 0:if(this.item.path){b.next=3;break}return b.abrupt("return",!0);case 3:if(t=this.item,r=t.path,i=t.refUseCase,a=t.type,u=Cr.getActivePage()||{},l=u.pagePath,c=u.pageTemplate,d={refUseCase:i,pagePath:l,pageTemplate:c},"link"!==a||!r.includes("episode/")){b.next=14;break}return g=r.split("episode/")[1],b.next=10,Ni.getItem(g);case 10:return p=b.sent,m=lE("/show/".concat(p.showId)),v={focusIndex:1,focusedItemIndex:p.episodeNumber,y:-758,focusType:"episode",secondaryFocus:p.seasonId,taArgs:d},b.abrupt("return",Cr.navigate("dynamic/".concat(m),v));case 14:return b.abrupt("return",Cr.navigate("dynamic/".concat(lE(r)),{taArgs:d}));case 15:case"end":return b.stop()}}),_callee,this)}))),function _handleEnter(){return r.apply(this,arguments)})},{key:"announce",get:function get(){var t=this._item,r=t.isViewAll,i=t.text,a=t.tag,u=void 0===a?"":a;return r?this.tag("Text").text.text:"".concat(u," ").concat(Mg.pronounceTTS(i))}}],[{key:"_template",value:function _template(){return{Image:{y:0,x:0,w:Poster.width,h:Poster.height},Borders:KE(Poster.width,Poster.height),Tag:{visible:!1,x:0,y:0,type:lI},Background:{visible:!1,color:kg.colours.mutedGrey500,rect:!0,w:Poster.width,h:Poster.height}}}},{key:"width",get:function get(){return 265}},{key:"height",get:function get(){return 396}},{key:"offset",get:function get(){return 20}}]),Poster}(j.Component),FI=function(t){_inherits(Grid,t);var r=_createSuper(Grid);function Grid(){return _classCallCheck(this,Grid),r.apply(this,arguments)}return _createClass(Grid,[{key:"_construct",value:function _construct(){this._indexX=0,this._indexY=0}},{key:"activeItem",get:function get(){return this.activeRow.children[this._indexX]}},{key:"activeRow",get:function get(){return this.tag("Items").children[this._indexY]}},{key:"container",get:function get(){return this._container},set:function set(t){this._container=t}},{key:"items",set:function set(t){this._items=t,vn.FIRST_CREATED=!1,this.tag("Items").patch({children:this._createItems(this._items)})}},{key:"itemComponent",get:function get(){throw new Error("itemComponent getter should return the class to use for rendering rail items.")}},{key:"numColumns",get:function get(){throw new Error("numColumns getter should return the number of items in a grid row.")}},{key:"numRows",get:function get(){return this.tag("Items").children.length}},{key:"finalRowLength",get:function get(){var t=this.tag("Items").children;return t[t.length-1].children.length}},{key:"_animateToSelected",value:function _animateToSelected(){this.tag("Items").setSmooth("y",-this.activeRow.finalY)}},{key:"_createItems",value:function _createItems(t){var r=this,i=this.itemComponent,a=i.height,u=i.offset,l=i.width,c=0,d=0,g=0;return t.reduce((function(t,p,m){c+1>r.numColumns&&(c=0,g=0,d+=a+u);var v={type:vn,construct:i,index:m,item:p,x:g,w:l,h:a};return 0===c?t.push({children:[v],y:d}):t[t.length-1].children.push(v),c+=1,g+=l+u,t}),[])}},{key:"_focus",value:function _focus(){this._animateToSelected()}},{key:"_unfocus",value:function _unfocus(){this.stage.gc()}},{key:"_handleUp",value:function _handleUp(){return!(this._indexY<1)&&(this._indexY-=1,this._animateToSelected(),!0)}},{key:"_handleRight",value:function _handleRight(){return this._indexX!==this.numColumns-1&&(!(this._indexY===this.numRows-1&&this._indexX+1>this.finalRowLength-1)&&(this._indexX+=1,this._animateToSelected(),!0))}},{key:"_handleDown",value:function _handleDown(){return this._indexY!==this.numRows-1&&(this._indexY===this.numRows-2&&this._indexX>this.finalRowLength-1?(this._indexX=this.finalRowLength-1,this._indexY+=1,this._animateToSelected(),!0):(this._indexY+=1,this._animateToSelected(),!0))}},{key:"_handleLeft",value:function _handleLeft(){return!(this._indexX<1)&&(this._indexX-=1,this._animateToSelected(),!0)}},{key:"_handleEnter",value:function _handleEnter(){this.activeItem.item}},{key:"$itemCreatedForFocus",value:function $itemCreatedForFocus(){this.application.updateFocusPath()}},{key:"_getFocused",value:function _getFocused(){return this.activeItem}}],[{key:"_template",value:function _template(){return{Container:{Items:{}}}}}]),Grid}(j.Component),BI=function(t){_inherits(Grid,t);var r=_createSuper(Grid);function Grid(){return _classCallCheck(this,Grid),r.apply(this,arguments)}return _createClass(Grid,[{key:"numColumns",get:function get(){return 5}},{key:"itemComponent",get:function get(){return cI}},{key:"_createItems",value:function _createItems(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.itemComponent,u=a.height,l=a.offset,c=a.width,d=0,g=i,p=0;return t.reduce((function(t,i,m){d+1>r.numColumns&&(d=0,p=0,g+=u+l);var v={type:vn,construct:a,index:m,item:i,x:p,w:c,h:u};return 0===d?t.push({children:[v],y:g}):t[t.length-1].children.push(v),d+=1,p+=c+l,t}),[])}},{key:"$resetGrid",value:function $resetGrid(){this._indexX=0,this._indexY=0,this.tag("Items").y=0,this.tag("Items").children.forEach((function(t){return t.patch({alpha:1})}))}},{key:"_focus",value:function _focus(){return!0}}],[{key:"_template",value:function _template(){return{Items:{}}}}]),Grid}(FI),zI=function(t){_inherits(SmallButton,t);var r=_createSuper(SmallButton);function SmallButton(){return _classCallCheck(this,SmallButton),r.apply(this,arguments)}return _createClass(SmallButton,[{key:"item",get:function get(){return this._item||{}},set:function set(t){this._item=t;var r=this._item,i=r.text,a=r.xAlign;this.tag("Label").patch({x:null!=a?a:48,text:{text:i}})}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(SmallButton.prototype),"_focus",this).call(this),this.patch({Background:{color:kg.colours.primary},Label:{text:{textColor:kg.colours.darkBlue500}}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(SmallButton.prototype),"_unfocus",this).call(this),this.patch({Background:{color:kg.colours.mutedBlue500},Label:{text:{textColor:kg.colours.lightBlue50}}})}},{key:"_handleEnter",value:function _handleEnter(){if(!this.item.path)return!0;var t=this.item.static?this.item.path:"dynamic/".concat(lE(this.item.path));return Cr.navigate(t)}},{key:"announce",get:function get(){return this._item.text}}],[{key:"_template",value:function _template(){return{Background:{w:SmallButton.width,h:SmallButton.height,rect:!0,color:kg.colours.mutedBlue500,shader:{type:j.shaders.RoundedRectangle,radius:40}},Label:{w:function w(t){return t-96},h:function h(t){return t-44},x:48,y:22,text:_objectSpread2({text:"",textAlign:"center",verticalAlign:"center",textColor:kg.colours.lightBlue50,wordWrap:!1,textOverflow:"ellipsis"},kg.TextStyles.ctaLabel)}}}},{key:"width",get:function get(){return 198}},{key:"height",get:function get(){return 82}},{key:"offset",get:function get(){return 20}}]),SmallButton}(j.Component),YI=function(t){_inherits(SquareCard,t);var r=_createSuper(SquareCard);function SquareCard(){return _classCallCheck(this,SquareCard),r.apply(this,arguments)}return _createClass(SquareCard,[{key:"item",get:function get(){return this._item||{}},set:function set(t){if(this._item=t,this._item.isViewAll)this.patch({Text:{x:55,y:100,flex:{direction:"column",justifyContent:"center",alignItems:"center"},visible:!0,text:_objectSpread2({text:"View all",textAlign:"center",verticalAlign:"center"},kg.TextStyles.h2)},Background:{visible:!0}});else{var r=this._item.imageSrc;this.patch({Image:{texture:Img(r).cover(SquareCard.width,SquareCard.height)}})}}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(SquareCard.prototype),"_focus",this).call(this),this.fireAncestors("$announcerRefresh"),this.patch({Borders:{Top:{h:8},Right:{w:8},Bottom:{h:8},Left:{w:8}}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(SquareCard.prototype),"_unfocus",this).call(this),this.patch({Borders:{Top:{h:0},Right:{w:0},Bottom:{h:0},Left:{w:0}}})}},{key:"_handleEnter",value:function _handleEnter(){return!this.item.path||Cr.navigate("dynamic/".concat(lE(this.item.path)))}},{key:"announce",get:function get(){var t=this._item,r=t.isViewAll,i=t.text;return r?this.tag("Text").text.text:i}}],[{key:"_template",value:function _template(){return{Image:{y:0,x:0,w:SquareCard.width,h:SquareCard.height},Borders:KE(SquareCard.width,SquareCard.height),Background:{visible:!1,color:kg.colours.mutedGrey500,rect:!0,w:SquareCard.width,h:SquareCard.height}}}},{key:"width",get:function get(){return 265}},{key:"height",get:function get(){return 265}},{key:"offset",get:function get(){return 20}}]),SquareCard}(j.Component),GI=function(t){_inherits(TextBlock,t);var r=_createSuper(TextBlock);function TextBlock(){return _classCallCheck(this,TextBlock),r.apply(this,arguments)}return _createClass(TextBlock,[{key:"content",set:function set(t){var r=t.text;this.tag("Content").patch({text:{text:r}})}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(TextBlock.prototype),"_focus",this).call(this),this.tag("Background").patch({color:kg.colours.mutedGrey500})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(TextBlock.prototype),"_unfocus",this).call(this),this.tag("Background").patch({color:kg.colours.darkBlue500})}},{key:"announce",get:function get(){return"".concat(this.tag("Content").text.text)}}],[{key:"_template",value:function _template(){return{Background:{color:kg.colours.darkBlue500,rect:!0,w:TextBlock.width,h:TextBlock.height,x:-115,flex:{direction:"column",justifyContent:"center"},Content:{x:115,text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.h1),{},{wordWrapWidth:TextBlock.width-230})}}}}},{key:"width",get:function get(){return 1920}},{key:"height",get:function get(){return 296}}]),TextBlock}(j.Component),HI=function(t){_inherits(ToggleButton,t);var r=_createSuper(ToggleButton);function ToggleButton(){return _classCallCheck(this,ToggleButton),r.apply(this,arguments)}return _createClass(ToggleButton,[{key:"heading",set:function set(t){this.tag("Heading").patch({text:{text:t}})}},{key:"defaultState",set:function set(t){this.isEnabled=t,this.isEnabled&&this.tag("OuterContainer").patch({Border:{color:kg.colours.lightBlue50},Toggle:{x:100,color:kg.colours.mutedBlue200},OnText:{alpha:1,text:{textColor:kg.colours.darkBlue500}},OffText:{alpha:0}})}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(ToggleButton.prototype),"_focus",this).call(this),this.isEnabled?this.tag("OuterContainer").patch({Toggle:{color:kg.colours.lightBlue500},OnText:{text:{textColor:kg.colours.lightBlue500}}}):this.tag("Toggle").patch({color:kg.colours.lightBlue500})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(ToggleButton.prototype),"_unfocus",this).call(this),this.isEnabled?this.tag("OuterContainer").patch({Toggle:{color:kg.colours.mutedBlue200},OnText:{text:{textColor:kg.colours.darkBlue500}}}):this.tag("Toggle").patch({color:kg.colours.mutedBlue200})}},{key:"onToggle",get:function get(){return this.callback},set:function set(t){this.callback=t}},{key:"_handleEnter",value:function _handleEnter(){var t=this;return!(this.onToggle&&!this.inProgress)||(this.isEnabled=!this.isEnabled,this.inProgress=!0,this.fireAncestors("$announce",this.isEnabled?"on":"off"),this.onToggle(this.isEnabled).then((function(r){return r?t._onSelectAnimation():t.isEnabled=!t.isEnabled,t.inProgress=!1,!0})).catch((function(r){t.isEnabled=!t.isEnabled,t.inProgress=!1})))}},{key:"_onSelectAnimation",value:function _onSelectAnimation(){this.isEnabled?(this.tag("Toggle").setSmooth("x",100,{duration:.25}),this.tag("OuterContainer").patch({Border:{color:kg.colours.lightBlue50},OnText:{alpha:1,text:{textColor:kg.colours.lightBlue500}},OffText:{alpha:0}})):(this.tag("Toggle").setSmooth("x",0),this.tag("OuterContainer").patch({Border:{color:"none"},OnText:{alpha:0},OffText:{alpha:1}}))}},{key:"announce",get:function get(){return"".concat(this.tag("Heading").text.text,", ").concat(this.isEnabled?"on":"off")}}],[{key:"_template",value:function _template(){return{flex:{direction:"column"},Heading:{flexItem:{marginTop:72,marginBottom:48},text:_objectSpread2({text:""},kg.TextStyles.h3)},OuterContainer:{Border:{w:194,h:78,x:1,rect:!0,color:"none",shader:{type:j.shaders.RoundedRectangle,radius:40,stroke:3,strokeColor:kg.colours.lightBlue50}},Toggle:{w:94,h:78,x:1,rect:!0,color:kg.colours.mutedBlue200,shader:{type:j.shaders.RoundedRectangle,radius:40,stroke:3,strokeColor:kg.colours.lightBlue50}},OnText:{x:20,y:20,alpha:0,text:_objectSpread2(_objectSpread2({text:"ON"},kg.TextStyles.ctaLabel),{},{textColor:kg.colours.lightBlue50}),transitions:{alpha:{delay:.5}}},OffText:{x:115,y:20,alpha:1,text:_objectSpread2(_objectSpread2({text:"OFF"},kg.TextStyles.ctaLabel),{},{textColor:kg.colours.lightBlue50}),transitions:{alpha:{delay:.5}}}}}}},{key:"height",get:function get(){return 243}}]),ToggleButton}(j.Component),QI=function(t){_inherits(Card,t);var r=_createSuper(Card);function Card(){return _classCallCheck(this,Card),r.apply(this,arguments)}return _createClass(Card,[{key:"item",set:function set(t){var r=t.name,i=t.initials;this._item=t,this.patch({Profile:{Container:{Initials:{text:{text:i}}}},Name:{text:{text:r}}})}},{key:"_focus",value:function _focus(){this.fireAncestors("$announcerRefresh"),this.patch({Profile:{Background:{color:kg.colours.primary},Container:{Initials:{color:kg.colours.darkBlue500}}}})}},{key:"_unfocus",value:function _unfocus(){this.patch({Profile:{Background:{color:kg.colours.mutedGrey500},Container:{Initials:{color:kg.colours.white500}}}})}},{key:"_handleEnter",value:function _handleEnter(){return Cr.navigate("dynamic/".concat(lE(this._item.path)))}},{key:"announce",get:function get(){return this.tag("Name").text.text}}],[{key:"_template",value:function _template(){return{w:Card.width,h:Card.height,flex:{direction:"column",justifyContent:"flex-start"},Profile:{w:265,h:265,Background:{w:function w(t){return t},h:function h(t){return t},rect:!0,color:kg.colours.mutedGrey500,shader:{type:j.shaders.RoundedRectangle,radius:132}},Container:{w:function w(t){return t},h:function h(t){return t},flex:{alignItems:"center",justifyContent:"center"},Initials:{h:80,text:_objectSpread2(_objectSpread2({},kg.TextStyles.h1),{},{text:"",verticalAlign:"bottom"})}}},Name:{w:Card.width,flexItem:{marginTop:24},text:_objectSpread2(_objectSpread2({},kg.TextStyles.bodyCopy),{},{text:"",lineHeight:42,textAlign:"center"})}}}},{key:"width",get:function get(){return 265}},{key:"height",get:function get(){return 365}},{key:"offset",get:function get(){return 20}}]),Card}(j.Component),VI=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",6),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return QI}}],[{key:"height",get:function get(){return QI.height+64+32+72}}]),Rail}(fI),WI={},$I={};Object.defineProperty($I,"__esModule",{value:!0});var KI=_g,qI=Mg;$I.default=function dataMapper(t){var r=t.item;if(!r)return null;var i=KI.pathOr("",["images","hero7x1"],r),a=KI.pathOr("",["path"],r),u=KI.pathOr("",["title"],r);return{imageSrc:qI.reformatImageSrc(i,{w:1690}),path:a,title:u}};var XI={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.dataMapper=void 0;var r=_g,i=Mg;t.dataMapper=function dataMapper(t){var a=r.pathOr([],["list","items"],t);if(!a.length)return[];var u=t.list,l=void 0===u?{}:u,c=l.customFields,d=(void 0===c?{}:c).UsecaseId,g=void 0===d?"":d,p=l.id,m=t.customFields,v=(void 0===m?{}:m).assetTitlePosition,b=t.template;return a.map((function(a){var u,l=a.advisoryText,c=a.customFields,d=void 0===c?{}:c,m=d.CCFlag,M=d.HDFlag,S=d.UHDFlag,E=a.badge,I=a.path,D=a.title,A=a.progress,C=a.isViewAll,N=a.duration,k=a.shortDescription,O=a.type,L=a.episodeName,R=a.episodeNumber,j=a.classification,B=a.watchPath,U=a.images,z=a.showTitle,Y=function getWidth(t){switch(t){default:return 322;case"T2":case"TB2":case"TB4":return 550}}(b),G=i.getItemImageType(O);U&&U[G]&&(u=U[G]),!u&&U&&(u=U.tile||U.wallpaper),"episode"===O&&"ContinueWatching"===p&&(u=r.pathOr("",["showDetail","show","images","tile"],a));var H=u||"",Q=A&&N?100*A/N:void 0,V="episode"===O&&"ContinueWatching"!==p?L:D,W=N?Math.round(N/60):"";return{advisoryText:l,imageSrc:i.reformatImageSrc(H,{w:Y}),path:I,watchPath:B,text:V,tag:E,assetTitlePosition:v,progressPercent:Q,shortDescription:k,episodeNumber:R,isViewAll:C,type:O,classification:r.pathOr("",["name"],j),durationMinutes:W,CCFlag:"True"===m?"CC":null,HDFlag:"True"===M?"HD":null,UHDFlag:"True"===S?"UHD":null,showTitle:z,title:D,seasonNumber:r.pathOr(void 0,["list","selectedSeason"],t),template:b,refUseCase:g}}))},t.default=t.dataMapper}(XI);var ZI={};Object.defineProperty(ZI,"__esModule",{value:!0});var JI=_g,eD=Mg;ZI.default=function dataMapper(t){var r=JI.pathOr([],["list","items"],t),i=t.customFields,a=void 0===i?{}:i,u=a.autoCycle,l=a.textHorizontalAlignment,c=a.textVerticalAlignment;if(!r.length)return{autoCycle:u,textHorizontalAlignment:l,textVerticalAlignment:c,items:[]};var d=r.map((function(t){var r=t.badge,i=t.path,a=t.tagline,u=t.title,l=JI.pathOr("",["images","hero3x1"],t),c=JI.pathOr("",["images","brand"],t);return l&&i?{title:u,tagline:a,imageSrc:eD.reformatImageSrc(l,{w:1920,h:640}),brandSrc:eD.reformatImageSrc(c,{format:"png",w:600,h:200}),path:i,tag:r}:null})).filter((function(t){return!!t}));return{autoCycle:u,textHorizontalAlignment:l,textVerticalAlignment:c,items:d}};var tD={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.dataMapper=void 0;var r=_g,i=Mg;t.dataMapper=function dataMapper(t){var a=r.pathOr([],["list","items"],t);if(!a.length)return[];var u=t.list,l=(void 0===u?{}:u).customFields,c=(void 0===l?{}:l).UsecaseId,d=void 0===c?"":c,g=t.template;return a.map((function(t){var a=t.badge,u=void 0===a?"":a,l=t.path,c=t.title,p=t.type,m=r.pathOr("",["images","poster"],t),v=function getHeight(t){switch(t){default:return 396;case"P2":return 481;case"PB4":return 442}}(g);return{imageSrc:i.reformatImageSrc(m,{h:v}),path:l,text:c,tag:u,type:p,refUseCase:d}}))},t.default=t.dataMapper}(tD);var rD={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.dataMapper=void 0;var r=_g;t.dataMapper=function dataMapper(t){var i=r.pathOr([],["list","items"],t);return Array.isArray(i)?i.map((function(t){var r=t.path,i=t.title;return r&&i?{path:r,text:i}:null})).filter((function(t){return!!t})):[]},t.default=t.dataMapper}(rD);var nD={};Object.defineProperty(nD,"__esModule",{value:!0});var iD=_g,aD=Mg;nD.default=function dataMapper(t){var r=iD.pathOr([],["list","items"],t);if(!r.length)return[];var i=t.template;return r.map((function(t){var r=t.path,a=t.contextualTitle,u=function getSize(t){return"S2"===t?322:265}(i),l=iD.pathOr("",["images","square"],t);return{imageSrc:aD.reformatImageSrc(l,{w:u,h:u}),path:r,text:a}}))};var oD={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.dataMapper=void 0;var r=_g;t.dataMapper=function dataMapper(t){var i=r.pathOr([],["list","items"],t);return i.length?i.map((function(t){var r=t.name,i=t.path,a=r.split(" ").map((function(t){return t[0]})).join("");return{name:r,initials:a,path:i}})):[]},t.default=t.dataMapper}(oD);var sD={};Object.defineProperty(sD,"__esModule",{value:!0});sD.default=function dataMapper(t){var r=t.customFields,i=(void 0===r?{}:r).subheading,a=void 0===i?"":i,u=t.text,l=void 0===u?"":u,c=t.title;return{subheading:a,text:l||(void 0===c?"":c)}};var uD={};Object.defineProperty(uD,"__esModule",{value:!0});var lD=_g,cD=Mg,dD=function getRandomItem(t){void 0===t&&(t=[]);var r=Math.floor(Math.random()*t.length-1);return lD.pathOr("",[r,"watchPath"],t)};uD.default=function dataMapper(t,r,i){if(!r)return null;var a,u=r.advisoryText,l=r.type,c=r.path,d=r.description,g=r.duration,p=r.images,m=void 0===p?{}:p,v=m.brand,b=m.wallpaper,M="movie"===l?r.id:r.showId,S=lD.pathOr({},["currentAsset"],t),E=function getTrailer(t,r){var i=lD.pathOr([],["show","trailers"],r),a=lD.pathOr([],["trailers"],r);if(t.indexOf("Show")>-1){if(i.length)return dD(i);if(a.length)return dD(a)}if(t.indexOf("Season")>-1){if(a.length)return dD(a);if(i.length)return dD(i)}return a.length?dD(a):""}(i,r);"movie"===l?a=lD.pathOr(0,["position"],S)>0:a=lD.pathEq(["suggestionType"],"ContinueWatching",S);var I,D="",A=a?"Resume":"Watch";switch(l){case"episode":case"movie":D=lD.pathOr("",["customId"],r);var C=lD.pathOr("",["classification","name"],r),N=g&&Math.round(g/60);I=(N?N+" MINS | ":"")+" "+C;break;default:var k=lD.pathOr("",["next","episodeNumber"],S);D=lD.pathOr("",["next","customId"],S);var O=lD.pathOr([],["show","seasons","items"],r),L=lD.pathOr(null,["next","seasonId"],S),R=O.find((function(t){return t.id===L})),j=lD.pathOr("",["seasonNumber"],R);A+=" "+(j?"S"+j:"")+" "+(k?"E"+k:""),I=O.length+" SEASON"+(O.length>1?"S":"")}var B="movie"===l?r.watchPath:lD.pathOr("",["next","watchPath"],S),U=lD.pathOr("",["show","images","wallpaper"],r),z=lD.pathOr("",["show","images","brand"],r),Y="season"===l?U:b,G="season"===l?z:v;return{advisoryText:"movie"===l?u:"",currentAsset:{path:B,text:A},id:M,path:c,imageSrc:Y&&cD.reformatImageSrc(Y,{w:1920,h:1080}),brandSrc:G&&cD.reformatImageSrc(G,{format:"png",w:420,h:140}),title:r.showTitle||r.title,metaText:I,description:d,trailerPath:E,customId:D}};var fD={};Object.defineProperty(fD,"__esModule",{value:!0});var hD=_g;fD.default=function dataMapper(t){var r=hD.pathOr([],["credits"],t).map((function(t){var r=hD.pathOr("",["character"],t),i=hD.pathOr("",["name"],t),a=hD.pathOr("",["role"],t),u=hD.pathOr("",["path"],t),l=i.split(" ").map((function(t){return t[0]})).join("");return{character:r,name:i,role:a,path:u,initials:l}}));return r};var gD={};Object.defineProperty(gD,"__esModule",{value:!0});var pD=_g;gD.default=function dataMapper(t,r,i){if(!r)return null;var a=pD.pathOr([],["episodes","items"],r);if(!a.length)return null;var u=pD.pathOr([],["show","seasons","items"],r),l=i.indexOf("Season")>-1;if(l)return{episodes:a,seasons:u,selectedSeason:r.seasonNumber||1,selectedEpisode:1,isSeasonPage:l};var c=pD.pathOr(null,["currentAsset","next","seasonId"],t),d=u.find((function(t){return t.id===c}));return{episodes:a,seasons:u,selectedSeason:(null==d?void 0:d.seasonNumber)||r.seasonNumber||1,selectedEpisode:pD.pathOr(1,["currentAsset","next","episodeNumber"],t),isSeasonPage:l}};var mD={};Object.defineProperty(mD,"__esModule",{value:!0});var yD=_g,vD=Mg;mD.default=function dataMapper(t){return t.length?t.map((function(t){var r=t.path,i=t.shortDescription,a=t.title,u=t.watchPath,l=yD.pathOr("",["images","tile"],t);return{imageSrc:vD.reformatImageSrc(l,{w:483}),path:r,watchPath:u,title:a,description:i}})):[]};var _D={};Object.defineProperty(_D,"__esModule",{value:!0});var TD=_g,bD=Mg;_D.default=function dataMapper(t,r){var i=TD.pathEq(["template"],"Editorial Image"),a=TD.pathEq(["template"],"Editorial Text"),u=!1,l=r.entries,c=TD.pathOr("",["images","wallpaper"],t);c||(c=TD.pathOr("",["images","tile"],t)),l.forEach((function(t){if(i(t)&&t.images||a(t)){if(i(t)&&!TD.hasPath(["images","custom"],t)&&!TD.hasPath(["images","wallpaper"],t))return null;u=!0}}));var d=t.customFields,g=void 0===d?{}:d,p=g.firstButtonLabel,m=void 0===p?"":p,v=g.firstVideoId,b=g.textOverlay,M=void 0===b?"":b,S=t.title;return{id:v,title:void 0===S?"":S,description:M,imageSrc:bD.reformatImageSrc(c,{w:1920,h:1080}),buttonLabel:m,hasAdditionalData:u}};var MD={};Object.defineProperty(MD,"__esModule",{value:!0});var SD=_g,ED=Mg;MD.default=function dataMapper(t,r){if(!r||!r.template.includes("Live"))return null;if(!SD.hasPath(["images","wallpaper"],t)&&!SD.hasPath(["images","custom"],t))return null;var i=SD.pathOr("",["images","wallpaper"],t);i||(i=SD.pathOr("",["images","custom"],t));var a=t.customFields,u=(void 0===a?{}:a).altText,l=t.id,c=t.title;return{id:l,title:void 0===c?"":c,altText:u,height:936,imageSrc:ED.reformatImageSrc(i,{w:1663,h:936})}};var ID={};Object.defineProperty(ID,"__esModule",{value:!0});var DD=_g,AD=Mg;ID.default=function dataMapper(t,r){if(!r.template.includes("Live"))return null;var i,a=DD.pathOr("",["text"],t),u=t.text;if(u&&(i=AD.formatEditorialText(u)),!a)return null;var l=i;return{formattedText:l.formattedText,height:l.height}};var CD=_e&&_e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(WI,"__esModule",{value:!0});var ND=WI.editorialTextLive=nA=WI.editorialImageLive=tA=WI.imageHeaderLive=JD=WI.relatedContentCardDataMapper=KD=WI.castAndCrewDataMapper=XD=WI.d3DataMapper=WD=WI.dh1DataMapper=QD=WI.heroTextDataMapper=GD=WI.actorProfileDataMapper=zD=WI.squareCardDataMapper=BD=WI.linkDataMapper=PD=WI.posterDataMapper=RD=WI.heroDataMapper=OD=WI.cardDataMapper=kD=WI.bannerDataMapper=void 0,xD=CD($I),kD=WI.bannerDataMapper=xD.default,wD=CD(XI),OD=WI.cardDataMapper=wD.default,LD=CD(ZI),RD=WI.heroDataMapper=LD.default,jD=CD(tD),PD=WI.posterDataMapper=jD.default,FD=CD(rD),BD=WI.linkDataMapper=FD.default,UD=CD(nD),zD=WI.squareCardDataMapper=UD.default,YD=CD(oD),GD=WI.actorProfileDataMapper=YD.default,HD=CD(sD),QD=WI.heroTextDataMapper=HD.default,VD=CD(uD),WD=WI.dh1DataMapper=VD.default,$D=CD(fD),KD=WI.castAndCrewDataMapper=$D.default,qD=CD(gD),XD=WI.d3DataMapper=qD.default,ZD=CD(mD),JD=WI.relatedContentCardDataMapper=ZD.default,eA=CD(_D),tA=WI.imageHeaderLive=eA.default,rA=CD(MD),nA=WI.editorialImageLive=rA.default,iA=CD(ID);ND=WI.editorialTextLive=iA.default;var aA=function(t){_inherits(Card,t);var r=_createSuper(Card);function Card(){return _classCallCheck(this,Card),r.apply(this,arguments)}return _createClass(Card,null,[{key:"imageHeight",get:function get(){return 173}},{key:"textHeight",get:function get(){return 60}},{key:"height",get:function get(){return Card.imageHeight+Card.textHeight+55}}]),Card}(cI),oA={keyOffset:56,rows:[[{value:"numeric",label:"123",announce:"Change to numeric keyboard"},{value:"a"},{value:"b"},{value:"c"},{value:"d"},{value:"e"},{value:"f"},{value:"g"},{value:"h"},{value:"i"},{value:"j"},{value:"k"},{value:"l"},{value:"m"},{value:"backspace",icon:j.Tools.getSvgTexture(yI,36,27),width:36,height:27}],[{value:"symbols",label:"!?#",announce:"Change to symbols keyboard"},{value:"n"},{value:"o"},{value:"p"},{value:"q"},{value:"r"},{value:"s"},{value:"t"},{value:"u"},{value:"v"},{value:"w"},{value:"x"},{value:"y"},{value:"z"},{value:"space",icon:j.Tools.getSvgTexture(kI,32,12),width:32,height:12}]]},sA={keyOffset:76,rows:[[{value:"alphabetical",label:"ABC",announce:"Change to alphabetical keyboard"},{value:"symbols",label:"!?#",announce:"Change to symbols keyboard"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"},{value:"7"},{value:"8"},{value:"9"},{value:"0"},{value:"backspace",icon:j.Tools.getSvgTexture(yI,36,27),width:36,height:27}]]},uA={keyOffset:105,rows:[[{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"},{value:"7"},{value:"8"},{value:"9"},{value:"0"},{value:"backspace",icon:j.Tools.getSvgTexture(yI,36,27),width:36,height:27}]]},lA={keyOffset:66,rows:[[{value:"alphabetical",label:"ABC",announce:"Change to alphabetical keyboard"},{value:"!",announce:"exclamation mark"},{value:"@",announce:"at sign"},{value:"#",announce:"number sign"},{value:"$",announce:"dollar sign"},{value:"%",announce:"percentage sign"},{value:"(",announce:"open parenthesis"},{value:")",announce:"close parenthesis"},{value:"-",announce:"dash"},{value:"_",announce:"underscore"},{value:"=",announce:"equals"},{value:"+",announce:"plus sign"},{value:"\\",announce:"backslash"},{value:"backspace",icon:j.Tools.getSvgTexture(yI,36,27),width:36,height:27}],[{value:"numeric",label:"123",announce:"Change to numeric keyboard"},{value:";",announce:"semicolon"},{value:":",announce:"colon"},{value:'"',announce:"quotation mark"},{value:"*",announce:"asterisk"},{value:"/",announce:"slash"},{value:".",announce:"dot"},{value:"[",announce:"open brackets"},{value:"]",announce:"close brackets"},{value:"{",announce:"open curly brackets"},{value:"}",announce:"close curly brackets"},{value:"'",announce:"apostrophe"},{value:",",announce:"comma"},{value:"space",icon:j.Tools.getSvgTexture(kI,32,12),width:32,height:12}]]},cA={keyOffset:56,rows:[[{value:"numeric",label:"123",announce:"Change to numeric keyboard"},{value:"a"},{value:"b"},{value:"c"},{value:"d"},{value:"e"},{value:"f"},{value:"g"},{value:"h"},{value:"i"},{value:"j"},{value:"k"},{value:"l"},{value:"m"},{value:"backspace",icon:j.Tools.getSvgTexture(yI,36,27),width:36,height:27}],[{value:"shift",label:"shift"},{value:"n"},{value:"o"},{value:"p"},{value:"q"},{value:"r"},{value:"s"},{value:"t"},{value:"u"},{value:"v"},{value:"w"},{value:"x"},{value:"y"},{value:"z"},{value:"space",icon:j.Tools.getSvgTexture(kI,32,12),width:32,height:12}]]},dA={keyOffset:56,rows:[[{value:"numeric",label:"123",announce:"Change to numeric keyboard"},{value:"A"},{value:"B"},{value:"C"},{value:"D"},{value:"E"},{value:"F"},{value:"G"},{value:"H"},{value:"I"},{value:"J"},{value:"K"},{value:"L"},{value:"M"},{value:"backspace",icon:j.Tools.getSvgTexture(yI,36,27),width:36,height:27}],[{value:"shift_up",label:"shift",announce:"Shift up"},{value:"N"},{value:"O"},{value:"P"},{value:"Q"},{value:"R"},{value:"S"},{value:"T"},{value:"U"},{value:"V"},{value:"W"},{value:"X"},{value:"Y"},{value:"Z"},{value:"space",icon:j.Tools.getSvgTexture(kI,32,12),width:32,height:12}]]},fA=function(t){_inherits(KeyboardKey,t);var r=_createSuper(KeyboardKey);function KeyboardKey(){return _classCallCheck(this,KeyboardKey),r.apply(this,arguments)}return _createClass(KeyboardKey,[{key:"value",get:function get(){return this._value},set:function set(t){var r=t.value,i=t.icon,a=t.label,u=t.width,l=t.height,c=t.announce;this._value=r,this._announce=c,a?this.tag("Value").patch({text:{text:a}}):i?this.tag("Value").patch({texture:i,w:u,h:l}):this.tag("Value").patch({text:{text:r}})}},{key:"_focus",value:function _focus(){this.patch({Background:{rect:!0,color:kg.colours.primary},Container:{Value:{color:kg.colours.darkBlue500}}})}},{key:"_unfocus",value:function _unfocus(){this.patch({Background:{color:"none"},Container:{Value:{color:kg.colours.white500}}})}},{key:"announce",get:function get(){return this._announce||this.value}}],[{key:"_template",value:function _template(){return{w:60,h:50,Background:{x:-10,w:function w(t){return t+20},h:function h(t){return t},shader:{type:j.shaders.RoundedRectangle,radius:4}},Container:{w:function w(t){return t},h:function h(t){return t},flex:{alignItems:"center",justifyContent:"center"},Value:{text:_objectSpread2(_objectSpread2({},kg.TextStyles.featuredCopy),{},{text:"",lineHeight:0})}}}}}]),KeyboardKey}(j.Component),hA=function(t){_inherits(KeyboardRow,t);var r=_createSuper(KeyboardRow);function KeyboardRow(){return _classCallCheck(this,KeyboardRow),r.apply(this,arguments)}return _createClass(KeyboardRow,[{key:"items",set:function set(t){var r=this,i=t.map((function(t){return{type:fA,value:t,flexItem:{marginRight:r._keyOffset}}}));this.tag("Items").children=i}},{key:"keyOffset",set:function set(t){this._keyOffset=t||0}},{key:"focusedIndex",get:function get(){return this._index},set:function set(t){this._index=t,this._keyValue=this.tag("Items").children[t].value}},{key:"keyValue",get:function get(){return this._keyValue}},{key:"_init",value:function _init(){this.focusedIndex=1}},{key:"_handleLeft",value:function _handleLeft(){var t=this._index;this._index>0?this.focusedIndex=t-1:this.focusedIndex=this.tag("Items").children.length-1}},{key:"_handleRight",value:function _handleRight(){var t=this._index;this._index<this.tag("Items").children.length-1?this.focusedIndex=t+1:this.focusedIndex=0}},{key:"_getFocused",value:function _getFocused(){return this.tag("Items").children[this._index]}}],[{key:"_template",value:function _template(){return{h:50,flexItem:{marginBottom:15},Items:{flex:{direction:"row"}}}}}]),KeyboardRow}(j.Component),gA={OPEN:"KEYBOARD::OPEN",CLOSE:"KEYBOARD::CLOSE",VALUE_UPDATE:"KEYBOARD::VALUE_UPDATE"},pA=["closeOnUp","closeOnDown"],mA=function(t){_inherits(Keyboard,t);var r=_createSuper(Keyboard);function Keyboard(){var t;_classCallCheck(this,Keyboard);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_visible",!1),_defineProperty(_assertThisInitialized(t),"onOpen",(function(r){var i=r.closeOnUp,a=void 0===i||i,u=r.closeOnDown,l=void 0===u||u,c=_objectWithoutProperties(r,pA);t.target=c.target,t.value=c.value,t.type=c.type,t.backURL=c.backURL,t.preferGoingBack=c.preferGoingBack,t.closeOnUp=a,t.closeOnDown=l,t.isExtraContent=c.isExtraContent,t.isOpen=!0,"password"!==c.type&&"name"!==c.type||t.handleChangeKeyboard(cA),"Pin"===c.target?(t.handleChangeKeyboard(uA),t.tag("Items").children[t._index].focusedIndex=0):t.tag("Items").children[t._index].focusedIndex=1,_n.getInstance().emit(gA.OPEN,{open:!0})})),t}return _createClass(Keyboard,[{key:"xPosition",set:function set(t){this.x=t}},{key:"yPosition",set:function set(t){this.y=t}},{key:"isOpen",get:function get(){return this._visible},set:function set(t){this._visible=t,this.tag("Container").patch({visible:t})}},{key:"closeOnDown",get:function get(){return this._closeOnDown},set:function set(t){this._closeOnDown=t}},{key:"_init",value:function _init(){this._index=0,this.handleChangeKeyboard=this.handleChangeKeyboard.bind(this),this.setValue=this.setValue.bind(this),this.handleChangeKeyboard(oA)}},{key:"_attach",value:function _attach(){_n.getInstance().addEventListener(gA.REQUEST_OPEN,this.onOpen)}},{key:"_detach",value:function _detach(){_n.getInstance().removeEventListener(gA.REQUEST_OPEN,this.onOpen)}},{key:"handleChangeKeyboard",value:function handleChangeKeyboard(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.rows,a=t.keyOffset,u=i.map((function(t){return{type:hA,keyOffset:a,items:t}}));this.tag("Items").children=u,this._index=0,r?this.tag("Items").children[1].focusedIndex=0:this.tag("Items").children[0].focusedIndex=0}},{key:"checkSpecialKey",value:function checkSpecialKey(t){switch(t){case"numeric":this.handleChangeKeyboard(sA);break;case"alphabetical":"password"===this.type||"name"===this.type?this.handleChangeKeyboard(cA,!0):this.handleChangeKeyboard(oA);break;case"symbols":this.handleChangeKeyboard(lA);break;case"shift":this.handleChangeKeyboard(dA,!0);break;case"shift_up":this.handleChangeKeyboard(cA,!0);break;case"backspace":this.setValue(-1);break;case"space":this.setValue(" ")}}},{key:"_handleEnter",value:function _handleEnter(){var t=this.tag("Items").children[this._index].keyValue;["numeric","alphabetical","symbols","backspace","space","shift","shift_up"].includes(t)?this.checkSpecialKey(t):this.setValue(t)}},{key:"closeKeyboard",value:function closeKeyboard(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isOpen=!1,this.handleChangeKeyboard(oA),t&&Cr.focusPage()}},{key:"_handleBack",value:function _handleBack(){var t=Cr.getHistory()||[];if("Pin"===this.target){this.closeKeyboard();var r=this.backURL,i=this.isExtraContent,a=Cr.getHistoryState()||{},u=t[t.length-1].hash;if(/new|watchlist/g.test(u))return Cr.replaceHistoryState(_objectSpread2(_objectSpread2({},a),{},{wasItemWatched:!1})),void Cr.back();if(this.backURL||i){this.backURL=null;var l=t.length>0?t[t.length-1].hash:"";return Cr.replaceHistoryState(_objectSpread2(_objectSpread2({},a),{},{focusType:l.includes("show")||l.includes("season")?"episode":"other",backToProgrammeDetailPage:!0,wasItemWatched:!1,isExtraContent:i})),"/"===a.pagePath||i?void Cr.back():void Cr.navigate("dynamic/".concat(lE(r)))}}this.preferGoingBack&&(0===t.length||"home"===t[0].hash?Cr.navigate("home"):Cr.back()),_n.getInstance().emit(gA.CLOSE,{open:!1,target:this.target}),this.closeKeyboard()}},{key:"_handleUp",value:function _handleUp(){var t=this.tag("Items").children;this._index>0?(t[this._index-1].focusedIndex=t[this._index].focusedIndex,this._index-=1):this.closeOnUp&&_n.getInstance().emit(gA.CLOSE,{open:!1,direction:"up",target:this.target})}},{key:"_handleDown",value:function _handleDown(){var t=this.tag("Items").children;this._index<t.length-1?(t[this._index+1].focusedIndex=t[this._index].focusedIndex,this._index+=1):this.closeOnDown&&_n.getInstance().emit(gA.CLOSE,{open:!1,direction:"down",target:this.target})}},{key:"_getFocused",value:function _getFocused(){return this.tag("Items").children[this._index]}},{key:"_inactive",value:function _inactive(){_n.getInstance().emit(gA.CLOSE,{open:!1}),this.closeKeyboard()}},{key:"setValue",value:function setValue(t){_n.getInstance().emit(gA.VALUE_UPDATE,{target:this.target,type:this.inputType,value:t})}},{key:"_handleKey",value:function _handleKey(t){switch(t.which){case 49:this.setValue(1);break;case 50:this.setValue(2);break;case 51:this.setValue(3);break;case 52:this.setValue(4);break;case 53:this.setValue(5);break;case 54:this.setValue(6);break;case 55:this.setValue(7);break;case 56:this.setValue(8);break;case 57:this.setValue(9);break;case 48:this.setValue(0)}}}],[{key:"_template",value:function _template(){return{x:0,y:0,Container:{visible:!1,Items:{flex:{direction:"column"}}}}}}]),Keyboard}(j.Component),yA="MENUBAR::ANIMATE",vA=function(t){_inherits(MenuBarItem,t);var r=_createSuper(MenuBarItem);function MenuBarItem(){return _classCallCheck(this,MenuBarItem),r.apply(this,arguments)}return _createClass(MenuBarItem,[{key:"content",set:function set(t){var r=t.label,i=void 0===r?"":r,a=t.icon,u=void 0===a?"":a;this.item=t,i?(this.type="Text",this.tag("Content").text=i.toUpperCase()):(this.type="Icon",this.patch({Content:{w:50,h:50,color:kg.colours.lightBlue50,texture:j.Tools.getSvgTexture(u,50,50)}}))}},{key:"_init",value:function _init(){this._timeout=null,this._handleEnter=this._handleEnter.bind(this)}},{key:"_focus",value:function _focus(){this._activeRoute=window.location.hash.substring(1),"account"===this.item.path&&this._activeRoute.includes("account/text")||(this._timeout=setTimeout(this._handleEnter,3e3)),"Text"!==this.type?this.patch({Content:{color:kg.colours.lightBlue500}}):this.tag("FocusedBar").visible=!0}},{key:"_unfocus",value:function _unfocus(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),"Text"!==this.type?this.patch({Content:{color:kg.colours.lightBlue50}}):this.tag("FocusedBar").visible=!1}},{key:"_handleEnter",value:function _handleEnter(){if(!this.item.path)return!0;if("/"===this.item.path)Cr.navigate("home");else{var t=this.item.static?this.item.path:"dynamic/".concat(encodeURIComponent(this.item.path));Cr.navigate(t,{viaMenuBar:!0})}return!0}},{key:"properlyPronounceA",value:function properlyPronounceA(t){return t.split(" ").map((function(t){return"A"===t?"A.":t})).toString().replace(/,/g," ")}},{key:"announce",get:function get(){return"Icon"===this.type?this.item.path:this.properlyPronounceA(this.item.label)}}],[{key:"_template",value:function _template(){return{flex:{alignItems:"center"},flexItem:{marginRight:60},Content:{text:_objectSpread2(_objectSpread2({},kg.TextStyles.navLink),{},{lineHeight:48,verticalAlign:"middle",text:""}),FocusedBar:{w:function w(t){return t},h:10,y:107,rect:!0,visible:!1,color:kg.colours.lightBlue500}}}}}]),MenuBarItem}(j.Component),_A=new aE(1),TA=_A.pipe(function mergeMap(t,r,i){return void 0===i&&(i=1/0),isFunction(r)?mergeMap((function(i,a){return map((function(t,u){return r(i,t,a,u)}))(innerFrom(t(i,a)))}),i):("number"==typeof r&&(i=r),operate((function(r,a){return function mergeInternals(t,r,i,a,u,l,c,d){var g=[],p=0,m=0,v=!1,b=function checkComplete(){!v||g.length||p||r.complete()},M=function outerNext(t){return p<a?S(t):g.push(t)},S=function doInnerSub(t){l&&r.next(t),p++;var d=!1;innerFrom(i(t,m++)).subscribe(createOperatorSubscriber(r,(function(t){null==u||u(t),l?M(t):r.next(t)}),(function(){d=!0}),void 0,(function(){if(d)try{p--;for(var t=function _loop_1(){var t=g.shift();c?executeSchedule(r,c,(function(){return doInnerSub(t)})):doInnerSub(t)};g.length&&p<a;)t();b()}catch(t){r.error(t)}})))};return t.subscribe(createOperatorSubscriber(r,M,(function(){v=!0,b()}))),function(){null==d||d()}}(r,a,t,i)})))}((function(){return from(Ni.getMenuBar())}))),bA=function updateMenuItems(){return _A.next()},MA=function(t){_inherits(MenuBar,t);var r=_createSuper(MenuBar);function MenuBar(){return _classCallCheck(this,MenuBar),r.apply(this,arguments)}return _createClass(MenuBar,[{key:"menuItems",set:function set(t){var r=this;this._menuItems=new Map;var i=t.map((function(t,i){return r._menuItems.set(t.path,i),{h:function h(t){return t},type:vA,content:t}}));this.tag("MainContainer").children=i}},{key:"sideMenuItems",set:function set(t){var r={h:function h(t){return t},type:vA,content:{icon:xI,path:"search",static:!0}};this.tag("SideContainer").children=t?[r,{h:function h(t){return t},type:vA,content:{icon:hI,path:"account",static:!0}}]:[r,{w:198,h:82,type:zI,item:{text:"Sign in",path:"sign-in-pin-and-pair",static:!0}}]}},{key:"_getFocused",value:function _getFocused(){return this.tag(this.focusItem).children[this.index]}},{key:"_init",value:function _init(){var t=this;this.index=0,this.focusItem="MainContainer",this.subscription=TA.subscribe((function(r){t.menuItems=r,t.sideMenuItems=yE(),t._refocus()})),this._animate=this._animate.bind(this),_n.getInstance().addEventListener(yA,this._animate)}},{key:"_handleLeft",value:function _handleLeft(){return this.index>0?(this.index-=1,!0):0!==this.index||"SideContainer"!==this.focusItem||(this.focusItem="MainContainer",this.index=this.tag("MainContainer").children.length-1,!0)}},{key:"_handleRight",value:function _handleRight(){var t=this.tag(this.focusItem).children.length;return this.index<t-1?(this.index+=1,!0):this.index!==t-1||"MainContainer"!==this.focusItem||(this.focusItem="SideContainer",this.index=0,!0)}},{key:"_handleDown",value:function _handleDown(){var t=Cr.getActiveHash();return t.includes("terms-and-conditions")||t.includes("privacy")||Cr.focusPage(),!0}},{key:"_handleUp",value:function _handleUp(){return!0}},{key:"_handleBack",value:function _handleBack(){return"home"===Cr.getActiveRoute()?Cr.navigate("exit-prompt"):0===Cr.getHistory().length?Cr.navigate("home"):Cr.back(),Cr.focusPage(),!0}},{key:"_animate",value:function _animate(t){var r=t?0:-MenuBar.height;this.setSmooth("y",r)}},{key:"_onActivated",value:function _onActivated(){var t=this;setTimeout((function(){t._setActiveItem(Cr.getActiveHash())}),1)}},{key:"_setActiveItem",value:function _setActiveItem(t){var r=cE(t.replace("dynamic/",""));return"home"===r&&(r="/"),this._menuItems&&this._menuItems.has(r)?(this.focusItem="MainContainer",this.index=this._menuItems.get(r),this._refocus(),!0):"search"===r?(this.focusItem="SideContainer",this.index=0,this._refocus(),!0):r.indexOf("account")>-1?(this.focusItem="SideContainer",this.index=1,this._refocus(),"account"===r&&this.fireAncestors("$announce",["Account page, scroll down to hear and edit your personal settings"]),!0):(this.focusItem="MainContainer",this.index=0,this._refocus(),!0)}},{key:"announceContext",get:function get(){return["Menu Bar","Item ".concat("MainContainer"===this.focusItem?this.index+1:this.index+1+this.tag("MainContainer").children.length," of ").concat(this.tag("MainContainer").children.length+this.tag("SideContainer").children.length)]}}],[{key:"_template",value:function _template(){return{y:0,w:1920,h:MenuBar.height,Background:{w:function w(t){return t},h:function h(t){return t},color:kg.colours.darkBlue500,rect:!0},Container:{w:function w(t){return t},h:function h(t){return t},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},Icon:{flexItem:{marginLeft:115},texture:j.Tools.getSvgTexture(II,151,60)},MainContainer:{h:function h(t){return t},flex:{direction:"row"}},SideContainer:{h:function h(t){return t},flex:{direction:"row",alignItems:"center"},flexItem:{marginRight:115}}}}}},{key:"height",get:function get(){return 170}}]),MenuBar}(j.Component),SA=function(t){_inherits(SortItem,t);var r=_createSuper(SortItem);function SortItem(){return _classCallCheck(this,SortItem),r.apply(this,arguments)}return _createClass(SortItem,[{key:"label",get:function get(){return this._label},set:function set(t){this._label=t,this.tag("Label").patch({text:{text:t}})}},{key:"_focus",value:function _focus(){this.patch({color:kg.colours.lightBlue500,Label:{text:{textColor:kg.colours.darkBlue500}}})}},{key:"_unfocus",value:function _unfocus(){this.patch({color:kg.colours.darkBlue500,Label:{text:{textColor:kg.colours.white500}}})}},{key:"_handleEnter",value:function _handleEnter(){_n.getInstance().emit("SORT::GRID",{label:this.label,order:this.order,orderBy:this.orderBy}),Cr.restoreFocus()}},{key:"_getFocused",value:function _getFocused(){return this}}],[{key:"_template",value:function _template(){return{w:436,h:90,rect:!0,color:kg.colours.darkBlue500,shader:{type:j.shaders.RoundedRectangle,radius:8},flex:{direction:"row",justifyContent:"center",alignItems:"center"},Label:{y:5,text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.ctaLabel),{},{textColor:kg.colours.white500,textAlign:"center",verticalAlign:"middle"})}}}}]),SortItem}(j.Component),EA=[{label:"Default",order:void 0,orderBy:void 0},{label:"A-Z",order:"asc",orderBy:"a-z"},{label:"Z-A",order:"desc",orderBy:"a-z"},{label:"Latest Added",order:"desc",orderBy:"date-added"},{label:"Oldest Added",order:"asc",orderBy:"date-added"},{label:"Latest Released",order:"desc",orderBy:"release-year"},{label:"Oldest Released",order:"asc",orderBy:"release-year"}],IA=function(t){_inherits(SortOverlay,t);var r=_createSuper(SortOverlay);function SortOverlay(){return _classCallCheck(this,SortOverlay),r.apply(this,arguments)}return _createClass(SortOverlay,[{key:"_init",value:function _init(){this._index=0,this.tag("List").children=EA.map((function(t){return{type:SA,label:t.label,order:t.order,orderBy:t.orderBy}})),this._setFocus=this._setFocus.bind(this),_n.getInstance().addEventListener("SORT::SET_FOCUS",this._setFocus)}},{key:"_handleUp",value:function _handleUp(){this._index>0&&(this._index-=1)}},{key:"_handleDown",value:function _handleDown(){this._index<this.tag("List").children.length-1&&(this._index+=1)}},{key:"_handleLeft",value:function _handleLeft(){}},{key:"_handleRight",value:function _handleRight(){}},{key:"_handleBack",value:function _handleBack(){Cr.restoreFocus()}},{key:"_getFocused",value:function _getFocused(){return this.tag("List").children[this._index]}},{key:"_focus",value:function _focus(){this.setSmooth("alpha",1)}},{key:"_unfocus",value:function _unfocus(){this.setSmooth("alpha",0)}},{key:"_setFocus",value:function _setFocus(t){var r=EA.find((function(r){var i=r.label;return t===i}));this._index=r?EA.indexOf(r):0}}],[{key:"_template",value:function _template(){return{Overlay:{x:0,y:0,w:1920,h:1080,rect:!0,color:kg.colours.darkBlue500,zIndex:999999,flex:{direction:"column",justifyContent:"flex-start",alignItems:"center"},Header:{flexItem:{marginTop:88,marginBottom:32},text:_objectSpread2(_objectSpread2({text:"Sort"},kg.TextStyles.h1),{},{lineHeight:96})},List:{flex:{direction:"column",justifyContent:"center",alignItems:"center"}}}}}}]),SortOverlay}(j.Component),DA=function resolveTextPage(t){return Ni.getPage(t).then((function(t){var r=t.entries,i=r.find((function(t){var r=t.template;return"H11"===r||"H10"===r})),a=r.find((function(t){return"ED3"===t.template}));return{heading:PE("",["title"],i)||PE("",["text"],i),subHeading:PE("",["customFields","subHeading"],i),body:PE("",["text"],a).replace(/^\s+|\s+$/g,"")}})).catch((function(t){}))},AA=function(t){_inherits(PopUp,t);var r,i=_createSuper(PopUp);function PopUp(){return _classCallCheck(this,PopUp),i.apply(this,arguments)}return _createClass(PopUp,[{key:"openPopUp",value:function openPopUp(t){this.showLoadingSpinner(!0),this.getData(t),this.isOpen=!0}},{key:"closePopUp",value:function closePopUp(){this.isOpen=!1,this.tag("Container").patch({Title:{text:{text:""}},Description:{text:{text:""}},ButtonContainer:{Button:{item:{text:"",instructions:""}}}}),Cr.focusPage()}},{key:"showLoadingSpinner",value:function showLoadingSpinner(t){this.tag("LoadingSpinner").patch({visible:t})}},{key:"getData",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r,i,a,u=this;return regeneratorRuntime.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,DA(t);case 2:r=l.sent,i=r.heading,a=r.body,this.showLoadingSpinner(!1),this.tag("Container").patch({Title:{text:{text:i}},Description:{text:{text:a}},ButtonContainer:{Button:{item:{text:"Back",instructions:[i,a],callback:function callback(){u.closePopUp()}}}}}),Cr.focusWidget("PopUp");case 8:case"end":return l.stop()}}),_callee,this)}))),function getData(t){return r.apply(this,arguments)})},{key:"_getFocused",value:function _getFocused(){return this.tag("Button")}},{key:"_handleUp",value:function _handleUp(){return!0}},{key:"_handleDown",value:function _handleDown(){return!0}},{key:"_handleLeft",value:function _handleLeft(){return!0}},{key:"_handleRight",value:function _handleRight(){return!0}},{key:"_handleBack",value:function _handleBack(){this.closePopUp()}},{key:"isOpen",set:function set(t){this.tag("PopUpContainer").patch({visible:t})}}],[{key:"_template",value:function _template(){return{w:PopUp.width,h:PopUp.height,PopUpContainer:{w:PopUp.width,h:PopUp.height,color:kg.colours.darkBlue500,rect:!0,visible:!1,Logo:{x:1634,y:35,flexItem:!1,texture:j.Tools.getSvgTexture(II,151,60)},Container:{h:PopUp.height,flex:{direction:"column",paddingLeft:115},Title:{flexItem:{marginTop:198},text:_objectSpread2({text:"",lineHeight:96},kg.TextStyles.h1)},Description:{flexItem:{marginTop:128},text:_objectSpread2({text:"",lineHeight:96},kg.TextStyles.featuredCopy)},ButtonContainer:{h:function h(t){return t},flex:{alignItems:"flex-end"},Button:{flexItem:{marginBottom:100},type:sI}}},LoadingSpinner:{w:PopUp.width,h:PopUp.height,color:kg.colours.darkBlue500,rect:!0,visible:!1,Spinner:{type:RI,x:893,y:473}}}}}},{key:"width",get:function get(){return 1920}},{key:"height",get:function get(){return 1080}}]),PopUp}(j.Component),CA=function(t){_inherits(SortButton,t);var r=_createSuper(SortButton);function SortButton(){return _classCallCheck(this,SortButton),r.apply(this,arguments)}return _createClass(SortButton,[{key:"_init",value:function _init(){this.label="Sort"}},{key:"_handleEnter",value:function _handleEnter(){_n.getInstance().emit("SORT::SET_FOCUS",this.label),Cr.focusWidget("SortOverlay")}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(SortButton.prototype),"_focus",this).call(this),_n.getInstance().emit(yA,!1),this.tag("Icon").patch({color:kg.colours.darkBlue500})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(SortButton.prototype),"_unfocus",this).call(this),this.tag("Icon").patch({color:kg.colours.white500})}},{key:"announce",get:function get(){return"Sort button, current option: ".concat("Sort"===this.label?"Default":this.label)}}],[{key:"_template",value:function _template(){return _objectSpread2(_objectSpread2({},sI._template()),{},{Icon:{x:sI.width-48-20,y:(sI.height-40)/2,color:kg.colours.white500,texture:j.Tools.getSvgTexture(NI,40,40)}})}}]),SortButton}(sI),NA=function(t){_inherits(Grid,t);var r,i,a=_createSuper(Grid);function Grid(){return _classCallCheck(this,Grid),a.apply(this,arguments)}return _createClass(Grid,[{key:"itemComponent",get:function get(){return aA}},{key:"_init",value:function _init(){this._maxPages=Math.ceil(this.size/this.paging.size),this._order=this.paging.order,this._orderBy=this.paging.orderBy,this._path=this.paging.next&&this.paging.next.split("?")[0],this._hasSortButton=!!this.pageId,this._pagesLoaded=!this.paging.next,this._pageSize=this.paging.size,this._pageIndex=this.paging.page,this._sortGrid=this._sortGrid.bind(this),this._setNextPage=this._setNextPage.bind(this),this.onBackToTop=this.onBackToTop.bind(this),this._hasSortButton&&(this.tag("SortButton").patch({visible:!0}),this._focusItem="SortButton")}},{key:"_active",value:function _active(){_n.getInstance().addEventListener("SORT::GRID",this._sortGrid),_n.getInstance().addEventListener("BACK_TO_TOP",this.onBackToTop)}},{key:"_inactive",value:function _inactive(){_n.getInstance().removeEventListener("SORT::GRID",this._sortGrid),_n.getInstance().removeEventListener("BACK_TO_TOP",this.onBackToTop)}},{key:"_getNextPage",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t;return regeneratorRuntime.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ni.getNextPage(this._path,this._pageIndex,this._pageSize,this._order,this._orderBy);case 3:return t=r.sent,this._pagesLoaded=!t.paging.next,r.abrupt("return",OD({customFields:{assetTitlePosition:"below"},list:t}));case 8:throw r.prev=8,r.t0=r.catch(0),new Error(r.t0);case 11:case"end":return r.stop()}}),_callee,this,[[0,8]])}))),function _getNextPage(){return i.apply(this,arguments)})},{key:"_setNextPage",value:function _setNextPage(t){var r=this.tag("Items").children[this.numRows-1].finalY+aA.height+aA.offset,i=this._createItems(t,r);this.tag("Items").add(i),this._requestInFlight=!1}},{key:"_sortGrid",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(t){var r,i,a,u,l;return regeneratorRuntime.wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:return r=t.label,i=t.order,a=t.orderBy,c.prev=1,Mg.loadingSpinnerVisible$.next(!0),this.tag("SortButton").label=r,this._order=i,this._orderBy=a,c.next=8,Ni.getLists(this.pageId,1,this._pageSize,i,a);case 8:u=(u=c.sent)[0],this._pagesLoaded=!u.paging.next,this._pageIndex=1,this._maxPages=Math.ceil(u.size/this._pageSize),l=OD({customFields:{assetTitlePosition:"below"},list:u}),_set(_getPrototypeOf(Grid.prototype),"items",l,this,!0),Mg.loadingSpinnerVisible$.next(!1),c.next=22;break;case 18:throw c.prev=18,c.t0=c.catch(1),Mg.loadingSpinnerVisible$.next(!1),new Error(c.t0);case 22:case"end":return c.stop()}}),_callee2,this,[[1,18]])}))),function _sortGrid(t){return r.apply(this,arguments)})},{key:"_paginateGrid",value:function _paginateGrid(){var t=this;this._pageIndex+=1,this._requestInFlight=!0,this._getNextPage().then(this._setNextPage).catch((function(r){t._requestInFlight=!1}))}},{key:"_getFocused",value:function _getFocused(){return this._hasSortButton&&"SortButton"===this._focusItem?this.tag("SortButton"):this.activeItem}},{key:"_focus",value:function _focus(){return!0}},{key:"_handleUp",value:function _handleUp(){return(!this._hasSortButton||"SortButton"!==this._focusItem)&&(0===this._indexY?(this.tag("Grid").setSmooth("y",0),!!this._hasSortButton&&(this.tag("SortButton").setSmooth("alpha",1),this._focusItem="SortButton",!0)):this._indexY>=this.numRows-2?(this._indexY-=1,!0):(this._indexY-=1,this._animateToSelected(),!0))}},{key:"_handleDown",value:function _handleDown(){return"SortButton"===this._focusItem?(this.fadeOutSortButton(),!0):this._indexY===this.numRows-1?!!(this.numRows<4&&this._pagesLoaded)||!this._pagesLoaded:(this._pageIndex<=this._maxPages-1&&!this._requestInFlight&&this._paginateGrid(),this._indexY===this.numRows-2&&this._indexX>this.finalRowLength-1&&(this._indexX=this.finalRowLength-1),this._indexY+=1,this._indexY<this.numRows-2&&this._animateToSelected(),!0)}},{key:"_handleRight",value:function _handleRight(){return this._indexX!==this.numColumns-1&&(!(this._indexY===this.numRows-1&&this._indexX+1>this.finalRowLength-1)&&(this._indexX+=1,!0))}},{key:"_handleLeft",value:function _handleLeft(){return!(this._indexX<1)&&(this._indexX-=1,!0)}},{key:"_handleBack",value:function _handleBack(){return"SortButton"!==this._focusItem&&(Cr.back(),!0)}},{key:"onBackToTop",value:function onBackToTop(){this._indexY=0,this._indexX=0,this.tag("Items").setSmooth("y",0),this.tag("Grid").setSmooth("y",0),this._hasSortButton&&(this.tag("SortButton").setSmooth("alpha",1),this._focusItem="SortButton")}},{key:"fadeOutSortButton",value:function fadeOutSortButton(){this._focusItem="Grid",this._hasSortButton&&this.tag("SortButton").setSmooth("alpha",0),this.tag("Grid").setSmooth("y",-CA.height-48)}}],[{key:"width",get:function get(){return 1920}},{key:"height",get:function get(){return 1080}},{key:"_template",value:function _template(){return{x:-115,w:Grid.width,h:Grid.height,clipping:!0,boundsMargin:[],flex:{direction:"column",paddingTop:48},SortButton:{visible:!1,flexItem:{marginBottom:48,marginRight:115,alignSelf:"flex-end"},type:CA},Grid:{flex:{paddingTop:8},Items:{x:115}}}}}]),Grid}(BI),xA=function resolveEpisodes(t,r){return Ni.getPage(t,r).then(function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r,i;return regeneratorRuntime.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!yE()){a.next=6;break}return a.next=3,Ni.getWatched();case 3:r=a.sent,PE([],["entries",0,"item","episodes","items"],t).forEach((function(t){var i=r[t.id];i&&(t.progress=i.isFullyWatched?t.duration:i.position)}));case 6:return i=PE("",["entries",0,"item","episodes","items"],t),a.abrupt("return",OD({customFields:{assetTitlePosition:"overlay"},list:{items:i,selectedSeason:PE("",["entries",0,"item","seasonNumber"],t)},template:"T2"}));case 8:case"end":return a.stop()}}),_callee)})));return function(r){return t.apply(this,arguments)}}()).catch((function(t){}))},kA=function(t){_inherits(CTA,t);var r=_createSuper(CTA);function CTA(){return _classCallCheck(this,CTA),r.apply(this,arguments)}return _createClass(CTA,[{key:"item",set:function set(t){this._item=t;var r=this._item,i=r.contextualTitle,a=r.selected,u=void 0!==a&&a;this.selected=u,this.patch({text:{text:i.toUpperCase()}})}},{key:"selected",get:function get(){return this._selected||!1},set:function set(t){this.selected!==t&&(this._selected=t)}},{key:"_active",value:function _active(){var t=this;this.selected&&setTimeout((function(){t.cparent.setItemsPosition()}),0)}},{key:"_focus",value:function _focus(){var t=this;return this.text.textColor=kg.colours.white500,this.tag("FocusedBar").visible=!0,!this._item.path||(this.selected||(this.waitToLoad=setTimeout((function(){_n.getInstance().emit("SEASON:SELECTED",t._item.path),t.cparent.resetSelectedItem(t)}),300),this.selected=!0),!0)}},{key:"_unfocus",value:function _unfocus(){this.text.textColor=kg.colours.white500Transparent,this.tag("FocusedBar").visible=!1,clearTimeout(this.waitToLoad)}},{key:"announce",get:function get(){return this.text.text}}],[{key:"_template",value:function _template(){return{flexItem:{marginRight:48},text:_objectSpread2(_objectSpread2({},kg.TextStyles.h3),{},{text:"",textColor:kg.colours.white500Transparent}),FocusedBar:{w:function w(t){return t},h:6,y:51,rect:!0,visible:!1,color:kg.colours.lightBlue500}}}},{key:"width",get:function get(){return 141}},{key:"height",get:function get(){return 61}},{key:"offset",get:function get(){return 50}}]),CTA}(j.Component),wA=function(t){_inherits(SeasonSelectorRail,t);var r=_createSuper(SeasonSelectorRail);function SeasonSelectorRail(){return _classCallCheck(this,SeasonSelectorRail),r.apply(this,arguments)}return _createClass(SeasonSelectorRail,[{key:"itemComponent",get:function get(){return kA}},{key:"activeItem",get:function get(){return this.tag("Items").children[this._index]}},{key:"items",set:function set(t){var r=_slicedToArray(t,2),i=r[0],a=r[1];this._index=a||0,this._rendered||(this._rendered=!0,this.tag("Items").patch({children:i.map(this.createItem)})),this.activeItem.selected=!0,this.setItemsPosition()}},{key:"createItem",value:function createItem(t,r){return{type:kA,index:r,item:t}}},{key:"_init",value:function _init(){this._rendered=!1}},{key:"_getFocused",value:function _getFocused(){return this.activeItem}},{key:"_focus",value:function _focus(){this.setItemsPosition()}},{key:"_handleRight",value:function _handleRight(){return this._index===this.tag("Items").children.length-1?(this.fireAncestors("$announce",["You're on the last item of this rail."]),!0):(this._index+=1,this.setItemsPosition(),!0)}},{key:"_handleLeft",value:function _handleLeft(){return this._index>0?(this._index-=1,this.setItemsPosition(),!0):(this.fireAncestors("$announce",["You're on the first item of this rail."]),!1)}},{key:"resetSelectedItem",value:function resetSelectedItem(t){this.tag("Items").children.forEach((function(r){r!==t&&(r.selected=!1)}))}},{key:"setItemsPosition",value:function setItemsPosition(){var t=this.tag("Items").children.length,r=this.tag("Items").children[t-1].finalX+this.tag("Items").children[t-1].finalW,i=r<1920?0:r-1805+50,a=this.activeItem.finalX+115<i?-this.tag("Items").children[this._index].finalX:-i;this.tag("Items").setSmooth("x",a)}},{key:"announceContext",get:function get(){var t,r,i=[];return(null===(t=this.tag("Items"))||void 0===t||null===(r=t.children)||void 0===r?void 0:r.length)>0&&i.push("Season selector rail,","Item ".concat(this._index+1," of ").concat(this.tag("Items").children.length)),i}}],[{key:"_template",value:function _template(){return{h:61,flexItem:{marginTop:72},Items:{flex:{direction:"row"},children:[]}}}},{key:"height",get:function get(){return kA.height+72}}]),SeasonSelectorRail}(j.Component),OA=function(t){_inherits(Card,t);var r=_createSuper(Card);function Card(){return _classCallCheck(this,Card),r.apply(this,arguments)}return _createClass(Card,[{key:"item",get:function get(){return this._item},set:function set(t){_set(_getPrototypeOf(Card.prototype),"item",t,this,!0);var r=this._item,i=r.assetTitlePosition,a=r.imageSrc,u=r.text,l=r.showTitle,c=r.title,d=r.seasonNumber,g=r.episodeNumber,p=r.type,m=r.progressPercent;r.isViewAll||$E({ref:this,width:150,height:57}),a&&this.tag("Image").patch({texture:Img(a).cover(Card.width,Card.height)});var v=d?"".concat(l," S").concat(d," E").concat(g):c;if("below"===i){var b=v&&("episode"===p||"link")&&u!==v?"".concat(v,"\n").concat(u):u;this.tag("BelowText").patch({visible:!0,text:{text:b}})}if("overlay"===i){var M=v&&("episode"===p||"link")&&v!==u?"".concat(v,"\n").concat(u):u;this.patch({Overlay:{visible:!0},OverlayText:{visible:!0,text:{text:M}}})}m&&this.patch({ProgressBar:{visible:!0,Background:{Background:{w:Card.width*m/100}}}})}}],[{key:"_template",value:function _template(){return{Image:{y:0,x:0,w:Card.width,h:Card.height,clipping:!0,zIndex:1},Borders:KE(Card.width,Card.height),Tag:{visible:!1,x:0,y:0,type:lI,zIndex:3},BelowText:{visible:!1,y:Card.height+8,text:_objectSpread2({text:"",wordWrapWidth:Card.width,maxLines:2,lineHeight:33},kg.TextStyles.smallCopy)},Overlay:{visible:!1,x:0,y:0,zIndex:2,w:Card.width,h:Card.height,rect:!0,colorTop:kg.colours.cardOverlayTop,colorBottom:kg.colours.cardOverlayBottom},OverlayText:{visible:!1,x:20,y:Card.height-20,zIndex:3,mountY:1,text:_objectSpread2({text:"",wordWrapWidth:Card.width-40,maxLines:3,lineHeight:42,verticalAlign:"middle"},kg.TextStyles.bodyCopy)},ProgressBar:{visible:!1,y:Card.height-6,zIndex:3,Background:{color:kg.colours.lightBlue500Transparent,rect:!0,w:Card.width,h:6,Background:{color:kg.colours.red500,rect:!0,h:6}}},Background:{visible:!1,color:kg.colours.mutedGrey500,rect:!0,w:Card.width,h:Card.height},ViewAllText:{x:150,y:115,zIndex:3,flex:{direction:"column",justifyContent:"center",alignItems:"center"},visible:!1,text:_objectSpread2({text:"View all",textAlign:"center",verticalAlign:"middle"},kg.TextStyles.h1)}}}},{key:"width",get:function get(){return 550}},{key:"height",get:function get(){return 313}},{key:"offset",get:function get(){return 20}}]),Card}(cI),LA=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",3),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return OA}},{key:"tagline",set:function set(t){t&&(this.patch({Tagline:{visible:!0,text:{text:t}}}),this.tag("Items").patch({y:134}))}}],[{key:"_template",value:function _template(){return{Heading:{y:0,x:0,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.h2)},Tagline:{visible:!1,y:64,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.featuredCopy)},Items:{y:96}}}},{key:"height",get:function get(){return OA.height+144+72}}]),Rail}(fI),RA=function(t){_inherits(Card,t);var r=_createSuper(Card);function Card(){return _classCallCheck(this,Card),r.apply(this,arguments)}return _createClass(Card,[{key:"_focus",value:function _focus(){_get(_getPrototypeOf(Card.prototype),"_focus",this).call(this),_n.getInstance().emit("EPISODE:FOCUS",this._item)}}]),Card}(OA),jA=jE(["parent","parent","refocusItemParameters","focusType"],"episode"),PA=function(t){_inherits(Rail,t);var r,i,a=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=a.call.apply(a,[this].concat(i))),"_maxItems",3),t}return _createClass(Rail,[{key:"activeItem",get:function get(){return"SeasonSelectorRail"===this._focusedItem?this.tag("SeasonSelectorRail").activeItem:(this.fireAncestors("$announce",["Item ".concat(this._index+1," of ").concat(this.tag("Items").children.length,"."),"".concat(this.tag("Title").text.text,"."),"".concat(this._TagInfo,"."),"".concat(this.tag("AdvisoryText").text.text,"."),"".concat(this.tag("Description").text.text)],{append:!0}),this.tag("EpisodeRail").tag("Items").children[this._index])}},{key:"itemComponent",get:function get(){return RA}},{key:"items",set:function set(t){var r=_slicedToArray(t,1)[0];this._item=r;var i=r.episodes,a=r.seasons,u=r.selectedSeason,l=OD({customFields:{assetTitlePosition:"overlay"},list:{items:i,selectedSeason:u},template:"T2"});_set(_getPrototypeOf(Rail.prototype),"items",l,this,!0),this.seasons=a,this.episodes=i,this.episodeItems=l}},{key:"item",get:function get(){return this._item}},{key:"_init",value:function _init(){this.historyState=Cr.getHistoryState()||{},this.backFromPinPage=this.historyState.backToProgrammeDetailPage,this.isExtraContent=this.historyState.isExtraContent,this._focusedItem=this.backFromPinPage||this.isExtraContent?"EpisodeRail":"SeasonSelectorRail",this.getEpisodes=this.getEpisodes.bind(this),this.handleFocusedEpisodes=this.handleFocusedEpisodes.bind(this),this.focusSeasonRail=this.focusSeasonRail.bind(this)}},{key:"_attach",value:function _attach(){_n.getInstance().addEventListener("SEASON:SELECTED",this.getEpisodes),_n.getInstance().addEventListener("EPISODE:FOCUS",this.handleFocusedEpisodes),_n.getInstance().addEventListener("SEASON_RAIL:FOCUS",this.focusSeasonRail);var t=this.item,r=t.seasons,i=t.selectedSeason,a=t.selectedEpisode,u=t.isSeasonPage;if(r.length&&!jA(this))if(u||1===r.length)this.focusOnSeasonEpisode(i,this.backFromPinPage?this.historyState.focusedItemIndex+1:a);else{var l=r.findIndex((function(t){return t.seasonNumber===i}));l=-1===l?0:l,this.tag("SeasonSelectorRail").items=[r,l];var c=r[l];this.getEpisodes(c.path,a)}}},{key:"_detach",value:function _detach(){_n.getInstance().removeEventListener("SEASON:SELECTED",this.getEpisodes),_n.getInstance().removeEventListener("EPISODE:FOCUS",this.handleFocusedEpisodes),_n.getInstance().removeEventListener("SEASON_RAIL:FOCUS",this.focusSeasonRail)}},{key:"_handleUp",value:function _handleUp(){return"SeasonSelectorRail"!==this._focusedItem&&(this._focusedItem="SeasonSelectorRail",!0)}},{key:"_handleDown",value:function _handleDown(){return"EpisodeRail"!==this._focusedItem&&(this._focusedItem="EpisodeRail",!0)}},{key:"_handleRight",value:function _handleRight(){return"SeasonSelectorRail"===this._focusedItem?this.tag("SeasonSelectorRail")._handleRight():_get(_getPrototypeOf(Rail.prototype),"_handleRight",this).call(this)}},{key:"_handleLeft",value:function _handleLeft(){return"SeasonSelectorRail"===this._focusedItem?this.tag("SeasonSelectorRail")._handleLeft():_get(_getPrototypeOf(Rail.prototype),"_handleLeft",this).call(this)}},{key:"setItemsPosition",value:function setItemsPosition(){var t=this.tag("Items").children.length-this._maxItems;t<0||(this._index<t?this.tag("Items").x=-this.tag("Items").children[this._index].finalX:this.tag("Items").x=-this.tag("Items").children[t].finalX,this.tag("SeasonSelectorRail").setItemsPosition())}},{key:"getEpisodes",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r,i,a,u=arguments;return regeneratorRuntime.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:0,l.next=3,xA(t);case 3:if(i=l.sent){l.next=6;break}return l.abrupt("return");case 6:-1===(a=i.findIndex((function(t){return t.episodeNumber===r})))&&(a=0),this.tag("Items").patch({x:0}),this._index=a,this.tag("EpisodeRail").items=i,_set(_getPrototypeOf(Rail.prototype),"items",i,this,!0),this.episodes=i,this.handleFocusedEpisodes(i[a]),this.setItemsPosition();case 15:case"end":return l.stop()}}),_callee,this)}))),function getEpisodes(t){return i.apply(this,arguments)})},{key:"focusSeasonRail",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(t){var r,i,a,u,l,c,d,g,p,m,v;return regeneratorRuntime.wrap((function _callee2$(b){for(;;)switch(b.prev=b.next){case 0:if(i=t.backFromPlayer,a=t.focusedItemIndex,u=t.focusNext,l=t.isExtraContent,c=t.secondaryFocus,d=this.seasons,!l){b.next=5;break}return this._focusedItem="EpisodeRail",b.abrupt("return");case 5:if(d.length){b.next=7;break}return b.abrupt("return");case 7:if(this._focusedItem="EpisodeRail",g=d.find((function(t){return t.id===c})),p=d.indexOf(g),this.tag("SeasonSelectorRail").items=[d,p],!i||(null===(r=this.episodes[0])||void 0===r?void 0:r.seasonId)===c){b.next=16;break}return b.next=14,this.getEpisodes(g.path,a);case 14:(m=this.tag("SeasonSelectorRail").tag("Items").children[p])&&this.tag("SeasonSelectorRail").resetSelectedItem(m);case 16:v=u&&g.episodeCount>a?a+1:a,this.focusOnSeasonEpisode(null==g?void 0:g.seasonNumber,v);case 18:case"end":return b.stop()}}),_callee2,this)}))),function focusSeasonRail(t){return r.apply(this,arguments)})},{key:"focusOnSeasonEpisode",value:function focusOnSeasonEpisode(t,r){var i=this.seasons,a=this.episodes,u=this.episodeItems,l=i.findIndex((function(r){return r.seasonNumber===t}));i[l=-1===l?0:l].selected=!0,this.tag("SeasonSelectorRail").items=[i,l];var c=u;u[0].seasonNumber!==a[0].seasonNumber&&(c=OD({customFields:{assetTitlePosition:"overlay"},list:{items:a,selectedSeason:t},template:"T2"}));var d=a.findIndex((function(t){return t.episodeNumber===r}));d=-1===d?0:d,this.handleFocusedEpisodes(c[d]),this._index=d,this.tag("EpisodeRail").items=c,this.setItemsPosition()}},{key:"handleFocusedEpisodes",value:function handleFocusedEpisodes(t){var r=t.advisoryText,i=t.text,a=t.durationMinutes,u=t.classification,l=t.shortDescription,c=t.episodeNumber,d=t.CCFlag,g=t.HDFlag,p=t.UHDFlag,m="".concat(a," mins"),v=[m,u,d];p?v.push(p):g&&v.push(g);var b=v.filter((function(t){return t})).join(" | ");this._TagInfo=["Duration ".concat(m,"."),"Rating ".concat(u,"."),d?"Closed Captions Available.":"",p||g||""],this.tag("Info").patch({Title:{text:{text:"".concat(c,". ").concat(null==i?void 0:i.toUpperCase())}},TagInfo:{text:{text:b}},AdvisoryText:{text:{text:r}},Description:{text:{text:l}}})}},{key:"announceContext",get:function get(){return[]}}],[{key:"_template",value:function _template(){return{flex:{direction:"column"},SeasonSelectorRail:{type:wA},EpisodeRail:{Items:{y:48},Info:{y:422,w:1805,flex:{direction:"column"},Title:{text:_objectSpread2({text:""},kg.TextStyles.h3)},TagInfo:{text:_objectSpread2({text:"",textColor:kg.colours.lightGrey500},kg.TextStyles.bodyCopy)},AdvisoryText:{w:1405,text:_objectSpread2(_objectSpread2({text:"",textColor:kg.colours.lightGrey500},kg.TextStyles.smallCopy),{},{maxLines:2,overflow:"ellipsis"})},Description:{w:1405,flexItem:{marginTop:16},text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.bodyCopy),{},{lineHeight:42,maxLines:3,overflow:"ellipsis"})}}}}}},{key:"height",get:function get(){return wA.height+48+RA.height+260+72}}]),Rail}(fI),FA=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",3),t}return _createClass(Rail,[{key:"items",set:function set(t){_set(_getPrototypeOf(Rail.prototype),"items",t,this,!0),this.tag("Heading").patch({text:{text:"Trailers"}}),this._index=0,this.tag("Items").x=0}},{key:"itemComponent",get:function get(){return OA}}],[{key:"height",get:function get(){return OA.height+64+32+72}}]),Rail}(fI),BA=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",3),t}return _createClass(Rail,[{key:"items",set:function set(t){var r=OD({customFields:{assetTitlePosition:"none"},list:{items:t},template:"T2"});_set(_getPrototypeOf(Rail.prototype),"items",r,this,!0),this._index=0,this.tag("Items").x=0}},{key:"itemComponent",get:function get(){return OA}}],[{key:"height",get:function get(){return OA.height+64+32+72}}]),Rail}(fI),UA=function(t){_inherits(Poster,t);var r=_createSuper(Poster);function Poster(){return _classCallCheck(this,Poster),r.apply(this,arguments)}return _createClass(Poster,null,[{key:"width",get:function get(){return 265}},{key:"height",get:function get(){return 396}},{key:"offset",get:function get(){return 20}}]),Poster}(PI),zA=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",6),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return UA}}],[{key:"height",get:function get(){return UA.height+144+72}}]),Rail}(fI),YA=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",6),t}return _createClass(Rail,[{key:"items",set:function set(t){_set(_getPrototypeOf(Rail.prototype),"items",t,this,!0),this._index=0,this.tag("Items").x=0}},{key:"heading",set:function set(t){t&&this.tag("Heading").patch({text:{text:t}})}},{key:"itemComponent",get:function get(){return UA}}],[{key:"height",get:function get(){return UA.height+64+32+72}}]),Rail}(fI),GA=function(t){_inherits(Card,t);var r=_createSuper(Card);function Card(){return _classCallCheck(this,Card),r.apply(this,arguments)}return _createClass(Card,[{key:"item",set:function set(t){var r=t.name,i=t.initials,a=t.character;this._item=t,this.patch({Profile:{Container:{Initials:{text:{text:i}}}},Name:{text:{text:r}},Character:{text:{text:a}}})}}],[{key:"_template",value:function _template(){return _objectSpread2(_objectSpread2({},QI._template()),{},{Character:{w:Card.width,text:_objectSpread2(_objectSpread2({},kg.TextStyles.smallCopy),{},{text:"",lineHeight:0,textAlign:"center"})}})}},{key:"width",get:function get(){return 265}},{key:"height",get:function get(){return 365}},{key:"offset",get:function get(){return 20}}]),Card}(QI),HA=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",6),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return GA}}],[{key:"height",get:function get(){return GA.height+64+32+72}}]),Rail}(fI),QA=function(t){_inherits(ButtonRow,t);var r=_createSuper(ButtonRow);function ButtonRow(){return _classCallCheck(this,ButtonRow),r.apply(this,arguments)}return _createClass(ButtonRow,[{key:"yValue",set:function set(t){t&&this.tag("Items").patch({y:t})}},{key:"items",set:function set(t){var r=this;this._index=void 0;var i=t.map((function(t,i){var a=t.customClass,u=t.icon,l=void 0===u?{}:u,c=t.itemPath,d=void 0===c?"":c,g=t.itemInfo,p=t.disabled;return void 0!==r._index||p||(r._index=i),{type:a||sI,item:g||t,disabled:p,index:i,icon:l,itemPath:d,flexItem:{marginRight:20}}}));this.tag("Items").children=i}},{key:"_getFocused",value:function _getFocused(){return this.tag("Items").children[this._index]}},{key:"_handleRight",value:function _handleRight(){var t=this,r=this.tag("Items").children;if(this._index===r.length-1)return!0;var i=r.findIndex((function(r,i){return!r.disabled&&i>t._index}));return i>=0&&(this._index=i,!0)}},{key:"_handleLeft",value:function _handleLeft(){if(0===this._index)return!0;var t=this.tag("Items").children.slice(0,this._index).findLastIndex((function(t){return!t.disabled}));return!(t>=0)||(this._index=t,!0)}}],[{key:"_template",value:function _template(){return{Items:{flex:{direction:"row",alignItems:"center"},y:72}}}},{key:"height",get:function get(){return sI.height+72}}]),ButtonRow}(j.Component),VA=function(t){_inherits(WatchlistButton,t);var r=_createSuper(WatchlistButton);function WatchlistButton(){return _classCallCheck(this,WatchlistButton),r.apply(this,arguments)}return _createClass(WatchlistButton,[{key:"_init",value:function _init(){var t=nI();this.updateButton(t.includes(this.item.id))}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(WatchlistButton.prototype),"_focus",this).call(this),this.patch({Container:{Image:{color:kg.colours.darkBlue500},Label:{text:{textColor:kg.colours.darkBlue500}}}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(WatchlistButton.prototype),"_unfocus",this).call(this),this.patch({Container:{Image:{color:kg.colours.lightBlue50},Label:{text:{textColor:kg.colours.lightBlue50}}}})}},{key:"updateButton",value:function updateButton(t){var r=this.item.title,i=t?DI:gI,a=t?"Remove from Watchlist":"Watchlist";this.fireAncestors("$announce",["".concat(r,t?" added to Watchlist, Remove from Watchlist button":" removed from Watchlist, Watchlist button")]),this.patch({Container:{Image:{texture:j.Tools.getSvgTexture(i,42,42)},Label:{text:{text:a}}}})}},{key:"_handleEnter",value:function _handleEnter(){var t=this,r=this.item,i=r.id,a=r.customId,u=r.itemPath;yE()?iI(i)?(!function analyticsSendRemoveFromWatchlistAction(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){var r=_objectSpread2({customId:t},getThinkAnalyticsData(!1));Tn.sendRemoveFromWatchlistAction(r)}}(a),function removeWatchlistItem(t){return Ni.removeWatchlist(t).then((function(){return eI=eI.filter((function(r){return r!==t})),""})).catch((function(t){}))}(i).then((function(){return t.updateButton(!1)})).catch((function(t){}))):(aI(a),tI(i).then((function(){return t.updateButton(!0)})).catch((function(t){}))):Cr.navigate("sign-in-pin-and-pair",{redirectUrl:u,payload:{addToWatchlist:!0,id:i,customId:a}})}},{key:"announce",get:function get(){return"".concat(this.tag("Label").text.text,". button")}}],[{key:"_template",value:function _template(){return{w:WatchlistButton.width,h:WatchlistButton.height,Borders:{w:WatchlistButton.width,h:WatchlistButton.height,rect:!0,color:"none",shader:{type:j.shaders.RoundedRectangle,radius:45,stroke:4,strokeColor:kg.colours.lightBlue50}},Container:{w:WatchlistButton.width,h:WatchlistButton.height,flex:{direction:"row",justifyContent:"center",alignItems:"center"},Image:{w:42,h:42,flexItem:{marginRight:19},texture:j.Tools.getSvgTexture(gI,42,42),color:kg.colours.lightBlue50},Label:{y:3,text:_objectSpread2({text:"Watchlist",textAlign:"center",verticalAlign:"center",textColor:kg.colours.lightBlue50},kg.TextStyles.ctaLabel)}}}}},{key:"width",get:function get(){return 436}},{key:"height",get:function get(){return 86}},{key:"offset",get:function get(){return 20}}]),WatchlistButton}(sI),WA=function(t){_inherits(Hero,t);var r=_createSuper(Hero);function Hero(){return _classCallCheck(this,Hero),r.apply(this,arguments)}return _createClass(Hero,[{key:"_init",value:function _init(){this._index=0}},{key:"items",set:function set(t){var r=_slicedToArray(t,1)[0];this._item=r;var i=this._item,a=i.advisoryText,u=i.currentAsset,l=u.path,c=u.text,d=i.brandSrc,g=i.imageSrc,p=i.description,m=i.id,v=i.path,b=i.metaText,M=i.title,S=i.trailerPath,E=i.customId,I=[];yE()?I=[{path:dE(l),text:c,static:!0},{id:m,customClass:VA,customId:E,itemPath:v,title:M}]:I=[{path:"sign-in-pin-and-pair",text:"Subscribe",static:!0,redirectURL:v},{id:m,customClass:VA,itemPath:v,customId:E}];S&&I.splice(1,0,{path:S,text:"Trailer",static:!0}),d?this.tag("Brand").patch({texture:Img(d).cover(420,140)}):this.tag("Brand").patch({w:835,text:_objectSpread2({text:M},kg.TextStyles.h1)}),this.patch({Image:{texture:Img(g).exact(1920,1080)},Container:{Text:{visible:!!b,text:b},AdvisoryText:{text:a},Description:{text:{text:p}},ButtonRow:{items:I}}})}},{key:"_getFocused",value:function _getFocused(){return this.tag("ButtonRow")}},{key:"announce",get:function get(){return"\n      ".concat(this._item.title,",\n      ").concat(this._item.metaText.replace(/MINS/g,"MINUTES").replace(/\|/g,""),",\n      ").concat(this._item.description,"\n    ")}}],[{key:"_template",value:function _template(){return{x:-115,w:Hero.width,h:Hero.height,clipping:!0,Image:{y:0,x:0,w:1920,h:1080},OverlayBottom:{x:0,y:Hero.height/2,zIndex:1,w:Hero.width,h:Hero.height/2,rect:!0,colorTop:kg.colours.featuredHeaderOverlay,colorBottom:kg.colours.darkBlue500},OverlayLeft:{x:0,y:0,zIndex:1,w:Hero.width/2,h:Hero.height,rect:!0,colorLeft:kg.colours.darkBlue500,colorRight:kg.colours.featuredHeaderOverlay},Container:{x:115,h:Hero.height,zIndex:2,flex:{direction:"column",justifyContent:"flex-end"},Brand:{w:420,h:140},Text:{flexItem:{marginTop:72},text:_objectSpread2({text:""},kg.TextStyles.h3)},AdvisoryText:{w:835,text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.smallCopy),{},{maxLines:2,overflow:"ellipsis"})},Description:{w:835,flexItem:{marginTop:32},text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.bodyCopy),{},{lineHeight:42,maxLines:4,overflow:"ellipsis"})},ButtonRow:{flexItem:{marginTop:-30,marginBottom:72},h:QA.height,type:QA}}}}},{key:"width",get:function get(){return 1920}},{key:"height",get:function get(){return 880}}]),Hero}(j.Component),$A=function(t){_inherits(Hero,t);var r=_createSuper(Hero);function Hero(){return _classCallCheck(this,Hero),r.apply(this,arguments)}return _createClass(Hero,[{key:"item",get:function get(){return this._item||{}},set:function set(t){var r=this;this._item=t;var i=this._item.imageSrc;this.tag("Image")._hasEventListeners||(this.tag("Image").on("txError",(function(){r.tag("Placeholder")?r.tag("Placeholder").alpha=1:r.patch({Image:{Placeholder:{w:function w(t){return t},h:function h(t){return t},rect:!0,color:kg.colours.mutedBlue500,flex:{alignItems:"center",justifyContent:"center"},Img:{texture:j.Tools.getSvgTexture(VE,300,113)}}}})})),this.tag("Image").on("txLoaded",(function(){r.tag("Placeholder")&&(r.tag("Placeholder").alpha=0)}))),this.tag("Image").texture="",this.patch({Image:{texture:Img(i).cover(Hero.width,Hero.height-72)}})}},{key:"_handleEnter",value:function _handleEnter(){return!this.item.path||Cr.navigate("dynamic/".concat(lE(this.item.path)))}},{key:"announce",get:function get(){var t=this._item,r=t.title;return[t.tag,Mg.pronounceTTS(r)]}}],[{key:"_template",value:function _template(){return{Image:{y:0,x:0,w:Hero.width-1,h:Hero.height-72}}}},{key:"width",get:function get(){return 1920}},{key:"height",get:function get(){return 712}},{key:"offset",get:function get(){return 0}}]),Hero}(j.Component),KA=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){return _classCallCheck(this,Rail),r.apply(this,arguments)}return _createClass(Rail,[{key:"autoCycle",set:function set(t){this._autoCycle=t}},{key:"_construct",value:function _construct(){this._index=0,this._itemFocused="Current"}},{key:"index",set:function set(t){this._index=t,this.tag(this._itemFocused).item=this._items[this._index]}},{key:"items",set:function set(t){this._items=t}},{key:"updateBrandItem",value:function updateBrandItem(){var t=this._items[this._index],r=t.brandSrc,i=t.tag,a=t.tagline;this.tag("Brand").patch({texture:r&&Img(r).cover(600,200)}),a?this.tag("Tagline").patch({text:a}):this.tag("Tagline").patch({text:""}),i?this.tag("Tag").patch({visible:!0,label:i}):this.tag("Tag").patch({visible:!1})}},{key:"updateItems",value:function updateItems(t){var r=this,i="right"===t?1920:-1920;"Current"===this._itemFocused?(this._itemFocused="Next",this.tag("Next").item=this._items[this._index],t&&(this.tag("Next").x=this._xPosition+i)):(this._itemFocused="Current",this.tag("Current").item=this._items[this._index],t&&(this.tag("Current").x=this._xPosition+i)),t&&this._refocus(),this.tag("BrandOverlay").patch({smooth:{x:[-i,{duration:1.5}],alpha:[0,{delay:1.2}]}}),t&&(this._xPosition-=i),this.tag("Items").setSmooth("x",this._xPosition,{duration:1.5}),this.tag("Items").transition("x")._hasEventListeners||this.tag("Items").transition("x").on("finish",(function(){"Current"===r._itemFocused?(r.tag("Items").x=0,r.tag("Current").x=0,r.tag("Next").x=-1920):(r.tag("Items").x=0,r.tag("Next").x=0,r.tag("Current").x=-1920),r.updateBrandItem(),r.tag("BrandOverlay").x=0,r.tag("BrandOverlay").patch({smooth:{x:[0],alpha:[1,{duration:.7}]}}),r._xPosition=0,r._isAnimating=!1}))}},{key:"_handleRight",value:function _handleRight(t){var r=t.fromInterval,i=void 0!==r&&r;return this._interval&&!i&&(clearInterval(this._interval),this._interval=null),this._isAnimating||this._items.length<2||(this._isAnimating=!0,this._navigateRight()),!0}},{key:"_handleLeft",value:function _handleLeft(){return this._interval&&(clearInterval(this._interval),this._interval=null),this._isAnimating||this._items.length<2||(this._isAnimating=!0,this._navigateLeft()),!0}},{key:"_navigateRight",value:function _navigateRight(){this._index=this._index+1>this._items.length-1?0:this._index+1,this.updateItems("right")}},{key:"_navigateLeft",value:function _navigateLeft(){this._index=this._index-1<0?this._items.length-1:this._index-1,this.updateItems("left")}},{key:"_init",value:function _init(){this._isAnimating=!1,this._xPosition=0,this._navigateLeft=this._navigateLeft.bind(this),this._navigateRight=this._navigateRight.bind(this),this._items.length>1&&this.tag("ArrowIcons").patch({visible:!0}),this.updateItems()}},{key:"_active",value:function _active(){var t=this;this._items.length>1&&(this._interval=setInterval((function(){t._handleRight({fromInterval:!0})}),"".concat(this._autoCycle,"000")))}},{key:"_inactive",value:function _inactive(){this._interval&&(clearInterval(this._interval),this._interval=null)}},{key:"_getFocused",value:function _getFocused(){return this.tag(this._itemFocused)}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(Rail.prototype),"_focus",this).call(this),this.tag("Overlay").patch({Borders:{Top:{h:8},Right:{w:8},Bottom:{h:8},Left:{w:8}}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(Rail.prototype),"_unfocus",this).call(this),this.tag("Overlay").patch({Borders:{Top:{h:0},Right:{w:0},Bottom:{h:0},Left:{w:0}}})}}],[{key:"_template",value:function _template(){return{x:-115,Overlay:{zIndex:1,Gradient:{x:0,y:0,w:$A.width/100*60,h:$A.height-72,rect:!0,colorRight:kg.colours.heroOverlayEnd,colorLeft:kg.colours.heroOverlayStart},ArrowIcons:{visible:!1,Back:{x:$A.width-130,y:320,w:18,h:31,texture:j.Tools.getSvgTexture(mI,18,31)},Forward:{x:124,y:320,w:18,h:31,texture:j.Tools.getSvgTexture(pI,18,31)}},Borders:{zIndex:1,Top:{w:$A.width,h:0,color:kg.colours.primary,rect:!0},Right:{x:$A.width,y:$A.height-72,h:$A.height-72,w:0,color:kg.colours.primary,rect:!0,mount:1},Bottom:{x:$A.width,y:$A.height-71,w:$A.width,h:0,color:kg.colours.primary,rect:!0,mount:1},Left:{h:$A.height-72,w:0,color:kg.colours.primary,rect:!0}}},BrandOverlay:{zIndex:2,Tag:{visible:!1,x:115,y:176,type:lI},Brand:{x:172,y:244,w:600,h:200},Tagline:{x:172,y:473,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.bodyCopy)}},Items:{Next:{x:-1920,type:$A},Current:{x:0,type:$A}}}}},{key:"height",get:function get(){return $A.height}}]),Rail}(j.Component),qA=function(t){_inherits(Hero,t);var r=_createSuper(Hero);function Hero(){return _classCallCheck(this,Hero),r.apply(this,arguments)}return _createClass(Hero,[{key:"items",set:function set(t){var r=t[0].text;this.text=r}},{key:"backgroundImage",set:function set(t){if($E({ref:this,width:300,height:113}),t){var r=Mg.reformatImageSrc(t,{railFormat:!0});this.patch({Image:{texture:Img(r).cover(1920,283)}})}}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(Hero.prototype),"_focus",this).call(this),this.patch({Borders:{Top:{h:8},Right:{w:8},Bottom:{h:8},Left:{w:8}}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(Hero.prototype),"_unfocus",this).call(this),this.patch({Borders:{Top:{h:0},Right:{w:0},Bottom:{h:0},Left:{w:0}}})}},{key:"announce",get:function get(){return Mg.pronounceTTS(this.text)}}],[{key:"_template",value:function _template(){return{w:this.width,h:this.height,x:-115+this.offset,Image:{w:this.width,h:this.imageHeight,x:0},Borders:{Top:{w:this.width,h:0,color:kg.colours.primary,rect:!0},Right:{x:this.width,y:this.imageHeight,h:this.height,w:0,color:kg.colours.primary,rect:!0,mount:1},Bottom:{x:this.width,y:this.imageHeight,w:this.width,h:0,color:kg.colours.primary,rect:!0,mount:1},Left:{h:this.imageHeight,w:0,color:kg.colours.primary,rect:!0}}}}},{key:"width",get:function get(){return 1920}},{key:"height",get:function get(){return 355}},{key:"imageHeight",get:function get(){return 283}},{key:"offset",get:function get(){return 0}}]),Hero}(j.Component);var XA=function(t){_inherits(Hero,t);var r=_createSuper(Hero);function Hero(){return _classCallCheck(this,Hero),r.apply(this,arguments)}return _createClass(Hero,[{key:"items",set:function set(t){var r=_slicedToArray(t,1)[0];this._item=r;var i=this._item,a=i.text,u=i.subheading;this.tag("Title").patch({text:{text:a}}),u&&this.tag("Subtitle").patch({visible:!0,text:{text:u}})}},{key:"_focus",value:function _focus(){this.patch({Background:{color:kg.colours.mutedGrey500}})}},{key:"_unfocus",value:function _unfocus(){this.patch({Background:{color:"none"}})}},{key:"announce",get:function get(){var t=this._item,r=t.text,i=t.subheading;return Mg.pronounceTTS("".concat(r,", ").concat(i||""))}}],[{key:"_template",value:function _template(){return{Background:{zIndex:-1,x:-115,w:Hero.width,h:Hero.height-24,rect:!0,color:"none",flexItem:!1},Container:{h:Hero.height-24,flex:{direction:"column",justifyContent:"center"},Title:{text:_objectSpread2({text:""},kg.TextStyles.h1)},Subtitle:{visible:!1,text:_objectSpread2({text:""},kg.TextStyles.featuredCopy)}}}}},{key:"width",get:function get(){return 1920}},{key:"height",get:function get(){return 320}}]),Hero}(j.Component),ZA=function(t){_inherits(Poster,t);var r=_createSuper(Poster);function Poster(){return _classCallCheck(this,Poster),r.apply(this,arguments)}return _createClass(Poster,[{key:"item",get:function get(){return this._item||{}},set:function set(t){if(this._item=t,this._item.isViewAll)this.patch({Text:{x:90,y:160,flex:{direction:"column",justifyContent:"center",alignItems:"center"},visible:!0,text:_objectSpread2({text:"View all",textAlign:"center",verticalAlign:"center",wordWrapWidth:100},kg.TextStyles.h1)},Background:{visible:!0}});else{var r=this._item,i=r.imageSrc,a=r.tag;$E({ref:this,width:150,height:57}),this.patch({Image:{texture:Img(i).cover(Poster.width,Poster.height)}}),a&&this.tag("Tag").patch({visible:!0,label:a})}}}],[{key:"_template",value:function _template(){return{Image:{y:0,x:0,w:Poster.width,h:Poster.height,clipping:!0},Borders:KE(Poster.width,Poster.height),Tag:{visible:!0,x:0,y:0,type:lI},Background:{visible:!1,color:kg.colours.mutedGrey500,rect:!0,w:Poster.width,h:Poster.height}}}},{key:"width",get:function get(){return 322}},{key:"height",get:function get(){return 481}},{key:"offset",get:function get(){return 20}}]),Poster}(PI),JA=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",5),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return ZA}}],[{key:"height",get:function get(){return ZA.height+144+72}}]),Rail}(fI),eC=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",4),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return UA}},{key:"title",set:function set(t){var r=t;this.tag("TitleText").patch({text:r})}},{key:"tagline",set:function set(t){t?this.patch({Container:{Tagline:{visible:!0,text:{text:t}}}}):this.patch({Container:{h:96}})}},{key:"backgroundColour",set:function set(t){this.tag("Banner").patch({color:"0xff".concat(Mg.convertColourToHex(t))})}},{key:"customImage",set:function set(t){if(t){var r=Mg.reformatImageSrc(t,{format:"png",w:490,h:490});this.tag("BrandedTitle").patch({texture:Img(r).cover(490,490),visible:!0}),this.tag("TitleText").patch({visible:!1})}}},{key:"_init",value:function _init(){this._index=0}},{key:"_animateToSelected",value:function _animateToSelected(){var t=50-this.activeItem.finalX;this.tag("Items").setSmooth("x",t)}}],[{key:"_template",value:function _template(){return{flex:{direction:"column"},Container:{flex:{direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},Heading:{h:64,text:_objectSpread2({text:""},kg.TextStyles.h2)},Tagline:{visible:!1,h:80,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.featuredCopy)}},Banner:{w:1920,h:580,x:-115,rect:!0,color:"none",ContentContainer:{w:1805,h:580,x:115,flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},TitleText:{w:360,x:50,text:_objectSpread2(_objectSpread2({text:"",textAlign:"center",verticalAlign:"middle"},kg.TextStyles.h2),{},{fontWeight:400})},BrandedTitle:{x:50,w:490,h:490,visible:!1},ItemContainer:{w:1250,h:UA.height+16,clipping:!0,Items:{y:8,x:50}}}}}}},{key:"height",get:function get(){return 796}}]),Rail}(fI),tC=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",4),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return UA}},{key:"tagline",set:function set(t){t?this.patch({Container:{Tagline:{visible:!0,text:{text:t}}}}):this.patch({Container:{h:96}})}},{key:"backgroundImage",set:function set(t){if(t){var r=Mg.reformatImageSrc(t,{w:1920,h:580,railFormat:!0});this.tag("Banner").patch({texture:Img(r).cover(1920,580)})}}},{key:"backgroundColour",set:function set(t){this.tag("Banner").patch({color:"0xff".concat(Mg.convertColourToHex(t))})}},{key:"customImage",set:function set(t){if(t){var r=Mg.reformatImageSrc(t,{format:"png",w:490,h:490});this.tag("RailImage").patch({texture:Img(r).cover(490,490)})}}},{key:"_init",value:function _init(){this._index=0}},{key:"_animateToSelected",value:function _animateToSelected(){var t=50-this.activeItem.finalX;this.tag("Items").setSmooth("x",t)}}],[{key:"_template",value:function _template(){return{flex:{direction:"column"},Container:{flex:{direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},Heading:{h:64,text:_objectSpread2({text:""},kg.TextStyles.h2)},Tagline:{h:80,visible:!1,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.featuredCopy)}},Banner:{rect:!0,color:"none",w:1920,h:580,x:-115,ContentContainer:{w:1805,h:580,x:115,flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},RailImage:{w:490,h:490},ItemContainer:{w:1250,h:UA.height+16,clipping:!0,Items:{y:8,x:50}}}}}}},{key:"height",get:function get(){return 796}}]),Rail}(fI),rC=function(t){_inherits(SquareCard,t);var r=_createSuper(SquareCard);function SquareCard(){return _classCallCheck(this,SquareCard),r.apply(this,arguments)}return _createClass(SquareCard,[{key:"_init",value:function _init(){$E({ref:this,width:150,height:57})}}],[{key:"_template",value:function _template(){return _objectSpread2(_objectSpread2({},YI._template()),{},{Image:_objectSpread2({},YI._template().Image)})}},{key:"width",get:function get(){return 265}},{key:"height",get:function get(){return 265}},{key:"offset",get:function get(){return 20}}]),SquareCard}(YI),nC=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",6),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return rC}}],[{key:"height",get:function get(){return rC.height+144+72}}]),Rail}(fI),iC=function(t){_inherits(SquareCard,t);var r=_createSuper(SquareCard);function SquareCard(){return _classCallCheck(this,SquareCard),r.apply(this,arguments)}return _createClass(SquareCard,[{key:"item",get:function get(){return this._item||{}},set:function set(t){if(this._item=t,this._item.isViewAll)this.patch({Text:{x:80,y:130,flex:{direction:"column",justifyContent:"center",alignItems:"center"},visible:!0,text:_objectSpread2({text:"View all",textAlign:"center",verticalAlign:"center"},kg.TextStyles.h2)},Background:{visible:!0}});else{var r=this._item.imageSrc;$E({ref:this,width:150,height:57}),this.patch({Image:{texture:Img(r).cover(SquareCard.width,SquareCard.height)}})}}}],[{key:"_template",value:function _template(){return{Image:{y:0,x:0,w:SquareCard.width,h:SquareCard.height},Borders:KE(SquareCard.width,SquareCard.height),Background:{visible:!1,color:kg.colours.mutedGrey500,rect:!0,w:SquareCard.width,h:SquareCard.height}}}},{key:"width",get:function get(){return 322}},{key:"height",get:function get(){return 322}},{key:"offset",get:function get(){return 20}}]),SquareCard}(YI),aC=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",5),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return iC}}],[{key:"height",get:function get(){return iC.height+144+72}}]),Rail}(fI),oC=function(t){_inherits(Card,t);var r=_createSuper(Card);function Card(){return _classCallCheck(this,Card),r.apply(this,arguments)}return _createClass(Card,null,[{key:"width",get:function get(){return 322}},{key:"height",get:function get(){return 173}},{key:"offset",get:function get(){return 20}}]),Card}(cI),sC=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",5),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return oC}}],[{key:"height",get:function get(){return oC.height+144+72}}]),Rail}(fI),uC=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",5),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return oC}},{key:"items",set:function set(t){var r=this,i=[],a=[];t.forEach((function(t,u){var l=r.createItem(t);u%2==0?(i.push(l),l.x=(oC.width+20)*i.indexOf(l)):(a.push(l),l.x=(oC.width+20)*a.indexOf(l))})),this.row1Items=i,this.row2Items=a}},{key:"tagline",set:function set(t){t&&(this.patch({Tagline:{visible:!0,text:{text:t}}}),this.tag("Container").patch({y:134}))}},{key:"_setup",value:function _setup(){this._indexX=0,this._indexY=0,this.tag("Row1").children=this.row1Items,this.tag("Row2").children=this.row2Items}},{key:"_handleLeft",value:function _handleLeft(){return this._indexX>0&&(this._indexX-=1,this._indexX<this.row1Items.length-this._maxItems&&this._animateToSelected(),!0)}},{key:"_handleRight",value:function _handleRight(){if(this._indexX<this.row1Items.length-this._maxItems)return this._indexX+=1,this._animateToSelected(),!0;var t=0===this._indexY?this.row1Items.length-1:this.row2Items.length-1;return this._indexX<t&&(this._indexX+=1,!0)}},{key:"_handleUp",value:function _handleUp(){return 1===this._indexY&&(this._indexY-=1,!0)}},{key:"_handleDown",value:function _handleDown(){return this.row1Items.length>this.row2Items.length&&this._indexX===this.row1Items.length-1?(this._indexX=this.row2Items.length-1,this._indexY+=1,!0):0===this._indexY&&(this._indexY+=1,!0)}},{key:"_getFocused",value:function _getFocused(){return 0===this._indexY?this.tag("Row1").children[this._indexX]:this.tag("Row2").children[this._indexX]}},{key:"_animateToSelected",value:function _animateToSelected(){var t=this.tag("Row1").children.length-this._maxItems;if(!(t<0)){var r=this._indexX<t?-this.tag("Row1").children[this._indexX].finalX:-this.tag("Row1").children[t].finalX;this.tag("Container").setSmooth("x",r)}}},{key:"announceContext",get:function get(){var t=0===this._indexY?this.tag("Row1"):this.tag("Row2"),r=[];return this.tag("Heading")&&r.push("".concat(this.tag("Heading").text.text," rail")),t.children.length>0&&r.push("\n        ".concat(t.$ref,", \n        Item ").concat(this._indexX+1,"\n        of ").concat(t.children.length,"\n      ")),r}}],[{key:"_template",value:function _template(){return{Heading:{y:0,x:0,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.h2)},Tagline:{h:80,visible:!1,y:64,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.featuredCopy)},Container:{y:80,Row1:{},Row2:{y:oC.height+24}}}}},{key:"height",get:function get(){return 2*oC.height+144+72}}]),Rail}(fI),lC=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",2),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return OA}},{key:"backgroundImage",set:function set(t){if(t){var r=Mg.reformatImageSrc(t,{w:1920,h:580,railFormat:!0});this.tag("Banner").patch({texture:Img(r).cover(1920,580)})}}},{key:"backgroundColour",set:function set(t){this.tag("Banner").patch({color:"0xff".concat(Mg.convertColourToHex(t))})}},{key:"title",set:function set(t){t&&this.tag("Title").patch({text:{text:t}})}},{key:"tagline",set:function set(t){t?this.patch({Container:{Tagline:{h:80,visible:!0,text:{text:t}}}}):this.patch({Container:{h:96}})}},{key:"customImage",set:function set(t){if(t){var r=Mg.reformatImageSrc(t,{format:"png",w:490,h:490});this.tag("BrandedTitle").patch({texture:Img(r).cover(490,490),visible:!0}),this.tag("Title").patch({visible:!1})}}},{key:"_animateToSelected",value:function _animateToSelected(){this.tag("Items").setSmooth("x",50-this.activeItem.finalX)}}],[{key:"_template",value:function _template(){return{flex:{direction:"column"},Container:{flex:{direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},Heading:{h:64,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.h2)},Tagline:{h:80,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.featuredCopy)}},Banner:{w:1920,h:580,x:-115,rect:!0,color:"none",ContentContainer:{w:1805,h:580,x:115,flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},Title:{w:360,x:50,text:_objectSpread2(_objectSpread2({text:"",textAlign:"center",verticalAlign:"middle"},kg.TextStyles.h2),{},{fontWeight:400})},BrandedTitle:{x:50,w:490,h:490,visible:!1},ItemContainer:{w:1250,h:OA.height+16,clipping:!0,Items:{y:8,x:50}}}}}}},{key:"height",get:function get(){return 796}}]),Rail}(fI),cC=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",2),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return OA}},{key:"backgroundImage",set:function set(t){if(t){var r=Mg.reformatImageSrc(t,{w:1920,h:580,railFormat:!0});this.patch({Banner:{texture:Img(r).cover(1920,580)}})}}},{key:"backgroundColour",set:function set(t){this.tag("Banner").patch({color:"0xff".concat(Mg.convertColourToHex(t))})}},{key:"customImage",set:function set(t){if(t){var r=Mg.reformatImageSrc(t,{format:"png",w:490,h:490});this.tag("RailImage").patch({texture:Img(r).cover(490,490)})}}},{key:"tagline",set:function set(t){t?this.patch({Container:{Tagline:{visible:!0,text:{text:t}}}}):this.patch({Container:{h:96}})}},{key:"_animateToSelected",value:function _animateToSelected(){this.tag("Items").setSmooth("x",50-this.activeItem.finalX)}}],[{key:"_template",value:function _template(){return{flex:{direction:"column"},Container:{flex:{direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},Heading:{h:64,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.h2)},Tagline:{h:80,visible:!1,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.featuredCopy)}},Banner:{w:1920,h:580,x:-115,rect:!0,color:"none",ContentContainer:{w:1805,h:580,x:115,flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},RailImage:{w:490,h:490},ItemContainer:{w:1250,h:OA.height+16,clipping:!0,Items:{y:8,x:50}}}}}}},{key:"height",get:function get(){return 796}}]),Rail}(fI),dC=function(t){_inherits(Button,t);var r=_createSuper(Button);function Button(){return _classCallCheck(this,Button),r.apply(this,arguments)}return _createClass(Button,null,[{key:"width",get:function get(){return 379}},{key:"height",get:function get(){return 86}},{key:"offset",get:function get(){return 20}}]),Button}(sI),fC=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",4),t}return _createClass(Rail,[{key:"itemComponent",get:function get(){return dC}}],[{key:"height",get:function get(){return dC.height+144+72}}]),Rail}(fI),hC=function(t){_inherits(Poster,t);var r=_createSuper(Poster);function Poster(){return _classCallCheck(this,Poster),r.apply(this,arguments)}return _createClass(Poster,null,[{key:"width",get:function get(){return 265}},{key:"height",get:function get(){return 396}},{key:"offset",get:function get(){return 20}}]),Poster}(PI),gC=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",6),t}return _createClass(Rail,[{key:"heading",set:function set(t){_set(_getPrototypeOf(Rail.prototype),"heading",t,this,!0),0===this._items.length&&(this.tag("TitleContainer").patch({y:32,Heading:{text:_objectSpread2({text:"YOUR WATCHLIST IS EMPTY!"},kg.TextStyles.h5)}}),this.tag("Container").patch({y:24}))}},{key:"tagline",set:function set(t){t&&(this.tag("TitleContainer").patch({Tagline:{visible:!0,zIndex:1,text:{text:t}}}),this.tag("Items").patch({y:134}))}},{key:"items",set:function set(t){_set(_getPrototypeOf(Rail.prototype),"items",t,this,!0),0===this._items.length&&(this.patch({y:32}),this.tag("Container").patch({visible:!0}))}},{key:"itemComponent",get:function get(){return hC}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(Rail.prototype),"_focus",this).call(this),0===this._items.length&&this.tag("Background").patch({color:kg.colours.mutedGrey500})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(Rail.prototype),"_unfocus",this).call(this),0===this._items.length&&this.tag("Background").patch({color:kg.colours.darkBlue500})}},{key:"announceContext",get:function get(){var t,r,i,a,u=[];this.tag("Heading")&&u.push("".concat(this.tag("Heading").text.text," ").concat((null===(i=this.tag("Items"))||void 0===i||null===(a=i.children)||void 0===a?void 0:a.length)>0?"rail":""));return(null===(t=this.tag("Items"))||void 0===t||null===(r=t.children)||void 0===r?void 0:r.length)>0?u.push("Item ".concat(this._index+1," of ").concat(this.tag("Items").children.length)):u.push("".concat(this.tag("Info").text.text,", ").concat(this.tag("Subtext").text.text)),u}}],[{key:"_template",value:function _template(){return{TitleContainer:{h:144,flex:{direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},Heading:{h:64,zIndex:1,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.h2)},Tagline:{h:48,text:_objectSpread2({text:"",verticalAlign:"middle"},kg.TextStyles.featuredCopy)}},Background:{w:1920,h:300,flex:{direction:"column",paddingBottom:97},x:-115,rect:!0,color:kg.colours.darkBlue500,Container:{flexItem:{marginTop:64,marginLeft:115},visible:!1,flex:{direction:"column"},Info:{x:0,text:_objectSpread2({text:"Your watchlist lets you return to your favourite programmes really quickly, and it works across all of your devices.",wordWrapWidth:1120,lineHeight:48},kg.TextStyles.featuredCopy),flexItem:{marginTop:24}},Subtext:{x:0,text:_objectSpread2({text:"Just hit the “+ Watchlist” button on any programme page.",wordWrapWidth:1120,lineHeight:48},kg.TextStyles.featuredCopy),flexItem:{marginTop:56}}}},Items:{y:80}}}},{key:"height",get:function get(){return hC.height+144+72}}]),Rail}(fI),pC=function(t){_inherits(Card,t);var r=_createSuper(Card);function Card(){return _classCallCheck(this,Card),r.apply(this,arguments)}return _createClass(Card,[{key:"_handleEnter",value:function _handleEnter(){var t=this.item;if(t.watchPath){var r=dE(t.watchPath);return Cr.navigate(r)}return Cr.navigate("dynamic/".concat(lE(t.path)))}}],[{key:"width",get:function get(){return 322}},{key:"height",get:function get(){return 239}},{key:"offset",get:function get(){return 20}}]),Card}(cI),mC=function(t){_inherits(Rail,t);var r=_createSuper(Rail);function Rail(){var t;_classCallCheck(this,Rail);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_maxItems",5),t}return _createClass(Rail,[{key:"items",set:function set(t){_set(_getPrototypeOf(Rail.prototype),"items",t,this,!0),0===this._items.length&&this.tag("Container").patch({visible:!0})}},{key:"heading",set:function set(t){_set(_getPrototypeOf(Rail.prototype),"heading",t,this,!0),0===this._items.length&&(this.patch({y:50}),this.tag("TitleContainer").patch({Heading:{y:50,text:_objectSpread2({text:"YOUR WATCHLIST IS EMPTY!"},kg.TextStyles.h5)}}))}},{key:"tagline",set:function set(t){t&&(this.tag("TitleContainer").patch({Tagline:{visible:!0,text:{text:t}}}),this.tag("Items").patch({y:134}))}},{key:"itemComponent",get:function get(){return pC}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(Rail.prototype),"_focus",this).call(this),0===this._items.length&&this.tag("Background").patch({color:kg.colours.mutedGrey500})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(Rail.prototype),"_unfocus",this).call(this),0===this._items.length&&this.tag("Background").patch({color:kg.colours.darkBlue500})}},{key:"announceContext",get:function get(){var t,r,i,a,u=[];this.tag("Heading")&&u.push("".concat(this.tag("Heading").text.text," ").concat((null===(i=this.tag("Items"))||void 0===i||null===(a=i.children)||void 0===a?void 0:a.length)>0?"rail":""));return(null===(t=this.tag("Items"))||void 0===t||null===(r=t.children)||void 0===r?void 0:r.length)>0?u.push("Item ".concat(this._index+1," of ").concat(this.tag("Items").children.length)):u.push("".concat(this.tag("Info").text.text,", ").concat(this.tag("Subtext").text.text)),u}}],[{key:"_template",value:function _template(){return{Background:{w:1920,h:260,flex:{direction:"column",paddingBottom:97},x:-115,rect:!0,color:kg.colours.darkBlue500,TitleContainer:{y:0,x:115,flex:{direction:"column"},Heading:{h:64,text:_objectSpread2({text:"",lineHeight:63},kg.TextStyles.h2)},Tagline:{h:80,visible:!1,text:_objectSpread2({text:""},kg.TextStyles.featuredCopy)}},Container:{y:64,x:115,visible:!1,Info:{x:0,y:0,text:_objectSpread2({text:"Your watchlist lets you return to your favourite programmes really quickly, and it works across all of your devices.",wordWrapWidth:1120,lineHeight:48},kg.TextStyles.featuredCopy)},Subtext:{y:120,x:0,text:_objectSpread2({text:"Just hit the “+ Watchlist” button on any programme page.",wordWrapWidth:1120,lineHeight:48},kg.TextStyles.featuredCopy)}}},Items:{y:80}}}},{key:"height",get:function get(){return pC.height+48+32+72}}]),Rail}(fI),yC=function(t){_inherits(ImageHeaderLive,t);var r=_createSuper(ImageHeaderLive);function ImageHeaderLive(){return _classCallCheck(this,ImageHeaderLive),r.apply(this,arguments)}return _createClass(ImageHeaderLive,[{key:"_init",value:function _init(){this._index=0,_n.getInstance().emit(yA,!1)}},{key:"items",set:function set(t){var r,i=t[0],a=i.id,u=i.imageSrc,l=i.title,c=i.buttonLabel,d=i.description,g=i.hasAdditionalData;if(this.hasAdditionalData=g,$E({ref:this,width:300,height:113}),yE()){r={static:!0,callback:function callback(){Cr.navigate("/watch/".concat(a),{liveInfo:{customId:a,title:l,description:d}})},text:c,tts:"Watch Lighv"}}else{r={static:!0,callback:function _callback(){Cr.navigate("sign-in-pin-and-pair",{videoRedirectUrl:"/watch/".concat(a),payload:{liveInfo:{customId:a,title:l,description:d}}})},text:"Subscribe"}}this.patch({Image:{texture:Img(u).cover(1920,1080)},Container:{Title:{text:{text:l||d}},Button:{item:r}}}),g&&this.patch({PressDownText:{y:966,x:793,zIndex:1,text:_objectSpread2({static:!0,text:"Press down for more"},kg.TextStyles.bodyCopy)},Arrow:{y:981,x:1096,h:13,w:21,zIndex:1,texture:j.Tools.getSvgTexture(MI,37,37)}})}},{key:"_getFocused",value:function _getFocused(){return this.hasAdditionalData&&this.fireAncestors("$announce",[this.tag("PressDownText").text.text],{append:!0}),this.tag("Button")}},{key:"_handleUp",value:function _handleUp(){return!0}},{key:"_handleDown",value:function _handleDown(){return!this.hasAdditionalData}},{key:"announce",get:function get(){return this.tag("Title").text.text}}],[{key:"_template",value:function _template(){return{w:ImageHeaderLive.width,h:ImageHeaderLive.height,x:-115,Image:{x:0,w:ImageHeaderLive.width,h:ImageHeaderLive.height},OverlayBottom:{x:0,y:ImageHeaderLive.height/2,zIndex:1,w:ImageHeaderLive.width,h:ImageHeaderLive.height/2,rect:!0,colorTop:kg.colours.featuredHeaderOverlay,colorBottom:kg.colours.darkBlue500},OverlayLeft:{x:0,y:0,zIndex:1,w:ImageHeaderLive.width/2,h:ImageHeaderLive.height,rect:!0,colorLeft:kg.colours.darkBlue500,colorRight:kg.colours.featuredHeaderOverlay},Container:{h:ImageHeaderLive.height,flex:{direction:"column",justifyContent:"flex-end",paddingLeft:115},Title:{flexItem:{marginBottom:48},zIndex:1,text:_objectSpread2({text:"",wordWrapWidth:835},kg.TextStyles.h1)},Button:{flexItem:{marginBottom:162},zIndex:1,type:sI,item:{static:!0,text:""}}}}}},{key:"width",get:function get(){return 1920}},{key:"height",get:function get(){return 1080}},{key:"offset",get:function get(){return 0}}]),ImageHeaderLive}(j.Component),vC=function(t){_inherits(EditorialImage,t);var r=_createSuper(EditorialImage);function EditorialImage(){return _classCallCheck(this,EditorialImage),r.apply(this,arguments)}return _createClass(EditorialImage,[{key:"_init",value:function _init(){}},{key:"_focus",value:function _focus(){this.patch({Borders:{Top:{h:8},Right:{w:8},Bottom:{h:8},Left:{w:8}}})}},{key:"_unfocus",value:function _unfocus(){this.patch({Borders:{Top:{h:0},Right:{w:0},Bottom:{h:0},Left:{w:0}}})}},{key:"items",set:function set(t){var r=t[0].imageSrc;$E({ref:this,width:300,height:113}),this.patch({Image:{texture:Img(r).cover(1663,936)}})}}],[{key:"_template",value:function _template(){return{Image:{x:0,w:EditorialImage.width,h:EditorialImage.imageHeight,y:72},Borders:_objectSpread2({y:72},KE(EditorialImage.width,EditorialImage.imageHeight))}}},{key:"width",get:function get(){return 1690}},{key:"height",get:function get(){return 1080}},{key:"imageHeight",get:function get(){return 936}}]),EditorialImage}(j.Component),_C=function(t){_inherits(EditorialText,t);var r=_createSuper(EditorialText);function EditorialText(){return _classCallCheck(this,EditorialText),r.apply(this,arguments)}return _createClass(EditorialText,[{key:"_init",value:function _init(){this._index=0}},{key:"items",set:function set(t){var r=this,i=t[0],a=i.formattedText,u=i.height;EditorialText.height=u,a.forEach((function(t){r.tag("Content").patch(t)})),setTimeout((function(){r.tag("Background").patch({h:r.tag("Content").finalH+72+24})}),1)}},{key:"_focus",value:function _focus(){this.patch({Background:{color:kg.colours.mutedGrey500}})}},{key:"_unfocus",value:function _unfocus(){this.patch({Background:{color:"none"}})}},{key:"_handleDown",value:function _handleDown(){var t=Math.ceil(this.tag("Content").finalH/540)-2;return!(this._index+1>t)&&(this._index+=1,this._animateToSelected("down"),!0)}},{key:"_handleUp",value:function _handleUp(){return 0!==this._index&&(this._index-=1,this._animateToSelected("up"),!0)}},{key:"_animateToSelected",value:function _animateToSelected(t){var r=this.y;this._index>=1&&"down"===t?r-=540:r+=540,this.setSmooth("y",r)}},{key:"announce",get:function get(){var t=[];return this.tag("Content").children.forEach((function(r){t.push(r.text.text)})),t}}],[{key:"_template",value:function _template(){return{Background:{y:72,zIndex:0,rect:!0,x:-115,w:1920,Content:{y:72,w:EditorialText.width,x:115,zIndex:1,flex:{direction:"column"},children:[]}}}}},{key:"width",get:function get(){return 1805}}]),EditorialText}(j.Component),TC=function(t){_inherits(EmailNotificationToggle,t);var r=_createSuper(EmailNotificationToggle);function EmailNotificationToggle(){return _classCallCheck(this,EmailNotificationToggle),r.apply(this,arguments)}return _createClass(EmailNotificationToggle,[{key:"description",set:function set(t){this.tag("Description").patch({text:{text:t}})}},{key:"announce",get:function get(){return"\n      ".concat(this.tag("Heading").text.text,", \n      ").concat(this.tag("Description").text.text,", \n      ").concat(this.isEnabled?"on":"off","\n    ")}}],[{key:"height",get:function get(){return 309}},{key:"_template",value:function _template(){return{h:EmailNotificationToggle.height,flex:{direction:"column"},Heading:{flexItem:{marginTop:72,marginBottom:24},text:_objectSpread2({text:""},kg.TextStyles.h3)},Description:{flexItem:{marginBottom:48},text:_objectSpread2({text:""},kg.TextStyles.bodyCopy)},OuterContainer:{w:194,h:78,x:1,Border:{w:function w(t){return t},h:function h(t){return t},rect:!0,color:"none",shader:{type:j.shaders.RoundedRectangle,radius:40,stroke:3,strokeColor:kg.colours.lightBlue50}},Toggle:{w:94,h:function h(t){return t},x:0,rect:!0,color:kg.colours.mutedBlue200,shader:{type:j.shaders.RoundedRectangle,radius:40,stroke:3,strokeColor:kg.colours.lightBlue50}},OnText:{x:20,y:20,alpha:0,text:_objectSpread2(_objectSpread2({text:"ON"},kg.TextStyles.ctaLabel),{},{textColor:kg.colours.lightBlue50}),transitions:{alpha:{delay:.5}}},OffText:{x:115,y:20,alpha:1,text:_objectSpread2(_objectSpread2({text:"OFF"},kg.TextStyles.ctaLabel),{},{textColor:kg.colours.lightBlue50}),transitions:{alpha:{delay:.5}}}}}}}]),EmailNotificationToggle}(HI),bC=function(t){_inherits(TextDescriptionBlock,t);var r=_createSuper(TextDescriptionBlock);function TextDescriptionBlock(){return _classCallCheck(this,TextDescriptionBlock),r.apply(this,arguments)}return _createClass(TextDescriptionBlock,[{key:"content",set:function set(t){var r=t.text,i=t.title;this._descriptionText=r;var a=r.trim().split("\n");this.tag("Title").patch({text:{text:i}}),a&&(this.tag("Description").children=a.map((function(t){return{text:_objectSpread2(_objectSpread2({text:t},kg.TextStyles.bodyCopy),{},{advancedRenderer:!0})}})))}},{key:"announce",get:function get(){return"\n      ".concat(this.tag("Title").text.text,",\n      ").concat(Mg.pronounceTTS(this._descriptionText),"\n    ")}}],[{key:"_template",value:function _template(){return{w:TextDescriptionBlock.width,h:TextDescriptionBlock.height,Background:{color:kg.colours.darkBlue500,rect:!0,w:function w(t){return t},h:function h(t){return t},x:-115,flex:{direction:"column",justifyContent:"center"},Title:{x:115,flexItem:{marginBottom:24},text:_objectSpread2({text:""},kg.TextStyles.h3)},Description:{w:TextDescriptionBlock.width-230,x:115,flexItem:{marginBottom:14},flex:{direction:"column"}}}}}},{key:"height",get:function get(){return 255}}]),TextDescriptionBlock}(GI),MC=function(t){_inherits(DropButton,t);var r=_createSuper(DropButton);function DropButton(){return _classCallCheck(this,DropButton),r.apply(this,arguments)}return _createClass(DropButton,[{key:"item",get:function get(){return this._item||{}},set:function set(t){this._item=t;var r=this._item,i=r.callback,a=r.text;this.callback=i,this.tag("Label").patch({text:{text:a}})}}],[{key:"_template",value:function _template(){return{w:DropButton.width,h:DropButton.height,x:1,Borders:{w:DropButton.width-2,h:DropButton.height,rect:!0,color:"none",shader:{type:j.shaders.RoundedRectangle,radius:45,stroke:4,strokeColor:kg.colours.lightBlue50}},Container:{w:function w(t){return t},h:function h(t){return t},flex:{direction:"row",alignItems:"center",justifyContent:"center",wrap:!1},Label:{w:DropButton.width-96,h:DropButton.height-44,x:0,y:0,text:_objectSpread2({text:"",textAlign:"center",verticalAlign:"center",textColor:kg.colours.lightBlue50,wordWrap:!1,textOverflow:"ellipsis"},kg.TextStyles.ctaLabel)},IconAfter:{flexItem:{marginLeft:10},texture:j.Tools.getSvgTexture(MI,37,37),w:21,h:12}}}}},{key:"width",get:function get(){return 208}},{key:"height",get:function get(){return 90}}]),DropButton}(sI),SC=function(t){_inherits(ParentalControlButtons,t);var r=_createSuper(ParentalControlButtons);function ParentalControlButtons(){return _classCallCheck(this,ParentalControlButtons),r.apply(this,arguments)}return _createClass(ParentalControlButtons,[{key:"content",set:function set(t){var r=t.heading,i=t.parentalControlLevel;this.callback=function(){return Cr.navigate("password-confirmation/false/false")},this.tag("Heading").patch({text:{text:r}}),this._parentalControlLevel=BE(i),this.tag("Label").patch({y:-60,text:{text:this._parentalControlLevel}}),this.tag("IconAfter").patch({y:-64})}},{key:"announce",get:function get(){return"".concat(this.tag("Heading").text.text,", ").concat(this.tag("Label").text.text)}}],[{key:"height",get:function get(){return 231}},{key:"_template",value:function _template(){return _objectSpread2(_objectSpread2({flex:{direction:"column"},Heading:{flexItem:{marginTop:72,marginBottom:24},text:_objectSpread2({text:""},kg.TextStyles.h3)}},MC._template()),{},{h:ParentalControlButtons.height})}}]),ParentalControlButtons}(MC),EC=function(t){_inherits(Box,t);var r=_createSuper(Box);function Box(){return _classCallCheck(this,Box),r.apply(this,arguments)}return _createClass(Box,[{key:"items",set:function set(t){var r=t.icon,i=t.code,a=t.number,u=t.text;if(this.patch({Number:{Text:{text:{text:a.toString()}}},MainText:{text:{text:u}}}),r){var l=r.xPos,c=r.yPos,d=r.width,g=r.height,p=r.base64;this.patch({Icon:{w:d,h:g,x:l,y:c,texture:j.Tools.getSvgTexture(p,d,g),flexItem:_objectSpread2({},r.flexOptions)}})}i&&this.tag("PinCode").patch({x:24,y:145,h:96,w:502,text:_objectSpread2(_objectSpread2({},kg.TextStyles.h1),{},{textColor:4278236902,textTransform:"uppercase",textAlign:"center",text:i})})}}],[{key:"_template",value:function _template(){return{h:270,w:554,rect:!0,color:kg.colours.mutedBlue500,Number:{x:33,y:44,Elipses:{texture:j.Tools.getSvgTexture(_I,52,52)},Text:{x:19,y:9,h:42,w:14,text:_objectSpread2(_objectSpread2({},kg.TextStyles.bodyCopy),{},{text:Box.number})}},MainText:{x:100,y:28,w:440,text:_objectSpread2(_objectSpread2({},kg.TextStyles.bodyCopy),{},{advancedRenderer:!0,text:"",lineHeight:42,wordWrapWidth:440})},PinCode:{}}}}]),Box}(j.Component),IC=function(t){_inherits(BoxContainer,t);var r=_createSuper(BoxContainer);function BoxContainer(){return _classCallCheck(this,BoxContainer),r.apply(this,arguments)}return _createClass(BoxContainer,[{key:"items",set:function set(t){var r=this,i=t.code,a=t.linkUrl,u=[{type:EC,items:{number:1,text:"On a desktop or mobile, visit <color=0xff00b6e6>".concat(a,"</color>"),icon:{xPos:24,yPos:144,width:496,height:100,base64:AI},ref:"Box1"}},{type:EC,items:{number:2,text:"Enter this 6 digit code when prompted",code:i},ref:"Box2"},{type:EC,items:{number:3,text:"Wait for this screen to refresh and you're ready to start watching",icon:{xPos:210,yPos:152,width:130,height:75,flexOptions:{},base64:OI}},ref:"Box3"}];this.tag("Items").children=u;var l=0;this.tag("Items").children.forEach((function(t,i){t.x=l,l+=565,i!==r._index||r._resettable||r._refocus()}))}}],[{key:"_template",value:function _template(){return{BoxContainer:{Items:{}}}}}]),BoxContainer}(j.Component),DC=function(t){_inherits(FlatButton,t);var r=_createSuper(FlatButton);function FlatButton(){return _classCallCheck(this,FlatButton),r.apply(this,arguments)}return _createClass(FlatButton,[{key:"item",get:function get(){return this._item||{}},set:function set(t){this._item=t;var r=this._item,i=r.callback,a=r.text,u=r.textAlign,l=r.verticalAlign;this.callback=i,this.tag("Label").patch({text:{text:a,textAlign:u,verticalAlign:l}}),this.patch({Borders:{shader:{radius:5,strokeColor:"none"}}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(FlatButton.prototype),"_unfocus",this).call(this),this.patch({Borders:{color:"none",shader:{strokeColor:"none"}},Label:{text:{textColor:kg.colours.lightBlue50}}})}}],[{key:"_template",value:function _template(){return{w:FlatButton.width,h:FlatButton.height,Borders:_objectSpread2(_objectSpread2({},sI._template().Borders),{},{w:FlatButton.width,h:FlatButton.height}),Label:_objectSpread2(_objectSpread2({},sI._template().Label),{},{x:24})}}},{key:"width",get:function get(){return 550}},{key:"height",get:function get(){return 74}},{key:"offset",get:function get(){return 20}}]),FlatButton}(sI),AC=function(t){_inherits(ShowPasswordButton,t);var r=_createSuper(ShowPasswordButton);function ShowPasswordButton(){return _classCallCheck(this,ShowPasswordButton),r.apply(this,arguments)}return _createClass(ShowPasswordButton,[{key:"_init",value:function _init(){this._showPassword=!1}},{key:"_inactive",value:function _inactive(){this._showPassword=!1,this.tag("Icon").patch({texture:j.Tools.getSvgTexture(bI,38,38)}),this.signal("_handleToggleShowPassword",!1)}},{key:"_focus",value:function _focus(){this.patch({shader:{type:j.shaders.RoundedRectangle,stroke:8,strokeColor:kg.colours.primary}})}},{key:"_unfocus",value:function _unfocus(){this.patch({shader:{type:j.shaders.RoundedRectangle,stroke:4,strokeColor:kg.colours.lightBlue50}})}},{key:"_handleEnter",value:function _handleEnter(){this._showPassword=!this._showPassword,this._showPassword?(this.tag("Icon").patch({texture:j.Tools.getSvgTexture(CI,38,38)}),this.fireAncestors("$announce",["Hide password"])):(this.tag("Icon").patch({texture:j.Tools.getSvgTexture(bI,38,38)}),this.fireAncestors("$announce",["Show password"])),this.signal("_handleToggleShowPassword",this._showPassword)}},{key:"announce",get:function get(){return"".concat(this._showPassword?"Hide password":"Show password")}}],[{key:"_template",value:function _template(){return{w:96,h:86,rect:!0,color:kg.colours.mutedBlue500,shader:{type:j.shaders.RoundedRectangle,stroke:4,strokeColor:kg.colours.lightBlue50},flex:{alignItems:"center",justifyContent:"center"},Icon:{w:38,h:38,shader:null,texture:j.Tools.getSvgTexture(bI,38,38)}}}}]),ShowPasswordButton}(j.Component);var CC={bksp:["data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48cGF0aCBmaWxsPSJ3aGl0ZSIgZD0iTTQ2OS42NiAxODEuNjVsLTExLjMxLTExLjMxYy0zLjEyLTMuMTItOC4xOS0zLjEyLTExLjMxIDBMMzg0IDIzMy4zN2wtNjMuMDMtNjMuMDNjLTMuMTItMy4xMi04LjE5LTMuMTItMTEuMzEgMGwtMTEuMzEgMTEuMzFjLTMuMTIgMy4xMi0zLjEyIDguMTkgMCAxMS4zMUwzNjEuMzggMjU2bC02My4wMyA2My4wM2MtMy4xMiAzLjEyLTMuMTIgOC4xOSAwIDExLjMxbDExLjMxIDExLjMxYzMuMTIgMy4xMiA4LjE5IDMuMTIgMTEuMzEgMEwzODQgMjc4LjYzbDYzLjAzIDYzLjAzYzMuMTIgMy4xMiA4LjE5IDMuMTIgMTEuMzEgMGwxMS4zMS0xMS4zMWMzLjEyLTMuMTIgMy4xMi04LjE5IDAtMTEuMzFMNDA2LjYzIDI1Nmw2My4wMy02My4wM2E4LjAxNSA4LjAxNSAwIDAgMCAwLTExLjMyek01NzYgNjRIMjA1LjI2QzE4OC4yOCA2NCAxNzIgNzAuNzQgMTYwIDgyLjc0TDkuMzcgMjMzLjM3Yy0xMi41IDEyLjUtMTIuNSAzMi43NiAwIDQ1LjI1TDE2MCA0MjkuMjVjMTIgMTIgMjguMjggMTguNzUgNDUuMjUgMTguNzVINTc2YzM1LjM1IDAgNjQtMjguNjUgNjQtNjRWMTI4YzAtMzUuMzUtMjguNjUtNjQtNjQtNjR6bTMyIDMyMGMwIDE3LjY0LTE0LjM2IDMyLTMyIDMySDIwNS4yNmMtOC41NSAwLTE2LjU4LTMuMzMtMjIuNjMtOS4zN0wzMiAyNTZsMTUwLjYzLTE1MC42M2M2LjA0LTYuMDQgMTQuMDgtOS4zNyAyMi42My05LjM3SDU3NmMxNy42NCAwIDMyIDE0LjM2IDMyIDMydjI1NnoiLz48L3N2Zz4K",640.005,510.642279],done:["data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDggNTEyIj48cGF0aCBmaWxsPSJ3aGl0ZSIgZD0iTTQxMy41MDUgOTEuOTUxTDEzMy40OSAzNzEuOTY2bC05OC45OTUtOTguOTk1Yy00LjY4Ni00LjY4Ni0xMi4yODQtNC42ODYtMTYuOTcxIDBMNi4yMTEgMjg0LjI4NGMtNC42ODYgNC42ODYtNC42ODYgMTIuMjg0IDAgMTYuOTcxbDExOC43OTQgMTE4Ljc5NGM0LjY4NiA0LjY4NiAxMi4yODQgNC42ODYgMTYuOTcxIDBsMjk5LjgxMy0yOTkuODEzYzQuNjg2LTQuNjg2IDQuNjg2LTEyLjI4NCAwLTE2Ljk3MWwtMTEuMzE0LTExLjMxNGMtNC42ODYtNC42ODYtMTIuMjg0LTQuNjg2LTE2Ljk3IDB6Ii8+PC9zdmc+Cg==",442.607,506.801907],shift:["data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDggNTEyIj48cGF0aCBmaWxsPSJ3aGl0ZSIgZD0iTTE4MC41NzMgNDQ4QzE2OS4yMTEgNDQ4IDE2MCA0MzguNzg5IDE2MCA0MjcuNDI4VjI1NS45OTFINDMuMDIxYy03LjEyNSAwLTEwLjY5NS04LjYxMi01LjY2LTEzLjY1M0wyMDkuNDQ0IDcwLjAzNWM4LjAzNi04LjA0NiAyMS4wNzYtOC4wNDcgMjkuMTEyIDBMNDEwLjY0IDI0Mi4zMzhjNS4wMzUgNS4wNDEgMS40NjQgMTMuNjUzLTUuNjYgMTMuNjUzSDI4OHYxNzEuNDM3QzI4OCA0MzguNzkgMjc4Ljc4OSA0NDggMjY3LjQyNyA0NDhoLTg2Ljg1NG0wIDMyaDg2Ljg1NUMyOTYuNDE2IDQ4MCAzMjAgNDU2LjQxNiAzMjAgNDI3LjQyOFYyODcuOTkxaDg0Ljk3OWMzNS41MDcgMCA1My40OTctNDMuMDQgMjguMzAyLTY4LjI2NkwyNjEuMTk4IDQ3LjQyMmMtMjAuNTUtMjAuNTc2LTUzLjg0Mi0yMC41OC03NC4zOTYgMEwxNC43MTkgMjE5LjcyNGMtMjUuMDkxIDI1LjEyMi03LjM1MSA2OC4yNjYgMjguMzAyIDY4LjI2NkgxMjh2MTM5LjQzN0MxMjggNDU2LjQxNiAxNTEuNTg0IDQ4MCAxODAuNTczIDQ4MHoiLz48L3N2Zz4K",116.965,133.929389],shiftActive:["data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDggNTEyIj48cGF0aCBmaWxsPSJ3aGl0ZSIgZD0iTTI3MiA0ODBoLTk2Yy0xMy4zIDAtMjQtMTAuNy0yNC0yNFYyNTZINDguMmMtMjEuNCAwLTMyLjEtMjUuOC0xNy00MUwyMDcgMzljOS40LTkuNCAyNC42LTkuNCAzNCAwbDE3NS44IDE3NmMxNS4xIDE1LjEgNC40IDQxLTE3IDQxSDI5NnYyMDBjMCAxMy4zLTEwLjcgMjQtMjQgMjR6Ii8+PC9zdmc+Cg==",116.965,133.929389],capsActive:["data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzODQgNTEyIj48cGF0aCBmaWxsPSJ3aGl0ZSIgZD0iTTM2MCA0ODBIMjRjLTEzLjMgMC0yNC0xMC43LTI0LTI0di0yNGMwLTEzLjMgMTAuNy0yNCAyNC0yNGgzMzZjMTMuMyAwIDI0IDEwLjcgMjQgMjR2MjRjMCAxMy4zLTEwLjcgMjQtMjQgMjR6TTI1NiAzNjBWMjI0aDg3LjdjMTcuOCAwIDI2LjctMjEuNSAxNC4xLTM0LjFMMjA1LjcgMzcuN2MtNy41LTcuNS0xOS44LTcuNS0yNy4zIDBMMjYuMSAxODkuOUMxMy41IDIwMi41IDIyLjUgMjI0IDQwLjMgMjI0SDEyOHYxMzZjMCAxMy4zIDEwLjcgMjQgMjQgMjRoODBjMTMuMyAwIDI0LTEwLjcgMjQtMjR6Ii8+PC9zdmc+Cg==",384,509.734519],space:["data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDggMTI4Ij48cGF0aCBmaWxsPSJ3aGl0ZSIgZD0iTSA0NDgsODAgViA4IGMgMCwtNC40MTgyOCAtMy41ODE3MiwtOCAtOCwtOCBoIC0xNiBjIC00LjQxODI4LDAgLTgsMy41ODE3MiAtOCw4IHYgNzIgYyAwLDguODM2NTYgLTcuMTYzNDQsMTYgLTE2LDE2IEggNDggQyAzOS4xNjM0NCw5NiAzMiw4OC44MzY1NiAzMiw4MCBWIDggQyAzMiwzLjU4MTcyIDI4LjQxODI4LDAgMjQsMCBIIDggQyAzLjU4MTcyLDAgMCwzLjU4MTcyIDAsOCB2IDcyIGMgMCwyNi41MDk2NyAyMS40OTAzMyw0OCA0OCw0OCBoIDM1MiBjIDI2LjUwOTY3LDAgNDgsLTIxLjQ5MDMzIDQ4LC00OCB6Ii8+PC9zdmc+Cg==",448,128.426666],cancel:["data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMjAgNTEyIj48cGF0aCBmaWxsPSJ3aGl0ZSIgZD0iTTE5My45NCAyNTZMMjk2LjUgMTUzLjQ0bDIxLjE1LTIxLjE1YzMuMTItMy4xMiAzLjEyLTguMTkgMC0xMS4zMWwtMjIuNjMtMjIuNjNjLTMuMTItMy4xMi04LjE5LTMuMTItMTEuMzEgMEwxNjAgMjIyLjA2IDM2LjI5IDk4LjM0Yy0zLjEyLTMuMTItOC4xOS0zLjEyLTExLjMxIDBMMi4zNCAxMjAuOTdjLTMuMTIgMy4xMi0zLjEyIDguMTkgMCAxMS4zMUwxMjYuMDYgMjU2IDIuMzQgMzc5LjcxYy0zLjEyIDMuMTItMy4xMiA4LjE5IDAgMTEuMzFsMjIuNjMgMjIuNjNjMy4xMiAzLjEyIDguMTkgMy4xMiAxMS4zMSAwTDE2MCAyODkuOTQgMjYyLjU2IDM5Mi41bDIxLjE1IDIxLjE1YzMuMTIgMy4xMiA4LjE5IDMuMTIgMTEuMzEgMGwyMi42My0yMi42M2MzLjEyLTMuMTIgMy4xMi04LjE5IDAtMTEuMzFMMTkzLjk0IDI1NnoiLz48L3N2Zz4K",319.99,510.62234]},NC=function(t){_inherits(Key,t);var r=_createSuper(Key);function Key(){return _classCallCheck(this,Key),r.apply(this,arguments)}return _createClass(Key,[{key:"label",get:function get(){return this._label},set:function set(t){this._label=t}},{key:"sprite",get:function get(){return this._sprite},set:function set(t){this._sprite=t}},{key:"value",get:function get(){return this._value},set:function set(t){this._value=t}},{key:"width",get:function get(){return this._width},set:function set(t){this._width=t}},{key:"_init",value:function _init(){var t={text:{textAlign:"center",fontSize:20,color:4294967295,text:this._label?this._label:this._value}};if(this._sprite){var r=CC[this._sprite];CC[this._sprite]?t={color:4294967295,texture:j.Tools.getSvgTexture(r[0],30,30/r[1]*r[2])}:t.text.text=this._sprite}this.patch({flexItem:{grow:this._width},Label:t})}},{key:"_focus",value:function _focus(){this.patch({Borders:{Top:{h:2,color:4294967295},Right:{w:2,color:4294967295},Bottom:{h:2,color:4294967295},Left:{w:2,color:4294967295}}})}},{key:"_unfocus",value:function _unfocus(){this.patch({Borders:{Top:{h:1,color:4283782485},Right:{w:1,color:4283782485},Bottom:{h:1,color:4283782485},Left:{w:1,color:4283782485}}})}},{key:"_handleEnter",value:function _handleEnter(){this.signal("keyPressed",{value:this.value,rowNum:this.rowNum,columnNum:this.columnNum})}},{key:"_handleHover",value:function _handleHover(){this.signal("hoverFocusModifier",{rowNum:this.rowNum,columnNum:this.columnNum,focus:!0}),this._focus()}},{key:"_handleUnhover",value:function _handleUnhover(){this.signal("hoverFocusModifier",{rowNum:this.rowNum,columnNum:this.columnNum,focus:!1}),this._unfocus()}},{key:"_handleClick",value:function _handleClick(){this._handleEnter()}}],[{key:"_template",value:function _template(){return{collision:!0,flexItem:{},Label:{x:function x(t){return t/2},y:function y(t){return t/2},mount:.5},Borders:{w:function w(t){return t},h:function h(t){return t},Top:{w:function w(t){return t},h:1,color:4283782485,rect:!0},Right:{x:function x(t){return t},y:function y(t){return t},h:function h(t){return t},w:1,color:4283782485,rect:!0,mount:1},Bottom:{x:function x(t){return t},y:function y(t){return t},w:function w(t){return t},h:1,color:4283782485,rect:!0,mount:1},Left:{h:function h(t){return t},w:1,color:4283782485,rect:!0}}}}}]),Key}(j.Component),xC=(j.Component,"JIJI::KEYBOARD::REQUEST_OPEN"),kC="JIJI::KEYBOARD::VALUE_UPDATE",wC="JIJI::KEYBOARD::CLOSE";j.Component;var OC,LC,RC,jC,PC,FC=function(t){_inherits(Input,t);var r=_createSuper(Input);function Input(){var t;_classCallCheck(this,Input);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_fontFace",null),_defineProperty(_assertThisInitialized(t),"_fontSize",40),_defineProperty(_assertThisInitialized(t),"_fontStyle","normal"),_defineProperty(_assertThisInitialized(t),"_lineHeight",null),_defineProperty(_assertThisInitialized(t),"_textColor",4290690750),_defineProperty(_assertThisInitialized(t),"_name",""),_defineProperty(_assertThisInitialized(t),"_value",""),_defineProperty(_assertThisInitialized(t),"onValueUpdate",(function(r){r.target===t.name&&(t.value=r.value)})),_defineProperty(_assertThisInitialized(t),"onKeyboardClose",(function(r){r.target===t.name&&(t.value=r.value)})),t}return _createClass(Input,[{key:"fontFace",get:function get(){return this._fontFace},set:function set(t){this._fontFace=t,this.tag("Text").patch({text:{fontFace:t}})}},{key:"fontSize",get:function get(){return this._fontSize},set:function set(t){this._fontSize=t,this.tag("Text").patch({text:{fontSize:t}})}},{key:"fontStyle",get:function get(){return this._fontStyle},set:function set(t){this._fontStyle=t,this.tag("Text").patch({text:{fontStyle:t}})}},{key:"lineHeight",get:function get(){return this._lineHeight},set:function set(t){this._lineHeight=t,this.tag("Text").patch({text:{lineHeight:t}})}},{key:"textColor",get:function get(){return this._textColor},set:function set(t){this._textColor=t,this.tag("Text").patch({text:{textColor:t}})}},{key:"name",get:function get(){return this._name},set:function set(t){this._name=t}},{key:"value",get:function get(){return this._value},set:function set(t){t!==this._value&&(this._value=t,this.tag("Text").patch({text:t}))}},{key:"_handleEnter",value:function _handleEnter(){_n.getInstance().emit(xC,{target:this.name,value:this.value})}},{key:"_active",value:function _active(){!function invariant(t,r){if(!t)throw new Error("Invariant failed")}(this._name.length>0),_n.getInstance().addEventListener(kC,this.onValueUpdate).addEventListener(wC,this.onKeyboardClose)}},{key:"_inactive",value:function _inactive(){_n.getInstance().removeEventListener(kC,this.onValueUpdate).removeEventListener(wC,this.onKeyboardClose)}}],[{key:"onUpdate",value:function onUpdate(t,r){if(r.w>r._parent.w){var i=-1*(r.w-r._parent.w);r.x!==i&&t.patch({x:i})}else 0!==r.x&&t.patch({x:0})}},{key:"_template",value:function _template(){return{w:100,h:50,color:4290690750,clipping:!0,rect:!0,Text:{onUpdate:Input.onUpdate,x:0,text:{fontSize:40,fontStyle:"normal",textColor:4278190080,verticalAlign:"middle"}}}}}]),Input}(j.Component),BC=function(t){_inherits(TextInput,t);var r=_createSuper(TextInput);function TextInput(){var t;_classCallCheck(this,TextInput);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_errorText",""),_defineProperty(_assertThisInitialized(t),"_hasError",!1),_defineProperty(_assertThisInitialized(t),"_announceInstructions",void 0),_defineProperty(_assertThisInitialized(t),"onValueUpdate",(function(r){t.cursorAnimation.isPlaying()&&(t.cursorAnimation.stop(),clearTimeout(t.timeout),t.resetTimer()),r.target===t.fieldName&&(-1===r.value?t.originalValue=t.originalValue.substring(0,t.originalValue.length-1):t.originalValue+=r.value,t._showPassword&&"password"===t.inputType||"password"!==t.inputType?t.value=t.originalValue:"password"!==t.inputType||t._showPassword||(t.value="*".repeat(t.originalValue.length)),t._errorText="",t._hasError=!1,t.fireAncestors("$updateInputValue",t.fieldName,t.originalValue))})),t}return _createClass(TextInput,[{key:"showPassword",set:function set(t){this._showPassword=t,this.value=t?this.originalValue:"*".repeat(this.originalValue.length)}},{key:"announceInstructions",get:function get(){return this._announceInstructions},set:function set(t){this._announceInstructions=t}},{key:"defaultValue",set:function set(t){this.patch({Placeholder:{visible:!1}}),this._showPassword&&"password"===this.inputType||"password"!==this.inputType?this.value=t:"password"!==this.inputType||this._showPassword||(this.value="*".repeat(t.length)),this.originalValue=t}},{key:"_init",value:function _init(){this.value="",this.originalValue="",this.toggleKeyboard=this.toggleKeyboard.bind(this),this.onValueUpdate=this.onValueUpdate.bind(this),this.cursorAnimation=this.tag("Cursor").animation({duration:.2,repeatDelay:.8,repeat:-1,stopMethod:"immediate",actions:[{p:"alpha",v:{.1:1,.2:0}}]})}},{key:"_focus",value:function _focus(){this.patch({shader:{stroke:8,strokeColor:kg.colours.primary},Cursor:{visible:!1},Placeholder:{visible:0===this.originalValue.length}})}},{key:"_unfocus",value:function _unfocus(){this._hasError?this.applyErrorStyles():this.patch({shader:{stroke:0}})}},{key:"_handleEnter",value:function _handleEnter(){_n.getInstance().emit(gA.REQUEST_OPEN,{target:this.fieldName,type:this.inputType,value:this.value,closeOnDown:this.closeKeyboardOnDown,closeOnUp:this.closeKeyboardOnUp}),Cr.focusWidget("Keyboard"),this.cursorAnimation.start(),this.patch({shader:{stroke:8,strokeColor:kg.colours.primary},Placeholder:{visible:!1},Cursor:{visible:!0}})}},{key:"_active",value:function _active(){_n.getInstance().addEventListener(gA.VALUE_UPDATE,this.onValueUpdate),_n.getInstance().addEventListener(gA.CLOSE,this.toggleKeyboard),this.placeholder&&"string"==typeof this.placeholder&&this.tag("Placeholder").patch({text:{text:this.placeholder}}),"PasswordConfirmation"===this.fieldName&&(_n.getInstance().addEventListener(gA.OPEN,this.toggleKeyboard),_n.getInstance().emit(gA.REQUEST_OPEN,{target:this.fieldName,value:"",type:this.inputType,closeOnDown:this.closeKeyboardOnDown,closeOnUp:this.closeKeyboardOnUp}),Cr.focusWidget("Keyboard"),this.cursorAnimation.start(),this.patch({shader:{stroke:8,strokeColor:kg.colours.primary},Placeholder:{visible:!1}}),this.fireAncestors("$announce",["PAUSE-0.5","Enter your password",Mg.pronounceTTS("a",this.inputType)]))}},{key:"_inactive",value:function _inactive(){this.value="",this.originalValue="",this.cursorAnimation.stop(),this.patch({Placeholder:{visible:!0}}),_n.getInstance().removeEventListener(gA.VALUE_UPDATE,this.onValueUpdate),_n.getInstance().removeEventListener(gA.OPEN,this.toggleKeyboard),_n.getInstance().removeEventListener(gA.CLOSE,this.toggleKeyboard)}},{key:"resetTimer",value:function resetTimer(){var t=this;this.timeout=setTimeout((function(){return t.cursorAnimation.start()}),3e3)}},{key:"inputDoesNotHaveError",value:function inputDoesNotHaveError(){switch(this.inputType){case"email":return/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(this.originalValue);case"password":var t=" "===this.originalValue[this.originalValue.length-1];return this.originalValue.length>=6&&/[^A-Za-z]/.test(this.originalValue)&&!t;default:return""!==this.originalValue.trim()}}},{key:"applyErrorStyles",value:function applyErrorStyles(){this.patch({shader:{stroke:8,strokeColor:kg.colours.red500}})}},{key:"getErrorMessage",value:function getErrorMessage(){if(this.customErrorMessage)return this.customErrorMessage;switch(this.inputType){case"email":return"Please enter a valid address";case"password":return"Your password needs to be at least 6 characters long, include a number or special character and not have trailing spaces";default:return"This field cannot be empty"}}},{key:"handleInputError",value:function handleInputError(t){t&&this.applyErrorStyles(),this._errorText=this.getErrorMessage();var r="Error: ".concat(this._errorText);this.fireAncestors("$announce",r),this.fireAncestors("$handleInputError",this.fieldName,this._errorText)}},{key:"checkForErrors",value:function checkForErrors(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!this.shouldInputBeValidated||this.inputDoesNotHaveError()||Cr.isNavigating()||(this._hasError=!0,this.handleInputError(t))}},{key:"toggleKeyboard",value:function toggleKeyboard(t){var r=t.open,i=t.target,a=t.direction;r?this.patch({Cursor:{visible:!0}}):r||i!==this.fieldName||this.checkForErrors("up"!==a)}},{key:"announce",get:function get(){var t=this,r=(!this.originalValue||""===this.originalValue)&&this.placeholder&&"string"==typeof this.placeholder,i=this.announceInstructions&&""===this.originalValue?_toConsumableArray(this.announceInstructions):"",a=this._showPassword?Mg.pronounceTTS(this.originalValue,this.inputType):"",u="Error: ".concat(this._errorText),l=""!==this._errorText?u:i;return r?"".concat(this.placeholder,", ").concat(l):function ttsText(){switch(t.inputType){case"email":return"\n          Email field,\n          ".concat(l,",\n          ").concat(t.originalValue,"\n        ");case"password":return"\n          Password field,\n          ".concat(l,",\n          ").concat(a,"\n        ");default:return"\n          Text input field,\n          ".concat(l,",\n          ").concat(t.originalValue,"\n        ")}}()}}],[{key:"_template",value:function _template(){return{w:664,h:86,rect:!0,color:kg.colours.mutedBlue500,shader:{type:j.shaders.RoundedRectangle},flex:{direction:"row",alignItems:"center",justifyContent:"flex-start",paddingLeft:30},Text:{shader:null,onUpdate:TextInput.onUpdate,text:_objectSpread2(_objectSpread2({},kg.TextStyles.bodyCopy),{},{lineHeight:0,wordWrapWidth:620,wordWrap:!1,maxLinesSuffix:"...",textOverflow:"ellipsis"})},Placeholder:{shader:null,color:kg.colours.mutedBlue200,text:_objectSpread2(_objectSpread2({},kg.TextStyles.bodyCopy),{},{lineHeight:0,wordWrapWidth:1590,wordWrap:!1,textOverflow:"ellipsis"})},Cursor:{w:4,h:42,visible:!1,rect:!0,color:kg.colours.white500,shader:{type:j.shaders.RoundedRectangle,radius:3}}}}}]),TextInput}(FC),UC=function(t){_inherits(PasswordInputRow,t);var r=_createSuper(PasswordInputRow);function PasswordInputRow(){return _classCallCheck(this,PasswordInputRow),r.apply(this,arguments)}return _createClass(PasswordInputRow,[{key:"height",get:function get(){return 86}},{key:"inputType",get:function get(){return"password"}},{key:"_init",value:function _init(){this._index=0}},{key:"announceInstructions",set:function set(t){this.tag("TextInput").patch({announceInstructions:t})}},{key:"defaultValue",set:function set(t){this.tag("TextInput").defaultValue=t}},{key:"_active",value:function _active(){var t;this.tag("TextInput").patch({closeKeyboardOnUp:this.closeKeyboardOnUp,closeKeyboardOnDown:this.closeKeyboardOnDown,shouldInputBeValidated:this.shouldInputBeValidated,fieldName:null!==(t=this.fieldName)&&void 0!==t?t:"Password",customErrorMessage:this.customErrorMessage}),this.placeholder&&"string"==typeof this.placeholder&&this.tag("TextInput").patch({placeholder:this.placeholder})}},{key:"_inactive",value:function _inactive(){this._index=0}},{key:"_handleLeft",value:function _handleLeft(){return this._index>0&&(this._index-=1),!0}},{key:"_handleRight",value:function _handleRight(){return this._index<1&&(this._index+=1),!0}},{key:"_getFocused",value:function _getFocused(){return 0===this._index?this.tag("TextInput"):this.tag("ShowPasswordButton")}},{key:"handleToggleShowPassword",value:function handleToggleShowPassword(t){this.tag("TextInput").patch({showPassword:t})}}],[{key:"_template",value:function _template(){return{w:function w(t){return t},h:86,Container:{w:function w(t){return t},h:86,shader:null,flex:{direction:"row",alignItems:"center"},TextInput:{w:function w(t){return t-96-30},type:BC,inputType:"password"},ShowPasswordButton:{flexItem:{marginLeft:20},type:AC,signals:{_handleToggleShowPassword:"handleToggleShowPassword"}}}}}}]),PasswordInputRow}(j.Component),zC=function(t){_inherits(PasswordConfirmation,t);var r=_createSuper(PasswordConfirmation);function PasswordConfirmation(){return _classCallCheck(this,PasswordConfirmation),r.apply(this,arguments)}return _createClass(PasswordConfirmation,[{key:"title",set:function set(t){this.tag("Title").patch({text:{text:t}})}},{key:"buttons",set:function set(t){this.tag("Buttons").patch({items:t})}},{key:"errorText",set:function set(t){this.tag("Error").patch({text:{text:t}})}},{key:"_init",value:function _init(){this._index=0}},{key:"_inactive",value:function _inactive(){this._index=0}},{key:"_handleUp",value:function _handleUp(){return this._index>0&&(this._index-=1),!0}},{key:"_handleDown",value:function _handleDown(){return this._index<1&&(this._index+=1),!0}},{key:"_getFocused",value:function _getFocused(){return 0===this._index?this.tag("PasswordInputRow"):this.tag("Buttons")}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,color:kg.colours.darkBlue500,rect:!0,flex:{alignItems:"center",justifyContent:"center",direction:"column"},Title:{text:_objectSpread2({text:""},kg.TextStyles.h1)},PasswordInputRow:{type:UC,closeKeyboardOnDown:!1,w:772,fieldName:"PasswordConfirmation",flexItem:{marginBottom:48}},ButtonsWrapper:{h:QA.height-72+48,x:-(sI.width+sI.offset/2),y:-72,Buttons:{type:QA}},Error:{text:_objectSpread2(_objectSpread2({},kg.TextStyles.bodyCopy),{},{lineHeight:42,textAlign:"center",text:"",textColor:kg.colours.verificationFailed})}}}}]),PasswordConfirmation}(j.Component),YC=function(t){_inherits(PinInput,t);var r=_createSuper(PinInput);function PinInput(){return _classCallCheck(this,PinInput),r.apply(this,arguments)}return _createClass(PinInput,[{key:"focus",set:function set(t){this._focused=t,this.patch({shader:{strokeColor:this._focused?kg.colours.lightBlue50:kg.colours.darkBlue500}})}},{key:"text",set:function set(t){this.tag("Text").patch({text:{text:t}})}}],[{key:"_template",value:function _template(){return{w:94,h:94,rect:!0,color:kg.colours.mutedBlue500,shader:{type:j.shaders.RoundedRectangle,stroke:8},flex:{direction:"row",alignItems:"center",justifyContent:"center"},Text:{shader:null,text:_objectSpread2(_objectSpread2({},kg.TextStyles.bodyCopy),{},{text:"",lineHeight:0})}}}},{key:"width",get:function get(){return 94}},{key:"height",get:function get(){return 94}},{key:"offset",get:function get(){return 20}}]),PinInput}(j.Component),GC=function(t){_inherits(PasswordInputRow,t);var r=_createSuper(PasswordInputRow);function PasswordInputRow(){var t;_classCallCheck(this,PasswordInputRow);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"onValueUpdate",(function(r){_n.getInstance().emit("PIN:UPDATE",{value:r.value}),-1===r.value?t._index>0&&(t._index-=1,t.tag("Items").children[t._index+1].focus=!1,t.tag("Items").children[t._index].focus=!0,t.tag("Items").children[t._index].text=""):t._index<3?(t._index+=1,t.tag("Items").children[t._index-1].focus=!1,t.tag("Items").children[t._index].focus=!0,t.tag("Items").children[t._index-1].text="*"):(t.tag("Items").children[t._index].text="*",_n.getInstance().emit("PIN:SUBMIT"))})),t}return _createClass(PasswordInputRow,[{key:"height",get:function get(){return YC.height}},{key:"_construct",value:function _construct(){this._index=0}},{key:"_init",value:function _init(){var t=this;this.resetPin=this.resetPin.bind(this),this.onValueUpdate=this.onValueUpdate.bind(this);var r=[0,1,2,3].map((function(r){return{type:YC,index:r,focus:r===t._index,x:r*(YC.width+YC.offset)}}));this.tag("Items").children=r}},{key:"_active",value:function _active(){_n.getInstance().addEventListener(gA.VALUE_UPDATE,this.onValueUpdate),_n.getInstance().addEventListener("PIN:RESET",this.resetPin)}},{key:"_inactive",value:function _inactive(){this._index=0,_n.getInstance().removeEventListener(gA.VALUE_UPDATE,this.onValueUpdate),_n.getInstance().removeEventListener("PIN:RESET",this.resetPin)}},{key:"resetPin",value:function resetPin(){this._index=0,this.tag("Items").children[0].focus=!0,this.tag("Items").children[1].focus=!1,this.tag("Items").children[2].focus=!1,this.tag("Items").children[3].focus=!1,this.tag("Items").children[0].text="",this.tag("Items").children[1].text="",this.tag("Items").children[2].text="",this.tag("Items").children[3].text=""}}],[{key:"_template",value:function _template(){return{w:436,h:YC.height+72,Items:{y:72}}}}]),PasswordInputRow}(j.Component),HC=function(t){_inherits(PasswordConfirmation,t);var r=_createSuper(PasswordConfirmation);function PasswordConfirmation(){return _classCallCheck(this,PasswordConfirmation),r.apply(this,arguments)}return _createClass(PasswordConfirmation,[{key:"title",set:function set(t){this.tag("Title").patch({text:{text:t}})}},{key:"description",set:function set(t){this.tag("Description").patch({text:{text:t}})}}],[{key:"_template",value:function _template(){return{w:778,h:324,color:kg.colours.darkBlue500,rect:!0,flex:{alignItems:"center",justifyContent:"center",direction:"column"},Title:{text:_objectSpread2(_objectSpread2({},kg.TextStyles.h1),{},{text:""})},Description:{y:24,text:_objectSpread2(_objectSpread2({},kg.TextStyles.featuredCopy),{},{text:""})},PinInputRow:{type:GC}}}}]),PasswordConfirmation}(j.Component),QC=function(t){_inherits(RatingButton,t);var r=_createSuper(RatingButton);function RatingButton(){return _classCallCheck(this,RatingButton),r.apply(this,arguments)}return _createClass(RatingButton,[{key:"item",get:function get(){return this._item||{}},set:function set(t){this._item=t;var r=this._item,i=r.callback,a=r.text;this.callback=i,this.tag("Label").patch({text:{text:a}}),this.patch({Borders:{shader:{radius:5,strokeColor:"none"}}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(RatingButton.prototype),"_unfocus",this).call(this),this.patch({Borders:{color:"none",shader:{strokeColor:"none"}},Label:{text:{textColor:kg.colours.lightBlue50}}})}},{key:"announce",get:function get(){return"rated ".concat(this.tag("Label").text.text)}}],[{key:"width",get:function get(){return 436}},{key:"height",get:function get(){return 90}},{key:"offset",get:function get(){return 20}}]),RatingButton}(sI),VC=function(t){_inherits(SearchInput,t);var r=_createSuper(SearchInput);function SearchInput(){var t;_classCallCheck(this,SearchInput);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"onValueUpdate",(function(r){t.cursorAnimation.isPlaying()&&(t.cursorAnimation.stop(),clearTimeout(t.timeout),t.resetTimer()),r.target===t.name&&(-1===r.value?t.value=t.value.substr(0,t.value.length-1):t.value+=r.value,t.signal("_handleSearch",t.value))})),t}return _createClass(SearchInput,[{key:"isFocused",set:function set(t){this.patch({Container:{Icon:{w:t?56:40,h:t?56:40}}}),this.showText(t)}},{key:"currentValue",get:function get(){return this.value},set:function set(t){this.value=t}},{key:"recentSearchStatus",set:function set(t){this._recentSearchStatus=t}},{key:"announce",get:function get(){return"\n      Search bar focused, press enter to open keyboard.\n      ".concat(this._recentSearchStatus?"or press down for recent searches.":"","\n    ")}},{key:"_init",value:function _init(){this.cursorAnimation=this.tag("Cursor").animation({duration:.2,repeatDelay:.8,repeat:-1,stopMethod:"immediate",actions:[{p:"alpha",v:{.1:1,.2:0}}]})}},{key:"_active",value:function _active(){_n.getInstance().addEventListener(gA.VALUE_UPDATE,this.onValueUpdate)}},{key:"_inactive",value:function _inactive(){_n.getInstance().removeEventListener(gA.VALUE_UPDATE,this.onValueUpdate)}},{key:"showText",value:function showText(t){t&&this.cursorAnimation.start(),this.tag("Container").patch({Placeholder:{visible:!t&&""===this.value},TextContainer:{Text:{visible:t||""!==this.value},Cursor:{visible:t}}})}},{key:"resetTimer",value:function resetTimer(){var t=this;this.timeout=setTimeout((function(){t.cursorAnimation.start()}),3e3)}},{key:"resetInput",value:function resetInput(){this.value="",this.signal("_handleSearch",this.value),this.showText(!1)}}],[{key:"_template",value:function _template(){return{w:1690,h:96,flex:{paddingTop:48},Container:{w:function w(t){return t},h:function h(t){return t},shader:null,flex:{direction:"row",alignItems:"center"},Icon:{w:40,h:40,texture:j.Tools.getSvgTexture(xI,40,40),color:kg.colours.naturalLight500,flexItem:{marginRight:24,marginBottom:15}},Placeholder:{text:_objectSpread2(_objectSpread2({text:"Search"},kg.TextStyles.h1),{},{textColor:kg.colours.naturalLight500,lineHeight:0})},TextContainer:{h:function h(t){return t},flex:{direction:"row",alignItems:"center"},Text:{visible:!1,onUpdate:SearchInput.onUpdate,text:_objectSpread2(_objectSpread2({},kg.TextStyles.h1),{},{lineHeight:0,wordWrapWidth:1590,wordWrap:!1,textOverflow:"ellipsis"})},Cursor:{y:-5,w:8,h:70,visible:!1,rect:!0,color:kg.colours.white500,shader:{type:j.shaders.RoundedRectangle,radius:3}}}}}}},{key:"height",get:function get(){return 96}}]),SearchInput}(FC),WC=function componentMapper(t,r){var i,a,u,l,c,d,g,p,m,v,b,M,S,E,I=t.template,D=!1;switch(I){case"H1":var A=RD(t);if(!A.items.length)return null;a=A.items,S=null!=A&&A.autoCycle?null==A?void 0:A.autoCycle:10,i=KA;break;case"H9":a=[QD(t)],i=function shapeH9(t){var r=new URLSearchParams(t),i=1692,a=912;if(r.has("Width")&&(i=Number(r.get("Width"))),r.has("Height")&&(a=Number(r.get("Height"))),a>912){var u=i/a;a=912,i=Math.ceil(a*u)}if(i>1920){var l=a/i;a=Math.ceil(1920*l),i=1920}var c={height:a,width:i,offset:i<1920?(1920-i)/2:0};return function(t){_inherits(Hero,t);var r=_createSuper(Hero);function Hero(){return _classCallCheck(this,Hero),r.apply(this,arguments)}return _createClass(Hero,[{key:"backgroundImage",set:function set(t){if($E({ref:this,width:300,height:113,skipAnim:!1}),t){var r=Mg.reformatImageSrc(t,{railFormat:!0});this.patch({Image:{texture:Img(r).cover(c.width,c.height)}})}}}],[{key:"width",get:function get(){return c.width}},{key:"height",get:function get(){return this.imageHeight+72}},{key:"imageHeight",get:function get(){return c.height}},{key:"offset",get:function get(){return c.offset}}]),Hero}(qA)}(d=PE("",["images","custom"],t)||PE("",["images","hero7x1"],t)||PE("",["images","wallpaper"],t)||PE("",["images","hero3x1"],t));break;case"Heading":case"H10":case"H11":var C=QD(t);if(!C.text)return null;a=[C],i=XA;break;case"Image Header Live":var N=tA(t,r);if(!N)return null;a=[N],i=yC,D=!0;break;case"Editorial Image":var k=nA(t,r);if(!k)return null;a=[k],i=vC,E=k.height,D=!0;break;case"Editorial Text":var O=ND(t,r);if(!O)return null;a=[O],i=_C,E=O.height,D=!0;break;case"PR1":var L=kD(t);if(!L)return null;a=[L],i=oI;break;case"BBCTHA1":case"D91":case"2:3 Poster (Standard)":case"P1":a=PD(t),i=zA,u=PE("",["title"],t),m=PE("",["list","tagline"],t),l=PE("",["path"],t.list);break;case"P2":a=PD(t),i=JA,u=PE("",["title"],t),m=PE("",["list","tagline"],t),l=PE("",["path"],t.list);break;case"PB2":a=PD(t),i=eC,u=PE("",["title"],t),m=PE("",["list","tagline"],t),c=PE("",["list","themes",0,"colors",0,"value"],t),p=PE("",["list","title"],t),m=PE("",["list","tagline"],t),g=PE("",["list","images","custom"],t);break;case"PB4":a=PD(t),i=tC,d=PE("",["list","images","wallpaper"],t),c=PE("",["list","themes",0,"colors",0,"value"],t),g=PE("",["list","images","custom"],t),u=PE("",["title"],t),m=PE("",["list","tagline"],t);break;case"S1":a=zD(t),i=nC,u=PE("",["title"],t),m=PE("",["list","tagline"],t),l=PE("",["path"],t.list);break;case"S2":a=zD(t),i=aC,u=PE("",["title"],t),m=PE("",["list","tagline"],t),l=PE("",["path"],t.list);break;case"BBCTHA2":case"D90":case"16:9 Tile (Standard)":case"T1":a=OD(t),i=sC,u=PE("",["title"],t),m=PE("",["list","tagline"],t),l=PE("",["path"],t.list);break;case"T2":a=OD(t),i=LA,u=PE("",["title"],t),m=PE("",["list","tagline"],t),l=PE("",["path"],t.list);break;case"T3":a=OD(t),i=uC,u=PE("",["title"],t),m=PE("",["list","tagline"],t),l=PE("",["path"],t.list);break;case"TB2":a=OD(t),i=lC,u=PE("",["title"],t),d=PE("",["list","images","wallpaper"],t),c=PE("",["list","themes",0,"colors",0,"value"],t),p=PE("",["list","title"],t),m=PE("",["list","tagline"],t),g=PE("",["list","images","custom"],t);break;case"TB4":a=OD(t),i=cC,u=PE("",["title"],t),m=PE("",["list","tagline"],t),g=PE("",["list","images","custom"],t),d=PE("",["list","images","wallpaper"],t),c=PE("",["list","themes",0,"colors",0,"value"],t);break;case"TX1":a=BD(t),i=fC,u=PE("",["title"],t),m=PE("",["list","tagline"],t);break;case"U1":a=PD(t),i=gC,u=PE("",["title"],t),m=PE("",["list","tagline"],t),v=PE("",["list","id"],t);break;case"U2":a=OD(t),i=mC,u=PE("",["title"],t),m=PE("",["list","tagline"],t),v=PE("",["list","id"],t);break;case"AP":a=GD(t),i=VI,u=PE("",["title"],t);break;case"DH1":a=[WD(t,r.item,r.key)],i=WA;break;case"D3":var R=XD(t,r.item,r.key);if(!R)return null;a=[R],i=PA;break;case"D4":var j=PE([],["item","trailers"],r),B=PE([],["item","show","trailers"],r),U=[].concat(_toConsumableArray(j),_toConsumableArray(B)),z=PE("overlay",["customFields","assetTitlePosition"],t);a=OD({customFields:{assetTitlePosition:z},list:{items:U},template:"T2"}),i=FA;break;case"D4VAM":var Y=PE([],["item","vams"],r),G=PE([],["item","show","vams"],r),H=[].concat(_toConsumableArray(Y),_toConsumableArray(G)),Q=PE("overlay",["customFields","assetTitlePosition"],t);a=OD({customFields:{assetTitlePosition:Q},list:{items:H},template:"T2"}),u=PE("",["title"],t),i=LA;break;case"D5":a=PE([],["list","items"],t),u=PE("",["title"],t),i=BA;break;case"D6":a=PD(t),u=PE("",["title"],t),i=YA;break;case"D8":a=KD(r.item),i=HA;break;case"CS5":a=OD({customFields:{assetTitlePosition:"below"},list:r.list}),b=PE({},["list","paging"],r),m=PE("",["list","tagline"],t),v=PE({},["list","id"],r),M=PE(0,["list","size"],r),i=NA;break;default:return null}return a.length>=24&&l&&(a=[].concat(_toConsumableArray(a),[{path:l,isViewAll:!0}])),{items:a,type:i,heading:u,backgroundColour:c,backgroundImage:d,customImage:g,title:p,tagline:m,pageId:v,paging:b,size:M,autoCycle:S,hideMenuBar:D,template:I,height:E}},$C=function(t){_inherits(Results,t);var r=_createSuper(Results);function Results(){return _classCallCheck(this,Results),r.apply(this,arguments)}return _createClass(Results,[{key:"resetResults",value:function resetResults(){this._index=0,this.tag("Items").y=0,this.tag("NoResults").visible=!1}},{key:"content",set:function set(t){var r=0;if("none"!==t){var i=t.map((function(t){return WC(t)})).filter((function(t){return t&&t.items.length>0})).map((function(t){var i=t;return i.y=r,r+=i.type.height,i}));this.tag("Items").children=i,this.tag("NoResults").visible=!this.hasResults,this.fireAncestors("$announce",["PAUSE-0.75",this.hasResults?"Press down for search results":"No results found"])}else this.tag("Items").children=[]}},{key:"activeItem",get:function get(){return this.tag("Items").children[this._index]}},{key:"hasResults",get:function get(){return this.tag("Items").children.length>0}},{key:"railCount",get:function get(){return this.tag("Items").children.length}},{key:"_init",value:function _init(){this._index=0}},{key:"_animateToSelected",value:function _animateToSelected(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._index,r=-this.activeItem.finalY;t>0&&(r+=t===this.railCount-1&&this.railCount>2?530:280),this.tag("Items").setSmooth("y",this.railCount>2?r:-40)}},{key:"focusItem",value:function focusItem(t){this._index+=t,this._animateToSelected()}},{key:"_handleUp",value:function _handleUp(){return this._index>0?(this.focusItem(-1),!0):(0===this._index&&this.tag("Items").setSmooth("y",-this.activeItem.finalY),this.signal("_handleFocus"),!0)}},{key:"_handleDown",value:function _handleDown(){return this._index<this.tag("Items").children.length-1&&(this.focusItem(1),!0)}},{key:"_getFocused",value:function _getFocused(){return this.tag("Items").children[this._index]}}],[{key:"_template",value:function _template(){return{w:function w(t){return t},h:function h(t){return t},Items:{flex:{direction:"column"}},NoResults:{w:1690,h:400,visible:!1,flex:{alignItems:"center",justifyContent:"center"},Text:{text:_objectSpread2(_objectSpread2({},kg.TextStyles.h1),{},{text:"No results found",lineHeight:0,textAlign:"center"})}}}}}]),Results}(j.Component),KC=function(t){_inherits(RecentSearchesItem,t);var r=_createSuper(RecentSearchesItem);function RecentSearchesItem(){return _classCallCheck(this,RecentSearchesItem),r.apply(this,arguments)}return _createClass(RecentSearchesItem,[{key:"label",set:function set(t){this._label=t,this.tag("Text").text=t}},{key:"_handleEnter",value:function _handleEnter(){_n.getInstance().emit("RECENT:SEARCH",this._label)}},{key:"_focus",value:function _focus(){this.patch({color:kg.colours.lightBlue500,Text:{color:kg.colours.darkBlue500}})}},{key:"_unfocus",value:function _unfocus(){this.patch({color:"none",Text:{color:kg.colours.white500}})}},{key:"announce",get:function get(){return this._label}}],[{key:"_template",value:function _template(){return{w:RecentSearchesItem.width,h:RecentSearchesItem.height,rect:!0,color:"none",shader:{type:j.shaders.RoundedRectangle,radius:6},flex:{alignItems:"center"},Text:{flexItem:{marginLeft:28},text:_objectSpread2(_objectSpread2({},kg.TextStyles.ctaLabel),{},{text:"",lineHeight:0})}}}},{key:"width",get:function get(){return 550}},{key:"height",get:function get(){return 74}}]),RecentSearchesItem}(j.Component),qC=function(t){_inherits(RecentSearches,t);var r=_createSuper(RecentSearches);function RecentSearches(){return _classCallCheck(this,RecentSearches),r.apply(this,arguments)}return _createClass(RecentSearches,[{key:"_init",value:function _init(){var t=this;this._index=0,this.focusedItem="Items",this.tag("ClearButton").item={text:"Clear",tts:"Clear recent searches",callback:function callback(){return t.clearRecentSearches()}}}},{key:"_active",value:function _active(){this.reloadItems()}},{key:"_getFocused",value:function _getFocused(){return"Button"===this.focusedItem?this.tag("ClearButton"):this.tag("Items").children[this._index]}},{key:"_handleUp",value:function _handleUp(){return"Items"===this.focusedItem&&0===this._index?(this.focusedItem="Button",!0):this._index>0?(this._index-=1,!0):(this.signal("_handleFocus"),this.focusedItem="Items",!0)}},{key:"_handleDown",value:function _handleDown(){return"Button"===this.focusedItem?(this.focusedItem="Items",!0):this._index<this.tag("Items").children.length-1&&(this._index+=1,!0)}},{key:"isVisible",get:function get(){return this._isVisible},set:function set(t){this._isVisible=t,t&&this.reloadItems(),this.patch({Container:{visible:t},Items:{visible:t}})}},{key:"items",set:function set(t){var r=t.map((function(t){return{type:KC,label:t}}));this.tag("Items").children=r}},{key:"clearRecentSearches",value:function clearRecentSearches$1(){GE(),this.isVisible=!1,this.signal("_handleFocus")}},{key:"reloadItems",value:function reloadItems(){this.items=QE()}},{key:"resetDefaultVisibility",value:function resetDefaultVisibility(){this.isVisible=QE().length>0}},{key:"announce",get:function get(){return this.tag("Title").text.text}}],[{key:"_template",value:function _template(){return{flex:{direction:"column"},Container:{w:1690,flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},Title:{text:{text:"Recent searches"}},ClearButton:{type:sI}},Items:{flex:{direction:"column"}}}}}]),RecentSearches}(j.Component),XC=function(t){_inherits(Basic,t);var r=_createSuper(Basic);function Basic(){return _classCallCheck(this,Basic),r.apply(this,arguments)}return _createClass(Basic,[{key:"icon",set:function set(t){var r=t.img,i=t.w,a=t.h;this.tag("Icon").patch({w:i,h:a,texture:j.Tools.getSvgTexture(r,i,a)})}},{key:"title",set:function set(t){this.tag("Title").patch({text:{text:t}})}},{key:"description",set:function set(t){this.tag("Description").patch({text:{text:t}})}}],[{key:"_template",value:function _template(){return{w:function w(t){return t},h:function h(t){return t},flex:{direction:"column",alignItems:"center",justifyContent:"center"},Title:{text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.h2),{},{textAlign:"center",verticalAlign:"center",textColor:kg.colours.white500,lineHeight:0})},Icon:{flexItem:{marginTop:32,marginBottom:32}},Description:{w:500,text:_objectSpread2(_objectSpread2({text:"",textAlign:"center",verticalAlign:"center",textColor:kg.colours.white500},kg.TextStyles.bodyCopy),{},{lineHeight:42})}}}}]),Basic}(j.Component),ZC=function(t){_inherits(SubscriptionPlan,t);var r=_createSuper(SubscriptionPlan);function SubscriptionPlan(){return _classCallCheck(this,SubscriptionPlan),r.apply(this,arguments)}return _createClass(SubscriptionPlan,[{key:"_init",value:function _init(){this.resetCheckmark=this.resetCheckmark.bind(this)}},{key:"title",set:function set(t){this.tag("Title").patch({text:{text:t}})}},{key:"subTitle",set:function set(t){t&&this.tag("SubTitle").patch({text:{text:t}})}},{key:"retailPrice",set:function set(t){this.tag("Price").patch({text:{text:"$".concat(t)}})}},{key:"checkmark",set:function set(t){this.tag("Checkmark").patch({color:t?kg.colours.lightBlue500:kg.colours.mutedGrey500,Icon:{visible:t}})}},{key:"resetCheckmark",value:function resetCheckmark(){this.checkmark=!1}},{key:"_active",value:function _active(){_n.getInstance().addEventListener("RESET::CHECKMARK",this.resetCheckmark)}},{key:"_inactive",value:function _inactive(){_n.getInstance().removeEventListener("RESET::CHECKMARK",this.resetCheckmark)}}],[{key:"_template",value:function _template(){return{w:function w(t){return t},h:function h(t){return t},flex:{direction:"column"},TitleContainer:{flex:{paddingTop:24,paddingLeft:34,direction:"row",alignItems:"center"},Checkmark:{w:47,h:47,rect:!0,color:kg.colours.mutedGrey500,shader:{type:j.shaders.RoundedRectangle,radius:23.5},flex:{alignItems:"center",justifyContent:"center"},Icon:{visible:!1,color:kg.colours.white500,texture:j.Tools.getSvgTexture(vI,24,17)}},Title:{h:47,text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.h2),{},{paddingLeft:24,verticalAlign:"top",textColor:kg.colours.white500,lineHeight:0})}},SubTitle:{w:482,flexItem:{marginLeft:34,marginTop:10},text:_objectSpread2({text:"",textColor:kg.colours.white500},kg.TextStyles.featuredCopy)},RetailPrice:{h:function h(t){return t},flex:{paddingLeft:34,alignItems:"flex-end"},Price:{flexItem:{marginBottom:16},text:_objectSpread2({text:"",textColor:kg.colours.white500},kg.TextStyles.h1)}},TaxesText:{flexItem:{marginLeft:34,marginBottom:100},text:_objectSpread2({text:"(Taxes apply)",textColor:kg.colours.white500},kg.TextStyles.smallCopy)}}}}]),SubscriptionPlan}(j.Component),JC=function(t){_inherits(SquareButton,t);var r=_createSuper(SquareButton);function SquareButton(){return _classCallCheck(this,SquareButton),r.apply(this,arguments)}return _createClass(SquareButton,[{key:"item",get:function get(){return this._item||{}},set:function set(t){var r=this;this._item=t;var i=this._item,a=i.callback,u=i.description,l=i.icon,c=i.subTitle,d=i.title,g=i.type,p=i.retailPrice,m=i.checkmark;if("subscription"===g)this.announceInstructions=[d,c,"".concat(p)],this.tag("Container").patch({Info:{type:ZC,title:d,subTitle:c,retailPrice:p,checkmark:m}}),this.callback=function(){a(),r.tag("Info").checkmark=!0};else this.callback=a,this.announceInstructions=[d,u],this.tag("Container").patch({Info:{type:XC,icon:l,title:d,description:u}})}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(SquareButton.prototype),"_focus",this).call(this),this.tag("Borders").patch({Top:{h:8},Right:{w:8},Bottom:{h:8},Left:{w:8}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(SquareButton.prototype),"_unfocus",this).call(this),this.tag("Borders").patch({Top:{h:0},Right:{w:0},Bottom:{h:0},Left:{w:0}})}}],[{key:"_template",value:function _template(){return{w:SquareButton.width,h:SquareButton.height,rect:!0,color:kg.colours.mutedBlue500,Borders:KE(SquareButton.width,SquareButton.height),Container:{w:SquareButton.width,h:SquareButton.height}}}},{key:"width",get:function get(){return 550}},{key:"height",get:function get(){return 400}},{key:"offset",get:function get(){return 32}}]),SquareButton}(sI),eN=function resolveError(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=Mg.errorMapper((null==t?void 0:t.message)||t);Mg._errorStream$.next(i),r&&Cr.navigate("error",{redirect:r})},tN="hls",rN="dash",nN="smooth",iN="native",aN="unknown",oN="AVP",sN="VideoPlayer",uN=function(){function Utils(){_classCallCheck(this,Utils)}return _createClass(Utils,null,[{key:"detectFormat",value:function detectFormat(t){switch(new URL(t).pathname.split(".").pop().toLowerCase()){case"m3u8":return tN;case"mpd":return rN;case"ism":case"isml":case"ismv":case"ism/manifest":case"isml/manifest":return nN;case"mp4":case"mov":case"m4v":case"mp3":case"aac":return iN;default:return aN}}},{key:"detectPlayer",value:function detectPlayer(){return!0==("function"==typeof AVPlayer)?oN:sN}}]),Utils}(),lN={adsEnabled:!1,playing:!1,_playingAds:!1,get playingAds(){return this._playingAds},set playingAds(t){this._playingAds!==t&&(this._playingAds=t,fN(!0===t?"AdStart":"AdEnd"))},skipTime:!1,playAfterSeek:null,playerState:{status:0,duration:0,currentTime:0}},cN={play:function play(){lN.playing=!0},playing:function playing(){lN.playing=!0},pause:function pause(){lN.playing=!1},seeked:function seeked(){lN.playAfterSeek&&yN.play(),lN.playAfterSeek=null}},dN=function deconstructor(){RC&&RC.Ag_vod_close()},fN=function fireOnConsumer(t,r){var i=t.toLowerCase();OC&&OC[i]&&OC[i]instanceof Function&&OC[i]({currentTime:lN.playerState.currentTime}),hN(i,r),LC&&(LC.fire("$videoPlayer"+t,r,lN.playerState.currentTime),LC.fire("$videoPlayerEvent",t,r,lN.playerState.currentTime))},hN=function fireHook(t,r){cN[t]&&cN[t]instanceof Function&&cN[t].call(null,t,r)},gN=function playerState(){jC&&clearTimeout(jC);var t=Object.assign({},lN.playerState),r={status:RC.Ag_vod_getStatus(),duration:RC.Ag_vod_getTotalTime(),currentTime:RC.Ag_vod_getCurrentTime()};switch(lN.playerState=r,!0){case[1,3].includes(r.status)&&[1,3].includes(t.status):fN("TimeUpdate");break;case[1,3].includes(r.status)&&[4,5].includes(t.status):fN("Seeked");break;case 1===r.status&&1!==t.status:fN("Playing");break;case 2===r.status&&2!==t.status:fN("Pause");break;case 3===r.status&&3!==t.status:fN("Playing");break;case[4,5].includes(r.status):fN("Seeking");break;case 0===r.status&&0!==t.status:return void fN("Ended");case 8===r.status&&8!==t.status:return void fN("Error")}switch(!0){case 0===t.duration&&r.duration>0:fN("LoadedData"),fN("DurationChange",{duration:r.duration});break;case 0===r.duration&&r.duration!==t.duration:return void fN("Ended");case r.duration!==t.duration:fN("DurationChange",{duration:r.duration})}jC=setTimeout(playerState,1e3)},pN=function loader(t,r){return new Promise((function(i){if(RC&&mN(),(RC=new AVPlayer).Ag_network_setNTPServer("pool.ntp.org"),RC.Ag_time_sycToNTP(),RC.Ag_vod_setProtocol(2),RC.Ag_vod_setType(9),RC.Ag_vod_app_select_bitrate(63e4,1e8),window.addEventListener("unload",dN),window.addEventListener("beforeunload",dN),uN.detectFormat(t)===iN)RC.Ag_vod_setType(0);else RC.Ag_vod_app_setStartMsg(0,1,1);var a=r.protectionData&&r.protectionData["com.microsoft.playready"]&&r.protectionData["com.microsoft.playready"].serverUrl||null,u=r.protectionData&&r.protectionData["com.microsoft.playready"]&&r.protectionData["com.microsoft.playready"].token||null;a&&u&&(RC.Ag_playready_setCustomData("<CustomData>"+u+"</CustomData>"),RC.Ag_playready_setCustomData("<LA_URL>"+a+"</LA_URL>")),r.debug&&(window.player=RC),fN("LoadStart");var l=r.startPosition||0;l>0?RC.Ag_vod_playPos(t,1e3*l):RC.Ag_vod_play(t),0===RC.Ag_vod_getStatus()&&(fN("LoadedMetadata"),fN("CanPlay")),jC=setTimeout(gN,1e3),i()}))},mN=function unloader(){return new Promise((function(t){RC&&RC.Ag_vod_close(),jC&&clearTimeout(jC),window.removeEventListener("unload",dN),window.removeEventListener("beforeunload",dN),lN.playerState={status:0,duration:0,currentTime:0},t()}))},yN={consumer:function consumer(t){LC=t},fullscreen:function fullscreen(){RC&&RC.Ag_video_setWindow(0,0,0,0)},position:function position(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this._playerWindow;RC&&RC.Ag_video_setWindow(r,t,i.width,i.height)},size:function size(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1920,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1080,i=this._playerWindow;RC&&RC.Ag_video_setWindow(i.x,i.y,t,r)},area:function area(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1920,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1080,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;RC&&RC.Ag_video_setWindow(a,t,r-a,i-t)},open:function open(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.canInteract){OC=E.media(t);var a={enabled:lN.adsEnabled,duration:300};i.videoId&&(a.caid=i.videoId),mn.get(a,LC).then((function(a){lN.playingAds=!0,a.prerolls().then((function(){lN.playingAds=!1,pN(t,i).then((function(){r.play()})).catch((function(t){jC&&clearTimeout(jC),fN("Error",{event:t})}))}))}))}},reload:function reload(){this.canInteract&&(this.close(),this.open(url))},close:function close(){var t=this;mn.cancel(),lN.playingAds&&(lN.playingAds=!1,mn.stop(),setTimeout((function(){t.close()}))),this.canInteract&&this.clear()},clear:function clear(){if(this.canInteract)return this.pause(),mN().then((function(){fN("Clear")}))},play:function play(){this.canInteract&&(RC&&RC.Ag_vod_resume(),fN("Play"))},pause:function pause(){this.canInteract&&(RC&&RC.Ag_vod_pause(),fN("Pause"))},playPause:function playPause(){this.canInteract&&(this.playing?this.pause():this.play())},mute:function mute(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.canInteract)if(1===t)RC&&RC.Ag_audio_setMute(1);else RC&&RC.Ag_audio_setMute(0)},loop:function loop(){},seek:function seek(t){if(fN("Seeking"),this.canInteract){null===lN.playAfterSeek&&(lN.playAfterSeek=!!lN.playing),this.pause();var r=Math.max(0,Math.min(t,this.duration-.1));RC&&RC.Ag_vod_seek(r),lN.playerState.currentTime=r,fN("Seeked"),fN("TimeUpdate")}},skip:function skip(t){var r=this;this.canInteract&&(lN.skipTime=(lN.skipTime||lN.playerState.currentTime)+t,easeExecution((function(){r.seek(lN.skipTime),lN.skipTime=!1}),300))},show:function show(){console.warn("show() is not supported by AVPlayer")},hide:function hide(){console.warn("hide() is not supported by AVPlayer")},enableAds:function enableAds(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];lN.adsEnabled=t},get duration(){return lN.playerState.duration},get currentTime(){return lN.playerState.currentTime},get muted(){return!(!RC||!RC.Ag_audio_getMute())},get looped(){return!1},get playing(){return lN.playing},get playingAds(){return lN.playingAds},get canInteract(){return!lN.playingAds},get top(){return this._area.top},get left(){return this._area.left},get bottom(){return this._area.bottom},get right(){return this._area.right},get width(){return this._dimensions.width},get height(){this._dimensions.height},get visible(){return!!RC},get adsEnabled(){return lN.adsEnabled},get _player(){return RC},get _consumer(){return LC},get _playerWindow(){var t=_slicedToArray(RC&&RC.Ag_video_getWindow().split(",").map((function(t){return parseInt(t)}))||[0,0,0,0],4);return{x:t[0],y:t[1],width:t[2],height:t[3]}},get _area(){var t=this._playerWindow;return{top:t.y,right:t.x+t.width,bottom:t.y+t.height,left:t.x}},get _dimensions(){var t=this._playerWindow;return{width:t.width,height:t.height}}},vN=autoSetupMixin(yN),_N={exports:{}};PC=_N,"undefined"!=typeof window&&function webpackUniversalModuleDefinition(t,r){PC.exports=r()}(0,(function(){return function(t){var r={};function __webpack_require__(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}return __webpack_require__.m=t,__webpack_require__.c=r,__webpack_require__.d=function(t,r,i){__webpack_require__.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:i})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,r){if(1&r&&(t=__webpack_require__(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(__webpack_require__.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)__webpack_require__.d(i,a,function(r){return t[r]}.bind(null,a));return i},__webpack_require__.n=function(t){var r=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},__webpack_require__.p="/dist/",__webpack_require__(__webpack_require__.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
    !*** ./node_modules/eventemitter3/index.js ***!
    \*********************************************/
/*! no static exports found */function node_modulesEventemitter3IndexJs(t,r,i){var a=Object.prototype.hasOwnProperty,u="~";function Events(){}function EE(t,r,i){this.fn=t,this.context=r,this.once=i||!1}function addListener(t,r,i,a,l){if("function"!=typeof i)throw new TypeError("The listener must be a function");var c=new EE(i,a||t,l),d=u?u+r:r;return t._events[d]?t._events[d].fn?t._events[d]=[t._events[d],c]:t._events[d].push(c):(t._events[d]=c,t._eventsCount++),t}function clearEvent(t,r){0==--t._eventsCount?t._events=new Events:delete t._events[r]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(u=!1)),EventEmitter.prototype.eventNames=function eventNames(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)a.call(t,r)&&i.push(u?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},EventEmitter.prototype.listeners=function listeners(t){var r=u?u+t:t,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,l=i.length,c=new Array(l);a<l;a++)c[a]=i[a].fn;return c},EventEmitter.prototype.listenerCount=function listenerCount(t){var r=u?u+t:t,i=this._events[r];return i?i.fn?1:i.length:0},EventEmitter.prototype.emit=function emit(t,r,i,a,l,c){var d=u?u+t:t;if(!this._events[d])return!1;var g,p,m=this._events[d],v=arguments.length;if(m.fn){switch(m.once&&this.removeListener(t,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,r),!0;case 3:return m.fn.call(m.context,r,i),!0;case 4:return m.fn.call(m.context,r,i,a),!0;case 5:return m.fn.call(m.context,r,i,a,l),!0;case 6:return m.fn.call(m.context,r,i,a,l,c),!0}for(p=1,g=new Array(v-1);p<v;p++)g[p-1]=arguments[p];m.fn.apply(m.context,g)}else{var b,M=m.length;for(p=0;p<M;p++)switch(m[p].once&&this.removeListener(t,m[p].fn,void 0,!0),v){case 1:m[p].fn.call(m[p].context);break;case 2:m[p].fn.call(m[p].context,r);break;case 3:m[p].fn.call(m[p].context,r,i);break;case 4:m[p].fn.call(m[p].context,r,i,a);break;default:if(!g)for(b=1,g=new Array(v-1);b<v;b++)g[b-1]=arguments[b];m[p].fn.apply(m[p].context,g)}}return!0},EventEmitter.prototype.on=function on(t,r,i){return addListener(this,t,r,i,!1)},EventEmitter.prototype.once=function once(t,r,i){return addListener(this,t,r,i,!0)},EventEmitter.prototype.removeListener=function removeListener(t,r,i,a){var l=u?u+t:t;if(!this._events[l])return this;if(!r)return clearEvent(this,l),this;var c=this._events[l];if(c.fn)c.fn!==r||a&&!c.once||i&&c.context!==i||clearEvent(this,l);else{for(var d=0,g=[],p=c.length;d<p;d++)(c[d].fn!==r||a&&!c[d].once||i&&c[d].context!==i)&&g.push(c[d]);g.length?this._events[l]=1===g.length?g[0]:g:clearEvent(this,l)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var r;return t?(r=u?u+t:t,this._events[r]&&clearEvent(this,r)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=u,EventEmitter.EventEmitter=EventEmitter,t.exports=EventEmitter},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
    !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
    \*****************************************************/
/*! no static exports found */function node_modulesUrlToolkitSrcUrlToolkitJs(t,r,i){var a,u,l,c,d;a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,u=/^([^\/?#]*)([^]*)$/,l=/(?:\/|^)\.(?=\/)/g,c=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,d={buildAbsoluteURL:function buildAbsoluteURL(t,r,i){if(i=i||{},t=t.trim(),!(r=r.trim())){if(!i.alwaysNormalize)return t;var a=d.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");return a.path=d.normalizePath(a.path),d.buildURLFromParts(a)}var l=d.parseURL(r);if(!l)throw new Error("Error trying to parse relative URL.");if(l.scheme)return i.alwaysNormalize?(l.path=d.normalizePath(l.path),d.buildURLFromParts(l)):r;var c=d.parseURL(t);if(!c)throw new Error("Error trying to parse base URL.");if(!c.netLoc&&c.path&&"/"!==c.path[0]){var g=u.exec(c.path);c.netLoc=g[1],c.path=g[2]}c.netLoc&&!c.path&&(c.path="/");var p={scheme:c.scheme,netLoc:l.netLoc,path:null,params:l.params,query:l.query,fragment:l.fragment};if(!l.netLoc&&(p.netLoc=c.netLoc,"/"!==l.path[0]))if(l.path){var m=c.path,v=m.substring(0,m.lastIndexOf("/")+1)+l.path;p.path=d.normalizePath(v)}else p.path=c.path,l.params||(p.params=c.params,l.query||(p.query=c.query));return null===p.path&&(p.path=i.alwaysNormalize?d.normalizePath(l.path):l.path),d.buildURLFromParts(p)},parseURL:function parseURL(t){var r=a.exec(t);return r?{scheme:r[1]||"",netLoc:r[2]||"",path:r[3]||"",params:r[4]||"",query:r[5]||"",fragment:r[6]||""}:null},normalizePath:function normalizePath(t){for(t=t.split("").reverse().join("").replace(l,"");t.length!==(t=t.replace(c,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function buildURLFromParts(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=d},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
    !*** ./node_modules/webworkify-webpack/index.js ***!
    \**************************************************/
/*! no static exports found */function node_modulesWebworkifyWebpackIndexJs(t,r,i){function webpackBootstrapFunc(t){var r={};function __webpack_require__(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}__webpack_require__.m=t,__webpack_require__.c=r,__webpack_require__.i=function(t){return t},__webpack_require__.d=function(t,r,i){__webpack_require__.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},__webpack_require__.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.n=function(t){var r=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},__webpack_require__.p="/",__webpack_require__.oe=function(t){throw console.error(t),t};var i=__webpack_require__(__webpack_require__.s=ENTRY_MODULE);return i.default||i}var a="[\\.|\\-|\\+|\\w|/|@]+",u="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function quoteRegExp(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function getModuleDependencies(t,r,l){var c={};c[l]=[];var d=r.toString(),g=d.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!g)return c;for(var p,m=g[1],v=new RegExp("(\\\\n|\\W)"+quoteRegExp(m)+u,"g");p=v.exec(d);)"dll-reference"!==p[3]&&c[l].push(p[3]);for(v=new RegExp("\\("+quoteRegExp(m)+'\\("(dll-reference\\s('+a+'))"\\)\\)'+u,"g");p=v.exec(d);)t[p[2]]||(c[l].push(p[1]),t[p[2]]=i(p[1]).m),c[p[2]]=c[p[2]]||[],c[p[2]].push(p[4]);for(var b,M=Object.keys(c),S=0;S<M.length;S++)for(var E=0;E<c[M[S]].length;E++)b=c[M[S]][E],isNaN(1*b)||(c[M[S]][E]=1*c[M[S]][E]);return c}function hasValuesInQueues(t){return Object.keys(t).reduce((function(r,i){return r||t[i].length>0}),!1)}t.exports=function(t,r){r=r||{};var a={main:i.m},u=r.all?{main:Object.keys(a.main)}:function getRequiredModules(t,r){for(var i={main:[r]},a={main:[]},u={main:{}};hasValuesInQueues(i);)for(var l=Object.keys(i),c=0;c<l.length;c++){var d=l[c],g=i[d].pop();if(u[d]=u[d]||{},!u[d][g]&&t[d][g]){u[d][g]=!0,a[d]=a[d]||[],a[d].push(g);for(var p=getModuleDependencies(t,t[d][g],d),m=Object.keys(p),v=0;v<m.length;v++)i[m[v]]=i[m[v]]||[],i[m[v]]=i[m[v]].concat(p[m[v]])}}return a}(a,t),l="";Object.keys(u).filter((function(t){return"main"!==t})).forEach((function(t){for(var r=0;u[t][r];)r++;u[t].push(r),a[t][r]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+t+" = ("+webpackBootstrapFunc.toString().replace("ENTRY_MODULE",JSON.stringify(r))+")({"+u[t].map((function(r){return JSON.stringify(r)+": "+a[t][r].toString()})).join(",")+"});\n"})),l=l+"new (("+webpackBootstrapFunc.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+u.main.map((function(t){return JSON.stringify(t)+": "+a.main[t].toString()})).join(",")+"}))(self);";var c=new window.Blob([l],{type:"text/javascript"});if(r.bare)return c;var d=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),g=new window.Worker(d);return g.objectURL=d,g}},"./src/config.ts":
/*!***********************!*\
    !*** ./src/config.ts ***!
    \***********************/
/*! exports provided: hlsDefaultConfig, mergeConfig, enableStreamingMode */function srcConfigTs(t,r,i){i.r(r),i.d(r,"hlsDefaultConfig",(function(){return C})),i.d(r,"mergeConfig",(function(){return mergeConfig})),i.d(r,"enableStreamingMode",(function(){return enableStreamingMode}));var a=i(/*! ./controller/abr-controller */"./src/controller/abr-controller.ts"),u=i(/*! ./controller/audio-stream-controller */"./src/controller/audio-stream-controller.ts"),l=i(/*! ./controller/audio-track-controller */"./src/controller/audio-track-controller.ts"),c=i(/*! ./controller/subtitle-stream-controller */"./src/controller/subtitle-stream-controller.ts"),d=i(/*! ./controller/subtitle-track-controller */"./src/controller/subtitle-track-controller.ts"),g=i(/*! ./controller/buffer-controller */"./src/controller/buffer-controller.ts"),p=i(/*! ./controller/timeline-controller */"./src/controller/timeline-controller.ts"),m=i(/*! ./controller/cap-level-controller */"./src/controller/cap-level-controller.ts"),v=i(/*! ./controller/fps-controller */"./src/controller/fps-controller.ts"),b=i(/*! ./controller/eme-controller */"./src/controller/eme-controller.ts"),M=i(/*! ./controller/cmcd-controller */"./src/controller/cmcd-controller.ts"),S=i(/*! ./utils/xhr-loader */"./src/utils/xhr-loader.ts"),E=i(/*! ./utils/fetch-loader */"./src/utils/fetch-loader.ts"),I=i(/*! ./utils/cues */"./src/utils/cues.ts"),D=i(/*! ./utils/mediakeys-helper */"./src/utils/mediakeys-helper.ts"),A=i(/*! ./utils/logger */"./src/utils/logger.ts");function _extends(){return _extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},_extends.apply(this,arguments)}function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,a)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function _defineProperty(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}var C=_objectSpread(_objectSpread({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:S.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:a.default,bufferController:g.default,capLevelController:m.default,fpsController:v.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:D.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},function timelineConfig(){return{cueHandler:I.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:c.SubtitleStreamController,subtitleTrackController:d.default,timelineController:p.TimelineController,audioStreamController:u.default,audioTrackController:l.default,emeController:b.default,cmcdController:M.default});function mergeConfig(t,r){if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==r.liveMaxLatencyDurationCount&&(void 0===r.liveSyncDurationCount||r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(void 0===r.liveSyncDuration||r.liveMaxLatencyDuration<=r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return _extends({},t,r)}function enableStreamingMode(t){var r=t.loader;r!==E.default&&r!==S.default?(A.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):Object(E.fetchSupported)()&&(t.loader=E.default,t.progressive=!0,t.enableSoftwareAES=!0,A.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/abr-controller.ts ***!
    \******************************************/
/*! exports provided: default */function srcControllerAbrControllerTs(t,r,i){i.r(r);var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../utils/ewma-bandwidth-estimator */"./src/utils/ewma-bandwidth-estimator.ts"),l=i(/*! ../events */"./src/events.ts"),c=i(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),d=i(/*! ../errors */"./src/errors.ts"),g=i(/*! ../types/loader */"./src/types/loader.ts"),p=i(/*! ../utils/logger */"./src/utils/logger.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var m=function(){function AbrController(t){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var r=t.config;this.bwEstimator=new u.default(r.abrEwmaSlowVoD,r.abrEwmaFastVoD,r.abrEwmaDefaultEstimate),this.registerListeners()}var t=AbrController.prototype;return t.registerListeners=function registerListeners(){var t=this.hls;t.on(l.Events.FRAG_LOADING,this.onFragLoading,this),t.on(l.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(l.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.on(l.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(l.Events.ERROR,this.onError,this)},t.unregisterListeners=function unregisterListeners(){var t=this.hls;t.off(l.Events.FRAG_LOADING,this.onFragLoading,this),t.off(l.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(l.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.off(l.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(l.Events.ERROR,this.onError,this)},t.destroy=function destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},t.onFragLoading=function onFragLoading(t,r){var i,a=r.frag;a.type===g.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=a,this.partCurrent=null!=(i=r.part)?i:null,this.timer=self.setInterval(this.onCheck,100)))},t.onLevelLoaded=function onLevelLoaded(t,r){var i=this.hls.config;r.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)},t._abandonRulesCheck=function _abandonRulesCheck(){var t=this.fragCurrent,r=this.partCurrent,i=this.hls,u=i.autoLevelEnabled,d=i.config,g=i.media;if(t&&g){var m=r?r.stats:t.stats,v=r?r.duration:t.duration;if(m.aborted)return p.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(u&&!g.paused&&g.playbackRate&&g.readyState){var b=performance.now()-m.loading.start,M=Math.abs(g.playbackRate);if(!(b<=500*v/M)){var S=i.levels,E=i.minAutoLevel,I=S[t.level],D=m.total||Math.max(m.loaded,Math.round(v*I.maxBitrate/8)),A=Math.max(1,m.bwEstimate?m.bwEstimate/8:1e3*m.loaded/b),C=(D-m.loaded)/A,N=g.currentTime,k=(c.BufferHelper.bufferInfo(g,N,d.maxBufferHole).end-N)/M;if(!(k>=2*v/M||C<=k)){var O,L=Number.POSITIVE_INFINITY;for(O=t.level-1;O>E&&!((L=v*S[O].maxBitrate/(6.4*A))<k);O--);if(!(L>=C)){var R=this.bwEstimator.getEstimate();p.logger.warn("Fragment "+t.sn+(r?" part "+r.index:"")+" of level "+t.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+O+"\n      Current BW estimate: "+(Object(a.isFiniteNumber)(R)?(R/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+C.toFixed(3)+" s\n      Estimated load time for the next fragment: "+L.toFixed(3)+" s\n      Time to underbuffer: "+k.toFixed(3)+" s"),i.nextLoadLevel=O,this.bwEstimator.sample(b,m.loaded),this.clearTimer(),t.loader&&(this.fragCurrent=this.partCurrent=null,t.loader.abort()),i.trigger(l.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:r,stats:m})}}}}}},t.onFragLoaded=function onFragLoaded(t,r){var i=r.frag,u=r.part;if(i.type===g.PlaylistLevelType.MAIN&&Object(a.isFiniteNumber)(i.sn)){var c=u?u.stats:i.stats,d=u?u.duration:i.duration;if(this.clearTimer(),this.lastLoadedFragLevel=i.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var p=this.hls.levels[i.level],m=(p.loaded?p.loaded.bytes:0)+c.loaded,v=(p.loaded?p.loaded.duration:0)+d;p.loaded={bytes:m,duration:v},p.realBitrate=Math.round(8*m/v)}if(i.bitrateTest){var b={stats:c,frag:i,part:u,id:i.type};this.onFragBuffered(l.Events.FRAG_BUFFERED,b),i.bitrateTest=!1}}},t.onFragBuffered=function onFragBuffered(t,r){var i=r.frag,a=r.part,u=a?a.stats:i.stats;if(!u.aborted&&i.type===g.PlaylistLevelType.MAIN&&"initSegment"!==i.sn){var l=u.parsing.end-u.loading.start;this.bwEstimator.sample(l,u.loaded),u.bwEstimate=this.bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=l/1e3:this.bitrateTestDelay=0}},t.onError=function onError(t,r){switch(r.details){case d.ErrorDetails.FRAG_LOAD_ERROR:case d.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.clearTimer=function clearTimer(){self.clearInterval(this.timer),this.timer=void 0},t.getNextABRAutoLevel=function getNextABRAutoLevel(){var t=this.fragCurrent,r=this.partCurrent,i=this.hls,a=i.maxAutoLevel,u=i.config,l=i.minAutoLevel,d=i.media,g=r?r.duration:t?t.duration:0,m=d?d.currentTime:0,v=d&&0!==d.playbackRate?Math.abs(d.playbackRate):1,b=this.bwEstimator?this.bwEstimator.getEstimate():u.abrEwmaDefaultEstimate,M=(c.BufferHelper.bufferInfo(d,m,u.maxBufferHole).end-m)/v,S=this.findBestLevel(b,l,a,M,u.abrBandWidthFactor,u.abrBandWidthUpFactor);if(S>=0)return S;p.logger.trace((M?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var E=g?Math.min(g,u.maxStarvationDelay):u.maxStarvationDelay,I=u.abrBandWidthFactor,D=u.abrBandWidthUpFactor;if(!M){var A=this.bitrateTestDelay;A&&(E=(g?Math.min(g,u.maxLoadingDelay):u.maxLoadingDelay)-A,p.logger.trace("bitrate test took "+Math.round(1e3*A)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*E)+" ms"),I=D=1)}return S=this.findBestLevel(b,l,a,M+E,I,D),Math.max(S,0)},t.findBestLevel=function findBestLevel(t,r,i,a,u,l){for(var c,d=this.fragCurrent,g=this.partCurrent,m=this.lastLoadedFragLevel,v=this.hls.levels,b=v[m],M=!(null==b||null===(c=b.details)||void 0===c||!c.live),S=null==b?void 0:b.codecSet,E=g?g.duration:d?d.duration:0,I=i;I>=r;I--){var D=v[I];if(D&&(!S||D.codecSet===S)){var A=D.details,C=(g?null==A?void 0:A.partTarget:null==A?void 0:A.averagetargetduration)||E,N=void 0;N=I<=m?u*t:l*t;var k=v[I].maxBitrate,O=k*C/N;if(p.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+I+"/"+Math.round(N)+"/"+k+"/"+C+"/"+a+"/"+O),N>k&&(!O||M&&!this.bitrateTestDelay||O<a))return I}}return-1},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(AbrController,[{key:"nextAutoLevel",get:function get(){var t=this._nextAutoLevel,r=this.bwEstimator;if(!(-1===t||r&&r.canEstimate()))return t;var i=this.getNextABRAutoLevel();return-1!==t&&(i=Math.min(t,i)),i},set:function set(t){this._nextAutoLevel=t}}]),AbrController}();r.default=m},"./src/controller/audio-stream-controller.ts":
/*!***************************************************!*\
    !*** ./src/controller/audio-stream-controller.ts ***!
    \***************************************************/
/*! exports provided: default */function srcControllerAudioStreamControllerTs(t,r,i){i.r(r);var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),l=i(/*! ../events */"./src/events.ts"),c=i(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),d=i(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),g=i(/*! ../types/level */"./src/types/level.ts"),p=i(/*! ../types/loader */"./src/types/loader.ts"),m=i(/*! ../loader/fragment */"./src/loader/fragment.ts"),v=i(/*! ../demux/chunk-cache */"./src/demux/chunk-cache.ts"),b=i(/*! ../demux/transmuxer-interface */"./src/demux/transmuxer-interface.ts"),M=i(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),S=i(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),E=i(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),I=i(/*! ../errors */"./src/errors.ts"),D=i(/*! ../utils/logger */"./src/utils/logger.ts");function _extends(){return _extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},_extends.apply(this,arguments)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}var A=function(t){function AudioStreamController(r,i){var a;return(a=t.call(this,r,i,"[audio-stream-controller]")||this).videoBuffer=null,a.videoTrackCC=-1,a.waitingVideoCC=-1,a.audioSwitch=!1,a.trackId=-1,a.waitingData=null,a.mainDetails=null,a.bufferFlushed=!1,a._registerListeners(),a}!function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}(AudioStreamController,t);var r=AudioStreamController.prototype;return r.onHandlerDestroying=function onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null},r._registerListeners=function _registerListeners(){var t=this.hls;t.on(l.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(l.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(l.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(l.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(l.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(l.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(l.Events.ERROR,this.onError,this),t.on(l.Events.BUFFER_RESET,this.onBufferReset,this),t.on(l.Events.BUFFER_CREATED,this.onBufferCreated,this),t.on(l.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(l.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(l.Events.FRAG_BUFFERED,this.onFragBuffered,this)},r._unregisterListeners=function _unregisterListeners(){var t=this.hls;t.off(l.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(l.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(l.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(l.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(l.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(l.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(l.Events.ERROR,this.onError,this),t.off(l.Events.BUFFER_RESET,this.onBufferReset,this),t.off(l.Events.BUFFER_CREATED,this.onBufferCreated,this),t.off(l.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(l.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(l.Events.FRAG_BUFFERED,this.onFragBuffered,this)},r.onInitPtsFound=function onInitPtsFound(t,r){var i=r.frag,a=r.id,l=r.initPTS;if("main"===a){var c=i.cc;this.initPTS[i.cc]=l,this.log("InitPTS for cc: "+c+" found from main: "+l),this.videoTrackCC=c,this.state===u.State.WAITING_INIT_PTS&&this.tick()}},r.startLoad=function startLoad(t){if(!this.levels)return this.startPosition=t,void(this.state=u.State.STOPPED);var r=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,r>0&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+r.toFixed(3)),this.state=u.State.IDLE):(this.loadedmetadata=!1,this.state=u.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},r.doTick=function doTick(){switch(this.state){case u.State.IDLE:this.doTickIdle();break;case u.State.WAITING_TRACK:var r,i=this.levels,a=this.trackId,l=null==i||null===(r=i[a])||void 0===r?void 0:r.details;if(l){if(this.waitForCdnTuneIn(l))break;this.state=u.State.WAITING_INIT_PTS}break;case u.State.FRAG_LOADING_WAITING_RETRY:var d,g=performance.now(),p=this.retryDate;(!p||g>=p||null!==(d=this.media)&&void 0!==d&&d.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=u.State.IDLE);break;case u.State.WAITING_INIT_PTS:var m=this.waitingData;if(m){var v=m.frag,b=m.part,M=m.cache,E=m.complete;if(void 0!==this.initPTS[v.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=u.State.FRAG_LOADING;var I={frag:v,part:b,payload:M.flush(),networkDetails:null};this._handleFragmentLoadProgress(I),E&&t.prototype._handleFragmentLoadComplete.call(this,I)}else if(this.videoTrackCC!==this.waitingVideoCC)D.logger.log("Waiting fragment cc ("+v.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var A=this.getLoadPosition(),C=c.BufferHelper.bufferInfo(this.mediaBuffer,A,this.config.maxBufferHole);Object(S.fragmentWithinToleranceTest)(C.end,this.config.maxFragLookUpTolerance,v)<0&&(D.logger.log("Waiting fragment cc ("+v.cc+") @ "+v.start+" cancelled because another fragment at "+C.end+" is needed"),this.clearWaitingFragment())}}else this.state=u.State.IDLE}this.onTickEnd()},r.clearWaitingFragment=function clearWaitingFragment(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=u.State.IDLE)},r.onTickEnd=function onTickEnd(){var t=this.media;if(t&&t.readyState){var r=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&r.length&&(this.loadedmetadata=!0),this.lastCurrentTime=t.currentTime}},r.doTickIdle=function doTickIdle(){var t,r,i=this.hls,a=this.levels,c=this.media,d=this.trackId,g=i.config;if(a&&a[d]&&(c||!this.startFragRequested&&g.startFragPrefetch)){var v=a[d].details;if(!v||v.live&&this.levelLastLoaded!==d||this.waitForCdnTuneIn(v))this.state=u.State.WAITING_TRACK;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,m.ElementaryStreamTypes.AUDIO,p.PlaylistLevelType.AUDIO));var b=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,p.PlaylistLevelType.AUDIO);if(null!==b){var M=b.len,S=this.getMaxBufferLength(),E=this.audioSwitch;if(!(M>=S)||E){if(!E&&this._streamEnded(b,v))return i.trigger(l.Events.BUFFER_EOS,{type:"audio"}),void(this.state=u.State.ENDED);var I=v.fragments[0].start,D=b.end;if(E){var A=this.getLoadPosition();D=A,v.PTSKnown&&A<I&&(b.end>I||b.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),c.currentTime=I+.05)}var C=this.getNextFragment(D,v);C?"identity"!==(null===(t=C.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(r=C.decryptdata)&&void 0!==r&&r.key?this.loadFragment(C,v,D):this.loadKey(C,v):this.bufferFlushed=!0}}}}},r.getMaxBufferLength=function getMaxBufferLength(){var r=t.prototype.getMaxBufferLength.call(this),i=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,p.PlaylistLevelType.MAIN);return null===i?r:Math.max(r,i.len)},r.onMediaDetaching=function onMediaDetaching(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this)},r.onAudioTracksUpdated=function onAudioTracksUpdated(t,r){var i=r.audioTracks;this.resetTransmuxer(),this.levels=i.map((function(t){return new g.Level(t)}))},r.onAudioTrackSwitching=function onAudioTrackSwitching(t,r){var i=!!r.url;this.trackId=r.id;var a=this.fragCurrent;null!=a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),i?this.setInterval(100):this.resetTransmuxer(),i?(this.audioSwitch=!0,this.state=u.State.IDLE):this.state=u.State.STOPPED,this.tick()},r.onManifestLoading=function onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},r.onLevelLoaded=function onLevelLoaded(t,r){this.mainDetails=r.details},r.onAudioTrackLoaded=function onAudioTrackLoaded(t,r){var i,a=this.levels,l=r.details,c=r.id;if(a){this.log("Track "+c+" loaded ["+l.startSN+","+l.endSN+"],duration:"+l.totalduration);var d=a[c],g=0;if(l.live||null!==(i=d.details)&&void 0!==i&&i.live){var p=this.mainDetails;if(l.fragments[0]||(l.deltaUpdateFailed=!0),l.deltaUpdateFailed||!p)return;!d.details&&l.hasProgramDateTime&&p.hasProgramDateTime?(Object(E.alignMediaPlaylistByPDT)(l,p),g=l.fragments[0].start):g=this.alignPlaylists(l,d.details)}d.details=l,this.levelLastLoaded=c,this.startFragRequested||!this.mainDetails&&l.live||this.setStartPosition(d.details,g),this.state!==u.State.WAITING_TRACK||this.waitForCdnTuneIn(l)||(this.state=u.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+c)},r._handleFragmentLoadProgress=function _handleFragmentLoadProgress(t){var r,i=t.frag,a=t.part,l=t.payload,c=this.config,d=this.trackId,g=this.levels;if(g){var m=g[d];console.assert(m,"Audio track is defined on fragment load progress");var S=m.details;console.assert(S,"Audio track details are defined on fragment load progress");var E=c.defaultAudioCodec||m.audioCodec||"mp4a.40.2",I=this.transmuxer;I||(I=this.transmuxer=new b.default(this.hls,p.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var A=this.initPTS[i.cc],C=null===(r=i.initSegment)||void 0===r?void 0:r.data;if(void 0!==A){var N=a?a.index:-1,k=-1!==N,O=new M.ChunkMetadata(i.level,i.sn,i.stats.chunkCount,l.byteLength,N,k);I.push(l,C,E,"",i,a,S.totalduration,!1,O,A)}else D.logger.log("Unknown video PTS for cc "+i.cc+", waiting for video PTS before demuxing audio frag "+i.sn+" of ["+S.startSN+" ,"+S.endSN+"],track "+d),(this.waitingData=this.waitingData||{frag:i,part:a,cache:new v.default,complete:!1}).cache.push(new Uint8Array(l)),this.waitingVideoCC=this.videoTrackCC,this.state=u.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+i.sn+" of level "+i.level+" will not be buffered")},r._handleFragmentLoadComplete=function _handleFragmentLoadComplete(r){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,r)},r.onBufferReset=function onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.onBufferCreated=function onBufferCreated(t,r){var i=r.tracks.audio;i&&(this.mediaBuffer=i.buffer),r.tracks.video&&(this.videoBuffer=r.tracks.video.buffer)},r.onFragBuffered=function onFragBuffered(t,r){var i=r.frag,a=r.part;i.type===p.PlaylistLevelType.AUDIO&&(this.fragContextChanged(i)?this.warn("Fragment "+i.sn+(a?" p: "+a.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==i.sn&&(this.fragPrevious=i,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(l.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(i,a)))},r.onError=function onError(r,i){switch(i.details){case I.ErrorDetails.FRAG_LOAD_ERROR:case I.ErrorDetails.FRAG_LOAD_TIMEOUT:case I.ErrorDetails.KEY_LOAD_ERROR:case I.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(p.PlaylistLevelType.AUDIO,i);break;case I.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case I.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==u.State.ERROR&&this.state!==u.State.STOPPED&&(this.state=i.fatal?u.State.ERROR:u.State.IDLE,this.warn(i.details+" while loading frag, switching to "+this.state+" state"));break;case I.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===i.parent&&(this.state===u.State.PARSING||this.state===u.State.PARSED)){var a=!0,l=this.getFwdBufferInfo(this.mediaBuffer,p.PlaylistLevelType.AUDIO);l&&l.len>.5&&(a=!this.reduceMaxBufferLength(l.len)),a&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},r.onBufferFlushed=function onBufferFlushed(t,r){r.type===m.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},r._handleTransmuxComplete=function _handleTransmuxComplete(t){var r,i="audio",a=this.hls,c=t.remuxResult,d=t.chunkMeta,g=this.getCurrentContext(d);if(!g)return this.warn("The loading context changed while buffering fragment "+d.sn+" of level "+d.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(d.level);var p=g.frag,v=g.part,b=c.audio,M=c.text,S=c.id3,E=c.initSegment;if(!this.fragContextChanged(p)){if(this.state=u.State.PARSING,this.audioSwitch&&b&&this.completeAudioSwitch(),null!=E&&E.tracks&&(this._bufferInitSegment(E.tracks,p,d),a.trigger(l.Events.FRAG_PARSING_INIT_SEGMENT,{frag:p,id:i,tracks:E.tracks})),b){var I=b.startPTS,D=b.endPTS,A=b.startDTS,C=b.endDTS;v&&(v.elementaryStreams[m.ElementaryStreamTypes.AUDIO]={startPTS:I,endPTS:D,startDTS:A,endDTS:C}),p.setElementaryStreamInfo(m.ElementaryStreamTypes.AUDIO,I,D,A,C),this.bufferFragmentData(b,p,v,d)}if(null!=S&&null!==(r=S.samples)&&void 0!==r&&r.length){var N=_extends({frag:p,id:i},S);a.trigger(l.Events.FRAG_PARSING_METADATA,N)}if(M){var k=_extends({frag:p,id:i},M);a.trigger(l.Events.FRAG_PARSING_USERDATA,k)}}},r._bufferInitSegment=function _bufferInitSegment(t,r,i){if(this.state===u.State.PARSING){t.video&&delete t.video;var a=t.audio;if(a){a.levelCodec=a.codec,a.id="audio",this.log("Init audio buffer, container:"+a.container+", codecs[parsed]=["+a.codec+"]"),this.hls.trigger(l.Events.BUFFER_CODECS,t);var c=a.initSegment;if(null!=c&&c.byteLength){var d={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:c};this.hls.trigger(l.Events.BUFFER_APPENDING,d)}this.tick()}}},r.loadFragment=function loadFragment(r,i,l){var c=this.fragmentTracker.getState(r);this.fragCurrent=r,(this.audioSwitch||c===d.FragmentState.NOT_LOADED||c===d.FragmentState.PARTIAL)&&("initSegment"===r.sn?this._loadInitSegment(r):i.live&&!Object(a.isFiniteNumber)(this.initPTS[r.cc])?(this.log("Waiting for video PTS in continuity counter "+r.cc+" of live stream before loading audio fragment "+r.sn+" of level "+this.trackId),this.state=u.State.WAITING_INIT_PTS):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,r,i,l)))},r.completeAudioSwitch=function completeAudioSwitch(){var r=this.hls,i=this.media,a=this.trackId;i&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,r.trigger(l.Events.AUDIO_TRACK_SWITCHED,{id:a})},AudioStreamController}(u.default);r.default=A},"./src/controller/audio-track-controller.ts":
/*!**************************************************!*\
    !*** ./src/controller/audio-track-controller.ts ***!
    \**************************************************/
/*! exports provided: default */function srcControllerAudioTrackControllerTs(t,r,i){i.r(r);var a=i(/*! ../events */"./src/events.ts"),u=i(/*! ../errors */"./src/errors.ts"),l=i(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),c=i(/*! ../types/loader */"./src/types/loader.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}var d=function(t){function AudioTrackController(r){var i;return(i=t.call(this,r,"[audio-track-controller]")||this).tracks=[],i.groupId=null,i.tracksInGroup=[],i.trackId=-1,i.trackName="",i.selectDefaultTrack=!0,i.registerListeners(),i}!function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}(AudioTrackController,t);var r=AudioTrackController.prototype;return r.registerListeners=function registerListeners(){var t=this.hls;t.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(a.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(a.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(a.Events.ERROR,this.onError,this)},r.unregisterListeners=function unregisterListeners(){var t=this.hls;t.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(a.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(a.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(a.Events.ERROR,this.onError,this)},r.destroy=function destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,t.prototype.destroy.call(this)},r.onManifestLoading=function onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},r.onManifestParsed=function onManifestParsed(t,r){this.tracks=r.audioTracks||[]},r.onAudioTrackLoaded=function onAudioTrackLoaded(t,r){var i=r.id,a=r.details,u=this.tracksInGroup[i];if(u){var l=u.details;u.details=r.details,this.log("audioTrack "+i+" loaded ["+a.startSN+"-"+a.endSN+"]"),i===this.trackId&&(this.retryCount=0,this.playlistLoaded(i,r,l))}else this.warn("Invalid audio track id "+i)},r.onLevelLoading=function onLevelLoading(t,r){this.switchLevel(r.level)},r.onLevelSwitching=function onLevelSwitching(t,r){this.switchLevel(r.level)},r.switchLevel=function switchLevel(t){var r=this.hls.levels[t];if(null!=r&&r.audioGroupIds){var i=r.audioGroupIds[r.urlId];if(this.groupId!==i){this.groupId=i;var u=this.tracks.filter((function(t){return!i||t.groupId===i}));this.selectDefaultTrack&&!u.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=u;var l={audioTracks:u};this.log("Updating audio tracks, "+u.length+' track(s) found in "'+i+'" group-id'),this.hls.trigger(a.Events.AUDIO_TRACKS_UPDATED,l),this.selectInitialTrack()}}},r.onError=function onError(r,i){t.prototype.onError.call(this,r,i),!i.fatal&&i.context&&i.context.type===c.PlaylistContextType.AUDIO_TRACK&&i.context.id===this.trackId&&i.context.groupId===this.groupId&&this.retryLoadingOrFail(i)},r.setAudioTrack=function setAudioTrack(t){var r=this.tracksInGroup;if(t<0||t>=r.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var i=r[this.trackId];this.log("Now switching to audio-track index "+t);var u=r[t],l=u.id,c=u.groupId,d=void 0===c?"":c,g=u.name,p=u.type,m=u.url;if(this.trackId=t,this.trackName=g,this.selectDefaultTrack=!1,this.hls.trigger(a.Events.AUDIO_TRACK_SWITCHING,{id:l,groupId:d,name:g,type:p,url:m}),!u.details||u.details.live){var v=this.switchParams(u.url,null==i?void 0:i.details);this.loadPlaylist(v)}}},r.selectInitialTrack=function selectInitialTrack(){var t=this.tracksInGroup;console.assert(t.length,"Initial audio track should be selected when tracks are known");var r=this.trackName,i=this.findTrackId(r)||this.findTrackId();-1!==i?this.setAudioTrack(i):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},r.findTrackId=function findTrackId(t){for(var r=this.tracksInGroup,i=0;i<r.length;i++){var a=r[i];if((!this.selectDefaultTrack||a.default)&&(!t||t===a.name))return a.id}return-1},r.loadPlaylist=function loadPlaylist(t){var r=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(r)){var i=r.id,u=r.groupId,l=r.url;if(t)try{l=t.addDirectives(l)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("loading audio-track playlist for id: "+i),this.clearTimer(),this.hls.trigger(a.Events.AUDIO_TRACK_LOADING,{url:l,id:i,groupId:u,deliveryDirectives:t||null})}},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(AudioTrackController,[{key:"audioTracks",get:function get(){return this.tracksInGroup}},{key:"audioTrack",get:function get(){return this.trackId},set:function set(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}]),AudioTrackController}(l.default);r.default=d},"./src/controller/base-playlist-controller.ts":
/*!****************************************************!*\
    !*** ./src/controller/base-playlist-controller.ts ***!
    \****************************************************/
/*! exports provided: default */function srcControllerBasePlaylistControllerTs(t,r,i){i.r(r),i.d(r,"default",(function(){return g}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../types/level */"./src/types/level.ts"),l=i(/*! ./level-helper */"./src/controller/level-helper.ts"),c=i(/*! ../utils/logger */"./src/utils/logger.ts"),d=i(/*! ../errors */"./src/errors.ts"),g=function(){function BasePlaylistController(t,r){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=c.logger.log.bind(c.logger,r+":"),this.warn=c.logger.warn.bind(c.logger,r+":"),this.hls=t}var t=BasePlaylistController.prototype;return t.destroy=function destroy(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function onError(t,r){r.fatal&&r.type===d.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},t.clearTimer=function clearTimer(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function startLoad(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},t.stopLoad=function stopLoad(){this.canLoad=!1,this.clearTimer()},t.switchParams=function switchParams(t,r){var i=null==r?void 0:r.renditionReports;if(i)for(var l=0;l<i.length;l++){var c=i[l],d=""+c.URI;if(d===t.substr(-d.length)){var g=parseInt(c["LAST-MSN"]),p=parseInt(c["LAST-PART"]);if(r&&this.hls.config.lowLatencyMode){var m=Math.min(r.age-r.partTarget,r.targetduration);void 0!==p&&m>r.partTarget&&(p+=1)}if(Object(a.isFiniteNumber)(g))return new u.HlsUrlParameters(g,Object(a.isFiniteNumber)(p)?p:void 0,u.HlsSkip.No)}}},t.loadPlaylist=function loadPlaylist(t){},t.shouldLoadTrack=function shouldLoadTrack(t){return this.canLoad&&t&&!!t.url&&(!t.details||t.details.live)},t.playlistLoaded=function playlistLoaded(t,r,i){var a=this,u=r.details,c=r.stats,d=c.loading.end?Math.max(0,self.performance.now()-c.loading.end):0;if(u.advancedDateTime=Date.now()-d,u.live||null!=i&&i.live){if(u.reloaded(i),i&&this.log("live playlist "+t+" "+(u.advanced?"REFRESHED "+u.lastPartSn+"-"+u.lastPartIndex:"MISSED")),i&&u.fragments.length>0&&Object(l.mergeDetails)(i,u),!this.canLoad||!u.live)return;var g,p=void 0,m=void 0;if(u.canBlockReload&&u.endSN&&u.advanced){var v=this.hls.config.lowLatencyMode,b=u.lastPartSn,M=u.endSN,S=u.lastPartIndex,E=b===M;-1!==S?(p=E?M+1:b,m=E?v?0:S:S+1):p=M+1;var I=u.age,D=I+u.ageHeader,A=Math.min(D-u.partTarget,1.5*u.targetduration);if(A>0){if(i&&A>i.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+i.tuneInGoal+" to: "+A+" with playlist age: "+u.age),A=0;else{var C=Math.floor(A/u.targetduration);p+=C,void 0!==m&&(m+=Math.round(A%u.targetduration/u.partTarget)),this.log("CDN Tune-in age: "+u.ageHeader+"s last advanced "+I.toFixed(2)+"s goal: "+A+" skip sn "+C+" to part "+m)}u.tuneInGoal=A}if(g=this.getDeliveryDirectives(u,r.deliveryDirectives,p,m),v||!E)return void this.loadPlaylist(g)}else g=this.getDeliveryDirectives(u,r.deliveryDirectives,p,m);var N=Object(l.computeReloadInterval)(u,c);void 0!==p&&u.canBlockReload&&(N-=u.partTarget||1),this.log("reload live playlist "+t+" in "+Math.round(N)+" ms"),this.timer=self.setTimeout((function(){return a.loadPlaylist(g)}),N)}else this.clearTimer()},t.getDeliveryDirectives=function getDeliveryDirectives(t,r,i,a){var l=Object(u.getSkipValue)(t,i);return null!=r&&r.skip&&t.deltaUpdateFailed&&(i=r.msn,a=r.part,l=u.HlsSkip.No),new u.HlsUrlParameters(i,a,l)},t.retryLoadingOrFail=function retryLoadingOrFail(t){var r,i=this,a=this.hls.config,u=this.retryCount<a.levelLoadingMaxRetry;if(u)if(this.retryCount++,t.details.indexOf("LoadTimeOut")>-1&&null!==(r=t.context)&&void 0!==r&&r.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+t.details+'"'),this.loadPlaylist();else{var l=Math.min(Math.pow(2,this.retryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return i.loadPlaylist()}),l),this.warn("retry playlist loading #"+this.retryCount+" in "+l+' ms after "'+t.details+'"')}else this.warn('cannot recover from error "'+t.details+'"'),this.clearTimer(),t.fatal=!0;return u},BasePlaylistController}()},"./src/controller/base-stream-controller.ts":
/*!**************************************************!*\
    !*** ./src/controller/base-stream-controller.ts ***!
    \**************************************************/
/*! exports provided: State, default */function srcControllerBaseStreamControllerTs(t,r,i){i.r(r),i.d(r,"State",(function(){return C})),i.d(r,"default",(function(){return N}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../task-loop */"./src/task-loop.ts"),l=i(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),c=i(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),d=i(/*! ../utils/logger */"./src/utils/logger.ts"),g=i(/*! ../events */"./src/events.ts"),p=i(/*! ../errors */"./src/errors.ts"),m=i(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),v=i(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),b=i(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),M=i(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),S=i(/*! ./level-helper */"./src/controller/level-helper.ts"),E=i(/*! ../loader/fragment-loader */"./src/loader/fragment-loader.ts"),I=i(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),D=i(/*! ../utils/time-ranges */"./src/utils/time-ranges.ts"),A=i(/*! ../types/loader */"./src/types/loader.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}var C={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},N=function(t){function BaseStreamController(r,i,a){var u;return(u=t.call(this)||this).hls=void 0,u.fragPrevious=null,u.fragCurrent=null,u.fragmentTracker=void 0,u.transmuxer=null,u._state=C.STOPPED,u.media=void 0,u.mediaBuffer=void 0,u.config=void 0,u.bitrateTest=!1,u.lastCurrentTime=0,u.nextLoadPosition=0,u.startPosition=0,u.loadedmetadata=!1,u.fragLoadError=0,u.retryDate=0,u.levels=null,u.fragmentLoader=void 0,u.levelLastLoaded=null,u.startFragRequested=!1,u.decrypter=void 0,u.initPTS=[],u.onvseeking=null,u.onvended=null,u.logPrefix="",u.log=void 0,u.warn=void 0,u.logPrefix=a,u.log=d.logger.log.bind(d.logger,a+":"),u.warn=d.logger.warn.bind(d.logger,a+":"),u.hls=r,u.fragmentLoader=new E.default(r.config),u.fragmentTracker=i,u.config=r.config,u.decrypter=new I.default(r,r.config),r.on(g.Events.KEY_LOADED,u.onKeyLoaded,function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(u)),u}!function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}(BaseStreamController,t);var r=BaseStreamController.prototype;return r.doTick=function doTick(){this.onTickEnd()},r.onTickEnd=function onTickEnd(){},r.startLoad=function startLoad(t){},r.stopLoad=function stopLoad(){this.fragmentLoader.abort();var t=this.fragCurrent;t&&this.fragmentTracker.removeFragment(t),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=C.STOPPED},r._streamEnded=function _streamEnded(t,r){var i=this.fragCurrent,a=this.fragmentTracker;if(!r.live&&i&&i.sn>=r.endSN&&!t.nextStart){var u=r.partList;if(null!=u&&u.length){var d=u[u.length-1];return c.BufferHelper.isBuffered(this.media,d.start+d.duration/2)}var g=a.getState(i);return g===l.FragmentState.PARTIAL||g===l.FragmentState.OK}return!1},r.onMediaAttached=function onMediaAttached(t,r){var i=this.media=this.mediaBuffer=r.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);var a=this.config;this.levels&&a.autoStartLoad&&this.state===C.STOPPED&&this.startLoad(a.startPosition)},r.onMediaDetaching=function onMediaDetaching(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},r.onMediaSeeking=function onMediaSeeking(){var t=this.config,r=this.fragCurrent,i=this.media,u=this.mediaBuffer,l=this.state,d=i?i.currentTime:0,g=c.BufferHelper.bufferInfo(u||i,d,t.maxBufferHole);if(this.log("media seeking to "+(Object(a.isFiniteNumber)(d)?d.toFixed(3):d)+", state: "+l),l===C.ENDED)this.resetLoadingState();else if(r&&!g.len){var p=t.maxFragLookUpTolerance,m=r.start-p,v=d>r.start+r.duration+p;(d<m||v)&&(v&&r.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),r.loader.abort()),this.resetLoadingState())}i&&(this.lastCurrentTime=d),this.loadedmetadata||g.len||(this.nextLoadPosition=this.startPosition=d),this.tickImmediate()},r.onMediaEnded=function onMediaEnded(){this.startPosition=this.lastCurrentTime=0},r.onKeyLoaded=function onKeyLoaded(t,r){if(this.state===C.KEY_LOADING&&r.frag===this.fragCurrent&&this.levels){this.state=C.IDLE;var i=this.levels[r.frag.level].details;i&&this.loadFragment(r.frag,i,r.frag.start)}},r.onHandlerDestroying=function onHandlerDestroying(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function onHandlerDestroyed(){this.state=C.STOPPED,this.hls.off(g.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},r.loadKey=function loadKey(t,r){this.log("Loading key for "+t.sn+" of ["+r.startSN+"-"+r.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=C.KEY_LOADING,this.fragCurrent=t,this.hls.trigger(g.Events.KEY_LOADING,{frag:t})},r.loadFragment=function loadFragment(t,r,i){this._loadFragForPlayback(t,r,i)},r._loadFragForPlayback=function _loadFragForPlayback(t,r,i){var a=this;this._doFragLoad(t,r,i,(function progressCallback(r){if(a.fragContextChanged(t))return a.warn("Fragment "+t.sn+(r.part?" p: "+r.part.index:"")+" of level "+t.level+" was dropped during download."),void a.fragmentTracker.removeFragment(t);t.stats.chunkCount++,a._handleFragmentLoadProgress(r)})).then((function(r){if(r){a.fragLoadError=0;var i=a.state;if(!a.fragContextChanged(t))return"payload"in r&&(a.log("Loaded fragment "+t.sn+" of level "+t.level),a.hls.trigger(g.Events.FRAG_LOADED,r),a.state===C.BACKTRACKING)?(a.fragmentTracker.backtrack(t,r),void a.resetFragmentLoading(t)):void a._handleFragmentLoadComplete(r);(i===C.FRAG_LOADING||i===C.BACKTRACKING||!a.fragCurrent&&i===C.PARSING)&&(a.fragmentTracker.removeFragment(t),a.state=C.IDLE)}})).catch((function(r){a.warn(r),a.resetFragmentLoading(t)}))},r.flushMainBuffer=function flushMainBuffer(t,r,i){if(void 0===i&&(i=null),t-r){var a={startOffset:t,endOffset:r,type:i};this.fragLoadError=0,this.hls.trigger(g.Events.BUFFER_FLUSHING,a)}},r._loadInitSegment=function _loadInitSegment(t){var r=this;this._doFragLoad(t).then((function(i){if(!i||r.fragContextChanged(t)||!r.levels)throw new Error("init load aborted");return i})).then((function(i){var a=r.hls,u=i.payload,l=t.decryptdata;if(u&&u.byteLength>0&&l&&l.key&&l.iv&&"AES-128"===l.method){var c=self.performance.now();return r.decrypter.webCryptoDecrypt(new Uint8Array(u),l.key.buffer,l.iv.buffer).then((function(r){var u=self.performance.now();return a.trigger(g.Events.FRAG_DECRYPTED,{frag:t,payload:r,stats:{tstart:c,tdecrypt:u}}),i.payload=r,i}))}return i})).then((function(i){var a=r.fragCurrent,u=r.hls,l=r.levels;if(!l)throw new Error("init load aborted, missing levels");var c=l[t.level].details;console.assert(c,"Level details are defined when init segment is loaded");var d=t.stats;r.state=C.IDLE,r.fragLoadError=0,t.data=new Uint8Array(i.payload),d.parsing.start=d.buffering.start=self.performance.now(),d.parsing.end=d.buffering.end=self.performance.now(),i.frag===a&&u.trigger(g.Events.FRAG_BUFFERED,{stats:d,frag:a,part:null,id:t.type}),r.tick()})).catch((function(i){r.warn(i),r.resetFragmentLoading(t)}))},r.fragContextChanged=function fragContextChanged(t){var r=this.fragCurrent;return!t||!r||t.level!==r.level||t.sn!==r.sn||t.urlId!==r.urlId},r.fragBufferedComplete=function fragBufferedComplete(t,r){var i=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(r?" part: "+r.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level+" "+D.default.toString(c.BufferHelper.getBuffered(i))),this.state=C.IDLE,this.tick()},r._handleFragmentLoadComplete=function _handleFragmentLoadComplete(t){var r=this.transmuxer;if(r){var i=t.frag,a=t.part,u=t.partsLoaded,l=!u||0===u.length||u.some((function(t){return!t})),c=new m.ChunkMetadata(i.level,i.sn,i.stats.chunkCount+1,0,a?a.index:-1,!l);r.flush(c)}},r._handleFragmentLoadProgress=function _handleFragmentLoadProgress(t){},r._doFragLoad=function _doFragLoad(t,r,i,u){var l=this;if(void 0===i&&(i=null),!this.levels)throw new Error("frag load aborted, missing levels");if(i=Math.max(t.start,i||0),this.config.lowLatencyMode&&r){var c=r.partList;if(c&&u){i>t.end&&r.fragmentHint&&(t=r.fragmentHint);var d=this.getNextPart(c,t,i);if(d>-1){var p=c[d];return this.log("Loading part sn: "+t.sn+" p: "+p.index+" cc: "+t.cc+" of playlist ["+r.startSN+"-"+r.endSN+"] parts [0-"+d+"-"+(c.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(i.toFixed(3))),this.nextLoadPosition=p.start+p.duration,this.state=C.FRAG_LOADING,this.hls.trigger(g.Events.FRAG_LOADING,{frag:t,part:c[d],targetBufferTime:i}),this.doFragPartsLoad(t,c,d,u).catch((function(t){return l.handleFragLoadError(t)}))}if(!t.url||this.loadedEndOfParts(c,i))return Promise.resolve(null)}}return this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(r?"of ["+r.startSN+"-"+r.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(i.toFixed(3))),Object(a.isFiniteNumber)(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=C.FRAG_LOADING,this.hls.trigger(g.Events.FRAG_LOADING,{frag:t,targetBufferTime:i}),this.fragmentLoader.load(t,u).catch((function(t){return l.handleFragLoadError(t)}))},r.doFragPartsLoad=function doFragPartsLoad(t,r,i,a){var u=this;return new Promise((function(l,c){var d=[];!function loadPartIndex(i){var p=r[i];u.fragmentLoader.loadPart(t,p,a).then((function(a){d[p.index]=a;var c=a.part;u.hls.trigger(g.Events.FRAG_LOADED,a);var m=r[i+1];if(!m||m.fragment!==t)return l({frag:t,part:c,partsLoaded:d});loadPartIndex(i+1)})).catch(c)}(i)}))},r.handleFragLoadError=function handleFragLoadError(t){var r=t.data;return r&&r.details===p.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(r.frag,r.part):this.hls.trigger(g.Events.ERROR,r),null},r._handleTransmuxerFlush=function _handleTransmuxerFlush(t){var r=this.getCurrentContext(t);if(r&&this.state===C.PARSING){var i=r.frag,a=r.part,u=r.level,l=self.performance.now();i.stats.parsing.end=l,a&&(a.stats.parsing.end=l),this.updateLevelTiming(i,a,u,t.partial)}else this.fragCurrent||(this.state=C.IDLE)},r.getCurrentContext=function getCurrentContext(t){var r=this.levels,i=t.level,a=t.sn,u=t.part;if(!r||!r[i])return this.warn("Levels object was unset while buffering fragment "+a+" of level "+i+". The current chunk will not be buffered."),null;var l=r[i],c=u>-1?Object(S.getPartWith)(l,a,u):null,d=c?c.fragment:Object(S.getFragmentWithSN)(l,a,this.fragCurrent);return d?{frag:d,part:c,level:l}:null},r.bufferFragmentData=function bufferFragmentData(t,r,i,a){if(t&&this.state===C.PARSING){var u=t.data1,l=t.data2,c=u;if(u&&l&&(c=Object(v.appendUint8Array)(u,l)),c&&c.length){var d={type:t.type,frag:r,part:i,chunkMeta:a,parent:r.type,data:c};this.hls.trigger(g.Events.BUFFER_APPENDING,d),t.dropped&&t.independent&&!i&&this.flushBufferGap(r)}}},r.flushBufferGap=function flushBufferGap(t){var r=this.media;if(r)if(c.BufferHelper.isBuffered(r,r.currentTime)){var i=r.currentTime,a=c.BufferHelper.bufferInfo(r,i,0),u=t.duration,l=Math.min(2*this.config.maxFragLookUpTolerance,.25*u),d=Math.max(Math.min(t.start-l,a.end-l),i+l);t.start-d>l&&this.flushMainBuffer(d,t.start)}else this.flushMainBuffer(0,t.start)},r.getFwdBufferInfo=function getFwdBufferInfo(t,r){var i=this.config,u=this.getLoadPosition();if(!Object(a.isFiniteNumber)(u))return null;var l=c.BufferHelper.bufferInfo(t,u,i.maxBufferHole);if(0===l.len&&void 0!==l.nextStart){var d=this.fragmentTracker.getBufferedFrag(u,r);if(d&&l.nextStart<d.end)return c.BufferHelper.bufferInfo(t,u,Math.max(l.nextStart,i.maxBufferHole))}return l},r.getMaxBufferLength=function getMaxBufferLength(t){var r,i=this.config;return r=t?Math.max(8*i.maxBufferSize/t,i.maxBufferLength):i.maxBufferLength,Math.min(r,i.maxMaxBufferLength)},r.reduceMaxBufferLength=function reduceMaxBufferLength(t){var r=this.config,i=t||r.maxBufferLength;return r.maxMaxBufferLength>=i&&(r.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+r.maxMaxBufferLength+"s"),!0)},r.getNextFragment=function getNextFragment(t,r){var i,a,u=r.fragments,l=u.length;if(!l)return null;var c,d=this.config,g=u[0].start;if(r.live){var p=d.initialLiveManifestSize;if(l<p)return this.warn("Not enough fragments to start playback (have: "+l+", need: "+p+")"),null;r.PTSKnown||this.startFragRequested||-1!==this.startPosition||(c=this.getInitialLiveFragment(r,u),this.startPosition=c?this.hls.liveSyncPosition||c.start:t)}else t<=g&&(c=u[0]);if(!c){var m=d.lowLatencyMode?r.partEnd:r.fragmentEnd;c=this.getFragmentAtPosition(t,m,r)}return null===(i=c)||void 0===i||!i.initSegment||null!==(a=c)&&void 0!==a&&a.initSegment.data||this.bitrateTest||(c=c.initSegment),c},r.getNextPart=function getNextPart(t,r,i){for(var a=-1,u=!1,l=!0,c=0,d=t.length;c<d;c++){var g=t[c];if(l=l&&!g.independent,a>-1&&i<g.start)break;var p=g.loaded;!p&&(u||g.independent||l)&&g.fragment===r&&(a=c),u=p}return a},r.loadedEndOfParts=function loadedEndOfParts(t,r){var i=t[t.length-1];return i&&r>i.start&&i.loaded},r.getInitialLiveFragment=function getInitialLiveFragment(t,r){var i=this.fragPrevious,a=null;if(i){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),a=Object(M.findFragmentByPDT)(r,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!a){var u=i.sn+1;if(u>=t.startSN&&u<=t.endSN){var l=r[u-t.startSN];i.cc===l.cc&&(a=l,this.log("Live playlist, switching playlist, load frag with next SN: "+a.sn))}a||(a=Object(M.findFragWithCC)(r,i.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+a.sn)}}else{var c=this.hls.liveSyncPosition;null!==c&&(a=this.getFragmentAtPosition(c,this.bitrateTest?t.fragmentEnd:t.edge,t))}return a},r.getFragmentAtPosition=function getFragmentAtPosition(t,r,i){var a,u=this.config,c=this.fragPrevious,d=i.fragments,g=i.endSN,p=i.fragmentHint,m=u.maxFragLookUpTolerance,v=!!(u.lowLatencyMode&&i.partList&&p);if(v&&p&&!this.bitrateTest&&(d=d.concat(p),g=p.sn),t<r){var b=t>r-m?0:m;a=Object(M.findFragmentByPTS)(c,d,t,b)}else a=d[d.length-1];if(a){var S=a.sn-i.startSN,E=c&&a.level===c.level,I=d[S+1];if(this.fragmentTracker.getState(a)===l.FragmentState.BACKTRACKED){a=null;for(var D=S;d[D]&&this.fragmentTracker.getState(d[D])===l.FragmentState.BACKTRACKED;)a=c?d[D--]:d[--D];a||(a=I)}else c&&a.sn===c.sn&&!v&&E&&(a.sn<g&&this.fragmentTracker.getState(I)!==l.FragmentState.OK?(this.log("SN "+a.sn+" just loaded, load next one: "+I.sn),a=I):a=null)}return a},r.synchronizeToLiveEdge=function synchronizeToLiveEdge(t){var r=this.config,i=this.media;if(i){var a=this.hls.liveSyncPosition,u=i.currentTime,l=t.fragments[0].start,c=t.edge,d=u>=l-r.maxFragLookUpTolerance&&u<=c;if(null!==a&&i.duration>a&&(u<a||!d)){var g=void 0!==r.liveMaxLatencyDuration?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*t.targetduration;(!d&&i.readyState<4||u<c-g)&&(this.loadedmetadata||(this.nextLoadPosition=a),i.readyState&&(this.warn("Playback: "+u.toFixed(3)+" is located too far from the end of live sliding playlist: "+c+", reset currentTime to : "+a.toFixed(3)),i.currentTime=a))}}},r.alignPlaylists=function alignPlaylists(t,r){var i=this.levels,u=this.levelLastLoaded,l=this.fragPrevious,c=null!==u?i[u]:null,d=t.fragments.length;if(!d)return this.warn("No fragments in live playlist"),0;var g=t.fragments[0].start,p=!r,m=t.alignedSliding&&Object(a.isFiniteNumber)(g);if(p||!m&&!g){Object(b.alignStream)(l,c,t);var v=t.fragments[0].start;return this.log("Live playlist sliding: "+v.toFixed(2)+" start-sn: "+(r?r.startSN:"na")+"->"+t.startSN+" prev-sn: "+(l?l.sn:"na")+" fragments: "+d),v}return g},r.waitForCdnTuneIn=function waitForCdnTuneIn(t){return t.live&&t.canBlockReload&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},r.setStartPosition=function setStartPosition(t,r){var i=this.startPosition;if(i<r&&(i=-1),-1===i||-1===this.lastCurrentTime){var u=t.startTimeOffset;Object(a.isFiniteNumber)(u)?(i=r+u,u<0&&(i+=t.totalduration),i=Math.min(Math.max(r,i),r+t.totalduration),this.log("Start time offset "+u+" found in playlist, adjust startPosition to "+i),this.startPosition=i):t.live?i=this.hls.liveSyncPosition||r:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i},r.getLoadPosition=function getLoadPosition(){var t=this.media,r=0;return this.loadedmetadata&&t?r=t.currentTime:this.nextLoadPosition&&(r=this.nextLoadPosition),r},r.handleFragLoadAborted=function handleFragLoadAborted(t,r){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(r?" part"+r.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},r.resetFragmentLoading=function resetFragmentLoading(t){this.fragCurrent&&this.fragContextChanged(t)||(this.state=C.IDLE)},r.onFragmentOrKeyLoadError=function onFragmentOrKeyLoadError(t,r){if(!r.fatal){var i=r.frag;if(i&&i.type===t){var a=this.fragCurrent;console.assert(a&&i.sn===a.sn&&i.level===a.level&&i.urlId===a.urlId,"Frag load error must match current frag to retry");var u=this.config;if(this.fragLoadError+1<=u.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(i.level))return;var l=Math.min(Math.pow(2,this.fragLoadError)*u.fragLoadingRetryDelay,u.fragLoadingMaxRetryTimeout);this.warn("Fragment "+i.sn+" of "+t+" "+i.level+" failed to load, retrying in "+l+"ms"),this.retryDate=self.performance.now()+l,this.fragLoadError++,this.state=C.FRAG_LOADING_WAITING_RETRY}else r.levelRetry?(t===A.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=C.IDLE):(d.logger.error(r.details+" reaches max retry, redispatch as fatal ..."),r.fatal=!0,this.hls.stopLoad(),this.state=C.ERROR)}}},r.afterBufferFlushed=function afterBufferFlushed(t,r,i){if(t){var a=c.BufferHelper.getBuffered(t);this.fragmentTracker.detectEvictedFragments(r,a,i),this.state===C.ENDED&&this.resetLoadingState()}},r.resetLoadingState=function resetLoadingState(){this.fragCurrent=null,this.fragPrevious=null,this.state=C.IDLE},r.resetLiveStartWhenNotLoaded=function resetLiveStartWhenNotLoaded(t){if(!this.loadedmetadata){this.startFragRequested=!1;var r=this.levels?this.levels[t].details:null;if(null!=r&&r.live)return this.startPosition=-1,this.setStartPosition(r,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},r.updateLevelTiming=function updateLevelTiming(t,r,i,a){var u=this,l=i.details;console.assert(!!l,"level.details must be defined");var c=Object.keys(t.elementaryStreams).reduce((function(r,c){var d=t.elementaryStreams[c];if(d){var p=d.endPTS-d.startPTS;if(p<=0)return u.warn("Could not parse fragment "+t.sn+" "+c+" duration reliably ("+p+") resetting transmuxer to fallback to playlist timing"),u.resetTransmuxer(),r||!1;var m=a?0:Object(S.updateFragPTSDTS)(l,t,d.startPTS,d.endPTS,d.startDTS,d.endDTS);return u.hls.trigger(g.Events.LEVEL_PTS_UPDATED,{details:l,level:i,drift:m,type:c,frag:t,start:d.startPTS,end:d.endPTS}),!0}return r}),!1);c?(this.state=C.PARSED,this.hls.trigger(g.Events.FRAG_PARSED,{frag:t,part:r})):this.resetLoadingState()},r.resetTransmuxer=function resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(BaseStreamController,[{key:"state",get:function get(){return this._state},set:function set(t){var r=this._state;r!==t&&(this._state=t,this.log(r+"->"+t))}}]),BaseStreamController}(u.default)},"./src/controller/buffer-controller.ts":
/*!*********************************************!*\
    !*** ./src/controller/buffer-controller.ts ***!
    \*********************************************/
/*! exports provided: default */function srcControllerBufferControllerTs(t,r,i){i.r(r),i.d(r,"default",(function(){return M}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../events */"./src/events.ts"),l=i(/*! ../utils/logger */"./src/utils/logger.ts"),c=i(/*! ../errors */"./src/errors.ts"),d=i(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),g=i(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.ts"),p=i(/*! ../loader/fragment */"./src/loader/fragment.ts"),m=i(/*! ./buffer-operation-queue */"./src/controller/buffer-operation-queue.ts"),v=Object(g.getMediaSource)(),b=/([ha]vc.)(?:\.[^.,]+)+/,M=function(){function BufferController(t){var r=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=r.hls,i=r.media,a=r.mediaSource;l.logger.log("[buffer-controller]: Media source opened"),i&&(r.updateMediaElementDuration(),t.trigger(u.Events.MEDIA_ATTACHED,{media:i})),a&&a.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},this._onMediaSourceClose=function(){l.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){l.logger.log("[buffer-controller]: Media source ended")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var t=BufferController.prototype;return t.hasSourceTypes=function hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},t.destroy=function destroy(){this.unregisterListeners(),this.details=null},t.registerListeners=function registerListeners(){var t=this.hls;t.on(u.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(u.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(u.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(u.Events.BUFFER_RESET,this.onBufferReset,this),t.on(u.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.on(u.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.on(u.Events.BUFFER_EOS,this.onBufferEos,this),t.on(u.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(u.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(u.Events.FRAG_PARSED,this.onFragParsed,this),t.on(u.Events.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function unregisterListeners(){var t=this.hls;t.off(u.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(u.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(u.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(u.Events.BUFFER_RESET,this.onBufferReset,this),t.off(u.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.off(u.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.off(u.Events.BUFFER_EOS,this.onBufferEos,this),t.off(u.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(u.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(u.Events.FRAG_PARSED,this.onFragParsed,this),t.off(u.Events.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function _initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new m.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},t.onManifestParsed=function onManifestParsed(t,r){var i=2;(r.audio&&!r.video||!r.altAudio)&&(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.details=null,l.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function onMediaAttaching(t,r){var i=this.media=r.media;if(i&&v){var a=this.mediaSource=new v;a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),i.src=self.URL.createObjectURL(a),this._objectUrl=i.src}},t.onMediaDetaching=function onMediaDetaching(){var t=this.media,r=this.mediaSource,i=this._objectUrl;if(r){if(l.logger.log("[buffer-controller]: media source detaching"),"open"===r.readyState)try{r.endOfStream()}catch(t){l.logger.warn("[buffer-controller]: onMediaDetaching: "+t.message+" while calling endOfStream")}this.onBufferReset(),r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(i&&self.URL.revokeObjectURL(i),t.src===i?(t.removeAttribute("src"),t.load()):l.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(u.Events.MEDIA_DETACHED,void 0)},t.onBufferReset=function onBufferReset(){var t=this;this.getSourceBufferTypes().forEach((function(r){var i=t.sourceBuffer[r];try{i&&(t.removeBufferListeners(r),t.mediaSource&&t.mediaSource.removeSourceBuffer(i),t.sourceBuffer[r]=void 0)}catch(t){l.logger.warn("[buffer-controller]: Failed to reset the "+r+" buffer",t)}})),this._initSourceBuffer()},t.onBufferCodecs=function onBufferCodecs(t,r){var i=this,a=this.getSourceBufferTypes().length;Object.keys(r).forEach((function(t){if(a){var u=i.tracks[t];if(u&&"function"==typeof u.buffer.changeType){var l=r[t],c=l.codec,d=l.levelCodec,g=l.container;if((u.levelCodec||u.codec).replace(b,"$1")!==(d||c).replace(b,"$1")){var p=g+";codecs="+(d||c);i.appendChangeType(t,p)}}}else i.pendingTracks[t]=r[t]})),a||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.appendChangeType=function appendChangeType(t,r){var i=this,a=this.operationQueue,u={execute:function execute(){var u=i.sourceBuffer[t];u&&(l.logger.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+r),u.changeType(r)),a.shiftAndExecuteNext(t)},onStart:function onStart(){},onComplete:function onComplete(){},onError:function onError(r){l.logger.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",r)}};a.append(u,t)},t.onBufferAppending=function onBufferAppending(t,r){var i=this,a=this.hls,g=this.operationQueue,p=this.tracks,m=r.data,v=r.type,b=r.frag,M=r.part,S=r.chunkMeta,E=S.buffering[v],I=self.performance.now();E.start=I;var D=b.stats.buffering,A=M?M.stats.buffering:null;0===D.start&&(D.start=I),A&&0===A.start&&(A.start=I);var C=p.audio,N="audio"===v&&1===S.id&&"audio/mpeg"===(null==C?void 0:C.container),k={execute:function execute(){if(E.executeStart=self.performance.now(),N){var t=i.sourceBuffer[v];if(t){var r=b.start-t.timestampOffset;Math.abs(r)>=.1&&(l.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+b.start+" (delta: "+r+") sn: "+b.sn+")"),t.timestampOffset=b.start)}}i.appendExecutor(m,v)},onStart:function onStart(){},onComplete:function onComplete(){var t=self.performance.now();E.executeEnd=E.end=t,0===D.first&&(D.first=t),A&&0===A.first&&(A.first=t);var r=i.sourceBuffer,a={};for(var l in r)a[l]=d.BufferHelper.getBuffered(r[l]);i.appendError=0,i.hls.trigger(u.Events.BUFFER_APPENDED,{type:v,frag:b,part:M,chunkMeta:S,parent:b.type,timeRanges:a})},onError:function onError(t){l.logger.error("[buffer-controller]: Error encountered while trying to append to the "+v+" SourceBuffer",t);var r={type:c.ErrorTypes.MEDIA_ERROR,parent:b.type,details:c.ErrorDetails.BUFFER_APPEND_ERROR,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?r.details=c.ErrorDetails.BUFFER_FULL_ERROR:(i.appendError++,r.details=c.ErrorDetails.BUFFER_APPEND_ERROR,i.appendError>a.config.appendErrorMaxRetry&&(l.logger.error("[buffer-controller]: Failed "+a.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r.fatal=!0)),a.trigger(u.Events.ERROR,r)}};g.append(k,v)},t.onBufferFlushing=function onBufferFlushing(t,r){var i=this,a=this.operationQueue,c=function flushOperation(t){return{execute:i.removeExecutor.bind(i,t,r.startOffset,r.endOffset),onStart:function onStart(){},onComplete:function onComplete(){i.hls.trigger(u.Events.BUFFER_FLUSHED,{type:t})},onError:function onError(r){l.logger.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",r)}}};r.type?a.append(c(r.type),r.type):this.getSourceBufferTypes().forEach((function(t){a.append(c(t),t)}))},t.onFragParsed=function onFragParsed(t,r){var i=this,a=r.frag,c=r.part,d=[],g=c?c.elementaryStreams:a.elementaryStreams;g[p.ElementaryStreamTypes.AUDIOVIDEO]?d.push("audiovideo"):(g[p.ElementaryStreamTypes.AUDIO]&&d.push("audio"),g[p.ElementaryStreamTypes.VIDEO]&&d.push("video")),0===d.length&&l.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+a.type+" level: "+a.level+" sn: "+a.sn),this.blockBuffers((function onUnblocked(){var t=self.performance.now();a.stats.buffering.end=t,c&&(c.stats.buffering.end=t);var r=c?c.stats:a.stats;i.hls.trigger(u.Events.FRAG_BUFFERED,{frag:a,part:c,stats:r,id:a.type})}),d)},t.onFragChanged=function onFragChanged(t,r){this.flushBackBuffer()},t.onBufferEos=function onBufferEos(t,r){var i=this,a=this.getSourceBufferTypes().reduce((function(t,a){var u=i.sourceBuffer[a];return r.type&&r.type!==a||u&&!u.ended&&(u.ended=!0,l.logger.log("[buffer-controller]: "+a+" sourceBuffer now EOS")),t&&!(u&&!u.ended)}),!0);a&&this.blockBuffers((function(){var t=i.mediaSource;t&&"open"===t.readyState&&t.endOfStream()}))},t.onLevelUpdated=function onLevelUpdated(t,r){var i=r.details;i.fragments.length&&(this.details=i,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.flushBackBuffer=function flushBackBuffer(){var t=this.hls,r=this.details,i=this.media,l=this.sourceBuffer;if(i&&null!==r){var c=this.getSourceBufferTypes();if(c.length){var g=r.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(Object(a.isFiniteNumber)(g)&&!(g<0)){var p=i.currentTime,m=r.levelTargetDuration,v=Math.max(g,m),b=Math.floor(p/m)*m-v;c.forEach((function(i){var a=l[i];if(a){var c=d.BufferHelper.getBuffered(a);c.length>0&&b>c.start(0)&&(t.trigger(u.Events.BACK_BUFFER_REACHED,{bufferEnd:b}),r.live&&t.trigger(u.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:b}),t.trigger(u.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:b,type:i}))}}))}}}},t.updateMediaElementDuration=function updateMediaElementDuration(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,r=this.hls,i=this.media,u=this.mediaSource,c=t.fragments[0].start+t.totalduration,d=i.duration,g=Object(a.isFiniteNumber)(u.duration)?u.duration:0;t.live&&r.config.liveDurationInfinity?(l.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),u.duration=1/0,this.updateSeekableRange(t)):(c>g&&c>d||!Object(a.isFiniteNumber)(d))&&(l.logger.log("[buffer-controller]: Updating Media Source duration to "+c.toFixed(3)),u.duration=c)}},t.updateSeekableRange=function updateSeekableRange(t){var r=this.mediaSource,i=t.fragments;if(i.length&&t.live&&null!=r&&r.setLiveSeekableRange){var a=Math.max(0,i[0].start),u=Math.max(a,a+t.totalduration);r.setLiveSeekableRange(a,u)}},t.checkPendingTracks=function checkPendingTracks(){var t=this.bufferCodecEventsExpected,r=this.operationQueue,i=this.pendingTracks,a=Object.keys(i).length;if(a&&!t||2===a){this.createSourceBuffers(i),this.pendingTracks={};var l=this.getSourceBufferTypes();if(0===l.length)return void this.hls.trigger(u.Events.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});l.forEach((function(t){r.executeNext(t)}))}},t.createSourceBuffers=function createSourceBuffers(t){var r=this.sourceBuffer,i=this.mediaSource;if(!i)throw Error("createSourceBuffers called when mediaSource was null");var a=0;for(var d in t)if(!r[d]){var g=t[d];if(!g)throw Error("source buffer exists for track "+d+", however track does not");var p=g.levelCodec||g.codec,m=g.container+";codecs="+p;l.logger.log("[buffer-controller]: creating sourceBuffer("+m+")");try{var v=r[d]=i.addSourceBuffer(m),b=d;this.addBufferListener(b,"updatestart",this._onSBUpdateStart),this.addBufferListener(b,"updateend",this._onSBUpdateEnd),this.addBufferListener(b,"error",this._onSBUpdateError),this.tracks[d]={buffer:v,codec:p,container:g.container,levelCodec:g.levelCodec,id:g.id},a++}catch(t){l.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+t.message),this.hls.trigger(u.Events.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:m})}}a&&this.hls.trigger(u.Events.BUFFER_CREATED,{tracks:this.tracks})},t._onSBUpdateStart=function _onSBUpdateStart(t){this.operationQueue.current(t).onStart()},t._onSBUpdateEnd=function _onSBUpdateEnd(t){var r=this.operationQueue;r.current(t).onComplete(),r.shiftAndExecuteNext(t)},t._onSBUpdateError=function _onSBUpdateError(t,r){l.logger.error("[buffer-controller]: "+t+" SourceBuffer error",r),this.hls.trigger(u.Events.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var i=this.operationQueue.current(t);i&&i.onError(r)},t.removeExecutor=function removeExecutor(t,r,i){var u=this.media,c=this.mediaSource,d=this.operationQueue,g=this.sourceBuffer[t];if(!u||!c||!g)return l.logger.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void d.shiftAndExecuteNext(t);var p=Object(a.isFiniteNumber)(u.duration)?u.duration:1/0,m=Object(a.isFiniteNumber)(c.duration)?c.duration:1/0,v=Math.max(0,r),b=Math.min(i,p,m);b>v?(l.logger.log("[buffer-controller]: Removing ["+v+","+b+"] from the "+t+" SourceBuffer"),console.assert(!g.updating,t+" sourceBuffer must not be updating"),g.remove(v,b)):d.shiftAndExecuteNext(t)},t.appendExecutor=function appendExecutor(t,r){var i=this.operationQueue,a=this.sourceBuffer[r];if(!a)return l.logger.warn("[buffer-controller]: Attempting to append to the "+r+" SourceBuffer, but it does not exist"),void i.shiftAndExecuteNext(r);a.ended=!1,console.assert(!a.updating,r+" sourceBuffer must not be updating"),a.appendBuffer(t)},t.blockBuffers=function blockBuffers(t,r){var i=this;if(void 0===r&&(r=this.getSourceBufferTypes()),!r.length)return l.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(t);var a=this.operationQueue,u=r.map((function(t){return a.appendBlocker(t)}));Promise.all(u).then((function(){t(),r.forEach((function(t){var r=i.sourceBuffer[t];r&&r.updating||a.shiftAndExecuteNext(t)}))}))},t.getSourceBufferTypes=function getSourceBufferTypes(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function addBufferListener(t,r,i){var a=this.sourceBuffer[t];if(a){var u=i.bind(this,t);this.listeners[t].push({event:r,listener:u}),a.addEventListener(r,u)}},t.removeBufferListeners=function removeBufferListeners(t){var r=this.sourceBuffer[t];r&&this.listeners[t].forEach((function(t){r.removeEventListener(t.event,t.listener)}))},BufferController}()},"./src/controller/buffer-operation-queue.ts":
/*!**************************************************!*\
    !*** ./src/controller/buffer-operation-queue.ts ***!
    \**************************************************/
/*! exports provided: default */function srcControllerBufferOperationQueueTs(t,r,i){i.r(r),i.d(r,"default",(function(){return u}));var a=i(/*! ../utils/logger */"./src/utils/logger.ts"),u=function(){function BufferOperationQueue(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var t=BufferOperationQueue.prototype;return t.append=function append(t,r){var i=this.queues[r];i.push(t),1===i.length&&this.buffers[r]&&this.executeNext(r)},t.insertAbort=function insertAbort(t,r){this.queues[r].unshift(t),this.executeNext(r)},t.appendBlocker=function appendBlocker(t){var r,i=new Promise((function(t){r=t})),a={execute:r,onStart:function onStart(){},onComplete:function onComplete(){},onError:function onError(){}};return this.append(a,t),i},t.executeNext=function executeNext(t){var r=this.buffers,i=this.queues,u=r[t],l=i[t];if(l.length){var c=l[0];try{c.execute()}catch(r){a.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),c.onError(r),u&&u.updating||(l.shift(),this.executeNext(t))}}},t.shiftAndExecuteNext=function shiftAndExecuteNext(t){this.queues[t].shift(),this.executeNext(t)},t.current=function current(t){return this.queues[t][0]},BufferOperationQueue}()},"./src/controller/cap-level-controller.ts":
/*!************************************************!*\
    !*** ./src/controller/cap-level-controller.ts ***!
    \************************************************/
/*! exports provided: default */function srcControllerCapLevelControllerTs(t,r,i){i.r(r);var a=i(/*! ../events */"./src/events.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function CapLevelController(t){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var t=CapLevelController.prototype;return t.setStreamController=function setStreamController(t){this.streamController=t},t.destroy=function destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},t.registerListeners=function registerListeners(){var t=this.hls;t.on(a.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(a.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(a.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},t.unregisterListener=function unregisterListener(){var t=this.hls;t.off(a.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(a.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(a.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},t.onFpsDropLevelCapping=function onFpsDropLevelCapping(t,r){CapLevelController.isLevelAllowed(r.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(r.droppedLevel)},t.onMediaAttaching=function onMediaAttaching(t,r){this.media=r.media instanceof HTMLVideoElement?r.media:null},t.onManifestParsed=function onManifestParsed(t,r){var i=this.hls;this.restrictedLevels=[],this.firstLevel=r.firstLevel,i.config.capLevelToPlayerSize&&r.video&&this.startCapping()},t.onBufferCodecs=function onBufferCodecs(t,r){this.hls.config.capLevelToPlayerSize&&r.video&&this.startCapping()},t.onMediaDetaching=function onMediaDetaching(){this.stopCapping()},t.detectPlayerSize=function detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var r=this.hls;r.autoLevelCapping=this.getMaxLevel(t.length-1),r.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=r.autoLevelCapping}}},t.getMaxLevel=function getMaxLevel(t){var r=this,i=this.hls.levels;if(!i.length)return-1;var a=i.filter((function(i,a){return CapLevelController.isLevelAllowed(a,r.restrictedLevels)&&a<=t}));return this.clientRect=null,CapLevelController.getMaxLevelByMediaSize(a,this.mediaWidth,this.mediaHeight)},t.startCapping=function startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.stopCapping=function stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},t.getDimensions=function getDimensions(){if(this.clientRect)return this.clientRect;var t=this.media,r={width:0,height:0};if(t){var i=t.getBoundingClientRect();r.width=i.width,r.height=i.height,r.width||r.height||(r.width=i.right-i.left||t.width||0,r.height=i.bottom-i.top||t.height||0)}return this.clientRect=r,r},CapLevelController.isLevelAllowed=function isLevelAllowed(t,r){return void 0===r&&(r=[]),-1===r.indexOf(t)},CapLevelController.getMaxLevelByMediaSize=function getMaxLevelByMediaSize(t,r,i){if(!t||!t.length)return-1;for(var a=function atGreatestBandiwdth(t,r){return!r||t.width!==r.width||t.height!==r.height},u=t.length-1,l=0;l<t.length;l+=1){var c=t[l];if((c.width>=r||c.height>=i)&&a(c,t[l+1])){u=l;break}}return u},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(CapLevelController,[{key:"mediaWidth",get:function get(){return this.getDimensions().width*CapLevelController.contentScaleFactor}},{key:"mediaHeight",get:function get(){return this.getDimensions().height*CapLevelController.contentScaleFactor}}],[{key:"contentScaleFactor",get:function get(){var t=1;try{t=self.devicePixelRatio}catch(t){}return t}}]),CapLevelController}();r.default=u},"./src/controller/cmcd-controller.ts":
/*!*******************************************!*\
    !*** ./src/controller/cmcd-controller.ts ***!
    \*******************************************/
/*! exports provided: default */function srcControllerCmcdControllerTs(t,r,i){i.r(r),i.d(r,"default",(function(){return d}));var a=i(/*! ../events */"./src/events.ts"),u=i(/*! ../types/cmcd */"./src/types/cmcd.ts"),l=i(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),c=i(/*! ../utils/logger */"./src/utils/logger.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}function _createForOfIteratorHelperLoose(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function _extends(){return _extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},_extends.apply(this,arguments)}var d=function(){function CMCDController(t){var r=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){r.initialized&&(r.starved=!0),r.buffering=!0},this.onPlaying=function(){r.initialized||(r.initialized=!0),r.buffering=!1},this.applyPlaylistData=function(t){try{r.apply(t,{ot:u.CMCDObjectType.MANIFEST,su:!r.initialized})}catch(t){c.logger.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=function(t){try{var i=t.frag,a=r.hls.levels[i.level],l=r.getObjectType(i),d={d:1e3*i.duration,ot:l};l!==u.CMCDObjectType.VIDEO&&l!==u.CMCDObjectType.AUDIO&&l!=u.CMCDObjectType.MUXED||(d.br=a.bitrate/1e3,d.tb=r.getTopBandwidth(l)/1e3,d.bl=r.getBufferLength(l)),r.apply(t,d)}catch(t){c.logger.warn("Could not generate segment CMCD data.",t)}},this.hls=t;var i=this.config=t.config,a=i.cmcd;null!=a&&(i.pLoader=this.createPlaylistLoader(),i.fLoader=this.createFragmentLoader(),this.sid=a.sessionId||CMCDController.uuid(),this.cid=a.contentId,this.useHeaders=!0===a.useHeaders,this.registerListeners())}var t=CMCDController.prototype;return t.registerListeners=function registerListeners(){var t=this.hls;t.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(a.Events.MEDIA_DETACHED,this.onMediaDetached,this),t.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function unregisterListeners(){var t=this.hls;t.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(a.Events.MEDIA_DETACHED,this.onMediaDetached,this),t.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},t.destroy=function destroy(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},t.onMediaAttached=function onMediaAttached(t,r){this.media=r.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function onBufferCreated(t,r){var i,a;this.audioBuffer=null===(i=r.tracks.audio)||void 0===i?void 0:i.buffer,this.videoBuffer=null===(a=r.tracks.video)||void 0===a?void 0:a.buffer},t.createData=function createData(){var t;return{v:u.CMCDVersion,sf:u.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(t=this.media)||void 0===t?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function apply(t,r){void 0===r&&(r={}),_extends(r,this.createData());var i=r.ot===u.CMCDObjectType.INIT||r.ot===u.CMCDObjectType.VIDEO||r.ot===u.CMCDObjectType.MUXED;if(this.starved&&i&&(r.bs=!0,r.su=!0,this.starved=!1),null==r.su&&(r.su=this.buffering),this.useHeaders){var a=CMCDController.toHeaders(r);if(!Object.keys(a).length)return;t.headers||(t.headers={}),_extends(t.headers,a)}else{var l=CMCDController.toQuery(r);if(!l)return;t.url=CMCDController.appendQueryToUri(t.url,l)}},t.getObjectType=function getObjectType(t){var r=t.type;return"subtitle"===r?u.CMCDObjectType.TIMED_TEXT:"initSegment"===t.sn?u.CMCDObjectType.INIT:"audio"===r?u.CMCDObjectType.AUDIO:"main"===r?this.hls.audioTracks.length?u.CMCDObjectType.VIDEO:u.CMCDObjectType.MUXED:void 0},t.getTopBandwidth=function getTopBandwidth(t){var r,i=0,a=this.hls;if(t===u.CMCDObjectType.AUDIO)r=a.audioTracks;else{var l=a.maxAutoLevel,c=l>-1?l+1:a.levels.length;r=a.levels.slice(0,c)}for(var d,g=_createForOfIteratorHelperLoose(r);!(d=g()).done;){var p=d.value;p.bitrate>i&&(i=p.bitrate)}return i>0?i:NaN},t.getBufferLength=function getBufferLength(t){var r=this.hls.media,i=t===u.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return i&&r?1e3*l.BufferHelper.bufferInfo(i,r.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function createPlaylistLoader(){var t=this.config.pLoader,r=this.applyPlaylistData,i=t||this.config.loader;return function(){function CmcdPlaylistLoader(t){this.loader=void 0,this.loader=new i(t)}var t=CmcdPlaylistLoader.prototype;return t.destroy=function destroy(){this.loader.destroy()},t.abort=function abort(){this.loader.abort()},t.load=function load(t,i,a){r(t),this.loader.load(t,i,a)},_createClass(CmcdPlaylistLoader,[{key:"stats",get:function get(){return this.loader.stats}},{key:"context",get:function get(){return this.loader.context}}]),CmcdPlaylistLoader}()},t.createFragmentLoader=function createFragmentLoader(){var t=this.config.fLoader,r=this.applyFragmentData,i=t||this.config.loader;return function(){function CmcdFragmentLoader(t){this.loader=void 0,this.loader=new i(t)}var t=CmcdFragmentLoader.prototype;return t.destroy=function destroy(){this.loader.destroy()},t.abort=function abort(){this.loader.abort()},t.load=function load(t,i,a){r(t),this.loader.load(t,i,a)},_createClass(CmcdFragmentLoader,[{key:"stats",get:function get(){return this.loader.stats}},{key:"context",get:function get(){return this.loader.context}}]),CmcdFragmentLoader}()},CMCDController.uuid=function uuid(){var t=URL.createObjectURL(new Blob),uuid=t.toString();return URL.revokeObjectURL(t),uuid.substr(uuid.lastIndexOf("/")+1)},CMCDController.serialize=function serialize(t){for(var r,i=[],a=function isValid(t){return!Number.isNaN(t)&&null!=t&&""!==t&&!1!==t},u=function toRounded(t){return Math.round(t)},l=function toHundred(t){return 100*u(t/100)},c={br:u,d:u,bl:l,dl:l,mtp:l,nor:function toUrlSafe(t){return encodeURIComponent(t)},rtp:l,tb:u},d=_createForOfIteratorHelperLoose(Object.keys(t||{}).sort());!(r=d()).done;){var g=r.value,p=t[g];if(a(p)&&!("v"===g&&1===p||"pr"==g&&1===p)){var m=c[g];m&&(p=m(p));var v=typeof p,b=void 0;b="ot"===g||"sf"===g||"st"===g?g+"="+p:"boolean"===v?g:"number"===v?g+"="+p:g+"="+JSON.stringify(p),i.push(b)}}return i.join(",")},CMCDController.toHeaders=function toHeaders(t){for(var r={},i=["Object","Request","Session","Status"],a=[{},{},{},{}],u={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},l=0,c=Object.keys(t);l<c.length;l++){var d=c[l];a[null!=u[d]?u[d]:1][d]=t[d]}for(var g=0;g<a.length;g++){var p=CMCDController.serialize(a[g]);p&&(r["CMCD-"+i[g]]=p)}return r},CMCDController.toQuery=function toQuery(t){return"CMCD="+encodeURIComponent(CMCDController.serialize(t))},CMCDController.appendQueryToUri=function appendQueryToUri(t,r){if(!r)return t;var i=t.includes("?")?"&":"?";return""+t+i+r},CMCDController}()},"./src/controller/eme-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/eme-controller.ts ***!
    \******************************************/
/*! exports provided: default */function srcControllerEmeControllerTs(t,r,i){i.r(r);var a=i(/*! ../events */"./src/events.ts"),u=i(/*! ../errors */"./src/errors.ts"),l=i(/*! ../utils/logger */"./src/utils/logger.ts"),c=i(/*! ../utils/mediakeys-helper */"./src/utils/mediakeys-helper.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var d=function(){function EMEController(t){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=t,this._config=t.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var t=EMEController.prototype;return t.destroy=function destroy(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},t._registerListeners=function _registerListeners(){this.hls.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(a.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(a.Events.MANIFEST_PARSED,this.onManifestParsed,this)},t._unregisterListeners=function _unregisterListeners(){this.hls.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(a.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(a.Events.MANIFEST_PARSED,this.onManifestParsed,this)},t.getLicenseServerUrl=function getLicenseServerUrl(t){switch(t){case c.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},t._attemptKeySystemAccess=function _attemptKeySystemAccess(t,r,i){var a=this,u=function getSupportedMediaKeySystemConfigurations(t,r,i,a){if(t===c.KeySystems.WIDEVINE)return function createWidevineMediaKeySystemConfigurations(t,r,i){var a={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(t){a.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:i.audioRobustness||""})})),r.forEach((function(t){a.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:i.videoRobustness||""})})),[a]}(r,i,a);throw new Error("Unknown key-system: "+t)}(t,r,i,this._drmSystemOptions);l.logger.log("Requesting encrypted media key-system access");var d=this.requestMediaKeySystemAccess(t,u);this.mediaKeysPromise=d.then((function(r){return a._onMediaKeySystemAccessObtained(t,r)})),d.catch((function(r){l.logger.error('Failed to obtain key-system "'+t+'" access:',r)}))},t._onMediaKeySystemAccessObtained=function _onMediaKeySystemAccessObtained(t,r){var i=this;l.logger.log('Access for key-system "'+t+'" obtained');var a={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:r,mediaKeySystemDomain:t};this._mediaKeysList.push(a);var u=Promise.resolve().then((function(){return r.createMediaKeys()})).then((function(r){return a.mediaKeys=r,l.logger.log('Media-keys created for key-system "'+t+'"'),i._onMediaKeysCreated(),r}));return u.catch((function(t){l.logger.error("Failed to create media-keys:",t)})),u},t._onMediaKeysCreated=function _onMediaKeysCreated(){var t=this;this._mediaKeysList.forEach((function(r){r.mediaKeysSession||(r.mediaKeysSession=r.mediaKeys.createSession(),t._onNewMediaKeySession(r.mediaKeysSession))}))},t._onNewMediaKeySession=function _onNewMediaKeySession(t){var r=this;l.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(i){r._onKeySessionMessage(t,i.message)}),!1)},t._onKeySessionMessage=function _onKeySessionMessage(t,r){l.logger.log("Got EME message event, creating license request"),this._requestLicense(r,(function(r){l.logger.log("Received license data (length: "+(r?r.byteLength:r)+"), updating key-session"),t.update(r)}))},t.onMediaEncrypted=function onMediaEncrypted(t){var r=this;if(l.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!this.mediaKeysPromise)return l.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var i=function finallySetKeyAndStartSession(i){r._media&&(r._attemptSetMediaKeys(i),r._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};this.mediaKeysPromise.then(i).catch(i)},t._attemptSetMediaKeys=function _attemptSetMediaKeys(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var r=this._mediaKeysList[0];if(!r||!r.mediaKeys)return l.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});l.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(r.mediaKeys),this._hasSetMediaKeys=!0}},t._generateRequestWithPreferredKeySession=function _generateRequestWithPreferredKeySession(t,r){var i=this,c=this._mediaKeysList[0];if(!c)return l.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(c.mediaKeysSessionInitialized)l.logger.warn("Key-Session already initialized but requested again");else{var d=c.mediaKeysSession;if(!d)return l.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!r)return l.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});l.logger.log('Generating key-session request for "'+t+'" init data type'),c.mediaKeysSessionInitialized=!0,d.generateRequest(t,r).then((function(){l.logger.debug("Key-session generation succeeded")})).catch((function(t){l.logger.error("Error generating key-session request:",t),i.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},t._createLicenseXhr=function _createLicenseXhr(t,r,i){var a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,a,t,r,i);var u=this._licenseXhrSetup;if(u)try{u.call(this.hls,a,t),u=void 0}catch(t){l.logger.error(t)}try{a.readyState||a.open("POST",t,!0),u&&u.call(this.hls,a,t)}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return a},t._onLicenseRequestReadyStageChange=function _onLicenseRequestReadyStageChange(t,r,i,c){if(4===t.readyState)if(200===t.status){this._requestLicenseFailureCount=0,l.logger.log("License request succeeded");var d=t.response,g=this._licenseResponseCallback;if(g)try{d=g.call(this.hls,t,r)}catch(t){l.logger.error(t)}c(d)}else{if(l.logger.error("License Request XHR failed ("+r+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var p=3-this._requestLicenseFailureCount+1;l.logger.warn("Retrying license request, "+p+" attempts left"),this._requestLicense(i,c)}},t._generateLicenseRequestChallenge=function _generateLicenseRequestChallenge(t,r){if(t.mediaKeySystemDomain===c.KeySystems.WIDEVINE)return r;throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},t._requestLicense=function _requestLicense(t,r){l.logger.log("Requesting content license for key-system");var i=this._mediaKeysList[0];if(!i)return l.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var c=this.getLicenseServerUrl(i.mediaKeySystemDomain),d=this._createLicenseXhr(c,t,r);l.logger.log("Sending license request to URL: "+c);var g=this._generateLicenseRequestChallenge(i,t);d.send(g)}catch(t){l.logger.error("Failure requesting DRM license: "+t),this.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},t.onMediaAttached=function onMediaAttached(t,r){if(this._emeEnabled){var i=r.media;this._media=i,i.addEventListener("encrypted",this._onMediaEncrypted)}},t.onMediaDetached=function onMediaDetached(){var t=this._media,r=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(r.map((function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})))},t.onManifestParsed=function onManifestParsed(t,r){if(this._emeEnabled){var i=r.levels.map((function(t){return t.audioCodec})).filter((function(t){return!!t})),a=r.levels.map((function(t){return t.videoCodec})).filter((function(t){return!!t}));this._attemptKeySystemAccess(c.KeySystems.WIDEVINE,i,a)}},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(EMEController,[{key:"requestMediaKeySystemAccess",get:function get(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),EMEController}();r.default=d},"./src/controller/fps-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/fps-controller.ts ***!
    \******************************************/
/*! exports provided: default */function srcControllerFpsControllerTs(t,r,i){i.r(r);var a=i(/*! ../events */"./src/events.ts"),u=i(/*! ../utils/logger */"./src/utils/logger.ts"),l=function(){function FPSController(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var t=FPSController.prototype;return t.setStreamController=function setStreamController(t){this.streamController=t},t.registerListeners=function registerListeners(){this.hls.on(a.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function unregisterListeners(){this.hls.off(a.Events.MEDIA_ATTACHING,this.onMediaAttaching)},t.destroy=function destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function onMediaAttaching(t,r){var i=this.hls.config;if(i.capLevelOnFPSDrop){var a=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=a,a&&"function"==typeof a.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}},t.checkFPS=function checkFPS(t,r,i){var l=performance.now();if(r){if(this.lastTime){var c=l-this.lastTime,d=i-this.lastDroppedFrames,g=r-this.lastDecodedFrames,p=1e3*d/c,m=this.hls;if(m.trigger(a.Events.FPS_DROP,{currentDropped:d,currentDecoded:g,totalDroppedFrames:i}),p>0&&d>m.config.fpsDroppedMonitoringThreshold*g){var v=m.currentLevel;u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+v),v>0&&(-1===m.autoLevelCapping||m.autoLevelCapping>=v)&&(v-=1,m.trigger(a.Events.FPS_DROP_LEVEL_CAPPING,{level:v,droppedLevel:m.currentLevel}),m.autoLevelCapping=v,this.streamController.nextLevelSwitch())}}this.lastTime=l,this.lastDroppedFrames=i,this.lastDecodedFrames=r}},t.checkFPSInterval=function checkFPSInterval(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var r=t.getVideoPlaybackQuality();this.checkFPS(t,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},FPSController}();r.default=l},"./src/controller/fragment-finders.ts":
/*!********************************************!*\
    !*** ./src/controller/fragment-finders.ts ***!
    \********************************************/
/*! exports provided: findFragmentByPDT, findFragmentByPTS, fragmentWithinToleranceTest, pdtWithinToleranceTest, findFragWithCC */function srcControllerFragmentFindersTs(t,r,i){i.r(r),i.d(r,"findFragmentByPDT",(function(){return findFragmentByPDT})),i.d(r,"findFragmentByPTS",(function(){return findFragmentByPTS})),i.d(r,"fragmentWithinToleranceTest",(function(){return fragmentWithinToleranceTest})),i.d(r,"pdtWithinToleranceTest",(function(){return pdtWithinToleranceTest})),i.d(r,"findFragWithCC",(function(){return findFragWithCC}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../utils/binary-search */"./src/utils/binary-search.ts");function findFragmentByPDT(t,r,i){if(null===r||!Array.isArray(t)||!t.length||!Object(a.isFiniteNumber)(r))return null;if(r<(t[0].programDateTime||0))return null;if(r>=(t[t.length-1].endProgramDateTime||0))return null;i=i||0;for(var u=0;u<t.length;++u){var l=t[u];if(pdtWithinToleranceTest(r,i,l))return l}return null}function findFragmentByPTS(t,r,i,a){void 0===i&&(i=0),void 0===a&&(a=0);var l=null;if(t?l=r[t.sn-r[0].sn+1]||null:0===i&&0===r[0].start&&(l=r[0]),l&&0===fragmentWithinToleranceTest(i,a,l))return l;var c=u.default.search(r,fragmentWithinToleranceTest.bind(null,i,a));return c||l}function fragmentWithinToleranceTest(t,r,i){void 0===t&&(t=0),void 0===r&&(r=0);var a=Math.min(r,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-a<=t?1:i.start-a>t&&i.start?-1:0}function pdtWithinToleranceTest(t,r,i){var a=1e3*Math.min(r,i.duration+(i.deltaPTS?i.deltaPTS:0));return(i.endProgramDateTime||0)-a>t}function findFragWithCC(t,r){return u.default.search(t,(function(t){return t.cc<r?1:t.cc>r?-1:0}))}},"./src/controller/fragment-tracker.ts":
/*!********************************************!*\
    !*** ./src/controller/fragment-tracker.ts ***!
    \********************************************/
/*! exports provided: FragmentState, FragmentTracker */function srcControllerFragmentTrackerTs(t,r,i){i.r(r),i.d(r,"FragmentState",(function(){return a})),i.d(r,"FragmentTracker",(function(){return c}));var a,u=i(/*! ../events */"./src/events.ts"),l=i(/*! ../types/loader */"./src/types/loader.ts");!function(t){t.NOT_LOADED="NOT_LOADED",t.BACKTRACKED="BACKTRACKED",t.APPENDING="APPENDING",t.PARTIAL="PARTIAL",t.OK="OK"}(a||(a={}));var c=function(){function FragmentTracker(t){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=t,this._registerListeners()}var t=FragmentTracker.prototype;return t._registerListeners=function _registerListeners(){var t=this.hls;t.on(u.Events.BUFFER_APPENDED,this.onBufferAppended,this),t.on(u.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.on(u.Events.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function _unregisterListeners(){var t=this.hls;t.off(u.Events.BUFFER_APPENDED,this.onBufferAppended,this),t.off(u.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.off(u.Events.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function destroy(){this._unregisterListeners(),this.fragments=this.timeRanges=null},t.getAppendedFrag=function getAppendedFrag(t,r){if(r===l.PlaylistLevelType.MAIN){var i=this.activeFragment,a=this.activeParts;if(!i)return null;if(a)for(var u=a.length;u--;){var c=a[u],d=c?c.end:i.appendedPTS;if(c.start<=t&&void 0!==d&&t<=d)return u>9&&(this.activeParts=a.slice(u-9)),c}else if(i.start<=t&&void 0!==i.appendedPTS&&t<=i.appendedPTS)return i}return this.getBufferedFrag(t,r)},t.getBufferedFrag=function getBufferedFrag(t,r){for(var i=this.fragments,a=Object.keys(i),u=a.length;u--;){var l=i[a[u]];if((null==l?void 0:l.body.type)===r&&l.buffered){var c=l.body;if(c.start<=t&&t<=c.end)return c}}return null},t.detectEvictedFragments=function detectEvictedFragments(t,r,i){var a=this;Object.keys(this.fragments).forEach((function(u){var l=a.fragments[u];if(l)if(l.buffered){var c=l.range[t];c&&c.time.some((function(t){var i=!a.isTimeBuffered(t.startPTS,t.endPTS,r);return i&&a.removeFragment(l.body),i}))}else l.body.type===i&&a.removeFragment(l.body)}))},t.detectPartialFragments=function detectPartialFragments(t){var r=this,i=this.timeRanges,a=t.frag,u=t.part;if(i&&"initSegment"!==a.sn){var l=getFragmentKey(a),c=this.fragments[l];c&&(Object.keys(i).forEach((function(t){var l=a.elementaryStreams[t];if(l){var d=i[t],g=null!==u||!0===l.partial;c.range[t]=r.getBufferedTimes(a,u,g,d)}})),c.backtrack=c.loaded=null,Object.keys(c.range).length?c.buffered=!0:this.removeFragment(c.body))}},t.fragBuffered=function fragBuffered(t){var r=getFragmentKey(t),i=this.fragments[r];i&&(i.backtrack=i.loaded=null,i.buffered=!0)},t.getBufferedTimes=function getBufferedTimes(t,r,i,a){for(var u={time:[],partial:i},l=r?r.start:t.start,c=r?r.end:t.end,d=t.minEndPTS||c,g=t.maxStartPTS||l,p=0;p<a.length;p++){var m=a.start(p)-this.bufferPadding,v=a.end(p)+this.bufferPadding;if(g>=m&&d<=v){u.time.push({startPTS:Math.max(l,a.start(p)),endPTS:Math.min(c,a.end(p))});break}if(l<v&&c>m)u.partial=!0,u.time.push({startPTS:Math.max(l,a.start(p)),endPTS:Math.min(c,a.end(p))});else if(c<=m)break}return u},t.getPartialFragment=function getPartialFragment(t){var r,i,a,u=null,l=0,c=this.bufferPadding,d=this.fragments;return Object.keys(d).forEach((function(g){var p=d[g];p&&isPartial(p)&&(i=p.body.start-c,a=p.body.end+c,t>=i&&t<=a&&(r=Math.min(t-i,a-t),l<=r&&(u=p.body,l=r)))})),u},t.getState=function getState(t){var r=getFragmentKey(t),i=this.fragments[r];return i?i.buffered?isPartial(i)?a.PARTIAL:a.OK:i.backtrack?a.BACKTRACKED:a.APPENDING:a.NOT_LOADED},t.backtrack=function backtrack(t,r){var i=getFragmentKey(t),a=this.fragments[i];if(!a||a.backtrack)return null;var backtrack=a.backtrack=r||a.loaded;return a.loaded=null,backtrack},t.getBacktrackData=function getBacktrackData(t){var r=getFragmentKey(t),i=this.fragments[r];if(i){var a,u=i.backtrack;if(null!=u&&null!==(a=u.payload)&&void 0!==a&&a.byteLength)return u;this.removeFragment(t)}return null},t.isTimeBuffered=function isTimeBuffered(t,r,i){for(var a,u,l=0;l<i.length;l++){if(a=i.start(l)-this.bufferPadding,u=i.end(l)+this.bufferPadding,t>=a&&r<=u)return!0;if(r<=a)return!1}return!1},t.onFragLoaded=function onFragLoaded(t,r){var i=r.frag,a=r.part;if("initSegment"!==i.sn&&!i.bitrateTest&&!a){var u=getFragmentKey(i);this.fragments[u]={body:i,loaded:r,backtrack:null,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function onBufferAppended(t,r){var i=this,a=r.frag,u=r.part,c=r.timeRanges;if(a.type===l.PlaylistLevelType.MAIN)if(this.activeFragment=a,u){var d=this.activeParts;d||(this.activeParts=d=[]),d.push(u)}else this.activeParts=null;this.timeRanges=c,Object.keys(c).forEach((function(t){var r=c[t];if(i.detectEvictedFragments(t,r),!u)for(var l=0;l<r.length;l++)a.appendedPTS=Math.max(r.end(l),a.appendedPTS||0)}))},t.onFragBuffered=function onFragBuffered(t,r){this.detectPartialFragments(r)},t.hasFragment=function hasFragment(t){var r=getFragmentKey(t);return!!this.fragments[r]},t.removeFragmentsInRange=function removeFragmentsInRange(t,r,i){var a=this;Object.keys(this.fragments).forEach((function(u){var l=a.fragments[u];if(l&&l.buffered){var c=l.body;c.type===i&&c.start<r&&c.end>t&&a.removeFragment(c)}}))},t.removeFragment=function removeFragment(t){var r=getFragmentKey(t);t.stats.loaded=0,t.clearElementaryStreamInfo(),delete this.fragments[r]},t.removeAllFragments=function removeAllFragments(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},FragmentTracker}();function isPartial(t){var r,i;return t.buffered&&((null===(r=t.range.video)||void 0===r?void 0:r.partial)||(null===(i=t.range.audio)||void 0===i?void 0:i.partial))}function getFragmentKey(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}},"./src/controller/gap-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/gap-controller.ts ***!
    \******************************************/
/*! exports provided: STALL_MINIMUM_DURATION_MS, MAX_START_GAP_JUMP, SKIP_BUFFER_HOLE_STEP_SECONDS, SKIP_BUFFER_RANGE_START, default */function srcControllerGapControllerTs(t,r,i){i.r(r),i.d(r,"STALL_MINIMUM_DURATION_MS",(function(){return d})),i.d(r,"MAX_START_GAP_JUMP",(function(){return g})),i.d(r,"SKIP_BUFFER_HOLE_STEP_SECONDS",(function(){return p})),i.d(r,"SKIP_BUFFER_RANGE_START",(function(){return m})),i.d(r,"default",(function(){return v}));var a=i(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),u=i(/*! ../errors */"./src/errors.ts"),l=i(/*! ../events */"./src/events.ts"),c=i(/*! ../utils/logger */"./src/utils/logger.ts"),d=250,g=2,p=.1,m=.05,v=function(){function GapController(t,r,i,a){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=r,this.fragmentTracker=i,this.hls=a}var t=GapController.prototype;return t.destroy=function destroy(){this.hls=this.fragmentTracker=this.media=null},t.poll=function poll(t){var r=this.config,i=this.media,u=this.stalled,l=i.currentTime,p=i.seeking,m=this.seeking&&!p,v=!this.seeking&&p;if(this.seeking=p,l===t){if((v||m)&&(this.stalled=null),!i.paused&&!i.ended&&0!==i.playbackRate&&a.BufferHelper.getBuffered(i).length){var b=a.BufferHelper.bufferInfo(i,l,0),M=b.len>0,S=b.nextStart||0;if(M||S){if(p){var E=b.len>g,I=!S||S-l>g&&!this.fragmentTracker.getPartialFragment(l);if(E||I)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var D,A=Math.max(S,b.start||0)-l,C=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,N=(null==C||null===(D=C.details)||void 0===D?void 0:D.live)?2*C.details.targetduration:g;if(A>0&&A<=N)return void this._trySkipBufferHole(null)}var k=self.performance.now();if(null!==u){var O=k-u;!p&&O>=d&&this._reportStall(b.len);var L=a.BufferHelper.bufferInfo(i,l,r.maxBufferHole);this._tryFixBufferStall(L,O)}else this.stalled=k}}}else if(this.moved=!0,null!==u){if(this.stallReported){var R=self.performance.now()-u;c.logger.warn("playback not stuck anymore @"+l+", after "+Math.round(R)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function _tryFixBufferStall(t,r){var i=this.config,a=this.fragmentTracker,u=this.media.currentTime,l=a.getPartialFragment(u);l&&this._trySkipBufferHole(l)||t.len>i.maxBufferHole&&r>1e3*i.highBufferWatchdogPeriod&&(c.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function _reportStall(t){var r=this.hls,i=this.media;this.stallReported||(this.stallReported=!0,c.logger.warn("Playback stalling at @"+i.currentTime+" due to low buffer (buffer="+t+")"),r.trigger(l.Events.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},t._trySkipBufferHole=function _trySkipBufferHole(t){for(var r=this.config,i=this.hls,d=this.media,g=d.currentTime,v=0,b=a.BufferHelper.getBuffered(d),M=0;M<b.length;M++){var S=b.start(M);if(g+r.maxBufferHole>=v&&g<S){var E=Math.max(S+m,d.currentTime+p);return c.logger.warn("skipping hole, adjusting currentTime from "+g+" to "+E),this.moved=!0,this.stalled=null,d.currentTime=E,t&&i.trigger(l.Events.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+g+" to "+E,frag:t}),E}v=b.end(M)}return 0},t._tryNudgeBuffer=function _tryNudgeBuffer(){var t=this.config,r=this.hls,i=this.media,a=i.currentTime,d=(this.nudgeRetry||0)+1;if(this.nudgeRetry=d,d<t.nudgeMaxRetry){var g=a+d*t.nudgeOffset;c.logger.warn("Nudging 'currentTime' from "+a+" to "+g),i.currentTime=g,r.trigger(l.Events.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.logger.error("Playhead still not moving while enough data buffered @"+a+" after "+t.nudgeMaxRetry+" nudges"),r.trigger(l.Events.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},GapController}()},"./src/controller/id3-track-controller.ts":
/*!************************************************!*\
    !*** ./src/controller/id3-track-controller.ts ***!
    \************************************************/
/*! exports provided: default */function srcControllerId3TrackControllerTs(t,r,i){i.r(r);var a=i(/*! ../events */"./src/events.ts"),u=i(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),l=i(/*! ../demux/id3 */"./src/demux/id3.ts"),c=function(){function ID3TrackController(t){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=t,this._registerListeners()}var t=ID3TrackController.prototype;return t.destroy=function destroy(){this._unregisterListeners()},t._registerListeners=function _registerListeners(){var t=this.hls;t.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(a.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(a.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},t._unregisterListeners=function _unregisterListeners(){var t=this.hls;t.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(a.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(a.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},t.onMediaAttached=function onMediaAttached(t,r){this.media=r.media},t.onMediaDetaching=function onMediaDetaching(){this.id3Track&&(Object(u.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},t.getID3Track=function getID3Track(t){if(this.media){for(var r=0;r<t.length;r++){var i=t[r];if("metadata"===i.kind&&"id3"===i.label)return Object(u.sendAddTrackEvent)(i,this.media),i}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function onFragParsingMetadata(t,r){if(this.media){var i=r.frag,a=r.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var u=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,c=0;c<a.length;c++){var d=l.getID3Frames(a[c].data);if(d){var g=a[c].pts,p=c<a.length-1?a[c+1].pts:i.end;p-g<=0&&(p=g+.25);for(var m=0;m<d.length;m++){var v=d[m];if(!l.isTimeStampFrame(v)){var b=new u(g,p,"");b.value=v,this.id3Track.addCue(b)}}}}}},t.onBufferFlushing=function onBufferFlushing(t,r){var i=r.startOffset,a=r.endOffset,l=r.type;if(!l||"audio"===l){var c=this.id3Track;c&&Object(u.removeCuesInRange)(c,i,a)}},ID3TrackController}();r.default=c},"./src/controller/latency-controller.ts":
/*!**********************************************!*\
    !*** ./src/controller/latency-controller.ts ***!
    \**********************************************/
/*! exports provided: default */function srcControllerLatencyControllerTs(t,r,i){i.r(r),i.d(r,"default",(function(){return c}));var a=i(/*! ../errors */"./src/errors.ts"),u=i(/*! ../events */"./src/events.ts"),l=i(/*! ../utils/logger */"./src/utils/logger.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var c=function(){function LatencyController(t){var r=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return r.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}var t=LatencyController.prototype;return t.destroy=function destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},t.registerListeners=function registerListeners(){this.hls.on(u.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(u.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(u.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(u.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(u.Events.ERROR,this.onError,this)},t.unregisterListeners=function unregisterListeners(){this.hls.off(u.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(u.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(u.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(u.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(u.Events.ERROR,this.onError)},t.onMediaAttached=function onMediaAttached(t,r){this.media=r.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},t.onMediaDetaching=function onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},t.onManifestLoading=function onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0},t.onLevelUpdated=function onLevelUpdated(t,r){var i=r.details;this.levelDetails=i,i.advanced&&this.timeupdate(),!i.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},t.onError=function onError(t,r){r.details===a.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,l.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},t.timeupdate=function timeupdate(){var t=this.media,r=this.levelDetails;if(t&&r){this.currentTime=t.currentTime;var i=this.computeLatency();if(null!==i){this._latency=i;var a=this.config,u=a.lowLatencyMode,l=a.maxLiveSyncPlaybackRate;if(u&&1!==l){var c=this.targetLatency;if(null!==c){var d=i-c,g=d<Math.min(this.maxLatency,c+r.targetduration);if(r.live&&g&&d>.05&&this.forwardBufferLength>1){var p=Math.min(2,Math.max(1,l)),m=Math.round(2/(1+Math.exp(-.75*d-this.edgeStalled))*20)/20;t.playbackRate=Math.min(p,Math.max(1,m))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}}}}},t.estimateLiveEdge=function estimateLiveEdge(){var t=this.levelDetails;return null===t?null:t.edge+t.age},t.computeLatency=function computeLatency(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(LatencyController,[{key:"latency",get:function get(){return this._latency||0}},{key:"maxLatency",get:function get(){var t=this.config,r=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:r?t.liveMaxLatencyDurationCount*r.targetduration:0}},{key:"targetLatency",get:function get(){var t=this.levelDetails;if(null===t)return null;var r=t.holdBack,i=t.partHoldBack,a=t.targetduration,u=this.config,l=u.liveSyncDuration,c=u.liveSyncDurationCount,d=u.lowLatencyMode,g=this.hls.userConfig,p=d&&i||r;(g.liveSyncDuration||g.liveSyncDurationCount||0===p)&&(p=void 0!==l?l:c*a);var m=a;return p+Math.min(1*this.stallCount,m)}},{key:"liveSyncPosition",get:function get(){var t=this.estimateLiveEdge(),r=this.targetLatency,i=this.levelDetails;if(null===t||null===r||null===i)return null;var a=i.edge,u=t-r-this.edgeStalled,l=a-i.totalduration,c=a-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(l,u),c)}},{key:"drift",get:function get(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function get(){var t=this.levelDetails;if(null===t)return 0;var r=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-r,0)}},{key:"forwardBufferLength",get:function get(){var t=this.media,r=this.levelDetails;if(!t||!r)return 0;var i=t.buffered.length;return i?t.buffered.end(i-1):r.edge-this.currentTime}}]),LatencyController}()},"./src/controller/level-controller.ts":
/*!********************************************!*\
    !*** ./src/controller/level-controller.ts ***!
    \********************************************/
/*! exports provided: default */function srcControllerLevelControllerTs(t,r,i){i.r(r),i.d(r,"default",(function(){return v}));var a=i(/*! ../types/level */"./src/types/level.ts"),u=i(/*! ../events */"./src/events.ts"),l=i(/*! ../errors */"./src/errors.ts"),c=i(/*! ../utils/codecs */"./src/utils/codecs.ts"),d=i(/*! ./level-helper */"./src/controller/level-helper.ts"),g=i(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),p=i(/*! ../types/loader */"./src/types/loader.ts");function _extends(){return _extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},_extends.apply(this,arguments)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}var m=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),v=function(t){function LevelController(r){var i;return(i=t.call(this,r,"[level-controller]")||this)._levels=[],i._firstLevel=-1,i._startLevel=void 0,i.currentLevelIndex=-1,i.manualLevelIndex=-1,i.onParsedComplete=void 0,i._registerListeners(),i}!function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}(LevelController,t);var r=LevelController.prototype;return r._registerListeners=function _registerListeners(){var t=this.hls;t.on(u.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(u.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(u.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(u.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(u.Events.ERROR,this.onError,this)},r._unregisterListeners=function _unregisterListeners(){var t=this.hls;t.off(u.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(u.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(u.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(u.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(u.Events.ERROR,this.onError,this)},r.destroy=function destroy(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,t.prototype.destroy.call(this)},r.startLoad=function startLoad(){this._levels.forEach((function(t){t.loadError=0})),t.prototype.startLoad.call(this)},r.onManifestLoaded=function onManifestLoaded(t,r){var i,g,p=[],v=[],b=[],M={},S=!1,E=!1,I=!1;if(r.levels.forEach((function(t){var r=t.attrs;S=S||!(!t.width||!t.height),E=E||!!t.videoCodec,I=I||!!t.audioCodec,m&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0);var i=t.bitrate+"-"+t.attrs.RESOLUTION+"-"+t.attrs.CODECS;(g=M[i])?g.url.push(t.url):(g=new a.Level(t),M[i]=g,p.push(g)),r&&(r.AUDIO&&Object(d.addGroupId)(g,"audio",r.AUDIO),r.SUBTITLES&&Object(d.addGroupId)(g,"text",r.SUBTITLES))})),(S||E)&&I&&(p=p.filter((function(t){var r=t.videoCodec,i=t.width,a=t.height;return!!r||!(!i||!a)}))),p=p.filter((function(t){var r=t.audioCodec,i=t.videoCodec;return(!r||Object(c.isCodecSupportedInMp4)(r,"audio"))&&(!i||Object(c.isCodecSupportedInMp4)(i,"video"))})),r.audioTracks&&(v=r.audioTracks.filter((function(t){return!t.audioCodec||Object(c.isCodecSupportedInMp4)(t.audioCodec,"audio")})),Object(d.assignTrackIdsByGroup)(v)),r.subtitles&&(b=r.subtitles,Object(d.assignTrackIdsByGroup)(b)),p.length>0){i=p[0].bitrate,p.sort((function(t,r){return t.bitrate-r.bitrate})),this._levels=p;for(var D=0;D<p.length;D++)if(p[D].bitrate===i){this._firstLevel=D,this.log("manifest loaded, "+p.length+" level(s) found, first bitrate: "+i);break}var A=I&&!E,C={levels:p,audioTracks:v,subtitleTracks:b,firstLevel:this._firstLevel,stats:r.stats,audio:I,video:E,altAudio:!A&&v.some((function(t){return!!t.url}))};this.hls.trigger(u.Events.MANIFEST_PARSED,C),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(u.Events.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:r.url,reason:"no level with compatible codecs found in manifest"})},r.onError=function onError(r,i){if(t.prototype.onError.call(this,r,i),!i.fatal){var a=i.context,u=this._levels[this.currentLevelIndex];if(a&&(a.type===p.PlaylistContextType.AUDIO_TRACK&&u.audioGroupIds&&a.groupId===u.audioGroupIds[u.urlId]||a.type===p.PlaylistContextType.SUBTITLE_TRACK&&u.textGroupIds&&a.groupId===u.textGroupIds[u.urlId]))this.redundantFailover(this.currentLevelIndex);else{var c,d=!1,g=!0;switch(i.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:if(i.frag){var m=this._levels[i.frag.level];m?(m.fragmentError++,m.fragmentError>this.hls.config.fragLoadingMaxRetry&&(c=i.frag.level)):c=i.frag.level}break;case l.ErrorDetails.LEVEL_LOAD_ERROR:case l.ErrorDetails.LEVEL_LOAD_TIMEOUT:a&&(a.deliveryDirectives&&(g=!1),c=a.level),d=!0;break;case l.ErrorDetails.REMUX_ALLOC_ERROR:c=i.level,d=!0}void 0!==c&&this.recoverLevel(i,c,d,g)}}},r.recoverLevel=function recoverLevel(t,r,i,a){var u=t.details,l=this._levels[r];if(l.loadError++,i){if(!this.retryLoadingOrFail(t))return void(this.currentLevelIndex=-1);t.levelRetry=!0}if(a){var c=l.url.length;if(c>1&&l.loadError<c)t.levelRetry=!0,this.redundantFailover(r);else if(-1===this.manualLevelIndex){var d=0===r?this._levels.length-1:r-1;this.currentLevelIndex!==d&&0===this._levels[d].loadError&&(this.warn(u+": switch to "+d),t.levelRetry=!0,this.hls.nextAutoLevel=d)}}},r.redundantFailover=function redundantFailover(t){var r=this._levels[t],i=r.url.length;if(i>1){var a=(r.urlId+1)%i;this.warn("Switching to redundant URL-id "+a),this._levels.forEach((function(t){t.urlId=a})),this.level=t}},r.onFragLoaded=function onFragLoaded(t,r){var i=r.frag;if(void 0!==i&&i.type===p.PlaylistLevelType.MAIN){var a=this._levels[i.level];void 0!==a&&(a.fragmentError=0,a.loadError=0)}},r.onLevelLoaded=function onLevelLoaded(t,r){var i,a,u=r.level,l=r.details,c=this._levels[u];if(!c)return this.warn("Invalid level index "+u),void(null!==(a=r.deliveryDirectives)&&void 0!==a&&a.skip&&(l.deltaUpdateFailed=!0));u===this.currentLevelIndex?(0===c.fragmentError&&(c.loadError=0,this.retryCount=0),this.playlistLoaded(u,r,c.details)):null!==(i=r.deliveryDirectives)&&void 0!==i&&i.skip&&(l.deltaUpdateFailed=!0)},r.onAudioTrackSwitched=function onAudioTrackSwitched(t,r){var i=this.hls.levels[this.currentLevelIndex];if(i&&i.audioGroupIds){for(var a=-1,u=this.hls.audioTracks[r.id].groupId,l=0;l<i.audioGroupIds.length;l++)if(i.audioGroupIds[l]===u){a=l;break}a!==i.urlId&&(i.urlId=a,this.startLoad())}},r.loadPlaylist=function loadPlaylist(t){var r=this.currentLevelIndex,i=this._levels[r];if(this.canLoad&&i&&i.url.length>0){var a=i.urlId,l=i.url[a];if(t)try{l=t.addDirectives(l)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Attempt loading level index "+r+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+a+" "+l),this.clearTimer(),this.hls.trigger(u.Events.LEVEL_LOADING,{url:l,level:r,id:a,deliveryDirectives:t||null})}},r.removeLevel=function removeLevel(t,r){var i=function filterLevelAndGroupByIdIndex(t,i){return i!==r},a=this._levels.filter((function(a,u){return u!==t||a.url.length>1&&void 0!==r&&(a.url=a.url.filter(i),a.audioGroupIds&&(a.audioGroupIds=a.audioGroupIds.filter(i)),a.textGroupIds&&(a.textGroupIds=a.textGroupIds.filter(i)),a.urlId=0,!0)})).map((function(t,r){var i=t.details;return null!=i&&i.fragments&&i.fragments.forEach((function(t){t.level=r})),t}));this._levels=a,this.hls.trigger(u.Events.LEVELS_UPDATED,{levels:a})},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(LevelController,[{key:"levels",get:function get(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function get(){return this.currentLevelIndex},set:function set(t){var r,i=this._levels;if(0!==i.length&&(this.currentLevelIndex!==t||null===(r=i[t])||void 0===r||!r.details)){if(t<0||t>=i.length){var a=t<0;if(this.hls.trigger(u.Events.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:a,reason:"invalid level idx"}),a)return;t=Math.min(t,i.length-1)}this.clearTimer();var c=this.currentLevelIndex,d=i[c],g=i[t];this.log("switching to level "+t+" from "+c),this.currentLevelIndex=t;var p=_extends({},g,{level:t,maxBitrate:g.maxBitrate,uri:g.uri,urlId:g.urlId});delete p._urlId,this.hls.trigger(u.Events.LEVEL_SWITCHING,p);var m=g.details;if(!m||m.live){var v=this.switchParams(g.uri,null==d?void 0:d.details);this.loadPlaylist(v)}}}},{key:"manualLevel",get:function get(){return this.manualLevelIndex},set:function set(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function get(){return this._firstLevel},set:function set(t){this._firstLevel=t}},{key:"startLevel",get:function get(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function set(t){this._startLevel=t}},{key:"nextLoadLevel",get:function get(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function set(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),LevelController}(g.default)},"./src/controller/level-helper.ts":
/*!****************************************!*\
    !*** ./src/controller/level-helper.ts ***!
    \****************************************/
/*! exports provided: addGroupId, assignTrackIdsByGroup, updatePTS, updateFragPTSDTS, mergeDetails, mapPartIntersection, mapFragmentIntersection, adjustSliding, addSliding, computeReloadInterval, getFragmentWithSN, getPartWith */function srcControllerLevelHelperTs(t,r,i){i.r(r),i.d(r,"addGroupId",(function(){return addGroupId})),i.d(r,"assignTrackIdsByGroup",(function(){return assignTrackIdsByGroup})),i.d(r,"updatePTS",(function(){return updatePTS})),i.d(r,"updateFragPTSDTS",(function(){return updateFragPTSDTS})),i.d(r,"mergeDetails",(function(){return mergeDetails})),i.d(r,"mapPartIntersection",(function(){return mapPartIntersection})),i.d(r,"mapFragmentIntersection",(function(){return mapFragmentIntersection})),i.d(r,"adjustSliding",(function(){return adjustSliding})),i.d(r,"addSliding",(function(){return addSliding})),i.d(r,"computeReloadInterval",(function(){return computeReloadInterval})),i.d(r,"getFragmentWithSN",(function(){return getFragmentWithSN})),i.d(r,"getPartWith",(function(){return getPartWith}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../utils/logger */"./src/utils/logger.ts");function addGroupId(t,r,i){switch(r){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(i);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(i)}}function assignTrackIdsByGroup(t){var r={};t.forEach((function(t){var i=t.groupId||"";t.id=r[i]=r[i]||0,r[i]++}))}function updatePTS(t,r,i){updateFromToPTS(t[r],t[i])}function updateFromToPTS(t,r){var i=r.startPTS;if(Object(a.isFiniteNumber)(i)){var u,l=0;r.sn>t.sn?(l=i-t.start,u=t):(l=t.start-i,u=r),u.duration!==l&&(u.duration=l)}else r.sn>t.sn?t.cc===r.cc&&t.minEndPTS?r.start=t.start+(t.minEndPTS-t.start):r.start=t.start+t.duration:r.start=Math.max(t.start-r.duration,0)}function updateFragPTSDTS(t,r,i,l,c,d){l-i<=0&&(u.logger.warn("Fragment should have a positive duration",r),l=i+r.duration,d=c+r.duration);var g=i,p=l,m=r.startPTS,v=r.endPTS;if(Object(a.isFiniteNumber)(m)){var b=Math.abs(m-i);Object(a.isFiniteNumber)(r.deltaPTS)?r.deltaPTS=Math.max(b,r.deltaPTS):r.deltaPTS=b,g=Math.max(i,m),i=Math.min(i,m),c=Math.min(c,r.startDTS),p=Math.min(l,v),l=Math.max(l,v),d=Math.max(d,r.endDTS)}r.duration=l-i;var M=i-r.start;r.appendedPTS=l,r.start=r.startPTS=i,r.maxStartPTS=g,r.startDTS=c,r.endPTS=l,r.minEndPTS=p,r.endDTS=d;var S,E=r.sn;if(!t||E<t.startSN||E>t.endSN)return 0;var I=E-t.startSN,D=t.fragments;for(D[I]=r,S=I;S>0;S--)updateFromToPTS(D[S],D[S-1]);for(S=I;S<D.length-1;S++)updateFromToPTS(D[S],D[S+1]);return t.fragmentHint&&updateFromToPTS(D[D.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,M}function mergeDetails(t,r){for(var i=null,l=t.fragments,c=l.length-1;c>=0;c--){var d=l[c].initSegment;if(d){i=d;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var g,p=0;if(mapFragmentIntersection(t,r,(function(t,u){t.relurl&&(p=t.cc-u.cc),Object(a.isFiniteNumber)(t.startPTS)&&Object(a.isFiniteNumber)(t.endPTS)&&(u.start=u.startPTS=t.startPTS,u.startDTS=t.startDTS,u.appendedPTS=t.appendedPTS,u.maxStartPTS=t.maxStartPTS,u.endPTS=t.endPTS,u.endDTS=t.endDTS,u.minEndPTS=t.minEndPTS,u.duration=t.endPTS-t.startPTS,u.duration&&(g=u),r.PTSKnown=r.alignedSliding=!0),u.elementaryStreams=t.elementaryStreams,u.loader=t.loader,u.stats=t.stats,u.urlId=t.urlId,t.initSegment&&(u.initSegment=t.initSegment,i=t.initSegment)})),i&&(r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments).forEach((function(t){var r;t.initSegment&&t.initSegment.relurl!==(null===(r=i)||void 0===r?void 0:r.relurl)||(t.initSegment=i)})),r.skippedSegments&&(r.deltaUpdateFailed=r.fragments.some((function(t){return!t})),r.deltaUpdateFailed)){u.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var m=r.skippedSegments;m--;)r.fragments.shift();r.startSN=r.fragments[0].sn,r.startCC=r.fragments[0].cc}var v=r.fragments;if(p){u.logger.warn("discontinuity sliding from playlist, take drift into account");for(var b=0;b<v.length;b++)v[b].cc+=p}r.skippedSegments&&(r.startCC=r.fragments[0].cc),mapPartIntersection(t.partList,r.partList,(function(t,r){r.elementaryStreams=t.elementaryStreams,r.stats=t.stats})),g?updateFragPTSDTS(r,g,g.startPTS,g.endPTS,g.startDTS,g.endDTS):adjustSliding(t,r),v.length&&(r.totalduration=r.edge-v[0].start),r.driftStartTime=t.driftStartTime,r.driftStart=t.driftStart;var M=r.advancedDateTime;if(r.advanced&&M){var S=r.edge;r.driftStart||(r.driftStartTime=M,r.driftStart=S),r.driftEndTime=M,r.driftEnd=S}else r.driftEndTime=t.driftEndTime,r.driftEnd=t.driftEnd,r.advancedDateTime=t.advancedDateTime}function mapPartIntersection(t,r,i){if(t&&r)for(var a=0,u=0,l=t.length;u<=l;u++){var c=t[u],d=r[u+a];c&&d&&c.index===d.index&&c.fragment.sn===d.fragment.sn?i(c,d):a--}}function mapFragmentIntersection(t,r,i){for(var a=r.skippedSegments,u=Math.max(t.startSN,r.startSN)-r.startSN,l=(t.fragmentHint?1:0)+(a?r.endSN:Math.min(t.endSN,r.endSN))-r.startSN,c=r.startSN-t.startSN,d=r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments,g=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,p=u;p<=l;p++){var m=g[c+p],v=d[p];a&&!v&&p<a&&(v=r.fragments[p]=m),m&&v&&i(m,v)}}function adjustSliding(t,r){var i=r.startSN+r.skippedSegments-t.startSN,a=t.fragments;i<0||i>=a.length||addSliding(r,a[i].start)}function addSliding(t,r){if(r){for(var i=t.fragments,a=t.skippedSegments;a<i.length;a++)i[a].start+=r;t.fragmentHint&&(t.fragmentHint.start+=r)}}function computeReloadInterval(t,r){var i,a=1e3*t.levelTargetDuration,u=a/2,l=t.age,c=l>0&&l<3*a,d=r.loading.end-r.loading.start,g=t.availabilityDelay;if(!1===t.updated)if(c){var p=333*t.misses;i=Math.max(Math.min(u,2*d),p),t.availabilityDelay=(t.availabilityDelay||0)+i}else i=u;else c?(g=Math.min(g||a/2,l),t.availabilityDelay=g,i=g+a-l):i=a-d;return Math.round(i)}function getFragmentWithSN(t,r,i){if(!t||!t.details)return null;var a=t.details,u=a.fragments[r-a.startSN];return u||((u=a.fragmentHint)&&u.sn===r?u:r<a.startSN&&i&&i.sn===r?i:null)}function getPartWith(t,r,i){if(!t||!t.details)return null;var a=t.details.partList;if(a)for(var u=a.length;u--;){var l=a[u];if(l.index===i&&l.fragment.sn===r)return l}return null}},"./src/controller/stream-controller.ts":
/*!*********************************************!*\
    !*** ./src/controller/stream-controller.ts ***!
    \*********************************************/
/*! exports provided: default */function srcControllerStreamControllerTs(t,r,i){i.r(r),i.d(r,"default",(function(){return I}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),l=i(/*! ../is-supported */"./src/is-supported.ts"),c=i(/*! ../events */"./src/events.ts"),d=i(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),g=i(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),p=i(/*! ../types/loader */"./src/types/loader.ts"),m=i(/*! ../loader/fragment */"./src/loader/fragment.ts"),v=i(/*! ../demux/transmuxer-interface */"./src/demux/transmuxer-interface.ts"),b=i(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),M=i(/*! ./gap-controller */"./src/controller/gap-controller.ts"),S=i(/*! ../errors */"./src/errors.ts"),E=i(/*! ../utils/logger */"./src/utils/logger.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}var I=function(t){function StreamController(r,i){var a;return(a=t.call(this,r,i,"[stream-controller]")||this).audioCodecSwap=!1,a.gapController=null,a.level=-1,a._forceStartLoad=!1,a.altAudio=!1,a.audioOnly=!1,a.fragPlaying=null,a.onvplaying=null,a.onvseeked=null,a.fragLastKbps=0,a.stalled=!1,a.couldBacktrack=!1,a.audioCodecSwitch=!1,a.videoBuffer=null,a._registerListeners(),a}!function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}(StreamController,t);var r=StreamController.prototype;return r._registerListeners=function _registerListeners(){var t=this.hls;t.on(c.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(c.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(c.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(c.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(c.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(c.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(c.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(c.Events.ERROR,this.onError,this),t.on(c.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(c.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(c.Events.BUFFER_CREATED,this.onBufferCreated,this),t.on(c.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(c.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(c.Events.FRAG_BUFFERED,this.onFragBuffered,this)},r._unregisterListeners=function _unregisterListeners(){var t=this.hls;t.off(c.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(c.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(c.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(c.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(c.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(c.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(c.Events.ERROR,this.onError,this),t.off(c.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(c.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(c.Events.BUFFER_CREATED,this.onBufferCreated,this),t.off(c.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(c.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(c.Events.FRAG_BUFFERED,this.onFragBuffered,this)},r.onHandlerDestroying=function onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()},r.startLoad=function startLoad(t){if(this.levels){var r=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var a=i.startLevel;-1===a&&(i.config.testBandwidth?(a=0,this.bitrateTest=!0):a=i.nextAutoLevel),this.level=i.nextLoadLevel=a,this.loadedmetadata=!1}r>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+r.toFixed(3)),t=r),this.state=u.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=u.State.STOPPED},r.stopLoad=function stopLoad(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},r.doTick=function doTick(){switch(this.state){case u.State.IDLE:this.doTickIdle();break;case u.State.WAITING_LEVEL:var t,r=this.levels,i=this.level,a=null==r||null===(t=r[i])||void 0===t?void 0:t.details;if(a&&(!a.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(a))break;this.state=u.State.IDLE;break}break;case u.State.FRAG_LOADING_WAITING_RETRY:var l,c=self.performance.now(),d=this.retryDate;(!d||c>=d||null!==(l=this.media)&&void 0!==l&&l.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=u.State.IDLE)}this.onTickEnd()},r.onTickEnd=function onTickEnd(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},r.doTickIdle=function doTickIdle(){var t,r,i=this.hls,a=this.levelLastLoaded,l=this.levels,d=this.media,v=i.config,b=i.nextLoadLevel;if(null!==a&&(d||!this.startFragRequested&&v.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&l&&l[b]){var M=l[b];this.level=i.nextLoadLevel=b;var S=M.details;if(!S||this.state===u.State.WAITING_LEVEL||S.live&&this.levelLastLoaded!==b)this.state=u.State.WAITING_LEVEL;else{var E=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:d,p.PlaylistLevelType.MAIN);if(null!==E&&!(E.len>=this.getMaxBufferLength(M.maxBitrate))){if(this._streamEnded(E,S)){var I={};return this.altAudio&&(I.type="video"),this.hls.trigger(c.Events.BUFFER_EOS,I),void(this.state=u.State.ENDED)}var D=E.end,A=this.getNextFragment(D,S);if(this.couldBacktrack&&!this.fragPrevious&&A&&"initSegment"!==A.sn){var C=A.sn-S.startSN;C>1&&(A=S.fragments[C-1],this.fragmentTracker.removeFragment(A))}if(A&&this.fragmentTracker.getState(A)===g.FragmentState.OK&&this.nextLoadPosition>D){var N=this.audioOnly&&!this.altAudio?m.ElementaryStreamTypes.AUDIO:m.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(d,N,p.PlaylistLevelType.MAIN),A=this.getNextFragment(this.nextLoadPosition,S)}A&&(!A.initSegment||A.initSegment.data||this.bitrateTest||(A=A.initSegment),"identity"!==(null===(t=A.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(r=A.decryptdata)&&void 0!==r&&r.key?this.loadFragment(A,S,D):this.loadKey(A,S))}}}},r.loadFragment=function loadFragment(r,i,a){var u,l=this.fragmentTracker.getState(r);if(this.fragCurrent=r,l===g.FragmentState.BACKTRACKED){var c=this.fragmentTracker.getBacktrackData(r);if(c)return this._handleFragmentLoadProgress(c),void this._handleFragmentLoadComplete(c);l=g.FragmentState.NOT_LOADED}l===g.FragmentState.NOT_LOADED||l===g.FragmentState.PARTIAL?"initSegment"===r.sn?this._loadInitSegment(r):this.bitrateTest?(r.bitrateTest=!0,this.log("Fragment "+r.sn+" of level "+r.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(r)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,r,i,a)):l===g.FragmentState.APPENDING?this.reduceMaxBufferLength(r.duration)&&this.fragmentTracker.removeFragment(r):0===(null===(u=this.media)||void 0===u?void 0:u.buffered.length)&&this.fragmentTracker.removeAllFragments()},r.getAppendedFrag=function getAppendedFrag(t){var r=this.fragmentTracker.getAppendedFrag(t,p.PlaylistLevelType.MAIN);return r&&"fragment"in r?r.fragment:r},r.getBufferedFrag=function getBufferedFrag(t){return this.fragmentTracker.getBufferedFrag(t,p.PlaylistLevelType.MAIN)},r.followingBufferedFrag=function followingBufferedFrag(t){return t?this.getBufferedFrag(t.end+.5):null},r.immediateLevelSwitch=function immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},r.nextLevelSwitch=function nextLevelSwitch(){var t=this.levels,r=this.media;if(null!=r&&r.readyState){var i,a=this.getAppendedFrag(r.currentTime);if(a&&a.start>1&&this.flushMainBuffer(0,a.start-1),!r.paused&&t){var u=t[this.hls.nextLoadLevel],l=this.fragLastKbps;i=l&&this.fragCurrent?this.fragCurrent.duration*u.maxBitrate/(1e3*l)+1:0}else i=0;var c=this.getBufferedFrag(r.currentTime+i);if(c){var d=this.followingBufferedFrag(c);if(d){this.abortCurrentFrag();var g=d.maxStartPTS?d.maxStartPTS:d.start,p=d.duration,m=Math.max(c.end,g+Math.min(Math.max(p-this.config.maxFragLookUpTolerance,.5*p),.75*p));this.flushMainBuffer(m,Number.POSITIVE_INFINITY)}}}},r.abortCurrentFrag=function abortCurrentFrag(){var t=this.fragCurrent;this.fragCurrent=null,null!=t&&t.loader&&t.loader.abort(),this.state===u.State.KEY_LOADING&&(this.state=u.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},r.flushMainBuffer=function flushMainBuffer(r,i){t.prototype.flushMainBuffer.call(this,r,i,this.altAudio?"video":null)},r.onMediaAttached=function onMediaAttached(r,i){t.prototype.onMediaAttached.call(this,r,i);var a=i.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),a.addEventListener("playing",this.onvplaying),a.addEventListener("seeked",this.onvseeked),this.gapController=new M.default(this.config,a,this.fragmentTracker,this.hls)},r.onMediaDetaching=function onMediaDetaching(){var r=this.media;r&&(r.removeEventListener("playing",this.onvplaying),r.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},r.onMediaPlaying=function onMediaPlaying(){this.tick()},r.onMediaSeeked=function onMediaSeeked(){var t=this.media,r=t?t.currentTime:null;Object(a.isFiniteNumber)(r)&&this.log("Media seeked to "+r.toFixed(3)),this.tick()},r.onManifestLoading=function onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(c.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},r.onManifestParsed=function onManifestParsed(t,r){var i,a=!1,u=!1;r.levels.forEach((function(t){(i=t.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(a=!0),-1!==i.indexOf("mp4a.40.5")&&(u=!0))})),this.audioCodecSwitch=a&&u&&!Object(l.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=r.levels,this.startFragRequested=!1},r.onLevelLoading=function onLevelLoading(t,r){var i=this.levels;if(i&&this.state===u.State.IDLE){var a=i[r.level];(!a.details||a.details.live&&this.levelLastLoaded!==r.level||this.waitForCdnTuneIn(a.details))&&(this.state=u.State.WAITING_LEVEL)}},r.onLevelLoaded=function onLevelLoaded(t,r){var i,a=this.levels,l=r.level,d=r.details,g=d.totalduration;if(a){this.log("Level "+l+" loaded ["+d.startSN+","+d.endSN+"], cc ["+d.startCC+", "+d.endCC+"] duration:"+g);var p=this.fragCurrent;!p||this.state!==u.State.FRAG_LOADING&&this.state!==u.State.FRAG_LOADING_WAITING_RETRY||p.level!==r.level&&p.loader&&(this.state=u.State.IDLE,p.loader.abort());var m=a[l],v=0;if(d.live||null!==(i=m.details)&&void 0!==i&&i.live){if(d.fragments[0]||(d.deltaUpdateFailed=!0),d.deltaUpdateFailed)return;v=this.alignPlaylists(d,m.details)}if(m.details=d,this.levelLastLoaded=l,this.hls.trigger(c.Events.LEVEL_UPDATED,{details:d,level:l}),this.state===u.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(d))return;this.state=u.State.IDLE}this.startFragRequested?d.live&&this.synchronizeToLiveEdge(d):this.setStartPosition(d,v),this.tick()}else this.warn("Levels were reset while loading level "+l)},r._handleFragmentLoadProgress=function _handleFragmentLoadProgress(t){var r,i=t.frag,a=t.part,u=t.payload,l=this.levels;if(l){var c=l[i.level],d=c.details;if(d){var g=c.videoCodec,m=d.PTSKnown||!d.live,M=null===(r=i.initSegment)||void 0===r?void 0:r.data,S=this._getAudioCodec(c),E=this.transmuxer=this.transmuxer||new v.default(this.hls,p.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),I=a?a.index:-1,D=-1!==I,A=new b.ChunkMetadata(i.level,i.sn,i.stats.chunkCount,u.byteLength,I,D),C=this.initPTS[i.cc];E.push(u,M,S,g,i,a,d.totalduration,m,A,C)}else this.warn("Dropping fragment "+i.sn+" of level "+i.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+i.sn+" of level "+i.level+" will not be buffered")},r.onAudioTrackSwitching=function onAudioTrackSwitching(t,r){var i=this.altAudio,a=!!r.url,u=r.id;if(!a){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var l=this.fragCurrent;null!=l&&l.loader&&(this.log("Switching to main audio track, cancel main fragment load"),l.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var d=this.hls;i&&d.trigger(c.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),d.trigger(c.Events.AUDIO_TRACK_SWITCHED,{id:u})}},r.onAudioTrackSwitched=function onAudioTrackSwitched(t,r){var i=r.id,a=!!this.hls.audioTracks[i].url;if(a){var u=this.videoBuffer;u&&this.mediaBuffer!==u&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=u)}this.altAudio=a,this.tick()},r.onBufferCreated=function onBufferCreated(t,r){var i,a,u=r.tracks,l=!1;for(var c in u){var d=u[c];if("main"===d.id){if(a=c,i=d,"video"===c){var g=u[c];g&&(this.videoBuffer=g.buffer)}}else l=!0}l&&i?(this.log("Alternate track found, use "+a+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},r.onFragBuffered=function onFragBuffered(t,r){var i=r.frag,a=r.part;if(!i||i.type===p.PlaylistLevelType.MAIN){if(this.fragContextChanged(i))return this.warn("Fragment "+i.sn+(a?" p: "+a.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===u.State.PARSED&&(this.state=u.State.IDLE));var l=a?a.stats:i.stats;this.fragLastKbps=Math.round(8*l.total/(l.buffering.end-l.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,a)}},r.onError=function onError(t,r){switch(r.details){case S.ErrorDetails.FRAG_LOAD_ERROR:case S.ErrorDetails.FRAG_LOAD_TIMEOUT:case S.ErrorDetails.KEY_LOAD_ERROR:case S.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(p.PlaylistLevelType.MAIN,r);break;case S.ErrorDetails.LEVEL_LOAD_ERROR:case S.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==u.State.ERROR&&(r.fatal?(this.warn(""+r.details),this.state=u.State.ERROR):r.levelRetry||this.state!==u.State.WAITING_LEVEL||(this.state=u.State.IDLE));break;case S.ErrorDetails.BUFFER_FULL_ERROR:if("main"===r.parent&&(this.state===u.State.PARSING||this.state===u.State.PARSED)){var i=!0,a=this.getFwdBufferInfo(this.media,p.PlaylistLevelType.MAIN);a&&a.len>.5&&(i=!this.reduceMaxBufferLength(a.len)),i&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},r.checkBuffer=function checkBuffer(){var t=this.media,r=this.gapController;if(t&&r&&t.readyState){var i=d.BufferHelper.getBuffered(t);!this.loadedmetadata&&i.length?(this.loadedmetadata=!0,this.seekToStartPos()):r.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime}},r.onFragLoadEmergencyAborted=function onFragLoadEmergencyAborted(){this.state=u.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},r.onBufferFlushed=function onBufferFlushed(t,r){var i=r.type;if(i!==m.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var a=(i===m.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(a,i,p.PlaylistLevelType.MAIN)}},r.onLevelsUpdated=function onLevelsUpdated(t,r){this.levels=r.levels},r.swapAudioCodec=function swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap},r.seekToStartPos=function seekToStartPos(){var t=this.media,r=t.currentTime,i=this.startPosition;if(i>=0&&r<i){if(t.seeking)return void E.logger.log("could not seek to "+i+", already seeking at "+r);var a=d.BufferHelper.getBuffered(t),u=(a.length?a.start(0):0)-i;u>0&&(u<this.config.maxBufferHole||u<this.config.maxFragLookUpTolerance)&&(E.logger.log("adjusting start position by "+u+" to match buffer start"),i+=u,this.startPosition=i),this.log("seek to target start position "+i+" from current time "+r),t.currentTime=i}},r._getAudioCodec=function _getAudioCodec(t){var r=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&r&&(this.log("Swapping audio codec"),r=-1!==r.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),r},r._loadBitrateTestFrag=function _loadBitrateTestFrag(t){var r=this;this._doFragLoad(t).then((function(i){var a=r.hls;if(i&&!a.nextLoadLevel&&!r.fragContextChanged(t)){r.fragLoadError=0,r.state=u.State.IDLE,r.startFragRequested=!1,r.bitrateTest=!1;var l=t.stats;l.parsing.start=l.parsing.end=l.buffering.start=l.buffering.end=self.performance.now(),a.trigger(c.Events.FRAG_LOADED,i)}}))},r._handleTransmuxComplete=function _handleTransmuxComplete(t){var r,i="main",l=this.hls,d=t.remuxResult,g=t.chunkMeta,p=this.getCurrentContext(g);if(!p)return this.warn("The loading context changed while buffering fragment "+g.sn+" of level "+g.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(g.level);var v=p.frag,b=p.part,M=p.level,S=d.video,E=d.text,I=d.id3,D=d.initSegment,A=this.altAudio?void 0:d.audio;if(!this.fragContextChanged(v)){if(this.state=u.State.PARSING,D){D.tracks&&(this._bufferInitSegment(M,D.tracks,v,g),l.trigger(c.Events.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:i,tracks:D.tracks}));var C=D.initPTS,N=D.timescale;Object(a.isFiniteNumber)(C)&&(this.initPTS[v.cc]=C,l.trigger(c.Events.INIT_PTS_FOUND,{frag:v,id:i,initPTS:C,timescale:N}))}if(S&&!1!==d.independent){if(M.details){var k=S.startPTS,O=S.endPTS,L=S.startDTS,R=S.endDTS;if(b)b.elementaryStreams[S.type]={startPTS:k,endPTS:O,startDTS:L,endDTS:R};else if(S.firstKeyFrame&&S.independent&&(this.couldBacktrack=!0),S.dropped&&S.independent){if(this.getLoadPosition()+this.config.maxBufferHole<k)return void this.backtrack(v);v.setElementaryStreamInfo(S.type,v.start,O,v.start,R,!0)}v.setElementaryStreamInfo(S.type,k,O,L,R),this.bufferFragmentData(S,v,b,g)}}else if(!1===d.independent)return void this.backtrack(v);if(A){var j=A.startPTS,B=A.endPTS,U=A.startDTS,z=A.endDTS;b&&(b.elementaryStreams[m.ElementaryStreamTypes.AUDIO]={startPTS:j,endPTS:B,startDTS:U,endDTS:z}),v.setElementaryStreamInfo(m.ElementaryStreamTypes.AUDIO,j,B,U,z),this.bufferFragmentData(A,v,b,g)}if(null!=I&&null!==(r=I.samples)&&void 0!==r&&r.length){var Y={frag:v,id:i,samples:I.samples};l.trigger(c.Events.FRAG_PARSING_METADATA,Y)}if(E){var G={frag:v,id:i,samples:E.samples};l.trigger(c.Events.FRAG_PARSING_USERDATA,G)}}},r._bufferInitSegment=function _bufferInitSegment(t,r,i,a){var l=this;if(this.state===u.State.PARSING){this.audioOnly=!!r.audio&&!r.video,this.altAudio&&!this.audioOnly&&delete r.audio;var d=r.audio,g=r.video,p=r.audiovideo;if(d){var m=t.audioCodec,v=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(m&&(m=-1!==m.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==d.metadata.channelCount&&-1===v.indexOf("firefox")&&(m="mp4a.40.5")),-1!==v.indexOf("android")&&"audio/mpeg"!==d.container&&(m="mp4a.40.2",this.log("Android: force audio codec to "+m)),t.audioCodec&&t.audioCodec!==m&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+m+'"'),d.levelCodec=m,d.id="main",this.log("Init audio buffer, container:"+d.container+", codecs[selected/level/parsed]=["+(m||"")+"/"+(t.audioCodec||"")+"/"+d.codec+"]")}g&&(g.levelCodec=t.videoCodec,g.id="main",this.log("Init video buffer, container:"+g.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+g.codec+"]")),p&&this.log("Init audiovideo buffer, container:"+p.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+p.codec+"]"),this.hls.trigger(c.Events.BUFFER_CODECS,r),Object.keys(r).forEach((function(t){var u=r[t].initSegment;null!=u&&u.byteLength&&l.hls.trigger(c.Events.BUFFER_APPENDING,{type:t,data:u,frag:i,part:null,chunkMeta:a,parent:i.type})})),this.tick()}},r.backtrack=function backtrack(t){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(t);var r=this.fragmentTracker.backtrack(t);this.fragPrevious=null,this.nextLoadPosition=t.start,r?this.resetFragmentLoading(t):this.state=u.State.BACKTRACKING},r.checkFragmentChanged=function checkFragmentChanged(){var t=this.media,r=null;if(t&&t.readyState>1&&!1===t.seeking){var i=t.currentTime;if(d.BufferHelper.isBuffered(t,i)?r=this.getAppendedFrag(i):d.BufferHelper.isBuffered(t,i+.1)&&(r=this.getAppendedFrag(i+.1)),r){var a=this.fragPlaying,u=r.level;a&&r.sn===a.sn&&a.level===u&&r.urlId===a.urlId||(this.hls.trigger(c.Events.FRAG_CHANGED,{frag:r}),a&&a.level===u||this.hls.trigger(c.Events.LEVEL_SWITCHED,{level:u}),this.fragPlaying=r)}}},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(StreamController,[{key:"nextLevel",get:function get(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentLevel",get:function get(){var t=this.media;if(t){var r=this.getAppendedFrag(t.currentTime);if(r)return r.level}return-1}},{key:"nextBufferedFrag",get:function get(){var t=this.media;if(t){var r=this.getAppendedFrag(t.currentTime);return this.followingBufferedFrag(r)}return null}},{key:"forceStartLoad",get:function get(){return this._forceStartLoad}}]),StreamController}(u.default)},"./src/controller/subtitle-stream-controller.ts":
/*!******************************************************!*\
    !*** ./src/controller/subtitle-stream-controller.ts ***!
    \******************************************************/
/*! exports provided: SubtitleStreamController */function srcControllerSubtitleStreamControllerTs(t,r,i){i.r(r),i.d(r,"SubtitleStreamController",(function(){return b}));var a=i(/*! ../events */"./src/events.ts"),u=i(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),l=i(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),c=i(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),d=i(/*! ./level-helper */"./src/controller/level-helper.ts"),g=i(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),p=i(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),m=i(/*! ../types/loader */"./src/types/loader.ts"),v=i(/*! ../types/level */"./src/types/level.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}var b=function(t){function SubtitleStreamController(r,i){var a;return(a=t.call(this,r,i,"[subtitle-stream-controller]")||this).levels=[],a.currentTrackId=-1,a.tracksBuffered=[],a.mainDetails=null,a._registerListeners(),a}!function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}(SubtitleStreamController,t);var r=SubtitleStreamController.prototype;return r.onHandlerDestroying=function onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null},r._registerListeners=function _registerListeners(){var t=this.hls;t.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(a.Events.ERROR,this.onError,this),t.on(a.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(a.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(a.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(a.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(a.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},r._unregisterListeners=function _unregisterListeners(){var t=this.hls;t.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(a.Events.ERROR,this.onError,this),t.off(a.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(a.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(a.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(a.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(a.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},r.startLoad=function startLoad(){this.stopLoad(),this.state=p.State.IDLE,this.setInterval(500),this.tick()},r.onManifestLoading=function onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},r.onLevelLoaded=function onLevelLoaded(t,r){this.mainDetails=r.details},r.onSubtitleFragProcessed=function onSubtitleFragProcessed(t,r){var i=r.frag,a=r.success;if(this.fragPrevious=i,this.state=p.State.IDLE,a){var u=this.tracksBuffered[this.currentTrackId];if(u){for(var l,c=i.start,d=0;d<u.length;d++)if(c>=u[d].start&&c<=u[d].end){l=u[d];break}var g=i.start+i.duration;l?l.end=g:(l={start:c,end:g},u.push(l)),this.fragmentTracker.fragBuffered(i)}}},r.onBufferFlushing=function onBufferFlushing(t,r){var i=r.startOffset,a=r.endOffset;if(0===i&&a!==Number.POSITIVE_INFINITY){var u=this.currentTrackId,l=this.levels;if(!l.length||!l[u]||!l[u].details)return;var c=a-l[u].details.targetduration;if(c<=0)return;r.endOffsetSubtitles=Math.max(0,c),this.tracksBuffered.forEach((function(t){for(var r=0;r<t.length;)if(t[r].end<=c)t.shift();else{if(!(t[r].start<c))break;t[r].start=c,r++}})),this.fragmentTracker.removeFragmentsInRange(i,c,m.PlaylistLevelType.SUBTITLE)}},r.onError=function onError(t,r){var i,a=r.frag;a&&a.type===m.PlaylistLevelType.SUBTITLE&&(null!==(i=this.fragCurrent)&&void 0!==i&&i.loader&&this.fragCurrent.loader.abort(),this.state=p.State.IDLE)},r.onSubtitleTracksUpdated=function onSubtitleTracksUpdated(t,r){var i=this,a=r.subtitleTracks;this.tracksBuffered=[],this.levels=a.map((function(t){return new v.Level(t)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(t){i.tracksBuffered[t.id]=[]})),this.mediaBuffer=null},r.onSubtitleTrackSwitch=function onSubtitleTrackSwitch(t,r){if(this.currentTrackId=r.id,this.levels.length&&-1!==this.currentTrackId){var i=this.levels[this.currentTrackId];null!=i&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(500)}else this.clearInterval()},r.onSubtitleTrackLoaded=function onSubtitleTrackLoaded(t,r){var i,a=r.details,u=r.id,g=this.currentTrackId,m=this.levels;if(m.length){var v=m[g];if(!(u>=m.length||u!==g)&&v){if(this.mediaBuffer=this.mediaBufferTimeRanges,a.live||null!==(i=v.details)&&void 0!==i&&i.live){var b=this.mainDetails;if(a.deltaUpdateFailed||!b)return;var M=b.fragments[0];v.details?0===this.alignPlaylists(a,v.details)&&M&&Object(d.addSliding)(a,M.start):a.hasProgramDateTime&&b.hasProgramDateTime?Object(c.alignMediaPlaylistByPDT)(a,b):M&&Object(d.addSliding)(a,M.start)}v.details=a,this.levelLastLoaded=u,this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===p.State.IDLE&&(Object(l.findFragmentByPTS)(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),v.details=void 0))}}},r._handleFragmentLoadComplete=function _handleFragmentLoadComplete(t){var r=t.frag,i=t.payload,u=r.decryptdata,l=this.hls;if(!this.fragContextChanged(r)&&i&&i.byteLength>0&&u&&u.key&&u.iv&&"AES-128"===u.method){var c=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(i),u.key.buffer,u.iv.buffer).then((function(t){var i=performance.now();l.trigger(a.Events.FRAG_DECRYPTED,{frag:r,payload:t,stats:{tstart:c,tdecrypt:i}})}))}},r.doTick=function doTick(){if(this.media){if(this.state===p.State.IDLE){var t,r=this.currentTrackId,i=this.levels;if(!i.length||!i[r]||!i[r].details)return;var a=i[r].details,c=a.targetduration,d=this.config,m=this.media,v=u.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,m.currentTime-c,d.maxBufferHole),b=v.end;if(v.len>this.getMaxBufferLength()+c)return;console.assert(a,"Subtitle track details are defined on idle subtitle stream controller tick");var M,S=a.fragments,E=S.length,I=a.edge,D=this.fragPrevious;if(b<I){var A=d.maxFragLookUpTolerance;!(M=Object(l.findFragmentByPTS)(D,S,b,A))&&D&&D.start<S[0].start&&(M=S[0])}else M=S[E-1];null!==(t=M)&&void 0!==t&&t.encrypted?this.loadKey(M,a):M&&this.fragmentTracker.getState(M)===g.FragmentState.NOT_LOADED&&this.loadFragment(M,a,b)}}else this.state=p.State.IDLE},r.loadFragment=function loadFragment(r,i,a){this.fragCurrent=r,t.prototype.loadFragment.call(this,r,i,a)},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(SubtitleStreamController,[{key:"mediaBufferTimeRanges",get:function get(){return this.tracksBuffered[this.currentTrackId]||[]}}]),SubtitleStreamController}(p.default)},"./src/controller/subtitle-track-controller.ts":
/*!*****************************************************!*\
    !*** ./src/controller/subtitle-track-controller.ts ***!
    \*****************************************************/
/*! exports provided: default */function srcControllerSubtitleTrackControllerTs(t,r,i){i.r(r);var a=i(/*! ../events */"./src/events.ts"),u=i(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),l=i(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),c=i(/*! ../types/loader */"./src/types/loader.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}var d=function(t){function SubtitleTrackController(r){var i;return(i=t.call(this,r,"[subtitle-track-controller]")||this).media=null,i.tracks=[],i.groupId=null,i.tracksInGroup=[],i.trackId=-1,i.selectDefaultTrack=!0,i.queuedDefaultTrack=-1,i.trackChangeListener=function(){return i.onTextTracksChanged()},i.asyncPollTrackChange=function(){return i.pollTrackChange(0)},i.useTextTrackPolling=!1,i.subtitlePollingInterval=-1,i.subtitleDisplay=!0,i.registerListeners(),i}!function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}(SubtitleTrackController,t);var r=SubtitleTrackController.prototype;return r.destroy=function destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,t.prototype.destroy.call(this)},r.registerListeners=function registerListeners(){var t=this.hls;t.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(a.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(a.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(a.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(a.Events.ERROR,this.onError,this)},r.unregisterListeners=function unregisterListeners(){var t=this.hls;t.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(a.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(a.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(a.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(a.Events.ERROR,this.onError,this)},r.onMediaAttached=function onMediaAttached(t,r){this.media=r.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},r.pollTrackChange=function pollTrackChange(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},r.onMediaDetaching=function onMediaDetaching(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),filterSubtitleTracks(this.media.textTracks).forEach((function(t){Object(u.clearCurrentCues)(t)})),this.subtitleTrack=-1,this.media=null)},r.onManifestLoading=function onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},r.onManifestParsed=function onManifestParsed(t,r){this.tracks=r.subtitleTracks},r.onSubtitleTrackLoaded=function onSubtitleTrackLoaded(t,r){var i=r.id,a=r.details,u=this.trackId,l=this.tracksInGroup[u];if(l){var c=l.details;l.details=r.details,this.log("subtitle track "+i+" loaded ["+a.startSN+"-"+a.endSN+"]"),i===this.trackId&&(this.retryCount=0,this.playlistLoaded(i,r,c))}else this.warn("Invalid subtitle track id "+i)},r.onLevelLoading=function onLevelLoading(t,r){this.switchLevel(r.level)},r.onLevelSwitching=function onLevelSwitching(t,r){this.switchLevel(r.level)},r.switchLevel=function switchLevel(t){var r=this.hls.levels[t];if(null!=r&&r.textGroupIds){var i=r.textGroupIds[r.urlId];if(this.groupId!==i){var u=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,l=this.tracks.filter((function(t){return!i||t.groupId===i}));this.tracksInGroup=l;var c=this.findTrackId(null==u?void 0:u.name)||this.findTrackId();this.groupId=i;var d={subtitleTracks:l};this.log("Updating subtitle tracks, "+l.length+' track(s) found in "'+i+'" group-id'),this.hls.trigger(a.Events.SUBTITLE_TRACKS_UPDATED,d),-1!==c&&this.setSubtitleTrack(c,u)}}},r.findTrackId=function findTrackId(t){for(var r=this.tracksInGroup,i=0;i<r.length;i++){var a=r[i];if((!this.selectDefaultTrack||a.default)&&(!t||t===a.name))return a.id}return-1},r.onError=function onError(r,i){t.prototype.onError.call(this,r,i),!i.fatal&&i.context&&i.context.type===c.PlaylistContextType.SUBTITLE_TRACK&&i.context.id===this.trackId&&i.context.groupId===this.groupId&&this.retryLoadingOrFail(i)},r.loadPlaylist=function loadPlaylist(t){var r=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(r)){var i=r.id,u=r.groupId,l=r.url;if(t)try{l=t.addDirectives(l)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Loading subtitle playlist for id "+i),this.hls.trigger(a.Events.SUBTITLE_TRACK_LOADING,{url:l,id:i,groupId:u,deliveryDirectives:t||null})}},r.toggleTrackModes=function toggleTrackModes(t){var r=this,i=this.media,a=this.subtitleDisplay,u=this.trackId;if(i){var l=filterSubtitleTracks(i.textTracks),c=l.filter((function(t){return t.groupId===r.groupId}));if(-1===t)[].slice.call(l).forEach((function(t){t.mode="disabled"}));else{var d=c[u];d&&(d.mode="disabled")}var g=c[t];g&&(g.mode=a?"showing":"hidden")}},r.setSubtitleTrack=function setSubtitleTrack(t,r){var i,u=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(-1===t||null!==(i=u[t])&&void 0!==i&&i.details)||t<-1||t>=u.length)){this.clearTimer();var l=u[t];if(this.log("Switching to subtitle track "+t),this.trackId=t,l){var c=l.id,d=l.groupId,g=void 0===d?"":d,p=l.name,m=l.type,v=l.url;this.hls.trigger(a.Events.SUBTITLE_TRACK_SWITCH,{id:c,groupId:g,name:p,type:m,url:v});var b=this.switchParams(l.url,null==r?void 0:r.details);this.loadPlaylist(b)}else this.hls.trigger(a.Events.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},r.onTextTracksChanged=function onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,r=filterSubtitleTracks(this.media.textTracks),i=0;i<r.length;i++)if("hidden"===r[i].mode)t=i;else if("showing"===r[i].mode){t=i;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(SubtitleTrackController,[{key:"subtitleTracks",get:function get(){return this.tracksInGroup}},{key:"subtitleTrack",get:function get(){return this.trackId},set:function set(t){this.selectDefaultTrack=!1;var r=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,r)}}]),SubtitleTrackController}(l.default);function filterSubtitleTracks(t){for(var r=[],i=0;i<t.length;i++){var a=t[i];"subtitles"===a.kind&&a.label&&r.push(t[i])}return r}r.default=d},"./src/controller/timeline-controller.ts":
/*!***********************************************!*\
    !*** ./src/controller/timeline-controller.ts ***!
    \***********************************************/
/*! exports provided: TimelineController */function srcControllerTimelineControllerTs(t,r,i){i.r(r),i.d(r,"TimelineController",(function(){return b}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../events */"./src/events.ts"),l=i(/*! ../utils/cea-608-parser */"./src/utils/cea-608-parser.ts"),c=i(/*! ../utils/output-filter */"./src/utils/output-filter.ts"),d=i(/*! ../utils/webvtt-parser */"./src/utils/webvtt-parser.ts"),g=i(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),p=i(/*! ../utils/imsc1-ttml-parser */"./src/utils/imsc1-ttml-parser.ts"),m=i(/*! ../types/loader */"./src/types/loader.ts"),v=i(/*! ../utils/logger */"./src/utils/logger.ts"),b=function(){function TimelineController(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var r=new c.default(this,"textTrack1"),i=new c.default(this,"textTrack2"),a=new c.default(this,"textTrack3"),d=new c.default(this,"textTrack4");this.cea608Parser1=new l.default(1,r,i),this.cea608Parser2=new l.default(3,a,d)}t.on(u.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(u.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(u.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(u.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(u.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(u.Events.FRAG_LOADING,this.onFragLoading,this),t.on(u.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(u.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(u.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(u.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(u.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(u.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=TimelineController.prototype;return t.destroy=function destroy(){var t=this.hls;t.off(u.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(u.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(u.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(u.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(u.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(u.Events.FRAG_LOADING,this.onFragLoading,this),t.off(u.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(u.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(u.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(u.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(u.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(u.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},t.addCues=function addCues(t,r,i,a,l){for(var c,d,g,p,m=!1,v=l.length;v--;){var b=l[v],M=(c=b[0],d=b[1],g=r,p=i,Math.min(d,p)-Math.max(c,g));if(M>=0&&(b[0]=Math.min(b[0],r),b[1]=Math.max(b[1],i),m=!0,M/(i-r)>.5))return}if(m||l.push([r,i]),this.config.renderTextTracksNatively){var S=this.captionsTracks[t];this.Cues.newCue(S,r,i,a)}else{var E=this.Cues.newCue(null,r,i,a);this.hls.trigger(u.Events.CUES_PARSED,{type:"captions",cues:E,track:t})}},t.onInitPtsFound=function onInitPtsFound(t,r){var i=this,a=r.frag,l=r.id,c=r.initPTS,d=r.timescale,g=this.unparsedVttFrags;"main"===l&&(this.initPTS[a.cc]=c,this.timescale[a.cc]=d),g.length&&(this.unparsedVttFrags=[],g.forEach((function(t){i.onFragLoaded(u.Events.FRAG_LOADED,t)})))},t.getExistingTrack=function getExistingTrack(t){var r=this.media;if(r)for(var i=0;i<r.textTracks.length;i++){var a=r.textTracks[i];if(a[t])return a}return null},t.createCaptionsTrack=function createCaptionsTrack(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},t.createNativeTrack=function createNativeTrack(t){if(!this.captionsTracks[t]){var r=this.captionsProperties,i=this.captionsTracks,a=this.media,u=r[t],l=u.label,c=u.languageCode,d=this.getExistingTrack(t);if(d)i[t]=d,Object(g.clearCurrentCues)(i[t]),Object(g.sendAddTrackEvent)(i[t],a);else{var p=this.createTextTrack("captions",l,c);p&&(p[t]=!0,i[t]=p)}}},t.createNonNativeTrack=function createNonNativeTrack(t){if(!this.nonNativeCaptionsTracks[t]){var r=this.captionsProperties[t];if(r){var i={_id:t,label:r.label,kind:"captions",default:!!r.media&&!!r.media.default,closedCaptions:r.media};this.nonNativeCaptionsTracks[t]=i,this.hls.trigger(u.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}}},t.createTextTrack=function createTextTrack(t,r,i){var a=this.media;if(a)return a.addTextTrack(t,r,i)},t.onMediaAttaching=function onMediaAttaching(t,r){this.media=r.media,this._cleanTracks()},t.onMediaDetaching=function onMediaDetaching(){var t=this.captionsTracks;Object.keys(t).forEach((function(r){Object(g.clearCurrentCues)(t[r]),delete t[r]})),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function _cleanTracks(){var t=this.media;if(t){var r=t.textTracks;if(r)for(var i=0;i<r.length;i++)Object(g.clearCurrentCues)(r[i])}},t.onSubtitleTracksUpdated=function onSubtitleTracksUpdated(t,r){var i=this;this.textTracks=[];var a=r.subtitleTracks||[],l=a.some((function(t){return t.textCodec===p.IMSC1_CODEC}));if(this.config.enableWebVTT||l&&this.config.enableIMSC1){var c=this.tracks&&a&&this.tracks.length===a.length;if(this.tracks=a||[],this.config.renderTextTracksNatively){var d=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,r){var a;if(r<d.length){for(var u=null,l=0;l<d.length;l++)if(canReuseVttTextTrack(d[l],t)){u=d[l];break}u&&(a=u)}a?Object(g.clearCurrentCues)(a):(a=i.createTextTrack("subtitles",t.name,t.lang))&&(a.mode="disabled"),a&&(a.groupId=t.groupId,i.textTracks.push(a))}))}else if(!c&&this.tracks&&this.tracks.length){var m=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(u.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:m})}}},t.onManifestLoaded=function onManifestLoaded(t,r){var i=this;this.config.enableCEA708Captions&&r.captions&&r.captions.forEach((function(t){var r=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(r){var a="textTrack"+r[1],u=i.captionsProperties[a];u&&(u.label=t.name,t.lang&&(u.languageCode=t.lang),u.media=t)}}))},t.onFragLoading=function onFragLoading(t,r){var i=this.cea608Parser1,a=this.cea608Parser2,u=this.lastSn,l=this.lastPartIndex;if(this.enabled&&i&&a&&r.frag.type===m.PlaylistLevelType.MAIN){var c,d,g=r.frag.sn,p=null!=(c=null==r||null===(d=r.part)||void 0===d?void 0:d.index)?c:-1;g===u+1||g===u&&p===l+1||(i.reset(),a.reset()),this.lastSn=g,this.lastPartIndex=p}},t.onFragLoaded=function onFragLoaded(t,r){var i=r.frag,l=r.payload,c=this.initPTS,d=this.unparsedVttFrags;if(i.type===m.PlaylistLevelType.SUBTITLE)if(l.byteLength){if(!Object(a.isFiniteNumber)(c[i.cc]))return d.push(r),void(c.length&&this.hls.trigger(u.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Missing initial subtitle PTS")}));var g=i.decryptdata,v="stats"in r;if(null==g||null==g.key||"AES-128"!==g.method||v){var b=this.tracks[i.level],M=this.vttCCs;M[i.cc]||(M[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),b&&b.textCodec===p.IMSC1_CODEC?this._parseIMSC1(i,l):this._parseVTTs(i,l,M)}}else this.hls.trigger(u.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function _parseIMSC1(t,r){var i=this,a=this.hls;Object(p.parseIMSC1)(r,this.initPTS[t.cc],this.timescale[t.cc],(function(r){i._appendCues(r,t.level),a.trigger(u.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(r){v.logger.log("Failed to parse IMSC1: "+r),a.trigger(u.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:r})}))},t._parseVTTs=function _parseVTTs(t,r,i){var a=this,l=this.hls;Object(d.parseWebVTT)(r,this.initPTS[t.cc],this.timescale[t.cc],i,t.cc,t.start,(function(r){a._appendCues(r,t.level),l.trigger(u.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(i){a._fallbackToIMSC1(t,r),v.logger.log("Failed to parse VTT cue: "+i),l.trigger(u.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:i})}))},t._fallbackToIMSC1=function _fallbackToIMSC1(t,r){var i=this,a=this.tracks[t.level];a.textCodec||Object(p.parseIMSC1)(r,this.initPTS[t.cc],this.timescale[t.cc],(function(){a.textCodec=p.IMSC1_CODEC,i._parseIMSC1(t,r)}),(function(){a.textCodec="wvtt"}))},t._appendCues=function _appendCues(t,r){var i=this.hls;if(this.config.renderTextTracksNatively){var a=this.textTracks[r];if("disabled"===a.mode)return;t.forEach((function(t){return Object(g.addCueToTrack)(a,t)}))}else{var l=this.tracks[r].default?"default":"subtitles"+r;i.trigger(u.Events.CUES_PARSED,{type:"subtitles",cues:t,track:l})}},t.onFragDecrypted=function onFragDecrypted(t,r){var i=r.frag;if(i.type===m.PlaylistLevelType.SUBTITLE){if(!Object(a.isFiniteNumber)(this.initPTS[i.cc]))return void this.unparsedVttFrags.push(r);this.onFragLoaded(u.Events.FRAG_LOADED,r)}},t.onSubtitleTracksCleared=function onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function onFragParsingUserdata(t,r){var i=this.cea608Parser1,a=this.cea608Parser2;if(this.enabled&&i&&a)for(var u=0;u<r.samples.length;u++){var l=r.samples[u].bytes;if(l){var c=this.extractCea608Data(l);i.addData(r.samples[u].pts,c[0]),a.addData(r.samples[u].pts,c[1])}}},t.onBufferFlushing=function onBufferFlushing(t,r){var i=r.startOffset,a=r.endOffset,u=r.endOffsetSubtitles,l=r.type,c=this.media;if(c&&!(c.currentTime<a)){if(!l||"video"===l){var d=this.captionsTracks;Object.keys(d).forEach((function(t){return Object(g.removeCuesInRange)(d[t],i,a)}))}if(this.config.renderTextTracksNatively&&0===i&&void 0!==u){var p=this.textTracks;Object.keys(p).forEach((function(t){return Object(g.removeCuesInRange)(p[t],i,u)}))}}},t.extractCea608Data=function extractCea608Data(t){for(var r=31&t[0],i=2,a=[[],[]],u=0;u<r;u++){var l=t[i++],c=127&t[i++],d=127&t[i++],g=3&l;0===c&&0===d||0!=(4&l)&&(0!==g&&1!==g||(a[g].push(c),a[g].push(d)))}return a},TimelineController}();function canReuseVttTextTrack(t,r){return t&&t.label===r.name&&!(t.textTrack1||t.textTrack2)}},"./src/crypt/aes-crypto.ts":
/*!*********************************!*\
    !*** ./src/crypt/aes-crypto.ts ***!
    \*********************************/
/*! exports provided: default */function srcCryptAesCryptoTs(t,r,i){i.r(r),i.d(r,"default",(function(){return a}));var a=function(){function AESCrypto(t,r){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=r}return AESCrypto.prototype.decrypt=function decrypt(t,r){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},r,t)},AESCrypto}()},"./src/crypt/aes-decryptor.ts":
/*!************************************!*\
    !*** ./src/crypt/aes-decryptor.ts ***!
    \************************************/
/*! exports provided: removePadding, default */function srcCryptAesDecryptorTs(t,r,i){i.r(r),i.d(r,"removePadding",(function(){return removePadding})),i.d(r,"default",(function(){return u}));var a=i(/*! ../utils/typed-array */"./src/utils/typed-array.ts");function removePadding(t){var r=t.byteLength,i=r&&new DataView(t.buffer).getUint8(r-1);return i?Object(a.sliceUint8)(t,0,r-i):t}var u=function(){function AESDecryptor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=AESDecryptor.prototype;return t.uint8ArrayToUint32Array_=function uint8ArrayToUint32Array_(t){for(var r=new DataView(t),i=new Uint32Array(4),a=0;a<4;a++)i[a]=r.getUint32(4*a);return i},t.initTable=function initTable(){var t=this.sBox,r=this.invSBox,i=this.subMix,a=i[0],u=i[1],l=i[2],c=i[3],d=this.invSubMix,g=d[0],p=d[1],m=d[2],v=d[3],b=new Uint32Array(256),M=0,S=0,E=0;for(E=0;E<256;E++)b[E]=E<128?E<<1:E<<1^283;for(E=0;E<256;E++){var I=S^S<<1^S<<2^S<<3^S<<4;I=I>>>8^255&I^99,t[M]=I,r[I]=M;var D=b[M],A=b[D],C=b[A],N=257*b[I]^16843008*I;a[M]=N<<24|N>>>8,u[M]=N<<16|N>>>16,l[M]=N<<8|N>>>24,c[M]=N,N=16843009*C^65537*A^257*D^16843008*M,g[I]=N<<24|N>>>8,p[I]=N<<16|N>>>16,m[I]=N<<8|N>>>24,v[I]=N,M?(M=D^b[b[b[C^D]]],S^=b[b[S]]):M=S=1}},t.expandKey=function expandKey(t){for(var r=this.uint8ArrayToUint32Array_(t),i=!0,a=0;a<r.length&&i;)i=r[a]===this.key[a],a++;if(!i){this.key=r;var u=this.keySize=r.length;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size="+u);var l,c,d,g,p=this.ksRows=4*(u+6+1),m=this.keySchedule=new Uint32Array(p),v=this.invKeySchedule=new Uint32Array(p),b=this.sBox,M=this.rcon,S=this.invSubMix,E=S[0],I=S[1],D=S[2],A=S[3];for(l=0;l<p;l++)l<u?d=m[l]=r[l]:(g=d,l%u==0?(g=b[(g=g<<8|g>>>24)>>>24]<<24|b[g>>>16&255]<<16|b[g>>>8&255]<<8|b[255&g],g^=M[l/u|0]<<24):u>6&&l%u==4&&(g=b[g>>>24]<<24|b[g>>>16&255]<<16|b[g>>>8&255]<<8|b[255&g]),m[l]=d=(m[l-u]^g)>>>0);for(c=0;c<p;c++)l=p-c,g=3&c?m[l]:m[l-4],v[c]=c<4||l<=4?g:E[b[g>>>24]]^I[b[g>>>16&255]]^D[b[g>>>8&255]]^A[b[255&g]],v[c]=v[c]>>>0}},t.networkToHostOrderSwap=function networkToHostOrderSwap(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.decrypt=function decrypt(t,r,i){for(var a,u,l,c,d,g,p,m,v,b,M,S,E,I,D=this.keySize+6,A=this.invKeySchedule,C=this.invSBox,N=this.invSubMix,k=N[0],O=N[1],L=N[2],R=N[3],j=this.uint8ArrayToUint32Array_(i),B=j[0],U=j[1],z=j[2],Y=j[3],G=new Int32Array(t),H=new Int32Array(G.length),Q=this.networkToHostOrderSwap;r<G.length;){for(v=Q(G[r]),b=Q(G[r+1]),M=Q(G[r+2]),S=Q(G[r+3]),d=v^A[0],g=S^A[1],p=M^A[2],m=b^A[3],E=4,I=1;I<D;I++)a=k[d>>>24]^O[g>>16&255]^L[p>>8&255]^R[255&m]^A[E],u=k[g>>>24]^O[p>>16&255]^L[m>>8&255]^R[255&d]^A[E+1],l=k[p>>>24]^O[m>>16&255]^L[d>>8&255]^R[255&g]^A[E+2],c=k[m>>>24]^O[d>>16&255]^L[g>>8&255]^R[255&p]^A[E+3],d=a,g=u,p=l,m=c,E+=4;a=C[d>>>24]<<24^C[g>>16&255]<<16^C[p>>8&255]<<8^C[255&m]^A[E],u=C[g>>>24]<<24^C[p>>16&255]<<16^C[m>>8&255]<<8^C[255&d]^A[E+1],l=C[p>>>24]<<24^C[m>>16&255]<<16^C[d>>8&255]<<8^C[255&g]^A[E+2],c=C[m>>>24]<<24^C[d>>16&255]<<16^C[g>>8&255]<<8^C[255&p]^A[E+3],H[r]=Q(a^B),H[r+1]=Q(c^U),H[r+2]=Q(l^z),H[r+3]=Q(u^Y),B=v,U=b,z=M,Y=S,r+=4}return H.buffer},AESDecryptor}()},"./src/crypt/decrypter.ts":
/*!********************************!*\
    !*** ./src/crypt/decrypter.ts ***!
    \********************************/
/*! exports provided: default */function srcCryptDecrypterTs(t,r,i){i.r(r),i.d(r,"default",(function(){return p}));var a=i(/*! ./aes-crypto */"./src/crypt/aes-crypto.ts"),u=i(/*! ./fast-aes-key */"./src/crypt/fast-aes-key.ts"),l=i(/*! ./aes-decryptor */"./src/crypt/aes-decryptor.ts"),c=i(/*! ../utils/logger */"./src/utils/logger.ts"),d=i(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),g=i(/*! ../utils/typed-array */"./src/utils/typed-array.ts"),p=function(){function Decrypter(t,r,i){var a=(void 0===i?{}:i).removePKCS7Padding,u=void 0===a||a;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=t,this.config=r,this.removePKCS7Padding=u,u)try{var l=self.crypto;l&&(this.subtle=l.subtle||l.webkitSubtle)}catch(t){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var t=Decrypter.prototype;return t.destroy=function destroy(){this.observer=null},t.isSync=function isSync(){return this.config.enableSoftwareAES},t.flush=function flush(){var t=this.currentResult;if(t){var r=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?Object(l.removePadding)(r):r}this.reset()},t.reset=function reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function decrypt(t,r,i,a){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(t),r,i);var u=this.flush();u&&a(u.buffer)}else this.webCryptoDecrypt(new Uint8Array(t),r,i).then(a)},t.softwareDecrypt=function softwareDecrypt(t,r,i){var a=this.currentIV,u=this.currentResult,c=this.remainderData;this.logOnce("JS AES decrypt"),c&&(t=Object(d.appendUint8Array)(c,t),this.remainderData=null);var p=this.getValidChunk(t);if(!p.length)return null;a&&(i=a);var m=this.softwareDecrypter;m||(m=this.softwareDecrypter=new l.default),m.expandKey(r);var v=u;return this.currentResult=m.decrypt(p.buffer,0,i),this.currentIV=Object(g.sliceUint8)(p,-16).buffer,v||null},t.webCryptoDecrypt=function webCryptoDecrypt(t,r,i){var l=this,c=this.subtle;return this.key===r&&this.fastAesKey||(this.key=r,this.fastAesKey=new u.default(c,r)),this.fastAesKey.expandKey().then((function(r){return c?new a.default(c,i).decrypt(t.buffer,r):Promise.reject(new Error("web crypto not initialized"))})).catch((function(a){return l.onWebCryptoError(a,t,r,i)}))},t.onWebCryptoError=function onWebCryptoError(t,r,i,a){return c.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",t),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(r,i,a)},t.getValidChunk=function getValidChunk(t){var r=t,i=t.length-t.length%16;return i!==t.length&&(r=Object(g.sliceUint8)(t,0,i),this.remainderData=Object(g.sliceUint8)(t,i)),r},t.logOnce=function logOnce(t){this.logEnabled&&(c.logger.log("[decrypter.ts]: "+t),this.logEnabled=!1)},Decrypter}()},"./src/crypt/fast-aes-key.ts":
/*!***********************************!*\
    !*** ./src/crypt/fast-aes-key.ts ***!
    \***********************************/
/*! exports provided: default */function srcCryptFastAesKeyTs(t,r,i){i.r(r),i.d(r,"default",(function(){return a}));var a=function(){function FastAESKey(t,r){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=r}return FastAESKey.prototype.expandKey=function expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},FastAESKey}()},"./src/demux/aacdemuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/aacdemuxer.ts ***!
    \*********************************/
/*! exports provided: default */function srcDemuxAacdemuxerTs(t,r,i){i.r(r);var a=i(/*! ./base-audio-demuxer */"./src/demux/base-audio-demuxer.ts"),u=i(/*! ./adts */"./src/demux/adts.ts"),l=i(/*! ../utils/logger */"./src/utils/logger.ts"),c=i(/*! ../demux/id3 */"./src/demux/id3.ts");function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}var d=function(t){function AACDemuxer(r,i){var a;return(a=t.call(this)||this).observer=void 0,a.config=void 0,a.observer=r,a.config=i,a}!function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}(AACDemuxer,t);var r=AACDemuxer.prototype;return r.resetInitSegment=function resetInitSegment(r,i,a){t.prototype.resetInitSegment.call(this,r,i,a),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:r,duration:a,inputTimeScale:9e4,dropped:0}},AACDemuxer.probe=function probe(t){if(!t)return!1;for(var r=(c.getID3Data(t,0)||[]).length,i=t.length;r<i;r++)if(u.probe(t,r))return l.logger.log("ADTS sync word found !"),!0;return!1},r.canParse=function canParse(t,r){return u.canParse(t,r)},r.appendFrame=function appendFrame(t,r,i){u.initTrackConfig(t,this.observer,r,i,t.manifestCodec);var a=u.appendFrame(t,r,i,this.initPTS,this.frameIndex);if(a&&0===a.missing)return a},AACDemuxer}(a.default);d.minProbeByteLength=9,r.default=d},"./src/demux/adts.ts":
/*!***************************!*\
    !*** ./src/demux/adts.ts ***!
    \***************************/
/*! exports provided: getAudioConfig, isHeaderPattern, getHeaderLength, getFullFrameLength, canGetFrameLength, isHeader, canParse, probe, initTrackConfig, getFrameDuration, parseFrameHeader, appendFrame */function srcDemuxAdtsTs(t,r,i){i.r(r),i.d(r,"getAudioConfig",(function(){return getAudioConfig})),i.d(r,"isHeaderPattern",(function(){return isHeaderPattern})),i.d(r,"getHeaderLength",(function(){return getHeaderLength})),i.d(r,"getFullFrameLength",(function(){return getFullFrameLength})),i.d(r,"canGetFrameLength",(function(){return canGetFrameLength})),i.d(r,"isHeader",(function(){return isHeader})),i.d(r,"canParse",(function(){return canParse})),i.d(r,"probe",(function(){return probe})),i.d(r,"initTrackConfig",(function(){return initTrackConfig})),i.d(r,"getFrameDuration",(function(){return getFrameDuration})),i.d(r,"parseFrameHeader",(function(){return parseFrameHeader})),i.d(r,"appendFrame",(function(){return appendFrame}));var a=i(/*! ../utils/logger */"./src/utils/logger.ts"),u=i(/*! ../errors */"./src/errors.ts"),l=i(/*! ../events */"./src/events.ts");function getAudioConfig(t,r,i,c){var d,g,p,m,v=navigator.userAgent.toLowerCase(),b=c,M=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];d=1+((192&r[i+2])>>>6);var S=(60&r[i+2])>>>2;if(!(S>M.length-1))return p=(1&r[i+2])<<2,p|=(192&r[i+3])>>>6,a.logger.log("manifest codec:"+c+", ADTS type:"+d+", samplingIndex:"+S),/firefox/i.test(v)?S>=6?(d=5,m=new Array(4),g=S-3):(d=2,m=new Array(2),g=S):-1!==v.indexOf("android")?(d=2,m=new Array(2),g=S):(d=5,m=new Array(4),c&&(-1!==c.indexOf("mp4a.40.29")||-1!==c.indexOf("mp4a.40.5"))||!c&&S>=6?g=S-3:((c&&-1!==c.indexOf("mp4a.40.2")&&(S>=6&&1===p||/vivaldi/i.test(v))||!c&&1===p)&&(d=2,m=new Array(2)),g=S)),m[0]=d<<3,m[0]|=(14&S)>>1,m[1]|=(1&S)<<7,m[1]|=p<<3,5===d&&(m[1]|=(14&g)>>1,m[2]=(1&g)<<7,m[2]|=8,m[3]=0),{config:m,samplerate:M[S],channelCount:p,codec:"mp4a.40."+d,manifestCodec:b};t.trigger(l.Events.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+S})}function isHeaderPattern(t,r){return 255===t[r]&&240==(246&t[r+1])}function getHeaderLength(t,r){return 1&t[r+1]?7:9}function getFullFrameLength(t,r){return(3&t[r+3])<<11|t[r+4]<<3|(224&t[r+5])>>>5}function canGetFrameLength(t,r){return r+5<t.length}function isHeader(t,r){return r+1<t.length&&isHeaderPattern(t,r)}function canParse(t,r){return canGetFrameLength(t,r)&&isHeaderPattern(t,r)&&getFullFrameLength(t,r)<=t.length-r}function probe(t,r){if(isHeader(t,r)){var i=getHeaderLength(t,r);if(r+i>=t.length)return!1;var a=getFullFrameLength(t,r);if(a<=i)return!1;var u=r+a;return u===t.length||isHeader(t,u)}return!1}function initTrackConfig(t,r,i,u,l){if(!t.samplerate){var c=getAudioConfig(r,i,u,l);if(!c)return;t.config=c.config,t.samplerate=c.samplerate,t.channelCount=c.channelCount,t.codec=c.codec,t.manifestCodec=c.manifestCodec,a.logger.log("parsed codec:"+t.codec+", rate:"+c.samplerate+", channels:"+c.channelCount)}}function getFrameDuration(t){return 9216e4/t}function parseFrameHeader(t,r,i,a,u){var l=getHeaderLength(t,r),c=getFullFrameLength(t,r);if((c-=l)>0)return{headerLength:l,frameLength:c,stamp:i+a*u}}function appendFrame(t,r,i,a,u){var l=parseFrameHeader(r,i,a,u,getFrameDuration(t.samplerate));if(l){var c,d=l.frameLength,g=l.headerLength,p=l.stamp,m=g+d,v=Math.max(0,i+m-r.length);v?(c=new Uint8Array(m-g)).set(r.subarray(i+g,r.length),0):c=r.subarray(i+g,i+m);var b={unit:c,pts:p};return v||t.samples.push(b),{sample:b,length:m,missing:v}}}},"./src/demux/base-audio-demuxer.ts":
/*!*****************************************!*\
    !*** ./src/demux/base-audio-demuxer.ts ***!
    \*****************************************/
/*! exports provided: initPTSFn, default */function srcDemuxBaseAudioDemuxerTs(t,r,i){i.r(r),i.d(r,"initPTSFn",(function(){return p}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../demux/id3 */"./src/demux/id3.ts"),l=i(/*! ./dummy-demuxed-track */"./src/demux/dummy-demuxed-track.ts"),c=i(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),d=i(/*! ../utils/typed-array */"./src/utils/typed-array.ts"),g=function(){function BaseAudioDemuxer(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var t=BaseAudioDemuxer.prototype;return t.resetInitSegment=function resetInitSegment(t,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function resetTimeStamp(){},t.resetContiguity=function resetContiguity(){},t.canParse=function canParse(t,r){return!1},t.appendFrame=function appendFrame(t,r,i){},t.demux=function demux(t,r){this.cachedData&&(t=Object(c.appendUint8Array)(this.cachedData,t),this.cachedData=null);var i,a,g=u.getID3Data(t,0),m=g?g.length:0,v=this._audioTrack,b=this._id3Track,M=g?u.getTimeStamp(g):void 0,S=t.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=p(M,r)),g&&g.length>0&&b.samples.push({pts:this.initPTS,dts:this.initPTS,data:g}),a=this.initPTS;m<S;){if(this.canParse(t,m)){var E=this.appendFrame(v,t,m);E?(this.frameIndex++,a=E.sample.pts,i=m+=E.length):m=S}else u.canParse(t,m)?(g=u.getID3Data(t,m),b.samples.push({pts:a,dts:a,data:g}),i=m+=g.length):m++;if(m===S&&i!==S){var I=Object(d.sliceUint8)(t,i);this.cachedData?this.cachedData=Object(c.appendUint8Array)(this.cachedData,I):this.cachedData=I}}return{audioTrack:v,avcTrack:Object(l.dummyTrack)(),id3Track:b,textTrack:Object(l.dummyTrack)()}},t.demuxSampleAes=function demuxSampleAes(t,r,i){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function flush(t){var r=this.cachedData;return r&&(this.cachedData=null,this.demux(r,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(l.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(l.dummyTrack)()}},t.destroy=function destroy(){},BaseAudioDemuxer}(),p=function initPTSFn(t,r){return Object(a.isFiniteNumber)(t)?90*t:9e4*r};r.default=g},"./src/demux/chunk-cache.ts":
/*!**********************************!*\
    !*** ./src/demux/chunk-cache.ts ***!
    \**********************************/
/*! exports provided: default */function srcDemuxChunkCacheTs(t,r,i){i.r(r),i.d(r,"default",(function(){return a}));var a=function(){function ChunkCache(){this.chunks=[],this.dataLength=0}var t=ChunkCache.prototype;return t.push=function push(t){this.chunks.push(t),this.dataLength+=t.length},t.flush=function flush(){var t,r=this.chunks,i=this.dataLength;return r.length?(t=1===r.length?r[0]:function concatUint8Arrays(t,r){for(var i=new Uint8Array(r),a=0,u=0;u<t.length;u++){var l=t[u];i.set(l,a),a+=l.length}return i}(r,i),this.reset(),t):new Uint8Array(0)},t.reset=function reset(){this.chunks.length=0,this.dataLength=0},ChunkCache}()},"./src/demux/dummy-demuxed-track.ts":
/*!******************************************!*\
    !*** ./src/demux/dummy-demuxed-track.ts ***!
    \******************************************/
/*! exports provided: dummyTrack */function srcDemuxDummyDemuxedTrackTs(t,r,i){function dummyTrack(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}i.r(r),i.d(r,"dummyTrack",(function(){return dummyTrack}))},"./src/demux/exp-golomb.ts":
/*!*********************************!*\
    !*** ./src/demux/exp-golomb.ts ***!
    \*********************************/
/*! exports provided: default */function srcDemuxExpGolombTs(t,r,i){i.r(r);var a=i(/*! ../utils/logger */"./src/utils/logger.ts"),u=function(){function ExpGolomb(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var t=ExpGolomb.prototype;return t.loadWord=function loadWord(){var t=this.data,r=this.bytesAvailable,i=t.byteLength-r,a=new Uint8Array(4),u=Math.min(4,r);if(0===u)throw new Error("no bytes available");a.set(t.subarray(i,i+u)),this.word=new DataView(a.buffer).getUint32(0),this.bitsAvailable=8*u,this.bytesAvailable-=u},t.skipBits=function skipBits(t){var r;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(r=t>>3)>>3,this.bytesAvailable-=r,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.readBits=function readBits(t){var r=Math.min(this.bitsAvailable,t),i=this.word>>>32-r;return t>32&&a.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,this.bitsAvailable>0?this.word<<=r:this.bytesAvailable>0&&this.loadWord(),(r=t-r)>0&&this.bitsAvailable?i<<r|this.readBits(r):i},t.skipLZ=function skipLZ(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.skipUEG=function skipUEG(){this.skipBits(1+this.skipLZ())},t.skipEG=function skipEG(){this.skipBits(1+this.skipLZ())},t.readUEG=function readUEG(){var t=this.skipLZ();return this.readBits(t+1)-1},t.readEG=function readEG(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.readBoolean=function readBoolean(){return 1===this.readBits(1)},t.readUByte=function readUByte(){return this.readBits(8)},t.readUShort=function readUShort(){return this.readBits(16)},t.readUInt=function readUInt(){return this.readBits(32)},t.skipScalingList=function skipScalingList(t){for(var r=8,i=8,a=0;a<t;a++)0!==i&&(i=(r+this.readEG()+256)%256),r=0===i?r:i},t.readSPS=function readSPS(){var t,r,i,a=0,u=0,l=0,c=0,d=this.readUByte.bind(this),g=this.readBits.bind(this),p=this.readUEG.bind(this),m=this.readBoolean.bind(this),v=this.skipBits.bind(this),b=this.skipEG.bind(this),M=this.skipUEG.bind(this),S=this.skipScalingList.bind(this);d();var E=d();if(g(5),v(3),d(),M(),100===E||110===E||122===E||244===E||44===E||83===E||86===E||118===E||128===E){var I=p();if(3===I&&v(1),M(),M(),v(1),m())for(r=3!==I?8:12,i=0;i<r;i++)m()&&S(i<6?16:64)}M();var D=p();if(0===D)p();else if(1===D)for(v(1),b(),b(),t=p(),i=0;i<t;i++)b();M(),v(1);var A=p(),C=p(),N=g(1);0===N&&v(1),v(1),m()&&(a=p(),u=p(),l=p(),c=p());var k=[1,1];if(m()&&m())switch(d()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:k=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(A+1)-2*a-2*u),height:(2-N)*(C+1)*16-(N?2:4)*(l+c),pixelRatio:k}},t.readSliceType=function readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()},ExpGolomb}();r.default=u},"./src/demux/id3.ts":
/*!**************************!*\
    !*** ./src/demux/id3.ts ***!
    \**************************/
/*! exports provided: isHeader, isFooter, getID3Data, canParse, getTimeStamp, isTimeStampFrame, getID3Frames, decodeFrame, utf8ArrayToStr, testables */function srcDemuxId3Ts(t,r,i){i.r(r),i.d(r,"isHeader",(function(){return u})),i.d(r,"isFooter",(function(){return l})),i.d(r,"getID3Data",(function(){return c})),i.d(r,"canParse",(function(){return g})),i.d(r,"getTimeStamp",(function(){return p})),i.d(r,"isTimeStampFrame",(function(){return m})),i.d(r,"getID3Frames",(function(){return b})),i.d(r,"decodeFrame",(function(){return M})),i.d(r,"utf8ArrayToStr",(function(){return A})),i.d(r,"testables",(function(){return C}));var a,u=function isHeader(t,r){return r+10<=t.length&&73===t[r]&&68===t[r+1]&&51===t[r+2]&&t[r+3]<255&&t[r+4]<255&&t[r+6]<128&&t[r+7]<128&&t[r+8]<128&&t[r+9]<128},l=function isFooter(t,r){return r+10<=t.length&&51===t[r]&&68===t[r+1]&&73===t[r+2]&&t[r+3]<255&&t[r+4]<255&&t[r+6]<128&&t[r+7]<128&&t[r+8]<128&&t[r+9]<128},c=function getID3Data(t,r){for(var i=r,a=0;u(t,r);)a+=10,a+=d(t,r+6),l(t,r+10)&&(a+=10),r+=a;if(a>0)return t.subarray(i,i+a)},d=function readSize(t,r){var i=0;return i=(127&t[r])<<21,i|=(127&t[r+1])<<14,i|=(127&t[r+2])<<7,i|=127&t[r+3]},g=function canParse(t,r){return u(t,r)&&d(t,r+6)+10<=t.length-r},p=function getTimeStamp(t){for(var r=b(t),i=0;i<r.length;i++){var a=r[i];if(m(a))return D(a)}},m=function isTimeStampFrame(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},v=function getFrameData(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),i=d(t,4);return{type:r,size:i,data:t.subarray(10,10+i)}},b=function getID3Frames(t){for(var r=0,i=[];u(t,r);){for(var a=d(t,r+6),c=(r+=10)+a;r+8<c;){var g=v(t.subarray(r)),p=M(g);p&&i.push(p),r+=g.size+10}l(t,r)&&(r+=10)}return i},M=function decodeFrame(t){return"PRIV"===t.type?S(t):"W"===t.type[0]?I(t):E(t)},S=function decodePrivFrame(t){if(!(t.size<2)){var r=A(t.data,!0),i=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:i.buffer}}},E=function decodeTextFrame(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,i=A(t.data.subarray(r),!0);r+=i.length+1;var a=A(t.data.subarray(r));return{key:t.type,info:i,data:a}}var u=A(t.data.subarray(1));return{key:t.type,data:u}}},I=function decodeURLFrame(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,i=A(t.data.subarray(r),!0);r+=i.length+1;var a=A(t.data.subarray(r));return{key:t.type,info:i,data:a}}var u=A(t.data);return{key:t.type,data:u}},D=function readTimeStamp(t){if(8===t.data.byteLength){var r=new Uint8Array(t.data),i=1&r[3],a=(r[4]<<23)+(r[5]<<15)+(r[6]<<7)+r[7];return a/=45,i&&(a+=47721858.84),Math.round(a)}},A=function utf8ArrayToStr(t,r){void 0===r&&(r=!1);var i=getTextDecoder();if(i){var a=i.decode(t);if(r){var u=a.indexOf("\0");return-1!==u?a.substring(0,u):a}return a.replace(/\0/g,"")}for(var l,c,d,g=t.length,p="",m=0;m<g;){if(0===(l=t[m++])&&r)return p;if(0!==l&&3!==l)switch(l>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:p+=String.fromCharCode(l);break;case 12:case 13:c=t[m++],p+=String.fromCharCode((31&l)<<6|63&c);break;case 14:c=t[m++],d=t[m++],p+=String.fromCharCode((15&l)<<12|(63&c)<<6|(63&d)<<0)}}return p},C={decodeTextFrame:E};function getTextDecoder(){return a||void 0===self.TextDecoder||(a=new self.TextDecoder("utf-8")),a}},"./src/demux/mp3demuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/mp3demuxer.ts ***!
    \*********************************/
/*! exports provided: default */function srcDemuxMp3demuxerTs(t,r,i){i.r(r);var a=i(/*! ./base-audio-demuxer */"./src/demux/base-audio-demuxer.ts"),u=i(/*! ../demux/id3 */"./src/demux/id3.ts"),l=i(/*! ../utils/logger */"./src/utils/logger.ts"),c=i(/*! ./mpegaudio */"./src/demux/mpegaudio.ts");function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}var d=function(t){function MP3Demuxer(){return t.apply(this,arguments)||this}!function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}(MP3Demuxer,t);var r=MP3Demuxer.prototype;return r.resetInitSegment=function resetInitSegment(r,i,a){t.prototype.resetInitSegment.call(this,r,i,a),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:r,duration:a,inputTimeScale:9e4,dropped:0}},MP3Demuxer.probe=function probe(t){if(!t)return!1;for(var r=(u.getID3Data(t,0)||[]).length,i=t.length;r<i;r++)if(c.probe(t,r))return l.logger.log("MPEG Audio sync word found !"),!0;return!1},r.canParse=function canParse(t,r){return c.canParse(t,r)},r.appendFrame=function appendFrame(t,r,i){if(null!==this.initPTS)return c.appendFrame(t,r,i,this.initPTS,this.frameIndex)},MP3Demuxer}(a.default);d.minProbeByteLength=4,r.default=d},"./src/demux/mp4demuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/mp4demuxer.ts ***!
    \*********************************/
/*! exports provided: default */function srcDemuxMp4demuxerTs(t,r,i){i.r(r);var a=i(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),u=i(/*! ./dummy-demuxed-track */"./src/demux/dummy-demuxed-track.ts"),l=function(){function MP4Demuxer(t,r){this.remainderData=null,this.config=void 0,this.config=r}var t=MP4Demuxer.prototype;return t.resetTimeStamp=function resetTimeStamp(){},t.resetInitSegment=function resetInitSegment(){},t.resetContiguity=function resetContiguity(){},MP4Demuxer.probe=function probe(t){return Object(a.findBox)({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},t.demux=function demux(t){var r=t,i=Object(u.dummyTrack)();if(this.config.progressive){this.remainderData&&(r=Object(a.appendUint8Array)(this.remainderData,t));var l=Object(a.segmentValidRange)(r);this.remainderData=l.remainder,i.samples=l.valid||new Uint8Array}else i.samples=r;return{audioTrack:Object(u.dummyTrack)(),avcTrack:i,id3Track:Object(u.dummyTrack)(),textTrack:Object(u.dummyTrack)()}},t.flush=function flush(){var t=Object(u.dummyTrack)();return t.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(u.dummyTrack)(),avcTrack:t,id3Track:Object(u.dummyTrack)(),textTrack:Object(u.dummyTrack)()}},t.demuxSampleAes=function demuxSampleAes(t,r,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function destroy(){},MP4Demuxer}();l.minProbeByteLength=1024,r.default=l},"./src/demux/mpegaudio.ts":
/*!********************************!*\
    !*** ./src/demux/mpegaudio.ts ***!
    \********************************/
/*! exports provided: appendFrame, parseHeader, isHeaderPattern, isHeader, canParse, probe */function srcDemuxMpegaudioTs(t,r,i){i.r(r),i.d(r,"appendFrame",(function(){return appendFrame})),i.d(r,"parseHeader",(function(){return parseHeader})),i.d(r,"isHeaderPattern",(function(){return isHeaderPattern})),i.d(r,"isHeader",(function(){return isHeader})),i.d(r,"canParse",(function(){return canParse})),i.d(r,"probe",(function(){return probe}));var a=null,u=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],l=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],c=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],d=[0,1,1,4];function appendFrame(t,r,i,a,u){if(!(i+24>r.length)){var l=parseHeader(r,i);if(l&&i+l.frameLength<=r.length){var c=a+u*(9e4*l.samplesPerFrame/l.sampleRate),d={unit:r.subarray(i,i+l.frameLength),pts:c,dts:c};return t.config=[],t.channelCount=l.channelCount,t.samplerate=l.sampleRate,t.samples.push(d),{sample:d,length:l.frameLength,missing:0}}}}function parseHeader(t,r){var i=t[r+1]>>3&3,g=t[r+1]>>1&3,p=t[r+2]>>4&15,m=t[r+2]>>2&3;if(1!==i&&0!==p&&15!==p&&3!==m){var v=t[r+2]>>1&1,b=t[r+3]>>6,M=1e3*u[14*(3===i?3-g:3===g?3:4)+p-1],S=l[3*(3===i?0:2===i?1:2)+m],E=3===b?1:2,I=c[i][g],D=d[g],A=8*I*D,C=Math.floor(I*M/S+v)*D;if(null===a){var N=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);a=N?parseInt(N[1]):0}return!!a&&a<=87&&2===g&&M>=224e3&&0===b&&(t[r+3]=128|t[r+3]),{sampleRate:S,channelCount:E,frameLength:C,samplesPerFrame:A}}}function isHeaderPattern(t,r){return 255===t[r]&&224==(224&t[r+1])&&0!=(6&t[r+1])}function isHeader(t,r){return r+1<t.length&&isHeaderPattern(t,r)}function canParse(t,r){return isHeaderPattern(t,r)&&4<=t.length-r}function probe(t,r){if(r+1<t.length&&isHeaderPattern(t,r)){var i=parseHeader(t,r),a=4;null!=i&&i.frameLength&&(a=i.frameLength);var u=r+a;return u===t.length||isHeader(t,u)}return!1}},"./src/demux/sample-aes.ts":
/*!*********************************!*\
    !*** ./src/demux/sample-aes.ts ***!
    \*********************************/
/*! exports provided: default */function srcDemuxSampleAesTs(t,r,i){i.r(r);var a=i(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),u=i(/*! ./tsdemuxer */"./src/demux/tsdemuxer.ts"),l=function(){function SampleAesDecrypter(t,r,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new a.default(t,r,{removePKCS7Padding:!1})}var t=SampleAesDecrypter.prototype;return t.decryptBuffer=function decryptBuffer(t,r){this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,r)},t.decryptAacSample=function decryptAacSample(t,r,i,a){var u=t[r].unit,l=u.subarray(16,u.length-u.length%16),c=l.buffer.slice(l.byteOffset,l.byteOffset+l.length),d=this;this.decryptBuffer(c,(function(l){var c=new Uint8Array(l);u.set(c,16),a||d.decryptAacSamples(t,r+1,i)}))},t.decryptAacSamples=function decryptAacSamples(t,r,i){for(;;r++){if(r>=t.length)return void i();if(!(t[r].unit.length<32)){var a=this.decrypter.isSync();if(this.decryptAacSample(t,r,i,a),!a)return}}},t.getAvcEncryptedData=function getAvcEncryptedData(t){for(var r=16*Math.floor((t.length-48)/160)+16,i=new Int8Array(r),a=0,u=32;u<t.length-16;u+=160,a+=16)i.set(t.subarray(u,u+16),a);return i},t.getAvcDecryptedUnit=function getAvcDecryptedUnit(t,r){for(var i=new Uint8Array(r),a=0,u=32;u<t.length-16;u+=160,a+=16)t.set(i.subarray(a,a+16),u);return t},t.decryptAvcSample=function decryptAvcSample(t,r,i,a,l,c){var d=Object(u.discardEPB)(l.data),g=this.getAvcEncryptedData(d),p=this;this.decryptBuffer(g.buffer,(function(u){l.data=p.getAvcDecryptedUnit(d,u),c||p.decryptAvcSamples(t,r,i+1,a)}))},t.decryptAvcSamples=function decryptAvcSamples(t,r,i,a){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;r++,i=0){if(r>=t.length)return void a();for(var u=t[r].units;!(i>=u.length);i++){var l=u[i];if(!(l.data.length<=48||1!==l.type&&5!==l.type)){var c=this.decrypter.isSync();if(this.decryptAvcSample(t,r,i,a,l,c),!c)return}}}},SampleAesDecrypter}();r.default=l},"./src/demux/transmuxer-interface.ts":
/*!*******************************************!*\
    !*** ./src/demux/transmuxer-interface.ts ***!
    \*******************************************/
/*! exports provided: default */function srcDemuxTransmuxerInterfaceTs(t,r,i){i.r(r),i.d(r,"default",(function(){return v}));var a=i(/*! webworkify-webpack */"./node_modules/webworkify-webpack/index.js"),u=i(/*! ../events */"./src/events.ts"),l=i(/*! ../demux/transmuxer */"./src/demux/transmuxer.ts"),c=i(/*! ../utils/logger */"./src/utils/logger.ts"),d=i(/*! ../errors */"./src/errors.ts"),g=i(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.ts"),p=i(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),m=Object(g.getMediaSource)()||{isTypeSupported:function isTypeSupported(){return!1}},v=function(){function TransmuxerInterface(t,r,i,g){var v=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=t,this.id=r,this.onTransmuxComplete=i,this.onFlush=g;var b=t.config,M=function forwardMessage(r,i){(i=i||{}).frag=v.frag,i.id=v.id,t.trigger(r,i)};this.observer=new p.EventEmitter,this.observer.on(u.Events.FRAG_DECRYPTED,M),this.observer.on(u.Events.ERROR,M);var S={mp4:m.isTypeSupported("video/mp4"),mpeg:m.isTypeSupported("audio/mpeg"),mp3:m.isTypeSupported('audio/mp4; codecs="mp3"')},E=navigator.vendor;if(b.enableWorker&&"undefined"!=typeof Worker){var I;c.logger.log("demuxing in webworker");try{I=this.worker=a(/*! ../demux/transmuxer-worker.ts */"./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),I.addEventListener("message",this.onwmsg),I.onerror=function(r){t.trigger(u.Events.ERROR,{type:d.ErrorTypes.OTHER_ERROR,details:d.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(r.message+"  ("+r.filename+":"+r.lineno+")")})},I.postMessage({cmd:"init",typeSupported:S,vendor:E,id:r,config:JSON.stringify(b)})}catch(t){c.logger.warn("Error in worker:",t),c.logger.error("Error while initializing DemuxerWorker, fallback to inline"),I&&self.URL.revokeObjectURL(I.objectURL),this.transmuxer=new l.default(this.observer,S,b,E,r),this.worker=null}}else this.transmuxer=new l.default(this.observer,S,b,E,r)}var t=TransmuxerInterface.prototype;return t.destroy=function destroy(){var t=this.worker;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.worker=null;else{var r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}var i=this.observer;i&&i.removeAllListeners(),this.observer=null},t.push=function push(t,r,i,a,u,d,g,p,m,v){var b,M,S=this;m.transmuxing.start=self.performance.now();var E=this.transmuxer,I=this.worker,D=d?d.start:u.start,A=u.decryptdata,C=this.frag,N=!(C&&u.cc===C.cc),k=!(C&&m.level===C.level),O=C?m.sn-C.sn:-1,L=this.part?m.part-this.part.index:1,R=!k&&(1===O||0===O&&1===L),j=self.performance.now();(k||O||0===u.stats.parsing.start)&&(u.stats.parsing.start=j),!d||!L&&R||(d.stats.parsing.start=j);var B=!(C&&(null===(b=u.initSegment)||void 0===b?void 0:b.url)===(null===(M=C.initSegment)||void 0===M?void 0:M.url)),U=new l.TransmuxState(N,R,p,k,D,B);if(!R||N||B){c.logger.log("[transmuxer-interface, "+u.type+"]: Starting new transmux session for sn: "+m.sn+" p: "+m.part+" level: "+m.level+" id: "+m.id+"\n        discontinuity: "+N+"\n        trackSwitch: "+k+"\n        contiguous: "+R+"\n        accurateTimeOffset: "+p+"\n        timeOffset: "+D+"\n        initSegmentChange: "+B);var z=new l.TransmuxConfig(i,a,r,g,v);this.configureTransmuxer(z)}if(this.frag=u,this.part=d,I)I.postMessage({cmd:"demux",data:t,decryptdata:A,chunkMeta:m,state:U},t instanceof ArrayBuffer?[t]:[]);else if(E){var Y=E.push(t,A,m,U);Object(l.isPromise)(Y)?Y.then((function(t){S.handleTransmuxComplete(t)})):this.handleTransmuxComplete(Y)}},t.flush=function flush(t){var r=this;t.transmuxing.start=self.performance.now();var i=this.transmuxer,a=this.worker;if(a)a.postMessage({cmd:"flush",chunkMeta:t});else if(i){var u=i.flush(t);Object(l.isPromise)(u)?u.then((function(i){r.handleFlushResult(i,t)})):this.handleFlushResult(u,t)}},t.handleFlushResult=function handleFlushResult(t,r){var i=this;t.forEach((function(t){i.handleTransmuxComplete(t)})),this.onFlush(r)},t.onWorkerMessage=function onWorkerMessage(t){var r=t.data,i=this.hls;switch(r.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(r.data);break;case"flush":this.onFlush(r.data);break;default:r.data=r.data||{},r.data.frag=this.frag,r.data.id=this.id,i.trigger(r.event,r.data)}},t.configureTransmuxer=function configureTransmuxer(t){var r=this.worker,i=this.transmuxer;r?r.postMessage({cmd:"configure",config:t}):i&&i.configure(t)},t.handleTransmuxComplete=function handleTransmuxComplete(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},TransmuxerInterface}()},"./src/demux/transmuxer-worker.ts":
/*!****************************************!*\
    !*** ./src/demux/transmuxer-worker.ts ***!
    \****************************************/
/*! exports provided: default */function srcDemuxTransmuxerWorkerTs(t,r,i){i.r(r),i.d(r,"default",(function(){return TransmuxerWorker}));var a=i(/*! ../demux/transmuxer */"./src/demux/transmuxer.ts"),u=i(/*! ../events */"./src/events.ts"),l=i(/*! ../utils/logger */"./src/utils/logger.ts"),c=i(/*! eventemitter3 */"./node_modules/eventemitter3/index.js");function TransmuxerWorker(t){var r=new c.EventEmitter,i=function forwardMessage(r,i){t.postMessage({event:r,data:i})};r.on(u.Events.FRAG_DECRYPTED,i),r.on(u.Events.ERROR,i),t.addEventListener("message",(function(u){var c=u.data;switch(c.cmd){case"init":var d=JSON.parse(c.config);t.transmuxer=new a.default(r,c.typeSupported,d,c.vendor,c.id),Object(l.enableLogs)(d.debug),i("init",null);break;case"configure":t.transmuxer.configure(c.config);break;case"demux":var g=t.transmuxer.push(c.data,c.decryptdata,c.chunkMeta,c.state);Object(a.isPromise)(g)?g.then((function(r){emitTransmuxComplete(t,r)})):emitTransmuxComplete(t,g);break;case"flush":var p=c.chunkMeta,m=t.transmuxer.flush(p);Object(a.isPromise)(m)?m.then((function(r){handleFlushResult(t,r,p)})):handleFlushResult(t,m,p)}}))}function emitTransmuxComplete(t,r){if(!function isEmptyResult(t){return!(t.audio||t.video||t.text||t.id3||t.initSegment)}(r.remuxResult)){var i=[],a=r.remuxResult,u=a.audio,l=a.video;u&&addToTransferable(i,u),l&&addToTransferable(i,l),t.postMessage({event:"transmuxComplete",data:r},i)}}function addToTransferable(t,r){r.data1&&t.push(r.data1.buffer),r.data2&&t.push(r.data2.buffer)}function handleFlushResult(t,r,i){r.forEach((function(r){emitTransmuxComplete(t,r)})),t.postMessage({event:"flush",data:i})}},"./src/demux/transmuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/transmuxer.ts ***!
    \*********************************/
/*! exports provided: default, isPromise, TransmuxConfig, TransmuxState */function srcDemuxTransmuxerTs(t,r,i){i.r(r),i.d(r,"default",(function(){return A})),i.d(r,"isPromise",(function(){return isPromise})),i.d(r,"TransmuxConfig",(function(){return N})),i.d(r,"TransmuxState",(function(){return k}));var a,u=i(/*! ../events */"./src/events.ts"),l=i(/*! ../errors */"./src/errors.ts"),c=i(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),d=i(/*! ../demux/aacdemuxer */"./src/demux/aacdemuxer.ts"),g=i(/*! ../demux/mp4demuxer */"./src/demux/mp4demuxer.ts"),p=i(/*! ../demux/tsdemuxer */"./src/demux/tsdemuxer.ts"),m=i(/*! ../demux/mp3demuxer */"./src/demux/mp3demuxer.ts"),v=i(/*! ../remux/mp4-remuxer */"./src/remux/mp4-remuxer.ts"),b=i(/*! ../remux/passthrough-remuxer */"./src/remux/passthrough-remuxer.ts"),M=i(/*! ./chunk-cache */"./src/demux/chunk-cache.ts"),S=i(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),E=i(/*! ../utils/logger */"./src/utils/logger.ts");try{a=self.performance.now.bind(self.performance)}catch(t){E.logger.debug("Unable to use Performance API on this environment"),a=self.Date.now}var I=[{demux:p.default,remux:v.default},{demux:g.default,remux:b.default},{demux:d.default,remux:v.default},{demux:m.default,remux:v.default}],D=1024;I.forEach((function(t){var r=t.demux;D=Math.max(D,r.minProbeByteLength)}));var A=function(){function Transmuxer(t,r,i,a,u){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new M.default,this.observer=t,this.typeSupported=r,this.config=i,this.vendor=a,this.id=u}var t=Transmuxer.prototype;return t.configure=function configure(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},t.push=function push(t,r,i,u){var l=this,c=i.transmuxing;c.executeStart=a();var d=new Uint8Array(t),g=this.cache,p=this.config,m=this.currentTransmuxState,v=this.transmuxConfig;u&&(this.currentTransmuxState=u);var b=function getEncryptionType(t,r){var i=null;return t.byteLength>0&&null!=r&&null!=r.key&&null!==r.iv&&null!=r.method&&(i=r),i}(d,r);if(b&&"AES-128"===b.method){var M=this.getDecrypter();if(!p.enableSoftwareAES)return this.decryptionPromise=M.webCryptoDecrypt(d,b.key.buffer,b.iv.buffer).then((function(t){var r=l.push(t,null,i);return l.decryptionPromise=null,r})),this.decryptionPromise;var E=M.softwareDecrypt(d,b.key.buffer,b.iv.buffer);if(!E)return c.executeEnd=a(),C(i);d=new Uint8Array(E)}var I=u||m,D=I.contiguous,A=I.discontinuity,N=I.trackSwitch,k=I.accurateTimeOffset,O=I.timeOffset,L=I.initSegmentChange,R=v.audioCodec,j=v.videoCodec,B=v.defaultInitPts,U=v.duration,z=v.initSegmentData;if((A||N||L)&&this.resetInitSegment(z,R,j,U),(A||L)&&this.resetInitialTimestamp(B),D||this.resetContiguity(),this.needsProbing(d,A,N)){if(g.dataLength){var Y=g.flush();d=Object(S.appendUint8Array)(Y,d)}this.configureTransmuxer(d,v)}var G=this.transmux(d,b,O,k,i),H=this.currentTransmuxState;return H.contiguous=!0,H.discontinuity=!1,H.trackSwitch=!1,c.executeEnd=a(),G},t.flush=function flush(t){var r=this,i=t.transmuxing;i.executeStart=a();var c=this.decrypter,d=this.cache,g=this.currentTransmuxState,p=this.decryptionPromise;if(p)return p.then((function(){return r.flush(t)}));var m=[],v=g.timeOffset;if(c){var b=c.flush();b&&m.push(this.push(b,null,t))}var M=d.dataLength;d.reset();var S=this.demuxer,E=this.remuxer;if(!S||!E)return M>=D&&this.observer.emit(u.Events.ERROR,u.Events.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),i.executeEnd=a(),[C(t)];var I=S.flush(v);return isPromise(I)?I.then((function(i){return r.flushRemux(m,i,t),m})):(this.flushRemux(m,I,t),m)},t.flushRemux=function flushRemux(t,r,i){var u=r.audioTrack,l=r.avcTrack,c=r.id3Track,d=r.textTrack,g=this.currentTransmuxState,p=g.accurateTimeOffset,m=g.timeOffset;E.logger.log("[transmuxer.ts]: Flushed fragment "+i.sn+(i.part>-1?" p: "+i.part:"")+" of level "+i.level);var v=this.remuxer.remux(u,l,c,d,m,p,!0,this.id);t.push({remuxResult:v,chunkMeta:i}),i.transmuxing.executeEnd=a()},t.resetInitialTimestamp=function resetInitialTimestamp(t){var r=this.demuxer,i=this.remuxer;r&&i&&(r.resetTimeStamp(t),i.resetTimeStamp(t))},t.resetContiguity=function resetContiguity(){var t=this.demuxer,r=this.remuxer;t&&r&&(t.resetContiguity(),r.resetNextTimestamp())},t.resetInitSegment=function resetInitSegment(t,r,i,a){var u=this.demuxer,l=this.remuxer;u&&l&&(u.resetInitSegment(r,i,a),l.resetInitSegment(t,r,i))},t.destroy=function destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function transmux(t,r,i,a,u){return r&&"SAMPLE-AES"===r.method?this.transmuxSampleAes(t,r,i,a,u):this.transmuxUnencrypted(t,i,a,u)},t.transmuxUnencrypted=function transmuxUnencrypted(t,r,i,a){var u=this.demuxer.demux(t,r,!1,!this.config.progressive),l=u.audioTrack,c=u.avcTrack,d=u.id3Track,g=u.textTrack;return{remuxResult:this.remuxer.remux(l,c,d,g,r,i,!1,this.id),chunkMeta:a}},t.transmuxSampleAes=function transmuxSampleAes(t,r,i,a,u){var l=this;return this.demuxer.demuxSampleAes(t,r,i).then((function(t){return{remuxResult:l.remuxer.remux(t.audioTrack,t.avcTrack,t.id3Track,t.textTrack,i,a,!1,l.id),chunkMeta:u}}))},t.configureTransmuxer=function configureTransmuxer(t,r){for(var i,a=this.config,u=this.observer,l=this.typeSupported,c=this.vendor,d=r.audioCodec,p=r.defaultInitPts,m=r.duration,v=r.initSegmentData,M=r.videoCodec,S=0,D=I.length;S<D;S++)if(I[S].demux.probe(t)){i=I[S];break}i||(E.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),i={demux:g.default,remux:b.default});var A=this.demuxer,C=this.remuxer,N=i.remux,k=i.demux;C&&C instanceof N||(this.remuxer=new N(u,a,l,c)),A&&A instanceof k||(this.demuxer=new k(u,a,l),this.probe=k.probe),this.resetInitSegment(v,d,M,m),this.resetInitialTimestamp(p)},t.needsProbing=function needsProbing(t,r,i){return!this.demuxer||!this.remuxer||r||i},t.getDecrypter=function getDecrypter(){var t=this.decrypter;return t||(t=this.decrypter=new c.default(this.observer,this.config)),t},Transmuxer}(),C=function emptyResult(t){return{remuxResult:{},chunkMeta:t}};function isPromise(t){return"then"in t&&t.then instanceof Function}var N=function TransmuxConfig(t,r,i,a,u){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=r,this.initSegmentData=i,this.duration=a,this.defaultInitPts=u},k=function TransmuxState(t,r,i,a,u,l){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=r,this.accurateTimeOffset=i,this.trackSwitch=a,this.timeOffset=u,this.initSegmentChange=l}},"./src/demux/tsdemuxer.ts":
/*!********************************!*\
    !*** ./src/demux/tsdemuxer.ts ***!
    \********************************/
/*! exports provided: discardEPB, default */function srcDemuxTsdemuxerTs(t,r,i){i.r(r),i.d(r,"discardEPB",(function(){return discardEPB}));var a=i(/*! ./adts */"./src/demux/adts.ts"),u=i(/*! ./mpegaudio */"./src/demux/mpegaudio.ts"),l=i(/*! ./exp-golomb */"./src/demux/exp-golomb.ts"),c=i(/*! ./id3 */"./src/demux/id3.ts"),d=i(/*! ./sample-aes */"./src/demux/sample-aes.ts"),g=i(/*! ../events */"./src/events.ts"),p=i(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),m=i(/*! ../utils/logger */"./src/utils/logger.ts"),v=i(/*! ../errors */"./src/errors.ts"),b={video:1,audio:2,id3:3,text:4},M=function(){function TSDemuxer(t,r,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=r,this.typeSupported=i}TSDemuxer.probe=function probe(t){var r=TSDemuxer.syncOffset(t);return!(r<0||(r&&m.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},TSDemuxer.syncOffset=function syncOffset(t){for(var r=Math.min(1e3,t.length-564),i=0;i<r;){if(71===t[i]&&71===t[i+188]&&71===t[i+376])return i;i++}return-1},TSDemuxer.createTrack=function createTrack(t,r){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:b[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?r:void 0}};var t=TSDemuxer.prototype;return t.resetInitSegment=function resetInitSegment(t,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=TSDemuxer.createTrack("video",i),this._audioTrack=TSDemuxer.createTrack("audio",i),this._id3Track=TSDemuxer.createTrack("id3",i),this._txtTrack=TSDemuxer.createTrack("text",i),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=i},t.resetTimeStamp=function resetTimeStamp(){},t.resetContiguity=function resetContiguity(){var t=this._audioTrack,r=this._avcTrack,i=this._id3Track;t&&(t.pesData=null),r&&(r.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},t.demux=function demux(t,r,i,a){var u;void 0===i&&(i=!1),void 0===a&&(a=!1),i||(this.sampleAes=null);var l=this._avcTrack,c=this._audioTrack,d=this._id3Track,b=l.pid,M=l.pesData,S=c.pid,E=d.pid,I=c.pesData,D=d.pesData,A=!1,C=this.pmtParsed,N=this._pmtId,k=t.length;if(this.remainderData&&(k=(t=Object(p.appendUint8Array)(this.remainderData,t)).length,this.remainderData=null),k<188&&!a)return this.remainderData=t,{audioTrack:c,avcTrack:l,id3Track:d,textTrack:this._txtTrack};var O=Math.max(0,TSDemuxer.syncOffset(t));(k-=(k+O)%188)<t.byteLength&&!a&&(this.remainderData=new Uint8Array(t.buffer,k,t.buffer.byteLength-k));for(var L=0,R=O;R<k;R+=188)if(71===t[R]){var j=!!(64&t[R+1]),B=((31&t[R+1])<<8)+t[R+2],U=void 0;if((48&t[R+3])>>4>1){if((U=R+5+t[R+4])===R+188)continue}else U=R+4;switch(B){case b:j&&(M&&(u=parsePES(M))&&this.parseAVCPES(u,!1),M={data:[],size:0}),M&&(M.data.push(t.subarray(U,R+188)),M.size+=R+188-U);break;case S:j&&(I&&(u=parsePES(I))&&(c.isAAC?this.parseAACPES(u):this.parseMPEGPES(u)),I={data:[],size:0}),I&&(I.data.push(t.subarray(U,R+188)),I.size+=R+188-U);break;case E:j&&(D&&(u=parsePES(D))&&this.parseID3PES(u),D={data:[],size:0}),D&&(D.data.push(t.subarray(U,R+188)),D.size+=R+188-U);break;case 0:j&&(U+=t[U]+1),N=this._pmtId=parsePAT(t,U);break;case N:j&&(U+=t[U]+1);var z=parsePMT(t,U,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,i);(b=z.avc)>0&&(l.pid=b),(S=z.audio)>0&&(c.pid=S,c.isAAC=z.isAAC),(E=z.id3)>0&&(d.pid=E),A&&!C&&(m.logger.log("reparse from beginning"),A=!1,R=O-188),C=this.pmtParsed=!0;break;case 17:case 8191:break;default:A=!0}}else L++;L>0&&this.observer.emit(g.Events.ERROR,g.Events.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+L+" TS packet/s that do not start with 0x47"}),l.pesData=M,c.pesData=I,d.pesData=D;var Y={audioTrack:c,avcTrack:l,id3Track:d,textTrack:this._txtTrack};return a&&this.extractRemainingSamples(Y),Y},t.flush=function flush(){var t,r=this.remainderData;return this.remainderData=null,t=r?this.demux(r,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},t.extractRemainingSamples=function extractRemainingSamples(t){var r,i=t.audioTrack,a=t.avcTrack,u=t.id3Track,l=a.pesData,c=i.pesData,d=u.pesData;l&&(r=parsePES(l))?(this.parseAVCPES(r,!0),a.pesData=null):a.pesData=l,c&&(r=parsePES(c))?(i.isAAC?this.parseAACPES(r):this.parseMPEGPES(r),i.pesData=null):(null!=c&&c.size&&m.logger.log("last AAC PES packet truncated,might overlap between fragments"),i.pesData=c),d&&(r=parsePES(d))?(this.parseID3PES(r),u.pesData=null):u.pesData=d},t.demuxSampleAes=function demuxSampleAes(t,r,i){var a=this.demux(t,i,!0,!this.config.progressive),u=this.sampleAes=new d.default(this.observer,this.config,r);return this.decrypt(a,u)},t.decrypt=function decrypt(t,r){return new Promise((function(i){var a=t.audioTrack,u=t.avcTrack;a.samples&&a.isAAC?r.decryptAacSamples(a.samples,0,(function(){u.samples?r.decryptAvcSamples(u.samples,0,0,(function(){i(t)})):i(t)})):u.samples&&r.decryptAvcSamples(u.samples,0,0,(function(){i(t)}))}))},t.destroy=function destroy(){this._initPTS=this._initDTS=null,this._duration=0},t.parseAVCPES=function parseAVCPES(t,r){var i,a=this,u=this._avcTrack,d=this.parseAVCNALu(t.data),g=this.avcSample,p=!1;t.data=null,g&&d.length&&!u.audFound&&(pushAccessUnit(g,u),g=this.avcSample=createAVCSample(!1,t.pts,t.dts,"")),d.forEach((function(r){switch(r.type){case 1:i=!0,g||(g=a.avcSample=createAVCSample(!0,t.pts,t.dts,"")),g.frame=!0;var d=r.data;if(p&&d.length>4){var m=new l.default(d).readSliceType();2!==m&&4!==m&&7!==m&&9!==m||(g.key=!0)}break;case 5:i=!0,g||(g=a.avcSample=createAVCSample(!0,t.pts,t.dts,"")),g.key=!0,g.frame=!0;break;case 6:i=!0;var v=new l.default(discardEPB(r.data));v.readUByte();for(var b=0,M=0,S=!1,E=0;!S&&v.bytesAvailable>1;){b=0;do{b+=E=v.readUByte()}while(255===E);M=0;do{M+=E=v.readUByte()}while(255===E);if(4===b&&0!==v.bytesAvailable){if(S=!0,181===v.readUByte()&&49===v.readUShort()&&1195456820===v.readUInt()&&3===v.readUByte()){for(var I=v.readUByte(),D=31&I,A=[I,v.readUByte()],C=0;C<D;C++)A.push(v.readUByte()),A.push(v.readUByte()),A.push(v.readUByte());insertSampleInOrder(a._txtTrack.samples,{type:3,pts:t.pts,bytes:A})}}else if(5===b&&0!==v.bytesAvailable){if(S=!0,M>16){for(var N=[],k=0;k<16;k++)N.push(v.readUByte().toString(16)),3!==k&&5!==k&&7!==k&&9!==k||N.push("-");for(var O=M-16,L=new Uint8Array(O),R=0;R<O;R++)L[R]=v.readUByte();insertSampleInOrder(a._txtTrack.samples,{pts:t.pts,payloadType:b,uuid:N.join(""),userData:Object(c.utf8ArrayToStr)(L),userDataBytes:L})}}else if(M<v.bytesAvailable)for(var j=0;j<M;j++)v.readUByte()}break;case 7:if(i=!0,p=!0,!u.sps){var B=new l.default(r.data).readSPS();u.width=B.width,u.height=B.height,u.pixelRatio=B.pixelRatio,u.sps=[r.data],u.duration=a._duration;for(var U=r.data.subarray(1,4),z="avc1.",Y=0;Y<3;Y++){var G=U[Y].toString(16);G.length<2&&(G="0"+G),z+=G}u.codec=z}break;case 8:i=!0,u.pps||(u.pps=[r.data]);break;case 9:i=!1,u.audFound=!0,g&&pushAccessUnit(g,u),g=a.avcSample=createAVCSample(!1,t.pts,t.dts,"");break;case 12:i=!1;break;default:i=!1,g&&(g.debug+="unknown NAL "+r.type+" ")}g&&i&&g.units.push(r)})),r&&g&&(pushAccessUnit(g,u),this.avcSample=null)},t.getLastNalUnit=function getLastNalUnit(){var t,r,i=this.avcSample;if(!i||0===i.units.length){var a=this._avcTrack.samples;i=a[a.length-1]}if(null!==(t=i)&&void 0!==t&&t.units){var u=i.units;r=u[u.length-1]}return r},t.parseAVCNALu=function parseAVCNALu(t){var r,i,a=t.byteLength,u=this._avcTrack,l=u.naluState||0,c=l,d=[],g=0,p=-1,m=0;for(-1===l&&(p=0,m=31&t[0],l=0,g=1);g<a;)if(r=t[g++],l)if(1!==l)if(r)if(1===r){if(p>=0){var v={data:t.subarray(p,g-l-1),type:m};d.push(v)}else{var b=this.getLastNalUnit();if(b&&(c&&g<=4-c&&b.state&&(b.data=b.data.subarray(0,b.data.byteLength-c)),(i=g-l-1)>0)){var M=new Uint8Array(b.data.byteLength+i);M.set(b.data,0),M.set(t.subarray(0,i),b.data.byteLength),b.data=M,b.state=0}}g<a?(p=g,m=31&t[g],l=0):l=-1}else l=0;else l=3;else l=r?0:2;else l=r?0:1;if(p>=0&&l>=0){var S={data:t.subarray(p,a),type:m,state:l};d.push(S)}if(0===d.length){var E=this.getLastNalUnit();if(E){var I=new Uint8Array(E.data.byteLength+t.byteLength);I.set(E.data,0),I.set(t,E.data.byteLength),E.data=I}}return u.naluState=l,d},t.parseAACPES=function parseAACPES(t){var r,i,u,l,c,d=0,p=this._audioTrack,b=this.aacOverFlow,M=t.data;if(b){this.aacOverFlow=null;var S=b.sample.unit.byteLength,E=Math.min(b.missing,S),I=S-E;b.sample.unit.set(M.subarray(0,E),I),p.samples.push(b.sample),d=b.missing}for(r=d,i=M.length;r<i-1&&!a.isHeader(M,r);r++);if(r===d||(r<i-1?(u="AAC PES did not start with ADTS header,offset:"+r,l=!1):(u="no ADTS header found in AAC PES",l=!0),m.logger.warn("parsing error:"+u),this.observer.emit(g.Events.ERROR,g.Events.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.FRAG_PARSING_ERROR,fatal:l,reason:u}),!l)){if(a.initTrackConfig(p,this.observer,M,r,this.audioCodec),void 0!==t.pts)c=t.pts;else{if(!b)return void m.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var D=a.getFrameDuration(p.samplerate);c=b.sample.pts+D}for(var A=0;r<i;){if(a.isHeader(M,r)){if(r+5<i){var C=a.appendFrame(p,M,r,c,A);if(C){if(!C.missing){r+=C.length,A++;continue}this.aacOverFlow=C}}break}r++}}},t.parseMPEGPES=function parseMPEGPES(t){var r=t.data,i=r.length,a=0,l=0,c=t.pts;if(void 0!==c)for(;l<i;)if(u.isHeader(r,l)){var d=u.appendFrame(this._audioTrack,r,l,c,a);if(!d)break;l+=d.length,a++}else l++;else m.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},t.parseID3PES=function parseID3PES(t){void 0!==t.pts?this._id3Track.samples.push(t):m.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},TSDemuxer}();function createAVCSample(t,r,i,a){return{key:t,frame:!1,pts:r,dts:i,units:[],debug:a,length:0}}function parsePAT(t,r){return(31&t[r+10])<<8|t[r+11]}function parsePMT(t,r,i,a){var u={audio:-1,avc:-1,id3:-1,isAAC:!0},l=r+3+((15&t[r+1])<<8|t[r+2])-4;for(r+=12+((15&t[r+10])<<8|t[r+11]);r<l;){var c=(31&t[r+1])<<8|t[r+2];switch(t[r]){case 207:if(!a){m.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===u.audio&&(u.audio=c);break;case 21:-1===u.id3&&(u.id3=c);break;case 219:if(!a){m.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===u.avc&&(u.avc=c);break;case 3:case 4:i?-1===u.audio&&(u.audio=c,u.isAAC=!1):m.logger.log("MPEG audio found, not supported in this browser");break;case 36:m.logger.warn("Unsupported HEVC stream type found")}r+=5+((15&t[r+3])<<8|t[r+4])}return u}function parsePES(t){var r,i,a,u,l,c=0,d=t.data;if(!t||0===t.size)return null;for(;d[0].length<19&&d.length>1;){var g=new Uint8Array(d[0].length+d[1].length);g.set(d[0]),g.set(d[1],d[0].length),d[0]=g,d.splice(1,1)}if(1===((r=d[0])[0]<<16)+(r[1]<<8)+r[2]){if((i=(r[4]<<8)+r[5])&&i>t.size-6)return null;var p=r[7];192&p&&(u=536870912*(14&r[9])+4194304*(255&r[10])+16384*(254&r[11])+128*(255&r[12])+(254&r[13])/2,64&p?u-(l=536870912*(14&r[14])+4194304*(255&r[15])+16384*(254&r[16])+128*(255&r[17])+(254&r[18])/2)>54e5&&(m.logger.warn(Math.round((u-l)/9e4)+"s delta between PTS and DTS, align them"),u=l):l=u);var v=(a=r[8])+9;if(t.size<=v)return null;t.size-=v;for(var b=new Uint8Array(t.size),M=0,S=d.length;M<S;M++){var E=(r=d[M]).byteLength;if(v){if(v>E){v-=E;continue}r=r.subarray(v),E-=v,v=0}b.set(r,c),c+=E}return i&&(i-=a+3),{data:b,pts:u,dts:l,len:i}}return null}function pushAccessUnit(t,r){if(t.units.length&&t.frame){if(void 0===t.pts){var i=r.samples,a=i.length;if(!a)return void r.dropped++;var u=i[a-1];t.pts=u.pts,t.dts=u.dts}r.samples.push(t)}t.debug.length&&m.logger.log(t.pts+"/"+t.dts+":"+t.debug)}function insertSampleInOrder(t,r){var i=t.length;if(i>0){if(r.pts>=t[i-1].pts)t.push(r);else for(var a=i-1;a>=0;a--)if(r.pts<t[a].pts){t.splice(a,0,r);break}}else t.push(r)}function discardEPB(t){for(var r=t.byteLength,i=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return t;var u=r-i.length,l=new Uint8Array(u),c=0;for(a=0;a<u;c++,a++)c===i[0]&&(c++,i.shift()),l[a]=t[c];return l}M.minProbeByteLength=188,r.default=M},"./src/errors.ts":
/*!***********************!*\
    !*** ./src/errors.ts ***!
    \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function srcErrorsTs(t,r,i){var a,u;i.r(r),i.d(r,"ErrorTypes",(function(){return a})),i.d(r,"ErrorDetails",(function(){return u})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(a||(a={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown"}(u||(u={}))},"./src/events.ts":
/*!***********************!*\
    !*** ./src/events.ts ***!
    \***********************/
/*! exports provided: Events */function srcEventsTs(t,r,i){var a;i.r(r),i.d(r,"Events",(function(){return a})),function(t){t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached"}(a||(a={}))},"./src/hls.ts":
/*!********************!*\
    !*** ./src/hls.ts ***!
    \********************/
/*! exports provided: default */function srcHlsTs(t,r,i){i.r(r),i.d(r,"default",(function(){return D}));var a=i(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),u=i(/*! ./loader/playlist-loader */"./src/loader/playlist-loader.ts"),l=i(/*! ./loader/key-loader */"./src/loader/key-loader.ts"),c=i(/*! ./controller/id3-track-controller */"./src/controller/id3-track-controller.ts"),d=i(/*! ./controller/latency-controller */"./src/controller/latency-controller.ts"),g=i(/*! ./controller/level-controller */"./src/controller/level-controller.ts"),p=i(/*! ./controller/fragment-tracker */"./src/controller/fragment-tracker.ts"),m=i(/*! ./controller/stream-controller */"./src/controller/stream-controller.ts"),v=i(/*! ./is-supported */"./src/is-supported.ts"),b=i(/*! ./utils/logger */"./src/utils/logger.ts"),M=i(/*! ./config */"./src/config.ts"),S=i(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),E=i(/*! ./events */"./src/events.ts"),I=i(/*! ./errors */"./src/errors.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var D=function(){function Hls(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new S.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var r=this.config=Object(M.mergeConfig)(Hls.DefaultConfig,t);this.userConfig=t,Object(b.enableLogs)(r.debug),this._autoLevelCapping=-1,r.progressive&&Object(M.enableStreamingMode)(r);var i=r.abrController,a=r.bufferController,v=r.capLevelController,E=r.fpsController,I=this.abrController=new i(this),D=this.bufferController=new a(this),A=this.capLevelController=new v(this),C=new E(this),N=new u.default(this),k=new l.default(this),O=new c.default(this),L=this.levelController=new g.default(this),R=new p.FragmentTracker(this),j=this.streamController=new m.default(this,R);A.setStreamController(j),C.setStreamController(j);var B=[L,j];this.networkControllers=B;var U=[N,k,I,D,A,C,O,R];this.audioTrackController=this.createController(r.audioTrackController,null,B),this.createController(r.audioStreamController,R,B),this.subtitleTrackController=this.createController(r.subtitleTrackController,null,B),this.createController(r.subtitleStreamController,R,B),this.createController(r.timelineController,null,U),this.emeController=this.createController(r.emeController,null,U),this.cmcdController=this.createController(r.cmcdController,null,U),this.latencyController=this.createController(d.default,null,U),this.coreComponents=U}Hls.isSupported=function isSupported(){return Object(v.isSupported)()};var t=Hls.prototype;return t.createController=function createController(t,r,i){if(t){var a=r?new t(this,r):new t(this);return i&&i.push(a),a}return null},t.on=function on(t,r,i){void 0===i&&(i=this),this._emitter.on(t,r,i)},t.once=function once(t,r,i){void 0===i&&(i=this),this._emitter.once(t,r,i)},t.removeAllListeners=function removeAllListeners(t){this._emitter.removeAllListeners(t)},t.off=function off(t,r,i,a){void 0===i&&(i=this),this._emitter.off(t,r,i,a)},t.listeners=function listeners(t){return this._emitter.listeners(t)},t.emit=function emit(t,r,i){return this._emitter.emit(t,r,i)},t.trigger=function trigger(t,r){if(this.config.debug)return this.emit(t,t,r);try{return this.emit(t,t,r)}catch(r){b.logger.error("An internal error happened while handling event "+t+'. Error message: "'+r.message+'". Here is a stacktrace:',r),this.trigger(E.Events.ERROR,{type:I.ErrorTypes.OTHER_ERROR,details:I.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,error:r})}return!1},t.listenerCount=function listenerCount(t){return this._emitter.listenerCount(t)},t.destroy=function destroy(){b.logger.log("destroy"),this.trigger(E.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0},t.attachMedia=function attachMedia(t){b.logger.log("attachMedia"),this._media=t,this.trigger(E.Events.MEDIA_ATTACHING,{media:t})},t.detachMedia=function detachMedia(){b.logger.log("detachMedia"),this.trigger(E.Events.MEDIA_DETACHING,void 0),this._media=null},t.loadSource=function loadSource(t){this.stopLoad();var r=this.media,i=this.url,u=this.url=a.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});b.logger.log("loadSource:"+u),r&&i&&i!==u&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(r)),this.trigger(E.Events.MANIFEST_LOADING,{url:t})},t.startLoad=function startLoad(t){void 0===t&&(t=-1),b.logger.log("startLoad("+t+")"),this.networkControllers.forEach((function(r){r.startLoad(t)}))},t.stopLoad=function stopLoad(){b.logger.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},t.swapAudioCodec=function swapAudioCodec(){b.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.recoverMediaError=function recoverMediaError(){b.logger.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},t.removeLevel=function removeLevel(t,r){void 0===r&&(r=0),this.levelController.removeLevel(t,r)},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(Hls,[{key:"levels",get:function get(){var t=this.levelController.levels;return t||[]}},{key:"currentLevel",get:function get(){return this.streamController.currentLevel},set:function set(t){b.logger.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function get(){return this.streamController.nextLevel},set:function set(t){b.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function get(){return this.levelController.level},set:function set(t){b.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function get(){return this.levelController.nextLoadLevel},set:function set(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function get(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function set(t){b.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function get(){return this.levelController.startLevel},set:function set(t){b.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function get(){return this.config.capLevelToPlayerSize},set:function set(t){var r=!!t;r!==this.config.capLevelToPlayerSize&&(r?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=r)}},{key:"autoLevelCapping",get:function get(){return this._autoLevelCapping},set:function set(t){this._autoLevelCapping!==t&&(b.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function get(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function get(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function get(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function get(){var t=this.levels,r=this.config.minAutoBitrate;if(!t)return 0;for(var i=t.length,a=0;a<i;a++)if(t[a].maxBitrate>r)return a;return 0}},{key:"maxAutoLevel",get:function get(){var t=this.levels,r=this.autoLevelCapping;return-1===r&&t&&t.length?t.length-1:r}},{key:"nextAutoLevel",get:function get(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function set(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function get(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function get(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function set(t){var r=this.audioTrackController;r&&(r.audioTrack=t)}},{key:"subtitleTracks",get:function get(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function get(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function set(t){var r=this.subtitleTrackController;r&&(r.subtitleTrack=t)}},{key:"media",get:function get(){return this._media}},{key:"subtitleDisplay",get:function get(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function set(t){var r=this.subtitleTrackController;r&&(r.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function get(){return this.config.lowLatencyMode},set:function set(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function get(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function get(){return this.latencyController.latency}},{key:"maxLatency",get:function get(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function get(){return this.latencyController.targetLatency}},{key:"drift",get:function get(){return this.latencyController.drift}},{key:"forceStartLoad",get:function get(){return this.streamController.forceStartLoad}}],[{key:"version",get:function get(){return"1.1.5"}},{key:"Events",get:function get(){return E.Events}},{key:"ErrorTypes",get:function get(){return I.ErrorTypes}},{key:"ErrorDetails",get:function get(){return I.ErrorDetails}},{key:"DefaultConfig",get:function get(){return Hls.defaultConfig?Hls.defaultConfig:M.hlsDefaultConfig},set:function set(t){Hls.defaultConfig=t}}]),Hls}();D.defaultConfig=void 0},"./src/is-supported.ts":
/*!*****************************!*\
    !*** ./src/is-supported.ts ***!
    \*****************************/
/*! exports provided: isSupported, changeTypeSupported */function srcIsSupportedTs(t,r,i){i.r(r),i.d(r,"isSupported",(function(){return isSupported})),i.d(r,"changeTypeSupported",(function(){return changeTypeSupported}));var a=i(/*! ./utils/mediasource-helper */"./src/utils/mediasource-helper.ts");function getSourceBuffer(){return self.SourceBuffer||self.WebKitSourceBuffer}function isSupported(){var t=Object(a.getMediaSource)();if(!t)return!1;var r=getSourceBuffer(),i=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),u=!r||r.prototype&&"function"==typeof r.prototype.appendBuffer&&"function"==typeof r.prototype.remove;return!!i&&!!u}function changeTypeSupported(){var t,r=getSourceBuffer();return"function"==typeof(null==r||null===(t=r.prototype)||void 0===t?void 0:t.changeType)}},"./src/loader/fragment-loader.ts":
/*!***************************************!*\
    !*** ./src/loader/fragment-loader.ts ***!
    \***************************************/
/*! exports provided: default, LoadError */function srcLoaderFragmentLoaderTs(t,r,i){i.r(r),i.d(r,"default",(function(){return c})),i.d(r,"LoadError",(function(){return d}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../errors */"./src/errors.ts");function _wrapNativeSuper(t){var r="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t)},_wrapNativeSuper(t)}function _construct(t,r,i){return _construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(t,r,i){var a=[null];a.push.apply(a,r);var u=new(Function.bind.apply(t,a));return i&&_setPrototypeOf(u,i.prototype),u},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var l=Math.pow(2,17),c=function(){function FragmentLoader(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var t=FragmentLoader.prototype;return t.destroy=function destroy(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function abort(){this.loader&&this.loader.abort()},t.load=function load(t,r){var i=this,a=t.url;if(!a)return Promise.reject(new d({type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,networkDetails:null},"Fragment does not have a "+(a?"part list":"url")));this.abort();var c=this.config,g=c.fLoader,p=c.loader;return new Promise((function(a,m){i.loader&&i.loader.destroy();var v=i.loader=t.loader=g?new g(c):new p(c),b=createLoaderContext(t),M={timeout:c.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:c.fragLoadingMaxRetryTimeout,highWaterMark:l};t.stats=v.stats,v.load(b,M,{onSuccess:function onSuccess(r,u,l,c){i.resetLoader(t,v),a({frag:t,part:null,payload:r.data,networkDetails:c})},onError:function onError(r,a,l){i.resetLoader(t,v),m(new d({type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:r,networkDetails:l}))},onAbort:function onAbort(r,a,l){i.resetLoader(t,v),m(new d({type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:t,networkDetails:l}))},onTimeout:function onTimeout(r,a,l){i.resetLoader(t,v),m(new d({type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,networkDetails:l}))},onProgress:function onProgress(i,a,u,l){r&&r({frag:t,part:null,payload:u,networkDetails:l})}})}))},t.loadPart=function loadPart(t,r,i){var a=this;this.abort();var c=this.config,g=c.fLoader,p=c.loader;return new Promise((function(m,v){a.loader&&a.loader.destroy();var b=a.loader=t.loader=g?new g(c):new p(c),M=createLoaderContext(t,r),S={timeout:c.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:c.fragLoadingMaxRetryTimeout,highWaterMark:l};r.stats=b.stats,b.load(M,S,{onSuccess:function onSuccess(u,l,c,d){a.resetLoader(t,b),a.updateStatsFromPart(t,r);var g={frag:t,part:r,payload:u.data,networkDetails:d};i(g),m(g)},onError:function onError(i,l,c){a.resetLoader(t,b),v(new d({type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:r,response:i,networkDetails:c}))},onAbort:function onAbort(i,l,c){t.stats.aborted=r.stats.aborted,a.resetLoader(t,b),v(new d({type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:t,part:r,networkDetails:c}))},onTimeout:function onTimeout(i,l,c){a.resetLoader(t,b),v(new d({type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:r,networkDetails:c}))}})}))},t.updateStatsFromPart=function updateStatsFromPart(t,r){var i=t.stats,a=r.stats,u=a.total;if(i.loaded+=a.loaded,u){var l=Math.round(t.duration/r.duration),c=Math.min(Math.round(i.loaded/u),l),d=(l-c)*Math.round(i.loaded/c);i.total=i.loaded+d}else i.total=Math.max(i.loaded,i.total);var g=i.loading,p=a.loading;g.start?g.first+=p.first-p.start:(g.start=p.start,g.first=p.first),g.end=p.end},t.resetLoader=function resetLoader(t,r){t.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()},FragmentLoader}();function createLoaderContext(t,r){void 0===r&&(r=null);var i=r||t,u={frag:t,part:r,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},l=i.byteRangeStartOffset,c=i.byteRangeEndOffset;return Object(a.isFiniteNumber)(l)&&Object(a.isFiniteNumber)(c)&&(u.rangeStart=l,u.rangeEnd=c),u}var d=function(t){function LoadError(r){for(var i,a=arguments.length,u=new Array(a>1?a-1:0),l=1;l<a;l++)u[l-1]=arguments[l];return(i=t.call.apply(t,[this].concat(u))||this).data=void 0,i.data=r,i}return function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}(LoadError,t),LoadError}(_wrapNativeSuper(Error))},"./src/loader/fragment.ts":
/*!********************************!*\
    !*** ./src/loader/fragment.ts ***!
    \********************************/
/*! exports provided: ElementaryStreamTypes, BaseSegment, Fragment, Part */function srcLoaderFragmentTs(t,r,i){i.r(r),i.d(r,"ElementaryStreamTypes",(function(){return a})),i.d(r,"BaseSegment",(function(){return p})),i.d(r,"Fragment",(function(){return m})),i.d(r,"Part",(function(){return v}));var a,u=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),l=i(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),c=i(/*! ../utils/logger */"./src/utils/logger.ts"),d=i(/*! ./level-key */"./src/loader/level-key.ts"),g=i(/*! ./load-stats */"./src/loader/load-stats.ts");function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}!function(t){t.AUDIO="audio",t.VIDEO="video",t.AUDIOVIDEO="audiovideo"}(a||(a={}));var p=function(){function BaseSegment(t){var r;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((r={})[a.AUDIO]=null,r[a.VIDEO]=null,r[a.AUDIOVIDEO]=null,r),this.baseurl=t}return BaseSegment.prototype.setByteRange=function setByteRange(t,r){var i=t.split("@",2),a=[];1===i.length?a[0]=r?r.byteRangeEndOffset:0:a[0]=parseInt(i[1]),a[1]=parseInt(i[0])+a[0],this._byteRange=a},_createClass(BaseSegment,[{key:"byteRange",get:function get(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function get(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function get(){return this.byteRange[1]}},{key:"url",get:function get(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(l.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function set(t){this._url=t}}]),BaseSegment}(),m=function(t){function Fragment(r,i){var a;return(a=t.call(this,i)||this)._decryptdata=null,a.rawProgramDateTime=null,a.programDateTime=null,a.tagList=[],a.duration=0,a.sn=0,a.levelkey=void 0,a.type=void 0,a.loader=null,a.level=-1,a.cc=0,a.startPTS=void 0,a.endPTS=void 0,a.appendedPTS=void 0,a.startDTS=void 0,a.endDTS=void 0,a.start=0,a.deltaPTS=void 0,a.maxStartPTS=void 0,a.minEndPTS=void 0,a.stats=new g.LoadStats,a.urlId=0,a.data=void 0,a.bitrateTest=!1,a.title=null,a.initSegment=null,a.type=r,a}_inheritsLoose(Fragment,t);var r=Fragment.prototype;return r.createInitializationVector=function createInitializationVector(t){for(var r=new Uint8Array(16),i=12;i<16;i++)r[i]=t>>8*(15-i)&255;return r},r.setDecryptDataFromLevelKey=function setDecryptDataFromLevelKey(t,r){var i=t;return"AES-128"===(null==t?void 0:t.method)&&t.uri&&!t.iv&&((i=d.LevelKey.fromURI(t.uri)).method=t.method,i.iv=this.createInitializationVector(r),i.keyFormat="identity"),i},r.setElementaryStreamInfo=function setElementaryStreamInfo(t,r,i,a,u,l){void 0===l&&(l=!1);var c=this.elementaryStreams,d=c[t];d?(d.startPTS=Math.min(d.startPTS,r),d.endPTS=Math.max(d.endPTS,i),d.startDTS=Math.min(d.startDTS,a),d.endDTS=Math.max(d.endDTS,u)):c[t]={startPTS:r,endPTS:i,startDTS:a,endDTS:u,partial:l}},r.clearElementaryStreamInfo=function clearElementaryStreamInfo(){var t=this.elementaryStreams;t[a.AUDIO]=null,t[a.VIDEO]=null,t[a.AUDIOVIDEO]=null},_createClass(Fragment,[{key:"decryptdata",get:function get(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"end",get:function get(){return this.start+this.duration}},{key:"endProgramDateTime",get:function get(){if(null===this.programDateTime)return null;if(!Object(u.isFiniteNumber)(this.programDateTime))return null;var t=Object(u.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function get(){var t;return!(null===(t=this.decryptdata)||void 0===t||!t.keyFormat||!this.decryptdata.uri)}}]),Fragment}(p),v=function(t){function Part(r,i,a,u,l){var c;(c=t.call(this,a)||this).fragOffset=0,c.duration=0,c.gap=!1,c.independent=!1,c.relurl=void 0,c.fragment=void 0,c.index=void 0,c.stats=new g.LoadStats,c.duration=r.decimalFloatingPoint("DURATION"),c.gap=r.bool("GAP"),c.independent=r.bool("INDEPENDENT"),c.relurl=r.enumeratedString("URI"),c.fragment=i,c.index=u;var d=r.enumeratedString("BYTERANGE");return d&&c.setByteRange(d,l),l&&(c.fragOffset=l.fragOffset+l.duration),c}return _inheritsLoose(Part,t),_createClass(Part,[{key:"start",get:function get(){return this.fragment.start+this.fragOffset}},{key:"end",get:function get(){return this.start+this.duration}},{key:"loaded",get:function get(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),Part}(p)},"./src/loader/key-loader.ts":
/*!**********************************!*\
    !*** ./src/loader/key-loader.ts ***!
    \**********************************/
/*! exports provided: default */function srcLoaderKeyLoaderTs(t,r,i){i.r(r),i.d(r,"default",(function(){return c}));var a=i(/*! ../events */"./src/events.ts"),u=i(/*! ../errors */"./src/errors.ts"),l=i(/*! ../utils/logger */"./src/utils/logger.ts"),c=function(){function KeyLoader(t){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=t,this._registerListeners()}var t=KeyLoader.prototype;return t._registerListeners=function _registerListeners(){this.hls.on(a.Events.KEY_LOADING,this.onKeyLoading,this)},t._unregisterListeners=function _unregisterListeners(){this.hls.off(a.Events.KEY_LOADING,this.onKeyLoading)},t.destroy=function destroy(){for(var t in this._unregisterListeners(),this.loaders){var r=this.loaders[t];r&&r.destroy()}this.loaders={}},t.onKeyLoading=function onKeyLoading(t,r){var i=r.frag,u=i.type,c=this.loaders[u];if(i.decryptdata){var d=i.decryptdata.uri;if(d!==this.decrypturl||null===this.decryptkey){var g=this.hls.config;if(c&&(l.logger.warn("abort previous key loader for type:"+u),c.abort()),!d)return void l.logger.warn("key uri is falsy");var p=g.loader,m=i.loader=this.loaders[u]=new p(g);this.decrypturl=d,this.decryptkey=null;var v={url:d,frag:i,responseType:"arraybuffer"},b={timeout:g.fragLoadingTimeOut,maxRetry:0,retryDelay:g.fragLoadingRetryDelay,maxRetryDelay:g.fragLoadingMaxRetryTimeout,highWaterMark:0},M={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};m.load(v,b,M)}else this.decryptkey&&(i.decryptdata.key=this.decryptkey,this.hls.trigger(a.Events.KEY_LOADED,{frag:i}))}else l.logger.warn("Missing decryption data on fragment in onKeyLoading")},t.loadsuccess=function loadsuccess(t,r,i){var u=i.frag;u.decryptdata?(this.decryptkey=u.decryptdata.key=new Uint8Array(t.data),u.loader=null,delete this.loaders[u.type],this.hls.trigger(a.Events.KEY_LOADED,{frag:u})):l.logger.error("after key load, decryptdata unset")},t.loaderror=function loaderror(t,r){var i=r.frag,l=i.loader;l&&l.abort(),delete this.loaders[i.type],this.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:i,response:t})},t.loadtimeout=function loadtimeout(t,r){var i=r.frag,l=i.loader;l&&l.abort(),delete this.loaders[i.type],this.hls.trigger(a.Events.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},KeyLoader}()},"./src/loader/level-details.ts":
/*!*************************************!*\
    !*** ./src/loader/level-details.ts ***!
    \*************************************/
/*! exports provided: LevelDetails */function srcLoaderLevelDetailsTs(t,r,i){i.r(r),i.d(r,"LevelDetails",(function(){return u}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function LevelDetails(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=t}return LevelDetails.prototype.reloaded=function reloaded(t){if(!t)return this.advanced=!0,void(this.updated=!0);var r=this.lastPartSn-t.lastPartSn,i=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!i||!!r,this.advanced=this.endSN>t.endSN||r>0||0===r&&i>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(LevelDetails,[{key:"hasProgramDateTime",get:function get(){return!!this.fragments.length&&Object(a.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function get(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function get(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function get(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function get(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function get(){var t;return null!==(t=this.fragments)&&void 0!==t&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function get(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function get(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function get(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),LevelDetails}()},"./src/loader/level-key.ts":
/*!*********************************!*\
    !*** ./src/loader/level-key.ts ***!
    \*********************************/
/*! exports provided: LevelKey */function srcLoaderLevelKeyTs(t,r,i){i.r(r),i.d(r,"LevelKey",(function(){return u}));var a=i(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function LevelKey(t,r){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=r?Object(a.buildAbsoluteURL)(t,r,{alwaysNormalize:!0}):t}return LevelKey.fromURL=function fromURL(t,r){return new LevelKey(t,r)},LevelKey.fromURI=function fromURI(t){return new LevelKey(t)},function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(LevelKey,[{key:"uri",get:function get(){return this._uri}}]),LevelKey}()},"./src/loader/load-stats.ts":
/*!**********************************!*\
    !*** ./src/loader/load-stats.ts ***!
    \**********************************/
/*! exports provided: LoadStats */function srcLoaderLoadStatsTs(t,r,i){i.r(r),i.d(r,"LoadStats",(function(){return a}));var a=function LoadStats(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":
/*!***********************************!*\
    !*** ./src/loader/m3u8-parser.ts ***!
    \***********************************/
/*! exports provided: default */function srcLoaderM3u8ParserTs(t,r,i){i.r(r),i.d(r,"default",(function(){return I}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),l=i(/*! ./fragment */"./src/loader/fragment.ts"),c=i(/*! ./level-details */"./src/loader/level-details.ts"),d=i(/*! ./level-key */"./src/loader/level-key.ts"),g=i(/*! ../utils/attr-list */"./src/utils/attr-list.ts"),p=i(/*! ../utils/logger */"./src/utils/logger.ts"),m=i(/*! ../utils/codecs */"./src/utils/codecs.ts"),v=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,b=/#EXT-X-MEDIA:(.*)/g,M=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),S=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),E=/\.(mp4|m4s|m4v|m4a)$/i,I=function(){function M3U8Parser(){}return M3U8Parser.findGroup=function findGroup(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(a.id===r)return a}},M3U8Parser.convertAVC1ToAVCOTI=function convertAVC1ToAVCOTI(t){var r=t.split(".");if(r.length>2){var i=r.shift()+".";return i+=parseInt(r.shift()).toString(16),i+=("000"+parseInt(r.shift()).toString(16)).substr(-4)}return t},M3U8Parser.resolve=function resolve(t,r){return u.buildAbsoluteURL(r,t,{alwaysNormalize:!0})},M3U8Parser.parseMasterPlaylist=function parseMasterPlaylist(t,r){var i,a=[],u={},l=!1;for(v.lastIndex=0;null!=(i=v.exec(t));)if(i[1]){var c=new g.AttrList(i[1]),d={attrs:c,bitrate:c.decimalInteger("AVERAGE-BANDWIDTH")||c.decimalInteger("BANDWIDTH"),name:c.NAME,url:M3U8Parser.resolve(i[2],r)},p=c.decimalResolution("RESOLUTION");p&&(d.width=p.width,d.height=p.height),setCodecs((c.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),d),d.videoCodec&&-1!==d.videoCodec.indexOf("avc1")&&(d.videoCodec=M3U8Parser.convertAVC1ToAVCOTI(d.videoCodec)),a.push(d)}else if(i[3]){var m=new g.AttrList(i[3]);m["DATA-ID"]&&(l=!0,u[m["DATA-ID"]]=m)}return{levels:a,sessionData:l?u:null}},M3U8Parser.parseMasterPlaylistMedia=function parseMasterPlaylistMedia(t,r,i,a){var u;void 0===a&&(a=[]);var l=[],c=0;for(b.lastIndex=0;null!==(u=b.exec(t));){var d=new g.AttrList(u[1]);if(d.TYPE===i){var p={attrs:d,bitrate:0,id:c++,groupId:d["GROUP-ID"],instreamId:d["INSTREAM-ID"],name:d.NAME||d.LANGUAGE||"",type:i,default:d.bool("DEFAULT"),autoselect:d.bool("AUTOSELECT"),forced:d.bool("FORCED"),lang:d.LANGUAGE,url:d.URI?M3U8Parser.resolve(d.URI,r):""};if(a.length){var m=M3U8Parser.findGroup(a,p.groupId)||a[0];assignCodec(p,m,"audioCodec"),assignCodec(p,m,"textCodec")}l.push(p)}}return l},M3U8Parser.parseLevelPlaylist=function parseLevelPlaylist(t,r,i,m,v){var b,I,D,A=new c.LevelDetails(r),C=A.fragments,N=null,k=0,O=0,L=0,R=0,j=null,B=new l.Fragment(m,r),U=-1,z=!1;for(M.lastIndex=0,A.m3u8=t;null!==(b=M.exec(t));){z&&(z=!1,(B=new l.Fragment(m,r)).start=L,B.sn=k,B.cc=R,B.level=i,N&&(B.initSegment=N,B.rawProgramDateTime=N.rawProgramDateTime));var Y=b[1];if(Y){B.duration=parseFloat(Y);var G=(" "+b[2]).slice(1);B.title=G||null,B.tagList.push(G?["INF",Y,G]:["INF",Y])}else if(b[3])Object(a.isFiniteNumber)(B.duration)&&(B.start=L,D&&(B.levelkey=D),B.sn=k,B.level=i,B.cc=R,B.urlId=v,C.push(B),B.relurl=(" "+b[3]).slice(1),assignProgramDateTime(B,j),j=B,L+=B.duration,k++,O=0,z=!0);else if(b[4]){var H=(" "+b[4]).slice(1);j?B.setByteRange(H,j):B.setByteRange(H)}else if(b[5])B.rawProgramDateTime=(" "+b[5]).slice(1),B.tagList.push(["PROGRAM-DATE-TIME",B.rawProgramDateTime]),-1===U&&(U=C.length);else{if(!(b=b[0].match(S))){p.logger.warn("No matches on slow regex match for level playlist!");continue}for(I=1;I<b.length&&void 0===b[I];I++);var Q=(" "+b[I]).slice(1),V=(" "+b[I+1]).slice(1),W=b[I+2]?(" "+b[I+2]).slice(1):"";switch(Q){case"PLAYLIST-TYPE":A.type=V.toUpperCase();break;case"MEDIA-SEQUENCE":k=A.startSN=parseInt(V);break;case"SKIP":var $=new g.AttrList(V),K=$.decimalInteger("SKIPPED-SEGMENTS");if(Object(a.isFiniteNumber)(K)){A.skippedSegments=K;for(var q=K;q--;)C.unshift(null);k+=K}var X=$.enumeratedString("RECENTLY-REMOVED-DATERANGES");X&&(A.recentlyRemovedDateranges=X.split("\t"));break;case"TARGETDURATION":A.targetduration=parseFloat(V);break;case"VERSION":A.version=parseInt(V);break;case"EXTM3U":break;case"ENDLIST":A.live=!1;break;case"#":(V||W)&&B.tagList.push(W?[V,W]:[V]);break;case"DIS":R++;case"GAP":B.tagList.push([Q]);break;case"BITRATE":B.tagList.push([Q,V]);break;case"DISCONTINUITY-SEQ":R=parseInt(V);break;case"KEY":var Z,J=new g.AttrList(V),ee=J.enumeratedString("METHOD"),te=J.URI,re=J.hexadecimalInteger("IV"),ne=J.enumeratedString("KEYFORMATVERSIONS"),ie=J.enumeratedString("KEYID"),ae=null!=(Z=J.enumeratedString("KEYFORMAT"))?Z:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(ae)>-1){p.logger.warn("Keyformat "+ae+" is not supported from the manifest");continue}if("identity"!==ae)continue;ee&&(D=d.LevelKey.fromURL(r,te),te&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(ee)>=0&&(D.method=ee,D.keyFormat=ae,ie&&(D.keyID=ie),ne&&(D.keyFormatVersions=ne),D.iv=re));break;case"START":var oe=new g.AttrList(V).decimalFloatingPoint("TIME-OFFSET");Object(a.isFiniteNumber)(oe)&&(A.startTimeOffset=oe);break;case"MAP":var se=new g.AttrList(V);B.relurl=se.URI,se.BYTERANGE&&B.setByteRange(se.BYTERANGE),B.level=i,B.sn="initSegment",D&&(B.levelkey=D),B.initSegment=null,N=B,z=!0;break;case"SERVER-CONTROL":var ue=new g.AttrList(V);A.canBlockReload=ue.bool("CAN-BLOCK-RELOAD"),A.canSkipUntil=ue.optionalFloat("CAN-SKIP-UNTIL",0),A.canSkipDateRanges=A.canSkipUntil>0&&ue.bool("CAN-SKIP-DATERANGES"),A.partHoldBack=ue.optionalFloat("PART-HOLD-BACK",0),A.holdBack=ue.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var le=new g.AttrList(V);A.partTarget=le.decimalFloatingPoint("PART-TARGET");break;case"PART":var ce=A.partList;ce||(ce=A.partList=[]);var de=O>0?ce[ce.length-1]:void 0,fe=O++,he=new l.Part(new g.AttrList(V),B,r,fe,de);ce.push(he),B.duration+=he.duration;break;case"PRELOAD-HINT":var ge=new g.AttrList(V);A.preloadHint=ge;break;case"RENDITION-REPORT":var pe=new g.AttrList(V);A.renditionReports=A.renditionReports||[],A.renditionReports.push(pe);break;default:p.logger.warn("line parsed but not handled: "+b)}}}j&&!j.relurl?(C.pop(),L-=j.duration,A.partList&&(A.fragmentHint=j)):A.partList&&(assignProgramDateTime(B,j),B.cc=R,A.fragmentHint=B);var me=C.length,ye=C[0],ve=C[me-1];if((L+=A.skippedSegments*A.targetduration)>0&&me&&ve){A.averagetargetduration=L/me;var _e=ve.sn;A.endSN="initSegment"!==_e?_e:0,ye&&(A.startCC=ye.cc,ye.initSegment||A.fragments.every((function(t){return t.relurl&&function isMP4Url(t){var r,i;return E.test(null!=(r=null===(i=u.parseURL(t))||void 0===i?void 0:i.path)?r:"")}(t.relurl)}))&&(p.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(B=new l.Fragment(m,r)).relurl=ve.relurl,B.level=i,B.sn="initSegment",ye.initSegment=B,A.needSidxRanges=!0))}else A.endSN=0,A.startCC=0;return A.fragmentHint&&(L+=A.fragmentHint.duration),A.totalduration=L,A.endCC=R,U>0&&function backfillProgramDateTimes(t,r){for(var i=t[r],a=r;a--;){var u=t[a];if(!u)return;u.programDateTime=i.programDateTime-1e3*u.duration,i=u}}(C,U),A},M3U8Parser}();function setCodecs(t,r){["video","audio","text"].forEach((function(i){var a=t.filter((function(t){return Object(m.isCodecType)(t,i)}));if(a.length){var u=a.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));r[i+"Codec"]=u.length>0?u[0]:a[0],t=t.filter((function(t){return-1===a.indexOf(t)}))}})),r.unknownCodecs=t}function assignCodec(t,r,i){var a=r[i];a&&(t[i]=a)}function assignProgramDateTime(t,r){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=r&&r.programDateTime&&(t.programDateTime=r.endProgramDateTime),Object(a.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}},"./src/loader/playlist-loader.ts":
/*!***************************************!*\
    !*** ./src/loader/playlist-loader.ts ***!
    \***************************************/
/*! exports provided: default */function srcLoaderPlaylistLoaderTs(t,r,i){i.r(r);var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../events */"./src/events.ts"),l=i(/*! ../errors */"./src/errors.ts"),c=i(/*! ../utils/logger */"./src/utils/logger.ts"),d=i(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),g=i(/*! ./m3u8-parser */"./src/loader/m3u8-parser.ts"),p=i(/*! ../types/loader */"./src/types/loader.ts"),m=i(/*! ../utils/attr-list */"./src/utils/attr-list.ts");function getResponseUrl(t,r){var i=t.url;return void 0!==i&&0!==i.indexOf("data:")||(i=r.url),i}var v=function(){function PlaylistLoader(t){this.hls=void 0,this.loaders=Object.create(null),this.hls=t,this.registerListeners()}var t=PlaylistLoader.prototype;return t.registerListeners=function registerListeners(){var t=this.hls;t.on(u.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(u.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(u.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(u.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function unregisterListeners(){var t=this.hls;t.off(u.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(u.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(u.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(u.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function createInternalLoader(t){var r=this.hls.config,i=r.pLoader,a=r.loader,u=new(i||a)(r);return t.loader=u,this.loaders[t.type]=u,u},t.getInternalLoader=function getInternalLoader(t){return this.loaders[t.type]},t.resetInternalLoader=function resetInternalLoader(t){this.loaders[t]&&delete this.loaders[t]},t.destroyInternalLoaders=function destroyInternalLoaders(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy(),this.resetInternalLoader(t)}},t.destroy=function destroy(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function onManifestLoading(t,r){var i=r.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:p.PlaylistContextType.MANIFEST,url:i,deliveryDirectives:null})},t.onLevelLoading=function onLevelLoading(t,r){var i=r.id,a=r.level,u=r.url,l=r.deliveryDirectives;this.load({id:i,groupId:null,level:a,responseType:"text",type:p.PlaylistContextType.LEVEL,url:u,deliveryDirectives:l})},t.onAudioTrackLoading=function onAudioTrackLoading(t,r){var i=r.id,a=r.groupId,u=r.url,l=r.deliveryDirectives;this.load({id:i,groupId:a,level:null,responseType:"text",type:p.PlaylistContextType.AUDIO_TRACK,url:u,deliveryDirectives:l})},t.onSubtitleTrackLoading=function onSubtitleTrackLoading(t,r){var i=r.id,a=r.groupId,u=r.url,l=r.deliveryDirectives;this.load({id:i,groupId:a,level:null,responseType:"text",type:p.PlaylistContextType.SUBTITLE_TRACK,url:u,deliveryDirectives:l})},t.load=function load(t){var r,i,a,u,l,d,g=this.hls.config,m=this.getInternalLoader(t);if(m){var v=m.context;if(v&&v.url===t.url)return void c.logger.trace("[playlist-loader]: playlist request ongoing");c.logger.log("[playlist-loader]: aborting previous loader for type: "+t.type),m.abort()}switch(t.type){case p.PlaylistContextType.MANIFEST:i=g.manifestLoadingMaxRetry,a=g.manifestLoadingTimeOut,u=g.manifestLoadingRetryDelay,l=g.manifestLoadingMaxRetryTimeout;break;case p.PlaylistContextType.LEVEL:case p.PlaylistContextType.AUDIO_TRACK:case p.PlaylistContextType.SUBTITLE_TRACK:i=0,a=g.levelLoadingTimeOut;break;default:i=g.levelLoadingMaxRetry,a=g.levelLoadingTimeOut,u=g.levelLoadingRetryDelay,l=g.levelLoadingMaxRetryTimeout}if(m=this.createInternalLoader(t),null!==(r=t.deliveryDirectives)&&void 0!==r&&r.part&&(t.type===p.PlaylistContextType.LEVEL&&null!==t.level?d=this.hls.levels[t.level].details:t.type===p.PlaylistContextType.AUDIO_TRACK&&null!==t.id?d=this.hls.audioTracks[t.id].details:t.type===p.PlaylistContextType.SUBTITLE_TRACK&&null!==t.id&&(d=this.hls.subtitleTracks[t.id].details),d)){var b=d.partTarget,M=d.targetduration;b&&M&&(a=Math.min(1e3*Math.max(3*b,.8*M),a))}var S={timeout:a,maxRetry:i,retryDelay:u,maxRetryDelay:l,highWaterMark:0},E={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};m.load(t,S,E)},t.loadsuccess=function loadsuccess(t,r,i,a){if(void 0===a&&(a=null),i.isSidxRequest)return this.handleSidxRequest(t,i),void this.handlePlaylistLoaded(t,r,i,a);this.resetInternalLoader(i.type);var u=t.data;0===u.indexOf("#EXTM3U")?(r.parsing.start=performance.now(),u.indexOf("#EXTINF:")>0||u.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(t,r,i,a):this.handleMasterPlaylist(t,r,i,a)):this.handleManifestParsingError(t,i,"no EXTM3U delimiter",a)},t.loaderror=function loaderror(t,r,i){void 0===i&&(i=null),this.handleNetworkError(r,i,!1,t)},t.loadtimeout=function loadtimeout(t,r,i){void 0===i&&(i=null),this.handleNetworkError(r,i,!0)},t.handleMasterPlaylist=function handleMasterPlaylist(t,r,i,a){var l=this.hls,d=t.data,p=getResponseUrl(t,i),v=g.default.parseMasterPlaylist(d,p),b=v.levels,M=v.sessionData;if(b.length){var S=b.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),E=b.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),I=g.default.parseMasterPlaylistMedia(d,p,"AUDIO",S),D=g.default.parseMasterPlaylistMedia(d,p,"SUBTITLES",E),A=g.default.parseMasterPlaylistMedia(d,p,"CLOSED-CAPTIONS");I.length&&(I.some((function(t){return!t.url}))||!b[0].audioCodec||b[0].attrs.AUDIO||(c.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),I.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new m.AttrList({}),bitrate:0,url:""}))),l.trigger(u.Events.MANIFEST_LOADED,{levels:b,audioTracks:I,subtitles:D,captions:A,url:p,stats:r,networkDetails:a,sessionData:M})}else this.handleManifestParsingError(t,i,"no level found in manifest",a)},t.handleTrackOrLevelPlaylist=function handleTrackOrLevelPlaylist(t,r,i,c){var d=this.hls,v=i.id,b=i.level,M=i.type,S=getResponseUrl(t,i),E=Object(a.isFiniteNumber)(v)?v:0,I=Object(a.isFiniteNumber)(b)?b:E,D=function mapContextToLevelType(t){switch(t.type){case p.PlaylistContextType.AUDIO_TRACK:return p.PlaylistLevelType.AUDIO;case p.PlaylistContextType.SUBTITLE_TRACK:return p.PlaylistLevelType.SUBTITLE;default:return p.PlaylistLevelType.MAIN}}(i),A=g.default.parseLevelPlaylist(t.data,S,I,D,E);if(A.fragments.length){if(M===p.PlaylistContextType.MANIFEST){var C={attrs:new m.AttrList({}),bitrate:0,details:A,name:"",url:S};d.trigger(u.Events.MANIFEST_LOADED,{levels:[C],audioTracks:[],url:S,stats:r,networkDetails:c,sessionData:null})}if(r.parsing.end=performance.now(),A.needSidxRanges){var N,k=null===(N=A.fragments[0].initSegment)||void 0===N?void 0:N.url;this.load({url:k,isSidxRequest:!0,type:M,level:b,levelDetails:A,id:v,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else i.levelDetails=A,this.handlePlaylistLoaded(t,r,i,c)}else d.trigger(u.Events.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:S,reason:"no fragments found in level",level:"number"==typeof i.level?i.level:void 0})},t.handleSidxRequest=function handleSidxRequest(t,r){var i=Object(d.parseSegmentIndex)(new Uint8Array(t.data));if(i){var a=i.references,u=r.levelDetails;a.forEach((function(t,r){var a=t.info,l=u.fragments[r];0===l.byteRange.length&&l.setByteRange(String(1+a.end-a.start)+"@"+String(a.start)),l.initSegment&&l.initSegment.setByteRange(String(i.moovEndOffset)+"@0")}))}},t.handleManifestParsingError=function handleManifestParsingError(t,r,i,a){this.hls.trigger(u.Events.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:r.type===p.PlaylistContextType.MANIFEST,url:t.url,reason:i,response:t,context:r,networkDetails:a})},t.handleNetworkError=function handleNetworkError(t,r,i,a){void 0===i&&(i=!1),c.logger.warn("[playlist-loader]: A network "+(i?"timeout":"error")+" occurred while loading "+t.type+" level: "+t.level+" id: "+t.id+' group-id: "'+t.groupId+'"');var d=l.ErrorDetails.UNKNOWN,g=!1,m=this.getInternalLoader(t);switch(t.type){case p.PlaylistContextType.MANIFEST:d=i?l.ErrorDetails.MANIFEST_LOAD_TIMEOUT:l.ErrorDetails.MANIFEST_LOAD_ERROR,g=!0;break;case p.PlaylistContextType.LEVEL:d=i?l.ErrorDetails.LEVEL_LOAD_TIMEOUT:l.ErrorDetails.LEVEL_LOAD_ERROR,g=!1;break;case p.PlaylistContextType.AUDIO_TRACK:d=i?l.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,g=!1;break;case p.PlaylistContextType.SUBTITLE_TRACK:d=i?l.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:l.ErrorDetails.SUBTITLE_LOAD_ERROR,g=!1}m&&this.resetInternalLoader(t.type);var v={type:l.ErrorTypes.NETWORK_ERROR,details:d,fatal:g,url:t.url,loader:m,context:t,networkDetails:r};a&&(v.response=a),this.hls.trigger(u.Events.ERROR,v)},t.handlePlaylistLoaded=function handlePlaylistLoaded(t,r,i,a){var l=i.type,c=i.level,d=i.id,g=i.groupId,m=i.loader,v=i.levelDetails,b=i.deliveryDirectives;if(null!=v&&v.targetduration){if(m)switch(v.live&&(m.getCacheAge&&(v.ageHeader=m.getCacheAge()||0),m.getCacheAge&&!isNaN(v.ageHeader)||(v.ageHeader=0)),l){case p.PlaylistContextType.MANIFEST:case p.PlaylistContextType.LEVEL:this.hls.trigger(u.Events.LEVEL_LOADED,{details:v,level:c||0,id:d||0,stats:r,networkDetails:a,deliveryDirectives:b});break;case p.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(u.Events.AUDIO_TRACK_LOADED,{details:v,id:d||0,groupId:g||"",stats:r,networkDetails:a,deliveryDirectives:b});break;case p.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(u.Events.SUBTITLE_TRACK_LOADED,{details:v,id:d||0,groupId:g||"",stats:r,networkDetails:a,deliveryDirectives:b})}}else this.handleManifestParsingError(t,i,"invalid target duration",a)},PlaylistLoader}();r.default=v},"./src/polyfills/number.ts":
/*!*********************************!*\
    !*** ./src/polyfills/number.ts ***!
    \*********************************/
/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */function srcPolyfillsNumberTs(t,r,i){i.r(r),i.d(r,"isFiniteNumber",(function(){return a})),i.d(r,"MAX_SAFE_INTEGER",(function(){return u}));var a=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},u=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":
/*!*********************************!*\
    !*** ./src/remux/aac-helper.ts ***!
    \*********************************/
/*! exports provided: default */function srcRemuxAacHelperTs(t,r,i){i.r(r);var a=function(){function AAC(){}return AAC.getSilentFrame=function getSilentFrame(t,r){if("mp4a.40.2"===t){if(1===r)return new Uint8Array([0,200,0,128,35,128]);if(2===r)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===r)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===r)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===r)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},AAC}();r.default=a},"./src/remux/mp4-generator.ts":
/*!************************************!*\
    !*** ./src/remux/mp4-generator.ts ***!
    \************************************/
/*! exports provided: default */function srcRemuxMp4GeneratorTs(t,r,i){i.r(r);var a=Math.pow(2,32)-1,u=function(){function MP4(){}return MP4.init=function init(){var t;for(t in MP4.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},MP4.types)MP4.types.hasOwnProperty(t)&&(MP4.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);MP4.HDLR_TYPES={video:r,audio:i};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),u=new Uint8Array([0,0,0,0,0,0,0,0]);MP4.STTS=MP4.STSC=MP4.STCO=u,MP4.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),MP4.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),MP4.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),MP4.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var l=new Uint8Array([105,115,111,109]),c=new Uint8Array([97,118,99,49]),d=new Uint8Array([0,0,0,1]);MP4.FTYP=MP4.box(MP4.types.ftyp,l,d,l,c),MP4.DINF=MP4.box(MP4.types.dinf,MP4.box(MP4.types.dref,a))},MP4.box=function box(t){for(var r=8,i=arguments.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=arguments[u];for(var l=a.length,c=l;l--;)r+=a[l].byteLength;var d=new Uint8Array(r);for(d[0]=r>>24&255,d[1]=r>>16&255,d[2]=r>>8&255,d[3]=255&r,d.set(t,4),l=0,r=8;l<c;l++)d.set(a[l],r),r+=a[l].byteLength;return d},MP4.hdlr=function hdlr(t){return MP4.box(MP4.types.hdlr,MP4.HDLR_TYPES[t])},MP4.mdat=function mdat(t){return MP4.box(MP4.types.mdat,t)},MP4.mdhd=function mdhd(t,r){r*=t;var i=Math.floor(r/(a+1)),u=Math.floor(r%(a+1));return MP4.box(MP4.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,u>>24,u>>16&255,u>>8&255,255&u,85,196,0,0]))},MP4.mdia=function mdia(t){return MP4.box(MP4.types.mdia,MP4.mdhd(t.timescale,t.duration),MP4.hdlr(t.type),MP4.minf(t))},MP4.mfhd=function mfhd(t){return MP4.box(MP4.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},MP4.minf=function minf(t){return"audio"===t.type?MP4.box(MP4.types.minf,MP4.box(MP4.types.smhd,MP4.SMHD),MP4.DINF,MP4.stbl(t)):MP4.box(MP4.types.minf,MP4.box(MP4.types.vmhd,MP4.VMHD),MP4.DINF,MP4.stbl(t))},MP4.moof=function moof(t,r,i){return MP4.box(MP4.types.moof,MP4.mfhd(t),MP4.traf(i,r))},MP4.moov=function moov(t){for(var r=t.length,i=[];r--;)i[r]=MP4.trak(t[r]);return MP4.box.apply(null,[MP4.types.moov,MP4.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(MP4.mvex(t)))},MP4.mvex=function mvex(t){for(var r=t.length,i=[];r--;)i[r]=MP4.trex(t[r]);return MP4.box.apply(null,[MP4.types.mvex].concat(i))},MP4.mvhd=function mvhd(t,r){r*=t;var i=Math.floor(r/(a+1)),u=Math.floor(r%(a+1)),l=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,u>>24,u>>16&255,u>>8&255,255&u,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return MP4.box(MP4.types.mvhd,l)},MP4.sdtp=function sdtp(t){var r,i,a=t.samples||[],u=new Uint8Array(4+a.length);for(r=0;r<a.length;r++)i=a[r].flags,u[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return MP4.box(MP4.types.sdtp,u)},MP4.stbl=function stbl(t){return MP4.box(MP4.types.stbl,MP4.stsd(t),MP4.box(MP4.types.stts,MP4.STTS),MP4.box(MP4.types.stsc,MP4.STSC),MP4.box(MP4.types.stsz,MP4.STSZ),MP4.box(MP4.types.stco,MP4.STCO))},MP4.avc1=function avc1(t){var r,i,a,u=[],l=[];for(r=0;r<t.sps.length;r++)a=(i=t.sps[r]).byteLength,u.push(a>>>8&255),u.push(255&a),u=u.concat(Array.prototype.slice.call(i));for(r=0;r<t.pps.length;r++)a=(i=t.pps[r]).byteLength,l.push(a>>>8&255),l.push(255&a),l=l.concat(Array.prototype.slice.call(i));var c=MP4.box(MP4.types.avcC,new Uint8Array([1,u[3],u[4],u[5],255,224|t.sps.length].concat(u).concat([t.pps.length]).concat(l))),d=t.width,g=t.height,p=t.pixelRatio[0],m=t.pixelRatio[1];return MP4.box(MP4.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,255&d,g>>8&255,255&g,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,MP4.box(MP4.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),MP4.box(MP4.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,255&p,m>>24,m>>16&255,m>>8&255,255&m])))},MP4.esds=function esds(t){var r=t.config.length;return new Uint8Array([0,0,0,0,3,23+r,0,1,0,4,15+r,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([r]).concat(t.config).concat([6,1,2]))},MP4.mp4a=function mp4a(t){var r=t.samplerate;return MP4.box(MP4.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),MP4.box(MP4.types.esds,MP4.esds(t)))},MP4.mp3=function mp3(t){var r=t.samplerate;return MP4.box(MP4.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},MP4.stsd=function stsd(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp4a(t)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp3(t)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.avc1(t))},MP4.tkhd=function tkhd(t){var r=t.id,i=t.duration*t.timescale,u=t.width,l=t.height,c=Math.floor(i/(a+1)),d=Math.floor(i%(a+1));return MP4.box(MP4.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,u>>8&255,255&u,0,0,l>>8&255,255&l,0,0]))},MP4.traf=function traf(t,r){var i=MP4.sdtp(t),u=t.id,l=Math.floor(r/(a+1)),c=Math.floor(r%(a+1));return MP4.box(MP4.types.traf,MP4.box(MP4.types.tfhd,new Uint8Array([0,0,0,0,u>>24,u>>16&255,u>>8&255,255&u])),MP4.box(MP4.types.tfdt,new Uint8Array([1,0,0,0,l>>24,l>>16&255,l>>8&255,255&l,c>>24,c>>16&255,c>>8&255,255&c])),MP4.trun(t,i.length+16+20+8+16+8+8),i)},MP4.trak=function trak(t){return t.duration=t.duration||4294967295,MP4.box(MP4.types.trak,MP4.tkhd(t),MP4.mdia(t))},MP4.trex=function trex(t){var r=t.id;return MP4.box(MP4.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},MP4.trun=function trun(t,r){var i,a,u,l,c,d,g=t.samples||[],p=g.length,m=12+16*p,v=new Uint8Array(m);for(r+=8+m,v.set([0,0,15,1,p>>>24&255,p>>>16&255,p>>>8&255,255&p,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<p;i++)u=(a=g[i]).duration,l=a.size,c=a.flags,d=a.cts,v.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,l>>>24&255,l>>>16&255,l>>>8&255,255&l,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*i);return MP4.box(MP4.types.trun,v)},MP4.initSegment=function initSegment(t){MP4.types||MP4.init();var r=MP4.moov(t),i=new Uint8Array(MP4.FTYP.byteLength+r.byteLength);return i.set(MP4.FTYP),i.set(r,MP4.FTYP.byteLength),i},MP4}();u.types=void 0,u.HDLR_TYPES=void 0,u.STTS=void 0,u.STSC=void 0,u.STCO=void 0,u.STSZ=void 0,u.VMHD=void 0,u.SMHD=void 0,u.STSD=void 0,u.FTYP=void 0,u.DINF=void 0,r.default=u},"./src/remux/mp4-remuxer.ts":
/*!**********************************!*\
    !*** ./src/remux/mp4-remuxer.ts ***!
    \**********************************/
/*! exports provided: default, normalizePts */function srcRemuxMp4RemuxerTs(t,r,i){i.r(r),i.d(r,"default",(function(){return S})),i.d(r,"normalizePts",(function(){return normalizePts}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ./aac-helper */"./src/remux/aac-helper.ts"),l=i(/*! ./mp4-generator */"./src/remux/mp4-generator.ts"),c=i(/*! ../events */"./src/events.ts"),d=i(/*! ../errors */"./src/errors.ts"),g=i(/*! ../utils/logger */"./src/utils/logger.ts"),p=i(/*! ../types/loader */"./src/types/loader.ts"),m=i(/*! ../utils/timescale-conversion */"./src/utils/timescale-conversion.ts");function _extends(){return _extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},_extends.apply(this,arguments)}var v=null,b=null,M=!1,S=function(){function MP4Remuxer(t,r,i,a){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=r,this.typeSupported=i,this.ISGenerated=!1,null===v){var u=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);v=u?parseInt(u[1]):0}if(null===b){var l=navigator.userAgent.match(/Safari\/(\d+)/i);b=l?parseInt(l[1]):0}M=!!v&&v<75||!!b&&b<600}var t=MP4Remuxer.prototype;return t.destroy=function destroy(){},t.resetTimeStamp=function resetTimeStamp(t){g.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},t.resetNextTimestamp=function resetNextTimestamp(){g.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function resetInitSegment(){g.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function getVideoStartPts(t){var r=!1,i=t.reduce((function(t,i){var a=i.pts-t;return a<-4294967296?(r=!0,normalizePts(t,i.pts)):a>0?t:i.pts}),t[0].pts);return r&&g.logger.debug("PTS rollover detected"),i},t.remux=function remux(t,r,i,a,u,l,c,d){var m,v,b,M,S,E,I=u,D=u,A=t.pid>-1,C=r.pid>-1,N=r.samples.length,k=t.samples.length>0,O=N>1;if((!A||k)&&(!C||O)||this.ISGenerated||c){this.ISGenerated||(b=this.generateIS(t,r,u));var L=this.isVideoContiguous,R=-1;if(O&&(R=function findKeyframeIndex(t){for(var r=0;r<t.length;r++)if(t[r].key)return r;return-1}(r.samples),!L&&this.config.forceKeyFrameOnDiscontinuity))if(E=!0,R>0){g.logger.warn("[mp4-remuxer]: Dropped "+R+" out of "+N+" video samples due to a missing keyframe");var j=this.getVideoStartPts(r.samples);r.samples=r.samples.slice(R),r.dropped+=R,D+=(r.samples[0].pts-j)/(r.timescale||9e4)}else-1===R&&(g.logger.warn("[mp4-remuxer]: No keyframe found out of "+N+" video samples"),E=!1);if(this.ISGenerated){if(k&&O){var B=this.getVideoStartPts(r.samples),U=(normalizePts(t.samples[0].pts,B)-B)/r.inputTimeScale;I+=Math.max(0,U),D+=Math.max(0,-U)}if(k){if(t.samplerate||(g.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),b=this.generateIS(t,r,u)),v=this.remuxAudio(t,I,this.isAudioContiguous,l,C||O||d===p.PlaylistLevelType.AUDIO?D:void 0),O){var z=v?v.endPTS-v.startPTS:0;r.inputTimeScale||(g.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),b=this.generateIS(t,r,u)),m=this.remuxVideo(r,D,L,z)}}else O&&(m=this.remuxVideo(r,D,L,0));m&&(m.firstKeyFrame=R,m.independent=-1!==R)}}return this.ISGenerated&&(i.samples.length&&(S=this.remuxID3(i,u)),a.samples.length&&(M=this.remuxText(a,u))),{audio:v,video:m,initSegment:b,independent:E,text:M,id3:S}},t.generateIS=function generateIS(t,r,i){var u,c,d,g=t.samples,p=r.samples,m=this.typeSupported,v={},b=!Object(a.isFiniteNumber)(this._initPTS),M="audio/mp4";if(b&&(u=c=1/0),t.config&&g.length&&(t.timescale=t.samplerate,t.isAAC||(m.mpeg?(M="audio/mpeg",t.codec=""):m.mp3&&(t.codec="mp3")),v.audio={id:"audio",container:M,codec:t.codec,initSegment:!t.isAAC&&m.mpeg?new Uint8Array(0):l.default.initSegment([t]),metadata:{channelCount:t.channelCount}},b&&(d=t.inputTimeScale,u=c=g[0].pts-Math.round(d*i))),r.sps&&r.pps&&p.length&&(r.timescale=r.inputTimeScale,v.video={id:"main",container:"video/mp4",codec:r.codec,initSegment:l.default.initSegment([r]),metadata:{width:r.width,height:r.height}},b)){d=r.inputTimeScale;var S=this.getVideoStartPts(p),E=Math.round(d*i);c=Math.min(c,normalizePts(p[0].dts,S)-E),u=Math.min(u,S-E)}if(Object.keys(v).length)return this.ISGenerated=!0,b&&(this._initPTS=u,this._initDTS=c),{tracks:v,initPTS:u,timescale:d}},t.remuxVideo=function remuxVideo(t,r,i,a){var u,p,b,S=t.inputTimeScale,I=t.samples,D=[],A=I.length,C=this._initPTS,N=this.nextAvcDts,k=8,O=Number.POSITIVE_INFINITY,L=Number.NEGATIVE_INFINITY,R=0,j=!1;i&&null!==N||(N=r*S-(I[0].pts-normalizePts(I[0].dts,I[0].pts)));for(var B=0;B<A;B++){var U=I[B];U.pts=normalizePts(U.pts-C,N),U.dts=normalizePts(U.dts-C,N),U.dts>U.pts&&(R=Math.max(Math.min(R,U.pts-U.dts),-18e3)),U.dts<I[B>0?B-1:B].dts&&(j=!0)}j&&I.sort((function(t,r){var i=t.dts-r.dts,a=t.pts-r.pts;return i||a})),p=I[0].dts,b=I[I.length-1].dts;var z=Math.round((b-p)/(A-1));if(R<0){if(R<-2*z){g.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(m.toMsFromMpegTsClock)(-z,!0)+" ms");for(var Y=R,G=0;G<A;G++)I[G].dts=Y=Math.max(Y,I[G].pts-z),I[G].pts=Math.max(Y,I[G].pts)}else{g.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(m.toMsFromMpegTsClock)(R,!0)+" ms to overcome this issue");for(var H=0;H<A;H++)I[H].dts=I[H].dts+R}p=I[0].dts}if(i){var Q=p-N,V=Q>z;if(V||Q<-1){V?g.logger.warn("AVC: "+Object(m.toMsFromMpegTsClock)(Q,!0)+" ms ("+Q+"dts) hole between fragments detected, filling it"):g.logger.warn("AVC: "+Object(m.toMsFromMpegTsClock)(-Q,!0)+" ms ("+Q+"dts) overlapping between fragments detected"),p=N;var W=I[0].pts-Q;I[0].dts=p,I[0].pts=W,g.logger.log("Video: First PTS/DTS adjusted: "+Object(m.toMsFromMpegTsClock)(W,!0)+"/"+Object(m.toMsFromMpegTsClock)(p,!0)+", delta: "+Object(m.toMsFromMpegTsClock)(Q,!0)+" ms")}}M&&(p=Math.max(0,p));for(var $=0,K=0,q=0;q<A;q++){for(var X=I[q],Z=X.units,J=Z.length,ee=0,te=0;te<J;te++)ee+=Z[te].data.length;K+=ee,$+=J,X.length=ee,X.dts=Math.max(X.dts,p),X.pts=Math.max(X.pts,X.dts,0),O=Math.min(X.pts,O),L=Math.max(X.pts,L)}b=I[A-1].dts;var re,ne=K+4*$+8;try{re=new Uint8Array(ne)}catch(t){return void this.observer.emit(c.Events.ERROR,c.Events.ERROR,{type:d.ErrorTypes.MUX_ERROR,details:d.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:ne,reason:"fail allocating video mdat "+ne})}var ie=new DataView(re.buffer);ie.setUint32(0,ne),re.set(l.default.types.mdat,4);for(var ae=0;ae<A;ae++){for(var oe=I[ae],se=oe.units,ue=0,le=0,ce=se.length;le<ce;le++){var de=se[le],fe=de.data,he=de.data.byteLength;ie.setUint32(k,he),k+=4,re.set(fe,k),k+=he,ue+=4+he}if(ae<A-1)u=I[ae+1].dts-oe.dts;else{var ge=this.config,pe=oe.dts-I[ae>0?ae-1:ae].dts;if(ge.stretchShortVideoTrack&&null!==this.nextAudioPts){var me=Math.floor(ge.maxBufferHole*S),ye=(a?O+a*S:this.nextAudioPts)-oe.pts;ye>me?((u=ye-pe)<0&&(u=pe),g.logger.log("[mp4-remuxer]: It is approximately "+ye/90+" ms to the next segment; using duration "+u/90+" ms for the last video frame.")):u=pe}else u=pe}var ve=Math.round(oe.pts-oe.dts);D.push(new E(oe.key,u,ue,ve))}if(D.length&&v&&v<70){var _e=D[0].flags;_e.dependsOn=2,_e.isNonSync=0}console.assert(void 0!==u,"mp4SampleDuration must be computed"),this.nextAvcDts=N=b+u,this.isVideoContiguous=!0;var Te={data1:l.default.moof(t.sequenceNumber++,p,_extends({},t,{samples:D})),data2:re,startPTS:O/S,endPTS:(L+u)/S,startDTS:p/S,endDTS:N/S,type:"video",hasAudio:!1,hasVideo:!0,nb:D.length,dropped:t.dropped};return t.samples=[],t.dropped=0,console.assert(re.length,"MDAT length must not be zero"),Te},t.remuxAudio=function remuxAudio(t,r,i,a,p){var m=t.inputTimeScale,v=m/(t.samplerate?t.samplerate:m),b=t.isAAC?1024:1152,M=b*v,S=this._initPTS,I=!t.isAAC&&this.typeSupported.mpeg,D=[],A=t.samples,C=I?0:8,N=this.nextAudioPts||-1,k=r*m;if(this.isAudioContiguous=i=i||A.length&&N>0&&(a&&Math.abs(k-N)<9e3||Math.abs(normalizePts(A[0].pts-S,k)-N)<20*M),A.forEach((function(t){t.pts=normalizePts(t.pts-S,k)})),!i||N<0){if(A=A.filter((function(t){return t.pts>=0})),!A.length)return;N=0===p?0:a?Math.max(0,k):A[0].pts}if(t.isAAC)for(var O=void 0!==p,L=this.config.maxAudioFramesDrift,R=0,j=N;R<A.length;R++){var B=A[R],U=B.pts,z=U-j,Y=Math.abs(1e3*z/m);if(z<=-L*M&&O)0===R&&(g.logger.warn("Audio frame @ "+(U/m).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*z/m)+" ms."),this.nextAudioPts=N=j=U);else if(z>=L*M&&Y<1e4&&O){var G=Math.round(z/M);(j=U-G*M)<0&&(G--,j+=M),0===R&&(this.nextAudioPts=N=j),g.logger.warn("[mp4-remuxer]: Injecting "+G+" audio frame @ "+(j/m).toFixed(3)+"s due to "+Math.round(1e3*z/m)+" ms gap.");for(var H=0;H<G;H++){var Q=Math.max(j,0),V=u.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);V||(g.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),V=B.unit.subarray()),A.splice(R,0,{unit:V,pts:Q}),j+=M,R++}}B.pts=j,j+=M}for(var W,$=null,K=null,q=0,X=A.length;X--;)q+=A[X].unit.byteLength;for(var Z=0,J=A.length;Z<J;Z++){var ee=A[Z],te=ee.unit,re=ee.pts;if(null!==K)D[Z-1].duration=Math.round((re-K)/v);else{if(i&&t.isAAC&&(re=N),$=re,!(q>0))return;q+=C;try{W=new Uint8Array(q)}catch(t){return void this.observer.emit(c.Events.ERROR,c.Events.ERROR,{type:d.ErrorTypes.MUX_ERROR,details:d.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:q,reason:"fail allocating audio mdat "+q})}I||(new DataView(W.buffer).setUint32(0,q),W.set(l.default.types.mdat,4))}W.set(te,C);var ne=te.byteLength;C+=ne,D.push(new E(!0,b,ne,0)),K=re}var ie=D.length;if(ie){var ae=D[D.length-1];this.nextAudioPts=N=K+v*ae.duration;var oe=I?new Uint8Array(0):l.default.moof(t.sequenceNumber++,$/v,_extends({},t,{samples:D}));t.samples=[];var se=$/m,ue=N/m,le={data1:oe,data2:W,startPTS:se,endPTS:ue,startDTS:se,endDTS:ue,type:"audio",hasAudio:!0,hasVideo:!1,nb:ie};return this.isAudioContiguous=!0,console.assert(W.length,"MDAT length must not be zero"),le}},t.remuxEmptyAudio=function remuxEmptyAudio(t,r,i,a){var l=t.inputTimeScale,c=l/(t.samplerate?t.samplerate:l),d=this.nextAudioPts,p=(null!==d?d:a.startDTS*l)+this._initDTS,m=a.endDTS*l+this._initDTS,v=1024*c,b=Math.ceil((m-p)/v),M=u.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(g.logger.warn("[mp4-remuxer]: remux empty Audio"),M){for(var S=[],E=0;E<b;E++){var I=p+E*v;S.push({unit:M,pts:I,dts:I})}return t.samples=S,this.remuxAudio(t,r,i,!1)}g.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},t.remuxID3=function remuxID3(t,r){var i=t.samples.length;if(i){for(var a=t.inputTimeScale,u=this._initPTS,l=this._initDTS,c=0;c<i;c++){var d=t.samples[c];d.pts=normalizePts(d.pts-u,r*a)/a,d.dts=normalizePts(d.dts-l,r*a)/a}var g=t.samples;return t.samples=[],{samples:g}}},t.remuxText=function remuxText(t,r){var i=t.samples.length;if(i){for(var a=t.inputTimeScale,u=this._initPTS,l=0;l<i;l++){var c=t.samples[l];c.pts=normalizePts(c.pts-u,r*a)/a}t.samples.sort((function(t,r){return t.pts-r.pts}));var d=t.samples;return t.samples=[],{samples:d}}},MP4Remuxer}();function normalizePts(t,r){var i;if(null===r)return t;for(i=r<t?-8589934592:8589934592;Math.abs(t-r)>4294967296;)t+=i;return t}var E=function Mp4Sample(t,r,i,a){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=r,this.size=i,this.cts=a,this.flags=new I(t)},I=function Mp4SampleFlags(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1}},"./src/remux/passthrough-remuxer.ts":
/*!******************************************!*\
    !*** ./src/remux/passthrough-remuxer.ts ***!
    \******************************************/
/*! exports provided: default */function srcRemuxPassthroughRemuxerTs(t,r,i){i.r(r);var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),l=i(/*! ../loader/fragment */"./src/loader/fragment.ts"),c=i(/*! ../utils/logger */"./src/utils/logger.ts"),d=function(){function PassThroughRemuxer(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var t=PassThroughRemuxer.prototype;return t.destroy=function destroy(){},t.resetTimeStamp=function resetTimeStamp(t){this.initPTS=t,this.lastEndDTS=null},t.resetNextTimestamp=function resetNextTimestamp(){this.lastEndDTS=null},t.resetInitSegment=function resetInitSegment(t,r,i){this.audioCodec=r,this.videoCodec=i,this.generateInitSegment(t),this.emitInitSegment=!0},t.generateInitSegment=function generateInitSegment(t){var r=this.audioCodec,i=this.videoCodec;if(!t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var a=this.initData=Object(u.parseInitSegment)(t);r||(r=getParsedTrackCodec(a.audio,l.ElementaryStreamTypes.AUDIO)),i||(i=getParsedTrackCodec(a.video,l.ElementaryStreamTypes.VIDEO));var d={};a.audio&&a.video?d.audiovideo={container:"video/mp4",codec:r+","+i,initSegment:t,id:"main"}:a.audio?d.audio={container:"audio/mp4",codec:r,initSegment:t,id:"audio"}:a.video?d.video={container:"video/mp4",codec:i,initSegment:t,id:"main"}:c.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=d},t.remux=function remux(t,r,i,l,d){var p=this.initPTS,m=this.lastEndDTS,v={audio:void 0,video:void 0,text:l,id3:i,initSegment:void 0};Object(a.isFiniteNumber)(m)||(m=this.lastEndDTS=d||0);var b=r.samples;if(!b||!b.length)return v;var M={initPTS:void 0,timescale:1},S=this.initData;if(S&&S.length||(this.generateInitSegment(b),S=this.initData),!S||!S.length)return c.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),v;this.emitInitSegment&&(M.tracks=this.initTracks,this.emitInitSegment=!1),Object(a.isFiniteNumber)(p)||(this.initPTS=M.initPTS=p=g(S,b,m));var E=Object(u.getDuration)(b,S),I=m,D=E+I;Object(u.offsetStartDTS)(S,b,p),E>0?this.lastEndDTS=D:(c.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var A=!!S.audio,C=!!S.video,N="";A&&(N+="audio"),C&&(N+="video");var k={data1:b,startPTS:I,startDTS:I,endPTS:D,endDTS:D,type:N,hasAudio:A,hasVideo:C,nb:1,dropped:0};return v.audio="audio"===k.type?k:void 0,v.video="audio"!==k.type?k:void 0,v.text=l,v.id3=i,v.initSegment=M,v},PassThroughRemuxer}(),g=function computeInitPTS(t,r,i){return Object(u.getStartDTS)(t,r)-i};function getParsedTrackCodec(t,r){var i=null==t?void 0:t.codec;return i&&i.length>4?i:"hvc1"===i?"hvc1.1.c.L120.90":"av01"===i?"av01.0.04M.08":"avc1"===i||r===l.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}r.default=d},"./src/task-loop.ts":
/*!**************************!*\
    !*** ./src/task-loop.ts ***!
    \**************************/
/*! exports provided: default */function srcTaskLoopTs(t,r,i){i.r(r),i.d(r,"default",(function(){return a}));var a=function(){function TaskLoop(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=TaskLoop.prototype;return t.destroy=function destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function onHandlerDestroying(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function onHandlerDestroyed(){},t.hasInterval=function hasInterval(){return!!this._tickInterval},t.hasNextTick=function hasNextTick(){return!!this._tickTimer},t.setInterval=function setInterval(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},t.clearInterval=function clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function doTick(){},TaskLoop}()},"./src/types/cmcd.ts":
/*!***************************!*\
    !*** ./src/types/cmcd.ts ***!
    \***************************/
/*! exports provided: CMCDVersion, CMCDObjectType, CMCDStreamingFormat, CMCDStreamType */function srcTypesCmcdTs(t,r,i){i.r(r),i.d(r,"CMCDVersion",(function(){return c})),i.d(r,"CMCDObjectType",(function(){return a})),i.d(r,"CMCDStreamingFormat",(function(){return u})),i.d(r,"CMCDStreamType",(function(){return l}));var a,u,l,c=1;!function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"}(a||(a={})),function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"}(u||(u={})),function(t){t.VOD="v",t.LIVE="l"}(l||(l={}))},"./src/types/level.ts":
/*!****************************!*\
    !*** ./src/types/level.ts ***!
    \****************************/
/*! exports provided: HlsSkip, getSkipValue, HlsUrlParameters, Level */function srcTypesLevelTs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a;function getSkipValue(t,r){var i=t.canSkipUntil,u=t.canSkipDateRanges,l=t.endSN;return i&&(void 0!==r?r-l:0)<i?u?a.v2:a.Yes:a.No}i.r(r),i.d(r,"HlsSkip",(function(){return a})),i.d(r,"getSkipValue",(function(){return getSkipValue})),i.d(r,"HlsUrlParameters",(function(){return u})),i.d(r,"Level",(function(){return l})),function(t){t.No="",t.Yes="YES",t.v2="v2"}(a||(a={}));var u=function(){function HlsUrlParameters(t,r,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=r,this.skip=i}return HlsUrlParameters.prototype.addDirectives=function addDirectives(t){var r=new self.URL(t);return void 0!==this.msn&&r.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&r.searchParams.set("_HLS_part",this.part.toString()),this.skip&&r.searchParams.set("_HLS_skip",this.skip),r.toString()},HlsUrlParameters}(),l=function(){function Level(t){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this.attrs=t.attrs,this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(Level,[{key:"maxBitrate",get:function get(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function get(){return this.url[this._urlId]||""}},{key:"urlId",get:function get(){return this._urlId},set:function set(t){var r=t%this.url.length;this._urlId!==r&&(this.details=void 0,this._urlId=r)}}]),Level}()},"./src/types/loader.ts":
/*!*****************************!*\
    !*** ./src/types/loader.ts ***!
    \*****************************/
/*! exports provided: PlaylistContextType, PlaylistLevelType */function srcTypesLoaderTs(t,r,i){var a,u;i.r(r),i.d(r,"PlaylistContextType",(function(){return a})),i.d(r,"PlaylistLevelType",(function(){return u})),function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(a||(a={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(u||(u={}))},"./src/types/transmuxer.ts":
/*!*********************************!*\
    !*** ./src/types/transmuxer.ts ***!
    \*********************************/
/*! exports provided: ChunkMetadata */function srcTypesTransmuxerTs(t,r,i){i.r(r),i.d(r,"ChunkMetadata",(function(){return a}));var a=function ChunkMetadata(t,r,i,a,u,l){void 0===a&&(a=0),void 0===u&&(u=-1),void 0===l&&(l=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=r,this.id=i,this.size=a,this.part=u,this.partial=l}},"./src/utils/attr-list.ts":
/*!********************************!*\
    !*** ./src/utils/attr-list.ts ***!
    \********************************/
/*! exports provided: AttrList */function srcUtilsAttrListTs(t,r,i){i.r(r),i.d(r,"AttrList",(function(){return l}));var a=/^(\d+)x(\d+)$/,u=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,l=function(){function AttrList(t){for(var r in"string"==typeof t&&(t=AttrList.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=AttrList.prototype;return t.decimalInteger=function decimalInteger(t){var r=parseInt(this[t],10);return r>Number.MAX_SAFE_INTEGER?1/0:r},t.hexadecimalInteger=function hexadecimalInteger(t){if(this[t]){var r=(this[t]||"0x").slice(2);r=(1&r.length?"0":"")+r;for(var i=new Uint8Array(r.length/2),a=0;a<r.length/2;a++)i[a]=parseInt(r.slice(2*a,2*a+2),16);return i}return null},t.hexadecimalIntegerAsNumber=function hexadecimalIntegerAsNumber(t){var r=parseInt(this[t],16);return r>Number.MAX_SAFE_INTEGER?1/0:r},t.decimalFloatingPoint=function decimalFloatingPoint(t){return parseFloat(this[t])},t.optionalFloat=function optionalFloat(t,r){var i=this[t];return i?parseFloat(i):r},t.enumeratedString=function enumeratedString(t){return this[t]},t.bool=function bool(t){return"YES"===this[t]},t.decimalResolution=function decimalResolution(t){var r=a.exec(this[t]);if(null!==r)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}},AttrList.parseAttrList=function parseAttrList(t){var r,i={};for(u.lastIndex=0;null!==(r=u.exec(t));){var a=r[2];0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1&&(a=a.slice(1,-1)),i[r[1]]=a}return i},AttrList}()},"./src/utils/binary-search.ts":
/*!************************************!*\
    !*** ./src/utils/binary-search.ts ***!
    \************************************/
/*! exports provided: default */function srcUtilsBinarySearchTs(t,r,i){i.r(r),r.default={search:function search(t,r){for(var i=0,a=t.length-1,u=null,l=null;i<=a;){var c=r(l=t[u=(i+a)/2|0]);if(c>0)i=u+1;else{if(!(c<0))return l;a=u-1}}return null}}},"./src/utils/buffer-helper.ts":
/*!************************************!*\
    !*** ./src/utils/buffer-helper.ts ***!
    \************************************/
/*! exports provided: BufferHelper */function srcUtilsBufferHelperTs(t,r,i){i.r(r),i.d(r,"BufferHelper",(function(){return l}));var a=i(/*! ./logger */"./src/utils/logger.ts"),u={length:0,start:function start(){return 0},end:function end(){return 0}},l=function(){function BufferHelper(){}return BufferHelper.isBuffered=function isBuffered(t,r){try{if(t)for(var i=BufferHelper.getBuffered(t),a=0;a<i.length;a++)if(r>=i.start(a)&&r<=i.end(a))return!0}catch(t){}return!1},BufferHelper.bufferInfo=function bufferInfo(t,r,i){try{if(t){var a,u=BufferHelper.getBuffered(t),l=[];for(a=0;a<u.length;a++)l.push({start:u.start(a),end:u.end(a)});return this.bufferedInfo(l,r,i)}}catch(t){}return{len:0,start:r,end:r,nextStart:void 0}},BufferHelper.bufferedInfo=function bufferedInfo(t,r,i){r=Math.max(0,r),t.sort((function(t,r){var i=t.start-r.start;return i||r.end-t.end}));var a=[];if(i)for(var u=0;u<t.length;u++){var l=a.length;if(l){var c=a[l-1].end;t[u].start-c<i?t[u].end>c&&(a[l-1].end=t[u].end):a.push(t[u])}else a.push(t[u])}else a=t;for(var d,g=0,p=r,m=r,v=0;v<a.length;v++){var b=a[v].start,M=a[v].end;if(r+i>=b&&r<M)p=b,g=(m=M)-r;else if(r+i<b){d=b;break}}return{len:g,start:p||0,end:m||0,nextStart:d}},BufferHelper.getBuffered=function getBuffered(t){try{return t.buffered}catch(t){return a.logger.log("failed to get media.buffered",t),u}},BufferHelper}()},"./src/utils/cea-608-parser.ts":
/*!*************************************!*\
    !*** ./src/utils/cea-608-parser.ts ***!
    \*************************************/
/*! exports provided: Row, CaptionScreen, default */function srcUtilsCea608ParserTs(t,r,i){i.r(r),i.d(r,"Row",(function(){return A})),i.d(r,"CaptionScreen",(function(){return C}));var a,u=i(/*! ../utils/logger */"./src/utils/logger.ts"),l={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},c=function getCharForByte(t){var r=t;return l.hasOwnProperty(t)&&(r=l[t]),String.fromCharCode(r)},d=15,g=100,p={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},m={17:2,18:4,21:6,22:8,23:10,19:13,20:15},v={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},b={25:2,26:4,29:6,30:8,31:10,27:13,28:15},M=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(a||(a={}));var S=function(){function CaptionsLogger(){this.time=null,this.verboseLevel=a.ERROR}return CaptionsLogger.prototype.log=function log(t,r){this.verboseLevel>=t&&u.logger.log(this.time+" ["+t+"] "+r)},CaptionsLogger}(),E=function numArrayToHexArray(t){for(var r=[],i=0;i<t.length;i++)r.push(t[i].toString(16));return r},I=function(){function PenState(t,r,i,a,u){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=r||!1,this.italics=i||!1,this.background=a||"black",this.flash=u||!1}var t=PenState.prototype;return t.reset=function reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function setStyles(t){for(var r=["foreground","underline","italics","background","flash"],i=0;i<r.length;i++){var a=r[i];t.hasOwnProperty(a)&&(this[a]=t[a])}},t.isDefault=function isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function equals(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.copy=function copy(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.toString=function toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},PenState}(),D=function(){function StyledUnicodeChar(t,r,i,a,u,l){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new I(r,i,a,u,l)}var t=StyledUnicodeChar.prototype;return t.reset=function reset(){this.uchar=" ",this.penState.reset()},t.setChar=function setChar(t,r){this.uchar=t,this.penState.copy(r)},t.setPenState=function setPenState(t){this.penState.copy(t)},t.equals=function equals(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.copy=function copy(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.isEmpty=function isEmpty(){return" "===this.uchar&&this.penState.isDefault()},StyledUnicodeChar}(),A=function(){function Row(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var r=0;r<g;r++)this.chars.push(new D);this.logger=t,this.pos=0,this.currPenState=new I}var t=Row.prototype;return t.equals=function equals(t){for(var r=!0,i=0;i<g;i++)if(!this.chars[i].equals(t.chars[i])){r=!1;break}return r},t.copy=function copy(t){for(var r=0;r<g;r++)this.chars[r].copy(t.chars[r])},t.isEmpty=function isEmpty(){for(var t=!0,r=0;r<g;r++)if(!this.chars[r].isEmpty()){t=!1;break}return t},t.setCursor=function setCursor(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(a.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>g&&(this.logger.log(a.DEBUG,"Too large cursor position "+this.pos),this.pos=g)},t.moveCursor=function moveCursor(t){var r=this.pos+t;if(t>1)for(var i=this.pos+1;i<r+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(r)},t.backSpace=function backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function insertChar(t){t>=144&&this.backSpace();var r=c(t);this.pos>=g?this.logger.log(a.ERROR,"Cannot insert "+t.toString(16)+" ("+r+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1))},t.clearFromPos=function clearFromPos(t){var r;for(r=t;r<g;r++)this.chars[r].reset()},t.clear=function clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function clearToEndOfRow(){this.clearFromPos(this.pos)},t.getTextString=function getTextString(){for(var t=[],r=!0,i=0;i<g;i++){var a=this.chars[i].uchar;" "!==a&&(r=!1),t.push(a)}return r?"":t.join("")},t.setPenStyles=function setPenStyles(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},Row}(),C=function(){function CaptionScreen(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var r=0;r<d;r++)this.rows.push(new A(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=CaptionScreen.prototype;return t.reset=function reset(){for(var t=0;t<d;t++)this.rows[t].clear();this.currRow=14},t.equals=function equals(t){for(var r=!0,i=0;i<d;i++)if(!this.rows[i].equals(t.rows[i])){r=!1;break}return r},t.copy=function copy(t){for(var r=0;r<d;r++)this.rows[r].copy(t.rows[r])},t.isEmpty=function isEmpty(){for(var t=!0,r=0;r<d;r++)if(!this.rows[r].isEmpty()){t=!1;break}return t},t.backSpace=function backSpace(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function insertChar(t){this.rows[this.currRow].insertChar(t)},t.setPen=function setPen(t){this.rows[this.currRow].setPenStyles(t)},t.moveCursor=function moveCursor(t){this.rows[this.currRow].moveCursor(t)},t.setCursor=function setCursor(t){this.logger.log(a.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},t.setPAC=function setPAC(t){this.logger.log(a.INFO,"pacData = "+JSON.stringify(t));var r=t.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(var i=0;i<d;i++)this.rows[i].clear();var u=this.currRow+1-this.nrRollUpRows,l=this.lastOutputScreen;if(l){var c=l.rows[u].cueStartTime,g=this.logger.time;if(c&&null!==g&&c<g)for(var p=0;p<this.nrRollUpRows;p++)this.rows[r-this.nrRollUpRows+p+1].copy(l.rows[u+p])}}this.currRow=r;var m=this.rows[this.currRow];if(null!==t.indent){var v=t.indent,b=Math.max(v-1,0);m.setCursor(t.indent),t.color=m.chars[b].penState.foreground}var M={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(M)},t.setBkgData=function setBkgData(t){this.logger.log(a.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.setRollUpRows=function setRollUpRows(t){this.nrRollUpRows=t},t.rollUp=function rollUp(){if(null!==this.nrRollUpRows){this.logger.log(a.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(t,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(a.INFO,"Rolling up")}else this.logger.log(a.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function getDisplayText(t){t=t||!1;for(var r=[],i="",a=-1,u=0;u<d;u++){var l=this.rows[u].getTextString();l&&(a=u+1,t?r.push("Row "+a+": '"+l+"'"):r.push(l.trim()))}return r.length>0&&(i=t?"["+r.join(" | ")+"]":r.join("\n")),i},t.getTextAndFormat=function getTextAndFormat(){return this.rows},CaptionScreen}(),N=function(){function Cea608Channel(t,r,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new C(i),this.nonDisplayedMemory=new C(i),this.lastOutputScreen=new C(i),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}var t=Cea608Channel.prototype;return t.reset=function reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function getHandler(){return this.outputFilter},t.setHandler=function setHandler(t){this.outputFilter=t},t.setPAC=function setPAC(t){this.writeScreen.setPAC(t)},t.setBkgData=function setBkgData(t){this.writeScreen.setBkgData(t)},t.setMode=function setMode(t){t!==this.mode&&(this.mode=t,this.logger.log(a.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.insertChars=function insertChars(t){for(var r=0;r<t.length;r++)this.writeScreen.insertChar(t[r]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(a.INFO,i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(a.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function ccRCL(){this.logger.log(a.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function ccBS(){this.logger.log(a.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function ccAOF(){},t.ccAON=function ccAON(){},t.ccDER=function ccDER(){this.logger.log(a.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function ccRU(t){this.logger.log(a.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.ccFON=function ccFON(){this.logger.log(a.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function ccRDC(){this.logger.log(a.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function ccTR(){this.logger.log(a.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function ccRTD(){this.logger.log(a.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function ccEDM(){this.logger.log(a.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function ccCR(){this.logger.log(a.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function ccENM(){this.logger.log(a.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function ccEOC(){if(this.logger.log(a.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(a.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function ccTO(t){this.logger.log(a.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.ccMIDROW=function ccMIDROW(t){var r={flash:!1};if(r.underline=t%2==1,r.italics=t>=46,r.italics)r.foreground="white";else{var i=Math.floor(t/2)-16;r.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}this.logger.log(a.INFO,"MIDROW: "+JSON.stringify(r)),this.writeScreen.setPen(r)},t.outputDataUpdate=function outputDataUpdate(t){void 0===t&&(t=!1);var r=this.logger.time;null!==r&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:r):this.cueStartTime=r,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function cueSplitAtTime(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},Cea608Channel}(),k=function(){function Cea608Parser(t,r,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var a=new S;this.channels=[null,new N(t,r,a),new N(t+1,i,a)],this.cmdHistory={a:null,b:null},this.logger=a}var t=Cea608Parser.prototype;return t.getHandler=function getHandler(t){return this.channels[t].getHandler()},t.setHandler=function setHandler(t,r){this.channels[t].setHandler(r)},t.addData=function addData(t,r){var i,u,l,c=!1;this.logger.time=t;for(var d=0;d<r.length;d+=2)if(u=127&r[d],l=127&r[d+1],0!==u||0!==l){if(this.logger.log(a.DATA,"["+E([r[d],r[d+1]])+"] -> ("+E([u,l])+")"),(i=this.parseCmd(u,l))||(i=this.parseMidrow(u,l)),i||(i=this.parsePAC(u,l)),i||(i=this.parseBackgroundAttributes(u,l)),!i&&(c=this.parseChars(u,l))){var g=this.currentChannel;g&&g>0?this.channels[g].insertChars(c):this.logger.log(a.WARNING,"No channel found yet. TEXT-MODE?")}i||c||this.logger.log(a.WARNING,"Couldn't parse cleaned data "+E([u,l])+" orig: "+E([r[d],r[d+1]]))}},t.parseCmd=function parseCmd(t,r){var i=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&r>=32&&r<=47||(23===t||31===t)&&r>=33&&r<=35))return!1;if(hasCmdRepeated(t,r,i))return setLastCmd(null,null,i),this.logger.log(a.DEBUG,"Repeated command ("+E([t,r])+") is dropped"),!0;var u=20===t||21===t||23===t?1:2,l=this.channels[u];return 20===t||21===t||28===t||29===t?32===r?l.ccRCL():33===r?l.ccBS():34===r?l.ccAOF():35===r?l.ccAON():36===r?l.ccDER():37===r?l.ccRU(2):38===r?l.ccRU(3):39===r?l.ccRU(4):40===r?l.ccFON():41===r?l.ccRDC():42===r?l.ccTR():43===r?l.ccRTD():44===r?l.ccEDM():45===r?l.ccCR():46===r?l.ccENM():47===r&&l.ccEOC():l.ccTO(r-32),setLastCmd(t,r,i),this.currentChannel=u,!0},t.parseMidrow=function parseMidrow(t,r){var i=0;if((17===t||25===t)&&r>=32&&r<=47){if((i=17===t?1:2)!==this.currentChannel)return this.logger.log(a.ERROR,"Mismatch channel in midrow parsing"),!1;var u=this.channels[i];return!!u&&(u.ccMIDROW(r),this.logger.log(a.DEBUG,"MIDROW ("+E([t,r])+")"),!0)}return!1},t.parsePAC=function parsePAC(t,r){var i,a=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&r>=64&&r<=127||(16===t||24===t)&&r>=64&&r<=95))return!1;if(hasCmdRepeated(t,r,a))return setLastCmd(null,null,a),!0;var u=t<=23?1:2;i=r>=64&&r<=95?1===u?p[t]:v[t]:1===u?m[t]:b[t];var l=this.channels[u];return!!l&&(l.setPAC(this.interpretPAC(i,r)),setLastCmd(t,r,a),this.currentChannel=u,!0)},t.interpretPAC=function interpretPAC(t,r){var i,a={color:null,italics:!1,indent:null,underline:!1,row:t};return i=r>95?r-96:r-64,a.underline=1==(1&i),i<=13?a.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(a.italics=!0,a.color="white"):a.indent=4*Math.floor((i-16)/2),a},t.parseChars=function parseChars(t,r){var i,u,l=null,d=null;if(t>=25?(i=2,d=t-8):(i=1,d=t),d>=17&&d<=19?(u=17===d?r+80:18===d?r+112:r+144,this.logger.log(a.INFO,"Special char '"+c(u)+"' in channel "+i),l=[u]):t>=32&&t<=127&&(l=0===r?[t]:[t,r]),l){var g=E(l);this.logger.log(a.DEBUG,"Char codes =  "+g.join(",")),setLastCmd(t,r,this.cmdHistory)}return l},t.parseBackgroundAttributes=function parseBackgroundAttributes(t,r){var i;if(!((16===t||24===t)&&r>=32&&r<=47||(23===t||31===t)&&r>=45&&r<=47))return!1;var a={};16===t||24===t?(i=Math.floor((r-32)/2),a.background=M[i],r%2==1&&(a.background=a.background+"_semi")):45===r?a.background="transparent":(a.foreground="black",47===r&&(a.underline=!0));var u=t<=23?1:2;return this.channels[u].setBkgData(a),setLastCmd(t,r,this.cmdHistory),!0},t.reset=function reset(){for(var t=0;t<Object.keys(this.channels).length;t++){var r=this.channels[t];r&&r.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function cueSplitAtTime(t){for(var r=0;r<this.channels.length;r++){var i=this.channels[r];i&&i.cueSplitAtTime(t)}},Cea608Parser}();function setLastCmd(t,r,i){i.a=t,i.b=r}function hasCmdRepeated(t,r,i){return i.a===t&&i.b===r}r.default=k},"./src/utils/codecs.ts":
/*!*****************************!*\
    !*** ./src/utils/codecs.ts ***!
    \*****************************/
/*! exports provided: isCodecType, isCodecSupportedInMp4 */function srcUtilsCodecsTs(t,r,i){i.r(r),i.d(r,"isCodecType",(function(){return isCodecType})),i.d(r,"isCodecSupportedInMp4",(function(){return isCodecSupportedInMp4}));var a={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function isCodecType(t,r){var i=a[r];return!!i&&!0===i[t.slice(0,4)]}function isCodecSupportedInMp4(t,r){return MediaSource.isTypeSupported((r||"video")+'/mp4;codecs="'+t+'"')}},"./src/utils/cues.ts":
/*!***************************!*\
    !*** ./src/utils/cues.ts ***!
    \***************************/
/*! exports provided: default */function srcUtilsCuesTs(t,r,i){i.r(r);var a=i(/*! ./vttparser */"./src/utils/vttparser.ts"),u=i(/*! ./webvtt-parser */"./src/utils/webvtt-parser.ts"),l=i(/*! ./texttrack-utils */"./src/utils/texttrack-utils.ts"),c=/\s/,d={newCue:function newCue(t,r,i,d){for(var g,p,m,v,b,M=[],S=self.VTTCue||self.TextTrackCue,E=0;E<d.rows.length;E++)if(m=!0,v=0,b="",!(g=d.rows[E]).isEmpty()){for(var I=0;I<g.chars.length;I++)c.test(g.chars[I].uchar)&&m?v++:(b+=g.chars[I].uchar,m=!1);g.cueStartTime=r,r===i&&(i+=1e-4),v>=16?v--:v++;var D=Object(a.fixLineBreaks)(b.trim()),A=Object(u.generateCueId)(r,i,D);t&&t.cues&&t.cues.getCueById(A)||((p=new S(r,i,D)).id=A,p.line=E+1,p.align="left",p.position=10+Math.min(80,10*Math.floor(8*v/32)),M.push(p))}return t&&M.length&&(M.sort((function(t,r){return"auto"===t.line||"auto"===r.line?0:t.line>8&&r.line>8?r.line-t.line:t.line-r.line})),M.forEach((function(r){return Object(l.addCueToTrack)(t,r)}))),M}};r.default=d},"./src/utils/discontinuities.ts":
/*!**************************************!*\
    !*** ./src/utils/discontinuities.ts ***!
    \**************************************/
/*! exports provided: findFirstFragWithCC, shouldAlignOnDiscontinuities, findDiscontinuousReferenceFrag, adjustSlidingStart, alignStream, alignPDT, alignFragmentByPDTDelta, alignMediaPlaylistByPDT */function srcUtilsDiscontinuitiesTs(t,r,i){i.r(r),i.d(r,"findFirstFragWithCC",(function(){return findFirstFragWithCC})),i.d(r,"shouldAlignOnDiscontinuities",(function(){return shouldAlignOnDiscontinuities})),i.d(r,"findDiscontinuousReferenceFrag",(function(){return findDiscontinuousReferenceFrag})),i.d(r,"adjustSlidingStart",(function(){return adjustSlidingStart})),i.d(r,"alignStream",(function(){return alignStream})),i.d(r,"alignPDT",(function(){return alignPDT})),i.d(r,"alignFragmentByPDTDelta",(function(){return alignFragmentByPDTDelta})),i.d(r,"alignMediaPlaylistByPDT",(function(){return alignMediaPlaylistByPDT}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ./logger */"./src/utils/logger.ts"),l=i(/*! ../controller/level-helper */"./src/controller/level-helper.ts");function findFirstFragWithCC(t,r){for(var i=null,a=0,u=t.length;a<u;a++){var l=t[a];if(l&&l.cc===r){i=l;break}}return i}function shouldAlignOnDiscontinuities(t,r,i){return!(!r.details||!(i.endCC>i.startCC||t&&t.cc<i.startCC))}function findDiscontinuousReferenceFrag(t,r){var i=t.fragments,a=r.fragments;if(a.length&&i.length){var l=findFirstFragWithCC(i,a[0].cc);if(l&&(!l||l.startPTS))return l;u.logger.log("No frag in previous level to align on")}else u.logger.log("No fragments to align")}function adjustFragmentStart(t,r){if(t){var i=t.start+r;t.start=t.startPTS=i,t.endPTS=i+t.duration}}function adjustSlidingStart(t,r){for(var i=r.fragments,a=0,u=i.length;a<u;a++)adjustFragmentStart(i[a],t);r.fragmentHint&&adjustFragmentStart(r.fragmentHint,t),r.alignedSliding=!0}function alignStream(t,r,i){r&&(function alignDiscontinuities(t,r,i){if(shouldAlignOnDiscontinuities(t,i,r)){var l=findDiscontinuousReferenceFrag(i.details,r);l&&Object(a.isFiniteNumber)(l.start)&&(u.logger.log("Adjusting PTS using last level due to CC increase within current level "+r.url),adjustSlidingStart(l.start,r))}}(t,i,r),!i.alignedSliding&&r.details&&alignPDT(i,r.details),i.alignedSliding||!r.details||i.skippedSegments||Object(l.adjustSliding)(r.details,i))}function alignPDT(t,r){if(r.fragments.length&&t.hasProgramDateTime&&r.hasProgramDateTime){var i=r.fragments[0].programDateTime,l=t.fragments[0].programDateTime,c=(l-i)/1e3+r.fragments[0].start;c&&Object(a.isFiniteNumber)(c)&&(u.logger.log("Adjusting PTS using programDateTime delta "+(l-i)+"ms, sliding:"+c.toFixed(3)+" "+t.url+" "),adjustSlidingStart(c,t))}}function alignFragmentByPDTDelta(t,r){var i=t.programDateTime;if(i){var a=(i-r)/1e3;t.start=t.startPTS=a,t.endPTS=a+t.duration}}function alignMediaPlaylistByPDT(t,r){if(r.fragments.length&&t.hasProgramDateTime&&r.hasProgramDateTime){var i=r.fragments[0].programDateTime-1e3*r.fragments[0].start;t.fragments.forEach((function(t){alignFragmentByPDTDelta(t,i)})),t.fragmentHint&&alignFragmentByPDTDelta(t.fragmentHint,i),t.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":
/*!***********************************************!*\
    !*** ./src/utils/ewma-bandwidth-estimator.ts ***!
    \***********************************************/
/*! exports provided: default */function srcUtilsEwmaBandwidthEstimatorTs(t,r,i){i.r(r);var a=i(/*! ../utils/ewma */"./src/utils/ewma.ts"),u=function(){function EwmaBandWidthEstimator(t,r,i){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new a.default(t),this.fast_=new a.default(r)}var t=EwmaBandWidthEstimator.prototype;return t.update=function update(t,r){var i=this.slow_,u=this.fast_;this.slow_.halfLife!==t&&(this.slow_=new a.default(t,i.getEstimate(),i.getTotalWeight())),this.fast_.halfLife!==r&&(this.fast_=new a.default(r,u.getEstimate(),u.getTotalWeight()))},t.sample=function sample(t,r){var i=(t=Math.max(t,this.minDelayMs_))/1e3,a=8*r/i;this.fast_.sample(i,a),this.slow_.sample(i,a)},t.canEstimate=function canEstimate(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.getEstimate=function getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function destroy(){},EwmaBandWidthEstimator}();r.default=u},"./src/utils/ewma.ts":
/*!***************************!*\
    !*** ./src/utils/ewma.ts ***!
    \***************************/
/*! exports provided: default */function srcUtilsEwmaTs(t,r,i){i.r(r);var a=function(){function EWMA(t,r,i){void 0===r&&(r=0),void 0===i&&(i=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=r,this.totalWeight_=i}var t=EWMA.prototype;return t.sample=function sample(t,r){var i=Math.pow(this.alpha_,t);this.estimate_=r*(1-i)+i*this.estimate_,this.totalWeight_+=t},t.getTotalWeight=function getTotalWeight(){return this.totalWeight_},t.getEstimate=function getEstimate(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},EWMA}();r.default=a},"./src/utils/fetch-loader.ts":
/*!***********************************!*\
    !*** ./src/utils/fetch-loader.ts ***!
    \***********************************/
/*! exports provided: fetchSupported, default */function srcUtilsFetchLoaderTs(t,r,i){i.r(r),i.d(r,"fetchSupported",(function(){return fetchSupported}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ../loader/load-stats */"./src/loader/load-stats.ts"),l=i(/*! ../demux/chunk-cache */"./src/demux/chunk-cache.ts");function _wrapNativeSuper(t){var r="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t)},_wrapNativeSuper(t)}function _construct(t,r,i){return _construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(t,r,i){var a=[null];a.push.apply(a,r);var u=new(Function.bind.apply(t,a));return i&&_setPrototypeOf(u,i.prototype),u},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _extends(){return _extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},_extends.apply(this,arguments)}function fetchSupported(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1}var c=function(){function FetchLoader(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||getRequest,this.controller=new self.AbortController,this.stats=new u.LoadStats}var t=FetchLoader.prototype;return t.destroy=function destroy(){this.loader=this.callbacks=null,this.abortInternal()},t.abortInternal=function abortInternal(){var t=this.response;t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},t.abort=function abort(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function load(t,r,i){var u=this,l=this.stats;if(l.loading.start)throw new Error("Loader can only be used once.");l.loading.start=self.performance.now();var c=function getRequestParameters(t,r){var i={method:"GET",mode:"cors",credentials:"same-origin",signal:r,headers:new self.Headers(_extends({},t.headers))};return t.rangeEnd&&i.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),i}(t,this.controller.signal),g=i.onProgress,p="arraybuffer"===t.responseType,m=p?"byteLength":"length";this.context=t,this.config=r,this.callbacks=i,this.request=this.fetchSetup(t,c),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){u.abortInternal(),i.onTimeout(l,t,u.response)}),r.timeout),self.fetch(this.request).then((function(i){if(u.response=u.loader=i,!i.ok){var c=i.status,m=i.statusText;throw new d(m||"fetch, bad network response",c,i)}return l.loading.first=Math.max(self.performance.now(),l.loading.start),l.total=parseInt(i.headers.get("Content-Length")||"0"),g&&Object(a.isFiniteNumber)(r.highWaterMark)?u.loadProgressively(i,l,t,r.highWaterMark,g):p?i.arrayBuffer():i.text()})).then((function(c){var d=u.response;self.clearTimeout(u.requestTimeout),l.loading.end=Math.max(self.performance.now(),l.loading.first),l.loaded=l.total=c[m];var p={url:d.url,data:c};g&&!Object(a.isFiniteNumber)(r.highWaterMark)&&g(l,t,c,d),i.onSuccess(p,l,t,d)})).catch((function(r){if(self.clearTimeout(u.requestTimeout),!l.aborted){var a=r.code||0;i.onError({code:a,text:r.message},t,r.details)}}))},t.getCacheAge=function getCacheAge(){var t=null;if(this.response){var r=this.response.headers.get("age");t=r?parseFloat(r):null}return t},t.loadProgressively=function loadProgressively(t,r,i,a,u){void 0===a&&(a=0);var c=new l.default,d=t.body.getReader();return function pump(){return d.read().then((function(l){if(l.done)return c.dataLength&&u(r,i,c.flush(),t),Promise.resolve(new ArrayBuffer(0));var d=l.value,g=d.length;return r.loaded+=g,g<a||c.dataLength?(c.push(d),c.dataLength>=a&&u(r,i,c.flush(),t)):u(r,i,d,t),pump()})).catch((function(){return Promise.reject()}))}()},FetchLoader}();function getRequest(t,r){return new self.Request(t.url,r)}var d=function(t){function FetchError(r,i,a){var u;return(u=t.call(this,r)||this).code=void 0,u.details=void 0,u.code=i,u.details=a,u}return function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_setPrototypeOf(t,r)}(FetchError,t),FetchError}(_wrapNativeSuper(Error));r.default=c},"./src/utils/imsc1-ttml-parser.ts":
/*!****************************************!*\
    !*** ./src/utils/imsc1-ttml-parser.ts ***!
    \****************************************/
/*! exports provided: IMSC1_CODEC, parseIMSC1 */function srcUtilsImsc1TtmlParserTs(t,r,i){i.r(r),i.d(r,"IMSC1_CODEC",(function(){return p})),i.d(r,"parseIMSC1",(function(){return parseIMSC1}));var a=i(/*! ./mp4-tools */"./src/utils/mp4-tools.ts"),u=i(/*! ./vttparser */"./src/utils/vttparser.ts"),l=i(/*! ./vttcue */"./src/utils/vttcue.ts"),c=i(/*! ../demux/id3 */"./src/demux/id3.ts"),d=i(/*! ./timescale-conversion */"./src/utils/timescale-conversion.ts"),g=i(/*! ./webvtt-parser */"./src/utils/webvtt-parser.ts");function _extends(){return _extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},_extends.apply(this,arguments)}var p="stpp.ttml.im1t",m=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,v=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,b={left:"start",center:"center",right:"end",start:"start",end:"end"};function parseIMSC1(t,r,i,u,p){var m=Object(a.findBox)(new Uint8Array(t),["mdat"]);if(0!==m.length){var v=m[0],M=Object(c.utf8ArrayToStr)(new Uint8Array(t,v.start,v.end-v.start)),S=Object(d.toTimescaleFromScale)(r,1,i);try{u(function parseTTML(t,r){var i=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");var a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},u=Object.keys(a).reduce((function(t,r){return t[r]=i.getAttribute("ttp:"+r)||a[r],t}),{}),c="preserve"!==i.getAttribute("xml:space"),d=collectionToDictionary(getElementCollection(i,"styling","style")),p=collectionToDictionary(getElementCollection(i,"layout","region")),m=getElementCollection(i,"body","[begin]");return[].map.call(m,(function(t){var i=getTextContent(t,c);if(!i||!t.hasAttribute("begin"))return null;var a=parseTtmlTime(t.getAttribute("begin"),u),m=parseTtmlTime(t.getAttribute("dur"),u),v=parseTtmlTime(t.getAttribute("end"),u);if(null===a)throw timestampParsingError(t);if(null===v){if(null===m)throw timestampParsingError(t);v=a+m}var M=new l.default(a-r,v-r,i);M.id=Object(g.generateCueId)(M.startTime,M.endTime,M.text);var S=p[t.getAttribute("region")],E=d[t.getAttribute("style")];M.position=10,M.size=80;var I=function getTtmlStyles(t,r){var i="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(a,u){var l=getAttributeNS(r,i,u)||getAttributeNS(t,i,u);return l&&(a[u]=l),a}),{})}(S,E),D=I.textAlign;if(D){var A=b[D];A&&(M.lineAlign=A),M.align=D}return _extends(M,I),M})).filter((function(t){return null!==t}))}(M,S))}catch(t){p(t)}}else p(new Error("Could not parse IMSC1 mdat"))}function getElementCollection(t,r,i){var a=t.getElementsByTagName(r)[0];return a?[].slice.call(a.querySelectorAll(i)):[]}function collectionToDictionary(t){return t.reduce((function(t,r){var i=r.getAttribute("xml:id");return i&&(t[i]=r),t}),{})}function getTextContent(t,r){return[].slice.call(t.childNodes).reduce((function(t,i,a){var u;return"br"===i.nodeName&&a?t+"\n":null!==(u=i.childNodes)&&void 0!==u&&u.length?getTextContent(i,r):r?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent}),"")}function getAttributeNS(t,r,i){return t.hasAttributeNS(r,i)?t.getAttributeNS(r,i):null}function timestampParsingError(t){return new Error("Could not parse ttml timestamp "+t)}function parseTtmlTime(t,r){if(!t)return null;var i=Object(u.parseTimeStamp)(t);return null===i&&(m.test(t)?i=function parseHoursMinutesSecondsFrames(t,r){var i=m.exec(t),a=(0|i[4])+(0|i[5])/r.subFrameRate;return 3600*(0|i[1])+60*(0|i[2])+(0|i[3])+a/r.frameRate}(t,r):v.test(t)&&(i=function parseTimeUnits(t,r){var i=v.exec(t),a=Number(i[1]);switch(i[2]){case"h":return 3600*a;case"m":return 60*a;case"ms":return 1e3*a;case"f":return a/r.frameRate;case"t":return a/r.tickRate}return a}(t,r))),i}},"./src/utils/logger.ts":
/*!*****************************!*\
    !*** ./src/utils/logger.ts ***!
    \*****************************/
/*! exports provided: enableLogs, logger */function srcUtilsLoggerTs(t,r,i){i.r(r),i.d(r,"enableLogs",(function(){return enableLogs})),i.d(r,"logger",(function(){return c}));var a=function noop(){},u={trace:a,debug:a,log:a,warn:a,info:a,error:a},l=u;function consolePrintFn(t){var r=self.console[t];return r?r.bind(self.console,"["+t+"] >"):a}function enableLogs(t){if(self.console&&!0===t||"object"==typeof t){!function exportLoggerFunctions(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];i.forEach((function(r){l[r]=t[r]?t[r].bind(t):consolePrintFn(r)}))}(t,"debug","log","info","warn","error");try{l.log()}catch(t){l=u}}else l=u}var c=u},"./src/utils/mediakeys-helper.ts":
/*!***************************************!*\
    !*** ./src/utils/mediakeys-helper.ts ***!
    \***************************************/
/*! exports provided: KeySystems, requestMediaKeySystemAccess */function srcUtilsMediakeysHelperTs(t,r,i){var a;i.r(r),i.d(r,"KeySystems",(function(){return a})),i.d(r,"requestMediaKeySystemAccess",(function(){return u})),function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(a||(a={}));var u="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":
/*!*****************************************!*\
    !*** ./src/utils/mediasource-helper.ts ***!
    \*****************************************/
/*! exports provided: getMediaSource */function srcUtilsMediasourceHelperTs(t,r,i){function getMediaSource(){return self.MediaSource||self.WebKitMediaSource}i.r(r),i.d(r,"getMediaSource",(function(){return getMediaSource}))},"./src/utils/mp4-tools.ts":
/*!********************************!*\
    !*** ./src/utils/mp4-tools.ts ***!
    \********************************/
/*! exports provided: bin2str, readUint16, readUint32, writeUint32, findBox, parseSegmentIndex, parseInitSegment, getStartDTS, getDuration, computeRawDurationFromSamples, offsetStartDTS, segmentValidRange, appendUint8Array */function srcUtilsMp4ToolsTs(t,r,i){i.r(r),i.d(r,"bin2str",(function(){return bin2str})),i.d(r,"readUint16",(function(){return readUint16})),i.d(r,"readUint32",(function(){return readUint32})),i.d(r,"writeUint32",(function(){return writeUint32})),i.d(r,"findBox",(function(){return findBox})),i.d(r,"parseSegmentIndex",(function(){return parseSegmentIndex})),i.d(r,"parseInitSegment",(function(){return parseInitSegment})),i.d(r,"getStartDTS",(function(){return getStartDTS})),i.d(r,"getDuration",(function(){return getDuration})),i.d(r,"computeRawDurationFromSamples",(function(){return computeRawDurationFromSamples})),i.d(r,"offsetStartDTS",(function(){return offsetStartDTS})),i.d(r,"segmentValidRange",(function(){return segmentValidRange})),i.d(r,"appendUint8Array",(function(){return appendUint8Array}));var a=i(/*! ./typed-array */"./src/utils/typed-array.ts"),u=i(/*! ../loader/fragment */"./src/loader/fragment.ts"),l=Math.pow(2,32)-1,c=[].push;function bin2str(t){return String.fromCharCode.apply(null,t)}function readUint16(t,r){"data"in t&&(r+=t.start,t=t.data);var i=t[r]<<8|t[r+1];return i<0?65536+i:i}function readUint32(t,r){"data"in t&&(r+=t.start,t=t.data);var i=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3];return i<0?4294967296+i:i}function writeUint32(t,r,i){"data"in t&&(r+=t.start,t=t.data),t[r]=i>>24,t[r+1]=i>>16&255,t[r+2]=i>>8&255,t[r+3]=255&i}function findBox(t,r){var i,a,u,l=[];if(!r.length)return l;"data"in t?(i=t.data,a=t.start,u=t.end):(a=0,u=(i=t).byteLength);for(var d=a;d<u;){var g=readUint32(i,d),p=g>1?d+g:u;if(bin2str(i.subarray(d+4,d+8))===r[0])if(1===r.length)l.push({data:i,start:d+8,end:p});else{var m=findBox({data:i,start:d+8,end:p},r.slice(1));m.length&&c.apply(l,m)}d=p}return l}function parseSegmentIndex(t){var r=findBox(t,["moov"])[0],i=r?r.end:null,a=findBox(t,["sidx"]);if(!a||!a[0])return null;var u=[],l=a[0],c=l.data[0],d=0===c?8:16,g=readUint32(l,d);d+=4,d+=0===c?8:16,d+=2;var p=l.end+0,m=readUint16(l,d);d+=2;for(var v=0;v<m;v++){var b=d,M=readUint32(l,b);b+=4;var S=2147483647&M;if(1==(2147483648&M)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var E=readUint32(l,b);b+=4,u.push({referenceSize:S,subsegmentDuration:E,info:{duration:E/g,start:p,end:p+S-1}}),p+=S,d=b+=4}return{earliestPresentationTime:0,timescale:g,version:c,referencesCount:m,references:u,moovEndOffset:i}}function parseInitSegment(t){for(var r=[],i=findBox(t,["moov","trak"]),a=0;a<i.length;a++){var l=i[a],c=findBox(l,["tkhd"])[0];if(c){var d=c.data[c.start],g=0===d?12:20,p=readUint32(c,g),m=findBox(l,["mdia","mdhd"])[0];if(m){var v=readUint32(m,g=0===(d=m.data[m.start])?12:20),b=findBox(l,["mdia","hdlr"])[0];if(b){var M=bin2str(b.data.subarray(b.start+8,b.start+12)),S={soun:u.ElementaryStreamTypes.AUDIO,vide:u.ElementaryStreamTypes.VIDEO}[M];if(S){var E=findBox(l,["mdia","minf","stbl","stsd"])[0],I=void 0;E&&(I=bin2str(E.data.subarray(E.start+12,E.start+16))),r[p]={timescale:v,type:S},r[S]={timescale:v,id:p,codec:I}}}}}}return findBox(t,["moov","mvex","trex"]).forEach((function(t){var i=readUint32(t,4),a=r[i];a&&(a.default={duration:readUint32(t,12),flags:readUint32(t,20)})})),r}function getStartDTS(t,r){return findBox(r,["moof","traf"]).reduce((function(r,i){var a=findBox(i,["tfdt"])[0],u=a.data[a.start],l=findBox(i,["tfhd"]).reduce((function(r,i){var l=readUint32(i,4),c=t[l];if(c){var d=readUint32(a,4);1===u&&(d*=Math.pow(2,32),d+=readUint32(a,8));var g=d/(c.timescale||9e4);if(isFinite(g)&&(null===r||g<r))return g}return r}),null);return null!==l&&isFinite(l)&&(null===r||l<r)?l:r}),null)||0}function getDuration(t,r){for(var i=0,a=0,l=0,c=findBox(t,["moof","traf"]),d=0;d<c.length;d++){var g=c[d],p=findBox(g,["tfhd"])[0],m=r[readUint32(p,4)];if(m){var v=m.default,b=readUint32(p,0)|(null==v?void 0:v.flags),M=null==v?void 0:v.duration;8&b&&(M=readUint32(p,2&b?12:8));for(var S=m.timescale||9e4,E=findBox(g,["trun"]),I=0;I<E.length;I++)!(i=computeRawDurationFromSamples(E[I]))&&M&&(i=M*readUint32(E[I],4)),m.type===u.ElementaryStreamTypes.VIDEO?a+=i/S:m.type===u.ElementaryStreamTypes.AUDIO&&(l+=i/S)}}if(0===a&&0===l){var D=parseSegmentIndex(t);if(null!=D&&D.references)return D.references.reduce((function(t,r){return t+r.info.duration||0}),0)}return a||l}function computeRawDurationFromSamples(t){var r=readUint32(t,0),i=8;1&r&&(i+=4),4&r&&(i+=4);for(var a=0,u=readUint32(t,4),l=0;l<u;l++)256&r&&(a+=readUint32(t,i),i+=4),512&r&&(i+=4),1024&r&&(i+=4),2048&r&&(i+=4);return a}function offsetStartDTS(t,r,i){findBox(r,["moof","traf"]).forEach((function(r){findBox(r,["tfhd"]).forEach((function(a){var u=readUint32(a,4),c=t[u];if(c){var d=c.timescale||9e4;findBox(r,["tfdt"]).forEach((function(t){var r=t.data[t.start],a=readUint32(t,4);if(0===r)writeUint32(t,4,a-i*d);else{a*=Math.pow(2,32),a+=readUint32(t,8),a-=i*d,a=Math.max(a,0);var u=Math.floor(a/(l+1)),c=Math.floor(a%(l+1));writeUint32(t,4,u),writeUint32(t,8,c)}}))}}))}))}function segmentValidRange(t){var r={valid:null,remainder:null},i=findBox(t,["moof"]);if(!i)return r;if(i.length<2)return r.remainder=t,r;var u=i[i.length-1];return r.valid=Object(a.sliceUint8)(t,0,u.start-8),r.remainder=Object(a.sliceUint8)(t,u.start-8),r}function appendUint8Array(t,r){var i=new Uint8Array(t.length+r.length);return i.set(t),i.set(r,t.length),i}},"./src/utils/output-filter.ts":
/*!************************************!*\
    !*** ./src/utils/output-filter.ts ***!
    \************************************/
/*! exports provided: default */function srcUtilsOutputFilterTs(t,r,i){i.r(r),i.d(r,"default",(function(){return a}));var a=function(){function OutputFilter(t,r){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=r}var t=OutputFilter.prototype;return t.dispatchCue=function dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function newCue(t,r,i){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=r,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function reset(){this.cueRanges=[],this.startTime=null},OutputFilter}()},"./src/utils/texttrack-utils.ts":
/*!**************************************!*\
    !*** ./src/utils/texttrack-utils.ts ***!
    \**************************************/
/*! exports provided: sendAddTrackEvent, addCueToTrack, clearCurrentCues, removeCuesInRange, getCuesInRange */function srcUtilsTexttrackUtilsTs(t,r,i){i.r(r),i.d(r,"sendAddTrackEvent",(function(){return sendAddTrackEvent})),i.d(r,"addCueToTrack",(function(){return addCueToTrack})),i.d(r,"clearCurrentCues",(function(){return clearCurrentCues})),i.d(r,"removeCuesInRange",(function(){return removeCuesInRange})),i.d(r,"getCuesInRange",(function(){return getCuesInRange}));var a=i(/*! ./logger */"./src/utils/logger.ts");function sendAddTrackEvent(t,r){var i;try{i=new Event("addtrack")}catch(t){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=t,r.dispatchEvent(i)}function addCueToTrack(t,r){var i=t.mode;if("disabled"===i&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(r.id))try{if(t.addCue(r),!t.cues.getCueById(r.id))throw new Error("addCue is failed for: "+r)}catch(i){a.logger.debug("[texttrack-utils]: "+i);var u=new self.TextTrackCue(r.startTime,r.endTime,r.text);u.id=r.id,t.addCue(u)}"disabled"===i&&(t.mode=i)}function clearCurrentCues(t){var r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues)for(var i=t.cues.length;i--;)t.removeCue(t.cues[i]);"disabled"===r&&(t.mode=r)}function removeCuesInRange(t,r,i){var a=t.mode;if("disabled"===a&&(t.mode="hidden"),t.cues&&t.cues.length>0)for(var u=getCuesInRange(t.cues,r,i),l=0;l<u.length;l++)t.removeCue(u[l]);"disabled"===a&&(t.mode=a)}function getCuesInRange(t,r,i){var a=[],u=function getFirstCueIndexAfterTime(t,r){if(r<t[0].startTime)return 0;var i=t.length-1;if(r>t[i].endTime)return-1;for(var a=0,u=i;a<=u;){var l=Math.floor((u+a)/2);if(r<t[l].startTime)u=l-1;else{if(!(r>t[l].startTime&&a<i))return l;a=l+1}}return t[a].startTime-r<r-t[u].startTime?a:u}(t,r);if(u>-1)for(var l=u,c=t.length;l<c;l++){var d=t[l];if(d.startTime>=r&&d.endTime<=i)a.push(d);else if(d.startTime>i)return a}return a}},"./src/utils/time-ranges.ts":
/*!**********************************!*\
    !*** ./src/utils/time-ranges.ts ***!
    \**********************************/
/*! exports provided: default */function srcUtilsTimeRangesTs(t,r,i){i.r(r),r.default={toString:function toString(t){for(var r="",i=t.length,a=0;a<i;a++)r+="["+t.start(a).toFixed(3)+","+t.end(a).toFixed(3)+"]";return r}}},"./src/utils/timescale-conversion.ts":
/*!*******************************************!*\
    !*** ./src/utils/timescale-conversion.ts ***!
    \*******************************************/
/*! exports provided: toTimescaleFromBase, toTimescaleFromScale, toMsFromMpegTsClock, toMpegTsClockFromTimescale */function srcUtilsTimescaleConversionTs(t,r,i){function toTimescaleFromBase(t,r,i,a){void 0===i&&(i=1),void 0===a&&(a=!1);var u=t*r*i;return a?Math.round(u):u}function toTimescaleFromScale(t,r,i,a){return void 0===i&&(i=1),void 0===a&&(a=!1),toTimescaleFromBase(t,r,1/i,a)}function toMsFromMpegTsClock(t,r){return void 0===r&&(r=!1),toTimescaleFromBase(t,1e3,1/9e4,r)}function toMpegTsClockFromTimescale(t,r){return void 0===r&&(r=1),toTimescaleFromBase(t,9e4,1/r)}i.r(r),i.d(r,"toTimescaleFromBase",(function(){return toTimescaleFromBase})),i.d(r,"toTimescaleFromScale",(function(){return toTimescaleFromScale})),i.d(r,"toMsFromMpegTsClock",(function(){return toMsFromMpegTsClock})),i.d(r,"toMpegTsClockFromTimescale",(function(){return toMpegTsClockFromTimescale}))},"./src/utils/typed-array.ts":
/*!**********************************!*\
    !*** ./src/utils/typed-array.ts ***!
    \**********************************/
/*! exports provided: sliceUint8 */function srcUtilsTypedArrayTs(t,r,i){function sliceUint8(t,r,i){return Uint8Array.prototype.slice?t.slice(r,i):new Uint8Array(Array.prototype.slice.call(t,r,i))}i.r(r),i.d(r,"sliceUint8",(function(){return sliceUint8}))},"./src/utils/vttcue.ts":
/*!*****************************!*\
    !*** ./src/utils/vttcue.ts ***!
    \*****************************/
/*! exports provided: default */function srcUtilsVttcueTs(t,r,i){i.r(r),r.default=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],r=["start","middle","end","left","right"];function isAllowedValue(t,r){if("string"!=typeof r)return!1;if(!Array.isArray(t))return!1;var i=r.toLowerCase();return!!~t.indexOf(i)&&i}function findAlignSetting(t){return isAllowedValue(r,t)}function extend(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(var u=1;u<arguments.length;u++){var l=arguments[u];for(var c in l)t[c]=l[c]}return t}function VTTCue(r,i,a){var u=this,l={enumerable:!0};u.hasBeenReset=!1;var c="",d=!1,g=r,p=i,m=a,v=null,b="",M=!0,S="auto",E="start",I=50,D="middle",A=50,C="middle";Object.defineProperty(u,"id",extend({},l,{get:function get(){return c},set:function set(t){c=""+t}})),Object.defineProperty(u,"pauseOnExit",extend({},l,{get:function get(){return d},set:function set(t){d=!!t}})),Object.defineProperty(u,"startTime",extend({},l,{get:function get(){return g},set:function set(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",extend({},l,{get:function get(){return p},set:function set(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",extend({},l,{get:function get(){return m},set:function set(t){m=""+t,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",extend({},l,{get:function get(){return v},set:function set(t){v=t,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",extend({},l,{get:function get(){return b},set:function set(r){var i=function findDirectionSetting(r){return isAllowedValue(t,r)}(r);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");b=i,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",extend({},l,{get:function get(){return M},set:function set(t){M=!!t,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",extend({},l,{get:function get(){return S},set:function set(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",extend({},l,{get:function get(){return E},set:function set(t){var r=findAlignSetting(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");E=r,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",extend({},l,{get:function get(){return I},set:function set(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");I=t,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",extend({},l,{get:function get(){return D},set:function set(t){var r=findAlignSetting(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");D=r,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",extend({},l,{get:function get(){return A},set:function set(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");A=t,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",extend({},l,{get:function get(){return C},set:function set(t){var r=findAlignSetting(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");C=r,this.hasBeenReset=!0}})),u.displayState=void 0}return VTTCue.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},VTTCue}()},"./src/utils/vttparser.ts":
/*!********************************!*\
    !*** ./src/utils/vttparser.ts ***!
    \********************************/
/*! exports provided: parseTimeStamp, fixLineBreaks, VTTParser */function srcUtilsVttparserTs(t,r,i){i.r(r),i.d(r,"parseTimeStamp",(function(){return parseTimeStamp})),i.d(r,"fixLineBreaks",(function(){return fixLineBreaks})),i.d(r,"VTTParser",(function(){return g}));var a=i(/*! ./vttcue */"./src/utils/vttcue.ts"),u=function(){function StringDecoder(){}return StringDecoder.prototype.decode=function decode(t,r){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},StringDecoder}();function parseTimeStamp(t){function computeSeconds(t,r,i,a){return 3600*(0|t)+60*(0|r)+(0|i)+parseFloat(a||0)}var r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?computeSeconds(r[2],r[3],0,r[4]):computeSeconds(r[1],r[2],r[3],r[4]):null}var l=function(){function Settings(){this.values=Object.create(null)}var t=Settings.prototype;return t.set=function set(t,r){this.get(t)||""===r||(this.values[t]=r)},t.get=function get(t,r,i){return i?this.has(t)?this.values[t]:r[i]:this.has(t)?this.values[t]:r},t.has=function has(t){return t in this.values},t.alt=function alt(t,r,i){for(var a=0;a<i.length;++a)if(r===i[a]){this.set(t,r);break}},t.integer=function integer(t,r){/^-?\d+$/.test(r)&&this.set(t,parseInt(r,10))},t.percent=function percent(t,r){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(r)){var percent=parseFloat(r);if(percent>=0&&percent<=100)return this.set(t,percent),!0}return!1},Settings}();function parseOptions(t,r,i,a){var u=a?t.split(a):[t];for(var l in u)if("string"==typeof u[l]){var c=u[l].split(i);2===c.length&&r(c[0],c[1])}}var c=new a.default(0,0,""),d="middle"===c.align?"middle":"center";function parseCue(t,r,i){var a=t;function consumeTimeStamp(){var r=parseTimeStamp(t);if(null===r)throw new Error("Malformed timestamp: "+a);return t=t.replace(/^[^\sa-zA-Z-]+/,""),r}function skipWhitespace(){t=t.replace(/^\s+/,"")}if(skipWhitespace(),r.startTime=consumeTimeStamp(),skipWhitespace(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);t=t.substr(3),skipWhitespace(),r.endTime=consumeTimeStamp(),skipWhitespace(),function consumeCueSettings(t,r){var a=new l;parseOptions(t,(function(t,r){var u;switch(t){case"region":for(var l=i.length-1;l>=0;l--)if(i[l].id===r){a.set(t,i[l].region);break}break;case"vertical":a.alt(t,r,["rl","lr"]);break;case"line":u=r.split(","),a.integer(t,u[0]),a.percent(t,u[0])&&a.set("snapToLines",!1),a.alt(t,u[0],["auto"]),2===u.length&&a.alt("lineAlign",u[1],["start",d,"end"]);break;case"position":u=r.split(","),a.percent(t,u[0]),2===u.length&&a.alt("positionAlign",u[1],["start",d,"end","line-left","line-right","auto"]);break;case"size":a.percent(t,r);break;case"align":a.alt(t,r,["start",d,"end","left","right"])}}),/:/,/\s/),r.region=a.get("region",null),r.vertical=a.get("vertical","");var u=a.get("line","auto");"auto"===u&&-1===c.line&&(u=-1),r.line=u,r.lineAlign=a.get("lineAlign","start"),r.snapToLines=a.get("snapToLines",!0),r.size=a.get("size",100),r.align=a.get("align",d);var g=a.get("position","auto");"auto"===g&&50===c.position&&(g="start"===r.align||"left"===r.align?0:"end"===r.align||"right"===r.align?100:50),r.position=g}(t,r)}function fixLineBreaks(t){return t.replace(/<br(?: \/)?>/gi,"\n")}var g=function(){function VTTParser(){this.state="INITIAL",this.buffer="",this.decoder=new u,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=VTTParser.prototype;return t.parse=function parse(t){var r=this;function collectNextLine(){var t=r.buffer,i=0;for(t=fixLineBreaks(t);i<t.length&&"\r"!==t[i]&&"\n"!==t[i];)++i;var a=t.substr(0,i);return"\r"===t[i]&&++i,"\n"===t[i]&&++i,r.buffer=t.substr(i),a}t&&(r.buffer+=r.decoder.decode(t,{stream:!0}));try{var i="";if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;var u=(i=collectNextLine()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var l=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(l?l=!1:i=collectNextLine(),r.state){case"HEADER":/:/.test(i)?parseOptions(i,(function(t,r){}),/:/):i||(r.state="ID");continue;case"NOTE":i||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){r.state="NOTE";break}if(!i)continue;if(r.cue=new a.default(0,0,""),r.state="CUE",-1===i.indexOf("--\x3e")){r.cue.id=i;continue}case"CUE":if(!r.cue){r.state="BADCUE";continue}try{parseCue(i,r.cue,r.regionList)}catch(t){r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var c=-1!==i.indexOf("--\x3e");if(!i||c&&(l=!0)){r.oncue&&r.cue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}if(null===r.cue)continue;r.cue.text&&(r.cue.text+="\n"),r.cue.text+=i;continue;case"BADCUE":i||(r.state="ID")}}}catch(t){"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function flush(){var t=this;try{if((t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state||"BADWEBVTT"===t.state)throw new Error("Malformed WebVTT signature.")}catch(r){t.onparsingerror&&t.onparsingerror(r)}return t.onflush&&t.onflush(),this},VTTParser}()},"./src/utils/webvtt-parser.ts":
/*!************************************!*\
    !*** ./src/utils/webvtt-parser.ts ***!
    \************************************/
/*! exports provided: generateCueId, parseWebVTT */function srcUtilsWebvttParserTs(t,r,i){i.r(r),i.d(r,"generateCueId",(function(){return generateCueId})),i.d(r,"parseWebVTT",(function(){return parseWebVTT}));var a=i(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),u=i(/*! ./vttparser */"./src/utils/vttparser.ts"),l=i(/*! ../demux/id3 */"./src/demux/id3.ts"),c=i(/*! ./timescale-conversion */"./src/utils/timescale-conversion.ts"),d=i(/*! ../remux/mp4-remuxer */"./src/remux/mp4-remuxer.ts"),g=/\r\n|\n\r|\n|\r/g,p=function startsWith(t,r,i){return void 0===i&&(i=0),t.substr(i,r.length)===r},m=function hash(t){for(var hash=5381,r=t.length;r;)hash=33*hash^t.charCodeAt(--r);return(hash>>>0).toString()};function generateCueId(t,r,i){return m(t.toString())+m(r.toString())+m(i)}function parseWebVTT(t,r,i,m,v,b,M,S){var E,I=new u.VTTParser,D=Object(l.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(g,"\n").split("\n"),A=[],C=Object(c.toMpegTsClockFromTimescale)(r,i),N="00:00.000",k=0,O=0,L=!0,R=!1;I.oncue=function(t){var r=m[v],i=m.ccOffset,a=(k-C)/9e4;if(null!=r&&r.new&&(void 0!==O?i=m.ccOffset=r.start:function calculateOffset(t,r,i){var a=t[r],u=t[a.prevCC];if(!u||!u.new&&a.new)return t.ccOffset=t.presentationOffset=a.start,void(a.new=!1);for(;null!==(l=u)&&void 0!==l&&l.new;){var l;t.ccOffset+=a.start-u.start,a.new=!1,u=t[(a=u).prevCC]}t.presentationOffset=i}(m,v,a)),a&&(i=a-m.presentationOffset),R){var u=t.endTime-t.startTime,l=Object(d.normalizePts)(9e4*(t.startTime+i-O),9e4*b)/9e4;t.startTime=l,t.endTime=l+u}var c=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(c)),t.id||(t.id=generateCueId(t.startTime,t.endTime,c)),t.endTime>0&&A.push(t)},I.onparsingerror=function(t){E=t},I.onflush=function(){E?S(E):M(A)},D.forEach((function(t){if(L){if(p(t,"X-TIMESTAMP-MAP=")){L=!1,R=!0,t.substr(16).split(",").forEach((function(t){p(t,"LOCAL:")?N=t.substr(6):p(t,"MPEGTS:")&&(k=parseInt(t.substr(7)))}));try{O=function cueString2millis(t){var r=parseInt(t.substr(-3)),i=parseInt(t.substr(-6,2)),u=parseInt(t.substr(-9,2)),l=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(a.isFiniteNumber)(r)&&Object(a.isFiniteNumber)(i)&&Object(a.isFiniteNumber)(u)&&Object(a.isFiniteNumber)(l)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return r+=1e3*i,(r+=6e4*u)+36e5*l}(N)/1e3}catch(t){R=!1,E=t}return}""===t&&(L=!1)}I.parse(t+"\n")})),I.flush()}},"./src/utils/xhr-loader.ts":
/*!*********************************!*\
    !*** ./src/utils/xhr-loader.ts ***!
    \*********************************/
/*! exports provided: default */function srcUtilsXhrLoaderTs(t,r,i){i.r(r);var a=i(/*! ../utils/logger */"./src/utils/logger.ts"),u=i(/*! ../loader/load-stats */"./src/loader/load-stats.ts"),l=/^age:\s*[\d.]+\s*$/m,c=function(){function XhrLoader(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t?t.xhrSetup:null,this.stats=new u.LoadStats,this.retryDelay=0}var t=XhrLoader.prototype;return t.destroy=function destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},t.abortInternal=function abortInternal(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},t.abort=function abort(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function load(t,r,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=r,this.callbacks=i,this.retryDelay=r.retryDelay,this.loadInternal()},t.loadInternal=function loadInternal(){var t=this.config,r=this.context;if(t){var i=this.loader=new self.XMLHttpRequest,a=this.stats;a.loading.first=0,a.loaded=0;var u=this.xhrSetup;try{if(u)try{u(i,r.url)}catch(t){i.open("GET",r.url,!0),u(i,r.url)}i.readyState||i.open("GET",r.url,!0);var l=this.context.headers;if(l)for(var c in l)i.setRequestHeader(c,l[c])}catch(t){return void this.callbacks.onError({code:i.status,text:t.message},r,i)}r.rangeEnd&&i.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),i.onreadystatechange=this.readystatechange.bind(this),i.onprogress=this.loadprogress.bind(this),i.responseType=r.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),t.timeout),i.send()}},t.readystatechange=function readystatechange(){var t=this.context,r=this.loader,i=this.stats;if(t&&r){var u=r.readyState,l=this.config;if(!i.aborted&&u>=2)if(self.clearTimeout(this.requestTimeout),0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start)),4===u){r.onreadystatechange=null,r.onprogress=null;var c=r.status;if(c>=200&&c<300){var d,g;if(i.loading.end=Math.max(self.performance.now(),i.loading.first),g="arraybuffer"===t.responseType?(d=r.response).byteLength:(d=r.responseText).length,i.loaded=i.total=g,!this.callbacks)return;var p=this.callbacks.onProgress;if(p&&p(i,t,d,r),!this.callbacks)return;var m={url:r.responseURL,data:d};this.callbacks.onSuccess(m,i,t,r)}else i.retry>=l.maxRetry||c>=400&&c<499?(a.logger.error(c+" while loading "+t.url),this.callbacks.onError({code:c,text:r.statusText},t,r)):(a.logger.warn(c+" while loading "+t.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,l.maxRetryDelay),i.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),l.timeout)}},t.loadtimeout=function loadtimeout(){a.logger.warn("timeout while loading "+this.context.url);var t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader))},t.loadprogress=function loadprogress(t){var r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total)},t.getCacheAge=function getCacheAge(){var t=null;if(this.loader&&l.test(this.loader.getAllResponseHeaders())){var r=this.loader.getResponseHeader("age");t=r?parseFloat(r):null}return t},XhrLoader}();r.default=c}}).default}));var TN=getDefaultExportFromCjs(_N.exports),bN=null,MN={debug:!1};function handleUnrecoverableError(t,r){ln._consumer&&(ln._consumer.fire("$videoPlayerError",r,ln.currentTime),ln._consumer.fire("$videoPlayerEvent","Error",r,ln.currentTime)),t.destroy()}var SN=function unload(t){bN&&bN.destroy&&bN.destroy instanceof Function&&(bN.destroy(),bN=null),t.removeAttribute("src"),t.load()},EN=function loader(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a){SN(r),(bN=new TN(_objectSpread2(_objectSpread2({},MN),i))).autoLevelCapping=i.autoLevelCapping||-1,bN.on(TN.Events.MANIFEST_PARSED,(function(){return a()})),bN.on(TN.Events.ERROR,(function(t,r){if(r.fatal)switch(r.type){case TN.ErrorTypes.MEDIA_ERROR:if(r.details===TN.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR)handleUnrecoverableError(bN,{event:t,data:r});else bN.recoverMediaError();break;case TN.ErrorTypes.NETWORK_ERROR:switch(r.details){case TN.ErrorDetails.FRAG_LOAD_ERROR:bN.currentLevel=r.frag.start+r.frag.duration+.1;break;case TN.ErrorDetails.MANIFEST_LOAD_ERROR:handleUnrecoverableError(bN,{event:t,data:r});break;default:bN.startLoad()}break;default:handleUnrecoverableError(bN,{event:t,data:r})}})),bN.loadSource(t),bN.attachMedia(r)}))},IN=function unloader(t){return new Promise((function(r){SN(t),r()}))},DN={exports:{}};!function(t,r){!function webpackUniversalModuleDefinition(r,i){t.exports=i()}(window,(function(){return function(t){var r={};function __webpack_require__(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}return __webpack_require__.m=t,__webpack_require__.c=r,__webpack_require__.d=function(t,r,i){__webpack_require__.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:i})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,r){if(1&r&&(t=__webpack_require__(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(__webpack_require__.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)__webpack_require__.d(i,a,function(r){return t[r]}.bind(null,a));return i},__webpack_require__.n=function(t){var r=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},__webpack_require__.p="/dist/",__webpack_require__(__webpack_require__.s="./index.js")}({"./externals/base64.js":
/*!*****************************!*\
    !*** ./externals/base64.js ***!
    \*****************************/
/*! no static exports found */function externalsBase64Js(t,r,i){var u={encode:function(t){for(var r=[],i=0;i<t.length;++i){var a=t.charCodeAt(i);a<128?r.push(a):a<2048?(r.push(192|a>>6),r.push(128|63&a)):a<65536?(r.push(224|a>>12),r.push(128|63&a>>6),r.push(128|63&a)):(r.push(240|a>>18),r.push(128|63&a>>12),r.push(128|63&a>>6),r.push(128|63&a))}return r},decode:function(t){for(var r=[],i=0;i<t.length;){var a=t[i++];a<128||(a<224?(a=(31&a)<<6,a|=63&t[i++]):a<240?(a=(15&a)<<12,a|=(63&t[i++])<<6,a|=63&t[i++]):(a=(7&a)<<18,a|=(63&t[i++])<<12,a|=(63&t[i++])<<6,a|=63&t[i++])),r.push(String.fromCharCode(a))}return r.join("")}},l={};!function(t){var r=function encodeArray(r){for(var i=0,a=[],u=0|r.length/3;0<u--;){var l=(r[i]<<16)+(r[i+1]<<8)+r[i+2];i+=3,a.push(t.charAt(63&l>>18)),a.push(t.charAt(63&l>>12)),a.push(t.charAt(63&l>>6)),a.push(t.charAt(63&l))}if(2==r.length-i){l=(r[i]<<16)+(r[i+1]<<8);a.push(t.charAt(63&l>>18)),a.push(t.charAt(63&l>>12)),a.push(t.charAt(63&l>>6)),a.push("=")}else if(1==r.length-i){l=r[i]<<16;a.push(t.charAt(63&l>>18)),a.push(t.charAt(63&l>>12)),a.push("==")}return a.join("")},i=function(){for(var r=[],i=0;i<t.length;++i)r[t.charCodeAt(i)]=i;return r["=".charCodeAt(0)]=0,r}(),c=function decodeArray(t){for(var r=0,a=[],u=0|t.length/4;0<u--;){var l=(i[t.charCodeAt(r)]<<18)+(i[t.charCodeAt(r+1)]<<12)+(i[t.charCodeAt(r+2)]<<6)+i[t.charCodeAt(r+3)];a.push(255&l>>16),a.push(255&l>>8),a.push(255&l),r+=4}return a&&("="==t.charAt(r-2)?(a.pop(),a.pop()):"="==t.charAt(r-1)&&a.pop()),a},d={encode:function(t){for(var r=[],i=0;i<t.length;++i)r.push(t.charCodeAt(i));return r},decode:function(t){for(var r=0;r<s.length;++r)a[r]=String.fromCharCode(a[r]);return a.join("")}};l.decodeArray=function(t){var r=c(t);return new Uint8Array(r)},l.encodeASCII=function(t){var i=d.encode(t);return r(i)},l.decodeASCII=function(t){var r=c(t);return d.decode(r)},l.encode=function(t){var i=u.encode(t);return r(i)},l.decode=function(t){var r=c(t);return u.decode(r)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),r.decode=l.decode,r.decodeArray=l.decodeArray,r.encode=l.encode,r.encodeASCII=l.encodeASCII},"./externals/cea608-parser.js":
/*!************************************!*\
    !*** ./externals/cea608-parser.js ***!
    \************************************/
/*! no static exports found */function externalsCea608ParserJs(t,r,i){!function(t){var r={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function getCharForByte(t){var i=t;return r.hasOwnProperty(t)&&(i=r[t]),String.fromCharCode(i)},a=15,u=32,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},g={25:2,26:4,29:6,30:8,31:10,27:13,28:15},p=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],m={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function setTime(t){this.time=t},log:function log(t,r){var i=this.verboseFilter[t];this.verboseLevel>=i&&console.log(this.time+" ["+t+"] "+r)}},v=function numArrayToHexArray(t){for(var r=[],i=0;i<t.length;i++)r.push(t[i].toString(16));return r},b=function PenState(t,r,i,a,u){this.foreground=t||"white",this.underline=r||!1,this.italics=i||!1,this.background=a||"black",this.flash=u||!1};b.prototype={reset:function reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function setStyles(t){for(var r=["foreground","underline","italics","background","flash"],i=0;i<r.length;i++){var a=r[i];t.hasOwnProperty(a)&&(this[a]=t[a])}},isDefault:function isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function equals(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},copy:function copy(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},toString:function toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var M=function StyledUnicodeChar(t,r,i,a,u,l){this.uchar=t||" ",this.penState=new b(r,i,a,u,l)};M.prototype={reset:function reset(){this.uchar=" ",this.penState.reset()},setChar:function setChar(t,r){this.uchar=t,this.penState.copy(r)},setPenState:function setPenState(t){this.penState.copy(t)},equals:function equals(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},copy:function copy(t){this.uchar=t.uchar,this.penState.copy(t.penState)},isEmpty:function isEmpty(){return" "===this.uchar&&this.penState.isDefault()}};var S=function Row(){this.chars=[];for(var t=0;t<u;t++)this.chars.push(new M);this.pos=0,this.currPenState=new b};S.prototype={equals:function equals(t){for(var r=!0,i=0;i<u;i++)if(!this.chars[i].equals(t.chars[i])){r=!1;break}return r},copy:function copy(t){for(var r=0;r<u;r++)this.chars[r].copy(t.chars[r])},isEmpty:function isEmpty(){for(var t=!0,r=0;r<u;r++)if(!this.chars[r].isEmpty()){t=!1;break}return t},setCursor:function setCursor(t){this.pos!==t&&(this.pos=t),this.pos<0?(m.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(m.log("ERROR","Too large cursor position "+this.pos),this.pos=u)},moveCursor:function moveCursor(t){var r=this.pos+t;if(t>1)for(var i=this.pos+1;i<r+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(r)},backSpace:function backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function insertChar(t){t>=144&&this.backSpace();var r=i(t);this.pos>=u?m.log("ERROR","Cannot insert "+t.toString(16)+" ("+r+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1))},clearFromPos:function clearFromPos(t){var r;for(r=t;r<u;r++)this.chars[r].reset()},clear:function clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function clearToEndOfRow(){this.clearFromPos(this.pos)},getTextString:function getTextString(){for(var t=[],r=!0,i=0;i<u;i++){var a=this.chars[i].uchar;" "!==a&&(r=!1),t.push(a)}return r?"":t.join("")},setPenStyles:function setPenStyles(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)}};var E=function CaptionScreen(){this.rows=[];for(var t=0;t<a;t++)this.rows.push(new S);this.currRow=14,this.nrRollUpRows=null,this.reset()};E.prototype={reset:function reset(){for(var t=0;t<a;t++)this.rows[t].clear();this.currRow=14},equals:function equals(t){for(var r=!0,i=0;i<a;i++)if(!this.rows[i].equals(t.rows[i])){r=!1;break}return r},copy:function copy(t){for(var r=0;r<a;r++)this.rows[r].copy(t.rows[r])},isEmpty:function isEmpty(){for(var t=!0,r=0;r<a;r++)if(!this.rows[r].isEmpty()){t=!1;break}return t},backSpace:function backSpace(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function insertChar(t){this.rows[this.currRow].insertChar(t)},setPen:function setPen(t){this.rows[this.currRow].setPenStyles(t)},moveCursor:function moveCursor(t){this.rows[this.currRow].moveCursor(t)},setCursor:function setCursor(t){m.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},setPAC:function setPAC(t){m.log("INFO","pacData = "+JSON.stringify(t));var r=t.row-1;this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.currRow=r;var i=this.rows[this.currRow];if(null!==t.indent){var a=t.indent,u=Math.max(a-1,0);i.setCursor(t.indent),t.color=i.chars[u].penState.foreground}var l={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(l)},setBkgData:function setBkgData(t){m.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},setRollUpRows:function setRollUpRows(t){this.nrRollUpRows=t},rollUp:function rollUp(){if(null!==this.nrRollUpRows){m.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(t,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),m.log("INFO","Rolling up")}else m.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function getDisplayText(t){t=t||!1;for(var r=[],i="",u=-1,l=0;l<a;l++){var c=this.rows[l].getTextString();c&&(u=l+1,t?r.push("Row "+u+': "'+c+'"'):r.push(c.trim()))}return r.length>0&&(i=t?"["+r.join(" | ")+"]":r.join("\n")),i},getTextAndFormat:function getTextAndFormat(){return this.rows}};var I=function Cea608Channel(t,r){this.chNr=t,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new E,this.nonDisplayedMemory=new E,this.lastOutputScreen=new E,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};I.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function getHandler(){return this.outputFilter},setHandler:function setHandler(t){this.outputFilter=t},setPAC:function setPAC(t){this.writeScreen.setPAC(t)},setBkgData:function setBkgData(t){this.writeScreen.setBkgData(t)},setMode:function setMode(t){t!==this.mode&&(this.mode=t,m.log("INFO","MODE="+t),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},insertChars:function insertChars(t){for(var r=0;r<t.length;r++)this.writeScreen.insertChar(t[r]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";m.log("INFO",i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(m.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function cc_RCL(){m.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function cc_BS(){m.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function cc_AOF(){},cc_AON:function cc_AON(){},cc_DER:function cc_DER(){m.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function cc_RU(t){m.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},cc_FON:function cc_FON(){m.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function cc_RDC(){m.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function cc_TR(){m.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function cc_RTD(){m.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function cc_EDM(){m.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function cc_CR(){m.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function cc_ENM(){m.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function cc_EOC(){if(m.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,m.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function cc_TO(t){m.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},cc_MIDROW:function cc_MIDROW(t){var r={flash:!1};if(r.underline=t%2==1,r.italics=t>=46,r.italics)r.foreground="white";else{var i=Math.floor(t/2)-16;r.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}m.log("INFO","MIDROW: "+JSON.stringify(r)),this.writeScreen.setPen(r)},outputDataUpdate:function outputDataUpdate(){var t=m.time;null!==t&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(t,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function cueSplitAtTime(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}};var D=function Cea608Parser(t,r,i){this.field=t||1,this.outputs=[r,i],this.channels=[new I(1,r),new I(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};D.prototype={getHandler:function getHandler(t){return this.channels[t].getHandler()},setHandler:function setHandler(t,r){this.channels[t].setHandler(r)},addData:function addData(t,r){var i,a,u,l=!1;this.lastTime=t,m.setTime(t);for(var c=0;c<r.length;c+=2)if(a=127&r[c],u=127&r[c+1],a>=16&&a<=31&&a===this.lastCmdA&&u===this.lastCmdB)this.lastCmdA=null,this.lastCmdB=null,m.log("DEBUG","Repeated command ("+v([a,u])+") is dropped");else if(0!==a||0!==u){if(m.log("DATA","["+v([r[c],r[c+1]])+"] -> ("+v([a,u])+")"),(i=this.parseCmd(a,u))||(i=this.parseMidrow(a,u)),i||(i=this.parsePAC(a,u)),i||(i=this.parseBackgroundAttributes(a,u)),!i)if(l=this.parseChars(a,u))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(l);else m.log("WARNING","No channel found yet. TEXT-MODE?");i?this.dataCounters.cmd+=2:l?this.dataCounters.char+=2:(this.dataCounters.other+=2,m.log("WARNING","Couldn't parse cleaned data "+v([a,u])+" orig: "+v([r[c],r[c+1]])))}else this.dataCounters.padding+=2},parseCmd:function parseCmd(t,r){var i=null;if(!((20===t||21===t||28===t||29===t)&&32<=r&&r<=47)&&!((23===t||31===t)&&33<=r&&r<=35))return!1;i=20===t||21===t||23===t?1:2;var a=this.channels[i-1];return 20===t||21===t||28===t||29===t?32===r?a.cc_RCL():33===r?a.cc_BS():34===r?a.cc_AOF():35===r?a.cc_AON():36===r?a.cc_DER():37===r?a.cc_RU(2):38===r?a.cc_RU(3):39===r?a.cc_RU(4):40===r?a.cc_FON():41===r?a.cc_RDC():42===r?a.cc_TR():43===r?a.cc_RTD():44===r?a.cc_EDM():45===r?a.cc_CR():46===r?a.cc_ENM():47===r&&a.cc_EOC():a.cc_TO(r-32),this.lastCmdA=t,this.lastCmdB=r,this.currChNr=i,!0},parseMidrow:function parseMidrow(t,r){var i=null;if((17===t||25===t)&&32<=r&&r<=47){if((i=17===t?1:2)!==this.currChNr)return m.log("ERROR","Mismatch channel in midrow parsing"),!1;var a=this.channels[i-1];return a.insertChars([32]),a.cc_MIDROW(r),m.log("DEBUG","MIDROW ("+v([t,r])+")"),this.lastCmdA=t,this.lastCmdB=r,!0}return!1},parsePAC:function parsePAC(t,r){var i,a=null;if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=r&&r<=127)&&!((16===t||24===t)&&64<=r&&r<=95))return!1;i=t<=23?1:2,a=64<=r&&r<=95?1===i?l[t]:d[t]:1===i?c[t]:g[t];var u=this.interpretPAC(a,r);return this.channels[i-1].setPAC(u),this.lastCmdA=t,this.lastCmdB=r,this.currChNr=i,!0},interpretPAC:function interpretPAC(t,r){var i=r,a={color:null,italics:!1,indent:null,underline:!1,row:t};return i=r>95?r-96:r-64,a.underline=1==(1&i),i<=13?a.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(a.italics=!0,a.color="white"):a.indent=4*Math.floor((i-16)/2),a},parseChars:function parseChars(t,r){var a=null,u=null,l=null;if(t>=25?(a=2,l=t-8):(a=1,l=t),17<=l&&l<=19){var c=r;c=17===l?r+80:18===l?r+112:r+144,m.log("INFO","Special char '"+i(c)+"' in channel "+a),u=[c],this.lastCmdA=t,this.lastCmdB=r}else 32<=t&&t<=127&&(u=0===r?[t]:[t,r],this.lastCmdA=null,this.lastCmdB=null);if(u){var d=v(u);m.log("DEBUG","Char codes =  "+d.join(","))}return u},parseBackgroundAttributes:function parseBackgroundAttributes(t,r){var i,a,u;return((16===t||24===t)&&32<=r&&r<=47||(23===t||31===t)&&45<=r&&r<=47)&&(i={},16===t||24===t?(a=Math.floor((r-32)/2),i.background=p[a],r%2==1&&(i.background=i.background+"_semi")):45===r?i.background="transparent":(i.foreground="black",47===r&&(i.underline=!0)),u=t<24?1:2,this.channels[u-1].setBkgData(i),this.lastCmdA=t,this.lastCmdB=r,!0)},reset:function reset(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function cueSplitAtTime(t){for(var r=0;r<this.channels.length;r++)this.channels[r]&&this.channels[r].cueSplitAtTime(t)}};t.logger=m,t.PenState=b,t.CaptionScreen=E,t.Cea608Parser=D,t.findCea608Nalus=function findCea608Nalus(t,r,i){for(var a=0,u=r,l=[],c=function isCEA608SEI(t,r,i,a){if(4!==t||r<8)return null;var u=i.getUint8(a),l=i.getUint16(a+1),c=i.getUint32(a+3),d=i.getUint8(a+7);return 181==u&&49==l&&1195456820==c&&3==d};u<r+i;){if(a=t.getUint32(u),6===(31&t.getUint8(u+4)))for(var d=u+5,g=-1;d<u+4+a-1;){g=0;for(var p=255;255===p;)g+=p=t.getUint8(d),d++;var m=0;for(p=255;255===p;)m+=p=t.getUint8(d),d++;c(g,m,t,d)&&l.push([d,m]),d+=m}u+=a+4}return l},t.extractCea608DataFromRange=function extractCea608DataFromRange(t,r){var i=r[0],a=[[],[]];i+=8;var u=31&t.getUint8(i);i+=2;for(var l=0;l<u;l++){var c=t.getUint8(i),d=4&c,g=3&c;i++;var p=t.getUint8(i);i++;var m=t.getUint8(i);i++,d&&(127&p)+(127&m)!=0&&(0===g?(a[0].push(p),a[0].push(m)):1===g&&(a[1].push(p),a[1].push(m)))}return a}}(r)},"./externals/xml2json.js":
/*!*******************************!*\
    !*** ./externals/xml2json.js ***!
    \*******************************/
/*! exports provided: default */function externalsXml2jsonJs(t,r,i){i.r(r),r.default=function X2JS(t){t=t||{},function initConfigDefaults(){void 0===t.escapeMode&&(t.escapeMode=!0);void 0===t.attributePrefix&&(t.attributePrefix="_");t.arrayAccessForm=t.arrayAccessForm||"none",t.emptyNodeForm=t.emptyNodeForm||"text",void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0);t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0);void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0);t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[],void 0===t.useDoubleQuotes&&(t.useDoubleQuotes=!1);t.xmlElementsFilter=t.xmlElementsFilter||[],t.jsonPropertiesFilter=t.jsonPropertiesFilter||[],void 0===t.keepCData&&(t.keepCData=!1);void 0===t.ignoreRoot&&(t.ignoreRoot=!1)}();var r=1,i=3,a=4,u=8,l=9;function getNodeLocalName(t){var r=t.localName;return null==r&&(r=t.baseName),null!=r&&""!=r||(r=t.nodeName),r}function escapeXmlChars(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):t}function checkInStdFiltersArrayForm(t,r,i,a){for(var u=0;u<t.length;u++){var l=t[u];if("string"==typeof l){if(l==a)break}else if(l instanceof RegExp){if(l.test(a))break}else if("function"==typeof l&&l(r,i,a))break}return u!=t.length}function toArrayAccessForm(r,i,a){if("property"===t.arrayAccessForm)r[i]instanceof Array?r[i+"_asArray"]=r[i]:r[i+"_asArray"]=[r[i]];!(r[i]instanceof Array)&&t.arrayAccessFormPaths.length>0&&checkInStdFiltersArrayForm(t.arrayAccessFormPaths,r,i,a)&&(r[i]=[r[i]])}function fromXmlDateTime(t){var r=t.split(/[-T:+Z]/g),i=new Date(r[0],r[1]-1,r[2]),a=r[5].split(".");if(i.setHours(r[3],r[4],a[0]),a.length>1&&i.setMilliseconds(a[1]),r[6]&&r[7]){var u=60*r[6]+Number(r[7]);u=0+("-"==(/\d\d-\d\d:\d\d$/.test(t)?"-":"+")?-1*u:u),i.setMinutes(i.getMinutes()-u-i.getTimezoneOffset())}else-1!==t.indexOf("Z",t.length-1)&&(i=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())));return i}function checkXmlElementsFilter(i,a,u,l){return!(a==r&&t.xmlElementsFilter.length>0)||checkInStdFiltersArrayForm(t.xmlElementsFilter,i,u,l)}function parseDOMChildren(c,d){if(c.nodeType==l){for(var g=new Object,p=c.childNodes,m=0;m<p.length;m++){if((b=p[m]).nodeType==r)if(t.ignoreRoot)g=parseDOMChildren(b);else(g={})[M=getNodeLocalName(b)]=parseDOMChildren(b)}return g}if(c.nodeType==r){(g=new Object).__cnt=0;var v=[];for(p=c.childNodes,m=0;m<p.length;m++){var b,M=getNodeLocalName(b=p[m]);if(b.nodeType!=u){var S=d+"."+M;if(checkXmlElementsFilter(g,b.nodeType,M,S))if(g.__cnt++,null==g[M]){var E=parseDOMChildren(b,S);if("#text"!=M||/[^\s]/.test(E))(I={})[M]=E,v.push(I);g[M]=E,toArrayAccessForm(g,M,S)}else{null!=g[M]&&(g[M]instanceof Array||(g[M]=[g[M]],toArrayAccessForm(g,M,S)));var I;E=parseDOMChildren(b,S);if("#text"!=M||/[^\s]/.test(E))(I={})[M]=E,v.push(I);g[M][g[M].length]=E}}}g.__children=v;for(var D=getNodeLocalName(c),A=0;A<c.attributes.length;A++){var C=c.attributes[A];g.__cnt++;for(var N=C.value,k=0,O=t.matchers.length;k<O;k++){var L=t.matchers[k];L.test(C,D)&&(N=L.converter(C.value))}g[t.attributePrefix+C.name]=N}var R=function getNodePrefix(t){return t.prefix}(c);return null!=R&&""!=R&&(g.__cnt++,g.__prefix=R),null!=g["#text"]&&(g.__text=g["#text"],g.__text instanceof Array&&(g.__text=g.__text.join("\n")),t.stripWhitespaces&&(g.__text=g.__text.trim()),delete g["#text"],"property"==t.arrayAccessForm&&delete g["#text_asArray"],g.__text=function checkFromXmlDateTimePaths(r,i,a){if(t.datetimeAccessFormPaths.length>0){var u=a.split(".#")[0];return checkInStdFiltersArrayForm(t.datetimeAccessFormPaths,r,i,u)?fromXmlDateTime(r):r}return r}(g.__text,M,d+"."+M)),null!=g["#cdata-section"]&&(g.__cdata=g["#cdata-section"],delete g["#cdata-section"],"property"==t.arrayAccessForm&&delete g["#cdata-section_asArray"]),0==g.__cnt&&"text"==t.emptyNodeForm?g="":1==g.__cnt&&null!=g.__text?g=g.__text:1!=g.__cnt||null==g.__cdata||t.keepCData?g.__cnt>1&&null!=g.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&""==g.__text||""==g.__text.trim())&&delete g.__text:g=g.__cdata,delete g.__cnt,!t.enableToStringFunc||null==g.__text&&null==g.__cdata||(g.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),g}if(c.nodeType==i||c.nodeType==a)return c.nodeValue}function startTag(r,i,a,u){var l="<"+(null!=r&&null!=r.__prefix?r.__prefix+":":"")+i;if(null!=a)for(var c=0;c<a.length;c++){var d=a[c],g=r[d];t.escapeMode&&(g=escapeXmlChars(g)),l+=" "+d.substr(t.attributePrefix.length)+"=",t.useDoubleQuotes?l+='"'+g+'"':l+="'"+g+"'"}return l+=u?"/>":">"}function endTag(t,r){return"</"+(null!=t.__prefix?t.__prefix+":":"")+r+">"}function jsonXmlSpecialElem(r,i){return!!("property"==t.arrayAccessForm&&function endsWith(t,r){return-1!==t.indexOf(r,t.length-r.length)}(i.toString(),"_asArray")||0==i.toString().indexOf(t.attributePrefix)||0==i.toString().indexOf("__")||r[i]instanceof Function)}function jsonXmlElemCount(t){var r=0;if(t instanceof Object)for(var i in t)jsonXmlSpecialElem(t,i)||r++;return r}function checkJsonObjPropertiesFilter(r,i,a){return 0==t.jsonPropertiesFilter.length||""==a||checkInStdFiltersArrayForm(t.jsonPropertiesFilter,r,i,a)}function parseJSONAttributes(r){var i=[];if(r instanceof Object)for(var a in r)-1==a.toString().indexOf("__")&&0==a.toString().indexOf(t.attributePrefix)&&i.push(a);return i}function parseJSONTextObject(r){var i="";return r instanceof Object?i+=function parseJSONTextAttrs(r){var i="";return null!=r.__cdata&&(i+="<![CDATA["+r.__cdata+"]]>"),null!=r.__text&&(t.escapeMode?i+=escapeXmlChars(r.__text):i+=r.__text),i}(r):null!=r&&(t.escapeMode?i+=escapeXmlChars(r):i+=r),i}function getJsonPropertyPath(t,r){return""===t?r:t+"."+r}function parseJSONArray(t,r,i,a){var u="";if(0==t.length)u+=startTag(t,r,i,!0);else for(var l=0;l<t.length;l++)u+=startTag(t[l],r,parseJSONAttributes(t[l]),!1),u+=parseJSONObject(t[l],getJsonPropertyPath(a,r)),u+=endTag(t[l],r);return u}function parseJSONObject(t,r){var i="";if(jsonXmlElemCount(t)>0)for(var a in t)if(!jsonXmlSpecialElem(t,a)&&(""==r||checkJsonObjPropertiesFilter(t,a,getJsonPropertyPath(r,a)))){var u=t[a],l=parseJSONAttributes(u);if(null==u||null==u)i+=startTag(u,a,l,!0);else if(u instanceof Object)if(u instanceof Array)i+=parseJSONArray(u,a,l,r);else if(u instanceof Date)i+=startTag(u,a,l,!1),i+=u.toISOString(),i+=endTag(u,a);else{jsonXmlElemCount(u)>0||null!=u.__text||null!=u.__cdata?(i+=startTag(u,a,l,!1),i+=parseJSONObject(u,getJsonPropertyPath(r,a)),i+=endTag(u,a)):i+=startTag(u,a,l,!0)}else i+=startTag(u,a,l,!1),i+=parseJSONTextObject(u),i+=endTag(u,a)}return i+=parseJSONTextObject(t)}this.parseXmlString=function(t){if(void 0===t)return null;var r;if(window.DOMParser){var i=new window.DOMParser;try{(r=i.parseFromString(t,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(r=null)}catch(t){r=null}}else 0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),(r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(t);return r},this.asArray=function(t){return void 0===t||null==t?[]:t instanceof Array?t:[t]},this.toXmlDateTime=function(t){return t instanceof Date?t.toISOString():"number"==typeof t?new Date(t).toISOString():null},this.asDateTime=function(t){return"string"==typeof t?fromXmlDateTime(t):t},this.xml2json=function(t){return parseDOMChildren(t)},this.xml_str2json=function(t){var r=this.parseXmlString(t);return null!=r?this.xml2json(r):null},this.json2xml_str=function(t){return parseJSONObject(t,"")},this.json2xml=function(t){var r=this.json2xml_str(t);return this.parseXmlString(r)},this.getVersion=function(){return"1.2.0"}}},"./index.js":
/*!******************!*\
    !*** ./index.js ***!
    \******************/
/*! exports provided: default, MediaPlayer, Protection, MetricsReporting, MediaPlayerFactory, Debug, supportsMediaSource */function indexJs(t,r,i){i.r(r);var a=i(/*! ./index_mediaplayerOnly */"./index_mediaplayerOnly.js");i.d(r,"MediaPlayer",(function(){return a.MediaPlayer}));var u=i(/*! ./src/streaming/utils/Capabilities */"./src/streaming/utils/Capabilities.js");i.d(r,"supportsMediaSource",(function(){return u.supportsMediaSource}));var l=i(/*! ./src/streaming/metrics/MetricsReporting */"./src/streaming/metrics/MetricsReporting.js");i.d(r,"MetricsReporting",(function(){return l.default}));var c=i(/*! ./src/streaming/protection/Protection */"./src/streaming/protection/Protection.js");i.d(r,"Protection",(function(){return c.default}));var d=i(/*! ./src/streaming/MediaPlayerFactory */"./src/streaming/MediaPlayerFactory.js");i.d(r,"MediaPlayerFactory",(function(){return d.default}));var g=i(/*! ./src/core/Debug */"./src/core/Debug.js");i.d(r,"Debug",(function(){return g.default})),dashjs.Protection=c.default,dashjs.MetricsReporting=l.default,dashjs.MediaPlayerFactory=d.default,dashjs.Debug=g.default,dashjs.supportsMediaSource=u.supportsMediaSource,r.default=dashjs},"./index_mediaplayerOnly.js":
/*!**********************************!*\
    !*** ./index_mediaplayerOnly.js ***!
    \**********************************/
/*! exports provided: default, MediaPlayer, FactoryMaker, Debug */function index_mediaplayerOnlyJs(t,r,i){i.r(r),function(t){var a=i(/*! ./src/streaming/MediaPlayer */"./src/streaming/MediaPlayer.js");i.d(r,"MediaPlayer",(function(){return a.default}));var u=i(/*! ./src/core/FactoryMaker */"./src/core/FactoryMaker.js");i.d(r,"FactoryMaker",(function(){return u.default}));var l=i(/*! ./src/core/Debug */"./src/core/Debug.js");i.d(r,"Debug",(function(){return l.default}));var c=i(/*! ./src/core/Version */"./src/core/Version.js");i(/*! es6-promise/auto */"./node_modules/es6-promise/auto.js");var d="undefined"!=typeof window&&window||t,g=d.dashjs;g||(g=d.dashjs={}),g.MediaPlayer=a.default,g.FactoryMaker=u.default,g.Debug=l.default,g.Version=Object(c.getVersionString)(),r.default=g}.call(this,i(/*! ./node_modules/webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/base64-js/index.js":
/*!*****************************************!*\
    !*** ./node_modules/base64-js/index.js ***!
    \*****************************************/
/*! no static exports found */function node_modulesBase64JsIndexJs(t,r,i){r.byteLength=function byteLength(t){var r=getLens(t),i=r[0],a=r[1];return 3*(i+a)/4-a},r.toByteArray=function toByteArray(t){for(var r,i=getLens(t),a=i[0],c=i[1],d=new l(function _byteLength(t,r,i){return 3*(r+i)/4-i}(0,a,c)),g=0,p=c>0?a-4:a,m=0;m<p;m+=4)r=u[t.charCodeAt(m)]<<18|u[t.charCodeAt(m+1)]<<12|u[t.charCodeAt(m+2)]<<6|u[t.charCodeAt(m+3)],d[g++]=r>>16&255,d[g++]=r>>8&255,d[g++]=255&r;2===c&&(r=u[t.charCodeAt(m)]<<2|u[t.charCodeAt(m+1)]>>4,d[g++]=255&r);1===c&&(r=u[t.charCodeAt(m)]<<10|u[t.charCodeAt(m+1)]<<4|u[t.charCodeAt(m+2)]>>2,d[g++]=r>>8&255,d[g++]=255&r);return d},r.fromByteArray=function fromByteArray(t){for(var r,i=t.length,u=i%3,l=[],c=16383,d=0,g=i-u;d<g;d+=c)l.push(encodeChunk(t,d,d+c>g?g:d+c));1===u?(r=t[i-1],l.push(a[r>>2]+a[r<<4&63]+"==")):2===u&&(r=(t[i-2]<<8)+t[i-1],l.push(a[r>>10]+a[r>>4&63]+a[r<<2&63]+"="));return l.join("")};for(var a=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,g=c.length;d<g;++d)a[d]=c[d],u[c.charCodeAt(d)]=d;function getLens(t){var r=t.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=r),[i,i===r?0:4-i%4]}function encodeChunk(t,r,i){for(var u,l,c=[],d=r;d<i;d+=3)u=(t[d]<<16&16711680)+(t[d+1]<<8&65280)+(255&t[d+2]),c.push(a[(l=u)>>18&63]+a[l>>12&63]+a[l>>6&63]+a[63&l]);return c.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},"./node_modules/codem-isoboxer/dist/iso_boxer.js":
/*!*******************************************************!*\
    !*** ./node_modules/codem-isoboxer/dist/iso_boxer.js ***!
    \*******************************************************/
/*! no static exports found */function node_modulesCodemIsoboxerDistIso_boxerJs(t,r,i){/*! codem-isoboxer v0.3.6 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */var a={parseBuffer:function(t){return new u(t).parse()},addBoxProcessor:function(t,r){"string"==typeof t&&"function"==typeof r&&(l.prototype._boxProcessors[t]=r)},createFile:function(){return new u},createBox:function(t,r,i){var a=l.create(t);return r&&r.append(a,i),a},createFullBox:function(t,r,i){var u=a.createBox(t,r,i);return u.version=0,u.flags=0,u},Utils:{}};a.Utils.dataViewToString=function(t,r){var i=r||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(i).decode(t);var a=[],u=0;if("utf-8"===i)for(;u<t.byteLength;){var l=t.getUint8(u++);l<128||(l<224?(l=(31&l)<<6,l|=63&t.getUint8(u++)):l<240?(l=(15&l)<<12,l|=(63&t.getUint8(u++))<<6,l|=63&t.getUint8(u++)):(l=(7&l)<<18,l|=(63&t.getUint8(u++))<<12,l|=(63&t.getUint8(u++))<<6,l|=63&t.getUint8(u++))),a.push(String.fromCharCode(l))}else for(;u<t.byteLength;)a.push(String.fromCharCode(t.getUint8(u++)));return a.join("")},a.Utils.utf8ToByteArray=function(t){var r,i;if("undefined"!=typeof TextEncoder)r=(new TextEncoder).encode(t);else for(r=[],i=0;i<t.length;++i){var a=t.charCodeAt(i);a<128?r.push(a):a<2048?(r.push(192|a>>6),r.push(128|63&a)):a<65536?(r.push(224|a>>12),r.push(128|63&a>>6),r.push(128|63&a)):(r.push(240|a>>18),r.push(128|63&a>>12),r.push(128|63&a>>6),r.push(128|63&a))}return r},a.Utils.appendBox=function(t,r,i){if(r._offset=t._cursor.offset,r._root=t._root?t._root:t,r._raw=t._raw,r._parent=t,-1!==i)if(null!=i){var a,u=-1;if("number"==typeof i)u=i;else{if("string"==typeof i)a=i;else{if("object"!=typeof i||!i.type)return void t.boxes.push(r);a=i.type}for(var l=0;l<t.boxes.length;l++)if(a===t.boxes[l].type){u=l+1;break}}t.boxes.splice(u,0,r)}else t.boxes.push(r)},r.parseBuffer=a.parseBuffer,r.addBoxProcessor=a.addBoxProcessor,r.createFile=a.createFile,r.createBox=a.createBox,r.createFullBox=a.createFullBox,r.Utils=a.Utils,a.Cursor=function(t){this.offset=void 0===t?0:t};var u=function ISOFile(t){this._cursor=new a.Cursor,this.boxes=[],t&&(this._raw=new DataView(t))};u.prototype.fetch=function(t){var r=this.fetchAll(t,!0);return r.length?r[0]:null},u.prototype.fetchAll=function(t,r){var i=[];return u._sweep.call(this,t,i,r),i},u.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var t=l.parse(this);if(void 0===t.type)break;this.boxes.push(t)}return this},u._sweep=function(t,r,i){for(var a in this.type&&this.type==t&&r.push(this),this.boxes){if(r.length&&i)return;u._sweep.call(this.boxes[a],t,r,i)}},u.prototype.write=function(){var t,r=0;for(t=0;t<this.boxes.length;t++)r+=this.boxes[t].getLength(!1);var i=new Uint8Array(r);for(this._rawo=new DataView(i.buffer),this.bytes=i,this._cursor.offset=0,t=0;t<this.boxes.length;t++)this.boxes[t].write();return i.buffer},u.prototype.append=function(t,r){a.Utils.appendBox(this,t,r)};var l=function ISOBox(){this._cursor=new a.Cursor};l.parse=function(t){var r=new l;return r._offset=t._cursor.offset,r._root=t._root?t._root:t,r._raw=t._raw,r._parent=t,r._parseBox(),t._cursor.offset=r._raw.byteOffset+r._raw.byteLength,r},l.create=function(t){var r=new l;return r.type=t,r.boxes=[],r},l.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],l.prototype._boxProcessors={},l.prototype._procField=function(t,r,i){this._parsing?this[t]=this._readField(r,i):this._writeField(r,i,this[t])},l.prototype._procFieldArray=function(t,r,i,a){var u;if(this._parsing)for(this[t]=[],u=0;u<r;u++)this[t][u]=this._readField(i,a);else for(u=0;u<this[t].length;u++)this._writeField(i,a,this[t][u])},l.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},l.prototype._procEntries=function(t,r,i){var a;if(this._parsing)for(this[t]=[],a=0;a<r;a++)this[t].push({}),i.call(this,this[t][a]);else for(a=0;a<r;a++)i.call(this,this[t][a])},l.prototype._procSubEntries=function(t,r,i,a){var u;if(this._parsing)for(t[r]=[],u=0;u<i;u++)t[r].push({}),a.call(this,t[r][u]);else for(u=0;u<i;u++)a.call(this,t[r][u])},l.prototype._procEntryField=function(t,r,i,a){this._parsing?t[r]=this._readField(i,a):this._writeField(i,a,t[r])},l.prototype._procSubBoxes=function(t,r){var i;if(this._parsing)for(this[t]=[],i=0;i<r;i++)this[t].push(l.parse(this));else for(i=0;i<r;i++)this._rawo?this[t][i].write():this.size+=this[t][i].getLength()},l.prototype._readField=function(t,r){switch(t){case"uint":return this._readUint(r);case"int":return this._readInt(r);case"template":return this._readTemplate(r);case"string":return-1===r?this._readTerminatedString():this._readString(r);case"data":return this._readData(r);case"utf8":return this._readUTF8String();default:return-1}},l.prototype._readInt=function(t){var r=null,i=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:r=this._raw.getInt8(i);break;case 16:r=this._raw.getInt16(i);break;case 32:r=this._raw.getInt32(i);break;case 64:var a=this._raw.getInt32(i),u=this._raw.getInt32(i+4);r=a*Math.pow(2,32)+u}return this._cursor.offset+=t>>3,r},l.prototype._readUint=function(t){var r,i,a=null,u=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:a=this._raw.getUint8(u);break;case 16:a=this._raw.getUint16(u);break;case 24:a=((r=this._raw.getUint16(u))<<8)+(i=this._raw.getUint8(u+2));break;case 32:a=this._raw.getUint32(u);break;case 64:r=this._raw.getUint32(u),i=this._raw.getUint32(u+4),a=r*Math.pow(2,32)+i}return this._cursor.offset+=t>>3,a},l.prototype._readString=function(t){for(var r="",i=0;i<t;i++){var a=this._readUint(8);r+=String.fromCharCode(a)}return r},l.prototype._readTemplate=function(t){return this._readUint(t/2)+this._readUint(t/2)/Math.pow(2,t/2)},l.prototype._readTerminatedString=function(){for(var t="";this._cursor.offset-this._offset<this._raw.byteLength;){var r=this._readUint(8);if(0===r)break;t+=String.fromCharCode(r)}return t},l.prototype._readData=function(t){var r=t>0?t:this._raw.byteLength-(this._cursor.offset-this._offset);if(r>0){var i=new Uint8Array(this._raw.buffer,this._cursor.offset,r);return this._cursor.offset+=r,i}return null},l.prototype._readUTF8String=function(){var t=this._raw.byteLength-(this._cursor.offset-this._offset),r=null;return t>0&&(r=new DataView(this._raw.buffer,this._cursor.offset,t),this._cursor.offset+=t),r?a.Utils.dataViewToString(r):r},l.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},l.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},l.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(l.parse(this))},l.prototype.append=function(t,r){a.Utils.appendBox(this,t,r)},l.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.size+=this.boxes[t].getLength();return this._data&&this._writeData(this._data),this.size},l.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.boxes[t].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},l.prototype._writeInt=function(t,r){if(this._rawo){var i=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setInt8(i,r);break;case 16:this._rawo.setInt16(i,r);break;case 32:this._rawo.setInt32(i,r);break;case 64:var a=Math.floor(r/Math.pow(2,32)),u=r-a*Math.pow(2,32);this._rawo.setUint32(i,a),this._rawo.setUint32(i+4,u)}this._cursor.offset+=t>>3}else this.size+=t>>3},l.prototype._writeUint=function(t,r){if(this._rawo){var i,a,u=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setUint8(u,r);break;case 16:this._rawo.setUint16(u,r);break;case 24:i=(16776960&r)>>8,a=255&r,this._rawo.setUint16(u,i),this._rawo.setUint8(u+2,a);break;case 32:this._rawo.setUint32(u,r);break;case 64:a=r-(i=Math.floor(r/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(u,i),this._rawo.setUint32(u+4,a)}this._cursor.offset+=t>>3}else this.size+=t>>3},l.prototype._writeString=function(t,r){for(var i=0;i<t;i++)this._writeUint(8,r.charCodeAt(i))},l.prototype._writeTerminatedString=function(t){if(0!==t.length){for(var r=0;r<t.length;r++)this._writeUint(8,t.charCodeAt(r));this._writeUint(8,0)}},l.prototype._writeTemplate=function(t,r){var i=Math.floor(r),a=(r-i)*Math.pow(2,t/2);this._writeUint(t/2,i),this._writeUint(t/2,a)},l.prototype._writeData=function(t){if(t)if(this._rawo){if(t instanceof Array){for(var r=this._cursor.offset-this._rawo.byteOffset,i=0;i<t.length;i++)this._rawo.setInt8(r+i,t[i]);this._cursor.offset+=t.length}t instanceof Uint8Array&&(this._root.bytes.set(t,this._cursor.offset),this._cursor.offset+=t.length)}else this.size+=t.length},l.prototype._writeUTF8String=function(t){var r=a.Utils.utf8ToByteArray(t);if(this._rawo)for(var i=new DataView(this._rawo.buffer,this._cursor.offset,r.length),u=0;u<r.length;u++)i.setUint8(u,r[u]);else this.size+=r.length},l.prototype._writeField=function(t,r,i){switch(t){case"uint":this._writeUint(r,i);break;case"int":this._writeInt(r,i);break;case"template":this._writeTemplate(r,i);break;case"string":-1==r?this._writeTerminatedString(i):this._writeString(r,i);break;case"data":this._writeData(i);break;case"utf8":this._writeUTF8String(i)}},l.prototype._boxProcessors.avc1=l.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},l.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},l.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(t){this._procEntryField(t,"segment_duration","uint",1===this.version?64:32),this._procEntryField(t,"media_time","int",1===this.version?64:32),this._procEntryField(t,"media_rate_integer","int",16),this._procEntryField(t,"media_rate_fraction","int",16)}))},l.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},l.prototype._boxProcessors.free=l.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},l.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},l.prototype._boxProcessors.ftyp=l.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var t=-1;this._parsing&&(t=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",t,"string",4)},l.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},l.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},l.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},l.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},l.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},l.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},l.prototype._boxProcessors.mp4a=l.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},l.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},l.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},l.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},l.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},l.prototype._boxProcessors.sdtp=function(){this._procFullBox();var t=-1;this._parsing&&(t=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",t,"uint",8)},l.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(t){this._parsing||(t.reference=(1&t.reference_type)<<31,t.reference|=2147483647&t.referenced_size,t.sap=(1&t.starts_with_SAP)<<31,t.sap|=(3&t.SAP_type)<<28,t.sap|=268435455&t.SAP_delta_time),this._procEntryField(t,"reference","uint",32),this._procEntryField(t,"subsegment_duration","uint",32),this._procEntryField(t,"sap","uint",32),this._parsing&&(t.reference_type=t.reference>>31&1,t.referenced_size=2147483647&t.reference,t.starts_with_SAP=t.sap>>31&1,t.SAP_type=t.sap>>28&7,t.SAP_delta_time=268435455&t.sap)}))},l.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},l.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(t){this._procEntryField(t,"ranges_count","uint",32),this._procSubEntries(t,"ranges",t.ranges_count,(function(t){this._procEntryField(t,"level","uint",8),this._procEntryField(t,"range_size","uint",24)}))}))},l.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},l.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(t){this._procEntryField(t,"sample_delta","uint",32),this._procEntryField(t,"subsample_count","uint",16),this._procSubEntries(t,"subsamples",t.subsample_count,(function(t){this._procEntryField(t,"subsample_size","uint",1===this.version?32:16),this._procEntryField(t,"subsample_priority","uint",8),this._procEntryField(t,"discardable","uint",8),this._procEntryField(t,"codec_specific_parameters","uint",32)}))}))},l.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},l.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},l.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},l.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(t){this._procEntryField(t,"time","uint",1===this.version?64:32),this._procEntryField(t,"moof_offset","uint",1===this.version?64:32),this._procEntryField(t,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(t,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(t,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},l.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},l.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},l.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(t){256&this.flags&&this._procEntryField(t,"sample_duration","uint",32),512&this.flags&&this._procEntryField(t,"sample_size","uint",32),1024&this.flags&&this._procEntryField(t,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(t,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},l.prototype._boxProcessors["url "]=l.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},l.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},l.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},l.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},l.prototype._boxProcessors.vtte=function(){}},"./node_modules/core-util-is/lib/util.js":
/*!***********************************************!*\
    !*** ./node_modules/core-util-is/lib/util.js ***!
    \***********************************************/
/*! no static exports found */function node_modulesCoreUtilIsLibUtilJs(t,r,i){(function(t){function objectToString(t){return Object.prototype.toString.call(t)}r.isArray=function isArray(t){return Array.isArray?Array.isArray(t):"[object Array]"===objectToString(t)},r.isBoolean=function isBoolean(t){return"boolean"==typeof t},r.isNull=function isNull(t){return null===t},r.isNullOrUndefined=function isNullOrUndefined(t){return null==t},r.isNumber=function isNumber(t){return"number"==typeof t},r.isString=function isString(t){return"string"==typeof t},r.isSymbol=function isSymbol(t){return"symbol"==typeof t},r.isUndefined=function isUndefined(t){return void 0===t},r.isRegExp=function isRegExp(t){return"[object RegExp]"===objectToString(t)},r.isObject=function isObject(t){return"object"==typeof t&&null!==t},r.isDate=function isDate(t){return"[object Date]"===objectToString(t)},r.isError=function isError(t){return"[object Error]"===objectToString(t)||t instanceof Error},r.isFunction=function isFunction(t){return"function"==typeof t},r.isPrimitive=function isPrimitive(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},r.isBuffer=t.isBuffer}).call(this,i(/*! ./../../node-libs-browser/node_modules/buffer/index.js */"./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/es6-promise/auto.js":
/*!******************************************!*\
    !*** ./node_modules/es6-promise/auto.js ***!
    \******************************************/
/*! no static exports found */function node_modulesEs6PromiseAutoJs(t,r,i){t.exports=i(/*! ./ */"./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":
/*!******************************************************!*\
    !*** ./node_modules/es6-promise/dist/es6-promise.js ***!
    \******************************************************/
/*! no static exports found */function node_modulesEs6PromiseDistEs6PromiseJs(t,r,i){(function(r,i){
/*!
   * @overview es6-promise - a tiny implementation of Promises/A+.
   * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
   * @license   Licensed under MIT license
   *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
   * @version   v4.2.8+1e68dce6
   */
var a;a=function(){function isFunction(t){return"function"==typeof t}var t=Array.isArray?Array.isArray:function _isArray(t){return"[object Array]"===Object.prototype.toString.call(t)},a=0,u=void 0,l=void 0,c=function asap(t,r){b[a]=t,b[a+1]=r,2===(a+=2)&&(l?l(flush):M())},d="undefined"!=typeof window?window:void 0,g=d||{},p=g.MutationObserver||g.WebKitMutationObserver,m="undefined"==typeof self&&void 0!==r&&"[object process]"==={}.toString.call(r),v="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function useSetTimeout(){var t=setTimeout;return function(){return t(flush,1)}}var b=new Array(1e3);function flush(){for(var t=0;t<a;t+=2)(0,b[t])(b[t+1]),b[t]=void 0,b[t+1]=void 0;a=0}var M=void 0;function then(t,r){var i=this,a=new this.constructor(noop);void 0===a[S]&&makePromise(a);var u=i._state;if(u){var l=arguments[u-1];c((function(){return invokeCallback(u,a,l,i._result)}))}else subscribe(i,a,t,r);return a}function resolve$1(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var r=new this(noop);return resolve(r,t),r}M=m?function useNextTick(){return function(){return r.nextTick(flush)}}():p?function useMutationObserver(){var t=0,r=new p(flush),i=document.createTextNode("");return r.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}():v?function useMessageChannel(){var t=new MessageChannel;return t.port1.onmessage=flush,function(){return t.port2.postMessage(0)}}():void 0===d?function attemptVertx(){try{var t=Function("return this")().require("vertx");return u=t.runOnLoop||t.runOnContext,function useVertxTimer(){return void 0!==u?function(){u(flush)}:useSetTimeout()}()}catch(t){return useSetTimeout()}}():useSetTimeout();var S=Math.random().toString(36).substring(2);function noop(){}var E=void 0;function handleMaybeThenable(t,r,i){r.constructor===t.constructor&&i===then&&r.constructor.resolve===resolve$1?function handleOwnThenable(t,r){1===r._state?fulfill(t,r._result):2===r._state?reject(t,r._result):subscribe(r,void 0,(function(r){return resolve(t,r)}),(function(r){return reject(t,r)}))}(t,r):void 0===i?fulfill(t,r):isFunction(i)?function handleForeignThenable(t,r,i){c((function(t){var a=!1,u=function tryThen(t,r,i,a){try{t.call(r,i,a)}catch(t){return t}}(i,r,(function(i){a||(a=!0,r!==i?resolve(t,i):fulfill(t,i))}),(function(r){a||(a=!0,reject(t,r))}),t._label);!a&&u&&(a=!0,reject(t,u))}),t)}(t,r,i):fulfill(t,r)}function resolve(t,r){if(t===r)reject(t,function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}());else if(function objectOrFunction(t){var r=typeof t;return null!==t&&("object"===r||"function"===r)}(r)){var i=void 0;try{i=r.then}catch(r){return void reject(t,r)}handleMaybeThenable(t,r,i)}else fulfill(t,r)}function publishRejection(t){t._onerror&&t._onerror(t._result),publish(t)}function fulfill(t,r){t._state===E&&(t._result=r,t._state=1,0!==t._subscribers.length&&c(publish,t))}function reject(t,r){t._state===E&&(t._state=2,t._result=r,c(publishRejection,t))}function subscribe(t,r,i,a){var u=t._subscribers,l=u.length;t._onerror=null,u[l]=r,u[l+1]=i,u[l+2]=a,0===l&&t._state&&c(publish,t)}function publish(t){var r=t._subscribers,i=t._state;if(0!==r.length){for(var a=void 0,u=void 0,l=t._result,c=0;c<r.length;c+=3)a=r[c],u=r[c+i],a?invokeCallback(i,a,u,l):u(l);t._subscribers.length=0}}function invokeCallback(t,r,i,a){var u=isFunction(i),l=void 0,c=void 0,d=!0;if(u){try{l=i(a)}catch(t){d=!1,c=t}if(r===l)return void reject(r,function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}())}else l=a;r._state!==E||(u&&d?resolve(r,l):!1===d?reject(r,c):1===t?fulfill(r,l):2===t&&reject(r,l))}var I=0;function makePromise(t){t[S]=I++,t._state=void 0,t._result=void 0,t._subscribers=[]}var D=function(){function Enumerator(r,i){this._instanceConstructor=r,this.promise=new r(noop),this.promise[S]||makePromise(this.promise),t(i)?(this.length=i.length,this._remaining=i.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(i),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,function validationError(){return new Error("Array Methods must be provided an Array")}())}return Enumerator.prototype._enumerate=function _enumerate(t){for(var r=0;this._state===E&&r<t.length;r++)this._eachEntry(t[r],r)},Enumerator.prototype._eachEntry=function _eachEntry(t,r){var i=this._instanceConstructor,a=i.resolve;if(a===resolve$1){var u=void 0,l=void 0,c=!1;try{u=t.then}catch(t){c=!0,l=t}if(u===then&&t._state!==E)this._settledAt(t._state,r,t._result);else if("function"!=typeof u)this._remaining--,this._result[r]=t;else if(i===A){var d=new i(noop);c?reject(d,l):handleMaybeThenable(d,t,u),this._willSettleAt(d,r)}else this._willSettleAt(new i((function(r){return r(t)})),r)}else this._willSettleAt(a(t),r)},Enumerator.prototype._settledAt=function _settledAt(t,r,i){var a=this.promise;a._state===E&&(this._remaining--,2===t?reject(a,i):this._result[r]=i),0===this._remaining&&fulfill(a,this._result)},Enumerator.prototype._willSettleAt=function _willSettleAt(t,r){var i=this;subscribe(t,void 0,(function(t){return i._settledAt(1,r,t)}),(function(t){return i._settledAt(2,r,t)}))},Enumerator}(),A=function(){function Promise(t){this[S]=function nextId(){return I++}(),this._result=this._state=void 0,this._subscribers=[],noop!==t&&("function"!=typeof t&&function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Promise?function initializePromise(t,r){try{r((function resolvePromise(r){resolve(t,r)}),(function rejectPromise(r){reject(t,r)}))}catch(r){reject(t,r)}}(this,t):function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Promise.prototype.catch=function _catch(t){return this.then(null,t)},Promise.prototype.finally=function _finally(t){var r=this,i=r.constructor;return isFunction(t)?r.then((function(r){return i.resolve(t()).then((function(){return r}))}),(function(r){return i.resolve(t()).then((function(){throw r}))})):r.then(t,t)},Promise}();return A.prototype.then=then,A.all=function all(t){return new D(this,t).promise},A.race=function race(r){var i=this;return t(r)?new i((function(t,a){for(var u=r.length,l=0;l<u;l++)i.resolve(r[l]).then(t,a)})):new i((function(t,r){return r(new TypeError("You must pass an array to race."))}))},A.resolve=resolve$1,A.reject=function reject$1(t){var r=new this(noop);return reject(r,t),r},A._setScheduler=function setScheduler(t){l=t},A._setAsap=function setAsap(t){c=t},A._asap=c,A.polyfill=function polyfill(){var t=void 0;if(void 0!==i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;if(r){var a=null;try{a=Object.prototype.toString.call(r.resolve())}catch(t){}if("[object Promise]"===a&&!r.cast)return}t.Promise=A},A.Promise=A,A},t.exports=a()}).call(this,i(/*! ./../../process/browser.js */"./node_modules/process/browser.js"),i(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/fast-deep-equal/index.js":
/*!***********************************************!*\
    !*** ./node_modules/fast-deep-equal/index.js ***!
    \***********************************************/
/*! no static exports found */function node_modulesFastDeepEqualIndexJs(t,r,i){var a=Array.isArray,u=Object.keys,l=Object.prototype.hasOwnProperty;t.exports=function equal(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var i,c,d,g=a(t),p=a(r);if(g&&p){if((c=t.length)!=r.length)return!1;for(i=c;0!=i--;)if(!equal(t[i],r[i]))return!1;return!0}if(g!=p)return!1;var m=t instanceof Date,v=r instanceof Date;if(m!=v)return!1;if(m&&v)return t.getTime()==r.getTime();var b=t instanceof RegExp,M=r instanceof RegExp;if(b!=M)return!1;if(b&&M)return t.toString()==r.toString();var S=u(t);if((c=S.length)!==u(r).length)return!1;for(i=c;0!=i--;)if(!l.call(r,S[i]))return!1;for(i=c;0!=i--;)if(!equal(t[d=S[i]],r[d]))return!1;return!0}return t!=t&&r!=r}},"./node_modules/ieee754/index.js":
/*!***************************************!*\
    !*** ./node_modules/ieee754/index.js ***!
    \***************************************/
/*! no static exports found */function node_modulesIeee754IndexJs(t,r){r.read=function(t,r,i,a,u){var l,c,d=8*u-a-1,g=(1<<d)-1,p=g>>1,m=-7,v=i?u-1:0,b=i?-1:1,M=t[r+v];for(v+=b,l=M&(1<<-m)-1,M>>=-m,m+=d;m>0;l=256*l+t[r+v],v+=b,m-=8);for(c=l&(1<<-m)-1,l>>=-m,m+=a;m>0;c=256*c+t[r+v],v+=b,m-=8);if(0===l)l=1-p;else{if(l===g)return c?NaN:1/0*(M?-1:1);c+=Math.pow(2,a),l-=p}return(M?-1:1)*c*Math.pow(2,l-a)},r.write=function(t,r,i,a,u,l){var c,d,g,p=8*l-u-1,m=(1<<p)-1,v=m>>1,b=23===u?Math.pow(2,-24)-Math.pow(2,-77):0,M=a?0:l-1,S=a?1:-1,E=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(d=isNaN(r)?1:0,c=m):(c=Math.floor(Math.log(r)/Math.LN2),r*(g=Math.pow(2,-c))<1&&(c--,g*=2),(r+=c+v>=1?b/g:b*Math.pow(2,1-v))*g>=2&&(c++,g/=2),c+v>=m?(d=0,c=m):c+v>=1?(d=(r*g-1)*Math.pow(2,u),c+=v):(d=r*Math.pow(2,v-1)*Math.pow(2,u),c=0));u>=8;t[i+M]=255&d,M+=S,d/=256,u-=8);for(c=c<<u|d,p+=u;p>0;t[i+M]=255&c,M+=S,c/=256,p-=8);t[i+M-S]|=128*E}},"./node_modules/imsc/src/main/js/doc.js":
/*!**********************************************!*\
    !*** ./node_modules/imsc/src/main/js/doc.js ***!
    \**********************************************/
/*! no static exports found */function node_modulesImscSrcMainJsDocJs(t,r,i){!function(t,r,i,a,u){function resolveTiming(t,r,i,a){var u=a&&"seq"===a.timeContainer,l=0;a&&(l=u&&i?i.end:a.begin),r.begin=r.explicit_begin?r.explicit_begin+l:l;var c=r.begin,d=null;for(var g in r.sets)resolveTiming(t,r.sets[g],d,r),c="seq"===r.timeContainer?r.sets[g].end:Math.max(c,r.sets[g].end),d=r.sets[g];if("contents"in r)for(var p in r.contents)resolveTiming(t,r.contents[p],d,r),c="seq"===r.timeContainer?r.contents[p].end:Math.max(c,r.contents[p].end),d=r.contents[p];else c=u?r.begin:Number.POSITIVE_INFINITY;null!==r.explicit_end&&null!==r.explicit_dur?r.end=Math.min(r.begin+r.explicit_dur,l+r.explicit_end):null===r.explicit_end&&null!==r.explicit_dur?r.end=r.begin+r.explicit_dur:null!==r.explicit_end&&null===r.explicit_dur?r.end=l+r.explicit_end:r.end=c,delete r.explicit_begin,delete r.explicit_dur,delete r.explicit_end,t._registerEvent(r)}function ForeignElement(t){this.node=t}function TT(){this.events=[],this.head=null,this.body=null}function Head(){this.styling=null,this.layout=null}function Styling(){this.styles={}}function Style(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function Layout(){this.regions={}}function ContentElement(t){this.kind=t}function IdentifiedElement(t){this.id=t}function LayoutElement(t){this.regionID=t}function StyledElement(t){this.styleAttrs=t}function AnimatedElement(t){this.sets=t}function ContainerElement(t){this.contents=t}function TimedElement(t,r,i){this.explicit_begin=t,this.explicit_end=r,this.explicit_dur=i}function Body(){ContentElement.call(this,"body")}function Div(){ContentElement.call(this,"div")}function P(){ContentElement.call(this,"p")}function Span(){ContentElement.call(this,"span")}function AnonymousSpan(){ContentElement.call(this,"span")}function Br(){ContentElement.call(this,"br")}function Region(){}function Set(){}function elementGetXMLID(t){return t&&"xml:id"in t.attributes&&t.attributes["xml:id"].value||null}function elementGetStyleRefs(t){return t&&"style"in t.attributes?t.attributes.style.value.split(" "):[]}function elementGetStyles(t,r){var i={};if(null!==t)for(var u in t.attributes){var l=t.attributes[u].uri+" "+t.attributes[u].local,c=a.byQName[l];if(void 0!==c){var d=c.parse(t.attributes[u].value);null!==d?(i[l]=d,c===a.byName.zIndex&&reportWarning(r,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):reportError(r,"Cannot parse styling attribute "+l+" --\x3e "+t.attributes[u].value)}}return i}function findAttribute(t,r,i){for(var a in t.attributes)if(t.attributes[a].uri===r&&t.attributes[a].local===i)return t.attributes[a].value;return null}function parseTimeExpression(t,r,i){var a,u=null;return null!==(a=/^(\d+(?:\.\d+)?)f$/.exec(i))?null!==r&&(u=parseFloat(a[1])/r):null!==(a=/^(\d+(?:\.\d+)?)t$/.exec(i))?null!==t&&(u=parseFloat(a[1])/t):null!==(a=/^(\d+(?:\.\d+)?)ms$/.exec(i))?u=parseFloat(a[1])/1e3:null!==(a=/^(\d+(?:\.\d+)?)s$/.exec(i))?u=parseFloat(a[1]):null!==(a=/^(\d+(?:\.\d+)?)h$/.exec(i))?u=3600*parseFloat(a[1]):null!==(a=/^(\d+(?:\.\d+)?)m$/.exec(i))?u=60*parseFloat(a[1]):null!==(a=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(i))?u=3600*parseInt(a[1])+60*parseInt(a[2])+parseFloat(a[3]):null!==(a=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(i))&&null!==r&&(u=3600*parseInt(a[1])+60*parseInt(a[2])+parseInt(a[3])+(null===a[4]?0:parseInt(a[4])/r)),u}function mergeChainedStyles(t,r,i){for(;r.styleRefs.length>0;){var a=r.styleRefs.pop();a in t.styles?(mergeChainedStyles(t,t.styles[a],i),mergeStylesIfNotPresent(t.styles[a].styleAttrs,r.styleAttrs)):reportError(i,"Non-existant style id referenced")}}function mergeReferencedStyles(t,r,i,a){for(var u=r.length-1;u>=0;u--){var l=r[u];l in t.styles?mergeStylesIfNotPresent(t.styles[l].styleAttrs,i):reportError(a,"Non-existant style id referenced")}}function mergeStylesIfNotPresent(t,r){for(var i in t)i in r||(r[i]=t[i])}function reportWarning(t,r){if(t&&t.warn&&t.warn(r))throw r}function reportError(t,r){if(t&&t.error&&t.error(r))throw r}function reportFatal(t,r){throw t&&t.fatal&&t.fatal(r),r}function indexOf(t,r){for(var i,a=0,u=t.length-1;a<=u;){var l=t[i=Math.floor((a+u)/2)];if(l<r)a=i+1;else{if(!(l>r))return{found:!0,index:i};u=i-1}}return{found:!1,index:a}}t.fromXML=function(t,a,u){var l=r.parser(!0,{xmlns:!0}),c=[],d=[],g=[],p=0,m=null;l.onclosetag=function(t){if(c[0]instanceof Styling)for(var r in c[0].styles)mergeChainedStyles(c[0],c[0].styles[r],a);else if(c[0]instanceof P||c[0]instanceof Span){if(c[0].contents.length>1){var l,m=[c[0].contents[0]];for(l=1;l<c[0].contents.length;l++)c[0].contents[l]instanceof AnonymousSpan&&m[m.length-1]instanceof AnonymousSpan?m[m.length-1].text+=c[0].contents[l].text:m.push(c[0].contents[l]);c[0].contents=m}c[0]instanceof Span&&1===c[0].contents.length&&c[0].contents[0]instanceof AnonymousSpan&&(c[0].text=c[0].contents[0].text,delete c[0].contents)}else c[0]instanceof ForeignElement&&(c[0].node.uri===i.ns_tt&&"metadata"===c[0].node.local?p--:p>0&&u&&"onCloseTag"in u&&u.onCloseTag());g.shift(),d.shift(),c.shift()},l.ontext=function(t){if(void 0===c[0]);else if(c[0]instanceof Span||c[0]instanceof P){var r=new AnonymousSpan;r.initFromText(m,c[0],t,g[0],a),c[0].contents.push(r)}else c[0]instanceof ForeignElement&&p>0&&u&&"onText"in u&&u.onText(t)},l.onopentag=function(t){var r=t.attributes["xml:space"];r?g.unshift(r.value):0===g.length?g.unshift("default"):g.unshift(g[0]);var l=t.attributes["xml:lang"];if(l?d.unshift(l.value):0===d.length?d.unshift(""):d.unshift(d[0]),t.uri===i.ns_tt)if("tt"===t.local)null!==m&&reportFatal(a,"Two <tt> elements at ("+this.line+","+this.column+")"),(m=new TT).initFromNode(t,a),c.unshift(m);else if("head"===t.local)c[0]instanceof TT||reportFatal(a,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==m.head&&reportFatal("Second <head> element at ("+this.line+","+this.column+")"),m.head=new Head,c.unshift(m.head);else if("styling"===t.local)c[0]instanceof Head||reportFatal(a,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==m.head.styling&&reportFatal("Second <styling> element at ("+this.line+","+this.column+")"),m.head.styling=new Styling,c.unshift(m.head.styling);else if("style"===t.local){var v;c[0]instanceof Styling?((v=new Style).initFromNode(t,a),v.id?m.head.styling.styles[v.id]=v:reportError(a,"<style> element missing @id attribute"),c.unshift(v)):c[0]instanceof Region?((v=new Style).initFromNode(t,a),mergeStylesIfNotPresent(v.styleAttrs,c[0].styleAttrs),c.unshift(v)):reportFatal(a,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===t.local)c[0]instanceof Head||reportFatal(a,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==m.head.layout&&reportFatal(a,"Second <layout> element at "+this.line+","+this.column+")"),m.head.layout=new Layout,c.unshift(m.head.layout);else if("region"===t.local){c[0]instanceof Layout||reportFatal(a,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var b=new Region;b.initFromNode(m,t,a),!b.id||b.id in m.head.layout.regions?reportError(a,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):m.head.layout.regions[b.id]=b,c.unshift(b)}else if("body"===t.local){c[0]instanceof TT||reportFatal(a,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==m.body&&reportFatal(a,"Second <body> element at "+this.line+","+this.column+")");var M=new Body;M.initFromNode(m,t,a),m.body=M,c.unshift(M)}else if("div"===t.local){c[0]instanceof Div||c[0]instanceof Body||reportFatal(a,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var S=new Div;S.initFromNode(m,c[0],t,a),c[0].contents.push(S),c.unshift(S)}else if("p"===t.local){c[0]instanceof Div||reportFatal(a,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var E=new P;E.initFromNode(m,c[0],t,a),c[0].contents.push(E),c.unshift(E)}else if("span"===t.local){c[0]instanceof Span||c[0]instanceof P||reportFatal(a,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var I=new Span;I.initFromNode(m,c[0],t,g[0],a),c[0].contents.push(I),c.unshift(I)}else if("br"===t.local){c[0]instanceof Span||c[0]instanceof P||reportFatal(a,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var D=new Br;D.initFromNode(m,c[0],t,a),c[0].contents.push(D),c.unshift(D)}else if("set"===t.local){c[0]instanceof Span||c[0]instanceof P||c[0]instanceof Div||c[0]instanceof Body||c[0]instanceof Region||c[0]instanceof Br||reportFatal(a,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var A=new Set;A.initFromNode(m,c[0],t,a),c[0].sets.push(A),c.unshift(A)}else c.unshift(new ForeignElement(t));else c.unshift(new ForeignElement(t));if(c[0]instanceof ForeignElement)if(t.uri===i.ns_tt&&"metadata"===t.local)p++;else if(p>0&&u&&"onOpenTag"in u){var C=[];for(var N in t.attributes)C[t.attributes[N].uri+" "+t.attributes[N].local]={uri:t.attributes[N].uri,local:t.attributes[N].local,value:t.attributes[N].value};u.onOpenTag(t.uri,t.local,C)}},l.write(t).close(),null!==m.head?delete m.head.styling:m.head=new Head,null===m.head.layout&&(m.head.layout=new Layout);var v=!1;for(var b in m.head.layout.regions){v=!0;break}if(!v){var M=Region.prototype.createDefaultRegion();m.head.layout.regions[M.id]=M}for(var S in m.head.layout.regions)resolveTiming(m,m.head.layout.regions[S],null,null);return m.body&&resolveTiming(m,m.body,null,null),m},TT.prototype.initFromNode=function(t,r){this.cellResolution=function extractCellResolution(t,r){var a=findAttribute(t,i.ns_ttp,"cellResolution"),u=15,l=32;if(null!==a){var c=/(\d+) (\d+)/.exec(a);null!==c?(l=parseInt(c[1]),u=parseInt(c[2])):reportWarning(r,"Malformed cellResolution value (using initial value instead)")}return{w:l,h:u}}(t,r);var a=function extractFrameAndTickRate(t,r){var a,u=findAttribute(t,i.ns_ttp,"frameRate"),l=30;if(null!==u){null!==(a=/(\d+)/.exec(u))?l=parseInt(a[1]):reportWarning(r,"Malformed frame rate attribute (using initial value instead)")}var c=findAttribute(t,i.ns_ttp,"frameRateMultiplier"),d=1;if(null!==c){null!==(a=/(\d+) (\d+)/.exec(c))?d=parseInt(a[1])/parseInt(a[2]):reportWarning(r,"Malformed frame rate multiplier attribute (using initial value instead)")}var g=d*l,p=1,m=findAttribute(t,i.ns_ttp,"tickRate");if(null===m)null!==u&&(p=g);else{null!==(a=/(\d+)/.exec(m))?p=parseInt(a[1]):reportWarning(r,"Malformed tick rate attribute (using initial value instead)")}return{effectiveFrameRate:g,tickRate:p}}(t,r);this.effectiveFrameRate=a.effectiveFrameRate,this.tickRate=a.tickRate,this.aspectRatio=function extractAspectRatio(t,r){var a=findAttribute(t,i.ns_ittp,"aspectRatio"),u=null;if(null!==a){var l=/(\d+) (\d+)/.exec(a);if(null!==l){var c=parseInt(l[1]),d=parseInt(l[2]);0!==c&&0!==d?u=c/d:reportError(r,"Illegal aspectRatio values (ignoring)")}else reportError(r,"Malformed aspectRatio attribute (ignoring)")}return u}(t,r);var l=findAttribute(t,i.ns_ttp,"timeBase");null!==l&&"media"!==l&&reportFatal(r,"Unsupported time base");var c=function extractExtent(t,r){var a=findAttribute(t,i.ns_tts,"extent");if(null===a)return null;var l=a.split(" ");if(2!==l.length)return reportWarning(r,"Malformed extent (ignoring)"),null;var c=u.parseLength(l[0]),d=u.parseLength(l[1]);if(!d||!c)return reportWarning(r,"Malformed extent values (ignoring)"),null;return{h:d,w:c}}(t,r);null===c?this.pxDimensions={h:480,w:640}:("px"===c.h.unit&&"px"===c.w.unit||reportFatal(r,"Extent on TT must be in px or absent"),this.pxDimensions={h:c.h.value,w:c.w.value})},TT.prototype._registerEvent=function(t){if(!(t.end<=t.begin)){var r=indexOf(this.events,t.begin);if(r.found||this.events.splice(r.index,0,t.begin),t.end!==Number.POSITIVE_INFINITY){var i=indexOf(this.events,t.end);i.found||this.events.splice(i.index,0,t.end)}}},TT.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},TT.prototype.getMediaTimeEvents=function(){return this.events},Style.prototype.initFromNode=function(t,r){this.id=elementGetXMLID(t),this.styleAttrs=elementGetStyles(t,r),this.styleRefs=elementGetStyleRefs(t)},IdentifiedElement.prototype.initFromNode=function(t,r,i,a){this.id=elementGetXMLID(i)},LayoutElement.prototype.initFromNode=function(t,r,i,a){this.regionID=function elementGetRegionID(t){return t&&"region"in t.attributes?t.attributes.region.value:""}(i)},StyledElement.prototype.initFromNode=function(t,r,i,a){this.styleAttrs=elementGetStyles(i,a),null!==t.head&&null!==t.head.styling&&mergeReferencedStyles(t.head.styling,elementGetStyleRefs(i),this.styleAttrs,a)},AnimatedElement.prototype.initFromNode=function(t,r,i,a){this.sets=[]},ContainerElement.prototype.initFromNode=function(t,r,i,a){this.contents=[]},TimedElement.prototype.initFromNode=function(t,r,i,a){var u=function processTiming(t,r,i,a){var u=null;i&&"begin"in i.attributes&&null===(u=parseTimeExpression(t.tickRate,t.effectiveFrameRate,i.attributes.begin.value))&&reportWarning(a,"Malformed begin value "+i.attributes.begin.value+" (using 0)");var l=null;i&&"dur"in i.attributes&&null===(l=parseTimeExpression(t.tickRate,t.effectiveFrameRate,i.attributes.dur.value))&&reportWarning(a,"Malformed dur value "+i.attributes.dur.value+" (ignoring)");var c=null;i&&"end"in i.attributes&&null===(c=parseTimeExpression(t.tickRate,t.effectiveFrameRate,i.attributes.end.value))&&reportWarning(a,"Malformed end value (ignoring)");return{explicit_begin:u,explicit_end:c,explicit_dur:l}}(t,0,i,a);this.explicit_begin=u.explicit_begin,this.explicit_end=u.explicit_end,this.explicit_dur=u.explicit_dur,this.timeContainer=function elementGetTimeContainer(t,r){var i=t&&"timeContainer"in t.attributes?t.attributes.timeContainer.value:null;return i&&"par"!==i?"seq"===i?"seq":(reportError(r,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(i,a)},Body.prototype.initFromNode=function(t,r,i){StyledElement.prototype.initFromNode.call(this,t,null,r,i),TimedElement.prototype.initFromNode.call(this,t,null,r,i),AnimatedElement.prototype.initFromNode.call(this,t,null,r,i),LayoutElement.prototype.initFromNode.call(this,t,null,r,i),ContainerElement.prototype.initFromNode.call(this,t,null,r,i)},Div.prototype.initFromNode=function(t,r,i,a){StyledElement.prototype.initFromNode.call(this,t,r,i,a),TimedElement.prototype.initFromNode.call(this,t,r,i,a),AnimatedElement.prototype.initFromNode.call(this,t,r,i,a),LayoutElement.prototype.initFromNode.call(this,t,r,i,a),ContainerElement.prototype.initFromNode.call(this,t,r,i,a)},P.prototype.initFromNode=function(t,r,i,a){StyledElement.prototype.initFromNode.call(this,t,r,i,a),TimedElement.prototype.initFromNode.call(this,t,r,i,a),AnimatedElement.prototype.initFromNode.call(this,t,r,i,a),LayoutElement.prototype.initFromNode.call(this,t,r,i,a),ContainerElement.prototype.initFromNode.call(this,t,r,i,a)},Span.prototype.initFromNode=function(t,r,i,a,u){StyledElement.prototype.initFromNode.call(this,t,r,i,u),TimedElement.prototype.initFromNode.call(this,t,r,i,u),AnimatedElement.prototype.initFromNode.call(this,t,r,i,u),LayoutElement.prototype.initFromNode.call(this,t,r,i,u),ContainerElement.prototype.initFromNode.call(this,t,r,i,u),this.space=a},AnonymousSpan.prototype.initFromText=function(t,r,i,a,u){TimedElement.prototype.initFromNode.call(this,t,r,null,u),this.text=i,this.space=a},Br.prototype.initFromNode=function(t,r,i,a){LayoutElement.prototype.initFromNode.call(this,t,r,i,a),TimedElement.prototype.initFromNode.call(this,t,r,i,a)},Region.prototype.createDefaultRegion=function(){var t=new Region;return IdentifiedElement.call(t,""),StyledElement.call(t,{}),AnimatedElement.call(t,[]),TimedElement.call(t,0,Number.POSITIVE_INFINITY,null),t},Region.prototype.initFromNode=function(t,r,i){IdentifiedElement.prototype.initFromNode.call(this,t,null,r,i),StyledElement.prototype.initFromNode.call(this,t,null,r,i),TimedElement.prototype.initFromNode.call(this,t,null,r,i),AnimatedElement.prototype.initFromNode.call(this,t,null,r,i),null!==t.head&&null!==t.head.styling&&mergeReferencedStyles(t.head.styling,elementGetStyleRefs(r),this.styleAttrs,i)},Set.prototype.initFromNode=function(t,r,i,a){TimedElement.prototype.initFromNode.call(this,t,r,i,a);var u=elementGetStyles(i,a);for(var l in this.qname=null,this.value=null,u){if(this.qname){reportError(a,"More than one style specified on set");break}this.qname=l,this.value=u[l]}}}(r,"undefined"==typeof sax?i(/*! sax */"./node_modules/sax/lib/sax.js"):sax,"undefined"==typeof imscNames?i(/*! ./names */"./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?i(/*! ./styles */"./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?i(/*! ./utils */"./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/html.js":
/*!***********************************************!*\
    !*** ./node_modules/imsc/src/main/js/html.js ***!
    \***********************************************/
/*! no static exports found */function node_modulesImscSrcMainJsHtmlJs(t,r,i){!function(t,r,i){function processElement(t,r,u){var l;if("region"===u.kind?(l=document.createElement("div")).style.position="absolute":"body"===u.kind||"div"===u.kind?l=document.createElement("div"):"p"===u.kind?l=document.createElement("p"):"span"===u.kind?l=document.createElement("span"):"br"===u.kind&&(l=document.createElement("br")),l){for(var c in l.style.margin="0",a){var d=a[c],g=u.styleAttrs[d.qname];void 0!==g&&null!==d.map&&d.map(t,l,u,g)}var p=l;if("region"===u.kind){var m=u.styleAttrs[i.byName.writingMode.qname];"lrtb"===m||"lr"===m?(t.ipd="lr",t.bpd="tb"):"rltb"===m||"rl"===m?(t.ipd="rl",t.bpd="tb"):"tblr"===m?(t.ipd="tb",t.bpd="lr"):"tbrl"!==m&&"tb"!==m||(t.ipd="tb",t.bpd="rl")}var v=u.styleAttrs[i.byName.linePadding.qname];if(v&&v>0){var b=Math.ceil(v*t.h)+"px";"tb"===t.bpd?(p.style.paddingLeft=b,p.style.paddingRight=b):(p.style.paddingTop=b,p.style.paddingBottom=b),t.lp=v}var M=u.styleAttrs[i.byName.multiRowAlign.qname];if(M&&"auto"!==M){var S=document.createElement("span");S.style.display="inline-block",S.style.textAlign=M,l.appendChild(S),p=S,t.mra=M}if(u.styleAttrs[i.byName.fillLineGap.qname]&&(t.flg=!0),"span"===u.kind&&u.text)if(t.lp||t.mra||t.flg)for(var E="",I=0;I<u.text.length;I++){E+=u.text.charAt(I);var D=u.text.charCodeAt(I);if(D<55296||D>56319||I===u.text.length){var A=document.createElement("span");A.textContent=E,l.appendChild(A),E=""}}else l.textContent=u.text;for(var C in r.appendChild(l),u.contents)processElement(t,p,u.contents[C]);var N=[];if((t.lp||t.mra||t.flg)&&"p"===u.kind&&(constructLineList(t,p,N,null),t.mra&&(!function applyMultiRowAlign(t){for(var r=0;r<t.length-1;r++){var i=t[r].elements.length;if(0!==i&&!1===t[r].br){var a=document.createElement("br"),u=t[r].elements[i-1].node;u.parentElement.insertBefore(a,u.nextSibling)}}}(N),t.mra=null),t.lp&&(!function applyLinePadding(t,r,i){for(var a in t){var u=t[a].elements.length,l=t[a].elements[t[a].start_elem],c=t[a].elements[t[a].end_elem],d=Math.ceil(r)+"px",g="-"+Math.ceil(r)+"px";0!==u&&("lr"===i.ipd?(l.node.style.borderLeftColor=l.bgcolor||"#00000000",l.node.style.borderLeftStyle="solid",l.node.style.borderLeftWidth=d,l.node.style.marginLeft=g):"rl"===i.ipd?(l.node.style.borderRightColor=l.bgcolor||"#00000000",l.node.style.borderRightStyle="solid",l.node.style.borderRightWidth=d,l.node.style.marginRight=g):"tb"===i.ipd&&(l.node.style.borderTopColor=l.bgcolor||"#00000000",l.node.style.borderTopStyle="solid",l.node.style.borderTopWidth=d,l.node.style.marginTop=g),"lr"===i.ipd?(c.node.style.borderRightColor=c.bgcolor||"#00000000",c.node.style.borderRightStyle="solid",c.node.style.borderRightWidth=d,c.node.style.marginRight=g):"rl"===i.ipd?(c.node.style.borderLeftColor=c.bgcolor||"#00000000",c.node.style.borderLeftStyle="solid",c.node.style.borderLeftWidth=d,c.node.style.marginLeft=g):"tb"===i.ipd&&(c.node.style.borderBottomColor=c.bgcolor||"#00000000",c.node.style.borderBottomStyle="solid",c.node.style.borderBottomWidth=d,c.node.style.marginBottom=g))}}(N,t.lp*t.h,t),t.lp=null),t.flg)){var k=rect2edges(p.getBoundingClientRect(),t);!function applyFillLineGap(t,r,i,a){for(var u=Math.sign(i-r),l=0;l<=t.length;l++){var c,d,g;if(c=0===l?r:l===t.length?i:(t[l].before+t[l-1].after)/2,l>0)for(var p=0;p<t[l-1].elements.length;p++)null!==t[l-1].elements[p].bgcolor&&u*((g=t[l-1].elements[p]).after-c)<0&&(d=Math.ceil(Math.abs(c-g.after))+"px",g.node.style.backgroundColor=g.bgcolor,"lr"===a.bpd?g.node.style.paddingRight=d:"rl"===a.bpd?g.node.style.paddingLeft=d:"tb"===a.bpd&&(g.node.style.paddingBottom=d));if(l<t.length)for(var m=0;m<t[l].elements.length;m++)null!==(g=t[l].elements[m]).bgcolor&&u*(g.before-c)>0&&(d=Math.ceil(Math.abs(g.before-c))+"px",g.node.style.backgroundColor=g.bgcolor,"lr"===a.bpd?g.node.style.paddingLeft=d:"rl"===a.bpd?g.node.style.paddingRight=d:"tb"===a.bpd&&(g.node.style.paddingTop=d))}}(N,k.before,k.after,t),t.flg=null}if("region"===u.kind&&(constructLineList(t,p,N),"tb"===t.bpd&&t.enableRollUp&&u.contents.length>0&&"after"===u.styleAttrs[i.byName.displayAlign.qname])){var O=new RegionPBuffer(""===u.id?"_":u.id,N);if(t.currentISDState[O.id]=O,t.previousISDState&&O.id in t.previousISDState&&t.previousISDState[O.id].plist.length>0&&O.plist.length>1&&O.plist[O.plist.length-2].text===t.previousISDState[O.id].plist[t.previousISDState[O.id].plist.length-1].text){var L=l.firstElementChild,R=O.plist[O.plist.length-1].after-O.plist[O.plist.length-1].before;L.style.bottom="-"+R+"px",L.style.transition="transform 0.4s",L.style.position="relative",L.style.transform="translateY(-"+R+"px)"}}}else(function reportError(t,r){if(t&&t.error&&t.error(r))throw r})(t.errorHandler,"Error processing ISD element kind: "+u.kind)}function RegionPBuffer(t,r){this.id=t,this.plist=r}function rect2edges(t,r){var i={before:null,after:null,start:null,end:null};return"tb"===r.bpd?(i.before=t.top,i.after=t.bottom,"lr"===r.ipd?(i.start=t.left,i.end=t.right):(i.start=t.right,i.end=t.left)):"lr"===r.bpd?(i.before=t.left,i.after=t.right,i.start=t.top,i.end=t.bottom):"rl"===r.bpd&&(i.before=t.right,i.after=t.left,i.start=t.top,i.end=t.bottom),i}function constructLineList(t,r,i,a){var u=r.style.backgroundColor||a;if(0===r.childElementCount)if("span"===r.localName){var l=r.getBoundingClientRect();if(0===l.height||0===l.width)return;var c=rect2edges(l,t);if(0!==i.length&&function isSameLine(t,r,i,a){return r<a&&t>i||a<=r&&i>=t}(c.before,c.after,i[i.length-1].before,i[i.length-1].after)){var d=Math.sign(c.after-c.before),g=Math.sign(c.end-c.start);d*(c.before-i[i.length-1].before)<0&&(i[i.length-1].before=c.before),d*(c.after-i[i.length-1].after)>0&&(i[i.length-1].after=c.after),g*(c.start-i[i.length-1].start)<0&&(i[i.length-1].start=c.start,i[i.length-1].start_elem=i[i.length-1].elements.length),g*(c.end-i[i.length-1].end)>0&&(i[i.length-1].end=c.end,i[i.length-1].end_elem=i[i.length-1].elements.length)}else i.push({before:c.before,after:c.after,start:c.start,end:c.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1});i[i.length-1].text+=r.textContent,i[i.length-1].elements.push({node:r,bgcolor:u,before:c.before,after:c.after})}else"br"===r.localName&&0!==i.length&&(i[i.length-1].br=!0);else for(var p=r.firstChild;p;)p.nodeType===Node.ELEMENT_NODE&&constructLineList(t,p,i,u),p=p.nextSibling}function HTMLStylingMapDefintion(t,r){this.qname=t,this.map=r}t.render=function(t,r,i,a,u,l,c,d,g){var p=a||r.clientHeight,m=u||r.clientWidth;if(null!==t.aspectRatio){var v=p*t.aspectRatio;v>m?p=Math.round(m/t.aspectRatio):m=v}var b=document.createElement("div");b.style.position="relative",b.style.width=m+"px",b.style.height=p+"px",b.style.margin="auto",b.style.top=0,b.style.bottom=0,b.style.left=0,b.style.right=0,b.style.zIndex=0;var M={h:p,w:m,regionH:null,regionW:null,imgResolver:i,displayForcedOnlyMode:l||!1,isd:t,errorHandler:c,previousISDState:d,enableRollUp:g||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var S in r.appendChild(b),t.contents)processElement(M,b,t.contents[S]);return M.currentISDState};var a=[new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling backgroundColor",(function(t,r,i,a){0!==a[3]&&(r.style.backgroundColor="rgba("+a[0].toString()+","+a[1].toString()+","+a[2].toString()+","+(a[3]/255).toString()+")")})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling color",(function(t,r,i,a){r.style.color="rgba("+a[0].toString()+","+a[1].toString()+","+a[2].toString()+","+(a[3]/255).toString()+")"})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling direction",(function(t,r,i,a){r.style.direction=a})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling display",(function(t,r,i,a){})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling displayAlign",(function(t,r,i,a){r.style.display="flex",r.style.flexDirection="column","before"===a?r.style.justifyContent="flex-start":"center"===a?r.style.justifyContent="center":"after"===a&&(r.style.justifyContent="flex-end")})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling extent",(function(t,r,i,a){t.regionH=a.h*t.h,t.regionW=a.w*t.w;var u=0,l=0,c=i.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];c&&(u=(c[0]+c[2])*t.h,l=(c[1]+c[3])*t.w),r.style.height=t.regionH-u+"px",r.style.width=t.regionW-l+"px"})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling fontFamily",(function(t,r,i,a){var u=[];for(var l in a)"monospaceSerif"===a[l]?(u.push("Courier New"),u.push('"Liberation Mono"'),u.push("Courier"),u.push("monospace")):"proportionalSansSerif"===a[l]?(u.push("Arial"),u.push("Helvetica"),u.push('"Liberation Sans"'),u.push("sans-serif")):"monospace"===a[l]?u.push("monospace"):"sansSerif"===a[l]?u.push("sans-serif"):"serif"===a[l]?u.push("serif"):"monospaceSansSerif"===a[l]?(u.push("Consolas"),u.push("monospace")):"proportionalSerif"===a[l]?u.push("serif"):u.push(a[l]);r.style.fontFamily=u.join(",")})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling fontSize",(function(t,r,i,a){r.style.fontSize=a*t.h+"px"})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling fontStyle",(function(t,r,i,a){r.style.fontStyle=a})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling fontWeight",(function(t,r,i,a){r.style.fontWeight=a})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling lineHeight",(function(t,r,i,a){r.style.lineHeight="normal"===a?"normal":a*t.h+"px"})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling opacity",(function(t,r,i,a){r.style.opacity=a})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling origin",(function(t,r,i,a){r.style.top=a.h*t.h+"px",r.style.left=a.w*t.w+"px"})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling overflow",(function(t,r,i,a){r.style.overflow=a})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling padding",(function(t,r,i,a){var u=[];u[0]=a[0]*t.h+"px",u[1]=a[3]*t.w+"px",u[2]=a[2]*t.h+"px",u[3]=a[1]*t.w+"px",r.style.padding=u.join(" ")})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling showBackground",null),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling textAlign",(function(t,r,a,u){var l,c=a.styleAttrs[i.byName.direction.qname];l="start"===u?"rtl"===c?"right":"left":"end"===u?"rtl"===c?"left":"right":u,r.style.textAlign=l})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling textDecoration",(function(t,r,i,a){r.style.textDecoration=a.join(" ").replace("lineThrough","line-through")})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling textOutline",(function(t,r,i,a){r.style.textShadow="none"===a?"":"rgba("+a.color[0].toString()+","+a.color[1].toString()+","+a.color[2].toString()+","+(a.color[3]/255).toString()+") 0px 0px "+a.thickness*t.h+"px"})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(t,r,i,a){var u;u="bidiOverride"===a?"bidi-override":a,r.style.unicodeBidi=u})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling visibility",(function(t,r,i,a){r.style.visibility=a})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling wrapOption",(function(t,r,i,a){"wrap"===a?"preserve"===i.space?r.style.whiteSpace="pre-wrap":r.style.whiteSpace="normal":"preserve"===i.space?r.style.whiteSpace="pre":r.style.whiteSpace="noWrap"})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling writingMode",(function(t,r,i,a){"lrtb"===a||"lr"===a||"rltb"===a||"rl"===a?r.style.writingMode="horizontal-tb":"tblr"===a?r.style.writingMode="vertical-lr":"tbrl"!==a&&"tb"!==a||(r.style.writingMode="vertical-rl")})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml#styling zIndex",(function(t,r,i,a){r.style.zIndex=a})),new HTMLStylingMapDefintion("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",(function(t,r,i,a){if(null!==t.imgResolver&&null!==a){var u=document.createElement("img"),l=t.imgResolver(a,u);l&&(u.src=l),u.height=t.regionH,u.width=t.regionW,r.appendChild(u)}})),new HTMLStylingMapDefintion("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(t,r,i,a){t.displayForcedOnlyMode&&!1===a&&(r.style.visibility="hidden")}))],u={};for(var l in a)u[a[l].qname]=a[l]}(r,"undefined"==typeof imscNames?i(/*! ./names */"./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?i(/*! ./styles */"./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/isd.js":
/*!**********************************************!*\
    !*** ./node_modules/imsc/src/main/js/isd.js ***!
    \**********************************************/
/*! no static exports found */function node_modulesImscSrcMainJsIsdJs(t,r,i){!function(t,r,i){function isdProcessContentElement(t,r,a,u,l,c,d,g,p){if(r<d.begin||r>=d.end)return null;var m="regionID"in d&&""!==d.regionID?d.regionID:c;if(null!==l&&m!==a.id&&(!("contents"in d)||"contents"in d&&0===d.contents.length||""!==m))return null;var v=new ISDContentElement(d);for(var b in d.sets)r<d.sets[b].begin||r>=d.sets[b].end||(v.styleAttrs[d.sets[b].qname]=d.sets[b].value);var M,S={};for(var E in v.styleAttrs)if(S[E]=!0,E===i.byName.writingMode.qname&&!(i.byName.direction.qname in v.styleAttrs)){var I=v.styleAttrs[E];"lrtb"===I||"lr"===I?v.styleAttrs[i.byName.direction.qname]="ltr":"rltb"!==I&&"rl"!==I||(v.styleAttrs[i.byName.direction.qname]="rtl")}if(null!==l)for(var D in i.all){var A=i.all[D];if(A.qname===i.byName.textDecoration.qname){var C=l.styleAttrs[A.qname],N=v.styleAttrs[A.qname],k=[];void 0===N?k=C:-1===N.indexOf("none")?((-1===N.indexOf("noUnderline")&&-1!==C.indexOf("underline")||-1!==N.indexOf("underline"))&&k.push("underline"),(-1===N.indexOf("noLineThrough")&&-1!==C.indexOf("lineThrough")||-1!==N.indexOf("lineThrough"))&&k.push("lineThrough"),(-1===N.indexOf("noOverline")&&-1!==C.indexOf("overline")||-1!==N.indexOf("overline"))&&k.push("overline")):k.push("none"),v.styleAttrs[A.qname]=k}else A.inherit&&A.qname in l.styleAttrs&&!(A.qname in v.styleAttrs)&&(v.styleAttrs[A.qname]=l.styleAttrs[A.qname])}for(var O in i.all){var L=i.all[O];L.qname in v.styleAttrs||("region"===v.kind||!1===L.inherit&&null!==L.initial)&&(v.styleAttrs[L.qname]=L.parse(L.initial),S[L.qname]=!0)}for(var R in i.all){var j=i.all[R];if(j.qname in S&&null!==j.compute){var B=j.compute(t,l,v,v.styleAttrs[j.qname],p);null!==B?v.styleAttrs[j.qname]=B:reportError(g,"Style '"+j.qname+"' on element '"+v.kind+"' cannot be computed")}}if("none"===v.styleAttrs[i.byName.display.qname])return null;for(var U in null===l?M=null===u?[]:[u]:"contents"in d&&(M=d.contents),M){var z=isdProcessContentElement(t,r,a,u,v,m,M[U],g,p);null!==z&&v.contents.push(z.element)}for(var Y in v.styleAttrs){-1===i.byQName[Y].applies.indexOf(v.kind)&&delete v.styleAttrs[Y]}if("span"===v.kind&&v.text&&"default"===v.space){var G=v.text.replace(/\s+/g," ");v.text=G}if("p"===v.kind){var H=[];constructSpanList(v,H);for(var Q=0,V="after_br",W=0;;)if("after_br"===V)Q>=H.length||"br"===H[Q].kind?(V="before_br",W=Q,Q--):("preserve"!==H[Q].space&&(H[Q].text=H[Q].text.replace(/^\s+/g,"")),H[Q].text.length>0?(V="looking_br",Q++):H.splice(Q,1));else if("before_br"===V)if(Q<0||"br"===H[Q].kind){if(V="after_br",(Q=W+1)>=H.length)break}else if("preserve"!==H[Q].space&&(H[Q].text=H[Q].text.replace(/\s+$/g,"")),H[Q].text.length>0){if(V="after_br",(Q=W+1)>=H.length)break}else H.splice(Q,1),Q--;else Q>=H.length||"br"===H[Q].kind?(V="before_br",W=Q,Q--):Q++;pruneEmptySpans(v)}return"div"===v.kind&&i.byName.backgroundImage.qname in v.styleAttrs||"br"===v.kind||"contents"in v&&v.contents.length>0||"span"===v.kind&&null!==v.text||"region"===v.kind&&"always"===v.styleAttrs[i.byName.showBackground.qname]?{region_id:m,element:v}:null}function constructSpanList(t,r){if("contents"in t)for(var i in t.contents)constructSpanList(t.contents[i],r);else r.push(t)}function pruneEmptySpans(t){if("br"===t.kind)return!1;if("text"in t)return 0===t.text.length;if("contents"in t){for(var r=t.contents.length;r--;)pruneEmptySpans(t.contents[r])&&t.contents.splice(r,1);return 0===t.contents.length}}function ISD(t){this.contents=[],this.aspectRatio=t.aspectRatio}function ISDContentElement(t){for(var r in this.kind=t.kind||"region",t.id&&(this.id=t.id),this.styleAttrs={},t.styleAttrs)this.styleAttrs[r]=t.styleAttrs[r];"text"in t?this.text=t.text:"br"!==t.kind&&(this.contents=[]),"space"in t&&(this.space=t.space)}function reportError(t,r){if(t&&t.error&&t.error(r))throw r}t.generateISD=function(t,r,i){var a=new ISD(t),u={};for(var l in t.head.layout.regions){var c=isdProcessContentElement(t,r,t.head.layout.regions[l],t.body,null,"",t.head.layout.regions[l],i,u);null!==c&&a.contents.push(c.element)}return a}}(r,"undefined"==typeof imscNames?i(/*! ./names */"./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?i(/*! ./styles */"./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/main.js":
/*!***********************************************!*\
    !*** ./node_modules/imsc/src/main/js/main.js ***!
    \***********************************************/
/*! no static exports found */function node_modulesImscSrcMainJsMainJs(t,r,i){r.generateISD=i(/*! ./isd */"./node_modules/imsc/src/main/js/isd.js").generateISD,r.fromXML=i(/*! ./doc */"./node_modules/imsc/src/main/js/doc.js").fromXML,r.renderHTML=i(/*! ./html */"./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":
/*!************************************************!*\
    !*** ./node_modules/imsc/src/main/js/names.js ***!
    \************************************************/
/*! no static exports found */function node_modulesImscSrcMainJsNamesJs(t,r,i){!function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"}(r)},"./node_modules/imsc/src/main/js/styles.js":
/*!*************************************************!*\
    !*** ./node_modules/imsc/src/main/js/styles.js ***!
    \*************************************************/
/*! no static exports found */function node_modulesImscSrcMainJsStylesJs(t,r,i){!function(t,r,i){function StylingAttributeDefinition(t,r,i,a,u,l,c,d){this.name=r,this.ns=t,this.qname=t+" "+r,this.inherit=u,this.animatable=l,this.initial=i,this.applies=a,this.parse=c,this.compute=d}for(var a in t.all=[new StylingAttributeDefinition(r.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,i.parseColor,null),new StylingAttributeDefinition(r.ns_tts,"color","white",["span"],!0,!0,i.parseColor,null),new StylingAttributeDefinition(r.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_tts,"displayAlign","before",["region"],!1,!0,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(t){if("auto"===t)return t;var r=t.split(" ");if(2!==r.length)return null;var a=i.parseLength(r[0]),u=i.parseLength(r[1]);return u&&a?{h:u,w:a}:null}),(function(t,r,i,a,u){var l,c;if("auto"===a)l=1;else if("%"===a.h.unit)l=a.h.value/100;else{if("px"!==a.h.unit)return null;l=a.h.value/t.pxDimensions.h}if("auto"===a)c=1;else if("%"===a.w.unit)c=a.w.value/100;else{if("px"!==a.w.unit)return null;c=a.w.value/t.pxDimensions.w}return{h:l,w:c}})),new StylingAttributeDefinition(r.ns_tts,"fontFamily","default",["span"],!0,!0,(function(t){var r=t.split(","),i=[];for(var a in r)"'"!==r[a].charAt(0)&&'"'!==r[a].charAt(0)&&"default"===r[a]?i.push("monospaceSerif"):i.push(r[a]);return i}),null),new StylingAttributeDefinition(r.ns_tts,"fontSize","1c",["span"],!0,!0,i.parseLength,(function(r,i,a,u,l){var c;if("%"===u.unit)c=null!==i?i.styleAttrs[t.byName.fontSize.qname]*u.value/100:u.value/100/r.cellResolution.h;else if("em"===u.unit)c=null!==i?i.styleAttrs[t.byName.fontSize.qname]*u.value:u.value/r.cellResolution.h;else if("c"===u.unit)c=u.value/r.cellResolution.h;else{if("px"!==u.unit)return null;c=u.value/r.pxDimensions.h}return c})),new StylingAttributeDefinition(r.ns_tts,"fontStyle","normal",["span"],!0,!0,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_tts,"fontWeight","normal",["span"],!0,!0,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(t){return"normal"===t?t:i.parseLength(t)}),(function(r,i,a,u,l){var c;if("normal"===u)c=u;else if("%"===u.unit)c=a.styleAttrs[t.byName.fontSize.qname]*u.value/100;else if("em"===u.unit)c=a.styleAttrs[t.byName.fontSize.qname]*u.value;else if("c"===u.unit)c=u.value/r.cellResolution.h;else{if("px"!==u.unit)return null;c=u.value/r.pxDimensions.h}return c})),new StylingAttributeDefinition(r.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new StylingAttributeDefinition(r.ns_tts,"origin","auto",["region"],!1,!0,(function(t){if("auto"===t)return t;var r=t.split(" ");if(2!==r.length)return null;var a=i.parseLength(r[0]),u=i.parseLength(r[1]);return u&&a?{h:u,w:a}:null}),(function(t,r,i,a,u){var l,c;if("auto"===a)l=0;else if("%"===a.h.unit)l=a.h.value/100;else{if("px"!==a.h.unit)return null;l=a.h.value/t.pxDimensions.h}if("auto"===a)c=0;else if("%"===a.w.unit)c=a.w.value/100;else{if("px"!==a.w.unit)return null;c=a.w.value/t.pxDimensions.w}return{h:l,w:c}})),new StylingAttributeDefinition(r.ns_tts,"overflow","hidden",["region"],!1,!0,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_tts,"padding","0px",["region"],!1,!0,(function(t){var r=t.split(" ");if(r.length>4)return null;var a=[];for(var u in r){var l=i.parseLength(r[u]);if(!l)return null;a.push(l)}return a}),(function(r,i,a,u,l){var c;if(1===u.length)c=[u[0],u[0],u[0],u[0]];else if(2===u.length)c=[u[0],u[1],u[0],u[1]];else if(3===u.length)c=[u[0],u[1],u[2],u[1]];else{if(4!==u.length)return null;c=[u[0],u[1],u[2],u[3]]}var d=a.styleAttrs[t.byName.writingMode.qname];if("lrtb"===d||"lr"===d)c=[c[0],c[3],c[2],c[1]];else if("rltb"===d||"rl"===d)c=[c[0],c[1],c[2],c[3]];else if("tblr"===d)c=[c[3],c[0],c[1],c[2]];else{if("tbrl"!==d&&"tb"!==d)return null;c=[c[3],c[2],c[1],c[0]]}var g=[];for(var p in c)if(0===c[p].value)g[p]=0;else if("%"===c[p].unit)g[p]="0"===p||"2"===p?a.styleAttrs[t.byName.extent.qname].h*c[p].value/100:a.styleAttrs[t.byName.extent.qname].w*c[p].value/100;else if("em"===c[p].unit)g[p]=a.styleAttrs[t.byName.fontSize.qname]*c[p].value;else if("c"===c[p].unit)g[p]=c[p].value/r.cellResolution.h;else{if("px"!==c[p].unit)return null;g[p]="0"===p||"2"===p?c[p].value/r.pxDimensions.h:c[p].value/r.pxDimensions.w}return g})),new StylingAttributeDefinition(r.ns_tts,"showBackground","always",["region"],!1,!0,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_tts,"textAlign","start",["p"],!0,!0,(function(t){return t}),(function(t,r,i,a,u){return"left"===a?"start":"right"===a?"end":a})),new StylingAttributeDefinition(r.ns_tts,"textDecoration","none",["span"],!0,!0,(function(t){return t.split(" ")}),null),new StylingAttributeDefinition(r.ns_tts,"textOutline","none",["span"],!0,!0,(function(t){if("none"===t)return t;var r={},a=t.split(" ");if(0===a.length||a.length>2)return null;var u=i.parseColor(a[0]);if(r.color=u,null!==u&&a.shift(),1!==a.length)return null;var l=i.parseLength(a[0]);return l?(r.thickness=l,r):null}),(function(r,i,a,u,l){if("none"===u)return u;var c={};if(null===u.color?c.color=a.styleAttrs[t.byName.color.qname]:c.color=u.color,"%"===u.thickness.unit)c.thickness=a.styleAttrs[t.byName.fontSize.qname]*u.thickness.value/100;else if("em"===u.thickness.unit)c.thickness=a.styleAttrs[t.byName.fontSize.qname]*u.thickness.value;else if("c"===u.thickness.unit)c.thickness=u.thickness.value/r.cellResolution.h;else{if("px"!==u.thickness.unit)return null;c.thickness=u.thickness.value/r.pxDimensions.h}return c})),new StylingAttributeDefinition(r.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_tts,"zIndex","auto",["region"],!1,!0,(function(t){var r;return"auto"===t?r=t:(r=parseInt(t),isNaN(r)&&(r=null)),r}),null),new StylingAttributeDefinition(r.ns_ebutts,"linePadding","0c",["p"],!0,!1,i.parseLength,(function(t,r,i,a,u){return"c"===a.unit?a.value/t.cellResolution.h:null})),new StylingAttributeDefinition(r.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(t){return t}),null),new StylingAttributeDefinition(r.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(t){return"true"===t}),null),new StylingAttributeDefinition(r.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(t){return"true"===t}),null)],t.byQName={},t.all)t.byQName[t.all[a].qname]=t.all[a];for(var u in t.byName={},t.all)t.byName[t.all[u].name]=t.all[u]}(r,"undefined"==typeof imscNames?i(/*! ./names */"./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscUtils?i(/*! ./utils */"./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/utils.js":
/*!************************************************!*\
    !*** ./node_modules/imsc/src/main/js/utils.js ***!
    \************************************************/
/*! no static exports found */function node_modulesImscSrcMainJsUtilsJs(t,r,i){!function(t){var r=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,a=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,u={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};t.parseColor=function(t){var l,c=null,d=u[t.toLowerCase()];return void 0!==d?c=d:null!==(l=r.exec(t))?c=[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16),void 0!==l[4]?parseInt(l[4],16):255]:null!==(l=i.exec(t))?c=[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),255]:null!==(l=a.exec(t))&&(c=[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseInt(l[4])]),c};var l=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;t.parseLength=function(t){var r,i=null;return null!==(r=l.exec(t))&&(i={value:parseFloat(r[1]),unit:r[2]}),i}}(r)},"./node_modules/inherits/inherits_browser.js":
/*!***************************************************!*\
    !*** ./node_modules/inherits/inherits_browser.js ***!
    \***************************************************/
/*! no static exports found */function node_modulesInheritsInherits_browserJs(t,r){"function"==typeof Object.create?t.exports=function inherits(t,r){t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function inherits(t,r){t.super_=r;var i=function TempCtor(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}},"./node_modules/isarray/index.js":
/*!***************************************!*\
    !*** ./node_modules/isarray/index.js ***!
    \***************************************/
/*! no static exports found */function node_modulesIsarrayIndexJs(t,r){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},"./node_modules/node-libs-browser/node_modules/buffer/index.js":
/*!*********************************************************************!*\
    !*** ./node_modules/node-libs-browser/node_modules/buffer/index.js ***!
    \*********************************************************************/
/*! no static exports found */function node_modulesNodeLibsBrowserNode_modulesBufferIndexJs(t,r,i){(function(t){
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <http://feross.org>
   * @license  MIT
   */var a=i(/*! base64-js */"./node_modules/base64-js/index.js"),u=i(/*! ieee754 */"./node_modules/ieee754/index.js"),l=i(/*! isarray */"./node_modules/isarray/index.js");function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,r){if(kMaxLength()<r)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=Buffer.prototype:(null===t&&(t=new Buffer(r)),t.length=r),t}function Buffer(t,r,i){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,r,i);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}return from(this,t,r,i)}function from(t,r,i,a){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?function fromArrayBuffer(t,r,i,a){if(r.byteLength,i<0||r.byteLength<i)throw new RangeError("'offset' is out of bounds");if(r.byteLength<i+(a||0))throw new RangeError("'length' is out of bounds");r=void 0===i&&void 0===a?new Uint8Array(r):void 0===a?new Uint8Array(r,i):new Uint8Array(r,i,a);Buffer.TYPED_ARRAY_SUPPORT?(t=r).__proto__=Buffer.prototype:t=fromArrayLike(t,r);return t}(t,r,i,a):"string"==typeof r?function fromString(t,r,i){"string"==typeof i&&""!==i||(i="utf8");if(!Buffer.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var a=0|byteLength(r,i),u=(t=createBuffer(t,a)).write(r,i);u!==a&&(t=t.slice(0,u));return t}(t,r,i):function fromObject(t,r){if(Buffer.isBuffer(r)){var i=0|checked(r.length);return 0===(t=createBuffer(t,i)).length||r.copy(t,0,0,i),t}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||function isnan(t){return t!=t}(r.length)?createBuffer(t,0):fromArrayLike(t,r);if("Buffer"===r.type&&l(r.data))return fromArrayLike(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,r)}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(t,r){if(assertSize(r),t=createBuffer(t,r<0?0:0|checked(r)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<r;++i)t[i]=0;return t}function fromArrayLike(t,r){var i=r.length<0?0:0|checked(r.length);t=createBuffer(t,i);for(var a=0;a<i;a+=1)t[a]=255&r[a];return t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function byteLength(t,r){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var a=!1;;)switch(r){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return base64ToBytes(t).length;default:if(a)return utf8ToBytes(t).length;r=(""+r).toLowerCase(),a=!0}}function slowToString(t,r,i){var a=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,r,i);case"utf8":case"utf-8":return utf8Slice(this,r,i);case"ascii":return asciiSlice(this,r,i);case"latin1":case"binary":return latin1Slice(this,r,i);case"base64":return base64Slice(this,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,r,i);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}function swap(t,r,i){var a=t[r];t[r]=t[i],t[i]=a}function bidirectionalIndexOf(t,r,i,a,u){if(0===t.length)return-1;if("string"==typeof i?(a=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=u?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(u)return-1;i=t.length-1}else if(i<0){if(!u)return-1;i=0}if("string"==typeof r&&(r=Buffer.from(r,a)),Buffer.isBuffer(r))return 0===r.length?-1:arrayIndexOf(t,r,i,a,u);if("number"==typeof r)return r&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?u?Uint8Array.prototype.indexOf.call(t,r,i):Uint8Array.prototype.lastIndexOf.call(t,r,i):arrayIndexOf(t,[r],i,a,u);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,r,i,a,u){var l,c=1,d=t.length,g=r.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(t.length<2||r.length<2)return-1;c=2,d/=2,g/=2,i/=2}function read(t,r){return 1===c?t[r]:t.readUInt16BE(r*c)}if(u){var p=-1;for(l=i;l<d;l++)if(read(t,l)===read(r,-1===p?0:l-p)){if(-1===p&&(p=l),l-p+1===g)return p*c}else-1!==p&&(l-=l-p),p=-1}else for(i+g>d&&(i=d-g),l=i;l>=0;l--){for(var m=!0,v=0;v<g;v++)if(read(t,l+v)!==read(r,v)){m=!1;break}if(m)return l}return-1}function hexWrite(t,r,i,a){i=Number(i)||0;var u=t.length-i;a?(a=Number(a))>u&&(a=u):a=u;var l=r.length;if(l%2!=0)throw new TypeError("Invalid hex string");a>l/2&&(a=l/2);for(var c=0;c<a;++c){var d=parseInt(r.substr(2*c,2),16);if(isNaN(d))return c;t[i+c]=d}return c}function utf8Write(t,r,i,a){return blitBuffer(utf8ToBytes(r,t.length-i),t,i,a)}function asciiWrite(t,r,i,a){return blitBuffer(function asciiToBytes(t){for(var r=[],i=0;i<t.length;++i)r.push(255&t.charCodeAt(i));return r}(r),t,i,a)}function latin1Write(t,r,i,a){return asciiWrite(t,r,i,a)}function base64Write(t,r,i,a){return blitBuffer(base64ToBytes(r),t,i,a)}function ucs2Write(t,r,i,a){return blitBuffer(function utf16leToBytes(t,r){for(var i,a,u,l=[],c=0;c<t.length&&!((r-=2)<0);++c)a=(i=t.charCodeAt(c))>>8,u=i%256,l.push(u),l.push(a);return l}(r,t.length-i),t,i,a)}function base64Slice(t,r,i){return 0===r&&i===t.length?a.fromByteArray(t):a.fromByteArray(t.slice(r,i))}function utf8Slice(t,r,i){i=Math.min(t.length,i);for(var a=[],u=r;u<i;){var l,d,g,p,m=t[u],v=null,b=m>239?4:m>223?3:m>191?2:1;if(u+b<=i)switch(b){case 1:m<128&&(v=m);break;case 2:128==(192&(l=t[u+1]))&&(p=(31&m)<<6|63&l)>127&&(v=p);break;case 3:l=t[u+1],d=t[u+2],128==(192&l)&&128==(192&d)&&(p=(15&m)<<12|(63&l)<<6|63&d)>2047&&(p<55296||p>57343)&&(v=p);break;case 4:l=t[u+1],d=t[u+2],g=t[u+3],128==(192&l)&&128==(192&d)&&128==(192&g)&&(p=(15&m)<<18|(63&l)<<12|(63&d)<<6|63&g)>65535&&p<1114112&&(v=p)}null===v?(v=65533,b=1):v>65535&&(v-=65536,a.push(v>>>10&1023|55296),v=56320|1023&v),a.push(v),u+=b}return function decodeCodePointsArray(t){var r=t.length;if(r<=c)return String.fromCharCode.apply(String,t);var i="",a=0;for(;a<r;)i+=String.fromCharCode.apply(String,t.slice(a,a+=c));return i}(a)}r.Buffer=Buffer,r.SlowBuffer=function SlowBuffer(t){+t!=t&&(t=0);return Buffer.alloc(+t)},r.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function foo(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),r.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,r,i){return from(null,t,r,i)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,r,i){return function alloc(t,r,i,a){return assertSize(r),r<=0?createBuffer(t,r):void 0!==i?"string"==typeof a?createBuffer(t,r).fill(i,a):createBuffer(t,r).fill(i):createBuffer(t,r)}(null,t,r,i)},Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(null,t)},Buffer.isBuffer=function isBuffer(t){return!(null==t||!t._isBuffer)},Buffer.compare=function compare(t,r){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var i=t.length,a=r.length,u=0,l=Math.min(i,a);u<l;++u)if(t[u]!==r[u]){i=t[u],a=r[u];break}return i<a?-1:a<i?1:0},Buffer.isEncoding=function isEncoding(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(t,r){if(!l(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var i;if(void 0===r)for(r=0,i=0;i<t.length;++i)r+=t[i].length;var a=Buffer.allocUnsafe(r),u=0;for(i=0;i<t.length;++i){var c=t[i];if(!Buffer.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(a,u),u+=c.length}return a},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)swap(this,r,r+1);return this},Buffer.prototype.swap32=function swap32(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)swap(this,r,r+3),swap(this,r+1,r+2);return this},Buffer.prototype.swap64=function swap64(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)swap(this,r,r+7),swap(this,r+1,r+6),swap(this,r+2,r+5),swap(this,r+3,r+4);return this},Buffer.prototype.toString=function toString(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function inspect(){var t="",i=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function compare(t,r,i,a,u){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===i&&(i=t?t.length:0),void 0===a&&(a=0),void 0===u&&(u=this.length),r<0||i>t.length||a<0||u>this.length)throw new RangeError("out of range index");if(a>=u&&r>=i)return 0;if(a>=u)return-1;if(r>=i)return 1;if(this===t)return 0;for(var l=(u>>>=0)-(a>>>=0),c=(i>>>=0)-(r>>>=0),d=Math.min(l,c),g=this.slice(a,u),p=t.slice(r,i),m=0;m<d;++m)if(g[m]!==p[m]){l=g[m],c=p[m];break}return l<c?-1:c<l?1:0},Buffer.prototype.includes=function includes(t,r,i){return-1!==this.indexOf(t,r,i)},Buffer.prototype.indexOf=function indexOf(t,r,i){return bidirectionalIndexOf(this,t,r,i,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(t,r,i){return bidirectionalIndexOf(this,t,r,i,!1)},Buffer.prototype.write=function write(t,r,i,a){if(void 0===r)a="utf8",i=this.length,r=0;else if(void 0===i&&"string"==typeof r)a=r,i=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(i)?(i|=0,void 0===a&&(a="utf8")):(a=i,i=void 0)}var u=this.length-r;if((void 0===i||i>u)&&(i=u),t.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var l=!1;;)switch(a){case"hex":return hexWrite(this,t,r,i);case"utf8":case"utf-8":return utf8Write(this,t,r,i);case"ascii":return asciiWrite(this,t,r,i);case"latin1":case"binary":return latin1Write(this,t,r,i);case"base64":return base64Write(this,t,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,r,i);default:if(l)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),l=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var c=4096;function asciiSlice(t,r,i){var a="";i=Math.min(t.length,i);for(var u=r;u<i;++u)a+=String.fromCharCode(127&t[u]);return a}function latin1Slice(t,r,i){var a="";i=Math.min(t.length,i);for(var u=r;u<i;++u)a+=String.fromCharCode(t[u]);return a}function hexSlice(t,r,i){var a=t.length;(!r||r<0)&&(r=0),(!i||i<0||i>a)&&(i=a);for(var u="",l=r;l<i;++l)u+=toHex(t[l]);return u}function utf16leSlice(t,r,i){for(var a=t.slice(r,i),u="",l=0;l<a.length;l+=2)u+=String.fromCharCode(a[l]+256*a[l+1]);return u}function checkOffset(t,r,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>i)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,r,i,a,u,l){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>u||r<l)throw new RangeError('"value" argument is out of bounds');if(i+a>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(t,r,i,a){r<0&&(r=65535+r+1);for(var u=0,l=Math.min(t.length-i,2);u<l;++u)t[i+u]=(r&255<<8*(a?u:1-u))>>>8*(a?u:1-u)}function objectWriteUInt32(t,r,i,a){r<0&&(r=4294967295+r+1);for(var u=0,l=Math.min(t.length-i,4);u<l;++u)t[i+u]=r>>>8*(a?u:3-u)&255}function checkIEEE754(t,r,i,a,u,l){if(i+a>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function writeFloat(t,r,i,a,l){return l||checkIEEE754(t,0,i,4),u.write(t,r,i,a,23,4),i+4}function writeDouble(t,r,i,a,l){return l||checkIEEE754(t,0,i,8),u.write(t,r,i,a,52,8),i+8}Buffer.prototype.slice=function slice(t,r){var i,a=this.length;if((t=~~t)<0?(t+=a)<0&&(t=0):t>a&&(t=a),(r=void 0===r?a:~~r)<0?(r+=a)<0&&(r=0):r>a&&(r=a),r<t&&(r=t),Buffer.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,r)).__proto__=Buffer.prototype;else{var u=r-t;i=new Buffer(u,void 0);for(var l=0;l<u;++l)i[l]=this[l+t]}return i},Buffer.prototype.readUIntLE=function readUIntLE(t,r,i){t|=0,r|=0,i||checkOffset(t,r,this.length);for(var a=this[t],u=1,l=0;++l<r&&(u*=256);)a+=this[t+l]*u;return a},Buffer.prototype.readUIntBE=function readUIntBE(t,r,i){t|=0,r|=0,i||checkOffset(t,r,this.length);for(var a=this[t+--r],u=1;r>0&&(u*=256);)a+=this[t+--r]*u;return a},Buffer.prototype.readUInt8=function readUInt8(t,r){return r||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function readUInt16LE(t,r){return r||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(t,r){return r||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(t,r){return r||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(t,r){return r||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function readIntLE(t,r,i){t|=0,r|=0,i||checkOffset(t,r,this.length);for(var a=this[t],u=1,l=0;++l<r&&(u*=256);)a+=this[t+l]*u;return a>=(u*=128)&&(a-=Math.pow(2,8*r)),a},Buffer.prototype.readIntBE=function readIntBE(t,r,i){t|=0,r|=0,i||checkOffset(t,r,this.length);for(var a=r,u=1,l=this[t+--a];a>0&&(u*=256);)l+=this[t+--a]*u;return l>=(u*=128)&&(l-=Math.pow(2,8*r)),l},Buffer.prototype.readInt8=function readInt8(t,r){return r||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function readInt16LE(t,r){r||checkOffset(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},Buffer.prototype.readInt16BE=function readInt16BE(t,r){r||checkOffset(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},Buffer.prototype.readInt32LE=function readInt32LE(t,r){return r||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(t,r){return r||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function readFloatLE(t,r){return r||checkOffset(t,4,this.length),u.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(t,r){return r||checkOffset(t,4,this.length),u.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(t,r){return r||checkOffset(t,8,this.length),u.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(t,r){return r||checkOffset(t,8,this.length),u.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(t,r,i,a){(t=+t,r|=0,i|=0,a)||checkInt(this,t,r,i,Math.pow(2,8*i)-1,0);var u=1,l=0;for(this[r]=255&t;++l<i&&(u*=256);)this[r+l]=t/u&255;return r+i},Buffer.prototype.writeUIntBE=function writeUIntBE(t,r,i,a){(t=+t,r|=0,i|=0,a)||checkInt(this,t,r,i,Math.pow(2,8*i)-1,0);var u=i-1,l=1;for(this[r+u]=255&t;--u>=0&&(l*=256);)this[r+u]=t/l&255;return r+i},Buffer.prototype.writeUInt8=function writeUInt8(t,r,i){return t=+t,r|=0,i||checkInt(this,t,r,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(t,r,i){return t=+t,r|=0,i||checkInt(this,t,r,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):objectWriteUInt16(this,t,r,!0),r+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(t,r,i){return t=+t,r|=0,i||checkInt(this,t,r,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):objectWriteUInt16(this,t,r,!1),r+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(t,r,i){return t=+t,r|=0,i||checkInt(this,t,r,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):objectWriteUInt32(this,t,r,!0),r+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(t,r,i){return t=+t,r|=0,i||checkInt(this,t,r,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):objectWriteUInt32(this,t,r,!1),r+4},Buffer.prototype.writeIntLE=function writeIntLE(t,r,i,a){if(t=+t,r|=0,!a){var u=Math.pow(2,8*i-1);checkInt(this,t,r,i,u-1,-u)}var l=0,c=1,d=0;for(this[r]=255&t;++l<i&&(c*=256);)t<0&&0===d&&0!==this[r+l-1]&&(d=1),this[r+l]=(t/c>>0)-d&255;return r+i},Buffer.prototype.writeIntBE=function writeIntBE(t,r,i,a){if(t=+t,r|=0,!a){var u=Math.pow(2,8*i-1);checkInt(this,t,r,i,u-1,-u)}var l=i-1,c=1,d=0;for(this[r+l]=255&t;--l>=0&&(c*=256);)t<0&&0===d&&0!==this[r+l+1]&&(d=1),this[r+l]=(t/c>>0)-d&255;return r+i},Buffer.prototype.writeInt8=function writeInt8(t,r,i){return t=+t,r|=0,i||checkInt(this,t,r,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},Buffer.prototype.writeInt16LE=function writeInt16LE(t,r,i){return t=+t,r|=0,i||checkInt(this,t,r,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):objectWriteUInt16(this,t,r,!0),r+2},Buffer.prototype.writeInt16BE=function writeInt16BE(t,r,i){return t=+t,r|=0,i||checkInt(this,t,r,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):objectWriteUInt16(this,t,r,!1),r+2},Buffer.prototype.writeInt32LE=function writeInt32LE(t,r,i){return t=+t,r|=0,i||checkInt(this,t,r,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):objectWriteUInt32(this,t,r,!0),r+4},Buffer.prototype.writeInt32BE=function writeInt32BE(t,r,i){return t=+t,r|=0,i||checkInt(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):objectWriteUInt32(this,t,r,!1),r+4},Buffer.prototype.writeFloatLE=function writeFloatLE(t,r,i){return writeFloat(this,t,r,!0,i)},Buffer.prototype.writeFloatBE=function writeFloatBE(t,r,i){return writeFloat(this,t,r,!1,i)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(t,r,i){return writeDouble(this,t,r,!0,i)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(t,r,i){return writeDouble(this,t,r,!1,i)},Buffer.prototype.copy=function copy(t,r,i,a){if(i||(i=0),a||0===a||(a=this.length),r>=t.length&&(r=t.length),r||(r=0),a>0&&a<i&&(a=i),a===i)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-r<a-i&&(a=t.length-r+i);var u,l=a-i;if(this===t&&i<r&&r<a)for(u=l-1;u>=0;--u)t[u+r]=this[u+i];else if(l<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(u=0;u<l;++u)t[u+r]=this[u+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+l),r);return l},Buffer.prototype.fill=function fill(t,r,i,a){if("string"==typeof t){if("string"==typeof r?(a=r,r=0,i=this.length):"string"==typeof i&&(a=i,i=this.length),1===t.length){var u=t.charCodeAt(0);u<256&&(t=u)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!Buffer.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;var l;if(r>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(l=r;l<i;++l)this[l]=t;else{var c=Buffer.isBuffer(t)?t:utf8ToBytes(new Buffer(t,a).toString()),d=c.length;for(l=0;l<i-r;++l)this[l+r]=c[l%d]}return this};var d=/[^+\/0-9A-Za-z-_]/g;function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,r){var i;r=r||1/0;for(var a=t.length,u=null,l=[],c=0;c<a;++c){if((i=t.charCodeAt(c))>55295&&i<57344){if(!u){if(i>56319){(r-=3)>-1&&l.push(239,191,189);continue}if(c+1===a){(r-=3)>-1&&l.push(239,191,189);continue}u=i;continue}if(i<56320){(r-=3)>-1&&l.push(239,191,189),u=i;continue}i=65536+(u-55296<<10|i-56320)}else u&&(r-=3)>-1&&l.push(239,191,189);if(u=null,i<128){if((r-=1)<0)break;l.push(i)}else if(i<2048){if((r-=2)<0)break;l.push(i>>6|192,63&i|128)}else if(i<65536){if((r-=3)<0)break;l.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;l.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return l}function base64ToBytes(t){return a.toByteArray(function base64clean(t){if((t=function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(d,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function blitBuffer(t,r,i,a){for(var u=0;u<a&&!(u+i>=r.length||u>=t.length);++u)r[u+i]=t[u];return u}}).call(this,i(/*! ./../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/node-libs-browser/node_modules/events/events.js":
/*!**********************************************************************!*\
    !*** ./node_modules/node-libs-browser/node_modules/events/events.js ***!
    \**********************************************************************/
/*! no static exports found */function node_modulesNodeLibsBrowserNode_modulesEventsEventsJs(t,r,i){var a,u="object"==typeof Reflect?Reflect:null,l=u&&"function"==typeof u.apply?u.apply:function ReflectApply(t,r,i){return Function.prototype.apply.call(t,r,i)};a=u&&"function"==typeof u.ownKeys?u.ownKeys:Object.getOwnPropertySymbols?function ReflectOwnKeys(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function ReflectOwnKeys(t){return Object.getOwnPropertyNames(t)};var c=Number.isNaN||function NumberIsNaN(t){return t!=t};function EventEmitter(){EventEmitter.init.call(this)}t.exports=EventEmitter,t.exports.once=function once(t,r){return new Promise((function(i,a){function errorListener(i){t.removeListener(r,resolver),a(i)}function resolver(){"function"==typeof t.removeListener&&t.removeListener("error",errorListener),i([].slice.call(arguments))}eventTargetAgnosticAddListener(t,r,resolver,{once:!0}),"error"!==r&&function addErrorHandlerIfEventEmitter(t,r,i){"function"==typeof t.on&&eventTargetAgnosticAddListener(t,"error",r,i)}(t,errorListener,{once:!0})}))},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var d=10;function checkListener(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function _getMaxListeners(t){return void 0===t._maxListeners?EventEmitter.defaultMaxListeners:t._maxListeners}function _addListener(t,r,i,a){var u,l,c;if(checkListener(i),void 0===(l=t._events)?(l=t._events=Object.create(null),t._eventsCount=0):(void 0!==l.newListener&&(t.emit("newListener",r,i.listener?i.listener:i),l=t._events),c=l[r]),void 0===c)c=l[r]=i,++t._eventsCount;else if("function"==typeof c?c=l[r]=a?[i,c]:[c,i]:a?c.unshift(i):c.push(i),(u=_getMaxListeners(t))>0&&c.length>u&&!c.warned){c.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=t,d.type=r,d.count=c.length,function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}(d)}return t}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,r,i){var a={fired:!1,wrapFn:void 0,target:t,type:r,listener:i},u=onceWrapper.bind(a);return u.listener=i,a.wrapFn=u,u}function _listeners(t,r,i){var a=t._events;if(void 0===a)return[];var u=a[r];return void 0===u?[]:"function"==typeof u?i?[u.listener||u]:[u]:i?function unwrapListeners(t){for(var r=new Array(t.length),i=0;i<r.length;++i)r[i]=t[i].listener||t[i];return r}(u):arrayClone(u,u.length)}function listenerCount(t){var r=this._events;if(void 0!==r){var i=r[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function arrayClone(t,r){for(var i=new Array(r),a=0;a<r;++a)i[a]=t[a];return i}function eventTargetAgnosticAddListener(t,r,i,a){if("function"==typeof t.on)a.once?t.once(r,i):t.on(r,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(r,(function wrapListener(u){a.once&&t.removeEventListener(r,wrapListener),i(u)}))}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function get(){return d},set:function set(t){if("number"!=typeof t||t<0||c(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");d=t}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function setMaxListeners(t){if("number"!=typeof t||t<0||c(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function emit(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var a="error"===t,u=this._events;if(void 0!==u)a=a&&void 0===u.error;else if(!a)return!1;if(a){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var d=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw d.context=c,d}var g=u[t];if(void 0===g)return!1;if("function"==typeof g)l(g,this,r);else{var p=g.length,m=arrayClone(g,p);for(i=0;i<p;++i)l(m[i],this,r)}return!0},EventEmitter.prototype.addListener=function addListener(t,r){return _addListener(this,t,r,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function prependListener(t,r){return _addListener(this,t,r,!0)},EventEmitter.prototype.once=function once(t,r){return checkListener(r),this.on(t,_onceWrap(this,t,r)),this},EventEmitter.prototype.prependOnceListener=function prependOnceListener(t,r){return checkListener(r),this.prependListener(t,_onceWrap(this,t,r)),this},EventEmitter.prototype.removeListener=function removeListener(t,r){var i,a,u,l,c;if(checkListener(r),void 0===(a=this._events))return this;if(void 0===(i=a[t]))return this;if(i===r||i.listener===r)0==--this._eventsCount?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,i.listener||r));else if("function"!=typeof i){for(u=-1,l=i.length-1;l>=0;l--)if(i[l]===r||i[l].listener===r){c=i[l].listener,u=l;break}if(u<0)return this;0===u?i.shift():function spliceOne(t,r){for(;r+1<t.length;r++)t[r]=t[r+1];t.pop()}(i,u),1===i.length&&(a[t]=i[0]),void 0!==a.removeListener&&this.emit("removeListener",t,c||r)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var r,i,a;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var u,l=Object.keys(i);for(a=0;a<l.length;++a)"removeListener"!==(u=l[a])&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(r=i[t]))this.removeListener(t,r);else if(void 0!==r)for(a=r.length-1;a>=0;a--)this.removeListener(t,r[a]);return this},EventEmitter.prototype.listeners=function listeners(t){return _listeners(this,t,!0)},EventEmitter.prototype.rawListeners=function rawListeners(t){return _listeners(this,t,!1)},EventEmitter.listenerCount=function(t,r){return"function"==typeof t.listenerCount?t.listenerCount(r):listenerCount.call(t,r)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?a(this._events):[]}},"./node_modules/node-libs-browser/node_modules/timers-browserify/main.js":
/*!*******************************************************************************!*\
    !*** ./node_modules/node-libs-browser/node_modules/timers-browserify/main.js ***!
    \*******************************************************************************/
/*! no static exports found */function node_modulesNodeLibsBrowserNode_modulesTimersBrowserifyMainJs(t,r,i){(function(t){var a=void 0!==t&&t||"undefined"!=typeof self&&self||window,u=Function.prototype.apply;function Timeout(t,r){this._id=t,this._clearFn=r}r.setTimeout=function(){return new Timeout(u.call(setTimeout,a,arguments),clearTimeout)},r.setInterval=function(){return new Timeout(u.call(setInterval,a,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(t){t&&t.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(a,this._id)},r.enroll=function(t,r){clearTimeout(t._idleTimeoutId),t._idleTimeout=r},r.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},r._unrefActive=r.active=function(t){clearTimeout(t._idleTimeoutId);var r=t._idleTimeout;r>=0&&(t._idleTimeoutId=setTimeout((function onTimeout(){t._onTimeout&&t._onTimeout()}),r))},i(/*! setimmediate */"./node_modules/setimmediate/setImmediate.js"),r.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,r.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(/*! ./../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/path-browserify/index.js":
/*!***********************************************!*\
    !*** ./node_modules/path-browserify/index.js ***!
    \***********************************************/
/*! no static exports found */function node_modulesPathBrowserifyIndexJs(t,r,i){(function(t){function normalizeArray(t,r){for(var i=0,a=t.length-1;a>=0;a--){var u=t[a];"."===u?t.splice(a,1):".."===u?(t.splice(a,1),i++):i&&(t.splice(a,1),i--)}if(r)for(;i--;i)t.unshift("..");return t}function filter(t,r){if(t.filter)return t.filter(r);for(var i=[],a=0;a<t.length;a++)r(t[a],a,t)&&i.push(t[a]);return i}r.resolve=function(){for(var r="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var u=a>=0?arguments[a]:t.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(r=u+"/"+r,i="/"===u.charAt(0))}return(i?"/":"")+(r=normalizeArray(filter(r.split("/"),(function(t){return!!t})),!i).join("/"))||"."},r.normalize=function(t){var a=r.isAbsolute(t),u="/"===i(t,-1);return(t=normalizeArray(filter(t.split("/"),(function(t){return!!t})),!a).join("/"))||a||(t="."),t&&u&&(t+="/"),(a?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(filter(t,(function(t,r){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},r.relative=function(t,i){function trim(t){for(var r=0;r<t.length&&""===t[r];r++);for(var i=t.length-1;i>=0&&""===t[i];i--);return r>i?[]:t.slice(r,i-r+1)}t=r.resolve(t).substr(1),i=r.resolve(i).substr(1);for(var a=trim(t.split("/")),u=trim(i.split("/")),l=Math.min(a.length,u.length),c=l,d=0;d<l;d++)if(a[d]!==u[d]){c=d;break}var g=[];for(d=c;d<a.length;d++)g.push("..");return(g=g.concat(u.slice(c))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var r=t.charCodeAt(0),i=47===r,a=-1,u=!0,l=t.length-1;l>=1;--l)if(47===(r=t.charCodeAt(l))){if(!u){a=l;break}}else u=!1;return-1===a?i?"/":".":i&&1===a?"/":t.slice(0,a)},r.basename=function(t,r){var i=function basename(t){"string"!=typeof t&&(t+="");var r,i=0,a=-1,u=!0;for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!u){i=r+1;break}}else-1===a&&(u=!1,a=r+1);return-1===a?"":t.slice(i,a)}(t);return r&&i.substr(-1*r.length)===r&&(i=i.substr(0,i.length-r.length)),i},r.extname=function(t){"string"!=typeof t&&(t+="");for(var r=-1,i=0,a=-1,u=!0,l=0,c=t.length-1;c>=0;--c){var d=t.charCodeAt(c);if(47!==d)-1===a&&(u=!1,a=c+1),46===d?-1===r?r=c:1!==l&&(l=1):-1!==r&&(l=-1);else if(!u){i=c+1;break}}return-1===r||-1===a||0===l||1===l&&r===a-1&&r===i+1?"":t.slice(r,a)};var i="b"==="ab".substr(-1)?function(t,r,i){return t.substr(r,i)}:function(t,r,i){return r<0&&(r=t.length+r),t.substr(r,i)}}).call(this,i(/*! ./../process/browser.js */"./node_modules/process/browser.js"))},"./node_modules/process-nextick-args/index.js":
/*!****************************************************!*\
    !*** ./node_modules/process-nextick-args/index.js ***!
    \****************************************************/
/*! no static exports found */function node_modulesProcessNextickArgsIndexJs(t,r,i){(function(r){!r.version||0===r.version.indexOf("v0.")||0===r.version.indexOf("v1.")&&0!==r.version.indexOf("v1.8.")?t.exports={nextTick:function nextTick(t,i,a,u){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var l,c,d=arguments.length;switch(d){case 0:case 1:return r.nextTick(t);case 2:return r.nextTick((function afterTickOne(){t.call(null,i)}));case 3:return r.nextTick((function afterTickTwo(){t.call(null,i,a)}));case 4:return r.nextTick((function afterTickThree(){t.call(null,i,a,u)}));default:for(l=new Array(d-1),c=0;c<l.length;)l[c++]=arguments[c];return r.nextTick((function afterTick(){t.apply(null,l)}))}}}:t.exports=r}).call(this,i(/*! ./../process/browser.js */"./node_modules/process/browser.js"))},"./node_modules/process/browser.js":
/*!*****************************************!*\
    !*** ./node_modules/process/browser.js ***!
    \*****************************************/
/*! no static exports found */function node_modulesProcessBrowserJs(t,r){var i,a,u=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(i===setTimeout)return setTimeout(t,0);if((i===defaultSetTimout||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(r){try{return i.call(null,t,0)}catch(r){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){i=defaultSetTimout}try{a="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){a=defaultClearTimeout}}();var l,c=[],d=!1,g=-1;function cleanUpNextTick(){d&&l&&(d=!1,l.length?c=l.concat(c):g=-1,c.length&&drainQueue())}function drainQueue(){if(!d){var t=runTimeout(cleanUpNextTick);d=!0;for(var r=c.length;r;){for(l=c,c=[];++g<r;)l&&l[g].run();g=-1,r=c.length}l=null,d=!1,function runClearTimeout(t){if(a===clearTimeout)return clearTimeout(t);if((a===defaultClearTimeout||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{return a(t)}catch(r){try{return a.call(null,t)}catch(r){return a.call(this,t)}}}(t)}}function Item(t,r){this.fun=t,this.array=r}function noop(){}u.nextTick=function(t){var r=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)r[i-1]=arguments[i];c.push(new Item(t,r)),1!==c.length||d||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=noop,u.addListener=noop,u.once=noop,u.off=noop,u.removeListener=noop,u.removeAllListeners=noop,u.emit=noop,u.prependListener=noop,u.prependOnceListener=noop,u.listeners=function(t){return[]},u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},"./node_modules/readable-stream/duplex-browser.js":
/*!********************************************************!*\
    !*** ./node_modules/readable-stream/duplex-browser.js ***!
    \********************************************************/
/*! no static exports found */function node_modulesReadableStreamDuplexBrowserJs(t,r,i){t.exports=i(/*! ./lib/_stream_duplex.js */"./node_modules/readable-stream/lib/_stream_duplex.js")},"./node_modules/readable-stream/lib/_stream_duplex.js":
/*!************************************************************!*\
    !*** ./node_modules/readable-stream/lib/_stream_duplex.js ***!
    \************************************************************/
/*! no static exports found */function node_modulesReadableStreamLib_stream_duplexJs(t,r,i){var a=i(/*! process-nextick-args */"./node_modules/process-nextick-args/index.js"),u=Object.keys||function(t){var r=[];for(var i in t)r.push(i);return r};t.exports=Duplex;var l=i(/*! core-util-is */"./node_modules/core-util-is/lib/util.js");l.inherits=i(/*! inherits */"./node_modules/inherits/inherits_browser.js");var c=i(/*! ./_stream_readable */"./node_modules/readable-stream/lib/_stream_readable.js"),d=i(/*! ./_stream_writable */"./node_modules/readable-stream/lib/_stream_writable.js");l.inherits(Duplex,c);for(var g=u(d.prototype),p=0;p<g.length;p++){var m=g[p];Duplex.prototype[m]||(Duplex.prototype[m]=d.prototype[m])}function Duplex(t){if(!(this instanceof Duplex))return new Duplex(t);c.call(this,t),d.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||a.nextTick(onEndNT,this)}function onEndNT(t){t.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function set(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),Duplex.prototype._destroy=function(t,r){this.push(null),this.end(),a.nextTick(r,t)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":
/*!*****************************************************************!*\
    !*** ./node_modules/readable-stream/lib/_stream_passthrough.js ***!
    \*****************************************************************/
/*! no static exports found */function node_modulesReadableStreamLib_stream_passthroughJs(t,r,i){t.exports=PassThrough;var a=i(/*! ./_stream_transform */"./node_modules/readable-stream/lib/_stream_transform.js"),u=i(/*! core-util-is */"./node_modules/core-util-is/lib/util.js");function PassThrough(t){if(!(this instanceof PassThrough))return new PassThrough(t);a.call(this,t)}u.inherits=i(/*! inherits */"./node_modules/inherits/inherits_browser.js"),u.inherits(PassThrough,a),PassThrough.prototype._transform=function(t,r,i){i(null,t)}},"./node_modules/readable-stream/lib/_stream_readable.js":
/*!**************************************************************!*\
    !*** ./node_modules/readable-stream/lib/_stream_readable.js ***!
    \**************************************************************/
/*! no static exports found */function node_modulesReadableStreamLib_stream_readableJs(t,r,i){(function(r,a){var u=i(/*! process-nextick-args */"./node_modules/process-nextick-args/index.js");t.exports=Readable;var l,c=i(/*! isarray */"./node_modules/isarray/index.js");Readable.ReadableState=ReadableState,i(/*! events */"./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter;var d=function EElistenerCount(t,r){return t.listeners(r).length},g=i(/*! ./internal/streams/stream */"./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),p=i(/*! safe-buffer */"./node_modules/safe-buffer/index.js").Buffer,m=r.Uint8Array||function(){};var v=i(/*! core-util-is */"./node_modules/core-util-is/lib/util.js");v.inherits=i(/*! inherits */"./node_modules/inherits/inherits_browser.js");var b=i(/*! util */0),M=void 0;M=b&&b.debuglog?b.debuglog("stream"):function debug(){};var S,E=i(/*! ./internal/streams/BufferList */"./node_modules/readable-stream/lib/internal/streams/BufferList.js"),I=i(/*! ./internal/streams/destroy */"./node_modules/readable-stream/lib/internal/streams/destroy.js");v.inherits(Readable,g);var D=["error","close","destroy","pause","resume"];function ReadableState(t,r){t=t||{};var a=r instanceof(l=l||i(/*! ./_stream_duplex */"./node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var u=t.highWaterMark,c=t.readableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=u||0===u?u:a&&(c||0===c)?c:d,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new E,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(S||(S=i(/*! string_decoder/ */"./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new S(t.encoding),this.encoding=t.encoding)}function Readable(t){if(l=l||i(/*! ./_stream_duplex */"./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof Readable))return new Readable(t);this._readableState=new ReadableState(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),g.call(this)}function readableAddChunk(t,r,i,a,u){var l,c=t._readableState;null===r?(c.reading=!1,function onEofChunk(t,r){if(r.ended)return;if(r.decoder){var i=r.decoder.end();i&&i.length&&(r.buffer.push(i),r.length+=r.objectMode?1:i.length)}r.ended=!0,emitReadable(t)}(t,c)):(u||(l=function chunkInvalid(t,r){var i;(function _isUint8Array(t){return p.isBuffer(t)||t instanceof m})(r)||"string"==typeof r||void 0===r||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));return i}(c,r)),l?t.emit("error",l):c.objectMode||r&&r.length>0?("string"==typeof r||c.objectMode||Object.getPrototypeOf(r)===p.prototype||(r=function _uint8ArrayToBuffer(t){return p.from(t)}(r)),a?c.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):addChunk(t,c,r,!0):c.ended?t.emit("error",new Error("stream.push() after EOF")):(c.reading=!1,c.decoder&&!i?(r=c.decoder.write(r),c.objectMode||0!==r.length?addChunk(t,c,r,!1):maybeReadMore(t,c)):addChunk(t,c,r,!1))):a||(c.reading=!1));return function needMoreData(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(c)}function addChunk(t,r,i,a){r.flowing&&0===r.length&&!r.sync?(t.emit("data",i),t.read(0)):(r.length+=r.objectMode?1:i.length,a?r.buffer.unshift(i):r.buffer.push(i),r.needReadable&&emitReadable(t)),maybeReadMore(t,r)}Object.defineProperty(Readable.prototype,"destroyed",{get:function get(){return void 0!==this._readableState&&this._readableState.destroyed},set:function set(t){this._readableState&&(this._readableState.destroyed=t)}}),Readable.prototype.destroy=I.destroy,Readable.prototype._undestroy=I.undestroy,Readable.prototype._destroy=function(t,r){this.push(null),r(t)},Readable.prototype.push=function(t,r){var i,a=this._readableState;return a.objectMode?i=!0:"string"==typeof t&&((r=r||a.defaultEncoding)!==a.encoding&&(t=p.from(t,r),r=""),i=!0),readableAddChunk(this,t,r,!1,i)},Readable.prototype.unshift=function(t){return readableAddChunk(this,t,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(t){return S||(S=i(/*! string_decoder/ */"./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new S(t),this._readableState.encoding=t,this};var A=8388608;function howMuchToRead(t,r){return t<=0||0===r.length&&r.ended?0:r.objectMode?1:t!=t?r.flowing&&r.length?r.buffer.head.data.length:r.length:(t>r.highWaterMark&&(r.highWaterMark=function computeNewHighWaterMark(t){return t>=A?t=A:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=r.length?t:r.ended?r.length:(r.needReadable=!0,0))}function emitReadable(t){var r=t._readableState;r.needReadable=!1,r.emittedReadable||(M("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?u.nextTick(emitReadable_,t):emitReadable_(t))}function emitReadable_(t){M("emit readable"),t.emit("readable"),flow(t)}function maybeReadMore(t,r){r.readingMore||(r.readingMore=!0,u.nextTick(maybeReadMore_,t,r))}function maybeReadMore_(t,r){for(var i=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(M("maybeReadMore read 0"),t.read(0),i!==r.length);)i=r.length;r.readingMore=!1}function nReadingNextTick(t){M("readable nexttick read 0"),t.read(0)}function resume_(t,r){r.reading||(M("resume read 0"),t.read(0)),r.resumeScheduled=!1,r.awaitDrain=0,t.emit("resume"),flow(t),r.flowing&&!r.reading&&t.read(0)}function flow(t){var r=t._readableState;for(M("flow",r.flowing);r.flowing&&null!==t.read(););}function fromList(t,r){return 0===r.length?null:(r.objectMode?i=r.buffer.shift():!t||t>=r.length?(i=r.decoder?r.buffer.join(""):1===r.buffer.length?r.buffer.head.data:r.buffer.concat(r.length),r.buffer.clear()):i=function fromListPartial(t,r,i){var a;t<r.head.data.length?(a=r.head.data.slice(0,t),r.head.data=r.head.data.slice(t)):a=t===r.head.data.length?r.shift():i?function copyFromBufferString(t,r){var i=r.head,a=1,u=i.data;t-=u.length;for(;i=i.next;){var l=i.data,c=t>l.length?l.length:t;if(c===l.length?u+=l:u+=l.slice(0,t),0===(t-=c)){c===l.length?(++a,i.next?r.head=i.next:r.head=r.tail=null):(r.head=i,i.data=l.slice(c));break}++a}return r.length-=a,u}(t,r):function copyFromBuffer(t,r){var i=p.allocUnsafe(t),a=r.head,u=1;a.data.copy(i),t-=a.data.length;for(;a=a.next;){var l=a.data,c=t>l.length?l.length:t;if(l.copy(i,i.length-t,0,c),0===(t-=c)){c===l.length?(++u,a.next?r.head=a.next:r.head=r.tail=null):(r.head=a,a.data=l.slice(c));break}++u}return r.length-=u,i}(t,r);return a}(t,r.buffer,r.decoder),i);var i}function endReadable(t){var r=t._readableState;if(r.length>0)throw new Error('"endReadable()" called on non-empty stream');r.endEmitted||(r.ended=!0,u.nextTick(endReadableNT,r,t))}function endReadableNT(t,r){t.endEmitted||0!==t.length||(t.endEmitted=!0,r.readable=!1,r.emit("end"))}function indexOf(t,r){for(var i=0,a=t.length;i<a;i++)if(t[i]===r)return i;return-1}Readable.prototype.read=function(t){M("read",t),t=parseInt(t,10);var r=this._readableState,i=t;if(0!==t&&(r.emittedReadable=!1),0===t&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return M("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?endReadable(this):emitReadable(this),null;if(0===(t=howMuchToRead(t,r))&&r.ended)return 0===r.length&&endReadable(this),null;var a,u=r.needReadable;return M("need readable",u),(0===r.length||r.length-t<r.highWaterMark)&&M("length less than watermark",u=!0),r.ended||r.reading?M("reading or ended",u=!1):u&&(M("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(t=howMuchToRead(i,r))),null===(a=t>0?fromList(t,r):null)?(r.needReadable=!0,t=0):r.length-=t,0===r.length&&(r.ended||(r.needReadable=!0),i!==t&&r.ended&&endReadable(this)),null!==a&&this.emit("data",a),a},Readable.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(t,r){var i=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=t;break;case 1:l.pipes=[l.pipes,t];break;default:l.pipes.push(t)}l.pipesCount+=1,M("pipe count=%d opts=%j",l.pipesCount,r);var g=(!r||!1!==r.end)&&t!==a.stdout&&t!==a.stderr?onend:unpipe;function onunpipe(r,a){M("onunpipe"),r===i&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,function cleanup(){M("cleanup"),t.removeListener("close",onclose),t.removeListener("finish",onfinish),t.removeListener("drain",p),t.removeListener("error",onerror),t.removeListener("unpipe",onunpipe),i.removeListener("end",onend),i.removeListener("end",unpipe),i.removeListener("data",ondata),m=!0,!l.awaitDrain||t._writableState&&!t._writableState.needDrain||p()}())}function onend(){M("onend"),t.end()}l.endEmitted?u.nextTick(g):i.once("end",g),t.on("unpipe",onunpipe);var p=function pipeOnDrain(t){return function(){var r=t._readableState;M("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&d(t,"data")&&(r.flowing=!0,flow(t))}}(i);t.on("drain",p);var m=!1;var v=!1;function ondata(r){M("ondata"),v=!1,!1!==t.write(r)||v||((1===l.pipesCount&&l.pipes===t||l.pipesCount>1&&-1!==indexOf(l.pipes,t))&&!m&&(M("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,v=!0),i.pause())}function onerror(r){M("onerror",r),unpipe(),t.removeListener("error",onerror),0===d(t,"error")&&t.emit("error",r)}function onclose(){t.removeListener("finish",onfinish),unpipe()}function onfinish(){M("onfinish"),t.removeListener("close",onclose),unpipe()}function unpipe(){M("unpipe"),i.unpipe(t)}return i.on("data",ondata),function prependListener(t,r,i){if("function"==typeof t.prependListener)return t.prependListener(r,i);t._events&&t._events[r]?c(t._events[r])?t._events[r].unshift(i):t._events[r]=[i,t._events[r]]:t.on(r,i)}(t,"error",onerror),t.once("close",onclose),t.once("finish",onfinish),t.emit("pipe",i),l.flowing||(M("pipe resume"),i.resume()),t},Readable.prototype.unpipe=function(t){var r=this._readableState,i={hasUnpiped:!1};if(0===r.pipesCount)return this;if(1===r.pipesCount)return t&&t!==r.pipes||(t||(t=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var a=r.pipes,u=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var l=0;l<u;l++)a[l].emit("unpipe",this,i);return this}var c=indexOf(r.pipes,t);return-1===c||(r.pipes.splice(c,1),r.pipesCount-=1,1===r.pipesCount&&(r.pipes=r.pipes[0]),t.emit("unpipe",this,i)),this},Readable.prototype.on=function(t,r){var i=g.prototype.on.call(this,t,r);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var a=this._readableState;a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&emitReadable(this):u.nextTick(nReadingNextTick,this))}return i},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var t=this._readableState;return t.flowing||(M("resume"),t.flowing=!0,function resume(t,r){r.resumeScheduled||(r.resumeScheduled=!0,u.nextTick(resume_,t,r))}(this,t)),this},Readable.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(t){var r=this,i=this._readableState,a=!1;for(var u in t.on("end",(function(){if(M("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&r.push(t)}r.push(null)})),t.on("data",(function(u){(M("wrapped data"),i.decoder&&(u=i.decoder.write(u)),i.objectMode&&null==u)||(i.objectMode||u&&u.length)&&(r.push(u)||(a=!0,t.pause()))})),t)void 0===this[u]&&"function"==typeof t[u]&&(this[u]=function(r){return function(){return t[r].apply(t,arguments)}}(u));for(var l=0;l<D.length;l++)t.on(D[l],this.emit.bind(this,D[l]));return this._read=function(r){M("wrapped _read",r),a&&(a=!1,t.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function get(){return this._readableState.highWaterMark}}),Readable._fromList=fromList}).call(this,i(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"),i(/*! ./../../process/browser.js */"./node_modules/process/browser.js"))},"./node_modules/readable-stream/lib/_stream_transform.js":
/*!***************************************************************!*\
    !*** ./node_modules/readable-stream/lib/_stream_transform.js ***!
    \***************************************************************/
/*! no static exports found */function node_modulesReadableStreamLib_stream_transformJs(t,r,i){t.exports=Transform;var a=i(/*! ./_stream_duplex */"./node_modules/readable-stream/lib/_stream_duplex.js"),u=i(/*! core-util-is */"./node_modules/core-util-is/lib/util.js");function afterTransform(t,r){var i=this._transformState;i.transforming=!1;var a=i.writecb;if(!a)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=r&&this.push(r),a(t);var u=this._readableState;u.reading=!1,(u.needReadable||u.length<u.highWaterMark)&&this._read(u.highWaterMark)}function Transform(t){if(!(this instanceof Transform))return new Transform(t);a.call(this,t),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",prefinish)}function prefinish(){var t=this;"function"==typeof this._flush?this._flush((function(r,i){done(t,r,i)})):done(this,null,null)}function done(t,r,i){if(r)return t.emit("error",r);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}u.inherits=i(/*! inherits */"./node_modules/inherits/inherits_browser.js"),u.inherits(Transform,a),Transform.prototype.push=function(t,r){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,r)},Transform.prototype._transform=function(t,r,i){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(t,r,i){var a=this._transformState;if(a.writecb=i,a.writechunk=t,a.writeencoding=r,!a.transforming){var u=this._readableState;(a.needTransform||u.needReadable||u.length<u.highWaterMark)&&this._read(u.highWaterMark)}},Transform.prototype._read=function(t){var r=this._transformState;null!==r.writechunk&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0},Transform.prototype._destroy=function(t,r){var i=this;a.prototype._destroy.call(this,t,(function(t){r(t),i.emit("close")}))}},"./node_modules/readable-stream/lib/_stream_writable.js":
/*!**************************************************************!*\
    !*** ./node_modules/readable-stream/lib/_stream_writable.js ***!
    \**************************************************************/
/*! no static exports found */function node_modulesReadableStreamLib_stream_writableJs(t,r,i){(function(r,a,u){var l=i(/*! process-nextick-args */"./node_modules/process-nextick-args/index.js");function CorkedRequest(t){var r=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(t,r,i){var a=t.entry;t.entry=null;for(;a;){var u=a.callback;r.pendingcb--,u(i),a=a.next}r.corkedRequestsFree?r.corkedRequestsFree.next=t:r.corkedRequestsFree=t}(r,t)}}t.exports=Writable;var c,d=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?a:l.nextTick;Writable.WritableState=WritableState;var g=i(/*! core-util-is */"./node_modules/core-util-is/lib/util.js");g.inherits=i(/*! inherits */"./node_modules/inherits/inherits_browser.js");var p={deprecate:i(/*! util-deprecate */"./node_modules/util-deprecate/browser.js")},m=i(/*! ./internal/streams/stream */"./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),v=i(/*! safe-buffer */"./node_modules/safe-buffer/index.js").Buffer,b=u.Uint8Array||function(){};var M,S=i(/*! ./internal/streams/destroy */"./node_modules/readable-stream/lib/internal/streams/destroy.js");function nop(){}function WritableState(t,r){c=c||i(/*! ./_stream_duplex */"./node_modules/readable-stream/lib/_stream_duplex.js"),t=t||{};var a=r instanceof c;this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var u=t.highWaterMark,g=t.writableHighWaterMark,p=this.objectMode?16:16384;this.highWaterMark=u||0===u?u:a&&(g||0===g)?g:p,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var m=!1===t.decodeStrings;this.decodeStrings=!m,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function onwrite(t,r){var i=t._writableState,a=i.sync,u=i.writecb;if(function onwriteStateUpdate(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),r)!function onwriteError(t,r,i,a,u){--r.pendingcb,i?(l.nextTick(u,a),l.nextTick(finishMaybe,t,r),t._writableState.errorEmitted=!0,t.emit("error",a)):(u(a),t._writableState.errorEmitted=!0,t.emit("error",a),finishMaybe(t,r))}(t,i,a,r,u);else{var c=needFinish(i);c||i.corked||i.bufferProcessing||!i.bufferedRequest||clearBuffer(t,i),a?d(afterWrite,t,i,c,u):afterWrite(t,i,c,u)}}(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(t){if(c=c||i(/*! ./_stream_duplex */"./node_modules/readable-stream/lib/_stream_duplex.js"),!(M.call(Writable,this)||this instanceof c))return new Writable(t);this._writableState=new WritableState(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),m.call(this)}function doWrite(t,r,i,a,u,l,c){r.writelen=a,r.writecb=c,r.writing=!0,r.sync=!0,i?t._writev(u,r.onwrite):t._write(u,l,r.onwrite),r.sync=!1}function afterWrite(t,r,i,a){i||function onwriteDrain(t,r){0===r.length&&r.needDrain&&(r.needDrain=!1,t.emit("drain"))}(t,r),r.pendingcb--,a(),finishMaybe(t,r)}function clearBuffer(t,r){r.bufferProcessing=!0;var i=r.bufferedRequest;if(t._writev&&i&&i.next){var a=r.bufferedRequestCount,u=new Array(a),l=r.corkedRequestsFree;l.entry=i;for(var c=0,d=!0;i;)u[c]=i,i.isBuf||(d=!1),i=i.next,c+=1;u.allBuffers=d,doWrite(t,r,!0,r.length,u,"",l.finish),r.pendingcb++,r.lastBufferedRequest=null,l.next?(r.corkedRequestsFree=l.next,l.next=null):r.corkedRequestsFree=new CorkedRequest(r),r.bufferedRequestCount=0}else{for(;i;){var g=i.chunk,p=i.encoding,m=i.callback;if(doWrite(t,r,!1,r.objectMode?1:g.length,g,p,m),i=i.next,r.bufferedRequestCount--,r.writing)break}null===i&&(r.lastBufferedRequest=null)}r.bufferedRequest=i,r.bufferProcessing=!1}function needFinish(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function callFinal(t,r){t._final((function(i){r.pendingcb--,i&&t.emit("error",i),r.prefinished=!0,t.emit("prefinish"),finishMaybe(t,r)}))}function finishMaybe(t,r){var i=needFinish(r);return i&&(!function prefinish(t,r){r.prefinished||r.finalCalled||("function"==typeof t._final?(r.pendingcb++,r.finalCalled=!0,l.nextTick(callFinal,t,r)):(r.prefinished=!0,t.emit("prefinish")))}(t,r),0===r.pendingcb&&(r.finished=!0,t.emit("finish"))),i}g.inherits(Writable,m),WritableState.prototype.getBuffer=function getBuffer(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:p.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(M=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(t){return!!M.call(this,t)||this===Writable&&(t&&t._writableState instanceof WritableState)}})):M=function realHasInstance(t){return t instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(t,r,i){var a=this._writableState,u=!1,c=!a.objectMode&&function _isUint8Array(t){return v.isBuffer(t)||t instanceof b}(t);return c&&!v.isBuffer(t)&&(t=function _uint8ArrayToBuffer(t){return v.from(t)}(t)),"function"==typeof r&&(i=r,r=null),c?r="buffer":r||(r=a.defaultEncoding),"function"!=typeof i&&(i=nop),a.ended?function writeAfterEnd(t,r){var i=new Error("write after end");t.emit("error",i),l.nextTick(r,i)}(this,i):(c||function validChunk(t,r,i,a){var u=!0,c=!1;return null===i?c=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||r.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c&&(t.emit("error",c),l.nextTick(a,c),u=!1),u}(this,a,t,i))&&(a.pendingcb++,u=function writeOrBuffer(t,r,i,a,u,l){if(!i){var c=function decodeChunk(t,r,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof r||(r=v.from(r,i));return r}(r,a,u);a!==c&&(i=!0,u="buffer",a=c)}var d=r.objectMode?1:a.length;r.length+=d;var g=r.length<r.highWaterMark;g||(r.needDrain=!0);if(r.writing||r.corked){var p=r.lastBufferedRequest;r.lastBufferedRequest={chunk:a,encoding:u,isBuf:i,callback:l,next:null},p?p.next=r.lastBufferedRequest:r.bufferedRequest=r.lastBufferedRequest,r.bufferedRequestCount+=1}else doWrite(t,r,!1,d,a,u,l);return g}(this,a,c,t,r,i)),u},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||clearBuffer(this,t))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(t,r,i){i(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(t,r,i){var a=this._writableState;"function"==typeof t?(i=t,t=null,r=null):"function"==typeof r&&(i=r,r=null),null!=t&&this.write(t,r),a.corked&&(a.corked=1,this.uncork()),a.ending||a.finished||function endWritable(t,r,i){r.ending=!0,finishMaybe(t,r),i&&(r.finished?l.nextTick(i):t.once("finish",i));r.ended=!0,t.writable=!1}(this,a,i)},Object.defineProperty(Writable.prototype,"destroyed",{get:function get(){return void 0!==this._writableState&&this._writableState.destroyed},set:function set(t){this._writableState&&(this._writableState.destroyed=t)}}),Writable.prototype.destroy=S.destroy,Writable.prototype._undestroy=S.undestroy,Writable.prototype._destroy=function(t,r){this.end(),r(t)}}).call(this,i(/*! ./../../process/browser.js */"./node_modules/process/browser.js"),i(/*! ./../../node-libs-browser/node_modules/timers-browserify/main.js */"./node_modules/node-libs-browser/node_modules/timers-browserify/main.js").setImmediate,i(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":
/*!*************************************************************************!*\
    !*** ./node_modules/readable-stream/lib/internal/streams/BufferList.js ***!
    \*************************************************************************/
/*! no static exports found */function node_modulesReadableStreamLibInternalStreamsBufferListJs(t,r,i){var a=i(/*! safe-buffer */"./node_modules/safe-buffer/index.js").Buffer,u=i(/*! util */1);function copyBuffer(t,r,i){t.copy(r,i)}t.exports=function(){function BufferList(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function push(t){var r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length},BufferList.prototype.unshift=function unshift(t){var r={data:t,next:this.head};0===this.length&&(this.tail=r),this.head=r,++this.length},BufferList.prototype.shift=function shift(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},BufferList.prototype.clear=function clear(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function join(t){if(0===this.length)return"";for(var r=this.head,i=""+r.data;r=r.next;)i+=t+r.data;return i},BufferList.prototype.concat=function concat(t){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var r=a.allocUnsafe(t>>>0),i=this.head,u=0;i;)copyBuffer(i.data,r,u),u+=i.data.length,i=i.next;return r},BufferList}(),u&&u.inspect&&u.inspect.custom&&(t.exports.prototype[u.inspect.custom]=function(){var t=u.inspect({length:this.length});return this.constructor.name+" "+t})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":
/*!**********************************************************************!*\
    !*** ./node_modules/readable-stream/lib/internal/streams/destroy.js ***!
    \**********************************************************************/
/*! no static exports found */function node_modulesReadableStreamLibInternalStreamsDestroyJs(t,r,i){var a=i(/*! process-nextick-args */"./node_modules/process-nextick-args/index.js");function emitErrorNT(t,r){t.emit("error",r)}t.exports={destroy:function destroy(t,r){var i=this,u=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return u||l?(r?r(t):!t||this._writableState&&this._writableState.errorEmitted||a.nextTick(emitErrorNT,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!r&&t?(a.nextTick(emitErrorNT,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):r&&r(t)})),this)},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":
/*!*****************************************************************************!*\
    !*** ./node_modules/readable-stream/lib/internal/streams/stream-browser.js ***!
    \*****************************************************************************/
/*! no static exports found */function node_modulesReadableStreamLibInternalStreamsStreamBrowserJs(t,r,i){t.exports=i(/*! events */"./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/passthrough.js":
/*!*****************************************************!*\
    !*** ./node_modules/readable-stream/passthrough.js ***!
    \*****************************************************/
/*! no static exports found */function node_modulesReadableStreamPassthroughJs(t,r,i){t.exports=i(/*! ./readable */"./node_modules/readable-stream/readable-browser.js").PassThrough},"./node_modules/readable-stream/readable-browser.js":
/*!**********************************************************!*\
    !*** ./node_modules/readable-stream/readable-browser.js ***!
    \**********************************************************/
/*! no static exports found */function node_modulesReadableStreamReadableBrowserJs(t,r,i){(r=t.exports=i(/*! ./lib/_stream_readable.js */"./node_modules/readable-stream/lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=i(/*! ./lib/_stream_writable.js */"./node_modules/readable-stream/lib/_stream_writable.js"),r.Duplex=i(/*! ./lib/_stream_duplex.js */"./node_modules/readable-stream/lib/_stream_duplex.js"),r.Transform=i(/*! ./lib/_stream_transform.js */"./node_modules/readable-stream/lib/_stream_transform.js"),r.PassThrough=i(/*! ./lib/_stream_passthrough.js */"./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/readable-stream/transform.js":
/*!***************************************************!*\
    !*** ./node_modules/readable-stream/transform.js ***!
    \***************************************************/
/*! no static exports found */function node_modulesReadableStreamTransformJs(t,r,i){t.exports=i(/*! ./readable */"./node_modules/readable-stream/readable-browser.js").Transform},"./node_modules/readable-stream/writable-browser.js":
/*!**********************************************************!*\
    !*** ./node_modules/readable-stream/writable-browser.js ***!
    \**********************************************************/
/*! no static exports found */function node_modulesReadableStreamWritableBrowserJs(t,r,i){t.exports=i(/*! ./lib/_stream_writable.js */"./node_modules/readable-stream/lib/_stream_writable.js")},"./node_modules/safe-buffer/index.js":
/*!*******************************************!*\
    !*** ./node_modules/safe-buffer/index.js ***!
    \*******************************************/
/*! no static exports found */function node_modulesSafeBufferIndexJs(t,r,i){var a=i(/*! buffer */"./node_modules/node-libs-browser/node_modules/buffer/index.js"),u=a.Buffer;function copyProps(t,r){for(var i in t)r[i]=t[i]}function SafeBuffer(t,r,i){return u(t,r,i)}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?t.exports=a:(copyProps(a,r),r.Buffer=SafeBuffer),copyProps(u,SafeBuffer),SafeBuffer.from=function(t,r,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return u(t,r,i)},SafeBuffer.alloc=function(t,r,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var a=u(t);return void 0!==r?"string"==typeof i?a.fill(r,i):a.fill(r):a.fill(0),a},SafeBuffer.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return u(t)},SafeBuffer.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return a.SlowBuffer(t)}},"./node_modules/sax/lib/sax.js":
/*!*************************************!*\
    !*** ./node_modules/sax/lib/sax.js ***!
    \*************************************/
/*! no static exports found */function node_modulesSaxLibSaxJs(t,r,i){(function(t){!function(r){r.parser=function(t,r){return new SAXParser(t,r)},r.SAXParser=SAXParser,r.SAXStream=SAXStream,r.createStream=function createStream(t,r){return new SAXStream(t,r)},r.MAX_BUFFER_LENGTH=65536;var a,u=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function SAXParser(t,i){if(!(this instanceof SAXParser))return new SAXParser(t,i);var a=this;!function clearBuffers(t){for(var r=0,i=u.length;r<i;r++)t[u[r]]=""}(a),a.q=a.c="",a.bufferCheckPosition=r.MAX_BUFFER_LENGTH,a.opt=i||{},a.opt.lowercase=a.opt.lowercase||a.opt.lowercasetags,a.looseCase=a.opt.lowercase?"toLowerCase":"toUpperCase",a.tags=[],a.closed=a.closedRoot=a.sawRoot=!1,a.tag=a.error=null,a.strict=!!t,a.noscript=!(!t&&!a.opt.noscript),a.state=k.BEGIN,a.strictEntities=a.opt.strictEntities,a.ENTITIES=a.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),a.attribList=[],a.opt.xmlns&&(a.ns=Object.create(M)),a.trackPosition=!1!==a.opt.position,a.trackPosition&&(a.position=a.line=a.column=0),emit(a,"onready")}r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function F(){}return F.prototype=t,new F}),Object.keys||(Object.keys=function(t){var r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(i);return r}),SAXParser.prototype={end:function end(){_end(this)},write:function write(t){var i=this;if(this.error)throw this.error;if(i.closed)return error(i,"Cannot write after close. Assign an onready handler.");if(null===t)return _end(i);"object"==typeof t&&(t=t.toString());var a=0,l="";for(;l=charAt(t,a++),i.c=l,l;)switch(i.trackPosition&&(i.position++,"\n"===l?(i.line++,i.column=0):i.column++),i.state){case k.BEGIN:if(i.state=k.BEGIN_WHITESPACE,"\ufeff"===l)continue;beginWhiteSpace(i,l);continue;case k.BEGIN_WHITESPACE:beginWhiteSpace(i,l);continue;case k.TEXT:if(i.sawRoot&&!i.closedRoot){for(var d=a-1;l&&"<"!==l&&"&"!==l;)(l=charAt(t,a++))&&i.trackPosition&&(i.position++,"\n"===l?(i.line++,i.column=0):i.column++);i.textNode+=t.substring(d,a-1)}"<"!==l||i.sawRoot&&i.closedRoot&&!i.strict?(!not(c,l)||i.sawRoot&&!i.closedRoot||strictFail(i,"Text data outside of root node."),"&"===l?i.state=k.TEXT_ENTITY:i.textNode+=l):(i.state=k.OPEN_WAKA,i.startTagPosition=i.position);continue;case k.SCRIPT:"<"===l?i.state=k.SCRIPT_ENDING:i.script+=l;continue;case k.SCRIPT_ENDING:"/"===l?i.state=k.CLOSE_TAG:(i.script+="<"+l,i.state=k.SCRIPT);continue;case k.OPEN_WAKA:if("!"===l)i.state=k.SGML_DECL,i.sgmlDecl="";else if(is(c,l));else if(is(S,l))i.state=k.OPEN_TAG,i.tagName=l;else if("/"===l)i.state=k.CLOSE_TAG,i.tagName="";else if("?"===l)i.state=k.PROC_INST,i.procInstName=i.procInstBody="";else{if(strictFail(i,"Unencoded <"),i.startTagPosition+1<i.position){var g=i.position-i.startTagPosition;l=new Array(g).join(" ")+l}i.textNode+="<"+l,i.state=k.TEXT}continue;case k.SGML_DECL:"[CDATA["===(i.sgmlDecl+l).toUpperCase()?(emitNode(i,"onopencdata"),i.state=k.CDATA,i.sgmlDecl="",i.cdata=""):i.sgmlDecl+l==="--"?(i.state=k.COMMENT,i.comment="",i.sgmlDecl=""):"DOCTYPE"===(i.sgmlDecl+l).toUpperCase()?(i.state=k.DOCTYPE,(i.doctype||i.sawRoot)&&strictFail(i,"Inappropriately located doctype declaration"),i.doctype="",i.sgmlDecl=""):">"===l?(emitNode(i,"onsgmldeclaration",i.sgmlDecl),i.sgmlDecl="",i.state=k.TEXT):is(p,l)?(i.state=k.SGML_DECL_QUOTED,i.sgmlDecl+=l):i.sgmlDecl+=l;continue;case k.SGML_DECL_QUOTED:l===i.q&&(i.state=k.SGML_DECL,i.q=""),i.sgmlDecl+=l;continue;case k.DOCTYPE:">"===l?(i.state=k.TEXT,emitNode(i,"ondoctype",i.doctype),i.doctype=!0):(i.doctype+=l,"["===l?i.state=k.DOCTYPE_DTD:is(p,l)&&(i.state=k.DOCTYPE_QUOTED,i.q=l));continue;case k.DOCTYPE_QUOTED:i.doctype+=l,l===i.q&&(i.q="",i.state=k.DOCTYPE);continue;case k.DOCTYPE_DTD:i.doctype+=l,"]"===l?i.state=k.DOCTYPE:is(p,l)&&(i.state=k.DOCTYPE_DTD_QUOTED,i.q=l);continue;case k.DOCTYPE_DTD_QUOTED:i.doctype+=l,l===i.q&&(i.state=k.DOCTYPE_DTD,i.q="");continue;case k.COMMENT:"-"===l?i.state=k.COMMENT_ENDING:i.comment+=l;continue;case k.COMMENT_ENDING:"-"===l?(i.state=k.COMMENT_ENDED,i.comment=textopts(i.opt,i.comment),i.comment&&emitNode(i,"oncomment",i.comment),i.comment=""):(i.comment+="-"+l,i.state=k.COMMENT);continue;case k.COMMENT_ENDED:">"!==l?(strictFail(i,"Malformed comment"),i.comment+="--"+l,i.state=k.COMMENT):i.state=k.TEXT;continue;case k.CDATA:"]"===l?i.state=k.CDATA_ENDING:i.cdata+=l;continue;case k.CDATA_ENDING:"]"===l?i.state=k.CDATA_ENDING_2:(i.cdata+="]"+l,i.state=k.CDATA);continue;case k.CDATA_ENDING_2:">"===l?(i.cdata&&emitNode(i,"oncdata",i.cdata),emitNode(i,"onclosecdata"),i.cdata="",i.state=k.TEXT):"]"===l?i.cdata+="]":(i.cdata+="]]"+l,i.state=k.CDATA);continue;case k.PROC_INST:"?"===l?i.state=k.PROC_INST_ENDING:is(c,l)?i.state=k.PROC_INST_BODY:i.procInstName+=l;continue;case k.PROC_INST_BODY:if(!i.procInstBody&&is(c,l))continue;"?"===l?i.state=k.PROC_INST_ENDING:i.procInstBody+=l;continue;case k.PROC_INST_ENDING:">"===l?(emitNode(i,"onprocessinginstruction",{name:i.procInstName,body:i.procInstBody}),i.procInstName=i.procInstBody="",i.state=k.TEXT):(i.procInstBody+="?"+l,i.state=k.PROC_INST_BODY);continue;case k.OPEN_TAG:is(E,l)?i.tagName+=l:(newTag(i),">"===l?openTag(i):"/"===l?i.state=k.OPEN_TAG_SLASH:(not(c,l)&&strictFail(i,"Invalid character in tag name"),i.state=k.ATTRIB));continue;case k.OPEN_TAG_SLASH:">"===l?(openTag(i,!0),closeTag(i)):(strictFail(i,"Forward-slash in opening tag not followed by >"),i.state=k.ATTRIB);continue;case k.ATTRIB:if(is(c,l))continue;">"===l?openTag(i):"/"===l?i.state=k.OPEN_TAG_SLASH:is(S,l)?(i.attribName=l,i.attribValue="",i.state=k.ATTRIB_NAME):strictFail(i,"Invalid attribute name");continue;case k.ATTRIB_NAME:"="===l?i.state=k.ATTRIB_VALUE:">"===l?(strictFail(i,"Attribute without value"),i.attribValue=i.attribName,attrib(i),openTag(i)):is(c,l)?i.state=k.ATTRIB_NAME_SAW_WHITE:is(E,l)?i.attribName+=l:strictFail(i,"Invalid attribute name");continue;case k.ATTRIB_NAME_SAW_WHITE:if("="===l)i.state=k.ATTRIB_VALUE;else{if(is(c,l))continue;strictFail(i,"Attribute without value"),i.tag.attributes[i.attribName]="",i.attribValue="",emitNode(i,"onattribute",{name:i.attribName,value:""}),i.attribName="",">"===l?openTag(i):is(S,l)?(i.attribName=l,i.state=k.ATTRIB_NAME):(strictFail(i,"Invalid attribute name"),i.state=k.ATTRIB)}continue;case k.ATTRIB_VALUE:if(is(c,l))continue;is(p,l)?(i.q=l,i.state=k.ATTRIB_VALUE_QUOTED):(strictFail(i,"Unquoted attribute value"),i.state=k.ATTRIB_VALUE_UNQUOTED,i.attribValue=l);continue;case k.ATTRIB_VALUE_QUOTED:if(l!==i.q){"&"===l?i.state=k.ATTRIB_VALUE_ENTITY_Q:i.attribValue+=l;continue}attrib(i),i.q="",i.state=k.ATTRIB_VALUE_CLOSED;continue;case k.ATTRIB_VALUE_CLOSED:is(c,l)?i.state=k.ATTRIB:">"===l?openTag(i):"/"===l?i.state=k.OPEN_TAG_SLASH:is(S,l)?(strictFail(i,"No whitespace between attributes"),i.attribName=l,i.attribValue="",i.state=k.ATTRIB_NAME):strictFail(i,"Invalid attribute name");continue;case k.ATTRIB_VALUE_UNQUOTED:if(not(m,l)){"&"===l?i.state=k.ATTRIB_VALUE_ENTITY_U:i.attribValue+=l;continue}attrib(i),">"===l?openTag(i):i.state=k.ATTRIB;continue;case k.CLOSE_TAG:if(i.tagName)">"===l?closeTag(i):is(E,l)?i.tagName+=l:i.script?(i.script+="</"+i.tagName,i.tagName="",i.state=k.SCRIPT):(not(c,l)&&strictFail(i,"Invalid tagname in closing tag"),i.state=k.CLOSE_TAG_SAW_WHITE);else{if(is(c,l))continue;not(S,l)?i.script?(i.script+="</"+l,i.state=k.SCRIPT):strictFail(i,"Invalid tagname in closing tag."):i.tagName=l}continue;case k.CLOSE_TAG_SAW_WHITE:if(is(c,l))continue;">"===l?closeTag(i):strictFail(i,"Invalid characters in closing tag");continue;case k.TEXT_ENTITY:case k.ATTRIB_VALUE_ENTITY_Q:case k.ATTRIB_VALUE_ENTITY_U:var v,b;switch(i.state){case k.TEXT_ENTITY:v=k.TEXT,b="textNode";break;case k.ATTRIB_VALUE_ENTITY_Q:v=k.ATTRIB_VALUE_QUOTED,b="attribValue";break;case k.ATTRIB_VALUE_ENTITY_U:v=k.ATTRIB_VALUE_UNQUOTED,b="attribValue"}";"===l?(i[b]+=parseEntity(i),i.entity="",i.state=v):is(i.entity.length?D:I,l)?i.entity+=l:(strictFail(i,"Invalid character in entity name"),i[b]+="&"+i.entity+l,i.entity="",i.state=v);continue;default:throw new Error(i,"Unknown state: "+i.state)}i.position>=i.bufferCheckPosition&&function checkBufferLength(t){for(var i=Math.max(r.MAX_BUFFER_LENGTH,10),a=0,l=0,c=u.length;l<c;l++){var d=t[u[l]].length;if(d>i)switch(u[l]){case"textNode":closeText(t);break;case"cdata":emitNode(t,"oncdata",t.cdata),t.cdata="";break;case"script":emitNode(t,"onscript",t.script),t.script="";break;default:error(t,"Max buffer length exceeded: "+u[l])}a=Math.max(a,d)}var g=r.MAX_BUFFER_LENGTH-a;t.bufferCheckPosition=g+t.position}(i);return i}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function resume(){return this.error=null,this},close:function close(){return this.write(null)},flush:function flush(){!function flushBuffers(t){closeText(t),""!==t.cdata&&(emitNode(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(emitNode(t,"onscript",t.script),t.script="")}(this)}};try{a=i(/*! stream */"./node_modules/stream-browserify/index.js").Stream}catch(t){a=function Stream(){}}var l=r.EVENTS.filter((function(t){return"error"!==t&&"end"!==t}));function SAXStream(t,r){if(!(this instanceof SAXStream))return new SAXStream(t,r);a.apply(this),this._parser=new SAXParser(t,r),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(t){i.emit("error",t),i._parser.error=null},this._decoder=null,l.forEach((function(t){Object.defineProperty(i,"on"+t,{get:function get(){return i._parser["on"+t]},set:function set(r){if(!r)return i.removeAllListeners(t),i._parser["on"+t]=r,r;i.on(t,r)},enumerable:!0,configurable:!1})}))}SAXStream.prototype=Object.create(a.prototype,{constructor:{value:SAXStream}}),SAXStream.prototype.write=function(r){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(r)){if(!this._decoder){var a=i(/*! string_decoder */"./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;this._decoder=new a("utf8")}r=this._decoder.write(r)}return this._parser.write(r.toString()),this.emit("data",r),!0},SAXStream.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},SAXStream.prototype.on=function(t,r){var i=this;return i._parser["on"+t]||-1===l.indexOf(t)||(i._parser["on"+t]=function(){var r=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);r.splice(0,0,t),i.emit.apply(i,r)}),a.prototype.on.call(i,t,r)};var c="\r\n\t ",d="0124356789",g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",p="'\"",m=c+">",v="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/2000/xmlns/",M={xml:v,xmlns:b};c=charClass(c),d=charClass(d),g=charClass(g);var S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,D=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function charClass(t){return t.split("").reduce((function(t,r){return t[r]=!0,t}),{})}function is(t,r){return function isRegExp(t){return"[object RegExp]"===Object.prototype.toString.call(t)}(t)?!!r.match(t):t[r]}function not(t,r){return!is(t,r)}p=charClass(p),m=charClass(m);var A,C,N,k=0;for(var O in r.STATE={BEGIN:k++,BEGIN_WHITESPACE:k++,TEXT:k++,TEXT_ENTITY:k++,OPEN_WAKA:k++,SGML_DECL:k++,SGML_DECL_QUOTED:k++,DOCTYPE:k++,DOCTYPE_QUOTED:k++,DOCTYPE_DTD:k++,DOCTYPE_DTD_QUOTED:k++,COMMENT_STARTING:k++,COMMENT:k++,COMMENT_ENDING:k++,COMMENT_ENDED:k++,CDATA:k++,CDATA_ENDING:k++,CDATA_ENDING_2:k++,PROC_INST:k++,PROC_INST_BODY:k++,PROC_INST_ENDING:k++,OPEN_TAG:k++,OPEN_TAG_SLASH:k++,ATTRIB:k++,ATTRIB_NAME:k++,ATTRIB_NAME_SAW_WHITE:k++,ATTRIB_VALUE:k++,ATTRIB_VALUE_QUOTED:k++,ATTRIB_VALUE_CLOSED:k++,ATTRIB_VALUE_UNQUOTED:k++,ATTRIB_VALUE_ENTITY_Q:k++,ATTRIB_VALUE_ENTITY_U:k++,CLOSE_TAG:k++,CLOSE_TAG_SAW_WHITE:k++,SCRIPT:k++,SCRIPT_ENDING:k++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach((function(t){var i=r.ENTITIES[t],a="number"==typeof i?String.fromCharCode(i):i;r.ENTITIES[t]=a})),r.STATE)r.STATE[r.STATE[O]]=O;function emit(t,r,i){t[r]&&t[r](i)}function emitNode(t,r,i){t.textNode&&closeText(t),emit(t,r,i)}function closeText(t){t.textNode=textopts(t.opt,t.textNode),t.textNode&&emit(t,"ontext",t.textNode),t.textNode=""}function textopts(t,r){return t.trim&&(r=r.trim()),t.normalize&&(r=r.replace(/\s+/g," ")),r}function error(t,r){return closeText(t),t.trackPosition&&(r+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),r=new Error(r),t.error=r,emit(t,"onerror",r),t}function _end(t){return t.sawRoot&&!t.closedRoot&&strictFail(t,"Unclosed root tag"),t.state!==k.BEGIN&&t.state!==k.BEGIN_WHITESPACE&&t.state!==k.TEXT&&error(t,"Unexpected end"),closeText(t),t.c="",t.closed=!0,emit(t,"onend"),SAXParser.call(t,t.strict,t.opt),t}function strictFail(t,r){if("object"!=typeof t||!(t instanceof SAXParser))throw new Error("bad call to strictFail");t.strict&&error(t,r)}function newTag(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var r=t.tags[t.tags.length-1]||t,i=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(i.ns=r.ns),t.attribList.length=0,emitNode(t,"onopentagstart",i)}function qname(t,r){var i=t.indexOf(":")<0?["",t]:t.split(":"),a=i[0],u=i[1];return r&&"xmlns"===t&&(a="xmlns",u=""),{prefix:a,local:u}}function attrib(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var r=qname(t.attribName,!0),i=r.prefix,a=r.local;if("xmlns"===i)if("xml"===a&&t.attribValue!==v)strictFail(t,"xml: prefix must be bound to "+v+"\nActual: "+t.attribValue);else if("xmlns"===a&&t.attribValue!==b)strictFail(t,"xmlns: prefix must be bound to "+b+"\nActual: "+t.attribValue);else{var u=t.tag,l=t.tags[t.tags.length-1]||t;u.ns===l.ns&&(u.ns=Object.create(l.ns)),u.ns[a]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,emitNode(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function openTag(t,r){if(t.opt.xmlns){var i=t.tag,a=qname(t.tagName);i.prefix=a.prefix,i.local=a.local,i.uri=i.ns[a.prefix]||"",i.prefix&&!i.uri&&(strictFail(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),i.uri=a.prefix);var u=t.tags[t.tags.length-1]||t;i.ns&&u.ns!==i.ns&&Object.keys(i.ns).forEach((function(r){emitNode(t,"onopennamespace",{prefix:r,uri:i.ns[r]})}));for(var l=0,c=t.attribList.length;l<c;l++){var d=t.attribList[l],g=d[0],p=d[1],m=qname(g,!0),v=m.prefix,b=m.local,M=""===v?"":i.ns[v]||"",S={name:g,value:p,prefix:v,local:b,uri:M};v&&"xmlns"!==v&&!M&&(strictFail(t,"Unbound namespace prefix: "+JSON.stringify(v)),S.uri=v),t.tag.attributes[g]=S,emitNode(t,"onattribute",S)}t.attribList.length=0}t.tag.isSelfClosing=!!r,t.sawRoot=!0,t.tags.push(t.tag),emitNode(t,"onopentag",t.tag),r||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=k.TEXT:t.state=k.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function closeTag(t){if(!t.tagName)return strictFail(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=k.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=k.SCRIPT);emitNode(t,"onscript",t.script),t.script=""}var r=t.tags.length,i=t.tagName;t.strict||(i=i[t.looseCase]());for(var a=i;r--;){if(t.tags[r].name===a)break;strictFail(t,"Unexpected close tag")}if(r<0)return strictFail(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=k.TEXT);t.tagName=i;for(var u=t.tags.length;u-- >r;){var l=t.tag=t.tags.pop();t.tagName=t.tag.name,emitNode(t,"onclosetag",t.tagName);var c={};for(var d in l.ns)c[d]=l.ns[d];var g=t.tags[t.tags.length-1]||t;t.opt.xmlns&&l.ns!==g.ns&&Object.keys(l.ns).forEach((function(r){var i=l.ns[r];emitNode(t,"onclosenamespace",{prefix:r,uri:i})}))}0===r&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=k.TEXT}function parseEntity(t){var r,i=t.entity,a=i.toLowerCase(),u="";return t.ENTITIES[i]?t.ENTITIES[i]:t.ENTITIES[a]?t.ENTITIES[a]:("#"===(i=a).charAt(0)&&("x"===i.charAt(1)?(i=i.slice(2),u=(r=parseInt(i,16)).toString(16)):(i=i.slice(1),u=(r=parseInt(i,10)).toString(10))),i=i.replace(/^0+/,""),u.toLowerCase()!==i?(strictFail(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(r))}function beginWhiteSpace(t,r){"<"===r?(t.state=k.OPEN_WAKA,t.startTagPosition=t.position):not(c,r)&&(strictFail(t,"Non-whitespace before first tag."),t.textNode=r,t.state=k.TEXT)}function charAt(t,r){var i="";return r<t.length&&(i=t.charAt(r)),i}k=r.STATE,String.fromCodePoint||(A=String.fromCharCode,C=Math.floor,N=function fromCodePoint(){var t,r,i=16384,a=[],u=-1,l=arguments.length;if(!l)return"";for(var c="";++u<l;){var d=Number(arguments[u]);if(!isFinite(d)||d<0||d>1114111||C(d)!==d)throw RangeError("Invalid code point: "+d);d<=65535?a.push(d):(t=55296+((d-=65536)>>10),r=d%1024+56320,a.push(t,r)),(u+1===l||a.length>i)&&(c+=A.apply(null,a),a.length=0)}return c},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:N,configurable:!0,writable:!0}):String.fromCodePoint=N)}(r)}).call(this,i(/*! ./../../node-libs-browser/node_modules/buffer/index.js */"./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
    !*** ./node_modules/setimmediate/setImmediate.js ***!
    \***************************************************/
/*! no static exports found */function node_modulesSetimmediateSetImmediateJs(t,r,i){(function(t,r){!function(t,i){if(!t.setImmediate){var a,u=1,l={},c=!1,d=t.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(t);g=g&&g.setTimeout?g:t,"[object process]"==={}.toString.call(t.process)?function installNextTickImplementation(){a=function registerImmediate(t){r.nextTick((function(){runIfPresent(t)}))}}():!function canUsePostMessage(){if(t.postMessage&&!t.importScripts){var r=!0,i=t.onmessage;return t.onmessage=function(){r=!1},t.postMessage("","*"),t.onmessage=i,r}}()?t.MessageChannel?function installMessageChannelImplementation(){var t=new MessageChannel;t.port1.onmessage=function(t){runIfPresent(t.data)},a=function registerImmediate(r){t.port2.postMessage(r)}}():d&&"onreadystatechange"in d.createElement("script")?function installReadyStateChangeImplementation(){var t=d.documentElement;a=function registerImmediate(r){var i=d.createElement("script");i.onreadystatechange=function(){runIfPresent(r),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}():function installSetTimeoutImplementation(){a=function registerImmediate(t){setTimeout(runIfPresent,0,t)}}():function installPostMessageImplementation(){var r="setImmediate$"+Math.random()+"$",i=function onGlobalMessage(i){i.source===t&&"string"==typeof i.data&&0===i.data.indexOf(r)&&runIfPresent(+i.data.slice(r.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),a=function registerImmediate(i){t.postMessage(r+i,"*")}}(),g.setImmediate=function setImmediate(t){"function"!=typeof t&&(t=new Function(""+t));for(var r=new Array(arguments.length-1),i=0;i<r.length;i++)r[i]=arguments[i+1];var c={callback:t,args:r};return l[u]=c,a(u),u++},g.clearImmediate=clearImmediate}function clearImmediate(t){delete l[t]}function runIfPresent(t){if(c)setTimeout(runIfPresent,0,t);else{var r=l[t];if(r){c=!0;try{!function run(t){var r=t.callback,i=t.args;switch(i.length){case 0:r();break;case 1:r(i[0]);break;case 2:r(i[0],i[1]);break;case 3:r(i[0],i[1],i[2]);break;default:r.apply(void 0,i)}}(r)}finally{clearImmediate(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"),i(/*! ./../process/browser.js */"./node_modules/process/browser.js"))},"./node_modules/stream-browserify/index.js":
/*!*************************************************!*\
    !*** ./node_modules/stream-browserify/index.js ***!
    \*************************************************/
/*! no static exports found */function node_modulesStreamBrowserifyIndexJs(t,r,i){t.exports=Stream;var a=i(/*! events */"./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter;function Stream(){a.call(this)}i(/*! inherits */"./node_modules/inherits/inherits_browser.js")(Stream,a),Stream.Readable=i(/*! readable-stream/readable.js */"./node_modules/readable-stream/readable-browser.js"),Stream.Writable=i(/*! readable-stream/writable.js */"./node_modules/readable-stream/writable-browser.js"),Stream.Duplex=i(/*! readable-stream/duplex.js */"./node_modules/readable-stream/duplex-browser.js"),Stream.Transform=i(/*! readable-stream/transform.js */"./node_modules/readable-stream/transform.js"),Stream.PassThrough=i(/*! readable-stream/passthrough.js */"./node_modules/readable-stream/passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(t,r){var i=this;function ondata(r){t.writable&&!1===t.write(r)&&i.pause&&i.pause()}function ondrain(){i.readable&&i.resume&&i.resume()}i.on("data",ondata),t.on("drain",ondrain),t._isStdio||r&&!1===r.end||(i.on("end",onend),i.on("close",onclose));var u=!1;function onend(){u||(u=!0,t.end())}function onclose(){u||(u=!0,"function"==typeof t.destroy&&t.destroy())}function onerror(t){if(cleanup(),0===a.listenerCount(this,"error"))throw t}function cleanup(){i.removeListener("data",ondata),t.removeListener("drain",ondrain),i.removeListener("end",onend),i.removeListener("close",onclose),i.removeListener("error",onerror),t.removeListener("error",onerror),i.removeListener("end",cleanup),i.removeListener("close",cleanup),t.removeListener("close",cleanup)}return i.on("error",onerror),t.on("error",onerror),i.on("end",cleanup),i.on("close",cleanup),t.on("close",cleanup),t.emit("pipe",i),t}},"./node_modules/string_decoder/lib/string_decoder.js":
/*!***********************************************************!*\
    !*** ./node_modules/string_decoder/lib/string_decoder.js ***!
    \***********************************************************/
/*! no static exports found */function node_modulesString_decoderLibString_decoderJs(t,r,i){var a=i(/*! safe-buffer */"./node_modules/safe-buffer/index.js").Buffer,u=a.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(t){var r;switch(this.encoding=function normalizeEncoding(t){var r=function _normalizeEncoding(t){if(!t)return"utf8";for(var r;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(r)return;t=(""+t).toLowerCase(),r=!0}}(t);if("string"!=typeof r&&(a.isEncoding===u||!u(t)))throw new Error("Unknown encoding: "+t);return r||t}(t),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,r=4;break;case"utf8":this.fillLast=utf8FillLast,r=4;break;case"base64":this.text=base64Text,this.end=base64End,r=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(r)}function utf8CheckByte(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function utf8FillLast(t){var r=this.lastTotal-this.lastNeed,i=function utf8CheckExtraBytes(t,r,i){if(128!=(192&r[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&r.length>1){if(128!=(192&r[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&r.length>2&&128!=(192&r[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,r,0,t.length),void(this.lastNeed-=t.length))}function utf16Text(t,r){if((t.length-r)%2==0){var i=t.toString("utf16le",r);if(i){var a=i.charCodeAt(i.length-1);if(a>=55296&&a<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",r,t.length-1)}function utf16End(t){var r=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,i)}return r}function base64Text(t,r){var i=(t.length-r)%3;return 0===i?t.toString("base64",r):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",r,t.length-i))}function base64End(t){var r=t&&t.length?this.write(t):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}r.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(t){if(0===t.length)return"";var r,i;if(this.lastNeed){if(void 0===(r=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?r?r+this.text(t,i):this.text(t,i):r||""},StringDecoder.prototype.end=function utf8End(t){var r=t&&t.length?this.write(t):"";return this.lastNeed?r+"�":r},StringDecoder.prototype.text=function utf8Text(t,r){var i=function utf8CheckIncomplete(t,r,i){var a=r.length-1;if(a<i)return 0;var u=utf8CheckByte(r[a]);if(u>=0)return u>0&&(t.lastNeed=u-1),u;if(--a<i||-2===u)return 0;if((u=utf8CheckByte(r[a]))>=0)return u>0&&(t.lastNeed=u-2),u;if(--a<i||-2===u)return 0;if((u=utf8CheckByte(r[a]))>=0)return u>0&&(2===u?u=0:t.lastNeed=u-3),u;return 0}(this,t,r);if(!this.lastNeed)return t.toString("utf8",r);this.lastTotal=i;var a=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,a),t.toString("utf8",r,a)},StringDecoder.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},"./node_modules/util-deprecate/browser.js":
/*!************************************************!*\
    !*** ./node_modules/util-deprecate/browser.js ***!
    \************************************************/
/*! no static exports found */function node_modulesUtilDeprecateBrowserJs(t,r,i){(function(r){function config(t){try{if(!r.localStorage)return!1}catch(t){return!1}var i=r.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function deprecate(t,r){if(config("noDeprecation"))return t;var i=!1;return function deprecated(){if(!i){if(config("throwDeprecation"))throw new Error(r);config("traceDeprecation")?console.trace(r):console.warn(r),i=!0}return t.apply(this,arguments)}}}).call(this,i(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
    !*** (webpack)/buildin/global.js ***!
    \***********************************/
/*! no static exports found */function node_modulesWebpackBuildinGlobalJs(t,r){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},"./src/core/Debug.js":
/*!***************************!*\
    !*** ./src/core/Debug.js ***!
    \***************************/
/*! exports provided: default */function srcCoreDebugJs(t,r,i){i.r(r);var a=i(/*! ./EventBus */"./src/core/EventBus.js"),u=i(/*! ./events/Events */"./src/core/events/Events.js"),l=i(/*! ./FactoryMaker */"./src/core/FactoryMaker.js"),c=1,d=2,g=3,p=4,m=5;function Debug(t){t=t||{};var r,i,l,v,b=this.context,M=Object(a.default)(b).getInstance(),S=t.settings,E=[];function getLogFn(t){return t&&t.bind?t.bind(window.console):window.console.log.bind(window.console)}function fatal(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];doLog.apply(void 0,[c,this].concat(r))}function error(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];doLog.apply(void 0,[d,this].concat(r))}function warn(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];doLog.apply(void 0,[g,this].concat(r))}function info(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];doLog.apply(void 0,[p,this].concat(r))}function debug(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];doLog.apply(void 0,[m,this].concat(r))}function doLog(t,r){var a="",c=null;i&&(c=(new Date).getTime(),a+="["+(c-v)+"]"),l&&r&&r.getClassName&&(a+="["+r.getClassName()+"]",r.getType&&(a+="["+r.getType()+"]")),a.length>0&&(a+=" ");for(var d=arguments.length,g=new Array(d>2?d-2:0),p=2;p<d;p++)g[p-2]=arguments[p];Array.apply(null,g).forEach((function(t){a+=t+" "})),E[t]&&S.get().debug.logLevel>=t&&E[t](a),S&&S.get().debug.dispatchEvent&&M.trigger(u.default.LOG,{message:a,level:t})}return r={getLogger:function getLogger(t){return{fatal:fatal.bind(t),error:error.bind(t),warn:warn.bind(t),info:info.bind(t),debug:debug.bind(t)}},setLogTimestampVisible:function setLogTimestampVisible(t){i=t},setCalleeNameVisible:function setCalleeNameVisible(t){l=t}},function setup(){i=!0,l=!0,v=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(E[c]=getLogFn(window.console.error),E[d]=getLogFn(window.console.error),E[g]=getLogFn(window.console.warn),E[p]=getLogFn(window.console.info),E[m]=getLogFn(window.console.debug))}(),r}Debug.__dashjs_factory_name="Debug";var v=l.default.getSingletonFactory(Debug);v.LOG_LEVEL_NONE=0,v.LOG_LEVEL_FATAL=c,v.LOG_LEVEL_ERROR=d,v.LOG_LEVEL_WARNING=g,v.LOG_LEVEL_INFO=p,v.LOG_LEVEL_DEBUG=m,l.default.updateSingletonFactory(Debug.__dashjs_factory_name,v),r.default=v},"./src/core/EventBus.js":
/*!******************************!*\
    !*** ./src/core/EventBus.js ***!
    \******************************/
/*! exports provided: default */function srcCoreEventBusJs(t,r,i){i.r(r);var a=i(/*! ./FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../streaming/MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js");function EventBus(){var t={};function getHandlerIdx(r,i,a){var u=-1;return t[r]?(t[r].some((function(t,r){if(t&&t.callback===i&&(!a||a===t.scope))return u=r,!0})),u):u}var r={on:function on(r,i,a){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!r)throw new Error("event type cannot be null or undefined");if(!i||"function"!=typeof i)throw new Error("listener must be a function: "+i);var l=u.priority||0;if(!(getHandlerIdx(r,i,a)>=0)){t[r]=t[r]||[];var c={callback:i,scope:a,priority:l};a&&a.getStreamId&&(c.streamId=a.getStreamId()),a&&a.getType&&(c.mediaType=a.getType()),u&&u.mode&&(c.mode=u.mode);var d=t[r].some((function(i,a){if(i&&l>i.priority)return t[r].splice(a,0,c),!0}));d||t[r].push(c)}},off:function off(r,i,a){if(r&&i&&t[r]){var u=getHandlerIdx(r,i,a);u<0||(t[r][u]=null)}},trigger:function trigger(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r&&t[r]){if((i=i||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");i.type=r,a.streamId&&(i.streamId=a.streamId),a.mediaType&&(i.mediaType=a.mediaType),t[r].filter((function(t){return!!t&&((!a.streamId||!t.streamId||t.streamId===a.streamId)&&((!a.mediaType||!t.mediaType||t.mediaType===a.mediaType)&&!(a.mode&&t.mode&&t.mode!==a.mode||!t.mode&&a.mode&&a.mode===u.default.EVENT_MODE_ON_RECEIVE)))})).forEach((function(t){return t&&t.callback.call(t.scope,i)}))}},reset:function reset(){t={}}};return r}EventBus.__dashjs_factory_name="EventBus";var l=a.default.getSingletonFactory(EventBus);l.EVENT_PRIORITY_LOW=0,l.EVENT_PRIORITY_HIGH=5e3,a.default.updateSingletonFactory(EventBus.__dashjs_factory_name,l),r.default=l},"./src/core/FactoryMaker.js":
/*!**********************************!*\
    !*** ./src/core/FactoryMaker.js ***!
    \**********************************/
/*! exports provided: default */function srcCoreFactoryMakerJs(t,r,i){i.r(r);var a=function(){var t,r=[],i={},a={};function getSingletonInstance(t,i){for(var a in r){var u=r[a];if(u.context===t&&u.name===i)return u.instance}return null}function getFactoryByName(t,r){return r[t]}function updateFactory(t,r,i){t in i&&(i[t]=r)}function merge(r,i,a){var u,l=r.__dashjs_factory_name,c=i[l];if(c){var d=c.instance;if(!c.override)return d.apply({context:i,factory:t},a);for(var g in u=r.apply({context:i},a),d=d.apply({context:i,factory:t,parent:u},a))u.hasOwnProperty(g)&&(u[g]=d[g])}else u=r.apply({context:i},a);return u.getClassName=function(){return l},u}return t={extend:function extend(t,r,i,a){!a[t]&&r&&(a[t]={instance:r,override:i})},getSingletonInstance:getSingletonInstance,setSingletonInstance:function setSingletonInstance(t,i,a){for(var u in r){var l=r[u];if(l.context===t&&l.name===i)return void(r[u].instance=a)}r.push({name:i,context:t,instance:a})},deleteSingletonInstances:function deleteSingletonInstances(t){r=r.filter((function(r){return r.context!==t}))},getSingletonFactory:function getSingletonFactory(t){var a=getFactoryByName(t.__dashjs_factory_name,i);return a||(a=function factory(i){var a;return void 0===i&&(i={}),{getInstance:function getInstance(){return a||(a=getSingletonInstance(i,t.__dashjs_factory_name)),a||(a=merge(t,i,arguments),r.push({name:t.__dashjs_factory_name,context:i,instance:a})),a}}},i[t.__dashjs_factory_name]=a),a},getSingletonFactoryByName:function getSingletonFactoryByName(t){return getFactoryByName(t,i)},updateSingletonFactory:function updateSingletonFactory(t,r){updateFactory(t,r,i)},getClassFactory:function getClassFactory(t){var r=getFactoryByName(t.__dashjs_factory_name,a);return r||(r=function factory(r){return void 0===r&&(r={}),{create:function create(){return merge(t,r,arguments)}}},a[t.__dashjs_factory_name]=r),r},getClassFactoryByName:function getClassFactoryByName(t){return getFactoryByName(t,a)},updateClassFactory:function updateClassFactory(t,r){updateFactory(t,r,a)}},t}();r.default=a},"./src/core/Settings.js":
/*!******************************!*\
    !*** ./src/core/Settings.js ***!
    \******************************/
/*! exports provided: default */function srcCoreSettingsJs(t,r,i){i.r(r);var a=i(/*! ./FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ./Utils.js */"./src/core/Utils.js"),l=i(/*! ../core/Debug */"./src/core/Debug.js"),c=i(/*! ../streaming/constants/Constants */"./src/streaming/constants/Constants.js"),d=i(/*! ../streaming/vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),g=i(/*! ./EventBus */"./src/core/EventBus.js"),p=i(/*! ./events/Events */"./src/core/events/Events.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperty(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function Settings(){var t,r,i=this.context,a=Object(g.default)(i).getInstance(),m={"streaming.delay.liveDelay":p.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":p.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":p.default.SETTING_UPDATED_CATCHUP_ENABLED},v={debug:{logLevel:l.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,eventControllerRefreshDelay:150,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0},liveCatchup:{maxDrift:NaN,playbackRate:NaN,playbackBufferMin:.5,enabled:null,latencyThreshold:60,mode:c.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:c.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:c.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:c.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:1e4,retryIntervals:(t={},_defineProperty(t,d.HTTPRequest.MPD_TYPE,500),_defineProperty(t,d.HTTPRequest.XLINK_EXPANSION_TYPE,500),_defineProperty(t,d.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),_defineProperty(t,d.HTTPRequest.INIT_SEGMENT_TYPE,1e3),_defineProperty(t,d.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),_defineProperty(t,d.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),_defineProperty(t,d.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),_defineProperty(t,d.HTTPRequest.LICENSE,1e3),_defineProperty(t,d.HTTPRequest.OTHER_TYPE,1e3),_defineProperty(t,"lowLatencyReductionFactor",10),t),retryAttempts:(r={},_defineProperty(r,d.HTTPRequest.MPD_TYPE,3),_defineProperty(r,d.HTTPRequest.XLINK_EXPANSION_TYPE,1),_defineProperty(r,d.HTTPRequest.MEDIA_SEGMENT_TYPE,3),_defineProperty(r,d.HTTPRequest.INIT_SEGMENT_TYPE,3),_defineProperty(r,d.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),_defineProperty(r,d.HTTPRequest.INDEX_SEGMENT_TYPE,3),_defineProperty(r,d.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),_defineProperty(r,d.HTTPRequest.LICENSE,3),_defineProperty(r,d.HTTPRequest.OTHER_TYPE,3),_defineProperty(r,"lowLatencyMultiplyFactor",5),r),abr:{movingAverageMethod:c.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:c.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!1},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:c.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:c.default.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]}},errors:{recoverAttempts:{mediaErrorDecode:5}}},b=u.default.clone(v);function mixinSettings(t,r,i){for(var l in t)t.hasOwnProperty(l)&&(r.hasOwnProperty(l)?"object"!==_typeof(t[l])||t[l]instanceof Array||null===t[l]?(r[l]=u.default.clone(t[l]),m[i+l]&&a.trigger(m[i+l])):mixinSettings(t[l],r[l],i.slice()+l+"."):console.error("Settings parameter "+i+l+" is not supported"))}return{get:function get(){return b},update:function update(t){"object"===_typeof(t)&&mixinSettings(t,b,"")},reset:function reset(){b=u.default.clone(v)}}}Settings.__dashjs_factory_name="Settings";var m=a.default.getSingletonFactory(Settings);r.default=m},"./src/core/Utils.js":
/*!***************************!*\
    !*** ./src/core/Utils.js ***!
    \***************************/
/*! exports provided: default */function srcCoreUtilsJs(t,r,i){i.r(r);var a=i(/*! path-browserify */"./node_modules/path-browserify/index.js"),u=i.n(a);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var l=function(){function Utils(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Utils)}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(Utils,null,[{key:"mixin",value:function mixin(t,r,i){var a,u={};if(t)for(var l in r)r.hasOwnProperty(l)&&(a=r[l],l in t&&(t[l]===a||l in u&&u[l]===a)||("object"===_typeof(t[l])&&null!==t[l]?t[l]=Utils.mixin(t[l],a,i):t[l]=i(a)));return t}},{key:"clone",value:function clone(t){if(!t||"object"!==_typeof(t))return t;var r;if(t instanceof Array){r=[];for(var i=0,a=t.length;i<a;++i)i in t&&r.push(Utils.clone(t[i]))}else r={};return Utils.mixin(r,t,Utils.clone)}},{key:"addAditionalQueryParameterToUrl",value:function addAditionalQueryParameterToUrl(t,r){try{if(!r||0===r.length)return t;var i=new URL(t);return r.forEach((function(t){t.key&&t.value&&i.searchParams.set(t.key,t.value)})),i.href}catch(r){return t}}},{key:"parseHttpHeaders",value:function parseHttpHeaders(t){var r={};if(!t)return r;for(var i=t.trim().split("\r\n"),a=0,u=i.length;a<u;a++){var l=i[a],c=l.indexOf(": ");c>0&&(r[l.substring(0,c)]=l.substring(c+2))}return r}},{key:"generateUuid",value:function generateUuid(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(r){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==r?i:3&i|8).toString(16)}))}},{key:"generateHashCode",value:function generateHashCode(t){var r=0;if(0===t.length)return r;for(var i=0;i<t.length;i++){r=(r<<5)-r+t.charCodeAt(i),r|=0}return r}},{key:"getRelativeUrl",value:function getRelativeUrl(t,r){try{var i=new URL(t),a=new URL(r);if(i.protocol=a.protocol,i.origin!==a.origin)return r;var l=u.a.relative(i.pathname.substr(0,i.pathname.lastIndexOf("/")),a.pathname.substr(0,a.pathname.lastIndexOf("/"))),c=0===l.length?1:0;return l+=a.pathname.substr(a.pathname.lastIndexOf("/")+c,a.pathname.length-1),a.pathname.length<l.length?a.pathname:l}catch(t){return r}}}]),Utils}();r.default=l},"./src/core/Version.js":
/*!*****************************!*\
    !*** ./src/core/Version.js ***!
    \*****************************/
/*! exports provided: getVersionString */function srcCoreVersionJs(t,r,i){i.r(r),i.d(r,"getVersionString",(function(){return getVersionString}));function getVersionString(){return"4.4.0"}},"./src/core/errors/Errors.js":
/*!***********************************!*\
    !*** ./src/core/errors/Errors.js ***!
    \***********************************/
/*! exports provided: default */function srcCoreErrorsErrorsJs(t,r,i){function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}i.r(r);var a=new(function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(Errors,t);var r=_createSuper(Errors);function Errors(){var t;return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Errors),(t=r.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,t.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,t.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,t.SEGMENT_BASE_LOADER_ERROR_CODE=15,t.TIME_SYNC_FAILED_ERROR_CODE=16,t.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,t.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,t.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,t.APPEND_ERROR_CODE=20,t.REMOVE_ERROR_CODE=21,t.DATA_UPDATE_FAILED_ERROR_CODE=22,t.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,t.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,t.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,t.DOWNLOAD_ERROR_ID_SIDX_CODE=26,t.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,t.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,t.DOWNLOAD_ERROR_ID_XLINK_CODE=29,t.MANIFEST_ERROR_ID_PARSE_CODE=31,t.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,t.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,t.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,t.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,t.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",t.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",t.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",t.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",t.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",t.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",t.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",t.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",t.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",t.APPEND_ERROR_MESSAGE="chunk is not defined",t.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",t.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",t.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",t.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",t.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",t.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",t}return Errors}(i(/*! ./ErrorsBase */"./src/core/errors/ErrorsBase.js").default));r.default=a},"./src/core/errors/ErrorsBase.js":
/*!***************************************!*\
    !*** ./src/core/errors/ErrorsBase.js ***!
    \***************************************/
/*! exports provided: default */function srcCoreErrorsErrorsBaseJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=function(){function ErrorsBase(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ErrorsBase)}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(ErrorsBase,[{key:"extend",value:function extend(t,r){if(t){var i=!!r&&r.override,a=!!r&&r.publicOnly;for(var u in t)!t.hasOwnProperty(u)||this[u]&&!i||a&&-1===t[u].indexOf("public_")||(this[u]=t[u])}}}]),ErrorsBase}();r.default=a},"./src/core/events/CoreEvents.js":
/*!***************************************!*\
    !*** ./src/core/events/CoreEvents.js ***!
    \***************************************/
/*! exports provided: default */function srcCoreEventsCoreEventsJs(t,r,i){function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}i.r(r);var a=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(CoreEvents,t);var r=_createSuper(CoreEvents);function CoreEvents(){var t;return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,CoreEvents),(t=r.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",t.BUFFERING_COMPLETED="bufferingCompleted",t.BUFFER_CLEARED="bufferCleared",t.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",t.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",t.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",t.CURRENT_TRACK_CHANGED="currentTrackChanged",t.DATA_UPDATE_COMPLETED="dataUpdateCompleted",t.INBAND_EVENTS="inbandEvents",t.INITIAL_STREAM_SWITCH="initialStreamSwitch",t.INIT_FRAGMENT_LOADED="initFragmentLoaded",t.INIT_FRAGMENT_NEEDED="initFragmentNeeded",t.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",t.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",t.LOADING_COMPLETED="loadingCompleted",t.LOADING_PROGRESS="loadingProgress",t.LOADING_DATA_PROGRESS="loadingDataProgress",t.LOADING_ABANDONED="loadingAborted",t.MANIFEST_UPDATED="manifestUpdated",t.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",t.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",t.QUOTA_EXCEEDED="quotaExceeded",t.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",t.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",t.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",t.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",t.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",t.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",t.SOURCE_BUFFER_ERROR="sourceBufferError",t.STREAMS_COMPOSED="streamsComposed",t.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",t.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",t.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",t.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",t.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",t.URL_RESOLUTION_FAILED="urlResolutionFailed",t.VIDEO_CHUNK_RECEIVED="videoChunkReceived",t.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",t.XLINK_ELEMENT_LOADED="xlinkElementLoaded",t.XLINK_READY="xlinkReady",t.SEEK_TARGET="seekTarget",t.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",t.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",t.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",t}return CoreEvents}(i(/*! ./EventsBase */"./src/core/events/EventsBase.js").default);r.default=a},"./src/core/events/Events.js":
/*!***********************************!*\
    !*** ./src/core/events/Events.js ***!
    \***********************************/
/*! exports provided: default */function srcCoreEventsEventsJs(t,r,i){function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}i.r(r);var a=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(Events,t);var r=_createSuper(Events);function Events(){return _classCallCheck(this,Events),r.apply(this,arguments)}return Events}(i(/*! ./CoreEvents */"./src/core/events/CoreEvents.js").default),u=new a;r.default=u},"./src/core/events/EventsBase.js":
/*!***************************************!*\
    !*** ./src/core/events/EventsBase.js ***!
    \***************************************/
/*! exports provided: default */function srcCoreEventsEventsBaseJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=function(){function EventsBase(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,EventsBase)}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(EventsBase,[{key:"extend",value:function extend(t,r){if(t){var i=!!r&&r.override,a=!!r&&r.publicOnly;for(var u in t)!t.hasOwnProperty(u)||this[u]&&!i||a&&-1===t[u].indexOf("public_")||(this[u]=t[u])}}}]),EventsBase}();r.default=a},"./src/dash/DashAdapter.js":
/*!*********************************!*\
    !*** ./src/dash/DashAdapter.js ***!
    \*********************************/
/*! exports provided: default */function srcDashDashAdapterJs(t,r,i){i.r(r);var a=i(/*! ./constants/DashConstants */"./src/dash/constants/DashConstants.js"),u=i(/*! ./vo/RepresentationInfo */"./src/dash/vo/RepresentationInfo.js"),l=i(/*! ./vo/MediaInfo */"./src/dash/vo/MediaInfo.js"),c=i(/*! ./vo/StreamInfo */"./src/dash/vo/StreamInfo.js"),d=i(/*! ./vo/ManifestInfo */"./src/dash/vo/ManifestInfo.js"),g=i(/*! ./vo/Event */"./src/dash/vo/Event.js"),p=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),m=i(/*! ./models/DashManifestModel */"./src/dash/models/DashManifestModel.js"),v=i(/*! ./models/PatchManifestModel */"./src/dash/models/PatchManifestModel.js");function DashAdapter(){var t,r,i,p,b,M,S,E=this.context;function getAdaptationForType(t,i,u){var l,c=r.getAdaptationsForType(p[0].mpd.manifest,t,i);if(!c||0===c.length)return null;if(c.length>1&&u){var d=getAllMediaInfoForType(u,i);if(b[u.id]&&b[u.id][i])for(var g=0,m=c.length;g<m;g++)if(areMediaInfosEqual(b[u.id][i],d[g]))return c[g];for(var v=0,M=c.length;v<M;v++)if(l=c[v],r.getRolesForAdaptation(l).filter((function(t){return t.value===a.default.MAIN}))[0])return c[v]}return c[0]}function areMediaInfosEqual(t,r){if(!t||!r)return!1;var i=t.id===r.id,a=t.codec===r.codec,u=t.viewpoint===r.viewpoint,l=t.lang===r.lang,c=t.roles.toString()===r.roles.toString(),d=t.accessibility.toString()===r.accessibility.toString(),g=t.audioChannelConfiguration.toString()===r.audioChannelConfiguration.toString();return i&&a&&u&&l&&c&&d&&g}function _getAllMediaInfo(t,i,a,u,l,c){var d,g,p,m,v,b,S=[];if(!u||0===u.length)return[];var E=r.getAdaptationsForPeriod(i);for(m=0,b=u.length;m<b;m++)if(d=u[m],g=convertAdaptationToMediaInfo(E[p=r.getIndexForAdaptation(d,t,a.index)]),c){var I=g.accessibility.length;for(v=0;v<I;v++)if(g){var D=g.accessibility[v];if(0===D.indexOf("cea-608:")){var A=D.substring(8).split(";");if("CC"===A[0].substring(0,2))for(v=0;v<A.length;v++)g||(g=convertAdaptationToMediaInfo.call(this,E[p])),convertVideoInfoToEmbeddedTextInfo(g,A[v].substring(0,3),A[v].substring(4)),S.push(g),g=null;else for(v=0;v<A.length;v++)g||(g=convertAdaptationToMediaInfo.call(this,E[p])),convertVideoInfoToEmbeddedTextInfo(g,"CC"+(v+1),A[v]),S.push(g),g=null}else 0===D.indexOf("cea-608")&&(convertVideoInfoToEmbeddedTextInfo(g,M.CC1,"eng"),S.push(g),g=null)}}else l===M.IMAGE?(g.type=M.IMAGE,S.push(g),g=null):g&&S.push(g);return S}function getAllMediaInfoForType(t,i,a){var u=p,l=a,c=[];if(l)checkConfig(),u=getRegularPeriods(l);else{if(!(p.length>0))return c;l=p[0].mpd.manifest}var d=getPeriodForStreamInfo(t,u),g=r.getAdaptationsForType(l,t?t.index:null,i);return c=_getAllMediaInfo(l,d,t,g,i),i===M.TEXT&&(g=r.getAdaptationsForType(l,t?t.index:null,M.VIDEO),c=c.concat(_getAllMediaInfo(l,d,t,g,i,!0))),c}function getRegularPeriods(t){var i=getMpd(t);return r.getRegularPeriods(i)}function getMpd(t){var i=getManifest(t);return r.getMpd(i)}function reset(){p=[],b={}}function getManifest(t){return t||(p.length>0?p[0].mpd.manifest:null)}function getAdaptationForMediaInfo(t){try{var i=getPeriodForStreamInfo(t.streamInfo,p),a=r.getAdaptationsForPeriod(i);return t&&t.streamInfo&&void 0!==t.streamInfo.id&&a?a[t.index]:null}catch(t){return null}}function getPeriodForStreamInfo(t,r){for(var i=r.length,a=0;a<i;a++){var u=r[a];if(t&&t.id===u.id)return u}return null}function convertAdaptationToMediaInfo(t){if(!t)return null;var i,a=new l.default,u=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];if(a.id=t.id,a.index=t.index,a.type=t.type,a.streamInfo=convertPeriodToStreamInfo(t.period),a.representationCount=r.getRepresentationCount(u),a.labels=r.getLabelsForAdaptation(u),a.lang=r.getLanguageForAdaptation(u),i=r.getViewpointForAdaptation(u),a.viewpoint=i?i.value:void 0,a.accessibility=r.getAccessibilityForAdaptation(u).map((function(t){var r=t.value,i=r;return t.schemeIdUri&&t.schemeIdUri.search("cea-608")>=0&&void 0!==S&&(i=r?"cea-608:"+r:"cea-608",a.embeddedCaptions=!0),i})),a.audioChannelConfiguration=r.getAudioChannelConfigurationForAdaptation(u).map((function(t){return t.value})),0===a.audioChannelConfiguration.length&&Array.isArray(u.Representation_asArray)&&u.Representation_asArray.length>0&&(a.audioChannelConfiguration=r.getAudioChannelConfigurationForRepresentation(u.Representation_asArray[0]).map((function(t){return t.value}))),a.roles=r.getRolesForAdaptation(u).map((function(t){return t.value})),a.codec=r.getCodec(u),a.mimeType=r.getMimeType(u),a.contentProtection=r.getContentProtectionData(u),a.bitrateList=r.getBitrateListForAdaptation(u),a.selectionPriority=r.getSelectionPriority(u),a.contentProtection){var c=a.contentProtection.map((function(t){return r.getKID(t)})).filter((function(t){return null!==t}));if(c.length){var d=c[0];a.contentProtection.forEach((function(t){t.keyId=d}))}}return a.isText=r.getIsText(u),a.supplementalProperties=r.getSupplementalProperties(u),a.isFragmented=r.getIsFragmented(u),a.isEmbedded=!1,a}function convertVideoInfoToEmbeddedTextInfo(t,r,i){t.id=r,t.index=100+parseInt(r.substring(2,3)),t.type=M.TEXT,t.codec="cea-608-in-SEI",t.isEmbedded=!0,t.isFragmented=!1,t.lang=i,t.roles=["caption"]}function convertPeriodToStreamInfo(t){var i=new c.default;return i.id=t.id,i.index=t.index,i.start=t.start,i.duration=t.duration,i.manifestInfo=function convertMpdToManifestInfo(t){var i=new d.default;return i.dvrWindowSize=t.timeShiftBufferDepth,i.loadedTime=t.manifest.loadedTime,i.availableFrom=t.availabilityStartTime,i.minBufferTime=t.manifest.minBufferTime,i.maxFragmentDuration=t.maxSegmentDuration,i.duration=r.getDuration(t.manifest),i.isDynamic=r.getIsDynamic(t.manifest),i.serviceDescriptions=r.getServiceDescriptions(t.manifest),i.protocol=t.manifest.protocol,i}(t.mpd),i.isLast=1===t.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function checkConfig(){if(!M)throw new Error("setConfig function has to be called previously")}function getPeriod(t){return p.length>0?p[0].mpd.manifest.Period_asArray[t]:null}function findRepresentation(t,r,i){var a,u,l,c,d;if(t)for(a=t.AdaptationSet_asArray,c=0;c<a.length;c+=1)for(l=a[c].Representation_asArray,d=0;d<l.length;d+=1)if(r===(u=l[d]).id)return i?d:u;return null}return t={getBandwidthForRepresentation:function getBandwidthForRepresentation(t,r){var i;return(i=findRepresentation(getPeriod(r),t))?i.bandwidth:null},getIndexForRepresentation:function getIndexForRepresentation(t,r){return function findRepresentationIndex(t,r){var i=findRepresentation(t,r,!0);return null!==i?i:-1}(getPeriod(r),t)},getMaxIndexForBufferType:function getMaxIndexForBufferType(t,i){return function findMaxBufferIndex(t,i){var a,u,l,c;if(!t||!i)return-1;for(u=t.AdaptationSet_asArray,c=0;c<u.length;c+=1)if(l=(a=u[c]).Representation_asArray,r.getIsTypeOf(a,i))return l.length;return-1}(getPeriod(i),t)},convertRepresentationToRepresentationInfo:function convertRepresentationToRepresentationInfo(t){if(t){var i=new u.default,a=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],l=r.getRepresentationFor(t.index,a);return i.id=t.id,i.quality=t.index,i.bandwidth=r.getBandwidth(l),i.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),i.MSETimeOffset=t.MSETimeOffset,i.mediaInfo=convertAdaptationToMediaInfo(t.adaptation),i}return null},getStreamsInfo:function getStreamsInfo(t,r){var i=[],a=p;if(t&&(checkConfig(),a=getRegularPeriods(t)),a.length>0){(!r||r>a.length)&&(r=a.length);for(var u=0;u<r;u++)i.push(convertPeriodToStreamInfo(a[u]))}return i},getMediaInfoForType:function getMediaInfoForType(t,i){if(0===p.length||!t)return null;var a=getPeriodForStreamInfo(t,p);if(!a)return null;var u=r.getAdaptationsForPeriod(a),l=getAdaptationForType(t.index,i,t);return l?convertAdaptationToMediaInfo(u[r.getIndexForAdaptation(l,p[0].mpd.manifest,t.index)]):null},getAllMediaInfoForType:getAllMediaInfoForType,getAdaptationForType:getAdaptationForType,getRealAdaptation:function getRealAdaptation(t,i){var a,u,l=getPeriodForStreamInfo(t,p);return a=i?i.id:null,p.length>0&&l&&(u=a?r.getAdaptationForId(a,p[0].mpd.manifest,l.index):r.getAdaptationForIndex(i?i.index:null,p[0].mpd.manifest,l.index)),u},getProducerReferenceTimes:function getProducerReferenceTimes(t,i){var a,u,l=getPeriodForStreamInfo(t,p);return a=i?i.id:null,p.length>0&&l&&(u=a?r.getAdaptationForId(a,p[0].mpd.manifest,l.index):r.getAdaptationForIndex(i?i.index:null,p[0].mpd.manifest,l.index)),u?r.getProducerReferenceTimesForAdaptation(u):[]},getRealPeriodByIndex:function getRealPeriodByIndex(t){return r.getRealPeriodForIndex(t,p[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function getEssentialPropertiesForRepresentation(t){try{return r.getEssentialPropertiesForRepresentation(t)}catch(t){return[]}},getVoRepresentations:function getVoRepresentations(t){var i=getAdaptationForMediaInfo(t);return r.getRepresentationsForAdaptation(i)},getEventsFor:function getEventsFor(t,i){var a=[];if(p.length>0){var d=p[0].mpd.manifest;t instanceof c.default?a=r.getEventsForPeriod(getPeriodForStreamInfo(t,p)):t instanceof l.default?a=r.getEventStreamForAdaptationSet(d,getAdaptationForMediaInfo(t)):t instanceof u.default&&(a=r.getEventStreamForRepresentation(d,i))}return a},getEvent:function getEvent(t,r,i,a){try{if(!t||!r||isNaN(i)||!a)return null;var u=t.scheme_id_uri,l=t.value;if(!r[u+"/"+l])return null;var c,d=new g.default,p=t.timescale||1,m=a.adaptation.period.start,v=r[u+"/"+l],b=isNaN(a.presentationTimeOffset)?isNaN(v.presentationTimeOffset)?0:v.presentationTimeOffset:a.presentationTimeOffset,M=t.presentation_time_delta/p;c=0===t.version?m+i-b+M:m-b+M;var S=t.event_duration,E=t.id,I=t.message_data;return d.eventStream=v,d.eventStream.value=l,d.eventStream.timescale=p,d.duration=S,d.id=E,d.calculatedPresentationTime=c,d.messageData=I,d.presentationTimeDelta=M,d}catch(t){return null}},getMpd:getMpd,setConfig:function setConfig(t){t&&(t.constants&&(M=t.constants),t.cea608parser&&(S=t.cea608parser),t.errHandler&&r.setConfig({errHandler:t.errHandler}),t.BASE64&&r.setConfig({BASE64:t.BASE64}))},updatePeriods:function updatePeriods(t){if(!t)return null;checkConfig(),p=getRegularPeriods(t)},getIsTextTrack:function getIsTextTrack(t){return r.getIsText(t)},getUTCTimingSources:function getUTCTimingSources(){var t=getManifest();return r.getUTCTimingSources(t)},getSuggestedPresentationDelay:function getSuggestedPresentationDelay(){var t=p.length>0?p[0].mpd:null;return r.getSuggestedPresentationDelay(t)},getAvailabilityStartTime:function getAvailabilityStartTime(t){var i=getMpd(t);return r.getAvailabilityStartTime(i)},getIsTypeOf:function getIsTypeOf(t,i){return r.getIsTypeOf(t,i)},getIsDynamic:function getIsDynamic(t){var i=getManifest(t);return r.getIsDynamic(i)},getDuration:function getDuration(t){var i=getManifest(t);return r.getDuration(i)},getRegularPeriods:getRegularPeriods,getLocation:function getLocation(t){return r.getLocation(t)},getPatchLocation:function getPatchLocation(t){var i=r.getPatchLocation(t),a=r.getPublishTime(t);if(!i||!a)return null;if(i.hasOwnProperty("ttl")&&a){var u=1e3*parseFloat(i.ttl);if(a.getTime()+u<=(new Date).getTime())return null}return i.__text},getManifestUpdatePeriod:function getManifestUpdatePeriod(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.getManifestUpdatePeriod(t,i)},getPublishTime:function getPublishTime(t){return r.getPublishTime(t)},getIsDVB:function getIsDVB(t){return r.hasProfile(t,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function getIsPatch(t){return i.getIsPatch(t)},getBaseURLsFromElement:function getBaseURLsFromElement(t){return r.getBaseURLsFromElement(t)},getRepresentationSortFunction:function getRepresentationSortFunction(){return r.getRepresentationSortFunction()},getCodec:function getCodec(t,i,a){return r.getCodec(t,i,a)},getPeriodById:function getPeriodById(t){if(!t||0===p.length)return null;var r=p.filter((function(r){return r.id===t}));return r&&r.length>0?r[0]:null},setCurrentMediaInfo:function setCurrentMediaInfo(t,r,i){b[t]=b[t]||{},b[t][r]=b[t][r]||{},b[t][r]=i},isPatchValid:function isPatchValid(t,a){var u=r.getId(t),l=i.getMpdId(a),c=r.getPublishTime(t),d=i.getPublishTime(a),g=i.getOriginalPublishTime(a);return!!(u&&l&&u==l&&c&&g&&c.getTime()==g.getTime()&&d&&c.getTime()<d.getTime())},applyPatchToManifest:function applyPatchToManifest(t,r){i.getPatchOperations(r).forEach((function(r){var i=r.getMpdTarget(t);if(null!==i){var a=i.name,u=i.target,l=i.leaf;if(r.xpath.findsAttribute())switch(r.action){case"add":case"replace":u[a]=r.value;break;case"remove":delete u[a]}else{var c=(u[a+"_asArray"]||[]).indexOf(l),d="prepend"===r.position||"before"===r.position;if(("remove"===r.action||"replace"===r.action)&&(delete u[a],-1!=c)){var g=u[a+"_asArray"];g.splice(c,1),g.length>1?u[a]=g:1==g.length?u[a]=g[0]:delete u[a+"_asArray"]}"add"!==r.action&&"replace"!==r.action||Object.keys(r.value).forEach((function(t){var i=r.value[t],l=u[t+"_asArray"]||[];if(0===l.length&&u[t]&&l.push(u[t]),0===l.length)l=i;else{var g=l.length;g=t==a&&-1!=c?c+(d?0:1)+("replace"==r.action?-1:0):d?0:l.length,l.splice.apply(l,[g,0].concat(i))}u[t+"_asArray"]=l,u[t]=1==l.length?l[0]:l}))}}}))},areMediaInfosEqual:areMediaInfosEqual,reset:reset},function setup(){r=Object(m.default)(E).getInstance(),i=Object(v.default)(E).getInstance(),reset()}(),t}DashAdapter.__dashjs_factory_name="DashAdapter",r.default=p.default.getSingletonFactory(DashAdapter)},"./src/dash/DashHandler.js":
/*!*********************************!*\
    !*** ./src/dash/DashHandler.js ***!
    \*********************************/
/*! exports provided: default */function srcDashDashHandlerJs(t,r,i){i.r(r);var a=i(/*! ../streaming/vo/FragmentRequest */"./src/streaming/vo/FragmentRequest.js"),u=i(/*! ../streaming/vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),l=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! ../streaming/MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),d=i(/*! ./utils/SegmentsUtils */"./src/dash/utils/SegmentsUtils.js"),g=i(/*! ./constants/DashConstants */"./src/dash/constants/DashConstants.js");function DashHandler(t){var r,i,l,p,m,v=(t=t||{}).eventBus,b=t.debug,M=t.urlUtils,S=t.type,E=t.streamInfo,I=t.segmentsController,D=t.timelineConverter,A=t.baseURLController;function getType(){return S}function resetInitialSettings(){l=null}function _setRequestUrl(t,r,i){var a,u,l=A.resolve(i.path);return l&&r!==l.url&&M.isRelative(r)?(a=l.url,u=l.serviceLocation,r&&(a=M.resolve(r,a))):a=r,!M.isRelative(a)&&(t.url=a,t.serviceLocation=u,!0)}function _getRequestForSegment(t,r){if(null==r)return null;var i=new a.default,l=r.representation,c=l.adaptation.period.mpd.manifest.Period_asArray[l.adaptation.period.index].AdaptationSet_asArray[l.adaptation.index].Representation_asArray[l.index].bandwidth,g=r.media;return g=Object(d.replaceTokenForTemplate)(g,"Number",r.replacementNumber),g=Object(d.replaceTokenForTemplate)(g,"Time",r.replacementTime),g=Object(d.replaceTokenForTemplate)(g,"Bandwidth",c),g=Object(d.replaceIDForTemplate)(g,l.id),g=Object(d.unescapeDollarsInTemplate)(g),i.mediaType=getType(),i.type=u.HTTPRequest.MEDIA_SEGMENT_TYPE,i.range=r.mediaRange,i.startTime=r.presentationStartTime,i.mediaStartTime=r.mediaStartTime,i.duration=r.duration,i.timescale=l.timescale,i.availabilityStartTime=r.availabilityStartTime,i.availabilityEndTime=r.availabilityEndTime,i.availabilityTimeComplete=l.availabilityTimeComplete,i.wallStartTime=r.wallStartTime,i.quality=l.index,i.index=r.index,i.mediaInfo=t,i.adaptationIndex=l.adaptation.index,i.representationId=l.id,_setRequestUrl(i,g,l)?i:void 0}function getSegmentRequestForTime(t,r,a){var u=null;if(!r||!r.segmentInfoType)return u;var c=I.getSegmentByTime(r,a);return c&&(l=c,i.debug("Index for time "+a+" is "+c.index),u=_getRequestForSegment(t,c)),u}function _onDynamicToStatic(){i.debug("Dynamic stream complete"),m=!0}return r={initialize:function initialize(t){p=t,m=!1,I.initialize(t)},getStreamId:function getStreamId(){return E.id},getType:getType,getStreamInfo:function getStreamInfo(){return E},getInitRequest:function getInitRequest(t,r){return r?function _generateInitRequest(t,r,i){var l=new a.default,c=r.adaptation.period,g=c.start;if(l.mediaType=i,l.type=u.HTTPRequest.INIT_SEGMENT_TYPE,l.range=r.range,l.availabilityStartTime=D.calcAvailabilityStartTimeFromPresentationTime(g,r,p),l.availabilityEndTime=D.calcAvailabilityEndTimeFromPresentationTime(g+c.duration,r,p),l.quality=r.index,l.mediaInfo=t,l.representationId=r.id,_setRequestUrl(l,r.initialization,r))return l.url=Object(d.replaceTokenForTemplate)(l.url,"Bandwidth",r.bandwidth),l}(t,r,getType()):null},getSegmentRequestForTime:getSegmentRequestForTime,getCurrentIndex:function getCurrentIndex(){return l?l.index:-1},getNextSegmentRequest:function getNextSegmentRequest(t,r){var a=null;if(!r||!r.segmentInfoType)return null;var u=l?l.index+1:0,c=I.getSegmentByIndex(r,u,l?l.mediaStartTime:-1);if(c)a=_getRequestForSegment(t,c),l=c;else{if(p&&!m)return i.debug(getType()+" No segment found at index: "+u+". Wait for next loop"),null;m=!0}return a},isLastSegmentRequested:function isLastSegmentRequested(t,r){if(!t||!l)return!1;if(m)return!0;if(!isFinite(t.adaptation.period.duration))return!1;if(l.presentationStartTime+l.duration>r)return!1;if(t.mediaFinishedInformation&&!isNaN(t.mediaFinishedInformation.numberOfSegments)&&!isNaN(l.index)&&l.index>=t.mediaFinishedInformation.numberOfSegments-1){if(!p||t.segmentInfoType===g.default.SEGMENT_TEMPLATE)return!0;if(p&&t.segmentInfoType===g.default.SEGMENT_LIST&&t.adaptation.period.nextPeriodId)return!0}return!!(p&&t.adaptation.period.nextPeriodId&&t.segmentInfoType===g.default.SEGMENT_TIMELINE&&t.mediaFinishedInformation&&!isNaN(t.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&l&&!isNaN(l.mediaStartTime)&&!isNaN(l.duration)&&l.mediaStartTime+l.duration>=t.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function reset(){resetInitialSettings(),v.off(c.default.DYNAMIC_TO_STATIC,_onDynamicToStatic,r)},getNextSegmentRequestIdempotent:function getNextSegmentRequestIdempotent(t,r){var i=l?l.index+1:0,a=I.getSegmentByIndex(r,i,l?l.mediaStartTime:-1);return a?_getRequestForSegment(t,a):null},getValidTimeCloseToTargetTime:function getValidTimeCloseToTargetTime(t,r,i,a){try{if(isNaN(t)||!r||!i)return NaN;if(t<0&&(t=0),isNaN(a)&&(a=.5),getSegmentRequestForTime(r,i,t))return t;for(var u=i.adaptation.period.start,l=i.adaptation.period.start+i.adaptation.period.duration,c=Math.min(t+a,l),d=Math.max(t-a,u),g=NaN,p=null;c<=l||d>=u;){var m=null,v=null;if(c<=l&&(m=getSegmentRequestForTime(r,i,c)),d>=u&&(v=getSegmentRequestForTime(r,i,d)),v){g=d,p=v;break}if(m){g=c,p=m;break}c+=a,d-=a}if(p){var b=p.startTime+p.duration;return t>=p.startTime&&b-t>a?t:t<p.startTime?p.startTime:Math.min(b-a,g)}return g}catch(t){return NaN}},getValidTimeAheadOfTargetTime:function getValidTimeAheadOfTargetTime(t,r,i,a){try{if(isNaN(t)||!r||!i)return NaN;if(t<0&&(t=0),isNaN(a)&&(a=.5),getSegmentRequestForTime(r,i,t))return t;if(i.adaptation.period.start+i.adaptation.period.duration<t)return NaN;for(var u=Math.min(i.adaptation.period.start+i.adaptation.period.duration,t+30),l=Math.min(t+a,u),c=NaN,d=null;l<=u;){var g=null;if(l<=u&&(g=getSegmentRequestForTime(r,i,l)),g){c=l,d=g;break}l+=a}if(d){var p=d.startTime+d.duration;return t>=d.startTime&&p-t>a?t:t<d.startTime?d.startTime:Math.min(p-a,c)}return c}catch(t){return NaN}}},function setup(){i=b.getLogger(r),resetInitialSettings(),v.on(c.default.DYNAMIC_TO_STATIC,_onDynamicToStatic,r)}(),r}DashHandler.__dashjs_factory_name="DashHandler",r.default=l.default.getClassFactory(DashHandler)},"./src/dash/DashMetrics.js":
/*!*********************************!*\
    !*** ./src/dash/DashMetrics.js ***!
    \*********************************/
/*! exports provided: default */function srcDashDashMetricsJs(t,r,i){i.r(r);var a=i(/*! ../streaming/constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../streaming/vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),l=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! ../streaming/constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),d=i(/*! ./utils/Round10 */"./src/dash/utils/Round10.js"),g=i(/*! ../streaming/models/MetricsModel */"./src/streaming/models/MetricsModel.js"),p=i(/*! ../core/Utils */"./src/core/Utils.js"),m=i(/*! ../streaming/vo/metrics/PlayList */"./src/streaming/vo/metrics/PlayList.js");function DashMetrics(t){t=t||{};var r,i,l,v,b=this.context,M=t.metricsModel;function getCurrentHttpRequest(t){var r=M.getMetricsFor(t,!0);if(!r)return null;var i,a=r.HttpList,u=null;if(!a||a.length<=0)return null;for(i=a.length-1;i>=0;){if(a[i].responsecode){u=a[i];break}i--}return u}function getHttpRequests(t){var r=M.getMetricsFor(t,!0);return r&&r.HttpList?r.HttpList:[]}function getCurrent(t,r){if(!t)return null;var i=t[r];return i&&0!==i.length?i[i.length-1]:null}return r={getCurrentRepresentationSwitch:function getCurrentRepresentationSwitch(t){return getCurrent(M.getMetricsFor(t,!0),c.default.TRACK_SWITCH)},getCurrentBufferState:function getCurrentBufferState(t){return getCurrent(M.getMetricsFor(t,!0),c.default.BUFFER_STATE)},getCurrentBufferLevel:function getCurrentBufferLevel(t){var r=getCurrent(M.getMetricsFor(t,!0),c.default.BUFFER_LEVEL);return r?d.default.round10(r.level/1e3,-3):0},getCurrentHttpRequest:getCurrentHttpRequest,getHttpRequests:getHttpRequests,getCurrentDroppedFrames:function getCurrentDroppedFrames(){return getCurrent(M.getMetricsFor(a.default.VIDEO,!0),c.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function getCurrentSchedulingInfo(t){return getCurrent(M.getMetricsFor(t,!0),c.default.SCHEDULING_INFO)},getCurrentDVRInfo:function getCurrentDVRInfo(t){return getCurrent(t?M.getMetricsFor(t,!0):M.getMetricsFor(a.default.VIDEO,!0)||M.getMetricsFor(a.default.AUDIO,!0),c.default.DVR_INFO)},getCurrentManifestUpdate:function getCurrentManifestUpdate(){return getCurrent(M.getMetricsFor(a.default.STREAM),c.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function getLatestFragmentRequestHeaderValueByID(t,r){if(!r)return null;var i={},a=getCurrentHttpRequest(t);a&&(i=p.default.parseHttpHeaders(a._responseHeaders));var u=i[r.toLowerCase()];return void 0===u?null:u},getLatestMPDRequestHeaderValueByID:function getLatestMPDRequestHeaderValueByID(t){if(!t)return null;var r,i,l,c={};for(l=(r=getHttpRequests(a.default.STREAM)).length-1;l>=0;l--)if((i=r[l]).type===u.HTTPRequest.MPD_TYPE){c=p.default.parseHttpHeaders(i._responseHeaders);break}var d=c[t.toLowerCase()];return void 0===d?null:d},addRepresentationSwitch:function addRepresentationSwitch(t,r,i,a,u){M.addRepresentationSwitch(t,r,i,a,u)},addDVRInfo:function addDVRInfo(t,r,i,a){M.addDVRInfo(t,r,i,a)},updateManifestUpdateInfo:function updateManifestUpdateInfo(t){var r=this.getCurrentManifestUpdate();M.updateManifestUpdateInfo(r,t)},addManifestUpdateStreamInfo:function addManifestUpdateStreamInfo(t){if(t){var r=this.getCurrentManifestUpdate();M.addManifestUpdateStreamInfo(r,t.id,t.index,t.start,t.duration)}},addManifestUpdateRepresentationInfo:function addManifestUpdateRepresentationInfo(t,r){if(t){var i=this.getCurrentManifestUpdate();M.addManifestUpdateRepresentationInfo(i,t.id,t.index,t.streamIndex,r,t.presentationTimeOffset,t.startNumber,t.fragmentInfoType)}},addManifestUpdate:function addManifestUpdate(t){M.addManifestUpdate(a.default.STREAM,t.type,t.requestStartDate,t.requestEndDate)},addHttpRequest:function addHttpRequest(t,r,i,a,u){M.addHttpRequest(t.mediaType,null,t.type,t.url,t.quality,r,t.serviceLocation||null,t.range||null,t.requestStartDate,t.firstByteDate,t.requestEndDate,i,t.duration,a,u,t.fileLoaderType)},addSchedulingInfo:function addSchedulingInfo(t,r){M.addSchedulingInfo(t.mediaType,new Date,t.type,t.startTime,t.availabilityStartTime,t.duration,t.quality,t.range,r)},addRequestsQueue:function addRequestsQueue(t,r,i){M.addRequestsQueue(t,r,i)},addBufferLevel:function addBufferLevel(t,r,i){M.addBufferLevel(t,r,i)},addBufferState:function addBufferState(t,r,i){M.addBufferState(t,r,i)},addDroppedFrames:function addDroppedFrames(t){M.addDroppedFrames(a.default.VIDEO,t)},addPlayList:function addPlayList(){v&&(M.addPlayList(v),v=null)},addDVBErrors:function addDVBErrors(t){M.addDVBErrors(t)},createPlaylistMetrics:function createPlaylistMetrics(t,r){(v=new m.PlayList).start=new Date,v.mstart=t,v.starttype=r},createPlaylistTraceMetrics:function createPlaylistTraceMetrics(t,r,a){!0===i&&(i=!1,(l=new m.PlayListTrace).representationid=t,l.start=new Date,l.mstart=r,l.playbackspeed=null!==a?a.toString():null)},updatePlayListTraceMetrics:function updatePlayListTraceMetrics(t){if(l)for(var r in l)l[r]=t[r]},pushPlayListTraceMetrics:function pushPlayListTraceMetrics(t,r){if(!1===i&&v&&l&&l.start){var a=l.start,u=t.getTime()-a.getTime();l.duration=u,l.stopreason=r,v.trace.push(l),i=!0}},clearAllCurrentMetrics:function clearAllCurrentMetrics(){M.clearAllCurrentMetrics()}},function setup(){M=M||Object(g.default)(b).getInstance({settings:t.settings}),function resetInitialSettings(){i=!0,l=null,v=null}()}(),r}DashMetrics.__dashjs_factory_name="DashMetrics",r.default=l.default.getSingletonFactory(DashMetrics)},"./src/dash/SegmentBaseLoader.js":
/*!***************************************!*\
    !*** ./src/dash/SegmentBaseLoader.js ***!
    \***************************************/
/*! exports provided: default */function srcDashSegmentBaseLoaderJs(t,r,i){i.r(r);var a=i(/*! ./vo/Segment */"./src/dash/vo/Segment.js"),u=i(/*! ../streaming/vo/DashJSError */"./src/streaming/vo/DashJSError.js"),l=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! ../streaming/vo/FragmentRequest */"./src/streaming/vo/FragmentRequest.js"),d=i(/*! ../streaming/net/URLLoader */"./src/streaming/net/URLLoader.js");function SegmentBaseLoader(){var t,r,i,l,g,p,m,v,b,M,S,E,I,D=this.context;function _loadInitializationRecursively(t,i,a,u){var c=null,d=t?I.resolve(t.path):null,g=u||{init:!0,url:d?d.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:i};r.debug("Start searching for initialization.");var p=getFragmentRequest(g);v.load({request:p,success:function onload(r){if(g.bytesLoaded=g.range.end,!(c=l.findInitRange(r)))return g.range.end=g.bytesLoaded+g.bytesToLoad,_loadInitializationRecursively(t,i,a,g);t.range=c,a(t)},error:function onerror(){a(t)}}),r.debug("Perform init search: "+g.url)}function _loadSegmentsRecursively(t,i,u,c,d,g){if(u&&(void 0===u.start||void 0===u.end)){var p=u?u.toString().split("-"):null;u=p?{start:parseFloat(p[0]),end:parseFloat(p[1])}:null}d=d||onLoaded;var m=null,b=null,M=!!u,S=t?I.resolve(t.path):null,E={init:!1,url:S?S.url:void 0,range:M?u:{start:0,end:1500},searching:!M,bytesLoaded:g?g.bytesLoaded:0,bytesToLoad:1500,mediaType:i},D=getFragmentRequest(E);v.load({request:D,success:function onload(u){var g=E.bytesToLoad,p=u.byteLength;if(E.bytesLoaded=E.range.end-E.range.start,m=l.parse(u),(b=m.getBox("sidx"))&&b.isComplete){var v,M,S=b.references;if(null!=S&&S.length>0&&(v=1===S[0].reference_type),v){var I,D,A,C;r.debug("Initiate multiple SIDX load."),E.range.end=E.range.start+b.size;var N=[],k=0,O=(b.offset||E.range.start)+b.size,L=function tmpCallback(r){r?(N=N.concat(r),++k>=D&&(N.sort((function(t,r){return t.startTime-r.startTime<0?-1:0})),d(N,t,c))):d(null,t,c)};for(I=0,D=S.length;I<D;I++)A=O,C=O+S[I].referenced_size-1,O+=S[I].referenced_size,_loadSegmentsRecursively(t,i,{start:A,end:C},c,L,E)}else r.debug("Parsing segments from SIDX. representation "+i+" - id: "+t.id+" for range : "+E.range.start+" - "+E.range.end),M=function getSegmentsForSidx(t,r){for(var i,u,l,c,d=t.references,g=d.length,p=t.timescale,m=t.earliest_presentation_time,v=r.range.start+t.offset+t.first_offset+t.size,b=[],M=0;M<g;M++)l=d[M].subsegment_duration,c=d[M].referenced_size,(i=new a.default).duration=l,i.startTime=m,i.timescale=p,u=v+c-1,i.mediaRange=v+"-"+u,b.push(i),m+=l,v+=c;return b}(b,E),d(M,t,c)}else{if(b)E.range.start=b.offset||E.range.start,E.range.end=E.range.start+(b.size||g);else{if(p<E.bytesLoaded)return void d(null,t,c);var R=m.getLastBox();R&&R.size?(E.range.start=R.offset+R.size,E.range.end=E.range.start+g):E.range.end+=g}_loadSegmentsRecursively(t,i,E.range,c,null,E)}},error:function onerror(){d(null,t,c)}}),r.debug("Perform SIDX load for type ".concat(i," : ").concat(E.url," with range ").concat(E.range.start," - ").concat(E.range.end))}function onLoaded(t,r,i){i({segments:t,representation:r,error:t?void 0:new u.default(b.SEGMENT_BASE_LOADER_ERROR_CODE,b.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function getFragmentRequest(t){if(t.url){var r=new c.default;return r.setInfo(t),r}}return t={setConfig:function setConfig(a){a.baseURLController&&(I=a.baseURLController),a.dashMetrics&&(p=a.dashMetrics),a.mediaPlayerModel&&(m=a.mediaPlayerModel),a.errHandler&&(i=a.errHandler),a.boxParser&&(l=a.boxParser),a.debug&&(r=a.debug.getLogger(t)),a.requestModifier&&(g=a.requestModifier),a.errors&&(b=a.errors),a.urlUtils&&(E=a.urlUtils),a.constants&&(M=a.constants),a.dashConstants&&(S=a.dashConstants)},initialize:function initialize(){v=Object(d.default)(D).create({errHandler:i,dashMetrics:p,mediaPlayerModel:m,requestModifier:g,boxParser:l,errors:b,urlUtils:E,constants:M,dashConstants:S})},loadInitialization:function loadInitialization(t,r){return new Promise((function(i){_loadInitializationRecursively(t,r,i)}))},loadSegments:function loadSegments(t,r,i){return new Promise((function(a){_loadSegmentsRecursively(t,r,i,a)}))},reset:function reset(){v&&(v.abort(),v=null)}},t}SegmentBaseLoader.__dashjs_factory_name="SegmentBaseLoader",r.default=l.default.getSingletonFactory(SegmentBaseLoader)},"./src/dash/WebmSegmentBaseLoader.js":
/*!*******************************************!*\
    !*** ./src/dash/WebmSegmentBaseLoader.js ***!
    \*******************************************/
/*! exports provided: default */function srcDashWebmSegmentBaseLoaderJs(t,r,i){i.r(r);var a=i(/*! ../streaming/utils/EBMLParser */"./src/streaming/utils/EBMLParser.js"),u=i(/*! ../streaming/constants/Constants */"./src/streaming/constants/Constants.js"),l=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! ./vo/Segment */"./src/dash/vo/Segment.js"),d=i(/*! ../streaming/vo/FragmentRequest */"./src/streaming/vo/FragmentRequest.js"),g=i(/*! ../streaming/net/URLLoader */"./src/streaming/net/URLLoader.js"),p=i(/*! ../streaming/vo/DashJSError */"./src/streaming/vo/DashJSError.js");function WebmSegmentBaseLoader(){var t,r,i,l,m,v,b,M,S,E,I=this.context;function parseSegments(t,u,l,d){var g,p,m,v,b,M,S,E;for(m=[],b=0,M=(p=function parseCues(t){var r,u,l=[],c=Object(a.default)(I).create({data:t});for(c.consumeTagAndSize(i.Segment.Cues);c.moreData()&&c.consumeTagAndSize(i.Segment.Cues.CuePoint,!0);){for((r={}).CueTime=c.parseTag(i.Segment.Cues.CuePoint.CueTime),r.CueTracks=[];c.moreData()&&c.consumeTag(i.Segment.Cues.CuePoint.CueTrackPositions,!0);){var d=c.getMatroskaCodedNum(),g=c.getPos();if((u={}).Track=c.parseTag(i.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===u.Track)throw new Error("Cue track cannot be 0");u.ClusterPosition=c.parseTag(i.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),r.CueTracks.push(u),c.setPos(g+d)}if(0===r.CueTracks.length)throw new Error("Mandatory cuetrack not found");l.push(r)}if(0===l.length)throw new Error("mandatory cuepoint not found");return l}(t)).length;b<M;b+=1)v=new c.default,g=0,g=b<p.length-1?p[b+1].CueTime-p[b].CueTime:d-p[b].CueTime,v.duration=g,v.startTime=p[b].CueTime,v.timescale=1e3,S=p[b].CueTracks[0].ClusterPosition+u,E=b<p.length-1?p[b+1].CueTracks[0].ClusterPosition+u-1:l-1,v.mediaRange=S+"-"+E,m.push(v);return r.debug("Parsed cues: "+m.length+" cues."),m}function _getFragmentRequest(t){var r=new d.default;return r.setInfo(t),r}return t={setConfig:function setConfig(i){if(!(i.baseURLController&&i.dashMetrics&&i.mediaPlayerModel&&i.errHandler))throw new Error(u.default.MISSING_CONFIG_ERROR);E=i.baseURLController,v=i.dashMetrics,b=i.mediaPlayerModel,l=i.errHandler,S=i.errors,r=i.debug.getLogger(t),m=i.requestModifier},initialize:function initialize(){M=Object(g.default)(I).create({errHandler:l,dashMetrics:v,mediaPlayerModel:b,requestModifier:m,errors:S})},loadInitialization:function loadInitialization(t,i){return new Promise((function(a){var u=null,l=t?E.resolve(t.path):null,c=t?t.range.split("-"):null,d={range:{start:c?parseFloat(c[0]):null,end:c?parseFloat(c[1]):null},request:u,url:l?l.url:void 0,init:!0,mediaType:i};r.info("Start loading initialization."),u=_getFragmentRequest(d);M.load({request:u,success:function onload(){a(t)},error:function onloadend(){a(t)}}),r.debug("Perform init load: "+d.url)}))},loadSegments:function loadSegments(t,u,l){return new Promise((function(c){var d=null,g=t?E.resolve(t.path):null,m=g?g.url:void 0;d=_getFragmentRequest({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:d,url:m,init:!1,mediaType:u}),r.debug("Parsing ebml header");M.load({request:d,success:function onload(u){!function parseEbmlHeader(t,u,l,c){if(t&&0!==t.byteLength){var d,g,p,m,v=Object(a.default)(I).create({data:t}),b=l?l.split("-"):null,S=null,E={url:u,range:{start:b?parseFloat(b[0]):null,end:b?parseFloat(b[1]):null},request:S};for(r.debug("Parse EBML header: "+E.url),v.skipOverElement(i.EBML),v.consumeTag(i.Segment),p=v.getMatroskaCodedNum(),p+=v.getPos(),m=v.getPos();v.moreData()&&!v.consumeTagAndSize(i.Segment.Info,!0);)if(!(v.skipOverElement(i.Segment.SeekHead,!0)||v.skipOverElement(i.Segment.Tracks,!0)||v.skipOverElement(i.Segment.Cues,!0)||v.skipOverElement(i.Void,!0)))throw new Error("no valid top level element found");for(;void 0===d;){var D=v.getMatroskaCodedNum(!0),A=v.getMatroskaCodedNum();D===i.Segment.Info.Duration.tag?d=v[i.Segment.Info.Duration.parse](A):v.setPos(v.getPos()+A)}S=_getFragmentRequest(E),M.load({request:S,success:function onload(t){g=parseSegments(t,m,p,d),c(g)},error:function onloadend(){r.error("Download Error: Cues "+E.url),c(null)}}),r.debug("Perform cues load: "+E.url+" bytes="+E.range.start+"-"+E.range.end)}else c(null)}(u,m,l,(function(r){c({segments:r,representation:t,error:r?void 0:new p.default(S.SEGMENT_BASE_LOADER_ERROR_CODE,S.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}))},error:function onloadend(){c({representation:t,error:new p.default(S.SEGMENT_BASE_LOADER_ERROR_CODE,S.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})}))},reset:function reset(){M&&(M.abort(),M=null)}},function setup(){i={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}}}(),t}WebmSegmentBaseLoader.__dashjs_factory_name="WebmSegmentBaseLoader",r.default=l.default.getSingletonFactory(WebmSegmentBaseLoader)},"./src/dash/constants/DashConstants.js":
/*!*********************************************!*\
    !*** ./src/dash/constants/DashConstants.js ***!
    \*********************************************/
/*! exports provided: default */function srcDashConstantsDashConstantsJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=new(function(){function DashConstants(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DashConstants),this.init()}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(DashConstants,[{key:"init",value:function init(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime"}}]),DashConstants}());r.default=a},"./src/dash/controllers/RepresentationController.js":
/*!**********************************************************!*\
    !*** ./src/dash/controllers/RepresentationController.js ***!
    \**********************************************************/
/*! exports provided: default */function srcDashControllersRepresentationControllerJs(t,r,i){i.r(r);var a=i(/*! ../../streaming/constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),l=i(/*! ../../streaming/MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),c=i(/*! ../utils/SegmentsUtils */"./src/dash/utils/SegmentsUtils.js");function RepresentationController(t){var r,i,u,d,g,p=(t=t||{}).eventBus,m=t.events,v=t.abrController,b=t.dashMetrics,M=t.playbackController,S=t.timelineConverter,E=t.type,I=t.streamInfo,D=t.dashConstants,A=t.segmentsController,C=t.isDynamic;function getType(){return E}function checkConfig(){if(!(v&&b&&M&&S))throw new Error(a.default.MISSING_CONFIG_ERROR)}function isUpdating(){return u}function getCurrentRepresentation(){return g}function resetInitialSettings(){i=null,u=!0,d=[]}function _updateRepresentation(t){return new Promise((function(r,i){var a=t.hasInitialization(),u=t.hasSegments(),l=[];l.push(A.updateInitData(t,a)),l.push(A.updateSegmentData(t,u)),Promise.all(l).then((function(i){i[0]&&!i[0].error&&(t=function _onInitLoaded(t,r){if(!r||r.error||!r.representation)return t;return r.representation}(t,i[0])),i[1]&&!i[1].error&&(t=function _onSegmentsLoaded(t,r){if(!r||r.error)return;var i,a,u,l,d=r.segments,g=[],p=0;for(i=0,a=d?d.length:0;i<a;i++)u=d[i],(l=Object(c.getTimeBasedSegment)(S,C,t,u.startTime,u.duration,u.timescale,u.media,u.mediaRange,p))&&(g.push(l),l=null,p++);g.length>0&&(t.segments=g);return t}(t,i[1])),function _setMediaFinishedInformation(t){t.mediaFinishedInformation=A.getMediaFinishedInformation(t)}(t),function _onRepresentationUpdated(t){if(!isUpdating())return;var r,i=b.getCurrentManifestUpdate(),a=!1;if(i){for(var u=0;u<i.representationInfo.length;u++)if((r=i.representationInfo[u]).index===t.index&&r.mediaType===getType()){a=!0;break}a||b.addManifestUpdateRepresentationInfo(t,getType())}if(function isAllRepresentationsUpdated(){for(var t=0,r=d.length;t<r;t++){var i=d[t].segmentInfoType;if(!d[t].hasInitialization()||(i===D.SEGMENT_BASE||i===D.BASE_URL)&&!d[t].segments)return!1}return!0}()){v.setPlaybackQuality(E,I,function getQualityForRepresentation(t){return d.indexOf(t)}(g));var l=b.getCurrentDVRInfo(E);l&&b.updateManifestUpdateInfo({latency:l.range.end-M.getTime()}),b.getCurrentRepresentationSwitch(getCurrentRepresentation().adaptation.type)||_addRepresentationSwitch(),endDataUpdate()}}(t),r()})).catch((function(t){i(t)}))}))}function _addRepresentationSwitch(){checkConfig();var t=new Date,r=getCurrentRepresentation(),i=1e3*M.getTime();r&&b.addRepresentationSwitch(r.adaptation.type,t,i,r.id),p.trigger(l.default.REPRESENTATION_SWITCH,{mediaType:E,streamId:I.id,currentRepresentation:r,numberOfRepresentations:d.length},{streamId:I.id,mediaType:E})}function getRepresentationForQuality(t){return null==t||t>=d.length?null:d[t]}function endDataUpdate(t){u=!1,p.trigger(m.DATA_UPDATE_COMPLETED,{data:i,currentRepresentation:g,error:t},{streamId:I.id,mediaType:E})}function _setCurrentVoRepresentation(t){g=t}function onManifestValidityChanged(t){if(t.newDuration){var r=getCurrentRepresentation();if(r&&r.adaptation.period)r.adaptation.period.duration=t.newDuration}}return r={getStreamId:function getStreamId(){return I.id},getType:getType,getData:function getData(){return i},isUpdating:isUpdating,updateData:function updateData(t,r,l,c,g){if(checkConfig(),u=!0,d=r,_setCurrentVoRepresentation(getRepresentationForQuality(g)),i=t,l!==a.default.VIDEO&&l!==a.default.AUDIO&&(l!==a.default.TEXT||!c))return endDataUpdate(),Promise.resolve();for(var p=[],m=0,v=d.length;m<v;m++){var b=d[m];p.push(_updateRepresentation(b))}return Promise.all(p)},getCurrentRepresentation:getCurrentRepresentation,getRepresentationForQuality:getRepresentationForQuality,prepareQualityChange:function prepareQualityChange(t){_setCurrentVoRepresentation(getRepresentationForQuality(t)),_addRepresentationSwitch()},reset:function reset(){p.off(l.default.MANIFEST_VALIDITY_CHANGED,onManifestValidityChanged,r),resetInitialSettings()}},function setup(){resetInitialSettings(),p.on(l.default.MANIFEST_VALIDITY_CHANGED,onManifestValidityChanged,r)}(),r}RepresentationController.__dashjs_factory_name="RepresentationController",r.default=u.default.getClassFactory(RepresentationController)},"./src/dash/controllers/SegmentBaseController.js":
/*!*******************************************************!*\
    !*** ./src/dash/controllers/SegmentBaseController.js ***!
    \*******************************************************/
/*! exports provided: default */function srcDashControllersSegmentBaseControllerJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../SegmentBaseLoader */"./src/dash/SegmentBaseLoader.js"),l=i(/*! ../WebmSegmentBaseLoader */"./src/dash/WebmSegmentBaseLoader.js");function SegmentBaseController(t){t=t||{};var r,i,a,c=this.context,d=t.eventBus,g=t.events,p=t.dashMetrics,m=t.mediaPlayerModel,v=t.errHandler,b=t.baseURLController,M=t.debug,S=t.boxParser,E=t.requestModifier,I=t.errors;function isWebM(t){return"webm"===(t?t.split("/")[1]:"").toLowerCase()}return r={initialize:function initialize(){i.initialize(),a.initialize()},getSegmentBaseInitSegment:function getSegmentBaseInitSegment(t){return isWebM(t.representation.mimeType)?a.loadInitialization(t.representation,t.mediaType):i.loadInitialization(t.representation,t.mediaType)},getSegmentList:function getSegmentList(t){return isWebM(t.mimeType)?a.loadSegments(t.representation,t.mediaType,t.representation?t.representation.indexRange:null):i.loadSegments(t.representation,t.mediaType,t.representation?t.representation.indexRange:null)},reset:function reset(){i.reset(),a.reset()}},function setup(){i=Object(u.default)(c).getInstance(),a=Object(l.default)(c).getInstance(),i.setConfig({baseURLController:b,dashMetrics:p,mediaPlayerModel:m,errHandler:v,eventBus:d,events:g,errors:I,debug:M,boxParser:S,requestModifier:E}),a.setConfig({baseURLController:b,dashMetrics:p,mediaPlayerModel:m,errHandler:v,eventBus:d,events:g,errors:I,debug:M,requestModifier:E})}(),r}SegmentBaseController.__dashjs_factory_name="SegmentBaseController";var c=a.default.getSingletonFactory(SegmentBaseController);r.default=c},"./src/dash/controllers/SegmentsController.js":
/*!****************************************************!*\
    !*** ./src/dash/controllers/SegmentsController.js ***!
    \****************************************************/
/*! exports provided: default */function srcDashControllersSegmentsControllerJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../utils/TimelineSegmentsGetter */"./src/dash/utils/TimelineSegmentsGetter.js"),l=i(/*! ../utils/TemplateSegmentsGetter */"./src/dash/utils/TemplateSegmentsGetter.js"),c=i(/*! ../utils/ListSegmentsGetter */"./src/dash/utils/ListSegmentsGetter.js"),d=i(/*! ../utils/SegmentBaseGetter */"./src/dash/utils/SegmentBaseGetter.js");function SegmentsController(t){t=t||{};var r,i,a=this.context,g=t.dashConstants,p=t.type,m=t.segmentBaseController;function getSegmentsGetter(t){return t?t.segments?i[g.SEGMENT_BASE]:i[t.segmentInfoType]:null}return r={initialize:function initialize(r){i[g.SEGMENT_TIMELINE]=Object(u.default)(a).create(t,r),i[g.SEGMENT_TEMPLATE]=Object(l.default)(a).create(t,r),i[g.SEGMENT_LIST]=Object(c.default)(a).create(t,r),i[g.SEGMENT_BASE]=Object(d.default)(a).create(t,r)},updateInitData:function updateInitData(t,r){return r?Promise.resolve():m.getSegmentBaseInitSegment({representation:t,mediaType:p})},updateSegmentData:function updateSegmentData(t,r){return r?Promise.resolve():m.getSegmentList({mimeType:t.mimeType,representation:t,mediaType:p})},getSegmentByIndex:function getSegmentByIndex(t,r,i){var a=getSegmentsGetter(t);return a?a.getSegmentByIndex(t,r,i):null},getSegmentByTime:function getSegmentByTime(t,r){var i=getSegmentsGetter(t);return i?i.getSegmentByTime(t,r):null},getMediaFinishedInformation:function getMediaFinishedInformation(t){var r=getSegmentsGetter(t);return r?r.getMediaFinishedInformation(t):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},function setup(){i={}}(),r}SegmentsController.__dashjs_factory_name="SegmentsController";var g=a.default.getClassFactory(SegmentsController);r.default=g},"./src/dash/models/DashManifestModel.js":
/*!**********************************************!*\
    !*** ./src/dash/models/DashManifestModel.js ***!
    \**********************************************/
/*! exports provided: default */function srcDashModelsDashManifestModelJs(t,r,i){i.r(r);var a=i(/*! ../../streaming/constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../constants/DashConstants */"./src/dash/constants/DashConstants.js"),l=i(/*! ../vo/Representation */"./src/dash/vo/Representation.js"),c=i(/*! ../vo/AdaptationSet */"./src/dash/vo/AdaptationSet.js"),d=i(/*! ../vo/Period */"./src/dash/vo/Period.js"),g=i(/*! ../vo/Mpd */"./src/dash/vo/Mpd.js"),p=i(/*! ../vo/UTCTiming */"./src/dash/vo/UTCTiming.js"),m=i(/*! ../vo/Event */"./src/dash/vo/Event.js"),v=i(/*! ../vo/BaseURL */"./src/dash/vo/BaseURL.js"),b=i(/*! ../vo/EventStream */"./src/dash/vo/EventStream.js"),M=i(/*! ../vo/ProducerReferenceTime */"./src/dash/vo/ProducerReferenceTime.js"),S=i(/*! ../../streaming/utils/ObjectUtils */"./src/streaming/utils/ObjectUtils.js"),E=i(/*! ../../streaming/utils/URLUtils */"./src/streaming/utils/URLUtils.js"),I=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),D=i(/*! ../../core/Debug */"./src/core/Debug.js"),A=i(/*! ../../streaming/vo/DashJSError */"./src/streaming/vo/DashJSError.js"),C=i(/*! ../../core/errors/Errors */"./src/core/errors/Errors.js"),N=i(/*! ../../streaming/thumbnail/ThumbnailTracks */"./src/streaming/thumbnail/ThumbnailTracks.js");function _createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,u=function F(){};return{s:u,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,d=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){d=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(d)throw l}}}}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function DashManifestModel(){var t,r,i,I,k=this.context,O=Object(E.default)(k).getInstance(),L=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function getIsTypeOf(t,r){if(!t)throw new Error("adaptation is not defined");if(!r)throw new Error("type is not defined");if(t.Representation_asArray&&t.Representation_asArray.length){var i=getEssentialPropertiesForRepresentation(t.Representation_asArray[0]);if(i&&i.length>0&&N.THUMBNAILS_SCHEME_ID_URIS.indexOf(i[0].schemeIdUri)>=0)return r===a.default.IMAGE}if(t.ContentComponent_asArray&&t.ContentComponent_asArray.length>0){if(t.ContentComponent_asArray.length>1)return r===a.default.MUXED;if(t.ContentComponent_asArray[0].contentType===r)return!0}var l=r===a.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(r);if(t.Representation_asArray&&t.Representation_asArray.length){var c=t.Representation_asArray[0].codecs;if(l.test(c))return!0}if(t.hasOwnProperty(u.default.MIME_TYPE))return l.test(t.mimeType);if(t.Representation_asArray)for(var d,g=0;g<t.Representation_asArray.length;g++)if((d=t.Representation_asArray[g]).hasOwnProperty(u.default.MIME_TYPE))return l.test(d.mimeType);return!1}function getIsFragmented(t){if(!t)throw new Error("adaptation is not defined");if(t.hasOwnProperty(u.default.SEGMENT_TEMPLATE)||t.hasOwnProperty(u.default.SEGMENT_TIMELINE)||t.hasOwnProperty(u.default.SEGMENT_LIST)||t.hasOwnProperty(u.default.SEGMENT_BASE))return!0;if(t.Representation_asArray&&t.Representation_asArray.length>0){var r=t.Representation_asArray[0];if(r.hasOwnProperty(u.default.SEGMENT_TEMPLATE)||r.hasOwnProperty(u.default.SEGMENT_TIMELINE)||r.hasOwnProperty(u.default.SEGMENT_LIST)||r.hasOwnProperty(u.default.SEGMENT_BASE))return!0}return!1}function getIsAudio(t){return getIsTypeOf(t,a.default.AUDIO)}function getIsVideo(t){return getIsTypeOf(t,a.default.VIDEO)}function getIsText(t){return getIsTypeOf(t,a.default.TEXT)}function getIsImage(t){return getIsTypeOf(t,a.default.IMAGE)}function getRepresentationSortFunction(){return function(t,r){return t.bandwidth-r.bandwidth}}function processAdaptation(t){return t&&Array.isArray(t.Representation_asArray)&&t.Representation_asArray.sort((function(t,r){return t.bandwidth-r.bandwidth})),t}function getRealAdaptations(t,r){return t&&t.Period_asArray&&L(r)&&t.Period_asArray[r]?t.Period_asArray[r].AdaptationSet_asArray:[]}function getRealPeriods(t){return t&&t.Period_asArray?t.Period_asArray:[]}function getIsDynamic(t){var r=!1;return t&&t.hasOwnProperty("type")&&(r=t.type===u.default.DYNAMIC),r}function getEssentialPropertiesForRepresentation(t){return t&&t.EssentialProperty_asArray&&t.EssentialProperty_asArray.length?t.EssentialProperty_asArray.map((function(t){return{schemeIdUri:t.schemeIdUri,value:t.value}})):null}function calcSegmentDuration(t){if(!t||!t.S_asArray)return NaN;var r=t.S_asArray[0],i=t.S_asArray[1];return r.hasOwnProperty("d")?r.d:i.t-r.t}function getPeriodId(t,r){if(!t)throw new Error("Period cannot be null or undefined");var i=d.default.DEFAULT_ID+"_"+r;return t.hasOwnProperty(u.default.ID)&&t.id.length>0&&"__proto__"!==t.id&&(i=t.id),i}function getEventStreams(t,r){var i,l=[];if(!t)return l;for(i=0;i<t.length;i++){var c=new b.default;if(c.timescale=1,c.representation=r,!t[i].hasOwnProperty(a.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");c.schemeIdUri=t[i].schemeIdUri,t[i].hasOwnProperty(u.default.TIMESCALE)&&(c.timescale=t[i].timescale),t[i].hasOwnProperty(u.default.VALUE)&&(c.value=t[i].value),l.push(c)}return l}function getBaseURLsFromElement(t){var r=[],i=t.BaseURL_asArray||[t.baseUri],a=!1;return i.some((function(i){if(i){var l=new v.default,c=i.__text||i;return O.isRelative(c)&&(a=!0,t.baseUri&&(c=O.resolve(c,t.baseUri))),l.url=c,i.hasOwnProperty(u.default.SERVICE_LOCATION)&&i.serviceLocation.length?l.serviceLocation=i.serviceLocation:l.serviceLocation=c,i.hasOwnProperty(u.default.DVB_PRIORITY)&&(l.dvb_priority=i[u.default.DVB_PRIORITY]),i.hasOwnProperty(u.default.DVB_WEIGHT)&&(l.dvb_weight=i[u.default.DVB_WEIGHT]),i.hasOwnProperty(u.default.AVAILABILITY_TIME_OFFSET)&&(l.availabilityTimeOffset=i[u.default.AVAILABILITY_TIME_OFFSET]),i.hasOwnProperty(u.default.AVAILABILITY_TIME_COMPLETE)&&(l.availabilityTimeComplete="false"!==i[u.default.AVAILABILITY_TIME_COMPLETE]),r.push(l),a}})),r}return t={getIsTypeOf:getIsTypeOf,getIsText:getIsText,getIsFragmented:getIsFragmented,getProducerReferenceTimesForAdaptation:function getProducerReferenceTimesForAdaptation(t){var r=t&&t.hasOwnProperty(u.default.PRODUCERREFERENCETIME_ASARRAY)?t[u.default.PRODUCERREFERENCETIME_ASARRAY]:[];(t&&t.hasOwnProperty(u.default.REPRESENTATION_ASARRAY)?t[u.default.REPRESENTATION_ASARRAY]:[]).forEach((function(t){t.hasOwnProperty(u.default.PRODUCERREFERENCETIME_ASARRAY)&&r.push.apply(r,_toConsumableArray(t[u.default.PRODUCERREFERENCETIME_ASARRAY]))}));var i=[];return r.forEach((function(t){var r=new M.default;t.hasOwnProperty(u.default.ID)&&(r[u.default.ID]=t[u.default.ID],t.hasOwnProperty(u.default.WALL_CLOCK_TIME)&&(r[u.default.WALL_CLOCK_TIME]=t[u.default.WALL_CLOCK_TIME],t.hasOwnProperty(u.default.PRESENTATION_TIME)&&(r[u.default.PRESENTATION_TIME]=t[u.default.PRESENTATION_TIME],i.push(r))))})),i},getLanguageForAdaptation:function getLanguageForAdaptation(t){var r="";return t&&t.hasOwnProperty(u.default.LANG)&&(r=t.lang.replace(/[^A-Za-z0-9-]/g,"")),r},getViewpointForAdaptation:function getViewpointForAdaptation(t){return t&&t.hasOwnProperty(u.default.VIEWPOINT)?t.Viewpoint:null},getRolesForAdaptation:function getRolesForAdaptation(t){return t&&t.hasOwnProperty(u.default.ROLE_ASARRAY)?t.Role_asArray:[]},getAccessibilityForAdaptation:function getAccessibilityForAdaptation(t){return t&&t.hasOwnProperty(u.default.ACCESSIBILITY_ASARRAY)?t.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function getAudioChannelConfigurationForAdaptation(t){return t&&t.hasOwnProperty(u.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?t.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function getAudioChannelConfigurationForRepresentation(t){return t&&t.hasOwnProperty(u.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?t.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function getAdaptationForIndex(t,r,i){var a=getRealAdaptations(r,i);return a.length>0&&L(t)?a[t]:null},getIndexForAdaptation:function getIndexForAdaptation(t,r,i){if(!t)return-1;for(var a=getRealAdaptations(r,i),u=0;u<a.length;u++){if(Object(S.default)(k).getInstance().areEqual(a[u],t))return u}return-1},getAdaptationForId:function getAdaptationForId(t,r,i){var a,l,c=getRealAdaptations(r,i);for(a=0,l=c.length;a<l;a++)if(c[a].hasOwnProperty(u.default.ID)&&c[a].id===t)return c[a];return null},getAdaptationsForType:function getAdaptationsForType(t,r,i){var a,u,l=getRealAdaptations(t,r),c=[];for(a=0,u=l.length;a<u;a++)getIsTypeOf(l[a],i)&&c.push(processAdaptation(l[a]));return c},getRealPeriods:getRealPeriods,getRealPeriodForIndex:function getRealPeriodForIndex(t,r){var i=getRealPeriods(r);return i.length>0&&L(t)?i[t]:null},getCodec:function getCodec(t,r,i){var a=null;if(t&&t.Representation_asArray&&t.Representation_asArray.length>0){var u=L(r)&&r>=0&&r<t.Representation_asArray.length?t.Representation_asArray[r]:t.Representation_asArray[0];u&&(a=u.mimeType+';codecs="'+u.codecs+'"',i&&void 0!==u.width&&(a+=';width="'+u.width+'";height="'+u.height+'"'))}return a&&(a=a.replace(/\sprofiles=[^;]*/g,"")),a},getSelectionPriority:function getSelectionPriority(t){try{var r=t&&void 0!==t.selectionPriority?parseInt(t.selectionPriority):1;return isNaN(r)?1:r}catch(t){return 1}},getMimeType:function getMimeType(t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0?t.Representation_asArray[0].mimeType:null},getKID:function getKID(t){return t&&t.hasOwnProperty(u.default.CENC_DEFAULT_KID)?t[u.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function getLabelsForAdaptation(t){if(!t||!Array.isArray(t.Label_asArray))return[];for(var r=[],i=0;i<t.Label_asArray.length;i++)r.push({lang:t.Label_asArray[i].lang,text:t.Label_asArray[i].__text||t.Label_asArray[i]});return r},getContentProtectionData:function getContentProtectionData(t){return t&&t.hasOwnProperty(u.default.CONTENTPROTECTION_ASARRAY)&&0!==t.ContentProtection_asArray.length?t.ContentProtection_asArray:null},getIsDynamic:getIsDynamic,getId:function getId(t){return t&&t[u.default.ID]||null},hasProfile:function hasProfile(t,r){var i=!1;return t&&t.profiles&&t.profiles.length>0&&(i=-1!==t.profiles.indexOf(r)),i},getDuration:function getDuration(t){return t&&t.hasOwnProperty(u.default.MEDIA_PRESENTATION_DURATION)?t.mediaPresentationDuration:t&&"dynamic"==t.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function getBandwidth(t){return t&&t.bandwidth?t.bandwidth:NaN},getManifestUpdatePeriod:function getManifestUpdatePeriod(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=NaN;return t&&t.hasOwnProperty(u.default.MINIMUM_UPDATE_PERIOD)&&(i=t.minimumUpdatePeriod),isNaN(i)?i:Math.max(i-r,1)},getPublishTime:function getPublishTime(t){return t&&t.hasOwnProperty(u.default.PUBLISH_TIME)?new Date(t[u.default.PUBLISH_TIME]):null},getRepresentationCount:function getRepresentationCount(t){return t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray.length:0},getBitrateListForAdaptation:function getBitrateListForAdaptation(t){var r=processAdaptation(t);return(r&&Array.isArray(r.Representation_asArray)?r.Representation_asArray:[]).map((function(t){return{bandwidth:t.bandwidth,width:t.width||0,height:t.height||0,scanType:t.scanType||null,id:t.id||null}}))},getRepresentationFor:function getRepresentationFor(t,r){return r&&r.Representation_asArray&&r.Representation_asArray.length>0&&L(t)?r.Representation_asArray[t]:null},getRepresentationsForAdaptation:function getRepresentationsForAdaptation(t){var r,i,a,c,d=[],g=function getRealAdaptationFor(t){if(t&&t.period&&L(t.period.index)){var r=t.period.mpd.manifest.Period_asArray[t.period.index];if(r&&r.AdaptationSet_asArray&&L(t.index))return processAdaptation(r.AdaptationSet_asArray[t.index])}}(t);if(g&&g.Representation_asArray){if(t&&t.period&&L(t.period.index)){var p=getBaseURLsFromElement(t.period.mpd.manifest);p&&(i=p[0])}for(var m=0,v=g.Representation_asArray.length;m<v;++m){var b=g.Representation_asArray[m],M=new l.default;if(M.index=m,M.adaptation=t,b.hasOwnProperty(u.default.ID)&&(M.id=b.id),b.hasOwnProperty(u.default.CODECS)&&(M.codecs=b.codecs),b.hasOwnProperty(u.default.MIME_TYPE)&&(M.mimeType=b[u.default.MIME_TYPE]),b.hasOwnProperty(u.default.CODEC_PRIVATE_DATA)&&(M.codecPrivateData=b.codecPrivateData),b.hasOwnProperty(u.default.BANDWITH)&&(M.bandwidth=b.bandwidth),b.hasOwnProperty(u.default.WIDTH)&&(M.width=b.width),b.hasOwnProperty(u.default.HEIGHT)&&(M.height=b.height),b.hasOwnProperty(u.default.SCAN_TYPE)&&(M.scanType=b.scanType),b.hasOwnProperty(u.default.MAX_PLAYOUT_RATE)&&(M.maxPlayoutRate=b.maxPlayoutRate),b.hasOwnProperty(u.default.SEGMENT_BASE)?(r=b.SegmentBase,M.segmentInfoType=u.default.SEGMENT_BASE):b.hasOwnProperty(u.default.SEGMENT_LIST)?(r=b.SegmentList).hasOwnProperty(u.default.SEGMENT_TIMELINE)?M.segmentInfoType=u.default.SEGMENT_TIMELINE:M.segmentInfoType=u.default.SEGMENT_LIST:b.hasOwnProperty(u.default.SEGMENT_TEMPLATE)?((r=b.SegmentTemplate).hasOwnProperty(u.default.SEGMENT_TIMELINE)?M.segmentInfoType=u.default.SEGMENT_TIMELINE:M.segmentInfoType=u.default.SEGMENT_TEMPLATE,r.hasOwnProperty(u.default.INITIALIZATION_MINUS)&&(M.initialization=r.initialization.split("$Bandwidth$").join(b.bandwidth).split("$RepresentationID$").join(b.id))):M.segmentInfoType=u.default.BASE_URL,M.essentialProperties=getEssentialPropertiesForRepresentation(b),r){if(r.hasOwnProperty(u.default.INITIALIZATION)){var S=r.Initialization;S.hasOwnProperty(u.default.SOURCE_URL)&&(M.initialization=S.sourceURL),S.hasOwnProperty(u.default.RANGE)&&(M.range=S.range)}else getIsText(g)&&getIsFragmented(g)&&g.mimeType&&-1===g.mimeType.indexOf("application/mp4")&&(M.range=0);r.hasOwnProperty(u.default.TIMESCALE)&&(M.timescale=r.timescale),r.hasOwnProperty(u.default.DURATION)?M.segmentDuration=r.duration/M.timescale:b.hasOwnProperty(u.default.SEGMENT_TEMPLATE)&&(r=b.SegmentTemplate).hasOwnProperty(u.default.SEGMENT_TIMELINE)&&(M.segmentDuration=calcSegmentDuration(r.SegmentTimeline)/M.timescale),r.hasOwnProperty(u.default.MEDIA)&&(M.media=r.media),r.hasOwnProperty(u.default.START_NUMBER)&&(M.startNumber=r.startNumber),r.hasOwnProperty(u.default.INDEX_RANGE)&&(M.indexRange=r.indexRange),r.hasOwnProperty(u.default.PRESENTATION_TIME_OFFSET)&&(M.presentationTimeOffset=r.presentationTimeOffset/M.timescale),r.hasOwnProperty(u.default.AVAILABILITY_TIME_OFFSET)?M.availabilityTimeOffset=r.availabilityTimeOffset:i&&void 0!==i.availabilityTimeOffset&&(M.availabilityTimeOffset=i.availabilityTimeOffset),r.hasOwnProperty(u.default.AVAILABILITY_TIME_COMPLETE)?M.availabilityTimeComplete="false"!==r.availabilityTimeComplete:i&&void 0!==i.availabilityTimeComplete&&(M.availabilityTimeComplete=i.availabilityTimeComplete)}M.MSETimeOffset=(c=void 0,void 0,c=(a=M).presentationTimeOffset,a.adaptation.period.start-c),M.path=[t.period.index,t.index,m],d.push(M)}}return d},getAdaptationsForPeriod:function getAdaptationsForPeriod(t){var i,l,d,g=t&&L(t.index)?t.mpd.manifest.Period_asArray[t.index]:null,p=[];if(g&&g.AdaptationSet_asArray)for(d=0;d<g.AdaptationSet_asArray.length;d++)l=g.AdaptationSet_asArray[d],i=new c.default,l.hasOwnProperty(u.default.ID)&&(i.id=l.id),i.index=d,i.period=t,getIsTypeOf(l,a.default.MUXED)?i.type=a.default.MUXED:getIsAudio(l)?i.type=a.default.AUDIO:getIsVideo(l)?i.type=a.default.VIDEO:getIsText(l)?i.type=a.default.TEXT:getIsImage(l)?i.type=a.default.IMAGE:r.warn("Unknown Adaptation stream type"),p.push(i);return p},getRegularPeriods:function getRegularPeriods(t){var l,c,g=!!t&&getIsDynamic(t.manifest),p=[],m=null,v=null,b=null,M=null;for(c=0,l=t&&t.manifest&&t.manifest.Period_asArray?t.manifest.Period_asArray.length:0;c<l;c++)(v=t.manifest.Period_asArray[c]).hasOwnProperty(u.default.START)?(M=new d.default).start=v.start:null!==m&&m.hasOwnProperty(u.default.DURATION)&&null!==b?(M=new d.default).start=parseFloat((b.start+b.duration).toFixed(5)):0!==c||g||((M=new d.default).start=0),null!==b&&isNaN(b.duration)&&(null!==M?b.duration=parseFloat((M.start-b.start).toFixed(5)):r.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==M&&(M.id=getPeriodId(v,c),M.index=c,M.mpd=t,v.hasOwnProperty(u.default.DURATION)&&(M.duration=v.duration),b&&(b.nextPeriodId=M.id),p.push(M),m=v,b=M),v=null,M=null;return 0===p.length||null!==b&&isNaN(b.duration)&&(b.duration=parseFloat((function getEndTimeForLastPeriod(t){!function checkConfig(){if(!i||!i.hasOwnProperty("error"))throw new Error(a.default.MISSING_CONFIG_ERROR)}();var r,u=getIsDynamic(t.mpd.manifest);t.mpd.manifest.mediaPresentationDuration?r=t.mpd.manifest.mediaPresentationDuration:t.duration?r=t.duration:u?r=Number.POSITIVE_INFINITY:i.error(new A.default(C.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",t));return r}(b)-b.start).toFixed(5))),p},getMpd:function getMpd(t){var r=new g.default;return t&&(r.manifest=t,t.hasOwnProperty(u.default.AVAILABILITY_START_TIME)?r.availabilityStartTime=new Date(t.availabilityStartTime.getTime()):t.loadedTime&&(r.availabilityStartTime=new Date(t.loadedTime.getTime())),t.hasOwnProperty(u.default.AVAILABILITY_END_TIME)&&(r.availabilityEndTime=new Date(t.availabilityEndTime.getTime())),t.hasOwnProperty(u.default.MINIMUM_UPDATE_PERIOD)&&(r.minimumUpdatePeriod=t.minimumUpdatePeriod),t.hasOwnProperty(u.default.MEDIA_PRESENTATION_DURATION)&&(r.mediaPresentationDuration=t.mediaPresentationDuration),t.hasOwnProperty(u.default.SUGGESTED_PRESENTATION_DELAY)&&(r.suggestedPresentationDelay=t.suggestedPresentationDelay),t.hasOwnProperty(u.default.TIMESHIFT_BUFFER_DEPTH)&&(r.timeShiftBufferDepth=t.timeShiftBufferDepth),t.hasOwnProperty(u.default.MAX_SEGMENT_DURATION)&&(r.maxSegmentDuration=t.maxSegmentDuration),t.hasOwnProperty(u.default.PUBLISH_TIME)&&(r.publishTime=new Date(t.publishTime))),r},getEventsForPeriod:function getEventsForPeriod(t){var r,i,l=t&&t.mpd&&t.mpd.manifest?t.mpd.manifest:null,c=l?l.Period_asArray:null,d=c&&t&&L(t.index)?c[t.index].EventStream_asArray:null,g=[];if(d)for(r=0;r<d.length;r++){var p=new b.default;if(p.period=t,p.timescale=1,!d[r].hasOwnProperty(a.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(p.schemeIdUri=d[r][a.default.SCHEME_ID_URI],d[r].hasOwnProperty(u.default.TIMESCALE)&&(p.timescale=d[r][u.default.TIMESCALE]),d[r].hasOwnProperty(u.default.VALUE)&&(p.value=d[r][u.default.VALUE]),d[r].hasOwnProperty(u.default.PRESENTATION_TIME_OFFSET)&&(p.presentationTimeOffset=d[r][u.default.PRESENTATION_TIME_OFFSET]),i=0;d[r].Event_asArray&&i<d[r].Event_asArray.length;i++){var v=d[r].Event_asArray[i],M=new m.default;M.presentationTime=0,M.eventStream=p,v.hasOwnProperty(u.default.PRESENTATION_TIME)&&(M.presentationTime=v.presentationTime);var S=p.presentationTimeOffset?p.presentationTimeOffset/p.timescale:0;M.calculatedPresentationTime=M.presentationTime/p.timescale+t.start-S,v.hasOwnProperty(u.default.DURATION)&&(M.duration=v.duration/p.timescale),v.hasOwnProperty(u.default.ID)?M.id=v.id:M.id=null,v.Signal&&v.Signal.Binary?M.messageData=I.decodeArray(v.Signal.Binary.toString()):M.messageData=v.messageData||v.__cdata||v.__text,g.push(M)}}return g},getEssentialPropertiesForRepresentation:getEssentialPropertiesForRepresentation,getEventStreamForAdaptationSet:function getEventStreamForAdaptationSet(t,r){var i,a,u;return t&&t.Period_asArray&&r&&r.period&&L(r.period.index)&&(a=t.Period_asArray[r.period.index])&&a.AdaptationSet_asArray&&L(r.index)&&(u=a.AdaptationSet_asArray[r.index])&&(i=u.InbandEventStream_asArray),getEventStreams(i,null)},getEventStreamForRepresentation:function getEventStreamForRepresentation(t,r){var i,a,u,l;return t&&t.Period_asArray&&r&&r.adaptation&&r.adaptation.period&&L(r.adaptation.period.index)&&(a=t.Period_asArray[r.adaptation.period.index])&&a.AdaptationSet_asArray&&L(r.adaptation.index)&&(u=a.AdaptationSet_asArray[r.adaptation.index])&&u.Representation_asArray&&L(r.index)&&(l=u.Representation_asArray[r.index])&&(i=l.InbandEventStream_asArray),getEventStreams(i,r)},getUTCTimingSources:function getUTCTimingSources(t){var r=getIsDynamic(t),i=!!t&&t.hasOwnProperty(u.default.AVAILABILITY_START_TIME),l=t?t.UTCTiming_asArray:null,c=[];return(r||i)&&l&&l.forEach((function(t){var r=new p.default;t.hasOwnProperty(a.default.SCHEME_ID_URI)&&(r.schemeIdUri=t.schemeIdUri,t.hasOwnProperty(u.default.VALUE)&&(r.value=t.value.toString(),c.push(r)))})),c},getBaseURLsFromElement:getBaseURLsFromElement,getRepresentationSortFunction:getRepresentationSortFunction,getLocation:function getLocation(t){if(t&&t.hasOwnProperty(a.default.LOCATION))return t.Location=t.Location_asArray[0],t.Location},getPatchLocation:function getPatchLocation(t){if(t&&t.hasOwnProperty(u.default.PATCH_LOCATION))return t.PatchLocation=t.PatchLocation_asArray[0],t.PatchLocation},getSuggestedPresentationDelay:function getSuggestedPresentationDelay(t){return t&&t.hasOwnProperty(u.default.SUGGESTED_PRESENTATION_DELAY)?t.suggestedPresentationDelay:null},getAvailabilityStartTime:function getAvailabilityStartTime(t){return t&&t.hasOwnProperty(u.default.AVAILABILITY_START_TIME)&&null!==t.availabilityStartTime?t.availabilityStartTime.getTime():null},getServiceDescriptions:function getServiceDescriptions(t){var r=[];if(t&&t.hasOwnProperty(u.default.SERVICE_DESCRIPTION)){var i,a=_createForOfIteratorHelper(t.ServiceDescription_asArray);try{for(a.s();!(i=a.n()).done;){var l=i.value,c=null,d=null,g=null,p=null,m=null,v=null;for(var b in l)l.hasOwnProperty(b)&&(b===u.default.ID?c=l[b]:b===u.default.SERVICE_DESCRIPTION_SCOPE?d=l[b].schemeIdUri:b===u.default.SERVICE_DESCRIPTION_LATENCY?g={target:parseInt(l[b].target),max:parseInt(l[b].max),min:parseInt(l[b].min),referenceId:parseInt(l[b].referenceId)}:b===u.default.SERVICE_DESCRIPTION_PLAYBACK_RATE?p={max:parseFloat(l[b].max),min:parseFloat(l[b].min)}:b===u.default.SERVICE_DESCRIPTION_OPERATING_QUALITY?m={mediaType:l[b].mediaType,max:parseInt(l[b].max),min:parseInt(l[b].min),target:parseInt(l[b].target),type:l[b].type,maxQualityDifference:parseInt(l[b].maxQualityDifference)}:b===u.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH&&(v={mediaType:l[b].mediaType,max:parseInt(l[b].max),min:parseInt(l[b].min),target:parseInt(l[b].target)}));r.push({id:c,schemeIdUri:d,latency:g,playbackRate:p,operatingQuality:m,operatingBandwidth:v})}}catch(t){a.e(t)}finally{a.f()}}return r},getSupplementalProperties:function getSupplementalProperties(t){var r={};if(t&&t.hasOwnProperty(u.default.SUPPLEMENTAL_PROPERTY)){var i,l=_createForOfIteratorHelper(t.SupplementalProperty_asArray);try{for(l.s();!(i=l.n()).done;){var c=i.value;c.hasOwnProperty(a.default.SCHEME_ID_URI)&&c.hasOwnProperty(u.default.VALUE)&&(r[c[a.default.SCHEME_ID_URI]]=c[u.default.VALUE])}}catch(t){l.e(t)}finally{l.f()}}return r},setConfig:function setConfig(t){t&&(t.errHandler&&(i=t.errHandler),t.BASE64&&(I=t.BASE64))}},function setup(){r=Object(D.default)(k).getInstance().getLogger(t)}(),t}DashManifestModel.__dashjs_factory_name="DashManifestModel",r.default=I.default.getSingletonFactory(DashManifestModel)},"./src/dash/models/PatchManifestModel.js":
/*!***********************************************!*\
    !*** ./src/dash/models/PatchManifestModel.js ***!
    \***********************************************/
/*! exports provided: default */function srcDashModelsPatchManifestModelJs(t,r,i){i.r(r);var a=i(/*! ../constants/DashConstants */"./src/dash/constants/DashConstants.js"),u=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),l=i(/*! ../../core/Debug */"./src/core/Debug.js"),c=i(/*! ../vo/SimpleXPath */"./src/dash/vo/SimpleXPath.js"),d=i(/*! ../vo/PatchOperation */"./src/dash/vo/PatchOperation.js");function PatchManifestModel(){var t,r,i=this.context;return t={getIsPatch:function getIsPatch(t){return t&&t.hasOwnProperty(a.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function getPublishTime(t){return t&&t.hasOwnProperty(a.default.PUBLISH_TIME)?new Date(t[a.default.PUBLISH_TIME]):null},getOriginalPublishTime:function getOriginalPublishTime(t){return t&&t.hasOwnProperty(a.default.ORIGINAL_PUBLISH_TIME)?new Date(t[a.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function getMpdId(t){return t&&t[a.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function getPatchOperations(t){return t?(t.__children||[]).map((function(t){var i=Object.keys(t)[0];if("add"!==i&&"remove"!==i&&"replace"!==i)return r.warn("Ignoring node of invalid action: ".concat(i)),null;var a=t[i],u=a.sel;if("add"===i&&a.type){if(!a.type.startsWith("@"))return r.warn("Ignoring add action for prefixed namespace declaration: ".concat(a.type,"=").concat(a.__text)),null;u="".concat(u,"/").concat(a.type)}var l=new c.default(u);if(!l.isValid())return r.warn("Ignoring action with invalid selector: ".concat(i," - ").concat(u)),null;var g=null;l.findsAttribute()?g=a.__text||"":"remove"!==i&&(g=a.__children.reduce((function(t,r){var i=Object.keys(r)[0];return"#text"!==i&&(t[i]=t[i]||[],t[i].push(r[i])),t}),{}));var p=new d.default(i,l,g);return"add"===i&&(p.position=a.pos),p})).filter((function(t){return!!t})):[]}},function setup(){r=Object(l.default)(i).getInstance().getLogger(t)}(),t}PatchManifestModel.__dashjs_factory_name="PatchManifestModel",r.default=u.default.getSingletonFactory(PatchManifestModel)},"./src/dash/parser/DashParser.js":
/*!***************************************!*\
    !*** ./src/dash/parser/DashParser.js ***!
    \***************************************/
/*! exports provided: default */function srcDashParserDashParserJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ./objectiron */"./src/dash/parser/objectiron.js"),l=i(/*! ../../../externals/xml2json */"./externals/xml2json.js"),c=i(/*! ./matchers/StringMatcher */"./src/dash/parser/matchers/StringMatcher.js"),d=i(/*! ./matchers/DurationMatcher */"./src/dash/parser/matchers/DurationMatcher.js"),g=i(/*! ./matchers/DateTimeMatcher */"./src/dash/parser/matchers/DateTimeMatcher.js"),p=i(/*! ./matchers/NumericMatcher */"./src/dash/parser/matchers/NumericMatcher.js"),m=i(/*! ./maps/RepresentationBaseValuesMap */"./src/dash/parser/maps/RepresentationBaseValuesMap.js"),v=i(/*! ./maps/SegmentValuesMap */"./src/dash/parser/maps/SegmentValuesMap.js");function DashParser(t){t=t||{};var r,i,a,b,M,S=this.context,E=t.debug;return r={parse:function parse(t){var r,a=window.performance.now();if(!(r=b.xml_str2json(t)))throw new Error("parsing the manifest failed");var u=window.performance.now();r.Patch?((r=r.Patch).add_asArray&&r.add_asArray.forEach((function(t){return M.run(t)})),r.replace_asArray&&r.replace_asArray.forEach((function(t){return M.run(t)}))):(r=r.MPD,M.run(r));var l=window.performance.now();return i.info("Parsing complete: ( xml2json: "+(u-a).toPrecision(3)+"ms, objectiron: "+(l-u).toPrecision(3)+"ms, total: "+((l-a)/1e3).toPrecision(3)+"s)"),r.protocol="DASH",r},getMatchers:function getMatchers(){return a},getIron:function getIron(){return M}},function setup(){i=E.getLogger(r),a=[new d.default,new g.default,new p.default,new c.default],b=new l.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:a}),M=Object(u.default)(S).create({adaptationset:new m.default,period:new v.default})}(),r}DashParser.__dashjs_factory_name="DashParser",r.default=a.default.getClassFactory(DashParser)},"./src/dash/parser/maps/CommonProperty.js":
/*!************************************************!*\
    !*** ./src/dash/parser/maps/CommonProperty.js ***!
    \************************************************/
/*! exports provided: default */function srcDashParserMapsCommonPropertyJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=function(){function CommonProperty(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,CommonProperty);this._name=t,this._merge=function getDefaultMergeForName(t){return t&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase()}(t)}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(CommonProperty,[{key:"name",get:function get(){return this._name}},{key:"merge",get:function get(){return this._merge}}]),CommonProperty}();r.default=a},"./src/dash/parser/maps/MapNode.js":
/*!*****************************************!*\
    !*** ./src/dash/parser/maps/MapNode.js ***!
    \*****************************************/
/*! exports provided: default */function srcDashParserMapsMapNodeJs(t,r,i){i.r(r);var a=i(/*! ./CommonProperty */"./src/dash/parser/maps/CommonProperty.js");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function MapNode(t,r,i){var u=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MapNode),this._name=t||"",this._properties=[],this._children=i||[],Array.isArray(r)&&r.forEach((function(t){u._properties.push(new a.default(t))}))}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(MapNode,[{key:"name",get:function get(){return this._name}},{key:"children",get:function get(){return this._children}},{key:"properties",get:function get(){return this._properties}}]),MapNode}();r.default=u},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":
/*!*************************************************************!*\
    !*** ./src/dash/parser/maps/RepresentationBaseValuesMap.js ***!
    \*************************************************************/
/*! exports provided: default */function srcDashParserMapsRepresentationBaseValuesMapJs(t,r,i){i.r(r);var a=i(/*! ./MapNode */"./src/dash/parser/maps/MapNode.js"),u=i(/*! ../../constants/DashConstants */"./src/dash/constants/DashConstants.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var l=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(RepresentationBaseValuesMap,t);var r=_createSuper(RepresentationBaseValuesMap);function RepresentationBaseValuesMap(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,RepresentationBaseValuesMap);var t=[u.default.PROFILES,u.default.WIDTH,u.default.HEIGHT,u.default.SAR,u.default.FRAMERATE,u.default.AUDIO_SAMPLING_RATE,u.default.MIME_TYPE,u.default.SEGMENT_PROFILES,u.default.CODECS,u.default.MAXIMUM_SAP_PERIOD,u.default.START_WITH_SAP,u.default.MAX_PLAYOUT_RATE,u.default.CODING_DEPENDENCY,u.default.SCAN_TYPE,u.default.FRAME_PACKING,u.default.AUDIO_CHANNEL_CONFIGURATION,u.default.CONTENT_PROTECTION,u.default.ESSENTIAL_PROPERTY,u.default.SUPPLEMENTAL_PROPERTY,u.default.INBAND_EVENT_STREAM];return r.call(this,u.default.ADAPTATION_SET,t,[new a.default(u.default.REPRESENTATION,t,[new a.default(u.default.SUB_REPRESENTATION,t)])])}return RepresentationBaseValuesMap}(a.default);r.default=l},"./src/dash/parser/maps/SegmentValuesMap.js":
/*!**************************************************!*\
    !*** ./src/dash/parser/maps/SegmentValuesMap.js ***!
    \**************************************************/
/*! exports provided: default */function srcDashParserMapsSegmentValuesMapJs(t,r,i){i.r(r);var a=i(/*! ./MapNode */"./src/dash/parser/maps/MapNode.js"),u=i(/*! ../../constants/DashConstants */"./src/dash/constants/DashConstants.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var l=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(SegmentValuesMap,t);var r=_createSuper(SegmentValuesMap);function SegmentValuesMap(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,SegmentValuesMap);var t=[u.default.SEGMENT_BASE,u.default.SEGMENT_TEMPLATE,u.default.SEGMENT_LIST];return r.call(this,u.default.PERIOD,t,[new a.default(u.default.ADAPTATION_SET,t,[new a.default(u.default.REPRESENTATION,t)])])}return SegmentValuesMap}(a.default);r.default=l},"./src/dash/parser/matchers/BaseMatcher.js":
/*!*************************************************!*\
    !*** ./src/dash/parser/matchers/BaseMatcher.js ***!
    \*************************************************/
/*! exports provided: default */function srcDashParserMatchersBaseMatcherJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=function(){function BaseMatcher(t,r){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BaseMatcher),this._test=t,this._converter=r}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(BaseMatcher,[{key:"test",get:function get(){return this._test}},{key:"converter",get:function get(){return this._converter}}]),BaseMatcher}();r.default=a},"./src/dash/parser/matchers/DateTimeMatcher.js":
/*!*****************************************************!*\
    !*** ./src/dash/parser/matchers/DateTimeMatcher.js ***!
    \*****************************************************/
/*! exports provided: default */function srcDashParserMatchersDateTimeMatcherJs(t,r,i){i.r(r);var a=i(/*! ./BaseMatcher */"./src/dash/parser/matchers/BaseMatcher.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var u=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,l=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(DateTimeMatcher,t);var r=_createSuper(DateTimeMatcher);function DateTimeMatcher(){return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DateTimeMatcher),r.call(this,(function(t){return u.test(t.value)}),(function(t){var r,i=u.exec(t);if(r=Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),i[6]&&parseInt(i[6],10)||0,i[7]&&1e3*parseFloat(i[7])||0),i[9]&&i[10]){var a=60*parseInt(i[9],10)+parseInt(i[10],10);r+=("+"===i[8]?-1:1)*a*60*1e3}return new Date(r)}))}return DateTimeMatcher}(a.default);r.default=l},"./src/dash/parser/matchers/DurationMatcher.js":
/*!*****************************************************!*\
    !*** ./src/dash/parser/matchers/DurationMatcher.js ***!
    \*****************************************************/
/*! exports provided: default */function srcDashParserMatchersDurationMatcherJs(t,r,i){i.r(r);var a=i(/*! ./BaseMatcher */"./src/dash/parser/matchers/BaseMatcher.js"),u=i(/*! ../../../streaming/constants/Constants */"./src/streaming/constants/Constants.js"),l=i(/*! ../../constants/DashConstants */"./src/dash/constants/DashConstants.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var c=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,d=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(DurationMatcher,t);var r=_createSuper(DurationMatcher);function DurationMatcher(){return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DurationMatcher),r.call(this,(function(t){for(var r=[l.default.MIN_BUFFER_TIME,l.default.MEDIA_PRESENTATION_DURATION,l.default.MINIMUM_UPDATE_PERIOD,l.default.TIMESHIFT_BUFFER_DEPTH,l.default.MAX_SEGMENT_DURATION,l.default.MAX_SUBSEGMENT_DURATION,l.default.SUGGESTED_PRESENTATION_DELAY,l.default.START,u.default.START_TIME,l.default.DURATION],i=r.length,a=0;a<i;a++)if(t.nodeName===r[a])return c.test(t.value);return!1}),(function(t){var r=c.exec(t),i=31536e3*parseFloat(r[3]||0)+2592e3*parseFloat(r[5]||0)+86400*parseFloat(r[7]||0)+3600*parseFloat(r[9]||0)+60*parseFloat(r[11]||0)+parseFloat(r[13]||0);return void 0!==r[1]&&(i=-i),i}))}return DurationMatcher}(a.default);r.default=d},"./src/dash/parser/matchers/NumericMatcher.js":
/*!****************************************************!*\
    !*** ./src/dash/parser/matchers/NumericMatcher.js ***!
    \****************************************************/
/*! exports provided: default */function srcDashParserMatchersNumericMatcherJs(t,r,i){i.r(r);var a=i(/*! ./BaseMatcher */"./src/dash/parser/matchers/BaseMatcher.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var u=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,l=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(NumericMatcher,t);var r=_createSuper(NumericMatcher);function NumericMatcher(){return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,NumericMatcher),r.call(this,(function(t){return u.test(t.value)}),(function(t){return parseFloat(t)}))}return NumericMatcher}(a.default);r.default=l},"./src/dash/parser/matchers/StringMatcher.js":
/*!***************************************************!*\
    !*** ./src/dash/parser/matchers/StringMatcher.js ***!
    \***************************************************/
/*! exports provided: default */function srcDashParserMatchersStringMatcherJs(t,r,i){i.r(r);var a=i(/*! ./BaseMatcher */"./src/dash/parser/matchers/BaseMatcher.js"),u=i(/*! ../../constants/DashConstants */"./src/dash/constants/DashConstants.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperty(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var l=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(StringMatcher,t);var r=_createSuper(StringMatcher);function StringMatcher(){return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,StringMatcher),r.call(this,(function(t,r){var i,a=(_defineProperty(i={},u.default.MPD,[u.default.ID,u.default.PROFILES]),_defineProperty(i,u.default.PERIOD,[u.default.ID]),_defineProperty(i,u.default.BASE_URL,[u.default.SERVICE_LOCATION,u.default.BYTE_RANGE]),_defineProperty(i,u.default.SEGMENT_BASE,[u.default.INDEX_RANGE]),_defineProperty(i,u.default.INITIALIZATION,[u.default.RANGE]),_defineProperty(i,u.default.REPRESENTATION_INDEX,[u.default.RANGE]),_defineProperty(i,u.default.SEGMENT_LIST,[u.default.INDEX_RANGE]),_defineProperty(i,u.default.BITSTREAM_SWITCHING,[u.default.RANGE]),_defineProperty(i,u.default.SEGMENT_URL,[u.default.MEDIA_RANGE,u.default.INDEX_RANGE]),_defineProperty(i,u.default.SEGMENT_TEMPLATE,[u.default.INDEX_RANGE,u.default.MEDIA,u.default.INDEX,u.default.INITIALIZATION_MINUS,u.default.BITSTREAM_SWITCHING_MINUS]),_defineProperty(i,u.default.ASSET_IDENTIFIER,[u.default.VALUE,u.default.ID]),_defineProperty(i,u.default.EVENT_STREAM,[u.default.VALUE]),_defineProperty(i,u.default.ADAPTATION_SET,[u.default.PROFILES,u.default.MIME_TYPE,u.default.SEGMENT_PROFILES,u.default.CODECS,u.default.CONTENT_TYPE]),_defineProperty(i,u.default.FRAME_PACKING,[u.default.VALUE,u.default.ID]),_defineProperty(i,u.default.AUDIO_CHANNEL_CONFIGURATION,[u.default.VALUE,u.default.ID]),_defineProperty(i,u.default.CONTENT_PROTECTION,[u.default.VALUE,u.default.ID]),_defineProperty(i,u.default.ESSENTIAL_PROPERTY,[u.default.VALUE,u.default.ID]),_defineProperty(i,u.default.SUPPLEMENTAL_PROPERTY,[u.default.VALUE,u.default.ID]),_defineProperty(i,u.default.INBAND_EVENT_STREAM,[u.default.VALUE,u.default.ID]),_defineProperty(i,u.default.ACCESSIBILITY,[u.default.VALUE,u.default.ID]),_defineProperty(i,u.default.ROLE,[u.default.VALUE,u.default.ID]),_defineProperty(i,u.default.RATING,[u.default.VALUE,u.default.ID]),_defineProperty(i,u.default.VIEWPOINT,[u.default.VALUE,u.default.ID]),_defineProperty(i,u.default.CONTENT_COMPONENT,[u.default.CONTENT_TYPE]),_defineProperty(i,u.default.REPRESENTATION,[u.default.ID,u.default.DEPENDENCY_ID,u.default.MEDIA_STREAM_STRUCTURE_ID]),_defineProperty(i,u.default.SUBSET,[u.default.ID]),_defineProperty(i,u.default.METRICS,[u.default.METRICS_MINUS]),_defineProperty(i,u.default.REPORTING,[u.default.VALUE,u.default.ID]),i);if(a.hasOwnProperty(r)){var l=a[r];return void 0!==l&&l.indexOf(t.name)>=0}return!1}),(function(t){return String(t)}))}return StringMatcher}(a.default);r.default=l},"./src/dash/parser/objectiron.js":
/*!***************************************!*\
    !*** ./src/dash/parser/objectiron.js ***!
    \***************************************/
/*! exports provided: default */function srcDashParserObjectironJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function ObjectIron(t){function mergeValues(t,r){for(var i in t)r.hasOwnProperty(i)||(r[i]=t[i])}function mapProperties(t,r,i){for(var a=0,u=t.length;a<u;++a){var l=t[a];if(r[l.name])if(i[l.name]){if(l.merge){var c=r[l.name],d=i[l.name];"object"===_typeof(c)&&"object"===_typeof(d)?mergeValues(c,d):i[l.name]=c+d}}else i[l.name]=r[l.name]}}function mapItem(t,r){for(var i=0,a=t.children.length;i<a;++i){var u=t.children[i],l=r[u.name+"_asArray"];if(l)for(var c=0,d=l.length;c<d;++c){var g=l[c];mapProperties(t.properties,r,g),mapItem(u,g)}}}return{run:function run(r){if(null===r||"object"!==_typeof(r))return r;if(r.Period_asArray&&"period"in t)for(var i=t.period,a=r.Period_asArray,u=0,l=a.length;u<l;++u){var c=a[u];if(mapItem(i,c),"adaptationset"in t){var d=c.AdaptationSet_asArray;if(d)for(var g=t.adaptationset,p=0,m=d.length;p<m;++p)mapItem(g,d[p])}}return r}}}ObjectIron.__dashjs_factory_name="ObjectIron";var u=a.default.getClassFactory(ObjectIron);r.default=u},"./src/dash/utils/ListSegmentsGetter.js":
/*!**********************************************!*\
    !*** ./src/dash/utils/ListSegmentsGetter.js ***!
    \**********************************************/
/*! exports provided: default */function srcDashUtilsListSegmentsGetterJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../streaming/constants/Constants */"./src/streaming/constants/Constants.js"),l=i(/*! ./SegmentsUtils */"./src/dash/utils/SegmentsUtils.js");function ListSegmentsGetter(t,r){var i=(t=t||{}).timelineConverter;function checkConfig(){if(!i||!i.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(u.default.MISSING_CONFIG_ERROR)}function getSegmentByIndex(t,a){if(checkConfig(),!t)return null;var u=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,c=u.SegmentURL_asArray.length,d=t&&!isNaN(t.startNumber)?t.startNumber:1,g=Math.max(d-1,0),p=Math.max(a-g,0),m=null;if(p<c){var v=u.SegmentURL_asArray[p];(m=Object(l.getIndexBasedSegment)(i,r,t,a))&&(m.replacementTime=(d+a-1)*t.segmentDuration,m.media=v.media?v.media:"",m.mediaRange=v.mediaRange,m.indexRange=v.indexRange)}return m}return{getSegmentByIndex:getSegmentByIndex,getSegmentByTime:function getSegmentByTime(t,r){if(checkConfig(),!t)return null;var a=t.segmentDuration;if(isNaN(a))return null;var u=i.calcPeriodRelativeTimeFromMpdRelativeTime(t,r);return getSegmentByIndex(t,Math.floor(u/a))},getMediaFinishedInformation:function getMediaFinishedInformation(t){var r={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!t)return r;var i=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,a=t&&!isNaN(t.startNumber)?t.startNumber:1,u=Math.max(a-1,0);return r.numberOfSegments=u+i.SegmentURL_asArray.length,r}}}ListSegmentsGetter.__dashjs_factory_name="ListSegmentsGetter";var c=a.default.getClassFactory(ListSegmentsGetter);r.default=c},"./src/dash/utils/Round10.js":
/*!***********************************!*\
    !*** ./src/dash/utils/Round10.js ***!
    \***********************************/
/*! exports provided: default */function srcDashUtilsRound10Js(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r),i.d(r,"default",(function(){return a}));var a=function(){function Round10(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Round10)}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(Round10,null,[{key:"round10",value:function round10(t,r){return function _decimalAdjust(t,r,i){if(void 0===i||0==+i)return Math[t](r);if(i=+i,null===(r=+r)||isNaN(r)||!("number"==typeof i&&i%1==0))return NaN;return r=r.toString().split("e"),+((r=(r=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"))[0]+"e"+(r[1]?+r[1]+i:i))}("round",t,r)}}]),Round10}()},"./src/dash/utils/SegmentBaseGetter.js":
/*!*********************************************!*\
    !*** ./src/dash/utils/SegmentBaseGetter.js ***!
    \*********************************************/
/*! exports provided: default */function srcDashUtilsSegmentBaseGetterJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../streaming/constants/Constants */"./src/streaming/constants/Constants.js");function SegmentBaseGetter(t){var r,i=(t=t||{}).timelineConverter;function checkConfig(){if(!i||!i.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(u.default.MISSING_CONFIG_ERROR)}function getSegmentByIndex(t,r){if(checkConfig(),!t)return null;var i,a=t.segments?t.segments.length:-1;if(r<a&&(i=t.segments[r])&&i.index===r)return i;for(var u=0;u<a;u++)if((i=t.segments[u])&&i.index===r)return i;return null}return r={getSegmentByIndex:getSegmentByIndex,getSegmentByTime:function getSegmentByTime(t,r){checkConfig();var i=function getIndexByTime(t,r){if(!t)return-1;var i,a,u,l,c,d=t.segments,g=d?d.length:null,p=-1;if(d&&g>0)for(c=0;c<g;c++)if(u=(a=d[c]).presentationStartTime,r+(i=(l=a.duration)/2)>=u&&r-i<u+l){p=a.index;break}return p}(t,r);return getSegmentByIndex(t,i)},getMediaFinishedInformation:function getMediaFinishedInformation(t){var r={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return t&&t.segments?(r.numberOfSegments=t.segments.length,r):r}},r}SegmentBaseGetter.__dashjs_factory_name="SegmentBaseGetter";var l=a.default.getClassFactory(SegmentBaseGetter);r.default=l},"./src/dash/utils/SegmentsUtils.js":
/*!*****************************************!*\
    !*** ./src/dash/utils/SegmentsUtils.js ***!
    \*****************************************/
/*! exports provided: unescapeDollarsInTemplate, replaceIDForTemplate, replaceTokenForTemplate, getIndexBasedSegment, getTimeBasedSegment */function srcDashUtilsSegmentsUtilsJs(t,r,i){i.r(r),i.d(r,"unescapeDollarsInTemplate",(function(){return unescapeDollarsInTemplate})),i.d(r,"replaceIDForTemplate",(function(){return replaceIDForTemplate})),i.d(r,"replaceTokenForTemplate",(function(){return replaceTokenForTemplate})),i.d(r,"getIndexBasedSegment",(function(){return getIndexBasedSegment})),i.d(r,"getTimeBasedSegment",(function(){return getTimeBasedSegment}));var a=i(/*! ./../vo/Segment */"./src/dash/vo/Segment.js");function zeroPadToLength(t,r){for(;t.length<r;)t="0"+t;return t}function unescapeDollarsInTemplate(t){return t?t.split("$$").join("$"):t}function replaceIDForTemplate(t,r){if(!r||!t||-1===t.indexOf("$RepresentationID$"))return t;var i=r.toString();return t.split("$RepresentationID$").join(i)}function replaceTokenForTemplate(t,r,i){var a,u,l,c,d,g,p=r.length,m="%0".length;if(!t)return t;for(;;){if((a=t.indexOf("$"+r))<0)return t;if((u=t.indexOf("$",a+p))<0)return t;if((l=t.indexOf("%0",a+p))>a&&l<u)switch(c=t.charAt(u-1),d=parseInt(t.substring(l+m,u-1),10),c){case"d":case"i":case"u":g=zeroPadToLength(i.toString(),d);break;case"x":g=zeroPadToLength(i.toString(16),d);break;case"X":g=zeroPadToLength(i.toString(16),d).toUpperCase();break;case"o":g=zeroPadToLength(i.toString(8),d);break;default:return t}else g=i;t=t.substring(0,a)+g+t.substring(u+1)}}function getSegment(t,r,i,u,l,c,d,g){var p=new a.default;return p.representation=t,p.duration=r,p.presentationStartTime=i,p.mediaStartTime=u,p.availabilityStartTime=l.calcAvailabilityStartTimeFromPresentationTime(c,t,d),p.availabilityEndTime=l.calcAvailabilityEndTimeFromPresentationTime(c+r,t,d),p.wallStartTime=l.calcWallTimeForSegment(p,d),p.replacementNumber=function getNumberForSegment(t,r){return t.representation.startNumber+r}(p,g),p.index=g,p}function isSegmentAvailable(t,r,i,a){var u=r.adaptation.period;if(isFinite(u.duration)&&u.start+u.duration<=i.presentationStartTime)return!1;if(a){if("INF"===r.availabilityTimeOffset)return!0;var l=t.getClientReferenceTime();return i.availabilityStartTime.getTime()<=l&&(!isFinite(i.availabilityEndTime)||i.availabilityEndTime.getTime()>=l)}return!0}function getIndexBasedSegment(t,r,i,a){var u,l,c;u=i.segmentDuration,isNaN(u)&&(u=i.adaptation.period.duration),l=parseFloat((i.adaptation.period.start+a*u).toFixed(5)),c=parseFloat((l+u).toFixed(5));var d=getSegment(i,u,l,t.calcMediaTimeFromPresentationTime(l,i),t,c,r,a);return isSegmentAvailable(t,i,d,r)?d:null}function getTimeBasedSegment(t,r,i,a,u,l,c,d,g,p){var m,v,b=a/l,M=u/l;return m=t.calcPresentationTimeFromMediaTime(b,i),isSegmentAvailable(t,i,v=getSegment(i,M,m,b,t,m+M,r,g),r)?(v.replacementTime=p||a,c=replaceTokenForTemplate(c,"Number",v.replacementNumber),c=replaceTokenForTemplate(c,"Time",v.replacementTime),v.media=c,v.mediaRange=d,v):null}},"./src/dash/utils/TemplateSegmentsGetter.js":
/*!**************************************************!*\
    !*** ./src/dash/utils/TemplateSegmentsGetter.js ***!
    \**************************************************/
/*! exports provided: default */function srcDashUtilsTemplateSegmentsGetterJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../streaming/constants/Constants */"./src/streaming/constants/Constants.js"),l=i(/*! ./SegmentsUtils */"./src/dash/utils/SegmentsUtils.js");function TemplateSegmentsGetter(t,r){var i=(t=t||{}).timelineConverter;function checkConfig(){if(!i||!i.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(u.default.MISSING_CONFIG_ERROR)}function getSegmentByIndex(t,a){if(checkConfig(),!t)return null;var u=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate;a=Math.max(a,0);var c=Object(l.getIndexBasedSegment)(i,r,t,a);if(c){c.replacementTime=Math.round((a-1)*t.segmentDuration*t.timescale,10);var d=u.media;d=Object(l.replaceTokenForTemplate)(d,"Number",c.replacementNumber),d=Object(l.replaceTokenForTemplate)(d,"Time",c.replacementTime),c.media=d}return c}return{getSegmentByIndex:getSegmentByIndex,getSegmentByTime:function getSegmentByTime(t,r){if(checkConfig(),!t)return null;var a=t.segmentDuration;if(isNaN(a))return null;var u=i.calcPeriodRelativeTimeFromMpdRelativeTime(t,r);return getSegmentByIndex(t,Math.floor(u/a))},getMediaFinishedInformation:function getMediaFinishedInformation(t){var r={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!t)return r;var i=t.segmentDuration;return isNaN(i)?r.numberOfSegments=1:r.numberOfSegments=Math.ceil(t.adaptation.period.duration/i),r}}}TemplateSegmentsGetter.__dashjs_factory_name="TemplateSegmentsGetter";var c=a.default.getClassFactory(TemplateSegmentsGetter);r.default=c},"./src/dash/utils/TimelineConverter.js":
/*!*********************************************!*\
    !*** ./src/dash/utils/TimelineConverter.js ***!
    \*********************************************/
/*! exports provided: default */function srcDashUtilsTimelineConverterJs(t,r,i){i.r(r);var a=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),u=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),l=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! ../constants/DashConstants */"./src/dash/constants/DashConstants.js"),d=i(/*! ../models/DashManifestModel */"./src/dash/models/DashManifestModel.js"),g=i(/*! ../../core/Settings */"./src/core/Settings.js"),p=i(/*! ../../streaming/constants/Constants */"./src/streaming/constants/Constants.js"),m=i(/*! ../../streaming/MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),v=i(/*! ../../streaming/constants/ConformanceViolationConstants */"./src/streaming/constants/ConformanceViolationConstants.js");function TimelineConverter(){var t,r,i,l,b=this.context,M=Object(a.default)(b).getInstance(),S=Object(g.default)(b).getInstance();function setClientTimeOffset(t){l=t}function _calcAvailabilityTimeFromPresentationTime(t,r,i,a){var u,l=r.adaptation.period.mpd,c=l.availabilityStartTime;if(a)u=i&&l.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(c.getTime()+1e3*(t+l.timeShiftBufferDepth)):l.availabilityEndTime;else if(i){var d=r.availabilityTimeOffset;u=new Date(c.getTime()+1e3*(t-d))}else u=c;return u}function calcPresentationTimeFromWallTime(t,r){return(t.getTime()-r.mpd.availabilityStartTime.getTime()+1e3*l)/1e3}function calcPresentationTimeFromMediaTime(t,r){return t+(r.adaptation.period.start-r.presentationTimeOffset)}function _calcTimeShiftBufferWindowForDynamicTimelineManifest(t){var i={start:NaN,end:NaN},a=t[0].getAdapter().getRegularPeriods()[0],u=calcPresentationTimeFromWallTime(new Date,a);if(!t||0===t.length)return{range:i,now:u};t.forEach((function(t){var a=t.getAdapter(),l=a.getMediaInfoForType(t.getStreamInfo(),p.default.VIDEO)||a.getMediaInfoForType(t.getStreamInfo(),p.default.AUDIO),d=a.getVoRepresentations(l)[0],g={start:NaN,end:NaN};if(d)if(d.segmentInfoType===c.default.SEGMENT_TIMELINE)g=function _calcRangeForTimeline(t){var i,a,u,l,c=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],d=r.getRepresentationFor(t.index,c),g=d.SegmentTemplate.SegmentTimeline,p=d.SegmentTemplate.timescale,m=g.S_asArray,v={start:0,end:0},b=0;for(v.start=calcPresentationTimeFromMediaTime(m[0].t/p,t),u=0,l=m.length;u<l;u++)a=0,(i=m[u]).hasOwnProperty("r")&&(a=i.r),b+=i.d/p*(1+a);return v.end=v.start+b,v}(d);else{var m=d.adaptation.period;g.start=m.start,g.end=Math.max(u,m.start+m.duration)}!isNaN(g.start)&&(isNaN(i.start)||i.start>g.start)&&(i.start=g.start),!isNaN(g.end)&&(isNaN(i.end)||i.end<g.end)&&(i.end=g.end)})),i.end=Math.min(u,i.end);var l=_adjustTimeBasedOnPeriodRanges(t,i.end,!0);return i.end=isNaN(l)?i.end:l,i.start=a&&a.mpd&&a.mpd.timeShiftBufferDepth&&!isNaN(a.mpd.timeShiftBufferDepth)&&!isNaN(i.end)?Math.max(i.end-a.mpd.timeShiftBufferDepth,i.start):i.start,i.start=_adjustTimeBasedOnPeriodRanges(t,i.start),{range:i,now:u}}function _adjustTimelineAnchorAvailabilityOffset(t,r){i=t-r.end}function _adjustTimeBasedOnPeriodRanges(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var a=0,u=!1,l=NaN;!u&&a<t.length;){var c=t[a].getStreamInfo();c.start<=r&&(!isFinite(c.duration)||c.start+c.duration>=r)?(l=r,u=!0):!i&&c.start>r&&(isNaN(l)||c.start<l)?l=c.start:i&&c.start+c.duration<r&&(isNaN(l)||c.start+c.duration>l)&&(l=c.start+c.duration),a+=1}return l}catch(t){return r}}function _onUpdateTimeSyncOffset(t){void 0===t.offset||isNaN(t.offset)||setClientTimeOffset(t.offset/1e3)}function resetInitialSettings(){l=0,i=0}function reset(){M.off(u.default.UPDATE_TIME_SYNC_OFFSET,_onUpdateTimeSyncOffset,this),resetInitialSettings()}return t={initialize:function initialize(){resetInitialSettings(),M.on(u.default.UPDATE_TIME_SYNC_OFFSET,_onUpdateTimeSyncOffset,this)},getClientTimeOffset:function getClientTimeOffset(){return l},setClientTimeOffset:setClientTimeOffset,getClientReferenceTime:function getClientReferenceTime(){return Date.now()-1e3*i+1e3*l},calcAvailabilityStartTimeFromPresentationTime:function calcAvailabilityStartTimeFromPresentationTime(t,r,i){return _calcAvailabilityTimeFromPresentationTime(t,r,i)},calcAvailabilityEndTimeFromPresentationTime:function calcAvailabilityEndTimeFromPresentationTime(t,r,i){return _calcAvailabilityTimeFromPresentationTime(t,r,i,!0)},calcPresentationTimeFromWallTime:calcPresentationTimeFromWallTime,calcPresentationTimeFromMediaTime:calcPresentationTimeFromMediaTime,calcPeriodRelativeTimeFromMpdRelativeTime:function calcPeriodRelativeTimeFromMpdRelativeTime(t,r){return r-t.adaptation.period.start},calcMediaTimeFromPresentationTime:function calcMediaTimeFromPresentationTime(t,r){return t-r.adaptation.period.start+r.presentationTimeOffset},calcWallTimeForSegment:function calcWallTimeForSegment(t,r){var i,a,u;return r&&(i=t.representation.adaptation.period.mpd.suggestedPresentationDelay,a=t.presentationStartTime+i,u=new Date(t.availabilityStartTime.getTime()+1e3*a)),u},calcTimeShiftBufferWindow:function calcTimeShiftBufferWindow(t,r){if(!r)return function _calcTimeshiftBufferForStaticManifest(t){var r={start:NaN,end:NaN},i=0,a=NaN;return t.forEach((function(t){var r=t.getStreamInfo();i+=r.duration,(isNaN(a)||r.start<a)&&(a=r.start)})),r.start=a,r.end=a+i,r}(t);if(S.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var i=_calcTimeShiftBufferWindowForDynamicTimelineManifest(t);return _adjustTimelineAnchorAvailabilityOffset(i.now,i.range),i.range}return function _calcTimeShiftBufferWindowForDynamicManifest(t){var r={start:NaN,end:NaN};if(!t||0===t.length)return r;var i=t[0].getAdapter().getRegularPeriods()[0],a=calcPresentationTimeFromWallTime(new Date,i),u=i.mpd.timeShiftBufferDepth,l=isNaN(u)?0:a-u;r.start=_adjustTimeBasedOnPeriodRanges(t,l),r.end=!isNaN(r.start)&&a<r.start?a:_adjustTimeBasedOnPeriodRanges(t,a,!0),!isNaN(u)&&r.end<a-u&&(r.end=NaN);if(S.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var c=_calcTimeShiftBufferWindowForDynamicTimelineManifest(t);if(c.range.end<r.start)return M.trigger(m.default.CONFORMANCE_VIOLATION,{level:v.default.LEVELS.WARNING,event:v.default.EVENTS.INVALID_DVR_WINDOW}),_adjustTimelineAnchorAvailabilityOffset(c.now,c.range),c.range}return r}(t)},reset:reset},function setup(){r=Object(d.default)(b).getInstance(),reset()}(),t}TimelineConverter.__dashjs_factory_name="TimelineConverter",r.default=l.default.getSingletonFactory(TimelineConverter)},"./src/dash/utils/TimelineSegmentsGetter.js":
/*!**************************************************!*\
    !*** ./src/dash/utils/TimelineSegmentsGetter.js ***!
    \**************************************************/
/*! exports provided: default */function srcDashUtilsTimelineSegmentsGetterJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../streaming/constants/Constants */"./src/streaming/constants/Constants.js"),l=i(/*! ./SegmentsUtils */"./src/dash/utils/SegmentsUtils.js");function TimelineSegmentsGetter(t,r){var i,a=(t=t||{}).timelineConverter,c=t.dashMetrics;function checkConfig(){if(!a)throw new Error(u.default.MISSING_CONFIG_ERROR)}function iterateSegments(t,r){var i,a,u,l,c,d,g,p=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate||t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList,m=p.SegmentTimeline,v=p.SegmentURL_asArray,b=0,M=0,S=-1;g=t.timescale;var E=!1;for(u=0,l=(i=m.S_asArray).length;u<l&&!E;u++){if(d=0,(a=i[u]).hasOwnProperty("r")&&(d=a.r),a.hasOwnProperty("t")&&(M=(b=a.t)/g),d<0)d=_calculateRepeatCountForNegativeR(t,i[u+1],a,g,M);for(c=0;c<=d&&!E;c++)(E=r(b,M,p,v,a,g,++S,u))&&(t.segmentDuration=a.d/g),M=(b+=a.d)/g}}function _calculateRepeatCountForNegativeR(t,r,i,u,l){var d;if(r&&r.hasOwnProperty("t"))d=r.t/u;else try{var g=0;if(isNaN(t.adaptation.period.start)||isNaN(t.adaptation.period.duration)||!isFinite(t.adaptation.period.duration)){var p=c.getCurrentDVRInfo();g=isNaN(p.end)?0:p.end}else g=t.adaptation.period.start+t.adaptation.period.duration;d=a.calcMediaTimeFromPresentationTime(g,t),t.segmentDuration=i.d/u}catch(t){d=0}return Math.max(Math.ceil((d-l)/(i.d/u))-1,0)}return i={getSegmentByIndex:function getSegmentByIndex(t,i,u){if(checkConfig(),!t)return null;var c=null,d=!1;return iterateSegments(t,(function(i,g,p,m,v,b,M,S){if(d||u<0){var E=p.media,I=v.mediaRange;return m&&(E=m[S].media||"",I=m[S].mediaRange),c=Object(l.getTimeBasedSegment)(a,r,t,i,v.d,b,E,I,M,v.tManifest),!0}return g>=u-.5*v.d/b&&(d=!0),!1})),c},getSegmentByTime:function getSegmentByTime(t,i){if(checkConfig(),!t)return null;void 0===i&&(i=null);var u=null,c=a.calcMediaTimeFromPresentationTime(i,t);return iterateSegments(t,(function(i,d,g,p,m,v,b,M){if(c<d+m.d/v&&c>=d){var S=g.media,E=m.mediaRange;return p&&(S=p[M].media||"",E=p[M].mediaRange),u=Object(l.getTimeBasedSegment)(a,r,t,i,m.d,v,S,E,b,m.tManifest),!0}return!1})),u},getMediaFinishedInformation:function getMediaFinishedInformation(t){if(!t)return 0;var r,i,a,u,l,c,d,g=(t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentTemplate||t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].SegmentList).SegmentTimeline,p=0,m=0,v=0;for(d=t.timescale,u=(r=g.S_asArray).length,a=0;a<u;a++){if(c=0,(i=r[a]).hasOwnProperty("r")&&(c=i.r),i.hasOwnProperty("t")&&(m=(p=i.t)/d),c<0)c=_calculateRepeatCountForNegativeR(t,r[a+1],i,d,m);for(l=0;l<=c;l++)v++,m=(p+=i.d)/d}return{numberOfSegments:v,mediaTimeOfLastSignaledSegment:m}}},i}TimelineSegmentsGetter.__dashjs_factory_name="TimelineSegmentsGetter";var c=a.default.getClassFactory(TimelineSegmentsGetter);r.default=c},"./src/dash/vo/AdaptationSet.js":
/*!**************************************!*\
    !*** ./src/dash/vo/AdaptationSet.js ***!
    \**************************************/
/*! exports provided: default */function srcDashVoAdaptationSetJs(t,r,i){i.r(r);r.default=function AdaptationSet(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AdaptationSet),this.period=null,this.index=-1,this.type=null}},"./src/dash/vo/BaseURL.js":
/*!********************************!*\
    !*** ./src/dash/vo/BaseURL.js ***!
    \********************************/
/*! exports provided: default */function srcDashVoBaseURLJs(t,r,i){i.r(r);var a=function BaseURL(t,r,i,a){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BaseURL),this.url=t||"",this.serviceLocation=r||t||"",this.dvb_priority=i||1,this.dvb_weight=a||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};a.DEFAULT_DVB_PRIORITY=1,a.DEFAULT_DVB_WEIGHT=1,r.default=a},"./src/dash/vo/Event.js":
/*!******************************!*\
    !*** ./src/dash/vo/Event.js ***!
    \******************************/
/*! exports provided: default */function srcDashVoEventJs(t,r,i){i.r(r);r.default=function Event(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Event),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN}},"./src/dash/vo/EventStream.js":
/*!************************************!*\
    !*** ./src/dash/vo/EventStream.js ***!
    \************************************/
/*! exports provided: default */function srcDashVoEventStreamJs(t,r,i){i.r(r);r.default=function EventStream(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,EventStream),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},"./src/dash/vo/ManifestInfo.js":
/*!*************************************!*\
    !*** ./src/dash/vo/ManifestInfo.js ***!
    \*************************************/
/*! exports provided: default */function srcDashVoManifestInfoJs(t,r,i){i.r(r);r.default=function ManifestInfo(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ManifestInfo),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null}},"./src/dash/vo/MediaInfo.js":
/*!**********************************!*\
    !*** ./src/dash/vo/MediaInfo.js ***!
    \**********************************/
/*! exports provided: default */function srcDashVoMediaInfoJs(t,r,i){i.r(r);r.default=function MediaInfo(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MediaInfo),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1}},"./src/dash/vo/Mpd.js":
/*!****************************!*\
    !*** ./src/dash/vo/Mpd.js ***!
    \****************************/
/*! exports provided: default */function srcDashVoMpdJs(t,r,i){i.r(r);r.default=function Mpd(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Mpd),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}},"./src/dash/vo/PatchOperation.js":
/*!***************************************!*\
    !*** ./src/dash/vo/PatchOperation.js ***!
    \***************************************/
/*! exports provided: default */function srcDashVoPatchOperationJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=function(){function PatchOperation(t,r,i){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PatchOperation),this.action=t,this.xpath=r,this.value=i,this.position=null}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(PatchOperation,[{key:"getMpdTarget",value:function getMpdTarget(t){var r="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(t,r)}}]),PatchOperation}();r.default=a},"./src/dash/vo/Period.js":
/*!*******************************!*\
    !*** ./src/dash/vo/Period.js ***!
    \*******************************/
/*! exports provided: default */function srcDashVoPeriodJs(t,r,i){i.r(r);var a=function Period(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Period),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};a.DEFAULT_ID="defaultId",r.default=a},"./src/dash/vo/ProducerReferenceTime.js":
/*!**********************************************!*\
    !*** ./src/dash/vo/ProducerReferenceTime.js ***!
    \**********************************************/
/*! exports provided: default */function srcDashVoProducerReferenceTimeJs(t,r,i){i.r(r);r.default=function ProducerReferenceTime(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ProducerReferenceTime),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},"./src/dash/vo/Representation.js":
/*!***************************************!*\
    !*** ./src/dash/vo/Representation.js ***!
    \***************************************/
/*! exports provided: default */function srcDashVoRepresentationJs(t,r,i){i.r(r);var a=i(/*! ../constants/DashConstants */"./src/dash/constants/DashConstants.js");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function Representation(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Representation),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(Representation,[{key:"hasInitialization",value:function hasInitialization(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function hasSegments(){return this.segmentInfoType!==a.default.BASE_URL&&this.segmentInfoType!==a.default.SEGMENT_BASE&&!this.indexRange}}]),Representation}();r.default=u},"./src/dash/vo/RepresentationInfo.js":
/*!*******************************************!*\
    !*** ./src/dash/vo/RepresentationInfo.js ***!
    \*******************************************/
/*! exports provided: default */function srcDashVoRepresentationInfoJs(t,r,i){i.r(r);r.default=function RepresentationInfo(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,RepresentationInfo),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null}},"./src/dash/vo/Segment.js":
/*!********************************!*\
    !*** ./src/dash/vo/Segment.js ***!
    \********************************/
/*! exports provided: default */function srcDashVoSegmentJs(t,r,i){i.r(r);r.default=function Segment(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Segment),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},"./src/dash/vo/SimpleXPath.js":
/*!************************************!*\
    !*** ./src/dash/vo/SimpleXPath.js ***!
    \************************************/
/*! exports provided: default */function srcDashVoSimpleXPathJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=function(){function SimpleXPath(t){var r=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,SimpleXPath),this.valid="/"==t[0],this.path=t.split("/").filter((function(t){return 0!==t.length})).map((function(t){var i={name:t},a=t.indexOf("[");if(-1!=a){i.name=t.substring(0,a);var u=t.substring(a+1,t.length-1);r.valid=r.valid&&-1==u.indexOf("[");var l=u.indexOf("=");-1!=l?(i.attribute={name:u.substring(1,l),value:u.substring(l+1)},-1!=["'",'"'].indexOf(i.attribute.value[0])&&(i.attribute.value=i.attribute.value.substring(1,i.attribute.value.length-1))):i.position=parseInt(u,10)-1}return i}))}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(SimpleXPath,[{key:"isValid",value:function isValid(){return this.valid}},{key:"findsElement",value:function findsElement(){return!this.findsAttribute()}},{key:"findsAttribute",value:function findsAttribute(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function getMpdTarget(t,r){for(var i=null,a=t,u=1,l="MPD";u<this.path.length&&null!==a;){i=a;var c=this.path[u];if(l=c.name,u!==this.path.length-1||!l.startsWith("@")){var d=i[l+"_asArray"]||[];0===d.length&&i[l]&&d.push(i[l]),c.position?a=d[c.position]||null:c.attribute?function(){var t=c.attribute;a=d.filter((function(r){return r[t.name]==t.value}))[0]||null}():a=d[0]||null}u++}return null===a?null:l.startsWith("@")?{name:l.substring(1),leaf:a,target:a}:{name:l,leaf:a,target:r?i:a}}}]),SimpleXPath}();r.default=a},"./src/dash/vo/StreamInfo.js":
/*!***********************************!*\
    !*** ./src/dash/vo/StreamInfo.js ***!
    \***********************************/
/*! exports provided: default */function srcDashVoStreamInfoJs(t,r,i){i.r(r);r.default=function StreamInfo(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,StreamInfo),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0}},"./src/dash/vo/UTCTiming.js":
/*!**********************************!*\
    !*** ./src/dash/vo/UTCTiming.js ***!
    \**********************************/
/*! exports provided: default */function srcDashVoUTCTimingJs(t,r,i){i.r(r);r.default=function UTCTiming(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,UTCTiming),this.schemeIdUri="",this.value=""}},"./src/streaming/FragmentLoader.js":
/*!*****************************************!*\
    !*** ./src/streaming/FragmentLoader.js ***!
    \*****************************************/
/*! exports provided: default */function srcStreamingFragmentLoaderJs(t,r,i){i.r(r);var a=i(/*! ./constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ./net/URLLoader */"./src/streaming/net/URLLoader.js"),l=i(/*! ./vo/HeadRequest */"./src/streaming/vo/HeadRequest.js"),c=i(/*! ./vo/DashJSError */"./src/streaming/vo/DashJSError.js"),d=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js");function FragmentLoader(t){t=t||{};var r,i,d=this.context,g=t.eventBus,p=t.events,m=t.urlUtils,v=t.errors,b=t.streamId;return r={checkForExistence:function checkForExistence(t){var r=function report(r){g.trigger(p.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:r})};if(t){var a=new l.default(t.url);i.load({request:a,success:function success(){r(!0)},error:function error(){r(!1)}})}else r(!1)},load:function load(t){var a=function report(i,a){g.trigger(p.LOADING_COMPLETED,{request:t,response:i||null,error:a||null,sender:r})};t?i.load({request:t,progress:function progress(i){g.trigger(p.LOADING_PROGRESS,{request:t,stream:i.stream,streamId:b}),i.data&&g.trigger(p.LOADING_DATA_PROGRESS,{request:t,response:i.data||null,error:null,sender:r})},success:function success(t){a(t)},error:function error(t,r,i){a(void 0,new c.default(v.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,i,r))},abort:function abort(t){t&&g.trigger(p.LOADING_ABANDONED,{mediaType:t.mediaType,request:t,sender:r})}}):a(void 0,new c.default(v.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,v.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function abort(){i&&i.abort()},reset:function reset(){i&&(i.abort(),i=null)}},function setup(){i=Object(u.default)(d).create({errHandler:t.errHandler,errors:v,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,urlUtils:m,constants:a.default,boxParser:t.boxParser,dashConstants:t.dashConstants,requestTimeout:t.settings.get().streaming.fragmentRequestTimeout})}(),r}FragmentLoader.__dashjs_factory_name="FragmentLoader",r.default=d.default.getClassFactory(FragmentLoader)},"./src/streaming/ManifestLoader.js":
/*!*****************************************!*\
    !*** ./src/streaming/ManifestLoader.js ***!
    \*****************************************/
/*! exports provided: default */function srcStreamingManifestLoaderJs(t,r,i){i.r(r);var a=i(/*! ./constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../dash/constants/DashConstants */"./src/dash/constants/DashConstants.js"),l=i(/*! ./controllers/XlinkController */"./src/streaming/controllers/XlinkController.js"),c=i(/*! ./net/URLLoader */"./src/streaming/net/URLLoader.js"),d=i(/*! ./utils/URLUtils */"./src/streaming/utils/URLUtils.js"),g=i(/*! ./vo/TextRequest */"./src/streaming/vo/TextRequest.js"),p=i(/*! ./vo/DashJSError */"./src/streaming/vo/DashJSError.js"),m=i(/*! ./vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),v=i(/*! ../core/EventBus */"./src/core/EventBus.js"),b=i(/*! ../core/events/Events */"./src/core/events/Events.js"),M=i(/*! ../core/errors/Errors */"./src/core/errors/Errors.js"),S=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),E=i(/*! ../dash/parser/DashParser */"./src/dash/parser/DashParser.js");function ManifestLoader(t){t=t||{};var r,i,S,I,D,A=this.context,C=t.debug,N=Object(v.default)(A).getInstance(),k=Object(d.default)(A).getInstance(),O=t.mssHandler,L=t.errHandler;function onXlinkReady(t){N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:t.manifest})}return r={load:function load(t){var r=new g.default(t,m.HTTPRequest.MPD_TYPE);S.load({request:r,success:function success(r,u,l){var c,d,g;if(I)if(l&&l!==t?(d=k.parseBaseUrl(l),c=l):(k.isRelative(t)&&(t=k.resolve(t,window.location.href)),d=k.parseBaseUrl(t)),"No Content"!=u)if(null===D&&(D=function createParser(t){var r=null;return t.indexOf("SmoothStreamingMedia")>-1?(O&&(r=O.createMssParser(),O.registerEvents()),r):t.indexOf("MPD")>-1||t.indexOf("Patch")>-1?Object(E.default)(A).create({debug:C}):r}(r)),null!==D){I.setMatchers(D.getMatchers()),I.setIron(D.getIron());try{g=D.parse(r)}catch(r){return void N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new p.default(M.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,M.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(t))})}g?(g.url=c||t,g.originalUrl||(g.originalUrl=g.url),g.hasOwnProperty(a.default.LOCATION)&&(d=k.parseBaseUrl(g.Location_asArray[0]),i.debug("BaseURI set by Location to: "+d)),g.baseUri=d,g.loadedTime=new Date,I.resolveManifestOnLoad(g),N.trigger(b.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:r})):N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new p.default(M.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,M.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(t))})}else N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new p.default(M.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,M.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(t))});else N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function error(r,i,a){N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new p.default(M.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,M.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(t,", ").concat(a))})}})},reset:function reset(){N.off(b.default.XLINK_READY,onXlinkReady,r),O&&O.reset(),I&&(I.reset(),I=null),S&&(S.abort(),S=null)}},function setup(){i=C.getLogger(r),N.on(b.default.XLINK_READY,onXlinkReady,r),S=Object(c.default)(A).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,urlUtils:k,constants:a.default,dashConstants:u.default,errors:M.default}),I=Object(l.default)(A).create({errHandler:L,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,settings:t.settings}),D=null}(),r}ManifestLoader.__dashjs_factory_name="ManifestLoader";var I=S.default.getClassFactory(ManifestLoader);r.default=I},"./src/streaming/ManifestUpdater.js":
/*!******************************************!*\
    !*** ./src/streaming/ManifestUpdater.js ***!
    \******************************************/
/*! exports provided: default */function srcStreamingManifestUpdaterJs(t,r,i){i.r(r);var a=i(/*! ../core/EventBus */"./src/core/EventBus.js"),u=i(/*! ../core/events/Events */"./src/core/events/Events.js"),l=i(/*! ../streaming/MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),c=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),d=i(/*! ../core/Debug */"./src/core/Debug.js"),g=i(/*! ../core/errors/Errors */"./src/core/errors/Errors.js"),p=i(/*! ../dash/constants/DashConstants */"./src/dash/constants/DashConstants.js"),m=i(/*! ./utils/URLUtils */"./src/streaming/utils/URLUtils.js");function ManifestUpdater(){var t,r,i,c,v,b,M,S,E,I,D,A,C=this.context,N=Object(a.default)(C).getInstance(),k=Object(m.default)(C).getInstance();function resetInitialSettings(){i=NaN,M=!1,v=!0,b=!1,stopManifestRefreshTimer()}function stopManifestRefreshTimer(){null!==c&&(clearTimeout(c),c=null)}function startManifestRefreshTimer(t){stopManifestRefreshTimer(),b||(isNaN(t)&&!isNaN(i)&&(t=1e3*i),isNaN(t)||(r.debug("Refresh manifest in "+t+" milliseconds."),c=setTimeout(onRefreshTimer,t)))}function refreshManifest(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];M=!0;var r=E.getValue(),i=r.url,a=I.getPatchLocation(r),u=I.getLocation(r);a&&!t?i=a:u&&(i=u),k.isRelative(i)&&(i=k.resolve(i,r.url)),S.load(i)}function update(t){if(t){if(I.getIsPatch(t)){var a=t;t=E.getValue();var l=I.isPatchValid(t,a),c=l;if(l){var d=I.getPublishTime(t);c=I.applyPatchToManifest(t,a);var g=I.getPublishTime(t);c=d.getTime()!=g.getTime()}if(!c)return r.debug("Patch provided is invalid, performing full manifest refresh"),void refreshManifest(!0);t.loadedTime=new Date}}else(t=E.getValue()).loadedTime=new Date;if(E.getValue()&&E.getValue().type===p.default.DYNAMIC&&t.type===p.default.STATIC)return N.trigger(u.default.DYNAMIC_TO_STATIC),M=!1,void(b=!0);E.setValue(t);var m=new Date,S=(m.getTime()-t.loadedTime.getTime())/1e3;1e3*(i=I.getManifestUpdatePeriod(t,S))>2147483647&&(i=2147483.647),N.trigger(u.default.MANIFEST_UPDATED,{manifest:t}),r.info("Manifest has been refreshed at "+m+"["+m.getTime()/1e3+"] "),v||startManifestRefreshTimer()}function onRefreshTimer(){v||(M?startManifestRefreshTimer(A.get().streaming.manifestUpdateRetryInterval):refreshManifest())}function onManifestLoaded(t){t.error?t.error.code===g.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&D.error(t.error):update(t.manifest)}function onPlaybackStarted(){v=!1,startManifestRefreshTimer()}function onPlaybackPaused(){(v=!A.get().streaming.scheduling.scheduleWhilePaused)&&stopManifestRefreshTimer()}function onStreamsComposed(){M=!1}return t={initialize:function initialize(){resetInitialSettings(),N.on(u.default.STREAMS_COMPOSED,onStreamsComposed,this),N.on(l.default.PLAYBACK_STARTED,onPlaybackStarted,this),N.on(l.default.PLAYBACK_PAUSED,onPlaybackPaused,this),N.on(u.default.INTERNAL_MANIFEST_LOADED,onManifestLoaded,this)},setManifest:function setManifest(t){update(t)},refreshManifest:refreshManifest,getIsUpdating:function getIsUpdating(){return M},setConfig:function setConfig(t){t&&(t.manifestModel&&(E=t.manifestModel),t.adapter&&(I=t.adapter),t.manifestLoader&&(S=t.manifestLoader),t.errHandler&&(D=t.errHandler),t.settings&&(A=t.settings))},reset:function reset(){N.off(l.default.PLAYBACK_STARTED,onPlaybackStarted,this),N.off(l.default.PLAYBACK_PAUSED,onPlaybackPaused,this),N.off(u.default.STREAMS_COMPOSED,onStreamsComposed,this),N.off(u.default.INTERNAL_MANIFEST_LOADED,onManifestLoaded,this),resetInitialSettings()}},function setup(){r=Object(d.default)(C).getInstance().getLogger(t)}(),t}ManifestUpdater.__dashjs_factory_name="ManifestUpdater",r.default=c.default.getClassFactory(ManifestUpdater)},"./src/streaming/MediaPlayer.js":
/*!**************************************!*\
    !*** ./src/streaming/MediaPlayer.js ***!
    \**************************************/
/*! exports provided: default */function srcStreamingMediaPlayerJs(t,r,i){i.r(r);var a=i(/*! ../../externals/cea608-parser */"./externals/cea608-parser.js"),u=i.n(a),l=i(/*! ./constants/Constants */"./src/streaming/constants/Constants.js"),c=i(/*! ../dash/constants/DashConstants */"./src/dash/constants/DashConstants.js"),d=i(/*! ./constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),g=i(/*! ./controllers/PlaybackController */"./src/streaming/controllers/PlaybackController.js"),p=i(/*! ./controllers/StreamController */"./src/streaming/controllers/StreamController.js"),m=i(/*! ./controllers/GapController */"./src/streaming/controllers/GapController.js"),v=i(/*! ./controllers/CatchupController */"./src/streaming/controllers/CatchupController.js"),b=i(/*! ./controllers/ServiceDescriptionController */"./src/streaming/controllers/ServiceDescriptionController.js"),M=i(/*! ./controllers/MediaController */"./src/streaming/controllers/MediaController.js"),S=i(/*! ./controllers/BaseURLController */"./src/streaming/controllers/BaseURLController.js"),E=i(/*! ./ManifestLoader */"./src/streaming/ManifestLoader.js"),I=i(/*! ./utils/ErrorHandler */"./src/streaming/utils/ErrorHandler.js"),D=i(/*! ./utils/Capabilities */"./src/streaming/utils/Capabilities.js"),A=i(/*! ./utils/CapabilitiesFilter */"./src/streaming/utils/CapabilitiesFilter.js"),C=i(/*! ./utils/RequestModifier */"./src/streaming/utils/RequestModifier.js"),N=i(/*! ./models/URIFragmentModel */"./src/streaming/models/URIFragmentModel.js"),k=i(/*! ./models/ManifestModel */"./src/streaming/models/ManifestModel.js"),O=i(/*! ./models/MediaPlayerModel */"./src/streaming/models/MediaPlayerModel.js"),L=i(/*! ./controllers/AbrController */"./src/streaming/controllers/AbrController.js"),R=i(/*! ./net/SchemeLoaderFactory */"./src/streaming/net/SchemeLoaderFactory.js"),j=i(/*! ./models/VideoModel */"./src/streaming/models/VideoModel.js"),B=i(/*! ./models/CmcdModel */"./src/streaming/models/CmcdModel.js"),U=i(/*! ./utils/DOMStorage */"./src/streaming/utils/DOMStorage.js"),z=i(/*! ./../core/Debug */"./src/core/Debug.js"),Y=i(/*! ./../core/errors/Errors */"./src/core/errors/Errors.js"),G=i(/*! ./../core/EventBus */"./src/core/EventBus.js"),H=i(/*! ./../core/events/Events */"./src/core/events/Events.js"),Q=i(/*! ./MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),V=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),W=i(/*! ../core/Settings */"./src/core/Settings.js"),$=i(/*! ../core/Version */"./src/core/Version.js"),K=i(/*! ../dash/controllers/SegmentBaseController */"./src/dash/controllers/SegmentBaseController.js"),q=i(/*! ../dash/DashAdapter */"./src/dash/DashAdapter.js"),X=i(/*! ../dash/DashMetrics */"./src/dash/DashMetrics.js"),Z=i(/*! ../dash/utils/TimelineConverter */"./src/dash/utils/TimelineConverter.js"),J=i(/*! ./vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),ee=i(/*! ../../externals/base64 */"./externals/base64.js"),te=i.n(ee),re=i(/*! codem-isoboxer */"./node_modules/codem-isoboxer/dist/iso_boxer.js"),ne=i.n(re),ie=i(/*! ./vo/DashJSError */"./src/streaming/vo/DashJSError.js"),ae=i(/*! ./utils/SupervisorTools */"./src/streaming/utils/SupervisorTools.js"),oe=i(/*! ./ManifestUpdater */"./src/streaming/ManifestUpdater.js"),se=i(/*! ../streaming/utils/URLUtils */"./src/streaming/utils/URLUtils.js"),ue=i(/*! ./utils/BoxParser */"./src/streaming/utils/BoxParser.js"),le=i(/*! ./text/TextController */"./src/streaming/text/TextController.js"),ce=i(/*! ./models/CustomParametersModel */"./src/streaming/models/CustomParametersModel.js");function MediaPlayer(){var t,r,i,a,ee,re,de,fe,he,ge,pe,me,ye,ve,_e,Te,be,Me,Se,Ee,Ie,De,Ae,Ce,Ne,xe,ke,we,Oe,Le,Re,je,Pe,Fe,Be,Ue,ze="You must first call initialize() and set a source before calling this method",Ye="You must first call initialize() and set a valid source and view before calling this method",Ge="You must first call attachView() to set the video element before calling this method",He="MediaPlayer not initialized!",Qe=this.context,Ve=Object(G.default)(Qe).getInstance(),We=Object(W.default)(Qe).getInstance(),$e=Object(z.default)(Qe).getInstance({settings:We});function reset(){attachSource(null),attachView(null),a=null,ye&&(ye.reset(),ye=null),ve&&(ve.reset(),ve=null),Se&&(Se.reset(),Se=null),We.reset(),Te&&(Te.reset(),Te=null)}function isReady(){return!!i&&!!Pe.getElement()}function getVersion(){return Object($.getVersionString)()}function isPaused(){if(!de)throw Ye;return ke.isPaused()}function getDVRSeekOffset(t){var r=Ce&&Ce.hasVideoTrack()?l.default.VIDEO:l.default.AUDIO,i=Le.getCurrentDVRInfo(r);if(!i)return 0;var a=ke.getLiveDelay(),u=i.range.start+t;return u>i.range.end-a&&(u=i.range.end-a),u}function time(t){if(!de)throw Ye;var r=getVideoElement().currentTime;if(void 0!==t)r=Ce.getTimeRelativeToStreamId(r,t);else if(ke.getIsDynamic()){var i=Ce&&Ce.hasVideoTrack()?l.default.VIDEO:l.default.AUDIO,a=Le.getCurrentDVRInfo(i);r=null===a||0===r?0:Math.max(0,r-a.range.start)}return r}function duration(){if(!de)throw Ye;var t=getVideoElement().duration;if(ke.getIsDynamic()){var r=Ce&&Ce.hasVideoTrack()?l.default.VIDEO:l.default.AUDIO,i=Le.getCurrentDVRInfo(r);t=i?i.range.end-i.range.start:0}return t}function setAutoPlay(t){Object(ae.checkParameterType)(t,"boolean"),fe=t}function restoreDefaultUTCTimingSources(){Se.restoreDefaultUTCTimingSources()}function getDashMetrics(){return Le}function getVideoElement(){if(!Pe.getElement())throw Ge;return Pe.getElement()}function attachView(t){if(!ee)throw He;Pe.setElement(t),t&&(_detectProtection(),function _detectMetricsReporting(){if(ve)return;var t=dashjs.MetricsReporting;if("function"==typeof t){var r=t(Qe).create();ve=r.createMetricsReporting({debug:$e,eventBus:Ve,mediaElement:getVideoElement(),adapter:be,dashMetrics:Le,mediaPlayerModel:Me,events:H.default,constants:l.default,metricsConstants:d.default})}}(),function _detectMss(){if(_e)return;var t=dashjs.MssHandler;"function"==typeof t&&(Y.default.extend(t.errors),_e=t(Qe).create({eventBus:Ve,mediaPlayerModel:Me,dashMetrics:Le,manifestModel:Re,playbackController:ke,streamController:Ce,protectionController:ye,baseURLController:Ie,errHandler:Ee,events:H.default,constants:l.default,debug:$e,initSegmentType:J.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:te.a,ISOBoxer:ne.a,settings:We}))}(),Ce&&Ce.switchToVideoElement()),de&&_resetPlaybackControllers(),_initializePlayback()}function getTracksFor(t){if(!re)throw ze;var r=Ce.getActiveStreamInfo();return r?me.getTracksFor(t,r.id):[]}function attachSource(t){if(!ee)throw He;"string"==typeof t&&Fe.initialize(t),i=t,(re||de)&&_resetPlaybackControllers(),isReady()&&_initializePlayback()}function getActiveStream(){if(!re)throw ze;var t=Ce.getActiveStreamInfo();return t?Ce.getStreamById(t.id):null}function _resetPlaybackControllers(){de=!1,re=!1,be.reset(),Ce.reset(),xe.reset(),Oe.reset(),ke.reset(),we.reset(),he.reset(),me.reset(),Ue.reset(),ye&&(We.get().streaming.protection.keepProtectionMediaKeys?ye.stop():(ye.reset(),ye=null,_detectProtection())),Ne.reset(),je.reset()}function _createManifestLoader(){return Object(E.default)(Qe).create({debug:$e,errHandler:Ee,dashMetrics:Le,mediaPlayerModel:Me,requestModifier:Object(C.default)(Qe).getInstance(),mssHandler:_e,settings:We})}function _detectProtection(){if(ye)return ye;var t=dashjs.Protection;if("function"==typeof t){var r=t(Qe).create();return H.default.extend(t.events),Q.default.extend(t.events,{publicOnly:!0}),Y.default.extend(t.errors),De||(De=Object(D.default)(Qe).getInstance()),ye=r.createProtectionSystem({debug:$e,errHandler:Ee,videoModel:Pe,customParametersModel:Se,capabilities:De,eventBus:Ve,events:H.default,BASE64:te.a,constants:l.default,cmcdModel:je,settings:We})}return null}function _detectOffline(){if(!ee)throw He;if(Te)return Te;var t=dashjs.OfflineController;if("function"==typeof t){H.default.extend(t.events),Q.default.extend(t.events,{publicOnly:!0}),Y.default.extend(t.errors);var r=_createManifestLoader(),i=Object(oe.default)(Qe).create();return i.setConfig({manifestModel:Re,adapter:be,manifestLoader:r,errHandler:Ee}),Te=t(Qe).create({debug:$e,manifestUpdater:i,baseURLController:Ie,manifestLoader:r,manifestModel:Re,mediaPlayerModel:Me,abrController:he,playbackController:ke,adapter:be,errHandler:Ee,dashMetrics:Le,timelineConverter:pe,segmentBaseController:Ue,schemeLoaderFactory:ge,eventBus:Ve,events:H.default,errors:Y.default,constants:l.default,settings:We,dashConstants:c.default,urlUtils:Object(se.default)(Qe).getInstance()})}return null}function _getAsUTC(t){var r=Ce&&Ce.hasVideoTrack()?l.default.VIDEO:l.default.AUDIO,i=Le.getCurrentDVRInfo(r);return i?t+(i.manifestInfo.availableFrom.getTime()/1e3+i.range.start):0}function _initializePlayback(){Te&&Te.resetRecords(),!re&&i&&(re=!0,r.info("Streaming Initialized"),function _createPlaybackControllers(){var t=_createManifestLoader();Ce||(Ce=Object(p.default)(Qe).getInstance()),Ne||(Ne=Object(le.default)(Qe).create({errHandler:Ee,manifestModel:Re,adapter:be,mediaController:me,videoModel:Pe,settings:We})),Ae.setConfig({capabilities:De,customParametersModel:Se,adapter:be,settings:We,manifestModel:Re,errHandler:Ee}),Ce.setConfig({capabilities:De,capabilitiesFilter:Ae,manifestLoader:t,manifestModel:Re,mediaPlayerModel:Me,customParametersModel:Se,protectionController:ye,textController:Ne,adapter:be,dashMetrics:Le,errHandler:Ee,timelineConverter:pe,videoModel:Pe,playbackController:ke,serviceDescriptionController:we,abrController:he,mediaController:me,settings:We,baseURLController:Ie,uriFragmentModel:Fe,segmentBaseController:Ue}),xe.setConfig({settings:We,playbackController:ke,streamController:Ce,videoModel:Pe,timelineConverter:pe,adapter:be}),ke.setConfig({streamController:Ce,serviceDescriptionController:we,dashMetrics:Le,adapter:be,videoModel:Pe,timelineConverter:pe,settings:We}),Oe.setConfig({streamController:Ce,playbackController:ke,mediaPlayerModel:Me,dashMetrics:Le,videoModel:Pe,settings:We}),he.setConfig({streamController:Ce,domStorage:Be,mediaPlayerModel:Me,customParametersModel:Se,dashMetrics:Le,adapter:be,videoModel:Pe,settings:We}),je.setConfig({abrController:he,dashMetrics:Le,playbackController:ke}),he.initialize(),Ce.initialize(fe,a),Ne.initialize(),xe.initialize(),Oe.initialize(),je.initialize(),Ue.initialize()}(),"string"==typeof i?Ce.load(i):Ce.loadWithManifest(i)),!de&&isReady()&&(de=!0,r.info("Playback Initialized"))}return t={initialize:function initialize(t,i,a){De||(De=Object(D.default)(Qe).getInstance()).setConfig({settings:We}),Ee||(Ee=Object(I.default)(Qe).getInstance()),De.supportsMediaSource()?(ee||(ee=!0,pe=Object(Z.default)(Qe).getInstance(),he||(he=Object(L.default)(Qe).getInstance()).setConfig({settings:We}),ge||(ge=Object(R.default)(Qe).getInstance()),ke||(ke=Object(g.default)(Qe).getInstance()),me||(me=Object(M.default)(Qe).getInstance()),Ce||(Ce=Object(p.default)(Qe).getInstance()),xe||(xe=Object(m.default)(Qe).getInstance()),Oe||(Oe=Object(v.default)(Qe).getInstance()),we||(we=Object(b.default)(Qe).getInstance()),Ae||(Ae=Object(A.default)(Qe).getInstance()),be=Object(q.default)(Qe).getInstance(),Re=Object(k.default)(Qe).getInstance(),je=Object(B.default)(Qe).getInstance(),Le=Object(X.default)(Qe).getInstance({settings:We}),Be=Object(U.default)(Qe).getInstance({settings:We}),be.setConfig({constants:l.default,cea608parser:u.a,errHandler:Ee,BASE64:te.a}),Ie||(Ie=Object(S.default)(Qe).create()),Ie.setConfig({adapter:be}),we.setConfig({adapter:be}),Ue||(Ue=Object(K.default)(Qe).getInstance({dashMetrics:Le,mediaPlayerModel:Me,errHandler:Ee,baseURLController:Ie,events:H.default,eventBus:Ve,debug:$e,boxParser:Object(ue.default)(Qe).getInstance(),requestModifier:Object(C.default)(Qe).getInstance(),errors:Y.default})),me.setConfig({domStorage:Be,settings:We,customParametersModel:Se}),Me.setConfig({playbackController:ke,serviceDescriptionController:we}),restoreDefaultUTCTimingSources(),setAutoPlay(void 0===a||a),_detectOffline()),t&&attachView(t),i&&attachSource(i),r.info("[dash.js "+getVersion()+"] MediaPlayer has been initialized")):Ee.error(new ie.default(Y.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,Y.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function setConfig(t){t&&(t.capabilities&&(De=t.capabilities),t.capabilitiesFilter&&(Ae=t.capabilitiesFilter),t.streamController&&(Ce=t.streamController),t.textController&&(Ne=t.textController),t.gapController&&(xe=t.gapController),t.playbackController&&(ke=t.playbackController),t.serviceDescriptionController&&(we=t.serviceDescriptionController),t.catchupController&&(Oe=t.catchupController),t.mediaPlayerModel&&(Me=t.mediaPlayerModel),t.customParametersModel&&(Se=t.customParametersModel),t.abrController&&(he=t.abrController),t.schemeLoaderFactory&&(ge=t.schemeLoaderFactory),t.mediaController&&(me=t.mediaController),t.settings&&(We=t.settings))},on:function on(t,r,i,a){Ve.on(t,r,i,a)},off:function off(t,r,i){Ve.off(t,r,i)},extend:function extend(t,r,i){V.default.extend(t,r,i,Qe)},attachView:attachView,attachSource:attachSource,isReady:isReady,play:function play(){if(!de)throw Ye;(!fe||isPaused()&&de)&&ke.play()},isPaused:isPaused,pause:function pause(){if(!de)throw Ye;ke.pause()},isSeeking:function isSeeking(){if(!de)throw Ye;return ke.isSeeking()},isDynamic:function isDynamic(){if(!de)throw Ye;return ke.getIsDynamic()},getLowLatencyModeEnabled:function getLowLatencyModeEnabled(){if(!de)throw Ye;return ke.getLowLatencyModeEnabled()},seek:function seek(t){if(!de)throw Ye;if(Object(ae.checkParameterType)(t,"number"),isNaN(t))throw l.default.BAD_ARGUMENT_ERROR;var r=ke.getIsDynamic()?getDVRSeekOffset(t):t;ke.seek(r)},setPlaybackRate:function setPlaybackRate(t){getVideoElement().playbackRate=t},getPlaybackRate:function getPlaybackRate(){return getVideoElement().playbackRate},setMute:function setMute(t){Object(ae.checkParameterType)(t,"boolean"),getVideoElement().muted=t},isMuted:function isMuted(){return getVideoElement().muted},setVolume:function setVolume(t){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw l.default.BAD_ARGUMENT_ERROR;getVideoElement().volume=t},getVolume:function getVolume(){return getVideoElement().volume},time:time,duration:duration,timeAsUTC:function timeAsUTC(){if(!de)throw Ye;return time()<0?NaN:_getAsUTC(time())},durationAsUTC:function durationAsUTC(){if(!de)throw Ye;return _getAsUTC(duration())},getActiveStream:getActiveStream,getDVRWindowSize:function getDVRWindowSize(){var t=Ce&&Ce.hasVideoTrack()?l.default.VIDEO:l.default.AUDIO,r=Le.getCurrentDVRInfo(t);return r?r.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:getDVRSeekOffset,getTargetLiveDelay:function getTargetLiveDelay(){if(!de)throw Ye;return ke.getLiveDelay()},convertToTimeCode:function convertToTimeCode(t){t=Math.max(t,0);var r=Math.floor(t/3600),i=Math.floor(t%3600/60),a=Math.floor(t%3600%60);return(0===r?"":r<10?"0"+r.toString()+":":r.toString()+":")+(i<10?"0"+i.toString():i.toString())+":"+(a<10?"0"+a.toString():a.toString())},formatUTC:function formatUTC(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=new Date(1e3*t),l=u.toLocaleDateString(r),c=u.toLocaleTimeString(r,{hour12:i});return a?c+" "+l:c},getVersion:getVersion,getDebug:function getDebug(){return $e},getBufferLength:function getBufferLength(t){var i=[l.default.VIDEO,l.default.AUDIO,l.default.TEXT];if(t){if(-1!==i.indexOf(t)){var a=getDashMetrics().getCurrentBufferLevel(t);return a||NaN}return r.warn("getBufferLength requested for invalid type"),NaN}var u=i.map((function(t){return getTracksFor(t).length>0?getDashMetrics().getCurrentBufferLevel(t):Number.MAX_VALUE})).reduce((function(t,r){return Math.min(t,r)}));return u===Number.MAX_VALUE?NaN:u},getTTMLRenderingDiv:function getTTMLRenderingDiv(){return Pe?Pe.getTTMLRenderingDiv():null},getVideoElement:getVideoElement,getSource:function getSource(){if(!i)throw"You must first call attachSource() with a valid source before calling this method";return i},updateSource:function updateSource(t){i=t,Ce.load(i)},getCurrentLiveLatency:function getCurrentLiveLatency(){if(!ee)throw He;return de?ke.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function getTopBitrateInfoFor(t){if(!re)throw ze;return he.getTopBitrateInfoFor(t)},setAutoPlay:setAutoPlay,getAutoPlay:function getAutoPlay(){return fe},getDashMetrics:getDashMetrics,getQualityFor:function getQualityFor(t){if(!re)throw ze;if(t===l.default.IMAGE){var r=getActiveStream();if(!r)return-1;var i=r.getThumbnailController();return i?i.getCurrentTrackIndex():-1}return he.getQualityFor(t)},setQualityFor:function setQualityFor(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!re)throw ze;if(t===l.default.IMAGE){var a=getActiveStream();if(!a)return;var u=a.getThumbnailController();u&&u.setTrackByIndex(r)}he.setPlaybackQuality(t,Ce.getActiveStreamInfo(),r,{forceReplace:i})},updatePortalSize:function updatePortalSize(){he.setElementSize(),he.setWindowResizeEventCalled(!0)},enableText:function enableText(t){var r=Ce.getActiveStreamInfo();return!(!r||!Ne)&&Ne.enableText(r.id,t)},enableForcedTextStreaming:function enableForcedTextStreaming(t){return!(!Ce.getActiveStreamInfo()||!Ne)&&Ne.enableForcedTextStreaming(t)},isTextEnabled:function isTextEnabled(){var t=Ce.getActiveStreamInfo();return!(!t||!Ne)&&Ne.isTextEnabled(t)},setTextTrack:function setTextTrack(t){if(!de)throw Ye;var r=Ce.getActiveStreamInfo();r&&Ne&&Ne.setTextTrack(r.id,t)},getBitrateInfoListFor:function getBitrateInfoListFor(t){if(!re)throw ze;var r=getActiveStream();return r?r.getBitrateListFor(t):[]},getStreamsFromManifest:function getStreamsFromManifest(t){if(!re)throw ze;return be.getStreamsInfo(t)},getTracksFor:getTracksFor,getTracksForTypeFromManifest:function getTracksForTypeFromManifest(t,r,i){if(!re)throw ze;return(i=i||be.getStreamsInfo(r,1)[0])?be.getAllMediaInfoForType(i,t,r):[]},getCurrentTrackFor:function getCurrentTrackFor(t){if(!re)throw ze;var r=Ce.getActiveStreamInfo();return me.getCurrentTrackFor(t,r.id)},setInitialMediaSettingsFor:function setInitialMediaSettingsFor(t,r){if(!ee)throw He;me.setInitialSettings(t,r)},getInitialMediaSettingsFor:function getInitialMediaSettingsFor(t){if(!ee)throw He;return me.getInitialSettings(t)},setCurrentTrack:function setCurrentTrack(t){if(!re)throw ze;me.setTrack(t)},addABRCustomRule:function addABRCustomRule(t,r,i){Se.addAbrCustomRule(t,r,i)},removeABRCustomRule:function removeABRCustomRule(t){Se.removeAbrCustomRule(t)},removeAllABRCustomRule:function removeAllABRCustomRule(){Se.removeAllAbrCustomRule()},getABRCustomRules:function getABRCustomRules(){return Se.getAbrCustomRules()},getAverageThroughput:function getAverageThroughput(t){var r=he.getThroughputHistory(),i=ke.getIsDynamic();return r?r.getAverageThroughput(t,i):0},retrieveManifest:function retrieveManifest(t,r){var i=_createManifestLoader(),a=this;Ve.on(H.default.INTERNAL_MANIFEST_LOADED,(function handler(t){t.error?r(null,t.error):r(t.manifest),Ve.off(H.default.INTERNAL_MANIFEST_LOADED,handler,a),i.reset()}),a),Fe.initialize(t),i.load(t)},addUTCTimingSource:function addUTCTimingSource(t,r){Se.addUTCTimingSource(t,r)},removeUTCTimingSource:function removeUTCTimingSource(t,r){Se.removeUTCTimingSource(t,r)},clearDefaultUTCTimingSources:function clearDefaultUTCTimingSources(){Se.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:restoreDefaultUTCTimingSources,setXHRWithCredentialsForType:function setXHRWithCredentialsForType(t,r){Se.setXHRWithCredentialsForType(t,r)},getXHRWithCredentialsForType:function getXHRWithCredentialsForType(t){return Se.getXHRWithCredentialsForType(t)},getProtectionController:function getProtectionController(){return _detectProtection()},attachProtectionController:function attachProtectionController(t){ye=t},setProtectionData:function setProtectionData(t){a=t,Ce&&Ce.setProtectionData(a)},registerLicenseRequestFilter:function registerLicenseRequestFilter(t){Se.registerLicenseRequestFilter(t)},registerLicenseResponseFilter:function registerLicenseResponseFilter(t){Se.registerLicenseResponseFilter(t)},unregisterLicenseRequestFilter:function unregisterLicenseRequestFilter(t){Se.unregisterLicenseRequestFilter(t)},unregisterLicenseResponseFilter:function unregisterLicenseResponseFilter(t){Se.unregisterLicenseResponseFilter(t)},registerCustomCapabilitiesFilter:function registerCustomCapabilitiesFilter(t){Se.registerCustomCapabilitiesFilter(t)},unregisterCustomCapabilitiesFilter:function unregisterCustomCapabilitiesFilter(t){Se.unregisterCustomCapabilitiesFilter(t)},setCustomInitialTrackSelectionFunction:function setCustomInitialTrackSelectionFunction(t){Se.setCustomInitialTrackSelectionFunction(t)},resetCustomInitialTrackSelectionFunction:function resetCustomInitialTrackSelectionFunction(){Se.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function attachTTMLRenderingDiv(t){if(!Pe.getElement())throw Ge;Pe.setTTMLRenderingDiv(t)},getCurrentTextTrackIndex:function getCurrentTextTrackIndex(){var t=Ce.getActiveStreamInfo();if(t&&Ne)return Ne.getCurrentTrackIdx(t.id)},provideThumbnail:function provideThumbnail(t,r){if("function"==typeof r)if(t<0)r(null);else{var i=ke.getIsDynamic()?getDVRSeekOffset(t):t,a=Ce.getStreamForTime(i);if(null!==a){var u=a.getThumbnailController();if(u)return u.provide(i,r);r(null)}else r(null)}},getDashAdapter:function getDashAdapter(){return be},getOfflineController:function getOfflineController(){return _detectOffline()},getSettings:function getSettings(){return We.get()},updateSettings:function updateSettings(t){We.update(t)},resetSettings:function resetSettings(){We.reset()},reset:reset,destroy:function destroy(){reset(),V.default.deleteSingletonInstances(Qe)}},function setup(){r=$e.getLogger(t),ee=!1,de=!1,re=!1,fe=!0,ye=null,Te=null,a=null,be=null,Ue=null,H.default.extend(Q.default),Me=Object(O.default)(Qe).getInstance(),Se=Object(ce.default)(Qe).getInstance(),Pe=Object(j.default)(Qe).getInstance(),Fe=Object(N.default)(Qe).getInstance()}(),t}MediaPlayer.__dashjs_factory_name="MediaPlayer";var de=V.default.getClassFactory(MediaPlayer);de.events=Q.default,de.errors=Y.default,V.default.updateClassFactory(MediaPlayer.__dashjs_factory_name,de),r.default=de},"./src/streaming/MediaPlayerEvents.js":
/*!********************************************!*\
    !*** ./src/streaming/MediaPlayerEvents.js ***!
    \********************************************/
/*! exports provided: default */function srcStreamingMediaPlayerEventsJs(t,r,i){function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}i.r(r);var a=new(function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(MediaPlayerEvents,t);var r=_createSuper(MediaPlayerEvents);function MediaPlayerEvents(){var t;return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MediaPlayerEvents),(t=r.call(this)).AST_IN_FUTURE="astInFuture",t.BUFFER_EMPTY="bufferStalled",t.BUFFER_LOADED="bufferLoaded",t.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",t.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",t.DYNAMIC_TO_STATIC="dynamicToStatic",t.ERROR="error",t.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",t.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",t.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",t.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",t.LOG="log",t.MANIFEST_LOADED="manifestLoaded",t.METRICS_CHANGED="metricsChanged",t.METRIC_CHANGED="metricChanged",t.METRIC_ADDED="metricAdded",t.METRIC_UPDATED="metricUpdated",t.PERIOD_SWITCH_STARTED="periodSwitchStarted",t.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",t.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",t.QUALITY_CHANGE_RENDERED="qualityChangeRendered",t.TRACK_CHANGE_RENDERED="trackChangeRendered",t.STREAM_INITIALIZING="streamInitializing",t.STREAM_UPDATED="streamUpdated",t.STREAM_ACTIVATED="streamActivated",t.STREAM_DEACTIVATED="streamDeactivated",t.STREAM_INITIALIZED="streamInitialized",t.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",t.TEXT_TRACKS_ADDED="allTextTracksAdded",t.TEXT_TRACK_ADDED="textTrackAdded",t.TTML_PARSED="ttmlParsed",t.TTML_TO_PARSE="ttmlToParse",t.CAPTION_RENDERED="captionRendered",t.CAPTION_CONTAINER_RESIZE="captionContainerResize",t.CAN_PLAY="canPlay",t.CAN_PLAY_THROUGH="canPlayThrough",t.PLAYBACK_ENDED="playbackEnded",t.PLAYBACK_ERROR="playbackError",t.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",t.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",t.PLAYBACK_LOADED_DATA="playbackLoadedData",t.PLAYBACK_PAUSED="playbackPaused",t.PLAYBACK_PLAYING="playbackPlaying",t.PLAYBACK_PROGRESS="playbackProgress",t.PLAYBACK_RATE_CHANGED="playbackRateChanged",t.PLAYBACK_SEEKED="playbackSeeked",t.PLAYBACK_SEEKING="playbackSeeking",t.PLAYBACK_STALLED="playbackStalled",t.PLAYBACK_STARTED="playbackStarted",t.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",t.PLAYBACK_WAITING="playbackWaiting",t.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",t.EVENT_MODE_ON_START="eventModeOnStart",t.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",t.CONFORMANCE_VIOLATION="conformanceViolation",t.REPRESENTATION_SWITCH="representationSwitch",t.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",t}return MediaPlayerEvents}(i(/*! ../core/events/EventsBase */"./src/core/events/EventsBase.js").default));r.default=a},"./src/streaming/MediaPlayerFactory.js":
/*!*********************************************!*\
    !*** ./src/streaming/MediaPlayerFactory.js ***!
    \*********************************************/
/*! exports provided: default */function srcStreamingMediaPlayerFactoryJs(t,r,i){i.r(r);var a=i(/*! ./MediaPlayer */"./src/streaming/MediaPlayer.js");var u,l=function MediaPlayerFactory(){var t,r="application/dash+xml";function create(i,u,l){if(!i||!/^VIDEO$/i.test(i.nodeName))return null;if(i._dashjs_player)return i._dashjs_player;var c,d=i.id||i.name||"video element";if(!(u=u||[].slice.call(i.querySelectorAll("source")).filter((function(t){return t.type==r}))[0])&&i.src)(u=document.createElement("source")).src=i.src;else if(!u&&!i.src)return null;return l=l||{},(c=Object(a.default)(l).create()).initialize(i,u.src,i.autoplay),t||(t=c.getDebug().getLogger()),t.debug("Converted "+d+" to dash.js player and added content: "+u.src),i._dashjs_player=c,c}function findVideo(t){return/^VIDEO$/i.test(t.nodeName)?t:findVideo(t.parentNode)}return{create:create,createAll:function createAll(t,r){var i=[];t=t||"[data-dashjs-player]";for(var a=(r=r||document).querySelectorAll(t),u=0;u<a.length;u++){var l=create(a[u],null);i.push(l)}for(var c=r.querySelectorAll('source[type="application/dash+xml"]'),d=0;d<c.length;d++){var g=create(findVideo(c[d]),null);i.push(g)}return i}}}();!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?l.createAll():u=window.setInterval((function loadIntervalHandler(){window.dashjs&&(window.clearInterval(u),l.createAll())}),500):window.addEventListener("load",(function loadHandler(){window.removeEventListener("load",loadHandler),l.createAll()}))),r.default=l},"./src/streaming/SourceBufferSink.js":
/*!*******************************************!*\
    !*** ./src/streaming/SourceBufferSink.js ***!
    \*******************************************/
/*! exports provided: default */function srcStreamingSourceBufferSinkJs(t,r,i){i.r(r);var a=i(/*! ../core/Debug */"./src/core/Debug.js"),u=i(/*! ./vo/DashJSError */"./src/streaming/vo/DashJSError.js"),l=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! ../core/errors/Errors */"./src/core/errors/Errors.js"),d=i(/*! ../core/Settings */"./src/core/Settings.js"),g=i(/*! ./constants/Constants */"./src/streaming/constants/Constants.js"),p=i(/*! ./vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),m=i(/*! ../core/events/Events */"./src/core/events/Events.js");function SourceBufferSink(t){var r,i,l,v,b,M,S=this.context,E=Object(d.default)(S).getInstance(),I=t.textController,D=t.eventBus,A=[],C=[],N=!1,k=t.mediaSource,O=null;function changeType(t){return new Promise((function(r){_waitForUpdateEnd((function(){v.changeType&&v.changeType(t),r()}))}))}function _initializeForText(t){return v=I.getTextSourceBuffer(t),Promise.resolve()}function _addEventListeners(){if("function"==typeof v.addEventListener)try{v.addEventListener("updateend",_updateEndHandler,!1),v.addEventListener("error",_errHandler,!1),v.addEventListener("abort",_errHandler,!1)}catch(t){M=setInterval(_updateEndHandler,50)}else M=setInterval(_updateEndHandler,50)}function updateAppendWindow(t){return new Promise((function(r){v&&E.get().streaming.buffer.useAppendWindow?_waitForUpdateEnd((function(){try{if(!v)return void r();var i=k.duration,a=0;t&&!isNaN(t.start)&&!isNaN(t.duration)&&isFinite(t.duration)&&(i=t.start+t.duration),t&&!isNaN(t.start)&&(a=t.start),v.appendWindowEnd===i&&v.appendWindowStart===a||(v.appendWindowStart=0,v.appendWindowEnd=i+.01,v.appendWindowStart=Math.max(a-.1,0),l.debug("Updated append window for ".concat(b.type,". Set start to ").concat(v.appendWindowStart," and end to ").concat(v.appendWindowEnd))),r()}catch(t){l.warn("Failed to set append window"),r()}})):r()}))}function updateTimestampOffset(t){return new Promise((function(r){v?_waitForUpdateEnd((function(){try{v.timestampOffset===t||isNaN(t)||(v.timestampOffset=t,l.debug("Set MSE timestamp offset to ".concat(t))),r()}catch(t){r()}})):r()}))}function _abortBeforeAppend(){return new Promise((function(t){_waitForUpdateEnd((function(){var r=v.appendWindowStart,i=v.appendWindowEnd;v&&(v.abort(),v.appendWindowStart=r,v.appendWindowEnd=i),t()}))}))}function _appendNextInQueue(){if(!N&&C.length>0){N=!0;var t=C[0];C.splice(0,1);var r=function afterSuccess(){N=!1,C.length>0&&_appendNextInQueue.call(this),t&&t.data&&t.data.segmentType&&t.data.segmentType!==p.HTTPRequest.INIT_SEGMENT_TYPE&&delete t.data.bytes,t.promise.resolve({chunk:t.data})};try{O=t.request,0===t.data.bytes.byteLength?r.call(this):(v.appendBuffer?v.appendBuffer(t.data.bytes):v.append(t.data.bytes,t.data),_waitForUpdateEnd(r.bind(this)))}catch(r){l.fatal('SourceBuffer append failed "'+r+'"'),C.length>0?_appendNextInQueue():N=!1,delete t.data.bytes,t.promise.reject({chunk:t.data,error:new u.default(r.code,r.message)})}}}function _executeCallback(){A.length>0&&(v.updating||(A.shift()(),_executeCallback()))}function _updateEndHandler(){v.updating||_executeCallback()}function _errHandler(t){var r=t.target||{};!function _triggerEvent(t,r){var a=r||{};D.trigger(t,a,{streamId:b.streamInfo.id,mediaType:i})}(m.default.SOURCE_BUFFER_ERROR,{error:r,lastRequestAppended:O})}function _waitForUpdateEnd(t){A.push(t),v.updating||_executeCallback()}return r={getType:function getType(){return i},getAllBufferRanges:function getAllBufferRanges(){try{return v.buffered}catch(t){return l.error("getAllBufferRanges exception: "+t.message),null}},getBuffer:function getBuffer(){return v},append:function append(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(a,l){t?(C.push({data:t,promise:{resolve:a,reject:l},request:i}),_waitForUpdateEnd(_appendNextInQueue.bind(r))):l({chunk:t,error:new u.default(c.default.APPEND_ERROR_CODE,c.default.APPEND_ERROR_MESSAGE)})}))},remove:function remove(t){return new Promise((function(r,i){var a=t.start,l=t.end;a>=0&&l>a?_waitForUpdateEnd((function(){try{v.remove(a,l),_waitForUpdateEnd((function(){r({from:a,to:l,unintended:!1}),t.resolve&&t.resolve()}))}catch(r){i({from:a,to:l,unintended:!1,error:new u.default(c.default.REMOVE_ERROR_CODE,c.default.REMOVE_ERROR_MESSAGE)}),t.reject&&t.reject(r)}})):r()}))},abort:function abort(){return new Promise((function(t){try{C=[],"open"===k.readyState?_waitForUpdateEnd((function(){try{v&&v.abort(),t()}catch(r){t()}})):v&&v.setTextTrack&&"ended"===k.readyState?(v.abort(),t()):t()}catch(r){t()}}))},reset:function reset(){if(v){try{A=[],function _removeEventListeners(){try{"function"==typeof v.removeEventListener&&(v.removeEventListener("updateend",_updateEndHandler,!1),v.removeEventListener("error",_errHandler,!1),v.removeEventListener("abort",_errHandler,!1)),clearInterval(M)}catch(t){l.error(t)}}(),N=!1,C=[],v.getClassName&&"TextSourceBuffer"===v.getClassName()||(l.debug("Removing sourcebuffer from media source"),k.removeSourceBuffer(v))}catch(t){}v=null}O=null},updateTimestampOffset:updateTimestampOffset,initializeForStreamSwitch:function initializeForStreamSwitch(t,r,a){i=(b=t).type;var u=b.codec;!function _copyPreviousSinkData(t){v=t.getBuffer()}(a),_addEventListeners();var l=[];return l.push(_abortBeforeAppend),l.push(updateAppendWindow(b.streamInfo)),l.push(changeType(u)),r&&void 0!==r.MSETimeOffset&&l.push(updateTimestampOffset(r.MSETimeOffset)),Promise.all(l)},initializeForFirstUse:function initializeForFirstUse(t,r,a){i=(b=r).type;var u=b.codec;try{if(u.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return _initializeForText(t);v=k.addSourceBuffer(u),_addEventListeners();var l=[];return l.push(updateAppendWindow(b.streamInfo)),a&&void 0!==a.MSETimeOffset&&l.push(updateTimestampOffset(a.MSETimeOffset)),Promise.all(l)}catch(r){return b.type==g.default.TEXT&&!b.isFragmented||-1!==u.indexOf('codecs="stpp')||-1!==u.indexOf('codecs="vtt')?_initializeForText(t):Promise.reject(r)}},updateAppendWindow:updateAppendWindow,changeType:changeType},function setup(){l=Object(a.default)(S).getInstance().getLogger(r)}(),r}SourceBufferSink.__dashjs_factory_name="SourceBufferSink";var v=l.default.getClassFactory(SourceBufferSink);r.default=v},"./src/streaming/Stream.js":
/*!*********************************!*\
    !*** ./src/streaming/Stream.js ***!
    \*********************************/
/*! exports provided: default */function srcStreamingStreamJs(t,r,i){i.r(r);var a=i(/*! ./constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../dash/constants/DashConstants */"./src/dash/constants/DashConstants.js"),l=i(/*! ./StreamProcessor */"./src/streaming/StreamProcessor.js"),c=i(/*! ./controllers/FragmentController */"./src/streaming/controllers/FragmentController.js"),d=i(/*! ./thumbnail/ThumbnailController */"./src/streaming/thumbnail/ThumbnailController.js"),g=i(/*! ../core/EventBus */"./src/core/EventBus.js"),p=i(/*! ../core/events/Events */"./src/core/events/Events.js"),m=i(/*! ../core/Debug */"./src/core/Debug.js"),v=i(/*! ../core/errors/Errors */"./src/core/errors/Errors.js"),b=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),M=i(/*! ./vo/DashJSError */"./src/streaming/vo/DashJSError.js"),S=i(/*! ./utils/BoxParser */"./src/streaming/utils/BoxParser.js"),E=i(/*! ./utils/URLUtils */"./src/streaming/utils/URLUtils.js"),I=i(/*! ./controllers/BlacklistController */"./src/streaming/controllers/BlacklistController.js"),D=[a.default.VIDEO,a.default.AUDIO,a.default.TEXT,a.default.MUXED,a.default.IMAGE];function Stream(t){t=t||{};var r,i,b,A,C,N,k,O,L,R,j,B,U,z,Y,G,H,Q,V=this.context,W=Object(g.default)(V).getInstance(),$=Object(E.default)(V).getInstance(),K=t.manifestModel,q=t.mediaPlayerModel,X=t.dashMetrics,Z=t.manifestUpdater,J=t.adapter,ee=t.timelineConverter,te=t.capabilities,re=t.errHandler,ne=t.abrController,ie=t.playbackController,ae=t.eventController,oe=t.mediaController,se=t.protectionController,ue=t.textController,le=t.videoModel,ce=t.streamInfo,de=t.settings;function _commonMediaInitialization(r,c){return new Promise((function(g,m){checkConfig(),R=!0,addInlineEvents();var S=le.getElement();D.forEach((function(c){(c!==a.default.VIDEO||!S||S&&/^VIDEO$/i.test(S.nodeName))&&function _initializeMediaForType(r,c){var g,m=J.getAllMediaInfoForType(ce,r),v=[],M=null;if(!m||0===m.length)return void i.info("No "+r+" data.");r===a.default.VIDEO&&(k=!0);r===a.default.AUDIO&&(O=!0);for(var S=0,E=m.length;S<E;S++)M=m[S],r===a.default.TEXT&&M.isEmbedded&&(ue.addEmbeddedTrack(ce,M),v.push(M)),_isMediaSupported(M)&&oe.addTrack(M);v.length>0&&(oe.setInitialMediaSettingsForType(r,ce),ue.setInitialSettings(oe.getInitialSettings(r)),ue.addMediaInfosToBuffer(ce,r,v));if(m=m.filter((function(t){return!t.isEmbedded})),0===m.length)return;if(r===a.default.IMAGE)return void(B=Object(d.default)(V).create({streamInfo:ce,adapter:J,baseURLController:t.baseURLController,timelineConverter:t.timelineConverter,debug:G,eventBus:W,events:p.default,dashConstants:u.default,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController})).initialize();W.trigger(p.default.STREAM_INITIALIZING,{streamInfo:ce,mediaInfo:M}),oe.setInitialMediaSettingsForType(r,ce);var I=function _createStreamProcessor(r,i){var u=r&&r.length>0?r[0]:null,c=j.getModel(u?u.type:null),d=u?u.type:null,g=u?u.mimeType:null,p=u?u.isFragmented:null,m=Object(l.default)(V).create({streamInfo:ce,type:d,mimeType:g,timelineConverter:ee,adapter:J,manifestModel:K,mediaPlayerModel:q,fragmentModel:c,dashMetrics:t.dashMetrics,baseURLController:t.baseURLController,segmentBaseController:t.segmentBaseController,abrController:ne,playbackController:ie,mediaController:oe,textController:ue,errHandler:re,settings:de,boxParser:Y,segmentBlacklistController:U});m.initialize(i,k,p),b.push(m);for(var v=0;v<r.length;v++)m.addMediaInfo(r[v]);d===a.default.TEXT&&ue.addMediaInfosToBuffer(ce,d,r,c);return m}(m,c);(g=oe.getCurrentTrackFor(r,ce.id))&&(ne.updateTopQualityIndex(g),I.selectMediaInfo(r===a.default.TEXT&&g.isEmbedded?m[0]:g))}(c,r)})),function _createBufferSinks(t){return new Promise((function(r){var i={},a=b.map((function(r){return r.createBufferSinks(t)}));Promise.all(a).then((function(t){t.forEach((function(t){t&&(i[t.getType()]=t)})),r(i)})).catch((function(){r(i)}))}))}(c).then((function(t){if(R=!1,0===b.length){var r="No streams to play.";re.error(new M.default(v.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,r,K.getValue())),i.fatal(r)}else _checkIfInitializationCompleted();ue.createTracks(ce),g(t)})).catch((function(t){m(t)}))}))}function _isMediaSupported(t){var r,u=t?t.type:null;return u===a.default.MUXED?(r="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",i.fatal(r),re.error(new M.default(v.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,r,K.getValue())),!1):u===a.default.TEXT||u===a.default.IMAGE||(!(t.contentProtection&&!te.supportsEncryptedMedia())||(re.error(new M.default(v.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,v.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),!1))}function deactivate(t){for(var r=b?b.length:0,i=0;i<r;i++){var a=b[i].getFragmentModel();a.abortRequests(),a.resetInitialSettings(),b[i].reset(false,t)}ue&&ue.deactivateStream(ce),b=[],C=!1,N=!1,setPreloaded(!1),setIsEndedEventSignaled(!1),W.trigger(p.default.STREAM_DEACTIVATED,{streamInfo:ce})}function resetInitialSettings(t){deactivate(t),A=!1,k=!1,O=!1,L={},R=!1,H=!1,Q=[]}function setIsEndedEventSignaled(t){H=t}function getStartTime(){return ce?ce.start:NaN}function getId(){return ce?ce.id:null}function getStreamInfo(){return ce}function checkConfig(){if(!le||!ne)throw new Error(a.default.MISSING_CONFIG_ERROR)}function onProtectionError(t){t.error&&(re.error(t.error),i.fatal(t.error.message))}function addInlineEvents(){if(ae){var t=J.getEventsFor(ce);ae.addInlineEvents(t)}}function _checkIfInitializationCompleted(){for(var t=b.length,r=!!L.audio||!!L.video?new M.default(v.default.DATA_UPDATE_FAILED_ERROR_CODE,v.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,i=0;i<t;i++)if(b[i].isUpdating()||R)return;if(se){se.clearMediaInfoArray();for(var u=0;u<t&&b[u];u++){var l=b[u].getType(),c=b[u].getMediaInfo();if(l===a.default.AUDIO||l===a.default.VIDEO||l===a.default.TEXT&&c.isFragmented){var d=b[u].getMediaInfo();d&&se.initializeForMedia(d)}}}r?re.error(r):A||(A=!0,le.waitForReadyState(a.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){W.trigger(p.default.STREAM_INITIALIZED,{streamInfo:ce})})))}function onBufferingCompleted(){var t=getProcessors(),r=t.length;if(0!==r){for(var u=0;u<r;u++)if(!t[u].isBufferingCompleted()&&(t[u].getType()===a.default.AUDIO||t[u].getType()===a.default.VIDEO))return void i.debug("onBufferingCompleted - One streamProcessor has finished but",t[u].getType(),"one is not buffering completed");i.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),N=!0,W.trigger(p.default.STREAM_BUFFERING_COMPLETED,{streamInfo:ce},{streamInfo:ce})}else i.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function onDataUpdateCompleted(t){L[t.mediaType]=t.error,_checkIfInitializationCompleted()}function onInbandEvents(t){ae&&ae.addInbandEvents(t.events)}function getProcessorForMediaInfo(t){return t&&t.type?_getProcessorByType(t.type):null}function _getProcessorByType(t){return t?getProcessors().filter((function(r){return r.getType()===t}))[0]:null}function getProcessors(){for(var t,r,i=[],u=0;u<b.length;u++)(t=(r=b[u]).getType())!==a.default.AUDIO&&t!==a.default.VIDEO&&t!==a.default.TEXT||i.push(r);return i}function _compareProtectionConfig(t,r){var i=getStreamInfo(),a=r.getStreamInfo();if(!a||!i)return!0;var u=J.getAdaptationForType(a.index,t,a),l=J.getAdaptationForType(i.index,t,i);return u&&l?!(!_isAdaptationDrmProtected(l)&&_isAdaptationDrmProtected(u)):!u&&!l}function _isAdaptationDrmProtected(t){return!!t&&!!(t.ContentProtection||t.Representation&&t.Representation.length>0&&t.Representation[0].ContentProtection)}function compareCodecs(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t||!t.hasOwnProperty("getStreamInfo"))return!1;var a=t.getStreamInfo(),u=i?i.getStreamInfo():getStreamInfo();if(!a||!u)return!1;var l=J.getAdaptationForType(a.index,r,a),c=J.getAdaptationForType(u.index,r,u);if(!l||!c)return!l&&!c;var d=l&&c&&l.mimeType===c.mimeType,g=c.Representation_asArray.map((function(t){return t.codecs})),p=l.Representation_asArray.map((function(t){return t.codecs})),m=p.some((function(t){return g.indexOf(t)>-1})),v=p.some((function(t){return g.some((function(r){return te.codecRootCompatibleWithCodec(r,t)}))}));return m||v&&d}function setPreloaded(t){z=t}function getPreloaded(){return z}return r={initialize:function initialize(){!function registerEvents(){W.on(p.default.BUFFERING_COMPLETED,onBufferingCompleted,r),W.on(p.default.DATA_UPDATE_COMPLETED,onDataUpdateCompleted,r),W.on(p.default.INBAND_EVENTS,onInbandEvents,r)}(),function registerProtectionEvents(){se&&(W.on(p.default.KEY_ERROR,onProtectionError,r),W.on(p.default.SERVER_CERTIFICATE_UPDATED,onProtectionError,r),W.on(p.default.LICENSE_REQUEST_COMPLETE,onProtectionError,r),W.on(p.default.KEY_SYSTEM_SELECTED,onProtectionError,r),W.on(p.default.KEY_SESSION_CREATED,onProtectionError,r),W.on(p.default.KEY_STATUSES_CHANGED,onProtectionError,r))}(),ue.initializeForStream(ce),W.trigger(p.default.STREAM_UPDATED,{streamInfo:ce})},getStreamId:function getStreamId(){return ce?ce.id:null},activate:function activate(t,r){return new Promise((function(i,a){if(!C)return getPreloaded()?(C=!0,W.trigger(p.default.STREAM_ACTIVATED,{streamInfo:ce}),void i(r)):void function _initializeMedia(t,r){return _commonMediaInitialization(t,r)}(t,r).then((function(t){C=!0,W.trigger(p.default.STREAM_ACTIVATED,{streamInfo:ce}),i(t)})).catch((function(t){a(t)}));i(r)}))},deactivate:deactivate,getIsActive:function getIsActive(){return C},getDuration:function getDuration(){return ce?ce.duration:NaN},getStartTime:getStartTime,getId:getId,getStreamInfo:getStreamInfo,getHasAudioTrack:function getHasAudioTrack(){return O},getHasVideoTrack:function getHasVideoTrack(){return k},startPreloading:function startPreloading(t,r){return new Promise((function(a,u){getPreloaded()?u():(i.info("[startPreloading] Preloading next stream with id ".concat(getId())),setPreloaded(!0),_commonMediaInitialization(t,r).then((function(){for(var t=0;t<b.length&&b[t];t++)b[t].setExplicitBufferingTime(getStartTime()),b[t].getScheduleController().startScheduleTimer();a()})).catch((function(){setPreloaded(!1),u()})))}))},getThumbnailController:function getThumbnailController(){return B},getBitrateListFor:function getBitrateListFor(t){if(checkConfig(),t===a.default.IMAGE)return B?B.getBitrateList():[];var r=function getMediaInfo(t){for(var r=null,i=0;i<b.length;i++)if((r=b[i]).getType()===t)return r.getMediaInfo();return null}(t);return ne.getBitrateList(r)},updateData:function updateData(t){return new Promise((function(r){R=!0,ce=t,ae&&addInlineEvents();for(var i=[],a=0,u=b.length;a<u;a++){var l=b[a],c=l.getMediaInfo();i.push(l.updateStreamInfo(ce));var d=J.getAllMediaInfoForType(ce,l.getType());if(d){l.clearMediaInfoArray();for(var g=0;g<d.length;g++){var m=d[g];l.addMediaInfo(d[g]),J.areMediaInfosEqual(c,m)&&(ne.updateTopQualityIndex(m),i.push(l.selectMediaInfo(m)))}}}Promise.all(i).then((function(){for(i=[];Q.length>0;){var t=Q.pop(),r=t.newMediaInfo,a=getProcessorForMediaInfo(t.oldMediaInfo);if(!a)return;i.push(a.prepareTrackSwitch()),a.selectMediaInfo(r)}return Promise.all(i)})).then((function(){R=!1,_checkIfInitializationCompleted(),W.trigger(p.default.STREAM_UPDATED,{streamInfo:ce}),r()}))}))},reset:function reset(t){j&&(j.reset(),j=null),ne&&ce&&ne.clearDataForStream(ce.id),U&&(U.reset(),U=null),resetInitialSettings(t),ce=null,function unRegisterEvents(){W.off(p.default.DATA_UPDATE_COMPLETED,onDataUpdateCompleted,r),W.off(p.default.BUFFERING_COMPLETED,onBufferingCompleted,r),W.off(p.default.INBAND_EVENTS,onInbandEvents,r)}(),function unRegisterProtectionEvents(){se&&(W.off(p.default.KEY_ERROR,onProtectionError,r),W.off(p.default.SERVER_CERTIFICATE_UPDATED,onProtectionError,r),W.off(p.default.LICENSE_REQUEST_COMPLETE,onProtectionError,r),W.off(p.default.KEY_SYSTEM_SELECTED,onProtectionError,r),W.off(p.default.KEY_SESSION_CREATED,onProtectionError,r),W.off(p.default.KEY_STATUSES_CHANGED,onProtectionError,r))}()},getProcessors:getProcessors,setMediaSource:function setMediaSource(t){for(var r=0;r<b.length;)_isMediaSupported(b[r].getMediaInfo())?(b[r].setMediaSource(t),r++):(b[r].reset(),b.splice(r,1));if(0===b.length){var a="No streams to play.";re.error(new M.default(v.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,a+"nostreams",K.getValue())),i.fatal(a)}},isMediaCodecCompatible:function isMediaCodecCompatible(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return compareCodecs(t,a.default.VIDEO,r)&&compareCodecs(t,a.default.AUDIO,r)},isProtectionCompatible:function isProtectionCompatible(t){return!t||_compareProtectionConfig(a.default.VIDEO,t)&&_compareProtectionConfig(a.default.AUDIO,t)},getPreloaded:getPreloaded,getIsEndedEventSignaled:function getIsEndedEventSignaled(){return H},setIsEndedEventSignaled:setIsEndedEventSignaled,getAdapter:function getAdapter(){return J},getHasFinishedBuffering:function getHasFinishedBuffering(){return N},setPreloaded:setPreloaded,startScheduleControllers:function startScheduleControllers(){for(var t=b.length,r=0;r<t&&b[r];r++)b[r].getScheduleController().startScheduleTimer()},prepareTrackChange:function prepareTrackChange(t){if(C&&ce){N=!1;var r=t.newMediaInfo,u=K.getValue();J.setCurrentMediaInfo(ce.id,r.type,r);var l=getProcessorForMediaInfo(r);if(l){var c=ie.getTime();i.info("Stream -  Process track changed at current time "+c),u.refreshManifestOnSwitchTrack?(Q.push(t),Z.getIsUpdating()||(i.debug("Stream -  Refreshing manifest for switch track"),Z.refreshManifest())):l.selectMediaInfo(r).then((function(){r.type!==a.default.VIDEO&&r.type!==a.default.AUDIO||ne.updateTopQualityIndex(r),l.prepareTrackSwitch()}))}}},prepareQualityChange:function prepareQualityChange(t){var r=_getProcessorByType(t.mediaType);r&&r.prepareQualityChange(t)}},function setup(){try{G=Object(m.default)(V).getInstance(),i=G.getLogger(r),resetInitialSettings(),Y=Object(S.default)(V).getInstance(),U=Object(I.default)(V).create({updateEventName:p.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:p.default.SEGMENT_LOCATION_BLACKLIST_ADD}),j=Object(c.default)(V).create({streamInfo:ce,mediaPlayerModel:q,dashMetrics:X,errHandler:re,settings:de,boxParser:Y,dashConstants:u.default,urlUtils:$})}catch(t){throw t}}(),r}Stream.__dashjs_factory_name="Stream",r.default=b.default.getClassFactory(Stream)},"./src/streaming/StreamProcessor.js":
/*!******************************************!*\
    !*** ./src/streaming/StreamProcessor.js ***!
    \******************************************/
/*! exports provided: default */function srcStreamingStreamProcessorJs(t,r,i){i.r(r);var a=i(/*! ./constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../dash/constants/DashConstants */"./src/dash/constants/DashConstants.js"),l=i(/*! ./constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),c=i(/*! ./models/FragmentModel */"./src/streaming/models/FragmentModel.js"),d=i(/*! ./controllers/BufferController */"./src/streaming/controllers/BufferController.js"),g=i(/*! ./text/NotFragmentedTextBufferController */"./src/streaming/text/NotFragmentedTextBufferController.js"),p=i(/*! ./controllers/ScheduleController */"./src/streaming/controllers/ScheduleController.js"),m=i(/*! ../dash/controllers/RepresentationController */"./src/dash/controllers/RepresentationController.js"),v=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),b=i(/*! ./utils/SupervisorTools */"./src/streaming/utils/SupervisorTools.js"),M=i(/*! ../core/EventBus */"./src/core/EventBus.js"),S=i(/*! ../core/events/Events */"./src/core/events/Events.js"),E=i(/*! ../dash/DashHandler */"./src/dash/DashHandler.js"),I=i(/*! ../core/errors/Errors */"./src/core/errors/Errors.js"),D=i(/*! ./vo/DashJSError */"./src/streaming/vo/DashJSError.js"),A=i(/*! ../core/Debug */"./src/core/Debug.js"),C=i(/*! ./utils/RequestModifier */"./src/streaming/utils/RequestModifier.js"),N=i(/*! ../streaming/utils/URLUtils */"./src/streaming/utils/URLUtils.js"),k=i(/*! ./utils/BoxParser */"./src/streaming/utils/BoxParser.js"),O=i(/*! ./vo/metrics/PlayList */"./src/streaming/vo/metrics/PlayList.js"),L=i(/*! ../dash/controllers/SegmentsController */"./src/dash/controllers/SegmentsController.js"),R=i(/*! ./vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js");function StreamProcessor(t){t=t||{};var r,i,v,j,B,U,z,Y,G,H,Q,V,W,$=this.context,K=Object(M.default)($).getInstance(),q=t.streamInfo,X=t.type,Z=t.errHandler,J=t.mimeType,ee=t.timelineConverter,te=t.adapter,re=t.manifestModel,ne=t.mediaPlayerModel,ie=t.fragmentModel,ae=t.abrController,oe=t.playbackController,se=t.mediaController,ue=t.textController,le=t.dashMetrics,ce=t.settings,de=t.boxParser,fe=t.segmentBlacklistController;function getStreamId(){return q.id}function getType(){return X}function getIsTextTrack(){return te.getIsTextTrack(Y.getData())}function resetInitialSettings(){B=[],j=null,W=0,G=!1,H=!1}function _onInitFragmentNeeded(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.sender)if(oe.getIsManifestUpdateInProgress())_noValidRequest();else if((!getIsTextTrack()||ue.isTextEnabled())&&U&&t.representationId&&!U.appendInitSegmentFromCache(t.representationId)){var i=Y.getCurrentRepresentation();if(0===i.range)return void _onMediaFragmentNeeded();var a=Q?Q.getInitRequest(j,i):null;a?ie.executeRequest(a):r&&(z.setInitSegmentRequired(!0),_noValidRequest())}}function _onMediaFragmentNeeded(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(oe.getIsManifestUpdateInProgress()||U.getIsPruningInProgress())_noValidRequest();else{var i=_getFragmentRequest();i?(G=!1,_mediaRequestGenerated(i)):_noMediaRequestGenerated(r)}}function _mediaRequestGenerated(t){isNaN(t.startTime+t.duration)||(W=t.startTime+t.duration),t.delayLoadingTime=(new Date).getTime()+z.getTimeToLoadDelay(),z.setTimeToLoadDelay(0),!function _shouldIgnoreRequest(t){var r=t.url;t.range&&(r=r.concat("_",t.range));return fe.contains(r)}(t)?(i.debug("Next fragment request url for stream id ".concat(q.id," and media type ").concat(X," is ").concat(t.url)),ie.executeRequest(t)):(i.warn("Fragment request url ".concat(t.url," for stream id ").concat(q.id," and media type ").concat(X," is on the ignore list and will be skipped")),_noValidRequest())}function _noMediaRequestGenerated(t){var r,a=Y.getCurrentRepresentation();if(ce.get().streaming.gaps.enableSeekFix&&(G||0===oe.getTime())&&(v?v&&a.segmentInfoType===u.default.SEGMENT_TIMELINE&&(r=Q.getValidTimeAheadOfTargetTime(W,j,a,ce.get().streaming.gaps.threshold)):r=Q.getValidTimeAheadOfTargetTime(W,j,a,ce.get().streaming.gaps.threshold),!isNaN(r)&&r!==W))return void(oe.isSeeking()||0===oe.getTime()?(i.warn("Adjusting playback time ".concat(r," because of gap in the manifest. Seeking by ").concat(r-W)),oe.seek(r,!1,!1)):(i.warn("Adjusting buffering time ".concat(r," because of gap in the manifest. Adjusting time by ").concat(r-W)),setExplicitBufferingTime(r),t&&_noValidRequest()));if(Q.isLastSegmentRequested(a,W)){var l=Q.getCurrentIndex();return i.debug("Segment requesting for stream ".concat(q.id," has finished")),K.trigger(S.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:l},{streamId:q.id,mediaType:X}),U.segmentRequestingCompleted(l),void z.clearScheduleTimer()}t&&_noValidRequest()}function _getFragmentRequest(){var t,r=getRepresentationInfo();if(isNaN(W)||getType()===a.default.TEXT&&!ue.isTextEnabled())return null;var i=G;if(Q){var u=Y&&r?Y.getRepresentationForQuality(r.quality):null;t=i?Q.getSegmentRequestForTime(j,u,W):Q.getNextSegmentRequest(j,u)}return t}function _noValidRequest(){z.startScheduleTimer(oe.getLowLatencyModeEnabled()?ce.get().streaming.scheduling.lowLatencyTimeout:ce.get().streaming.scheduling.defaultTimeout)}function _onDataUpdateCompleted(t){t.error||(z.setCurrentRepresentation(te.convertRepresentationToRepresentationInfo(t.currentRepresentation)),U.getIsBufferingCompleted()||U.updateBufferTimestampOffset(t.currentRepresentation))}function _onBufferLevelStateChanged(t){le.addBufferState(X,t.state,z.getBufferTarget()),t.state!==l.default.BUFFER_EMPTY||oe.isSeeking()||(i.info("Buffer is empty! Stalling!"),le.pushPlayListTraceMetrics(new Date,O.PlayListTrace.REBUFFERING_REASON))}function _onBufferCleared(t){ie.syncExecutedRequestsWithBufferedRange(U.getBuffer().getAllBufferRanges(),q.duration),t.quotaExceeded&&t.from>oe.getTime()&&setExplicitBufferingTime(t.from),t.hasEnoughSpaceToAppend&&t.quotaExceeded&&z.startScheduleTimer()}function _onSourceBufferError(t){if(t&&t.lastRequestAppended&&t.lastRequestAppended.url){var r=t.lastRequestAppended.url;t.lastRequestAppended.range&&(r=r.concat("_",t.lastRequestAppended.range)),i.warn("Blacklisting segment with url ".concat(r)),fe.add(r)}}function _prepareForDefaultQualitySwitch(){_bufferClearedForNonReplacement(),H=!1}function _onFragmentLoadingAbandoned(t){i.info("onFragmentLoadingAbandoned request: "+t.request.url+" has been aborted"),oe.isSeeking()||z.getSwitchStrack()||H||(i.info("onFragmentLoadingAbandoned request: "+t.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),t.request&&t.request.isInitializationRequest()?z.setInitSegmentRequired(!0):setExplicitBufferingTime(t.request.startTime+t.request.duration/2),z.startScheduleTimer(0))}function _onFragmentLoadingCompleted(t){i.info("OnFragmentLoadingCompleted for stream id "+q.id+" and media type "+X+" - Url:",t.request?t.request.url:"undefined",t.request.range?", Range:"+t.request.range:""),getIsTextTrack()&&z.startScheduleTimer(0),t.error&&t.request.serviceLocation&&function _handleFragmentLoadingError(t){if(i.info("Fragment loading completed with an error"),!t||!t.request||!t.request.type)return;t.request.type===R.HTTPRequest.INIT_SEGMENT_TYPE?_onInitFragmentNeeded({representationId:t.request.representationId,sender:{}},!1):t.request.type===R.HTTPRequest.MEDIA_SEGMENT_TYPE&&(setExplicitBufferingTime(t.request.startTime+t.request.duration/2),_onMediaFragmentNeeded({},!1))}(t)}function _onSetFragmentedTextAfterDisabled(){setExplicitBufferingTime(oe.getTime()),getScheduleController().startScheduleTimer()}function _onSetNonFragmentedText(t){var r=t.currentTrackInfo;if(r){var i=B.find((function(t){return t.index===r.index&&t.lang===r.lang}));i&&selectMediaInfo(i).then((function(){U.setIsBufferingCompleted(!1),setExplicitBufferingTime(oe.getTime()),z.setInitSegmentRequired(!0),z.startScheduleTimer()}))}}function _onQuotaExceeded(t){setExplicitBufferingTime(t.quotaExceededTime),z.clearScheduleTimer()}function getBuffer(){return U?U.getBuffer():null}function selectMediaInfo(t){t===j||t&&j&&t.type!==j.type||(j=t);var r=te.getRealAdaptation(q,j),i=te.getVoRepresentations(j);if(Y){var u,l=Y.getData(),c=ae.getMaxAllowedIndexFor(X,q.id),d=ae.getMinAllowedIndexFor(X,q.id),g=null;return null!==l&&l.id===r.id||X===a.default.TEXT?u=ae.getQualityFor(X,q.id):(g=ae.getThroughputHistory().getAverageThroughput(X,v)||ae.getInitialBitrateFor(X,q.id),u=ae.getQualityForBitrate(j,g,q.id)),void 0!==d&&u<d&&(u=d),u>c&&(u=c),Y.updateData(r,i,X,j.isFragmented,u)}return Promise.resolve()}function getScheduleController(){return z}function getRepresentationInfo(t){var r;return void 0!==t?(Object(b.checkInteger)(t),r=Y?Y.getRepresentationForQuality(t):null):r=Y?Y.getCurrentRepresentation():null,te.convertRepresentationToRepresentationInfo(r)}function isBufferingCompleted(){return!!U&&U.getIsBufferingCompleted()}function _onMediaFragmentLoaded(t){var r=t.chunk,i=r.bytes,a=r.quality,u=getRepresentationInfo(a),l=Y&&u?Y.getRepresentationForQuality(u.quality):null;if(u&&l){var d=te.getEventsFor(u.mediaInfo),g=te.getEventsFor(u,l);if(d&&d.length>0||g&&g.length>0){var p=function _handleInbandEvents(t,r,i,a){try{for(var u={},l=[],c=i.concat(a),d=0,g=c.length;d<g;d++)u[c[d].schemeIdUri+"/"+c[d].value]=c[d];var p=Object(k.default)($).getInstance().parse(t),m=p.getBoxes("emsg");if(!m||0===m.length)return l;for(var v=p.getBox("sidx"),b=!v||isNaN(v.earliest_presentation_time)||isNaN(v.timescale)?r&&!isNaN(r.mediaStartTime)?r.mediaStartTime:0:v.earliest_presentation_time/v.timescale,M=Math.max(b,0),S=Y.getCurrentRepresentation(),E=0,I=m.length;E<I;E++){var D=te.getEvent(m[E],u,M,S);D&&l.push(D)}return l}catch(t){return[]}}(i,ie.getRequests({state:c.default.FRAGMENT_MODEL_EXECUTED,quality:a,index:r.index})[0],d,g);K.trigger(S.default.INBAND_EVENTS,{events:p},{streamId:q.id})}}}function _bufferClearedForReplacement(){var t=oe.getTime();ce.get().streaming.buffer.flushBufferAtTrackSwitch&&oe.seek(t+.001,!1,!0),setExplicitBufferingTime(t),U.setSeekTarget(t),z.startScheduleTimer()}function _bufferClearedForNonReplacement(){var t=oe.getTime(),r=U.getContinuousBufferTimeForTargetTime(t);setExplicitBufferingTime(isNaN(r)?t:r),z.startScheduleTimer()}function _onSeekTarget(t){t&&!isNaN(t.time)&&(setExplicitBufferingTime(t.time),U.setSeekTarget(t.time))}function setExplicitBufferingTime(t){W=t,G=!0}return r={initialize:function initialize(i,l,c){V=Object(L.default)($).create({events:S.default,eventBus:K,streamInfo:q,timelineConverter:ee,dashConstants:u.default,segmentBaseController:t.segmentBaseController,type:X}),Q=Object(E.default)($).create({streamInfo:q,type:X,timelineConverter:ee,dashMetrics:le,mediaPlayerModel:ne,baseURLController:t.baseURLController,errHandler:Z,segmentsController:V,settings:ce,boxParser:de,events:S.default,eventBus:K,errors:I.default,debug:Object(A.default)($).getInstance(),requestModifier:Object(C.default)($).getInstance(),dashConstants:u.default,constants:a.default,urlUtils:Object(N.default)($).getInstance()}),v=q.manifestInfo.isDynamic,Q.initialize(v),ae.registerStreamType(X,r),Y=Object(m.default)($).create({streamInfo:q,type:X,abrController:ae,dashMetrics:le,playbackController:oe,timelineConverter:ee,dashConstants:u.default,events:S.default,eventBus:K,errors:I.default,isDynamic:v,segmentsController:V}),U=function _createBufferControllerForType(t,r){var i=null;if(!t)return Z.error(new D.default(I.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,I.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null;i=t!==a.default.TEXT||r?Object(d.default)($).create({streamInfo:q,type:t,mediaPlayerModel:ne,manifestModel:re,fragmentModel:ie,errHandler:Z,mediaController:se,representationController:Y,adapter:te,textController:ue,abrController:ae,playbackController:oe,settings:ce}):Object(g.default)($).create({streamInfo:q,type:t,mimeType:J,fragmentModel:ie,textController:ue,errHandler:Z,settings:ce});return i}(X,c),U&&U.initialize(i),(z=Object(p.default)($).create({streamInfo:q,type:X,mimeType:J,adapter:te,dashMetrics:le,mediaPlayerModel:ne,fragmentModel:ie,abrController:ae,playbackController:oe,textController:ue,mediaController:se,bufferController:U,settings:ce})).initialize(l),W=0,G=!1},getStreamId:getStreamId,getType:getType,isUpdating:function isUpdating(){return!!Y&&Y.isUpdating()},getBufferController:function getBufferController(){return U},getFragmentModel:function getFragmentModel(){return ie},getScheduleController:getScheduleController,getRepresentationController:function getRepresentationController(){return Y},getRepresentationInfo:getRepresentationInfo,getBufferLevel:function getBufferLevel(){return U?U.getBufferLevel():0},isBufferingCompleted:isBufferingCompleted,createBufferSinks:function createBufferSinks(t){var r=getBuffer();return r?Promise.resolve(r):U?U.createBufferSink(j,t):Promise.resolve(null)},updateStreamInfo:function updateStreamInfo(t){return q=t,isBufferingCompleted()?Promise.resolve():U.updateAppendWindow()},getStreamInfo:function getStreamInfo(){return q},selectMediaInfo:selectMediaInfo,clearMediaInfoArray:function clearMediaInfoArray(){B=[]},addMediaInfo:function addMediaInfo(t){-1===B.indexOf(t)&&B.push(t)},prepareTrackSwitch:function prepareTrackSwitch(){return new Promise((function(t){i.debug("Preparing track switch for type ".concat(X));var r=X===a.default.TEXT||ce.get().streaming.trackSwitchMode[X]===a.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&oe.getTimeToStreamEnd(q)>ce.get().streaming.buffer.stallThreshold;if(U.getIsBufferingCompleted()&&!r)return U.prepareForNonReplacementTrackSwitch(j.codec).then((function(){K.trigger(S.default.BUFFERING_COMPLETED,{},{streamId:q.id,mediaType:X})})).catch((function(){K.trigger(S.default.BUFFERING_COMPLETED,{},{streamId:q.id,mediaType:X})})),void t();z.clearScheduleTimer(),z.setSwitchTrack(!0),r?(K.trigger(S.default.BUFFER_REPLACEMENT_STARTED,{mediaType:X,streamId:q.id},{mediaType:X,streamId:q.id}),ie.abortRequests(),U.prepareForReplacementTrackSwitch(j.codec).then((function(){var t=getRepresentationInfo();return U.updateBufferTimestampOffset(t)})).then((function(){_bufferClearedForReplacement(),t()})).catch((function(){_bufferClearedForReplacement(),t()}))):U.prepareForNonReplacementTrackSwitch(j.codec).then((function(){_bufferClearedForNonReplacement(),t()})).catch((function(){_bufferClearedForNonReplacement(),t()}))}))},prepareQualityChange:function prepareQualityChange(t){i.debug("Preparing quality switch for type ".concat(X));var r=t.newQuality;H=!0,z.clearScheduleTimer();var a=getRepresentationInfo(r);z.setCurrentRepresentation(a),Y.prepareQualityChange(r),ie.abortRequests(),U.updateBufferTimestampOffset(a).then((function(){t.reason&&t.reason.forceReplace?function _prepareReplacementQualitySwitch(){K.trigger(S.default.BUFFER_REPLACEMENT_STARTED,{mediaType:X,streamId:q.id},{mediaType:X,streamId:q.id}),U.prepareForReplacementQualitySwitch().then((function(){_bufferClearedForReplacement(),H=!1})).catch((function(){_bufferClearedForReplacement(),H=!1}))}():ce.get().streaming.buffer.fastSwitchEnabled?function _prepareForFastQualitySwitch(t){var r=oe.getTime(),i=1.5,a=ie.getRequests({state:c.default.FRAGMENT_MODEL_EXECUTED,time:r+i,threshold:0})[0];if(a&&!getIsTextTrack()){var u=U.getBufferLevel(),d=ae.getAbandonmentStateFor(q.id,X);if(a.quality<t.quality&&u>=i&&d!==l.default.ABANDON_LOAD)setExplicitBufferingTime(r+i),z.setCheckPlaybackQuality(!1),z.startScheduleTimer();else _prepareForDefaultQualitySwitch()}else z.startScheduleTimer();H=!1}(a):_prepareForDefaultQualitySwitch(),le.pushPlayListTraceMetrics(new Date,O.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),le.createPlaylistTraceMetrics(a.id,1e3*oe.getTime(),oe.getPlaybackRate())}))},getMediaInfo:function getMediaInfo(){return j},getMediaSource:function getMediaSource(){return U.getMediaSource()},setMediaSource:function setMediaSource(t){U.setMediaSource(t)},getBuffer:getBuffer,setExplicitBufferingTime:setExplicitBufferingTime,finalisePlayList:function finalisePlayList(t,r){le.pushPlayListTraceMetrics(t,r)},probeNextRequest:function probeNextRequest(){var t=getRepresentationInfo(),r=Y&&t?Y.getRepresentationForQuality(t.quality):null;return Q.getNextSegmentRequestIdempotent(j,r)},prepareInnerPeriodPlaybackSeeking:function prepareInnerPeriodPlaybackSeeking(t){return new Promise((function(r){z.clearScheduleTimer(),ie.abortRequests(),U.prepareForPlaybackSeek().then((function(){var r=U.getAllRangesWithSafetyFactor(t.seekTime);return U.clearBuffers(r)})).then((function(){var i=U.getContinuousBufferTimeForTargetTime(t.seekTime);if(!isNaN(i)&&!isNaN(q.duration)&&isFinite(q.duration)&&i>=q.start+q.duration)U.setIsBufferingCompleted(!0),r();else{var a=isNaN(i)?t.seekTime:i;setExplicitBufferingTime(a),U.setSeekTarget(a);var u=[];u.push(U.updateAppendWindow());var l=getRepresentationInfo();u.push(U.updateBufferTimestampOffset(l)),Promise.all(u).then((function(){z.setInitSegmentRequired(!0),z.setCheckPlaybackQuality(!1),z.startScheduleTimer(),r()}))}})).catch((function(t){i.error(t)}))}))},prepareOuterPeriodPlaybackSeeking:function prepareOuterPeriodPlaybackSeeking(){return new Promise((function(t,r){try{z.clearScheduleTimer(),ie.abortRequests(),U.prepareForPlaybackSeek().then((function(){return U.pruneAllSafely()})).then((function(){t()}))}catch(t){r(t)}}))},reset:function reset(t,i){Q&&Q.reset(),U&&(U.reset(t,i),U=null),z&&(z.reset(),z=null),Y&&(Y.reset(),Y=null),V&&(V=null),ae&&ae.unRegisterStreamType(getStreamId(),X),K.off(S.default.DATA_UPDATE_COMPLETED,_onDataUpdateCompleted,r),K.off(S.default.INIT_FRAGMENT_NEEDED,_onInitFragmentNeeded,r),K.off(S.default.MEDIA_FRAGMENT_NEEDED,_onMediaFragmentNeeded,r),K.off(S.default.MEDIA_FRAGMENT_LOADED,_onMediaFragmentLoaded,r),K.off(S.default.BUFFER_LEVEL_STATE_CHANGED,_onBufferLevelStateChanged,r),K.off(S.default.BUFFER_CLEARED,_onBufferCleared,r),K.off(S.default.SEEK_TARGET,_onSeekTarget,r),K.off(S.default.FRAGMENT_LOADING_ABANDONED,_onFragmentLoadingAbandoned,r),K.off(S.default.FRAGMENT_LOADING_COMPLETED,_onFragmentLoadingCompleted,r),K.off(S.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,_onSetFragmentedTextAfterDisabled,r),K.off(S.default.SET_NON_FRAGMENTED_TEXT,_onSetNonFragmentedText,r),K.off(S.default.QUOTA_EXCEEDED,_onQuotaExceeded,r),K.off(S.default.SOURCE_BUFFER_ERROR,_onSourceBufferError,r),resetInitialSettings(),X=null,q=null}},function setup(){i=Object(A.default)($).getInstance().getLogger(r),resetInitialSettings(),K.on(S.default.DATA_UPDATE_COMPLETED,_onDataUpdateCompleted,r,{priority:M.default.EVENT_PRIORITY_HIGH}),K.on(S.default.INIT_FRAGMENT_NEEDED,_onInitFragmentNeeded,r),K.on(S.default.MEDIA_FRAGMENT_NEEDED,_onMediaFragmentNeeded,r),K.on(S.default.MEDIA_FRAGMENT_LOADED,_onMediaFragmentLoaded,r),K.on(S.default.BUFFER_LEVEL_STATE_CHANGED,_onBufferLevelStateChanged,r),K.on(S.default.BUFFER_CLEARED,_onBufferCleared,r),K.on(S.default.SEEK_TARGET,_onSeekTarget,r),K.on(S.default.FRAGMENT_LOADING_ABANDONED,_onFragmentLoadingAbandoned,r),K.on(S.default.FRAGMENT_LOADING_COMPLETED,_onFragmentLoadingCompleted,r),K.on(S.default.QUOTA_EXCEEDED,_onQuotaExceeded,r),K.on(S.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,_onSetFragmentedTextAfterDisabled,r),K.on(S.default.SET_NON_FRAGMENTED_TEXT,_onSetNonFragmentedText,r),K.on(S.default.SOURCE_BUFFER_ERROR,_onSourceBufferError,r)}(),r}StreamProcessor.__dashjs_factory_name="StreamProcessor",r.default=v.default.getClassFactory(StreamProcessor)},"./src/streaming/XlinkLoader.js":
/*!**************************************!*\
    !*** ./src/streaming/XlinkLoader.js ***!
    \**************************************/
/*! exports provided: default */function srcStreamingXlinkLoaderJs(t,r,i){i.r(r);var a=i(/*! ./vo/DashJSError */"./src/streaming/vo/DashJSError.js"),u=i(/*! ./net/URLLoader */"./src/streaming/net/URLLoader.js"),l=i(/*! ./vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),c=i(/*! ./vo/TextRequest */"./src/streaming/vo/TextRequest.js"),d=i(/*! ../core/EventBus */"./src/core/EventBus.js"),g=i(/*! ../core/events/Events */"./src/core/events/Events.js"),p=i(/*! ../core/FactoryMaker */"./src/core/FactoryMaker.js"),m=i(/*! ../core/errors/Errors */"./src/core/errors/Errors.js");function XlinkLoader(t){t=t||{};var r=this.context,i=Object(d.default)(r).getInstance(),p=Object(u.default)(r).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,errors:m.default});return{load:function load(t,r,u){var d=function report(l,c){r.resolved=!0,r.resolvedContent=l||null,i.trigger(g.default.XLINK_ELEMENT_LOADED,{element:r,resolveObject:u,error:l||c?null:new a.default(m.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,m.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+t)})};if("urn:mpeg:dash:resolve-to-zero:2013"===t)d(null,!0);else{var v=new c.default(t,l.HTTPRequest.XLINK_EXPANSION_TYPE);p.load({request:v,success:function success(t){d(t)},error:function error(){d(null)}})}},reset:function reset(){p&&(p.abort(),p=null)}}}XlinkLoader.__dashjs_factory_name="XlinkLoader",r.default=p.default.getClassFactory(XlinkLoader)},"./src/streaming/constants/ConformanceViolationConstants.js":
/*!******************************************************************!*\
    !*** ./src/streaming/constants/ConformanceViolationConstants.js ***!
    \******************************************************************/
/*! exports provided: default */function srcStreamingConstantsConformanceViolationConstantsJs(t,r,i){i.r(r),r.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":
/*!**********************************************!*\
    !*** ./src/streaming/constants/Constants.js ***!
    \**********************************************/
/*! exports provided: default */function srcStreamingConstantsConstantsJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=new(function(){function Constants(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Constants),this.init()}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(Constants,[{key:"init",value:function init(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}]),Constants}());r.default=a},"./src/streaming/constants/MetricsConstants.js":
/*!*****************************************************!*\
    !*** ./src/streaming/constants/MetricsConstants.js ***!
    \*****************************************************/
/*! exports provided: default */function srcStreamingConstantsMetricsConstantsJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=new(function(){function MetricsConstants(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MetricsConstants),this.init()}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(MetricsConstants,[{key:"init",value:function init(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}]),MetricsConstants}());r.default=a},"./src/streaming/constants/ProtectionConstants.js":
/*!********************************************************!*\
    !*** ./src/streaming/constants/ProtectionConstants.js ***!
    \********************************************************/
/*! exports provided: default */function srcStreamingConstantsProtectionConstantsJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=new(function(){function ProtectionConstants(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ProtectionConstants),this.init()}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(ProtectionConstants,[{key:"init",value:function init(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}]),ProtectionConstants}());r.default=a},"./src/streaming/controllers/AbrController.js":
/*!****************************************************!*\
    !*** ./src/streaming/controllers/AbrController.js ***!
    \****************************************************/
/*! exports provided: default */function srcStreamingControllersAbrControllerJs(t,r,i){i.r(r);var a=i(/*! ../rules/abr/ABRRulesCollection */"./src/streaming/rules/abr/ABRRulesCollection.js"),u=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),l=i(/*! ../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),c=i(/*! ../vo/BitrateInfo */"./src/streaming/vo/BitrateInfo.js"),d=i(/*! ../models/FragmentModel */"./src/streaming/models/FragmentModel.js"),g=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),p=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),m=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),v=i(/*! ../rules/RulesContext */"./src/streaming/rules/RulesContext.js"),b=i(/*! ../rules/SwitchRequest */"./src/streaming/rules/SwitchRequest.js"),M=i(/*! ../rules/SwitchRequestHistory */"./src/streaming/rules/SwitchRequestHistory.js"),S=i(/*! ../rules/DroppedFramesHistory */"./src/streaming/rules/DroppedFramesHistory.js"),E=i(/*! ../rules/ThroughputHistory */"./src/streaming/rules/ThroughputHistory.js"),I=i(/*! ../../core/Debug */"./src/core/Debug.js"),D=i(/*! ../vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),A=i(/*! ../utils/SupervisorTools */"./src/streaming/utils/SupervisorTools.js"),C=i(/*! ../MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js");function AbrController(){var t,r,i,m,N,k,O,L,R,j,B,U,z,Y,G,H,Q,V,W,$,K,q,X,Z,J,ee,te=this.context,re=Object(I.default)(te).getInstance(),ne=Object(g.default)(te).getInstance();function resetInitialSettings(){N={},k={},L={},O={},W={},q={},X={},Z={},void 0===j&&(j=!1),$&&$.reset(),V=void 0,$=void 0,K=void 0,clearTimeout(R),R=null}function _onFragmentLoadProgress(r){var a=r.request.mediaType,u=r.streamId;if(a&&u&&O[u]&&ee.get().streaming.abr.autoSwitchBitrate[a]){var c=O[u][a];if(c){var g=Object(v.default)(te).create({abrController:t,streamProcessor:c,currentRequest:r.request,useBufferOccupancyABR:q[a],useL2AABR:X[a],useLoLPABR:Z[a],videoModel:Y}),p=i.shouldAbandonFragment(g,u);if(p.quality>b.default.NO_CHANGE){var M=c.getFragmentModel();M.getRequests({state:d.default.FRAGMENT_MODEL_LOADING,index:r.request.index})[0]&&(M.abortRequests(),L[u][a].state=l.default.ABANDON_LOAD,W[u][a].reset(),W[u][a].push({oldValue:getQualityFor(a,u),newValue:p.quality,confidence:1,reason:p.reason}),setPlaybackQuality(a,m.getActiveStreamInfo(),p.quality,p.reason),clearTimeout(R),R=setTimeout((function(){L[u][a].state=l.default.ALLOW_LOAD,R=null}),ee.get().streaming.abandonLoadTimeout))}}}}function _onQualityChangeRendered(t){t.mediaType===u.default.VIDEO&&(void 0!==V&&$.push(t.streamId,V,Y.getPlaybackQuality()),V=t.newQuality)}function _onMetricAdded(t){t.metric!==l.default.HTTP_REQUEST||!t.value||t.value.type!==D.HTTPRequest.MEDIA_SEGMENT_TYPE||t.mediaType!==u.default.AUDIO&&t.mediaType!==u.default.VIDEO||K.push(t.mediaType,t.value,ee.get().streaming.abr.useDeadTimeLatency),t.metric!==l.default.BUFFER_LEVEL||t.mediaType!==u.default.AUDIO&&t.mediaType!==u.default.VIDEO||function _updateAbrStrategy(t,i){ee.get().streaming.abr.ABRStrategy===u.default.ABR_STRATEGY_DYNAMIC&&function _updateDynamicAbrStrategy(t,i){try{var a=G.getStableBufferTime(),u=a,l=.5*a,c=q[t],d=i>(c?l:u);q[t]=d,d!==c&&(d?r.info("["+t+"] switching from throughput to buffer occupancy ABR rule (buffer: "+i.toFixed(3)+")."):r.info("["+t+"] switching from buffer occupancy to throughput ABR rule (buffer: "+i.toFixed(3)+")."))}catch(t){r.error(t)}}(t,i)}(t.mediaType,.001*t.value.level)}function getMaxAllowedIndexFor(t,r){try{var i;return N[r]=N[r]||{},N[r].hasOwnProperty(t)||(N[r][t]=0),i=function _checkMaxBitrate(t,r){var i=N[r][t],a=i;if(!O[r]||!O[r][t])return a;var u=getMinAllowedIndexFor(t,r);void 0!==u&&(a=Math.max(i,u));var l=function _getMaxIndexBasedOnBitrateFor(t,r){try{var i=G.getAbrBitrateParameter("maxBitrate",t);return i>-1?getQualityForBitrate(O[r][t].getMediaInfo(),i,r):void 0}catch(t){return}}(t,r);void 0!==l&&(a=Math.min(a,l));return a}(t,r),i=function _checkMaxRepresentationRatio(t,r,i){var a=N[i][r],u=ee.get().streaming.abr.maxRepresentationRatio[r];if(isNaN(u)||u>=1||u<0)return t;return Math.min(t,Math.round(a*u))}(i,t,r),i=function _checkPortalSize(t,r,i){if(r!==u.default.VIDEO||!ee.get().streaming.abr.limitBitrateByPortal||!O[i]||!O[i][r])return t;j||setElementSize();var a=O[i][r].getStreamInfo(),l=z.getAdaptationForType(a.index,r,a).Representation,c=t;if(B>0&&U>0){for(;c>0&&l[c]&&B<l[c].width&&B-l[c-1].width<l[c].width-B;)c-=1;for(;c<l.length-1&&l[c].width===l[c+1].width;)c+=1}return c}(i,t,r),i}catch(t){return}}function getMinAllowedIndexFor(t,r){try{return function _getMinIndexBasedOnBitrateFor(t,r){try{var i=G.getAbrBitrateParameter("minBitrate",t);if(i>-1){var a=O[r][t].getMediaInfo(),u=getBitrateList(a),l=getQualityForBitrate(a,i,r);return u[l]&&l<u.length-1&&u[l].bitrate<1e3*i&&l++,l}return}catch(t){return}}(t,r)}catch(t){return}}function getQualityFor(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(r||(r=m.getActiveStreamInfo().id),t&&O[r]&&O[r][t])if(r)return k[r]=k[r]||{},k[r].hasOwnProperty(t)||(k[r][t]=0),k[r][t];return 0}catch(t){return 0}}function setPlaybackQuality(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r&&r.id&&t){var u=r.id,l=getQualityFor(t,u);Object(A.checkInteger)(i);var c=getMaxAllowedIndexFor(t,u);i!==l&&i>=0&&i<=c&&_changeQuality(t,l,i,c,a,u)}}function _changeQuality(t,i,a,u,l,c){if(t&&O[c]&&O[c][t]){var d=O[c][t].getStreamInfo(),g=d&&d.manifestInfo&&d.manifestInfo.isDynamic,m=J.getCurrentBufferLevel(t);r.info("Stream ID: "+c+" ["+t+"] switch from "+i+" to "+a+"/"+u+" (buffer: "+m+") "+(l?JSON.stringify(l):".")),k[c]=k[c]||{},k[c][t]=a;var v=function _getBitrateInfoForQuality(t,r,i){if(r&&O&&O[t]&&O[t][r]){var a=getBitrateList(O[t][r].getMediaInfo());return a[i]?a[i]:null}return null}(c,t,a);ne.trigger(p.default.QUALITY_CHANGE_REQUESTED,{oldQuality:i,newQuality:a,reason:l,streamInfo:d,bitrateInfo:v,maxIdx:u,mediaType:t},{streamId:d.id,mediaType:t});var b=K.getAverageThroughput(t,g);isNaN(b)||Q.setSavedBitrateSettings(t,b)}}function getQualityForBitrate(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=t&&t.type?O[i][t.type].getRepresentationInfo():null;if(ee.get().streaming.abr.useDeadTimeLatency&&a&&u&&u.fragmentDuration){a/=1e3;var l=u.fragmentDuration;if(a>l)return 0;var c=a/l;r*=1-c}for(var d=getBitrateList(t),g=d.length-1;g>=0;g--){var p=d[g];if(1e3*r>=p.bitrate)return g}return 0}function getBitrateList(t){var r=[];if(!t||!t.bitrateList)return r;for(var i,a=t.bitrateList,u=t.type,l=0,d=a.length;l<d;l++)(i=new c.default).mediaType=u,i.qualityIndex=l,i.bitrate=a[l].bandwidth,i.width=a[l].width,i.height=a[l].height,i.scanType=a[l].scanType,r.push(i);return r}function setElementSize(){if(Y){var t=ee.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;B=Y.getClientWidth()*t,U=Y.getClientHeight()*t}}return t={initialize:function initialize(){$=Object(S.default)(te).create(),K=Object(E.default)(te).create({settings:ee}),(i=Object(a.default)(te).create({dashMetrics:J,customParametersModel:H,mediaPlayerModel:G,settings:ee})).initialize(),ne.on(C.default.QUALITY_CHANGE_RENDERED,_onQualityChangeRendered,t),ne.on(C.default.METRIC_ADDED,_onMetricAdded,t),ne.on(p.default.LOADING_PROGRESS,_onFragmentLoadProgress,t)},isPlayingAtTopQuality:function isPlayingAtTopQuality(t){var r=t?t.id:null,i=getQualityFor(u.default.AUDIO,r),a=getQualityFor(u.default.VIDEO,r);return i===getMaxAllowedIndexFor(u.default.AUDIO,r)&&a===getMaxAllowedIndexFor(u.default.VIDEO,r)},updateTopQualityIndex:function updateTopQualityIndex(t){var r=t.type,i=t.streamInfo.id,a=t.representationCount-1;return N[i]=N[i]||{},N[i][r]=a,a},clearDataForStream:function clearDataForStream(t){$&&$.clearForStream(t),O[t]&&delete O[t],W[t]&&delete W[t],L[t]&&delete L[t]},getThroughputHistory:function getThroughputHistory(){return K},getBitrateList:getBitrateList,getQualityForBitrate:getQualityForBitrate,getTopBitrateInfoFor:function getTopBitrateInfoFor(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r||(r=m.getActiveStreamInfo().id),t&&O&&O[r]&&O[r][t]){var i=getMaxAllowedIndexFor(t,r),a=getBitrateList(O[r][t].getMediaInfo());return a[i]?a[i]:null}return null},getMinAllowedIndexFor:getMinAllowedIndexFor,getMaxAllowedIndexFor:getMaxAllowedIndexFor,getInitialBitrateFor:function getInitialBitrateFor(t,r){if(function checkConfig(){if(!Q||!Q.hasOwnProperty("getSavedBitrateSettings"))throw new Error(u.default.MISSING_CONFIG_ERROR)}(),t===u.default.TEXT)return NaN;var i=Q.getSavedBitrateSettings(t),a=G.getAbrBitrateParameter("initialBitrate",t),l=ee.get().streaming.abr.initialRepresentationRatio[t];if(-1===a)if(l>-1){var c=O[r][t].getStreamInfo(),d=z.getAdaptationForType(c.index,t,c).Representation;if(Array.isArray(d))a=d[Math.max(Math.round(d.length*l)-1,0)].bandwidth/1e3;else a=0}else a=isNaN(i)?t===u.default.VIDEO?1e3:100:i;return a},getQualityFor:getQualityFor,getAbandonmentStateFor:function getAbandonmentStateFor(t,r){return L[t]&&L[t][r]?L[t][r].state:null},setPlaybackQuality:setPlaybackQuality,checkPlaybackQuality:function checkPlaybackQuality(r,a){try{if(!(r&&O&&O[a]&&O[a][r]))return!1;if($){var u=Y.getPlaybackQuality();u&&$.push(a,V,u)}if(!ee.get().streaming.abr.autoSwitchBitrate[r])return!1;var c=getQualityFor(r,a),d=Object(v.default)(te).create({abrController:t,switchHistory:W[a][r],droppedFramesHistory:$,streamProcessor:O[a][r],currentValue:c,useBufferOccupancyABR:q[r],useL2AABR:X[r],useLoLPABR:Z[r],videoModel:Y}),g=getMinAllowedIndexFor(r,a),p=getMaxAllowedIndexFor(r,a),m=i.getMaxQuality(d),M=m.quality;return void 0!==g&&(M>b.default.NO_CHANGE?M:c)<g&&(M=g),M>p&&(M=p),W[a][r].push({oldValue:c,newValue:M}),M>b.default.NO_CHANGE&&M!==c&&(L[a][r].state===l.default.ALLOW_LOAD||M>c)&&(_changeQuality(r,c,M,p,m.reason,a),!0)}catch(t){return!1}},setElementSize:setElementSize,setWindowResizeEventCalled:function setWindowResizeEventCalled(t){j=t},registerStreamType:function registerStreamType(t,r){var i=r.getStreamInfo().id;O[i]||(O[i]={}),W[i]||(W[i]={}),L[i]||(L[i]={}),W[i][t]=Object(M.default)(te).create(),O[i][t]=r,L[i][t]={},L[i][t].state=l.default.ALLOW_LOAD,function _initializeAbrStrategy(t){var r=ee.get().streaming.abr.ABRStrategy;r===u.default.ABR_STRATEGY_L2A?(q[t]=!1,Z[t]=!1,X[t]=!0):r===u.default.ABR_STRATEGY_LoLP?(q[t]=!1,Z[t]=!0,X[t]=!1):r===u.default.ABR_STRATEGY_BOLA?(q[t]=!0,Z[t]=!1,X[t]=!1):r===u.default.ABR_STRATEGY_THROUGHPUT?(q[t]=!1,Z[t]=!1,X[t]=!1):r===u.default.ABR_STRATEGY_DYNAMIC&&(q[t]=!(!q||!q[t])&&q[t],Z[t]=!1,X[t]=!1)}(t),t===u.default.VIDEO&&setElementSize()},unRegisterStreamType:function unRegisterStreamType(t,r){try{O[t]&&O[t][r]&&delete O[t][r],W[t]&&W[t][r]&&delete W[t][r],L[t]&&L[t][r]&&delete L[t][r]}catch(t){}},setConfig:function setConfig(t){t&&(t.streamController&&(m=t.streamController),t.domStorage&&(Q=t.domStorage),t.mediaPlayerModel&&(G=t.mediaPlayerModel),t.customParametersModel&&(H=t.customParametersModel),t.dashMetrics&&(J=t.dashMetrics),t.adapter&&(z=t.adapter),t.videoModel&&(Y=t.videoModel),t.settings&&(ee=t.settings))},reset:function reset(){resetInitialSettings(),ne.off(p.default.LOADING_PROGRESS,_onFragmentLoadProgress,t),ne.off(C.default.QUALITY_CHANGE_RENDERED,_onQualityChangeRendered,t),ne.off(C.default.METRIC_ADDED,_onMetricAdded,t),i&&i.reset()}},function setup(){r=re.getLogger(t),resetInitialSettings()}(),t}AbrController.__dashjs_factory_name="AbrController";var N=m.default.getSingletonFactory(AbrController);N.QUALITY_DEFAULT=0,m.default.updateSingletonFactory(AbrController.__dashjs_factory_name,N),r.default=N},"./src/streaming/controllers/BaseURLController.js":
/*!********************************************************!*\
    !*** ./src/streaming/controllers/BaseURLController.js ***!
    \********************************************************/
/*! exports provided: default */function srcStreamingControllersBaseURLControllerJs(t,r,i){i.r(r);var a=i(/*! ../models/BaseURLTreeModel */"./src/streaming/models/BaseURLTreeModel.js"),u=i(/*! ../utils/BaseURLSelector */"./src/streaming/utils/BaseURLSelector.js"),l=i(/*! ../utils/URLUtils */"./src/streaming/utils/URLUtils.js"),c=i(/*! ../../dash/vo/BaseURL */"./src/dash/vo/BaseURL.js"),d=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),g=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),p=i(/*! ../../core/events/Events */"./src/core/events/Events.js");function BaseURLController(){var t,r,i,d,m=this.context,v=Object(g.default)(m).getInstance(),b=Object(l.default)(m).getInstance();function onBlackListChanged(t){i.invalidateSelectedIndexes(t.entry)}return t={reset:function reset(){i.reset(),d.reset()},initialize:function initialize(t){i.setConfig({adapter:r}),function update(t){i.update(t),d.chooseSelector(r.getIsDVB(t))}(t)},resolve:function resolve(t){var r=i.getForPath(t).reduce((function(t,r){var i=d.select(r);return i?(b.isRelative(i.url)?t.url=b.resolve(i.url,t.url):(t.url=i.url,t.serviceLocation=i.serviceLocation),t.availabilityTimeOffset=i.availabilityTimeOffset,t.availabilityTimeComplete=i.availabilityTimeComplete,t):new c.default}),new c.default);if(!b.isRelative(r.url))return r},setConfig:function setConfig(t){t.baseURLTreeModel&&(i=t.baseURLTreeModel),t.baseURLSelector&&(d=t.baseURLSelector),t.adapter&&(r=t.adapter)}},function setup(){i=Object(a.default)(m).create(),d=Object(u.default)(m).create(),v.on(p.default.SERVICE_LOCATION_BLACKLIST_CHANGED,onBlackListChanged,t)}(),t}BaseURLController.__dashjs_factory_name="BaseURLController",r.default=d.default.getClassFactory(BaseURLController)},"./src/streaming/controllers/BlacklistController.js":
/*!**********************************************************!*\
    !*** ./src/streaming/controllers/BlacklistController.js ***!
    \**********************************************************/
/*! exports provided: default */function srcStreamingControllersBlacklistControllerJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/EventBus */"./src/core/EventBus.js");function BlackListController(t){var r;t=t||{};var i=[],a=Object(u.default)(this.context).getInstance(),l=t.updateEventName,c=t.addBlacklistEventName;function add(t){-1===i.indexOf(t)&&(i.push(t),a.trigger(l,{entry:t}))}function onAddBlackList(t){add(t.entry)}return r={add:add,contains:function contains(t){return!!(i.length&&t&&t.length)&&-1!==i.indexOf(t)},reset:function reset(){i=[]}},function setup(){c&&a.on(c,onAddBlackList,r)}(),r}BlackListController.__dashjs_factory_name="BlackListController",r.default=a.default.getClassFactory(BlackListController)},"./src/streaming/controllers/BufferController.js":
/*!*******************************************************!*\
    !*** ./src/streaming/controllers/BufferController.js ***!
    \*******************************************************/
/*! exports provided: default */function srcStreamingControllersBufferControllerJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),l=i(/*! ../models/FragmentModel */"./src/streaming/models/FragmentModel.js"),c=i(/*! ../SourceBufferSink */"./src/streaming/SourceBufferSink.js"),d=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),g=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),p=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),m=i(/*! ../../core/Debug */"./src/core/Debug.js"),v=i(/*! ../utils/InitCache */"./src/streaming/utils/InitCache.js"),b=i(/*! ../vo/DashJSError */"./src/streaming/vo/DashJSError.js"),M=i(/*! ../../core/errors/Errors */"./src/core/errors/Errors.js"),S=i(/*! ../vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),E=i(/*! ../../streaming/MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),I=.01,D="BufferController";function BufferController(t){t=t||{};var r,i,p,A,C,N,k,O,L,R,j,B,U,z,Y,G,H,Q,V=this.context,W=Object(d.default)(V).getInstance(),$=t.errHandler,K=t.fragmentModel,q=t.representationController,X=t.adapter,Z=t.textController,J=t.abrController,ee=t.playbackController,te=t.streamInfo,re=t.type,ne=t.settings;function setMediaSource(t){N=t}function _getRepresentationInfo(t){return X.convertRepresentationToRepresentationInfo(q.getRepresentationForQuality(t))}function _initializeSink(t,r,i){var u=_getRepresentationInfo(i);return r&&r[re]&&(re===a.default.VIDEO||re===a.default.AUDIO)?L.initializeForStreamSwitch(t,u,r[re]):L.initializeForFirstUse(te,t,u)}function _onInitFragmentLoaded(t){ne.get().streaming.cacheInitSegments&&(i.info("Init fragment finished loading saving to",re+"'s init cache"),Y.save(t.chunk)),i.debug("Append Init fragment",re," with representationId:",t.chunk.representationId," and quality:",t.chunk.quality,", data size:",t.chunk.bytes.byteLength),_appendToBuffer(t.chunk)}function _onMediaFragmentLoaded(t){_appendToBuffer(t.chunk,t.request)}function _appendToBuffer(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;L.append(t,r).then((function(t){_onAppended(t)})).catch((function(t){_onAppended(t)})),t.mediaInfo.type===a.default.VIDEO&&_triggerEvent(g.default.VIDEO_CHUNK_RECEIVED,{chunk:t})}function _showBufferRanges(t){if(t&&t.length>0)for(var r=0,a=t.length;r<a;r++)i.debug("Buffered range: "+t.start(r)+" - "+t.end(r)+", currentTime = ",ee.getTime())}function _onAppended(t){if(t.error)return 22===t.error.code&&function _handleQuotaExceededError(){if(z=!0,C=.8*getTotalBufferedTime(),i.warn("Quota exceeded, Critical Buffer: "+C),C>0){var t=Math.max(.2*C,1),r=C-t,a=Math.min(ne.get().streaming.buffer.bufferTimeAtTopQuality,.9*r),u=Math.min(ne.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*r),l={streaming:{buffer:{bufferToKeep:parseFloat(t.toFixed(5)),bufferTimeAtTopQuality:parseFloat(a.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(u.toFixed(5))}}};ne.update(l)}}(),void(22!==t.error.code&&hasEnoughSpaceToAppend()||(i.warn("Clearing playback buffer to overcome quota exceed situation"),_triggerEvent(g.default.QUOTA_EXCEEDED,{criticalBufferLevel:C,quotaExceededTime:t.chunk.start}),clearBuffers(getClearRanges())));if(L&&(_updateBufferLevel(),z=!1,(j=t.chunk)&&j.endFragment)){j&&!isNaN(j.index)&&(k=Math.max(j.index,k),_checkIfBufferingCompleted());var r=L.getAllBufferRanges();j.segmentType===S.HTTPRequest.MEDIA_SEGMENT_TYPE&&(_showBufferRanges(r),_onPlaybackProgression(),function _adjustSeekTarget(){if(isNaN(Q))return;if(re!==a.default.AUDIO&&re!==a.default.VIDEO)return void(Q=NaN);var t=ee.getTime(),r=getRangeAt(t,0),i=getRangeAt(Q,0);if(r&&i&&r.start===i.start)return void(Q=NaN);var u=q.getCurrentRepresentation().segmentDuration,l=getRangeAt(Q,u);if(!l)return;ne.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(t-Q)>u?Q<=l.end&&ee.seek(Math.max(Q,l.start),!1,!0):t<l.start&&ee.seek(l.start,!1,!0)}()),j&&_triggerEvent(g.default.BYTES_APPENDED_END_FRAGMENT,{quality:j.quality,startTime:j.start,index:j.index,bufferedRanges:r,segmentType:j.segmentType,mediaType:re})}}function pruneAllSafely(){return new Promise((function(t,r){var i=getAllRangesWithSafetyFactor();if(!i||0===i.length)return _onPlaybackProgression(),void t();clearBuffers(i).then((function(){t()})).catch((function(t){r(t)}))}))}function getAllRangesWithSafetyFactor(t){var r=[],i=L.getAllBufferRanges();if(!i||0===i.length)return r;if(!t&&0!==t||isNaN(t))r.push({start:i.start(0),end:i.end(i.length-1)+.5});else{var a=function _getRangeBehindForPruning(t,r){var i=ne.get().streaming.buffer.bufferToKeep,a=r.start(0);if(t-a>i){var u=Math.max(0,t-i),c=K.getRequests({state:l.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:I})[0];if(c&&(u=Math.min(c.startTime,u)),u>0)return{start:a,end:u}}return null}(t,i),u=function _getRangeAheadForPruning(t,r){var i=r.end(r.length-1)+.5,a=te.manifestInfo.duration>=ne.get().streaming.buffer.longFormContentDurationThreshold?ne.get().streaming.buffer.bufferTimeAtTopQualityLongForm:ne.get().streaming.buffer.bufferTimeAtTopQuality;if(i-t>a){var u=t+a,c=K.getRequests({state:l.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:I})[0];if(c&&(u=Math.max(c.startTime+c.duration,u)),u<i)return{start:u,end:i}}return null}(t,i);a&&r.push(a),u&&r.push(u)}return r}function _onPlaybackProgression(){(!H||re===a.default.TEXT&&Z.isTextEnabled())&&_updateBufferLevel()}function _onPlaybackStalled(){checkIfSufficientBuffer()}function _onPlaybackPlaying(){checkIfSufficientBuffer(),Q=NaN}function getRangeAt(t,r){var i,a,u=L.getAllBufferRanges(),l=0,c=0,d=null,g=null,p=0,m=isNaN(r)?.15:r;if(null!=u){for(a=0,i=u.length;a<i;a++)if(l=u.start(a),c=u.end(a),null===d)p=Math.abs(l-t),(t>=l&&t<c||p<=m)&&(d=l,g=c);else{if(!((p=l-g)<=m))break;g=c}if(null!==d)return{start:d,end:g}}return null}function _updateBufferLevel(){if(ee){var t=ne.get().streaming.gaps.jumpGaps&&!isNaN(ne.get().streaming.gaps.smallGapLimit)?ne.get().streaming.gaps.smallGapLimit:NaN;A=Math.max(function getBufferLength(t,r){var i;return ne.get().streaming.gaps.jumpGaps&&(r=ne.get().streaming.gaps.smallGapLimit),null===(i=getRangeAt(t,r))?0:i.end-t}(ee.getTime()||0,t),0),_triggerEvent(g.default.BUFFER_LEVEL_UPDATED,{mediaType:re,bufferLevel:A}),checkIfSufficientBuffer()}}function _checkIfBufferingCompleted(){var t=k>=O-1,r=ee.getTimeToStreamEnd(te)-A<=0;!t&&!r||p||(setIsBufferingCompleted(!0),i.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(te.id," and type ").concat(re)))}function checkIfSufficientBuffer(){re!==a.default.AUDIO&&re!==a.default.VIDEO||((!ee.getLowLatencyModeEnabled()&&A<ne.get().streaming.buffer.stallThreshold||0===A)&&!p?_notifyBufferStateChanged(u.default.BUFFER_EMPTY):(p||A>=ne.get().streaming.buffer.stallThreshold||ee.getLowLatencyModeEnabled()&&A>0)&&_notifyBufferStateChanged(u.default.BUFFER_LOADED))}function _notifyBufferStateChanged(t){R===t||t===u.default.BUFFER_EMPTY&&0===ee.getTime()||re===a.default.TEXT&&!Z.isTextEnabled()||(R=t,_triggerEvent(g.default.BUFFER_LEVEL_STATE_CHANGED,{state:t}),_triggerEvent(t===u.default.BUFFER_LOADED?g.default.BUFFER_LOADED:g.default.BUFFER_EMPTY),i.debug(t===u.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function getClearRanges(){var t=[],r=L.getAllBufferRanges();if(!r||0===r.length)return t;var i=ee.getTime(),a=Math.max(0,i-ne.get().streaming.buffer.bufferToKeep),u=K.getRequests({state:l.default.FRAGMENT_MODEL_EXECUTED,time:i,threshold:I})[0];if(u)a=Math.min(u.startTime,a);else if(0===i&&ee.getIsDynamic())return[];if(r.start(0)<=a){for(var c={start:0,end:a},d=0;d<r.length&&r.end(d)<=a;d++)c.end=r.end(d);c.start<c.end&&t.push(c)}return t}function clearBuffers(t){return new Promise((function(r,i){if(t&&L&&0!==t.length){var a=[];t.forEach((function(t){a.push(function _addClearRangeWithPromise(t){return new Promise((function(r,i){t.resolve=r,t.reject=i,G.push(t)}))}(t))})),U||clearNextRange(),Promise.all(a).then((function(){r()})).catch((function(t){i(t)}))}else r()}))}function clearNextRange(){try{if(0===G.length||!L)return i.debug("Nothing to prune, halt pruning"),G=[],void(U=!1);var t=L.getBuffer();if(!t||!t.buffered||0===t.buffered.length)return i.debug("SourceBuffer is empty (or does not exist), halt pruning"),G=[],void(U=!1);var r=G.shift();i.debug("".concat(re,": Removing buffer from: ").concat(r.start," to ").concat(r.end)),U=!0,ee.getTime()<r.end&&setIsBufferingCompleted(!1),L.remove(r).then((function(t){_onRemoved(t)})).catch((function(t){_onRemoved(t)}))}catch(t){U=!1}}function _onRemoved(t){i.debug("onRemoved buffer from:",t.from,"to",t.to),_showBufferRanges(L.getAllBufferRanges()),0===G.length&&(U=!1,_updateBufferLevel()),t.unintended&&(i.warn("Detected unintended removal from:",t.from,"to",t.to,"setting streamprocessor time to",t.from),_triggerEvent(g.default.SEEK_TARGET,{time:t.from})),U?clearNextRange():(H?H=!1:_updateBufferLevel(),_triggerEvent(g.default.BUFFER_CLEARED,{from:t.from,to:t.to,unintended:t.unintended,hasEnoughSpaceToAppend:hasEnoughSpaceToAppend(),quotaExceeded:z}))}function updateBufferTimestampOffset(t){return new Promise((function(r){t&&void 0!==t.MSETimeOffset&&L&&L.updateTimestampOffset?L.updateTimestampOffset(t.MSETimeOffset).then((function(){r()})).catch((function(){r()})):r()}))}function updateAppendWindow(){return L&&!p?L.updateAppendWindow(te):Promise.resolve()}function _onWallclockTimeUpdated(){++B*(ne.get().streaming.wallclockTimeUpdateInterval/1e3)>=ne.get().streaming.buffer.bufferPruningInterval&&(B=0,function pruneBuffer(){L&&re!==a.default.TEXT&&(p||clearBuffers(getClearRanges()))}())}function _onPlaybackRateChanged(){checkIfSufficientBuffer()}function setIsBufferingCompleted(t){p!==t&&((p=t)?_triggerEvent(g.default.BUFFERING_COMPLETED):O=Number.POSITIVE_INFINITY)}function getTotalBufferedTime(){try{var t,r,i=L.getAllBufferRanges(),a=0;if(!i)return a;for(r=0,t=i.length;r<t;r++)a+=i.end(r)-i.start(r);return a}catch(t){return 0}}function hasEnoughSpaceToAppend(){var t=getTotalBufferedTime();return isNaN(t)||t<C}function _triggerEvent(t,r){var i=r||{};W.trigger(t,i,{streamId:te.id,mediaType:re})}function resetInitialSettings(t,r){if(C=Number.POSITIVE_INFINITY,R=void 0,O=Number.POSITIVE_INFINITY,k=0,j=null,p=!1,U=!1,z=!1,A=0,B=0,G=[],Q=NaN,L){var i=L;L=null,t||r||i.abort().then((function(){i.reset(r),i=null}))}H=!1}return r={initialize:function initialize(t){setMediaSource(t),W.on(g.default.INIT_FRAGMENT_LOADED,_onInitFragmentLoaded,r),W.on(g.default.MEDIA_FRAGMENT_LOADED,_onMediaFragmentLoaded,r),W.on(g.default.WALLCLOCK_TIME_UPDATED,_onWallclockTimeUpdated,r),W.on(E.default.PLAYBACK_PLAYING,_onPlaybackPlaying,r),W.on(E.default.PLAYBACK_PROGRESS,_onPlaybackProgression,r),W.on(E.default.PLAYBACK_TIME_UPDATED,_onPlaybackProgression,r),W.on(E.default.PLAYBACK_RATE_CHANGED,_onPlaybackRateChanged,r),W.on(E.default.PLAYBACK_STALLED,_onPlaybackStalled,r)},getStreamId:function getStreamId(){return te.id},getType:function getType(){return re},getBufferControllerType:function getBufferControllerType(){return D},createBufferSink:function createBufferSink(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(a,u){if(Y&&t&&N){var l=J.getQualityFor(re,te.id);L=Object(c.default)(V).create({mediaSource:N,textController:Z,eventBus:W}),_initializeSink(t,r,l).then((function(){return updateBufferTimestampOffset(_getRepresentationInfo(l))})).then((function(){a(L)})).catch((function(t){i.fatal("Caught error on create SourceBuffer: "+t),$.error(new b.default(M.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,M.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+re)),u(t)}))}else a(null)}))},getBuffer:function getBuffer(){return L},getBufferLevel:function getBufferLevel(){return A},getRangeAt:getRangeAt,setMediaSource:setMediaSource,getMediaSource:function getMediaSource(){return N},appendInitSegmentFromCache:function appendInitSegmentFromCache(t){var r=Y.extract(te.id,t);return!!r&&(i.info("Append Init fragment",re," with representationId:",r.representationId," and quality:",r.quality,", data size:",r.bytes.byteLength),_appendToBuffer(r),!0)},getIsBufferingCompleted:function getIsBufferingCompleted(){return p},setIsBufferingCompleted:setIsBufferingCompleted,getIsPruningInProgress:function getIsPruningInProgress(){return U},reset:function reset(t,r){W.off(g.default.INIT_FRAGMENT_LOADED,_onInitFragmentLoaded,this),W.off(g.default.MEDIA_FRAGMENT_LOADED,_onMediaFragmentLoaded,this),W.off(g.default.WALLCLOCK_TIME_UPDATED,_onWallclockTimeUpdated,this),W.off(E.default.PLAYBACK_PLAYING,_onPlaybackPlaying,this),W.off(E.default.PLAYBACK_PROGRESS,_onPlaybackProgression,this),W.off(E.default.PLAYBACK_TIME_UPDATED,_onPlaybackProgression,this),W.off(E.default.PLAYBACK_RATE_CHANGED,_onPlaybackRateChanged,this),W.off(E.default.PLAYBACK_STALLED,_onPlaybackStalled,this),resetInitialSettings(t,r)},prepareForPlaybackSeek:function prepareForPlaybackSeek(){return p&&setIsBufferingCompleted(!1),L.abort()},prepareForReplacementTrackSwitch:function prepareForReplacementTrackSwitch(t){return new Promise((function(r,i){L.abort().then((function(){return updateAppendWindow()})).then((function(){return L.changeType(t)})).then((function(){return pruneAllSafely()})).then((function(){setIsBufferingCompleted(!1),r()})).catch((function(t){i(t)}))}))},prepareForNonReplacementTrackSwitch:function prepareForNonReplacementTrackSwitch(t){return new Promise((function(r,i){updateAppendWindow().then((function(){return L.changeType(t)})).then((function(){r()})).catch((function(t){i(t)}))}))},prepareForReplacementQualitySwitch:function prepareForReplacementQualitySwitch(){return new Promise((function(t,r){L.abort().then((function(){return updateAppendWindow()})).then((function(){return pruneAllSafely()})).then((function(){setIsBufferingCompleted(!1),t()})).catch((function(t){r(t)}))}))},updateAppendWindow:updateAppendWindow,getAllRangesWithSafetyFactor:getAllRangesWithSafetyFactor,getContinuousBufferTimeForTargetTime:function getContinuousBufferTimeForTargetTime(t){try{var r=t,i=L.getAllBufferRanges();if(!i||0===i.length)return NaN;for(var a=0;r===t&&a<i.length;){var u=i.start(a),l=i.end(a);r>=u&&r<=l&&(r=l),a+=1}return r===t?NaN:r}catch(t){}},clearBuffers:clearBuffers,pruneAllSafely:pruneAllSafely,updateBufferTimestampOffset:updateBufferTimestampOffset,setSeekTarget:function setSeekTarget(t){Q=t},segmentRequestingCompleted:function segmentRequestingCompleted(t){isNaN(t)||(O=t,_checkIfBufferingCompleted())}},function setup(){i=Object(m.default)(V).getInstance().getLogger(r),Y=Object(v.default)(V).getInstance(),resetInitialSettings()}(),r}BufferController.__dashjs_factory_name=D,r.default=p.default.getClassFactory(BufferController)},"./src/streaming/controllers/CatchupController.js":
/*!********************************************************!*\
    !*** ./src/streaming/controllers/CatchupController.js ***!
    \********************************************************/
/*! exports provided: default */function srcStreamingControllersCatchupControllerJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/Debug */"./src/core/Debug.js"),l=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),c=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),d=i(/*! ../MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),g=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),p=i(/*! ../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js");function CatchupController(){var t,r,i,a,m,v,b,M,S,E,I,D=this.context,A=Object(l.default)(D).getInstance();function _resetInitialSettings(){r=!1;var t="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",a=/safari/.test(t)&&!/chrome/.test(t);i=a?.25:.02}function _onPlaybackSeeked(){r=!1}function _onBufferLevelUpdated(t){if(t.streamId===v.getActiveStreamInfo().id&&E){var r=b.getLiveDelay();b.getBufferLevel()>r/2&&(E=!1)}}function _onBufferLevelStateChanged(t){t.streamId===v.getActiveStreamInfo().id&&(E=t.state===p.default.BUFFER_EMPTY)}function _onCatchupSettingUpdated(){M.getCatchupModeEnabled()||a.setPlaybackRate(1)}function _onPlaybackProgression(){b.getIsDynamic()&&M.getCatchupModeEnabled()&&M.getCatchupPlaybackRate()>0&&!b.isPaused()&&!b.isSeeking()&&function _shouldStartCatchUp(){try{var t=M.getLiveCatchupLatencyThreshold();return!(!b.getTime()>0||r||!isNaN(t)&&b.getCurrentLiveLatency()>=t)&&(_getCatchupMode()===c.default.LIVE_CATCHUP_MODE_LOLP?function _lolpNeedToCatchUpCustom(t,r){try{return Math.abs(_getLatencyDrift())>0||t<r}catch(t){return!1}}(b.getBufferLevel(),m.get().streaming.liveCatchup.playbackBufferMin):function _defaultNeedToCatchUp(){try{return Math.abs(_getLatencyDrift())>0}catch(t){return!1}}())}catch(t){return!1}}()&&function _startPlaybackCatchUp(){if(r)return;if(a){var t,u=a.getPlaybackRate(),l=M.getCatchupPlaybackRate(),d=b.getBufferLevel(),g=_getLatencyDrift(),p=M.getCatchupMaxDrift();if(!isNaN(p)&&p>0&&g>p)I.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),r=!0,function _seekToLive(){var t=v&&v.hasVideoTrack()?c.default.VIDEO:c.default.AUDIO,r=S.getCurrentDVRInfo(t),i=r?r.range:null;i&&!isNaN(i.end)&&b.seek(i.end-b.getLiveDelay(),!0,!1)}();else{var D=b.getCurrentLiveLatency(),A=b.getLiveDelay();if(_getCatchupMode()===c.default.LIVE_CATCHUP_MODE_LOLP)t=function _calculateNewPlaybackRateLolP(t,r,a,u,l,c){var d,g=t;if(l<u){var p=5*(l-u);d=1-g+2*g/(1+Math.pow(Math.E,-p)),I.debug("[LoL+ playback control_buffer-based] bufferLevel: "+l+", newRate: "+d)}else{var m=.02;if(Math.abs(r-a)<=m*a)d=1;else{var v=5*(r-a);d=1-g+2*g/(1+Math.pow(Math.E,-v))}I.debug("[LoL+ playback control_latency-based] latency: "+r+", newRate: "+d)}Math.abs(c-d)<=i&&(d=null);return d}(l,D,A,m.get().streaming.liveCatchup.playbackBufferMin,d,u);else t=function _calculateNewPlaybackRateDefault(t,r,a,u,l){if(E)return 1;var c=t,d=r-a,g=5*d,p=2*c/(1+Math.pow(Math.E,-g)),m=1-c+p;b.getPlaybackStalled()&&u<=a/2&&d>0&&(m=1);Math.abs(l-m)<=i&&(m=null);return m}(l,D,A,d,u);t&&(I.debug("[CatchupController]: Setting playback rate to ".concat(t)),a.setPlaybackRate(t))}}}()}function _getLatencyDrift(){return b.getCurrentLiveLatency()-b.getLiveDelay()}function _getCatchupMode(){var t=m.get().streaming.liveCatchup.playbackBufferMin;return m.get().streaming.liveCatchup.mode!==c.default.LIVE_CATCHUP_MODE_LOLP||null===t||isNaN(t)?c.default.LIVE_CATCHUP_MODE_DEFAULT:c.default.LIVE_CATCHUP_MODE_LOLP}return t={reset:function reset(){!function _unregisterEvents(){A.off(d.default.BUFFER_LEVEL_UPDATED,_onBufferLevelUpdated,t),A.off(d.default.BUFFER_LEVEL_STATE_CHANGED,_onBufferLevelStateChanged,t),A.off(d.default.PLAYBACK_PROGRESS,_onPlaybackProgression,t),A.off(d.default.PLAYBACK_TIME_UPDATED,_onPlaybackProgression,t),A.off(d.default.PLAYBACK_SEEKED,_onPlaybackProgression,t),A.off(g.default.SETTING_UPDATED_CATCHUP_ENABLED,_onCatchupSettingUpdated,t)}(),_resetInitialSettings(),a.setPlaybackRate(1,!0)},setConfig:function setConfig(t){t&&(t.settings&&(m=t.settings),t.videoModel&&(a=t.videoModel),t.streamController&&(v=t.streamController),t.playbackController&&(b=t.playbackController),t.dashMetrics&&(S=t.dashMetrics),t.mediaPlayerModel&&(M=t.mediaPlayerModel))},initialize:function initialize(){!function _registerEvents(){A.on(d.default.BUFFER_LEVEL_UPDATED,_onBufferLevelUpdated,t),A.on(d.default.BUFFER_LEVEL_STATE_CHANGED,_onBufferLevelStateChanged,t),A.on(d.default.PLAYBACK_PROGRESS,_onPlaybackProgression,t),A.on(d.default.PLAYBACK_TIME_UPDATED,_onPlaybackProgression,t),A.on(d.default.PLAYBACK_SEEKED,_onPlaybackSeeked,t),A.on(g.default.SETTING_UPDATED_CATCHUP_ENABLED,_onCatchupSettingUpdated,t)}()}},function setup(){I=Object(u.default)(D).getInstance().getLogger(t),_resetInitialSettings()}(),t}CatchupController.__dashjs_factory_name="CatchupController",r.default=a.default.getSingletonFactory(CatchupController)},"./src/streaming/controllers/EventController.js":
/*!******************************************************!*\
    !*** ./src/streaming/controllers/EventController.js ***!
    \******************************************************/
/*! exports provided: default */function srcStreamingControllersEventControllerJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/Debug */"./src/core/Debug.js"),l=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),c=i(/*! ../../streaming/MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),d=i(/*! ../net/XHRLoader */"./src/streaming/net/XHRLoader.js");function EventController(){var t,r,i,a,g,p,m,v,b,M,S,E="urn:mpeg:dash:event:2012",I="discarded",D="updated",A="added",C=this.context,N=Object(l.default)(C).getInstance();function checkConfig(){if(!m||!v)throw new Error("setConfig function has to be called previously")}function _resetInitialSettings(){S=!1,i={},a={},g=null,M=!1,p=Date.now()/1e3}function _stop(){try{null!==g&&S&&(clearInterval(g),g=null,S=!1,function _onStopEventController(){try{_triggerRemainingEvents(a),_triggerRemainingEvents(i)}catch(t){}}())}catch(t){throw t}}function _addOrUpdateEvent(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.eventStream.schemeIdUri,u=t.eventStream.value,l=t.id,c=I;r[a]||(r[a]=[]);var d=r[a].findIndex((function(t){return(!u||t.eventStream.value&&t.eventStream.value===u)&&t.id===l}));return-1===d?(r[a].push(t),c=A):i&&(r[a][d]=t,c=D),c}function _handleManifestReloadEvent(t){try{if(1==t.eventStream.value){var r,i=t.calculatedPresentationTime;r=4294967295==t.calculatedPresentationTime?NaN:t.calculatedPresentationTime+t.duration,N.trigger(c.default.MANIFEST_VALIDITY_CHANGED,{id:t.id,validUntil:i,newDuration:r,newManifestValidAfter:NaN},{mode:c.default.EVENT_MODE_ON_START})}}catch(t){}}function _onEventTimer(){try{if(!M){M=!0;var t=v.getTime(),r=t-p;r=p>0?Math.max(0,r):0,_triggerEvents(a,r,t),_triggerEvents(i,r,t),p=t,M=!1}}catch(t){M=!1}}function _triggerEvents(t,i,a){try{_iterateAndTriggerCallback(t,(function callback(u){if(void 0!==u){var l=isNaN(u.duration)?0:u.duration;u.calculatedPresentationTime<=a&&u.calculatedPresentationTime+i+l>=a?_startEvent(u,t,c.default.EVENT_MODE_ON_START):(function _eventHasExpired(t,r,i){try{return t-r>i}catch(t){return!1}}(a,l+i,u.calculatedPresentationTime)||function _eventIsInvalid(t){try{var r=t.eventStream.period.start+t.eventStream.period.duration;return t.calculatedPresentationTime>r}catch(t){return!1}}(u))&&(r.debug("Deleting event ".concat(u.id," as it is expired or invalid")),_removeEvent(t,u))}}))}catch(t){}}function _triggerRemainingEvents(t){try{var r=v.getTime();_iterateAndTriggerCallback(t,(function callback(i){var a=i.eventStream&&i.eventStream.period&&!isNaN(i.eventStream.period.duration)?i.eventStream.period.duration:NaN,u=i.eventStream&&i.eventStream.period&&!isNaN(i.eventStream.period.start)?i.eventStream.period.start:NaN;if(!isNaN(a)&&!isNaN(u)){var l=i.calculatedPresentationTime;Math.abs(l-r)<300&&_startEvent(i,t,c.default.EVENT_MODE_ON_START)}}))}catch(t){}}function _iterateAndTriggerCallback(t,r){try{if(t)for(var i=Object.keys(t),a=0;a<i.length;a++){t[i[a]].forEach((function(t){void 0!==t&&r(t)}))}}catch(t){}}function _startEvent(t,i,a){try{var u=v.getTime(),l=t.id;if(a===c.default.EVENT_MODE_ON_RECEIVE)return r.debug("Received event ".concat(l)),void N.trigger(t.eventStream.schemeIdUri,{event:t},{mode:a});t.eventStream.schemeIdUri===E&&1==t.eventStream.value?0===t.duration&&0===t.presentationTimeDelta||(r.debug("Starting manifest refresh event ".concat(l," at ").concat(u)),_removeEvent(i,t),function _refreshManifest(){try{checkConfig(),m.refreshManifest()}catch(t){}}()):"urn:mpeg:dash:event:callback:2015"===t.eventStream.schemeIdUri&&1==t.eventStream.value?(r.debug("Starting callback event ".concat(l," at ").concat(u)),_removeEvent(i,t),function _sendCallbackRequest(t){try{Object(d.default)(C).create({}).load({method:"get",url:t,request:{responseType:"arraybuffer"}})}catch(t){throw t}}(t.messageData)):(r.debug("Starting event ".concat(l," at ").concat(u)),_removeEvent(i,t),N.trigger(t.eventStream.schemeIdUri,{event:t},{mode:a}))}catch(t){}}function _removeEvent(t,r){var i=r.eventStream.schemeIdUri,a=r.eventStream.value,u=r.id;t[i]=t[i].filter((function(t){return a&&t.eventStream.value&&t.eventStream.value!==a||t.id!==u})),0===t[i].length&&delete t[i]}return t={addInlineEvents:function addInlineEvents(t){try{if(checkConfig(),t)for(var a=0;a<t.length;a++){var u=t[a],l=_addOrUpdateEvent(u,i,!0);l===A?(r.debug("Added inline event with id ".concat(u.id)),_startEvent(u,t,c.default.EVENT_MODE_ON_RECEIVE)):l===D&&r.debug("Updated inline event with id ".concat(u.id))}}catch(t){throw t}},addInbandEvents:function addInbandEvents(t){try{checkConfig();for(var i=0;i<t.length;i++){var u=t[i];_addOrUpdateEvent(u,a,!1)===A?(u.eventStream.schemeIdUri===E&&void 0===a[u.id]&&_handleManifestReloadEvent(u),r.debug("Added inband event with id "+u.id),_startEvent(u,t,c.default.EVENT_MODE_ON_RECEIVE)):r.debug("Inband event with scheme_id_uri ".concat(u.eventStream.schemeIdUri,", value ").concat(u.eventStream.value," and id ").concat(u.id," was ignored because it has been added before."))}_onEventTimer()}catch(t){throw t}},getInbandEvents:function getInbandEvents(){return a},getInlineEvents:function getInlineEvents(){return i},start:function start(){try{checkConfig(),r.debug("Start Event Controller");var t=b.get().streaming.eventControllerRefreshDelay;S||isNaN(t)||(S=!0,g=setInterval(_onEventTimer,t))}catch(t){throw t}},setConfig:function setConfig(t){try{if(!t)return;t.manifestUpdater&&(m=t.manifestUpdater),t.playbackController&&(v=t.playbackController),t.settings&&(b=t.settings)}catch(t){throw t}},reset:function reset(){_stop(),_resetInitialSettings()}},function _setup(){r=Object(u.default)(C).getInstance().getLogger(t),_resetInitialSettings()}(),t}EventController.__dashjs_factory_name="EventController",r.default=a.default.getSingletonFactory(EventController)},"./src/streaming/controllers/FragmentController.js":
/*!*********************************************************!*\
    !*** ./src/streaming/controllers/FragmentController.js ***!
    \*********************************************************/
/*! exports provided: default */function srcStreamingControllersFragmentControllerJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../vo/DataChunk */"./src/streaming/vo/DataChunk.js"),l=i(/*! ../models/FragmentModel */"./src/streaming/models/FragmentModel.js"),c=i(/*! ../FragmentLoader */"./src/streaming/FragmentLoader.js"),d=i(/*! ../utils/RequestModifier */"./src/streaming/utils/RequestModifier.js"),g=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),p=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),m=i(/*! ../MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),v=i(/*! ../../core/errors/Errors */"./src/core/errors/Errors.js"),b=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),M=i(/*! ../../core/Debug */"./src/core/Debug.js");function FragmentController(t){t=t||{};var r,i,b,S=this.context,E=Object(g.default)(S).getInstance(),I=t.errHandler,D=t.mediaPlayerModel,A=t.dashMetrics,C=Object(M.default)(S).getInstance(),N=t.streamInfo;function getStreamId(){return N.id}function resetInitialSettings(){for(var t in b)b[t].reset();b={}}function onFragmentLoadingCompleted(t){if(t.sender){var r=t.request,l=t.response,c=r.isInitializationRequest(),d=r.mediaInfo.streamInfo;if(t.error&&(r.mediaType===a.default.AUDIO||r.mediaType===a.default.VIDEO||r.mediaType===a.default.TEXT&&r.mediaInfo.isFragmented)&&E.trigger(p.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:t.request.serviceLocation}),l&&d){var g=function createDataChunk(t,r,i,a){var l=new u.default;return l.streamId=i,l.mediaInfo=r.mediaInfo,l.segmentType=r.type,l.start=r.startTime,l.duration=r.duration,l.end=l.start+l.duration,l.bytes=t,l.index=r.index,l.quality=r.quality,l.representationId=r.representationId,l.endFragment=a,l}(l,r,N.id,t.type!==p.default.FRAGMENT_LOADING_PROGRESS);E.trigger(c?p.default.INIT_FRAGMENT_LOADED:p.default.MEDIA_FRAGMENT_LOADED,{chunk:g,request:r},{streamId:d.id,mediaType:r.mediaType})}else i.warn("No "+r.mediaType+" bytes to push or stream is inactive.")}}return r={getStreamId:getStreamId,getModel:function getModel(r){var i=b[r];return i||(i=Object(l.default)(S).create({streamInfo:N,type:r,dashMetrics:A,fragmentLoader:Object(c.default)(S).create({dashMetrics:A,mediaPlayerModel:D,errHandler:I,requestModifier:Object(d.default)(S).getInstance(),settings:t.settings,boxParser:t.boxParser,eventBus:E,events:p.default,errors:v.default,dashConstants:t.dashConstants,urlUtils:t.urlUtils,streamId:getStreamId()}),debug:C,eventBus:E,events:p.default}),b[r]=i),i},reset:function reset(){E.off(m.default.FRAGMENT_LOADING_COMPLETED,onFragmentLoadingCompleted,this),E.off(m.default.FRAGMENT_LOADING_PROGRESS,onFragmentLoadingCompleted,this),resetInitialSettings()}},function setup(){i=C.getLogger(r),resetInitialSettings(),E.on(m.default.FRAGMENT_LOADING_COMPLETED,onFragmentLoadingCompleted,r),E.on(m.default.FRAGMENT_LOADING_PROGRESS,onFragmentLoadingCompleted,r)}(),r}FragmentController.__dashjs_factory_name="FragmentController",r.default=b.default.getClassFactory(FragmentController)},"./src/streaming/controllers/GapController.js":
/*!****************************************************!*\
    !*** ./src/streaming/controllers/GapController.js ***!
    \****************************************************/
/*! exports provided: default */function srcStreamingControllersGapControllerJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/Debug */"./src/core/Debug.js"),l=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),c=i(/*! ../../core/EventBus */"./src/core/EventBus.js");function GapController(){var t,r,i,a,d,g,p,m,v,b,M,S,E=this.context,I=Object(c.default)(E).getInstance();function reset(){!function _stopGapHandler(){S.debug("Stopping the gap controller"),d&&(clearInterval(d),d=null)}(),function _unregisterEvents(){I.off(l.default.WALLCLOCK_TIME_UPDATED,_onWallclockTimeUpdated,this),I.off(l.default.INITIAL_STREAM_SWITCH,_onInitialStreamSwitch,this),I.off(l.default.PLAYBACK_SEEKING,_onPlaybackSeeking,this),I.off(l.default.BUFFER_REPLACEMENT_STARTED,_onBufferReplacementStarted,t),I.off(l.default.TRACK_CHANGE_RENDERED,_onBufferReplacementEnded,t)}(),function resetInitialSettings(){d=null,g=NaN,a=0,b=null,M={}}()}function _onPlaybackSeeking(){b&&(clearTimeout(b),b=null)}function _onBufferReplacementStarted(t){try{if(t.streamId!==m.getActiveStreamInfo().id||!t.mediaType)return;t.streamId===m.getActiveStreamInfo().id&&(M[t.mediaType]=!0)}catch(t){S.error(t)}}function _onBufferReplacementEnded(t){t&&t.mediaType&&(M[t.mediaType]=!1)}function _onInitialStreamSwitch(){d||function _startGapHandler(){try{d||(S.debug("Starting the gap controller"),d=setInterval((function(){_shouldCheckForGaps()&&_jumpGap(p.getTime())}),100))}catch(t){}}()}function _onWallclockTimeUpdated(){if(_shouldCheckForGaps(i.get().streaming.gaps.enableSeekFix)&&++a>=10){var t=p.getTime();r===t?_jumpGap(t,!0):(r=t,g=NaN),a=0}}function _shouldCheckForGaps(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!m.getActiveStream())return!1;var r=Object.keys(M).some((function(t){return M[t]})),a=!!t&&_shouldIgnoreSeekingState();return!r&&i.get().streaming.gaps.jumpGaps&&m.getActiveStreamProcessors().length>0&&(!p.isSeeking()||a)&&!p.isPaused()&&!m.getIsStreamSwitchInProgress()&&!m.getHasMediaOrInitialisationError()}function _shouldIgnoreSeekingState(){var t=m.getActiveStream(),r=parseFloat((t.getStartTime()+t.getDuration()).toFixed(5));return p.getTime()+i.get().streaming.gaps.threshold>=r}function _getNextRangeIndex(t,r){try{if(!t||t.length<=1&&r>0)return NaN;for(var a=NaN,u=0;isNaN(a)&&u<t.length;){var l=u>0?t.end(u-1):0;r<t.start(u)&&l-r<i.get().streaming.gaps.threshold&&(a=u),u+=1}return a}catch(t){return null}}function _isTimeBuffered(t,r){for(var i=0,a=t.length;i<a;i++)if(r>=t.start(i)&&r<=t.end(i))return!0;return!1}function _jumpGap(t){var r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=i.get().streaming.gaps.enableStallFix,l=i.get().streaming.gaps.stallSeek,c=i.get().streaming.gaps.smallGapLimit,d=i.get().streaming.gaps.jumpLargeGaps,M=v.getBufferRange(),E=NaN,I=!1;if(r=_getNextRangeIndex(M,t),!isNaN(r)){var D=M.start(r),A=D-t;A>0&&(A<=c||d)&&(E=D)}var C=p.getTimeToStreamEnd();if(isNaN(E)&&a&&isFinite(C)&&!isNaN(C)&&C<c&&(E=parseFloat(p.getStreamEndTime().toFixed(5)),I=!0),u&&isNaN(E)&&a&&isNaN(r)&&_isTimeBuffered(M,t)&&(0===l?(S.warn("Toggle play pause to break stall"),v.pause(),v.play()):(S.warn("Jumping ".concat(l,"s to break stall")),E=t+l)),E>0&&g!==E&&E>t&&!b){var N=E-t;if(I){var k=m.getStreamForTime(E),O=k&&!!k.getPreloaded();S.warn("Jumping to end of stream because of gap from ".concat(t," to ").concat(E,". Gap duration: ").concat(N)),p.seek(E,!0,O)}else{var L=p.getIsDynamic(),R=r>0?M.end(r-1):t,j=L?1e3*Math.max(0,N-.1):0;b=window.setTimeout((function(){p.seek(E,!0,!0),S.warn("Jumping gap occuring in period ".concat(m.getActiveStream().getStreamId()," starting at ").concat(R," and ending at ").concat(E,". Jumping by: ").concat(E-R)),b=null}),j)}g=E}}return t={reset:reset,setConfig:function setConfig(t){t&&(t.settings&&(i=t.settings),t.playbackController&&(p=t.playbackController),t.streamController&&(m=t.streamController),t.videoModel&&(v=t.videoModel))},initialize:function initialize(){!function _registerEvents(){I.on(l.default.WALLCLOCK_TIME_UPDATED,_onWallclockTimeUpdated,this),I.on(l.default.INITIAL_STREAM_SWITCH,_onInitialStreamSwitch,this),I.on(l.default.PLAYBACK_SEEKING,_onPlaybackSeeking,this),I.on(l.default.BUFFER_REPLACEMENT_STARTED,_onBufferReplacementStarted,t),I.on(l.default.TRACK_CHANGE_RENDERED,_onBufferReplacementEnded,t)}()}},function setup(){S=Object(u.default)(E).getInstance().getLogger(t),reset()}(),t}GapController.__dashjs_factory_name="GapController",r.default=a.default.getSingletonFactory(GapController)},"./src/streaming/controllers/MediaController.js":
/*!******************************************************!*\
    !*** ./src/streaming/controllers/MediaController.js ***!
    \******************************************************/
/*! exports provided: default */function srcStreamingControllersMediaControllerJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),l=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),c=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),d=i(/*! ../../core/Debug */"./src/core/Debug.js");function MediaController(){var t,r,i,c,g,p,m,v,b=this.context,M=Object(l.default)(b).getInstance();function getTracksFor(t,r){return t&&i[r]&&i[r][t]?i[r][t].list:[]}function getCurrentTrackFor(t,r){return t&&i[r]&&i[r][t]?i[r][t].current:null}function setTrack(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&t.streamInfo){var l=t.type,d=t.streamInfo,g=d.id,m=getCurrentTrackFor(l,g);if(i[g]&&i[g][l]&&!isTracksEqual(t,m)&&(i[g][l].current=t,i[g][l].current&&(l!==a.default.TEXT||l===a.default.TEXT&&t.isFragmented)&&M.trigger(u.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:m,newMediaInfo:t,switchMode:c.get().streaming.trackSwitchMode[l]},{streamId:g}),!r)){var b=extractSettings(t);if(!b||!i[g][l].storeLastSettings)return;b.roles&&(b.role=b.roles[0],delete b.roles),b.accessibility&&(b.accessibility=b.accessibility[0]),b.audioChannelConfiguration&&(b.audioChannelConfiguration=b.audioChannelConfiguration[0]),p[l]=b,v.setSavedMediaSettings(l,b)}}}function setInitialSettings(t,r){t&&r&&(g[t]=r)}function getInitialSettings(t){return t?g[t]:null}function isTracksEqual(t,r){if(!t&&!r)return!0;if(!t||!r)return!1;var i=t.id===r.id,a=t.viewpoint===r.viewpoint,u=t.lang===r.lang,l=t.codec===r.codec,c=t.roles.toString()===r.roles.toString(),d=t.accessibility.toString()===r.accessibility.toString(),g=t.audioChannelConfiguration.toString()===r.audioChannelConfiguration.toString();return i&&l&&a&&u&&c&&d&&g}function reset(){i={},p={},function resetInitialSettings(){g={audio:null,video:null,text:null}}()}function extractSettings(t){var r={lang:t.lang,viewpoint:t.viewpoint,roles:t.roles,accessibility:t.accessibility,audioChannelConfiguration:t.audioChannelConfiguration};return r.lang||r.viewpoint||r.role&&r.role.length>0||r.accessibility&&r.accessibility.length>0||r.audioChannelConfiguration&&r.audioChannelConfiguration.length>0?r:null}function matchSettings(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=!t.lang||r.lang.match(t.lang),l=void 0===t.index||null===t.index||r.index===t.index,c=!t.viewpoint||t.viewpoint===r.viewpoint,d=!t.role||!!r.roles.filter((function(r){return r===t.role}))[0],g=!t.accessibility||!!r.accessibility.filter((function(r){return r===t.accessibility}))[0],p=!t.audioChannelConfiguration||!!r.audioChannelConfiguration.filter((function(r){return r===t.audioChannelConfiguration}))[0];return u&&l&&c&&(d||r.type===a.default.AUDIO&&i)&&g&&p}function getTracksWithHighestBitrate(t){var r,i=0,a=[];return t.forEach((function(t){(r=Math.max.apply(Math,t.bitrateList.map((function(t){return t.bandwidth}))))>i?(i=r,a=[t]):r===i&&a.push(t)})),a}function getTracksWithHighestEfficiency(t){var r,i=1/0,a=[];return t.forEach((function(t){var u=t.bitrateList.reduce((function(t,r){var i=Math.max(1,r.width*r.height);return t+r.bandwidth/i}),0);(r=u/t.bitrateList.length)<i?(i=r,a=[t]):r===i&&a.push(t)})),a}function getTracksWithWidestRange(t){var r,i=0,a=[];return t.forEach((function(t){(r=t.representationCount)>i?(i=r,a=[t]):r===i&&a.push(t)})),a}function selectInitialTrack(t,i){if(t===a.default.TEXT)return i[0];var u,l=c.get().streaming.selectionModeForInitialTrack,d=m.getCustomInitialTrackSelectionFunction();if(d&&"function"==typeof d)u=d(i);else switch(l){case a.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:u=function _trackSelectionModeHighestSelectionPriority(t){var r=function getTracksWithHighestSelectionPriority(t){var r=0,i=[];return t.forEach((function(t){isNaN(t.selectionPriority)||(t.selectionPriority>r?(r=t.selectionPriority,i=[t]):t.selectionPriority===r&&i.push(t))})),i}(t);r.length>1&&(r=getTracksWithHighestBitrate(r));r.length>1&&(r=getTracksWithWidestRange(r));return r}(i);break;case a.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:u=function _trackSelectionModeHighestBitrate(t){var r=getTracksWithHighestBitrate(t);r.length>1&&(r=getTracksWithWidestRange(r));return r}(i);break;case a.default.TRACK_SELECTION_MODE_FIRST_TRACK:u=_trackSelectionModeFirstTrack(i);break;case a.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:u=function _trackSelectionModeHighestEfficiency(t){var r=getTracksWithHighestEfficiency(t);r.length>1&&(r=getTracksWithHighestBitrate(r));return r}(i);break;case a.default.TRACK_SELECTION_MODE_WIDEST_RANGE:u=function _trackSelectionModeWidestRange(t){var r=getTracksWithWidestRange(t);r.length>1&&(r=getTracksWithHighestBitrate(t));return r}(i);break;default:r.warn("Track selection mode ".concat(l," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),u=_trackSelectionModeFirstTrack(i)}return u.length>0?u[0]:i[0]}function _trackSelectionModeFirstTrack(t){return t[0]}return t={setInitialMediaSettingsForType:function setInitialMediaSettingsForType(t,r){var i=p[t]||getInitialSettings(t),a=getTracksFor(t,r.id),u=[];i||(i=v.getSavedMediaSettings(t),setInitialSettings(t,i)),a&&0!==a.length&&(i&&a.forEach((function(r){matchSettings(i,r,!!p[t])&&u.push(r)})),0===u.length?setTrack(selectInitialTrack(t,a),!0):u.length>1?setTrack(selectInitialTrack(t,u,p[t])):setTrack(u[0]))},addTrack:function addTrack(t){if(t){var r=t.type;if(function _isMultiTrackSupportedByType(t){return t===a.default.AUDIO||t===a.default.VIDEO||t===a.default.TEXT||t===a.default.IMAGE}(r)){var u=t.streamInfo.id;i[u]||(i[u]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var l=i[u][r].list,c=0,d=l.length;c<d;++c)if(isTracksEqual(l[c],t))return;l.push(t)}}},getTracksFor:getTracksFor,getCurrentTrackFor:getCurrentTrackFor,isCurrentTrack:function isCurrentTrack(t){if(!t)return!1;var r=t.type,a=t.streamInfo.id;return i[a]&&i[a][r]&&isTracksEqual(i[a][r].current,t)},setTrack:setTrack,selectInitialTrack:selectInitialTrack,setInitialSettings:setInitialSettings,getInitialSettings:getInitialSettings,getTracksWithHighestBitrate:getTracksWithHighestBitrate,getTracksWithHighestEfficiency:getTracksWithHighestEfficiency,getTracksWithWidestRange:getTracksWithWidestRange,isTracksEqual:isTracksEqual,matchSettings:matchSettings,saveTextSettingsDisabled:function saveTextSettingsDisabled(){v.setSavedMediaSettings(a.default.TEXT,null)},setConfig:function setConfig(t){t&&(t.domStorage&&(v=t.domStorage),t.settings&&(c=t.settings),t.customParametersModel&&(m=t.customParametersModel))},reset:reset},function setup(){r=Object(d.default)(b).getInstance().getLogger(t),reset()}(),t}MediaController.__dashjs_factory_name="MediaController";var g=c.default.getSingletonFactory(MediaController);c.default.updateSingletonFactory(MediaController.__dashjs_factory_name,g),r.default=g},"./src/streaming/controllers/MediaSourceController.js":
/*!************************************************************!*\
    !*** ./src/streaming/controllers/MediaSourceController.js ***!
    \************************************************************/
/*! exports provided: default */function srcStreamingControllersMediaSourceControllerJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/Debug */"./src/core/Debug.js");function MediaSourceController(){var t,r,i,a=this.context;return t={createMediaSource:function createMediaSource(){var t="WebKitMediaSource"in window;return"MediaSource"in window?r=new MediaSource:t&&(r=new WebKitMediaSource),r},attachMediaSource:function attachMediaSource(t){var i=window.URL.createObjectURL(r);return t.setSource(i),i},detachMediaSource:function detachMediaSource(t){t.setSource(null)},setDuration:function setDuration(t){r&&"open"===r.readyState&&(null===t&&isNaN(t)||r.duration!==t&&(!function isBufferUpdating(t){for(var r=t.sourceBuffers,i=0;i<r.length;i++)if(r[i].updating)return!0;return!1}(r)?(i.info("Set MediaSource duration:"+t),r.duration=t):setTimeout(setDuration.bind(null,t),50)))},setSeekable:function setSeekable(t,i){r&&"function"==typeof r.setLiveSeekableRange&&"function"==typeof r.clearLiveSeekableRange&&"open"===r.readyState&&t>=0&&t<i&&(r.clearLiveSeekableRange(),r.setLiveSeekableRange(t,i))},signalEndOfStream:function signalEndOfStream(t){if(t&&"open"===t.readyState){for(var r=t.sourceBuffers,a=0;a<r.length;a++){if(r[a].updating)return;if(0===r[a].buffered.length)return}i.info("call to mediaSource endOfStream"),t.endOfStream()}}},function setup(){i=Object(u.default)(a).getInstance().getLogger(t)}(),t}MediaSourceController.__dashjs_factory_name="MediaSourceController",r.default=a.default.getSingletonFactory(MediaSourceController)},"./src/streaming/controllers/PlaybackController.js":
/*!*********************************************************!*\
    !*** ./src/streaming/controllers/PlaybackController.js ***!
    \*********************************************************/
/*! exports provided: default */function srcStreamingControllersPlaybackControllerJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),l=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),c=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),d=i(/*! ../../core/Debug */"./src/core/Debug.js"),g=i(/*! ../../streaming/MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),p=i(/*! ../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js");function PlaybackController(){var t,r,i,c,m,v,b,M,S,E,I,D,A,C,N,k,O,L,R,j,B,U,z,Y=this.context,G=Object(u.default)(Y).getInstance();function reset(){pause(),A=!1,E=0,N=0,B=!1,k=!0,O=!1,U=!1,L=NaN,b&&(G.off(l.default.DATA_UPDATE_COMPLETED,_onDataUpdateCompleted,t),G.off(l.default.LOADING_PROGRESS,_onFragmentLoadProgress,t),G.off(l.default.MANIFEST_UPDATED,_onManifestUpdated,t),G.off(l.default.STREAMS_COMPOSED,_onStreamsComposed,t),G.off(g.default.PLAYBACK_ENDED,_onPlaybackEnded,t),G.off(g.default.STREAM_INITIALIZING,_onStreamInitializing,t),G.off(g.default.REPRESENTATION_SWITCH,_onRepresentationSwitch,t),G.off(g.default.BUFFER_LEVEL_STATE_CHANGED,_onBufferLevelStateChanged,t),stopUpdatingWallclockTime(),function removeAllListeners(){b.removeEventListener("canplay",_onCanPlay),b.removeEventListener("canplaythrough",_onCanPlayThrough),b.removeEventListener("play",_onPlaybackStart),b.removeEventListener("waiting",_onPlaybackWaiting),b.removeEventListener("playing",_onPlaybackPlaying),b.removeEventListener("pause",_onPlaybackPaused),b.removeEventListener("error",_onPlaybackError),b.removeEventListener("seeking",_onPlaybackSeeking),b.removeEventListener("seeked",_onPlaybackSeeked),b.removeEventListener("timeupdate",_onPlaybackTimeUpdated),b.removeEventListener("progress",_onPlaybackProgress),b.removeEventListener("ratechange",_onPlaybackRateChanged),b.removeEventListener("loadedmetadata",_onPlaybackMetaDataLoaded),b.removeEventListener("loadeddata",_onPlaybackLoadedData),b.removeEventListener("stalled",onPlaybackStalled),b.removeEventListener("ended",_onNativePlaybackEnded)}()),S=null,b=null,I=null,D=null}function getTimeToStreamEnd(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return parseFloat((getStreamEndTime(t)-getTime()).toFixed(5))}function getStreamEndTime(t){var r=t||I;return r.start+r.duration}function play(){I&&b&&b.getElement()?b.play():A=!0}function pause(){I&&b&&b.pause()}function seek(t,i,a){I&&b&&(t!==(isNaN(L)?b.getTime():L)&&((R=!0===a)||(L=t),r.info("Requesting seek to time: "+t+(R?" (internal)":"")),b.setCurrentTime(t,i)))}function getTime(){return I&&b?b.getTime():null}function isPaused(){return I&&b?b.isPaused():null}function isSeeking(){return I&&b?b.isSeeking():null}function isStalled(){return I&&b?b.isStalled():null}function getPlaybackRate(){return I&&b?b.getPlaybackRate():null}function getEnded(){return I&&b?b.getEnded():null}function getIsDynamic(){return D}function updateCurrentTime(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!isPaused()&&D&&0!==b.getReadyState()&&!isSeeking()&&!B){t||(t=i.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO);var u=getTime(),l=_getAdjustedPresentationTime(u,t),c=!isNaN(l)&&l!==u;c&&!isSeeking()&&(isStalled()||j||1===b.getReadyState())&&(r.debug("UpdateCurrentTime: Seek to actual time: ".concat(l," from currentTime: ").concat(u)),seek(l,!1,!1))}}function _getAdjustedPresentationTime(t,r){var i=m.getCurrentDVRInfo(r),a=i?i.range:null;return a?t>a.end?Math.max(a.end-E,a.start):t>0&&t+.25<a.start&&Math.abs(t-a.start)<31536e4?O?Math.max(a.end-E,a.start):a.start:t:NaN}function startUpdatingWallclockTime(){null===S&&(S=setInterval((function(){!function _onWallclockTime(){G.trigger(l.default.WALLCLOCK_TIME_UPDATED,{isDynamic:D,time:new Date}),getIsDynamic()&&(i.addDVRMetric(),isPaused()?function _updateLivePlaybackTime(){var t=Date.now();(!C||t>C+500)&&(C=t,_onPlaybackTimeUpdated())}():updateCurrentTime())}()}),z.get().streaming.wallclockTimeUpdateInterval))}function stopUpdatingWallclockTime(){clearInterval(S),S=null}function _onDataUpdateCompleted(t){var r=v.convertRepresentationToRepresentationInfo(t.currentRepresentation),i=r?r.mediaInfo.streamInfo:null;null!==i&&I.id===i.id&&(I=i)}function _onCanPlay(){G.trigger(l.default.CAN_PLAY)}function _onCanPlayThrough(){G.trigger(l.default.CAN_PLAY_THROUGH)}function _onBufferLevelStateChanged(t){t.streamId===i.getActiveStreamInfo().id&&(j=t.state===p.default.BUFFER_EMPTY,z.get().streaming.buffer.setStallState&&b.setStallState(t.mediaType,t.state===p.default.BUFFER_EMPTY))}function _onPlaybackStart(){r.info("Native video element event: play"),updateCurrentTime(),startUpdatingWallclockTime(),G.trigger(l.default.PLAYBACK_STARTED,{startTime:getTime()})}function _onPlaybackWaiting(){r.info("Native video element event: waiting"),G.trigger(l.default.PLAYBACK_WAITING,{playingTime:getTime()})}function _onPlaybackPlaying(){r.info("Native video element event: playing"),R=!1,G.trigger(l.default.PLAYBACK_PLAYING,{playingTime:getTime()})}function _onPlaybackPaused(){r.info("Native video element event: pause"),G.trigger(l.default.PLAYBACK_PAUSED,{ended:getEnded()})}function _onPlaybackSeeking(){if(!R){var t=getTime();isNaN(L)||L===t||(t=L),L=NaN,r.info("Seeking to: "+t),startUpdatingWallclockTime(),G.trigger(l.default.PLAYBACK_SEEKING,{seekTime:t,streamId:I.id})}}function _onPlaybackSeeked(){r.info("Native video element event: seeked"),R=!1,G.trigger(l.default.PLAYBACK_SEEKED)}function _onPlaybackTimeUpdated(){I&&G.trigger(l.default.PLAYBACK_TIME_UPDATED,{timeToEnd:getTimeToStreamEnd(),time:getTime(),streamId:I.id})}function _onPlaybackProgress(){G.trigger(l.default.PLAYBACK_PROGRESS,{streamId:I.id})}function _onPlaybackRateChanged(){var t=getPlaybackRate();r.info("Native video element event: ratechange: ",t),G.trigger(l.default.PLAYBACK_RATE_CHANGED,{playbackRate:t})}function _onPlaybackMetaDataLoaded(){r.info("Native video element event: loadedmetadata"),G.trigger(l.default.PLAYBACK_METADATA_LOADED),startUpdatingWallclockTime()}function _onPlaybackLoadedData(){r.info("Native video element event: loadeddata"),G.trigger(l.default.PLAYBACK_LOADED_DATA)}function _onNativePlaybackEnded(){r.info("Native video element event: ended"),pause(),stopUpdatingWallclockTime();var t=i?i.getActiveStreamInfo():null;t&&G.trigger(l.default.PLAYBACK_ENDED,{isLast:t.isLast})}function _onPlaybackEnded(t){if(S&&t.isLast){r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var i=t.seekTime?t.seekTime:getStreamEndTime();b.setCurrentTime(i),pause(),stopUpdatingWallclockTime()}}function _onPlaybackError(t){var r=t.target||t.srcElement;G.trigger(l.default.PLAYBACK_ERROR,{error:r.error})}function _onFragmentLoadProgress(t){if(!1===t.stream&&O&&!isNaN(t.request.duration)){var i=1.2*t.request.duration;i>E&&(r.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",i.toFixed(2)),E=i)}}function onPlaybackStalled(t){G.trigger(l.default.PLAYBACK_STALLED,{e:t})}function _onStreamInitializing(t){!function _checkEnableLowLatency(t){t&&t.supplementalProperties&&"true"===t.supplementalProperties[a.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&(r.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),O=!0)}(t.mediaInfo)}function _onRepresentationSwitch(t){var r=i.getActiveStreamInfo();t&&r&&t.currentRepresentation&&t.streamId&&t.streamId===r.id&&t.mediaType&&(t.mediaType===a.default.VIDEO||t.mediaType===a.default.AUDIO)&&(k=t.currentRepresentation.availabilityTimeComplete,(O=!k)&&!U&&(U=!0))}function _onManifestUpdated(){B=!0}function _onStreamsComposed(){B=!1}return t={initialize:function initialize(r,i){I=r,!0!==i&&function _initializeForFirstStream(){(function addAllListeners(){b.addEventListener("canplay",_onCanPlay),b.addEventListener("canplaythrough",_onCanPlayThrough),b.addEventListener("play",_onPlaybackStart),b.addEventListener("waiting",_onPlaybackWaiting),b.addEventListener("playing",_onPlaybackPlaying),b.addEventListener("pause",_onPlaybackPaused),b.addEventListener("error",_onPlaybackError),b.addEventListener("seeking",_onPlaybackSeeking),b.addEventListener("seeked",_onPlaybackSeeked),b.addEventListener("timeupdate",_onPlaybackTimeUpdated),b.addEventListener("progress",_onPlaybackProgress),b.addEventListener("ratechange",_onPlaybackRateChanged),b.addEventListener("loadedmetadata",_onPlaybackMetaDataLoaded),b.addEventListener("loadeddata",_onPlaybackLoadedData),b.addEventListener("stalled",onPlaybackStalled),b.addEventListener("ended",_onNativePlaybackEnded)})(),D=I.manifestInfo.isDynamic,j=!1,R=!1,G.on(l.default.DATA_UPDATE_COMPLETED,_onDataUpdateCompleted,t),G.on(l.default.LOADING_PROGRESS,_onFragmentLoadProgress,t),G.on(l.default.MANIFEST_UPDATED,_onManifestUpdated,t),G.on(l.default.STREAMS_COMPOSED,_onStreamsComposed,t),G.on(g.default.PLAYBACK_ENDED,_onPlaybackEnded,t,{priority:u.default.EVENT_PRIORITY_HIGH}),G.on(g.default.STREAM_INITIALIZING,_onStreamInitializing,t),G.on(g.default.REPRESENTATION_SWITCH,_onRepresentationSwitch,t),G.on(g.default.BUFFER_LEVEL_STATE_CHANGED,_onBufferLevelStateChanged,t),A&&(A=!1,play())}()},setConfig:function setConfig(t){t&&(t.streamController&&(i=t.streamController),t.serviceDescriptionController&&(c=t.serviceDescriptionController),t.dashMetrics&&(m=t.dashMetrics),t.adapter&&(v=t.adapter),t.videoModel&&(b=t.videoModel),t.timelineConverter&&(M=t.timelineConverter),t.settings&&(z=t.settings))},getTimeToStreamEnd:getTimeToStreamEnd,getBufferLevel:function getBufferLevel(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=null;return i.getActiveStreamProcessors().forEach((function(i){if(!t||0===t.length||-1===t.indexOf(i.getType())){var a=i.getBufferLevel();r=null===r?a:Math.min(r,a)}})),r},getPlaybackStalled:function getPlaybackStalled(){return j},getTime:getTime,getLowLatencyModeEnabled:function getLowLatencyModeEnabled(){return O},getInitialCatchupModeActivated:function getInitialCatchupModeActivated(){return U},getIsManifestUpdateInProgress:function getIsManifestUpdateInProgress(){return B},getPlaybackRate:getPlaybackRate,getPlayedRanges:function getPlayedRanges(){return I&&b?b.getPlayedRanges():null},getEnded:getEnded,getIsDynamic:getIsDynamic,getStreamController:function getStreamController(){return i},computeAndSetLiveDelay:function computeAndSetLiveDelay(t,r){var i,a,u,l=!isNaN(t)&&isFinite(t)?t:NaN,d=v.getSuggestedPresentationDelay(),g=c.getServiceDescriptionSettings();return i=isNaN(z.get().streaming.delay.liveDelay)?null===z.get().streaming.delay.liveDelayFragmentCount||isNaN(z.get().streaming.delay.liveDelayFragmentCount)||isNaN(l)?g&&!isNaN(g.liveDelay)&&g.liveDelay>0?g.liveDelay:!0===z.get().streaming.delay.useSuggestedPresentationDelay&&null!==d&&!isNaN(d)&&d>0?d:isNaN(l)?r&&!isNaN(r.minBufferTime)?4*r.minBufferTime:4*I.manifestInfo.minBufferTime:4*l:l*z.get().streaming.delay.liveDelayFragmentCount:z.get().streaming.delay.liveDelay,null!==(u=v.getAvailabilityStartTime())&&(N=u),a=r&&r.dvrWindowSize>0?Math.min(i,r.dvrWindowSize):i,E=a,a},getLiveDelay:function getLiveDelay(){return E},getCurrentLiveLatency:function getCurrentLiveLatency(){if(!D||isNaN(N))return NaN;var t=getTime();if(isNaN(t)||0===t)return 0;var r=(new Date).getTime()+1e3*M.getClientTimeOffset();return Math.max(((r-N-1e3*t)/1e3).toFixed(3),0)},play:play,isPaused:isPaused,isStalled:isStalled,pause:pause,isSeeking:isSeeking,getStreamEndTime:getStreamEndTime,seek:seek,reset:reset,updateCurrentTime:updateCurrentTime,getAvailabilityStartTime:function getAvailabilityStartTime(){return N}},function setup(){r=Object(d.default)(Y).getInstance().getLogger(t),reset()}(),t}PlaybackController.__dashjs_factory_name="PlaybackController",r.default=c.default.getSingletonFactory(PlaybackController)},"./src/streaming/controllers/ScheduleController.js":
/*!*********************************************************!*\
    !*** ./src/streaming/controllers/ScheduleController.js ***!
    \*********************************************************/
/*! exports provided: default */function srcStreamingControllersScheduleControllerJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../models/FragmentModel */"./src/streaming/models/FragmentModel.js"),l=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),c=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),d=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),g=i(/*! ../../core/Debug */"./src/core/Debug.js"),p=i(/*! ../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),m=i(/*! ../MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js");function ScheduleController(t){t=t||{};var r,i,d,v,b,M,S,E,I,D,A,C,N,k=this.context,O=Object(l.default)(k).getInstance(),L=t.dashMetrics,R=t.mediaPlayerModel,j=t.fragmentModel,B=t.abrController,U=t.playbackController,z=t.textController,Y=t.type,G=t.bufferController,H=t.settings;function startScheduleTimer(t){if(!G.getIsBufferingCompleted()){clearScheduleTimer();var r=isNaN(t)?0:t;M=setTimeout(schedule,r)}}function clearScheduleTimer(){M&&(clearTimeout(M),M=null)}function schedule(){try{if(function _shouldClearScheduleTimer(){try{return Y===a.default.TEXT&&!z.isTextEnabled()||U.isPaused()&&(!U.getStreamController().getInitialPlayback()||!U.getStreamController().getAutoPlay())&&!H.get().streaming.scheduling.scheduleWhilePaused}catch(t){return!1}}())return void clearScheduleTimer();if(function _shouldScheduleNextRequest(){try{return v&&(isNaN(D)||A||function hasTopQualityChanged(){var t=i.id,r=B.getMaxAllowedIndexFor(Y,t);return!(!isNaN(I)&&I==r||(d.info("Top quality "+Y+" index has changed from "+I+" to "+r),I=r,0))}()||function _shouldBuffer(){if(!Y||!v)return!0;return L.getCurrentBufferLevel(Y)<getBufferTarget()}())}catch(t){return!1}}()){var t=!1;N&&(t=B.checkPlaybackQuality(Y,i.id)),t||function _getNextFragment(){C||v.quality!==D||A?(A?(d.debug("Switch track for "+Y+", representation id = "+v.id),A=!1):d.debug("Quality has changed, get init request for representationid = "+v.id),O.trigger(c.default.INIT_FRAGMENT_NEEDED,{representationId:v.id,sender:r},{streamId:i.id,mediaType:Y}),N=!1,C=!1):(d.debug("Media segment needed for ".concat(Y," and stream id ").concat(i.id)),O.trigger(c.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:i.id,mediaType:Y}),N=!0)}()}else startScheduleTimer(U.getLowLatencyModeEnabled()?H.get().streaming.scheduling.lowLatencyTimeout:H.get().streaming.scheduling.defaultTimeout)}catch(t){startScheduleTimer(U.getLowLatencyModeEnabled()?H.get().streaming.scheduling.lowLatencyTimeout:H.get().streaming.scheduling.defaultTimeout)}}function getBufferTarget(){var t=NaN;return Y&&v?t=Y===a.default.TEXT?function _getBufferTargetForFragmentedText(){try{if(z.isTextEnabled()){if(isNaN(v.fragmentDuration)){var t=L.getCurrentSchedulingInfo(p.default.SCHEDULING_INFO);return t?t.duration:0}return v.fragmentDuration}return 0}catch(t){return 0}}():Y===a.default.AUDIO&&S?function _getBufferTargetForAudio(){try{var t=L.getCurrentBufferLevel(a.default.VIDEO);return isNaN(v.fragmentDuration)?t+1:Math.max(t+1,v.fragmentDuration)}catch(t){return 0}}():function _getGenericBufferTarget(){try{var t=v.mediaInfo.streamInfo;return B.isPlayingAtTopQuality(t)?t.manifestInfo.duration>=H.get().streaming.buffer.longFormContentDurationThreshold?H.get().streaming.buffer.bufferTimeAtTopQualityLongForm:H.get().streaming.buffer.bufferTimeAtTopQuality:R.getStableBufferTime()}catch(t){return R.getStableBufferTime()}}():t}function _onPlaybackTimeUpdated(){_completeQualityChange(!0)}function _completeQualityChange(t){if(U&&j){var r=j.getRequests({state:u.default.FRAGMENT_MODEL_EXECUTED,time:U.getTime(),threshold:0})[0];r&&U.getTime()>=r.startTime&&((!E.mediaInfo||r.mediaInfo.type===E.mediaInfo.type&&r.mediaInfo.id!==E.mediaInfo.id)&&t&&O.trigger(c.default.TRACK_CHANGE_RENDERED,{mediaType:Y,oldMediaInfo:E.mediaInfo,newMediaInfo:r.mediaInfo,streamId:i.id}),r.quality===E.quality&&r.adaptationIndex===E.adaptationIndex||!t||(d.debug("Quality change rendered for streamId ".concat(i.id," and type ").concat(Y)),O.trigger(c.default.QUALITY_CHANGE_RENDERED,{mediaType:Y,oldQuality:E.quality,newQuality:r.quality,streamId:i.id})),E={mediaInfo:r.mediaInfo,quality:r.quality,adaptationIndex:r.adaptationIndex})}}function _onBytesAppended(t){d.debug("Appended bytes for ".concat(t.mediaType," and stream id ").concat(i.id)),(isNaN(t.index)||isNaN(D))&&(D=t.quality,d.info("["+Y+"] lastInitializedRepresentationInfo changed to "+t.quality)),startScheduleTimer(0)}function _onURLResolutionFailed(){j.abortRequests(),clearScheduleTimer()}function _onPlaybackStarted(){H.get().streaming.scheduling.scheduleWhilePaused||startScheduleTimer()}function _onPlaybackRateChanged(t){L.updatePlayListTraceMetrics({playbackspeed:t.playbackRate.toString()})}function resetInitialSettings(){N=!0,b=0,D=NaN,E={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},I=NaN,A=!1,C=!1}return r={initialize:function initialize(t){S=t,O.on(c.default.BYTES_APPENDED_END_FRAGMENT,_onBytesAppended,r),O.on(c.default.URL_RESOLUTION_FAILED,_onURLResolutionFailed,r),O.on(m.default.PLAYBACK_STARTED,_onPlaybackStarted,r),O.on(m.default.PLAYBACK_RATE_CHANGED,_onPlaybackRateChanged,r),O.on(m.default.PLAYBACK_TIME_UPDATED,_onPlaybackTimeUpdated,r)},getType:function getType(){return Y},getStreamId:function getStreamId(){return i.id},setCurrentRepresentation:function setCurrentRepresentation(t){v=t},setTimeToLoadDelay:function setTimeToLoadDelay(t){b=t},getTimeToLoadDelay:function getTimeToLoadDelay(){return b},setSwitchTrack:function setSwitchTrack(t){A=t},getSwitchStrack:function getSwitchStrack(){return A},startScheduleTimer:startScheduleTimer,clearScheduleTimer:clearScheduleTimer,reset:function reset(){O.off(c.default.BYTES_APPENDED_END_FRAGMENT,_onBytesAppended,r),O.off(c.default.URL_RESOLUTION_FAILED,_onURLResolutionFailed,r),O.off(m.default.PLAYBACK_STARTED,_onPlaybackStarted,r),O.off(m.default.PLAYBACK_RATE_CHANGED,_onPlaybackRateChanged,r),O.off(m.default.PLAYBACK_TIME_UPDATED,_onPlaybackTimeUpdated,r),clearScheduleTimer(),_completeQualityChange(!1),resetInitialSettings(),i=null},getBufferTarget:getBufferTarget,getPlaybackController:function getPlaybackController(){return U},setCheckPlaybackQuality:function setCheckPlaybackQuality(t){N=t},setInitSegmentRequired:function setInitSegmentRequired(t){C=t}},function setup(){d=Object(g.default)(k).getInstance().getLogger(r),resetInitialSettings(),i=t.streamInfo}(),r}ScheduleController.__dashjs_factory_name="ScheduleController",r.default=d.default.getClassFactory(ScheduleController)},"./src/streaming/controllers/ServiceDescriptionController.js":
/*!*******************************************************************!*\
    !*** ./src/streaming/controllers/ServiceDescriptionController.js ***!
    \*******************************************************************/
/*! exports provided: default */function srcStreamingControllersServiceDescriptionControllerJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/Debug */"./src/core/Debug.js"),l=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),c=i(/*! ../../dash/constants/DashConstants */"./src/dash/constants/DashConstants.js"),d=[l.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],g="video",p="audio",m="any",v="all";function ServiceDescriptionController(){var t,r,i,a,b,M=this.context;function _resetInitialSettings(){r={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:NaN},minBitrate:{},maxBitrate:{},initialBitrate:{}},i=[]}function _updateBandwidthSetting(t,i,u){try{r[t][i]=u/1e3}catch(t){a.error(t)}}return t={getServiceDescriptionSettings:function getServiceDescriptionSettings(){return r},getProducerReferenceTimeOffsets:function getProducerReferenceTimeOffsets(){return i},calculateProducerReferenceTimeOffsets:function calculateProducerReferenceTimeOffsets(t){try{var r=[];if(t&&t.length>0){var u=[l.default.VIDEO,l.default.AUDIO,l.default.TEXT],d=b.getAvailabilityStartTime()/1e3;t.forEach((function(t){var i=u.reduce((function(r,i){return r=r.concat(b.getAllMediaInfoForType(t,i))}),[]).reduce((function(r,i){return b.getProducerReferenceTimes(t,i).forEach((function(a){var u=b.getVoRepresentations(i);if(u&&u.length>0&&u[0].adaptation&&u[0].segmentInfoType===c.default.SEGMENT_TEMPLATE){var l=u[0],g=new Date(a[c.default.WALL_CLOCK_TIME]).getTime()/1e3-(a[c.default.PRESENTATION_TIME]/l[c.default.TIMESCALE]-l[c.default.PRESENTATION_TIME_OFFSET]+t.start),p=d-g;r.push({id:a[c.default.ID],to:p})}})),r}),[]);r=r.concat(i)}))}i=r}catch(t){a.error(t),i=[]}},applyServiceDescription:function applyServiceDescription(t){if(t&&t.serviceDescriptions){var u=t.serviceDescriptions.filter((function(t){return d.includes(t.schemeIdUri)})),c=t.serviceDescriptions.filter((function(t){return null==t.schemeIdUri})),b=u.length>0?u[u.length-1]:c[c.length-1];b&&(b.latency&&b.latency.target>0&&function _applyServiceDescriptionLatency(t){var u;u=t.schemeIdUri===l.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME?function _getDvbServiceDescriptionLatencyParameters(t){var r=t.latency.target/1e3,i=!isNaN(t.latency.max)&&t.latency.max>t.latency.target?(t.latency.max-t.latency.target+500)/1e3:NaN,a=t.latency.referenceId||NaN;return{liveDelay:r,maxDrift:i,referenceId:a}}(t):function _getStandardServiceDescriptionLatencyParameters(t){var r=t.latency.target/1e3,i=!isNaN(t.latency.max)&&t.latency.max>t.latency.target?(t.latency.max-t.latency.target+500)/1e3:NaN,a=t.latency.referenceId||NaN;return{liveDelay:r,maxDrift:i,referenceId:a}}(t);if(i.length>0){var c=function _calculateTimeOffset(t){var r,a=0,u=i.filter((function(r){return r.id===t.referenceId}));0===u.length?(a=i.length>0?i[0].to:0,r=i[0].id||NaN):(a=u[0].to||0,r=u[0].id||NaN);return{to:a,id:r}}(u),d=c.to,g=c.id;r.liveDelay=u.liveDelay-d,r.liveCatchup.maxDrift=u.maxDrift,a.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(d," from ProducerReferenceTime element with id ").concat(g,".\n                Live Delay: ").concat(u.liveDelay-d,", Live catchup max drift: ").concat(u.maxDrift,"\n            "))}else r.liveDelay=u.liveDelay,r.liveCatchup.maxDrift=u.maxDrift,a.debug("Found latency properties coming from service description: Live Delay: ".concat(u.liveDelay,", Live catchup max drift: ").concat(u.maxDrift))}(b),b.playbackRate&&b.playbackRate.max>1&&function _applyServiceDescriptionPlaybackRate(t){var i=Math.round(1e3*(t.playbackRate.max-1))/1e3;r.liveCatchup.playbackRate=i,a.debug("Found latency properties coming from service description: Live catchup playback rate: ".concat(i))}(b),b.operatingQuality,b.operatingBandwidth&&function _applyServiceDescriptionOperatingBandwidth(t){if(!t||!t.operatingBandwidth||!t.operatingBandwidth.mediaType||t.operatingBandwidth.mediaType===v)return;var r={};r.minBandwidth=t.operatingBandwidth.min,r.maxBandwidth=t.operatingBandwidth.max,r.targetBandwidth=t.operatingBandwidth.target;var i=[];t.operatingBandwidth.mediaType===g||t.operatingBandwidth.mediaType===p?i.push(t.operatingBandwidth.mediaType):t.operatingBandwidth.mediaType===m&&(i.push(p),i.push(g));i.forEach((function(t){isNaN(r.minBandwidth)||_updateBandwidthSetting("minBitrate",t,r.minBandwidth),isNaN(r.maxBandwidth)||_updateBandwidthSetting("maxBitrate",t,r.maxBandwidth),isNaN(r.targetBandwidth)||_updateBandwidthSetting("initialBitrate",t,r.targetBandwidth)}))}(b))}},reset:function reset(){_resetInitialSettings()},setConfig:function setConfig(t){t&&t.adapter&&(b=t.adapter)}},function setup(){a=Object(u.default)(M).getInstance().getLogger(t),_resetInitialSettings()}(),t}ServiceDescriptionController.__dashjs_factory_name="ServiceDescriptionController",r.default=a.default.getSingletonFactory(ServiceDescriptionController)},"./src/streaming/controllers/StreamController.js":
/*!*******************************************************!*\
    !*** ./src/streaming/controllers/StreamController.js ***!
    \*******************************************************/
/*! exports provided: default */function srcStreamingControllersStreamControllerJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),l=i(/*! ../Stream */"./src/streaming/Stream.js"),c=i(/*! ../ManifestUpdater */"./src/streaming/ManifestUpdater.js"),d=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),g=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),p=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),m=i(/*! ../vo/metrics/PlayList */"./src/streaming/vo/metrics/PlayList.js"),v=i(/*! ../../core/Debug */"./src/core/Debug.js"),b=i(/*! ../utils/InitCache */"./src/streaming/utils/InitCache.js"),M=i(/*! ../utils/URLUtils */"./src/streaming/utils/URLUtils.js"),S=i(/*! ../MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),E=i(/*! ./TimeSyncController */"./src/streaming/controllers/TimeSyncController.js"),I=i(/*! ./MediaSourceController */"./src/streaming/controllers/MediaSourceController.js"),D=i(/*! ../vo/DashJSError */"./src/streaming/vo/DashJSError.js"),A=i(/*! ../../core/errors/Errors */"./src/core/errors/Errors.js"),C=i(/*! ./EventController */"./src/streaming/controllers/EventController.js"),N=i(/*! ../constants/ConformanceViolationConstants */"./src/streaming/constants/ConformanceViolationConstants.js");function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function StreamController(){var t,r,i,p,k,O,L,R,j,B,U,z,Y,G,H,Q,V,W,$,K,q,X,Z,J,ee,te,re,ne,ie,ae,oe,se,ue,le,ce,de,fe,he,ge,pe,me,ye,ve,_e,Te,be,Me=this.context,Se=Object(d.default)(Me).getInstance();function _onTimeSyncCompleted(){!function _composeStreams(){try{var t=R.getStreamsInfo();if(!Z&&0===t.length)throw new Error("There are no periods in the MPD");Z&&t.length>0&&j.updateManifestUpdateInfo({currentTime:ue.getTime(),buffered:se.getBufferRange(),presentationStartTime:t[0].start,clientTimeOffset:q.getClientTimeOffset()}),X.length>0&&function _filterOutdatedStreams(t){if(0===t.length)return void r.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.");X=X.filter((function(i){var a=t.filter((function(t){return t.id===i.getId()})).length>0||i.getId()===Z.getId();return a||(r.debug("Removing stream ".concat(i.getId())),i.reset(!0)),a}))}(t);for(var i=[],a=0,u=t.length;a<u;a++){var l=t[a];i.push(_initializeOrUpdateStream(l)),j.addManifestUpdateStreamInfo(l)}Promise.all(i).then((function(){Z||_initializeForFirstStream(t),Se.trigger(g.default.STREAMS_COMPOSED),_checkIfPrebufferingCanStart()})).catch((function(t){throw t}))}catch(t){K.error(new D.default(A.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t.message+" nostreamscomposed",L.getValue())),ae=!0,reset()}}()}function _onKeySessionUpdated(){_e=!0}function _initializeOrUpdateStream(t){var r=getStreamById(t.id);return r?r.updateData(t):(r=Object(l.default)(Me).create({manifestModel:L,mediaPlayerModel:ce,dashMetrics:j,manifestUpdater:k,adapter:R,timelineConverter:q,capabilities:i,capabilitiesFilter:p,errHandler:K,baseURLController:z,segmentBaseController:Y,textController:ee,abrController:H,playbackController:ue,eventController:V,mediaController:Q,protectionController:J,videoModel:se,streamInfo:t,settings:ve}),X.push(r),r.initialize(),Promise.resolve())}function _initializeForFirstStream(t){addDVRMetric();var i=j.getCurrentDVRInfo().range;if(i.end<i.start){Te&&clearTimeout(Te);var a=Math.min(1e3*(-1*(i.end-i.start)+2),2147483647);return r.debug("Waiting for ".concat(a," ms before playback can start")),Se.trigger(g.default.AST_IN_FUTURE,{delay:a}),void(Te=setTimeout((function(){_initializeForFirstStream(t)}),a))}ve.get().streaming.applyProducerReferenceTime&&le.calculateProducerReferenceTimeOffsets(t);var u=t[0].manifestInfo;if(ve.get().streaming.applyServiceDescription&&le.applyServiceDescription(u),R.getIsDynamic()){var l=_getFragmentDurationForLiveDelayCalculation(t,u);ue.computeAndSetLiveDelay(l,u)}var c=function _getInitialStartTime(){var t;if(R.getIsDynamic()){var i=j.getCurrentDVRInfo();t=(i&&i.range?i.range.end:0)-ue.getLiveDelay();var a=i?i.range:null;if(a){var u=_getStartTimeFromUriParameters(!0);if(!isNaN(u)){r.info("Start time from URI parameters: "+u);var l=ve.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;t=Math.max(Math.min(t,u),a.start+l)}}}else{t=getStreams()[0].getStreamInfo().start;var c=_getStartTimeFromUriParameters(!1);isNaN(c)||(r.info("Start time from URI parameters: "+c),t=Math.max(t,c))}return t}(),d=getStreamForTime(c),p=null!==d?d:X[0];Se.trigger(g.default.INITIAL_STREAM_SWITCH,{startTime:c}),_switchStream(p,null,c),function _startPlaybackEndedTimerInterval(){ge||(ge=setInterval((function(){!ne&&ue.getTimeToStreamEnd()<=0&&!ue.isSeeking()&&Se.trigger(g.default.PLAYBACK_ENDED,{isLast:getActiveStreamInfo().isLast})}),200))}()}function _switchStream(t,i,a){try{if(ne||!t||i===t&&t.getIsActive())return;ne=!0,Se.trigger(g.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:i?i.getStreamInfo():null,toStreamInfo:t.getStreamInfo()});var u=!1;Z=t,i&&(u=_canSourceBuffersBeReused(t,i),i.deactivate(u)),a=isNaN(a)?!u&&i?t.getStreamInfo().start:NaN:a,r.info("Switch to stream ".concat(t.getId(),". Seektime is ").concat(a,", current playback time is ").concat(ue.getTime(),". Seamless period switch is set to ").concat(u)),me=me.filter((function(t){return t.getId()!==Z.getId()})),ue.initialize(getActiveStreamInfo(),!!i),se.getElement()&&_openMediaSource(a,u)}catch(t){ne=!1}}function _openMediaSource(t,i){var a;function _onMediaSourceOpen(){if(oe&&"open"===oe.readyState){r.debug("MediaSource is open!"),window.URL.revokeObjectURL(a),oe.removeEventListener("sourceopen",_onMediaSourceOpen),oe.removeEventListener("webkitsourceopen",_onMediaSourceOpen),_setMediaDuration();var u=j.getCurrentDVRInfo();B.setSeekable(u.range.start,u.range.end),_activateStream(t,i)}}function _open(){oe.addEventListener("sourceopen",_onMediaSourceOpen,!1),oe.addEventListener("webkitsourceopen",_onMediaSourceOpen,!1),a=B.attachMediaSource(se),r.debug("MediaSource attached to element.  Waiting on open...")}oe?i?_activateStream(t,i):(B.detachMediaSource(se),_open()):(oe=B.createMediaSource(),_open())}function _activateStream(t,r){Z.activate(oe,r?pe:void 0,t).then((function(r){if(r){var i=Object.keys(r);i.length>0&&r[i[0]].getBuffer().changeType&&(ye=!0),pe=r}isNaN(t)||(Se.trigger(g.default.SEEK_TARGET,{time:t},{streamId:Z.getId()}),ue.seek(t,!1,!0),Z.startScheduleControllers()),ne=!1,Se.trigger(g.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:getActiveStreamInfo()})}))}function _onPlaybackSeeking(t){var r=ue.getTime(),i=t.seekTime,a=getStreamForTime(i);a&&a!==Z?a&&a!==Z&&(_cancelPreloading(r,i,a),function _handleOuterPeriodSeek(t,r){var i=t&&!isNaN(t.seekTime)?t.seekTime:NaN,a=Z.getProcessors().map((function(r){return r.prepareOuterPeriodPlaybackSeeking(t)}));Promise.all(a).then((function(){_switchStream(r,Z,i)})).catch((function(t){K.error(t)}))}(t,a)):(_cancelPreloading(r,i),function _handleInnerPeriodSeek(t){Z.getProcessors().forEach((function(r){return r.prepareInnerPeriodPlaybackSeeking(t)})),_flushPlaylistMetrics(m.PlayListTrace.USER_REQUEST_STOP_REASON)}(t)),_createPlaylistMetrics(m.PlayList.SEEK_START_REASON)}function _cancelPreloading(t,r){_deactivateAllPreloadingStreams()}function _deactivateAllPreloadingStreams(){me&&me.length>0&&(me.forEach((function(t){t.deactivate(!0)})),me=[])}function _onCurrentTrackChanged(t){t.newMediaInfo.streamInfo.id===Z.getId()&&(_deactivateAllPreloadingStreams(),Z.prepareTrackChange(t))}function _canSourceBuffersBeReused(t,r){try{return ve.get().streaming.buffer.reuseExistingSourceBuffers&&(r.isProtectionCompatible(t)||_e)&&(ye||r.isMediaCodecCompatible(t,r))}catch(t){return!1}}function _onStreamCanLoadNext(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(oe&&!t.getPreloaded()){var i=_canSourceBuffersBeReused(t,r);i&&t.startPreloading(oe,pe).then((function(){me.push(t)}))}}function getStreamForTime(t){if(isNaN(t))return null;for(var r=X.length,i=0;i<r;i++){var a=X[i];if(t<parseFloat((a.getStartTime()+a.getDuration()).toFixed(5)))return a}return null}function addDVRMetric(){try{var t=R.getIsDynamic(),r=R.getStreamsInfo()[0].manifestInfo,i=ue.getTime(),u=q.calcTimeShiftBufferWindow(X,t),l=getActiveStreamProcessors();if(void 0===u.start||void 0===u.end)return;l&&0!==l.length?l.forEach((function(t){j.addDVRInfo(t.getType(),i,r,u)})):j.addDVRInfo(a.default.VIDEO,i,r,u)}catch(t){}}function _onBufferLevelUpdated(t){if(he&&re){var r=ce.getInitialBufferLevel(),i=[a.default.TEXT];(isNaN(r)||r<=ue.getBufferLevel(i)||R.getIsDynamic()&&r>ue.getLiveDelay())&&(he=!1,_createPlaylistMetrics(m.PlayList.INITIAL_PLAYOUT_START_REASON),ue.play())}t&&t.mediaType&&j.addBufferLevel(t.mediaType,new Date,1e3*t.bufferLevel)}function _onQualityChanged(t){t.streamInfo.id===Z.getId()&&t.reason&&t.reason.forceReplace&&_deactivateAllPreloadingStreams(),getStreamById(t.streamInfo.id).prepareQualityChange(t)}function _onLiveDelaySettingUpdated(){if(R.getIsDynamic()&&0!==ue.getLiveDelay()){var t=R.getStreamsInfo();if(t.length>0){var r=t[0].manifestInfo,i=_getFragmentDurationForLiveDelayCalculation(t,r);ue.computeAndSetLiveDelay(i,r)}}}function _onPlaybackTimeUpdated(){if(hasVideoTrack()){var t=se.getPlaybackQuality();t&&j.addDroppedFrames(t)}}function _onPlaybackStarted(){r.debug("[onPlaybackStarted]"),!he&&fe&&_createPlaylistMetrics(m.PlayList.RESUME_FROM_PAUSE_START_REASON),he&&(he=!1),fe=!1}function _onPlaybackPaused(t){r.debug("[onPlaybackPaused]"),t.ended||(fe=!0,_flushPlaylistMetrics(m.PlayListTrace.USER_REQUEST_STOP_REASON))}function _onStreamBufferingCompleted(t){r.debug("Stream with id ".concat(t.streamInfo.id," finished buffering"));var i=t.streamInfo.isLast;oe&&i?(r.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),B.signalEndOfStream(oe)):_checkIfPrebufferingCanStart()}function _checkIfPrebufferingCanStart(){if(Z&&Z.getHasFinishedBuffering())for(var t=function _getNextStreams(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var r=t||(Z||null);if(r){var i=r.getStreamInfo();return X.filter((function(t){var r=t.getStreamInfo();return r.start>i.start&&i.id!==r.id}))}}catch(t){return[]}}(Z),r=0;r<t.length;){var i=t[r],a=0===r?Z:t[r-1];!i.getPreloaded()&&a.getHasFinishedBuffering()&&oe&&_onStreamCanLoadNext(i,a),r+=1}}function _stopPlaybackEndedTimerInterval(){ge&&(clearInterval(ge),ge=null)}function getActiveStreamProcessors(){return Z?Z.getProcessors():[]}function _onPlaybackEnded(t){if(Z&&!Z.getIsEndedEventSignaled()){Z.setIsEndedEventSignaled(!0);var i=function _getNextStream(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=t||(Z||null);if(!r)return null;var i=r.getStreamInfo(),a=i.start,u=0,l=-1,c=NaN;for(;u<X.length;){var d=X[u].getStreamInfo(),g=d.start-a;g>0&&(isNaN(c)||g<c)&&i.id!==d.id&&(c=g,l=u),u+=1}if(l>=0)return X[l];return null}();i?(r.debug("StreamController onEnded, found next stream with id ".concat(i.getStreamInfo().id,". Switching from ").concat(Z.getStreamInfo().id," to ").concat(i.getStreamInfo().id)),_switchStream(i,Z,NaN)):(r.debug("StreamController no next stream found"),Z.setIsEndedEventSignaled(!1)),_flushPlaylistMetrics(i?m.PlayListTrace.END_OF_PERIOD_STOP_REASON:m.PlayListTrace.END_OF_CONTENT_STOP_REASON)}t&&t.isLast&&_stopPlaybackEndedTimerInterval()}function _setMediaDuration(t){var r=t||getActiveStreamInfo().manifestInfo.duration;B.setDuration(r)}function _getStartTimeFromUriParameters(t){var r=G.getURIFragmentData();if(!r||!r.t)return NaN;var i=getStreams()[0].getStreamInfo().start;r.t=r.t.split(",")[0];var a=-1!==r.t.indexOf("posix:")?"now"===r.t.substring(6)?Date.now()/1e3:parseInt(r.t.substring(6)):NaN;return t&&!isNaN(a)?a-ue.getAvailabilityStartTime()/1e3:parseInt(r.t)+i}function _getFragmentDurationForLiveDelayCalculation(t,r){try{var i=NaN;if(r&&!isNaN(r.maxFragmentDuration)&&isFinite(r.maxFragmentDuration))return r.maxFragmentDuration;if(t&&1===t.length){var u=t[0],l=[a.default.VIDEO,a.default.AUDIO,a.default.TEXT].reduce((function(t,r){var i=R.getMediaInfoForType(u,r);return i&&!1!==i.isFragmented&&t.push(i),t}),[]).reduce((function(t,r){var i=R.getVoRepresentations(r);return i&&i.length>0&&i.forEach((function(r){r&&t.push(r)})),t}),[]).reduce((function(t,r){var i=R.convertRepresentationToRepresentationInfo(r);return i&&i.fragmentDuration&&!isNaN(i.fragmentDuration)&&t.push(i.fragmentDuration),t}),[]);i=Math.max.apply(Math,_toConsumableArray(l))}return isFinite(i)?i:NaN}catch(t){return NaN}}function _onManifestUpdated(t){if(t.error)ae=!0,reset();else{r.info("Manifest updated... updating data system wide.");var i=t.manifest;R.updatePeriods(i);var a=R.getUTCTimingSources();!R.getIsDynamic()||a&&0!==a.length||Se.trigger(S.default.CONFORMANCE_VIOLATION,{level:N.default.LEVELS.WARNING,event:N.default.EVENTS.NO_UTC_TIMING_ELEMENT});var u=R.getIsDynamic()?a.concat(de.getUTCTimingSources()):a,l=$.isHTTPS(t.manifest.url);u.forEach((function(t){t.value.replace(/.*?:\/\//g,"")===ve.get().streaming.utcSynchronization.defaultTimingSource.value.replace(/.*?:\/\//g,"")&&(t.value=t.value.replace(l?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),l?"https://":"http://"),r.debug("Matching default timing source protocol to manifest protocol: ",t.value))})),p.filterUnsupportedFeatures(i).then((function(){z.initialize(i),U.attemptSync(u,R.getIsDynamic())}))}}function hasVideoTrack(){return!!Z&&Z.getHasVideoTrack()}function hasAudioTrack(){return!!Z&&Z.getHasAudioTrack()}function _flushPlaylistMetrics(t,r){r=r||new Date,getActiveStreamProcessors().forEach((function(i){i.finalisePlayList(r,t)})),j.addPlayList()}function _createPlaylistMetrics(t){j.createPlaylistMetrics(1e3*ue.getTime(),t)}function _onPlaybackError(t){if(t.error){var i="";switch(t.error.code){case 1:i="MEDIA_ERR_ABORTED";break;case 2:i="MEDIA_ERR_NETWORK";break;case 3:i="MEDIA_ERR_DECODE",be.counts.mediaErrorDecode+=1;break;case 4:i="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:i="MEDIA_ERR_ENCRYPTED";break;default:i="UNKNOWN"}"MEDIA_ERR_DECODE"===i&&ve.get().errors.recoverAttempts.mediaErrorDecode>=be.counts.mediaErrorDecode?function _handleMediaErrorDecode(){r.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var t=ue.getTime();Z.deactivate(!1),r.warn("MediaSource has been resetted. Resuming playback from time ".concat(t)),_openMediaSource(t,!1)}():(ie=!0,t.error.message&&(i+=" ("+t.error.message+")"),t.error.msExtendedCode&&(i+=" (0x"+(t.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),r.fatal("Video Element Error: "+i),t.error&&r.fatal(t.error),K.error(new D.default(t.error.code,i)),reset())}}function getActiveStreamInfo(){return Z?Z.getStreamInfo():null}function getStreamById(t){for(var r=0,i=X.length;r<i;r++)if(X[r].getId()===t)return X[r];return null}function _checkConfig(){if(!(O&&O.hasOwnProperty("load")&&q&&q.hasOwnProperty("initialize")&&q.hasOwnProperty("reset")&&q.hasOwnProperty("getClientTimeOffset")&&L&&K&&j&&ue))throw new Error(a.default.MISSING_CONFIG_ERROR)}function _onManifestValidityChanged(t){isNaN(t.newDuration)||_setMediaDuration(t.newDuration)}function resetInitialSettings(){X=[],J=null,ne=!1,Z=null,ie=!1,ae=!1,he=!0,fe=!1,re=!0,ge=null,_e=!1,ye=!1,me=[],Te=null,be={counts:{mediaErrorDecode:0}}}function reset(){_checkConfig(),U.reset(),_flushPlaylistMetrics(ie||ae?m.PlayListTrace.FAILURE_STOP_REASON:m.PlayListTrace.USER_REQUEST_STOP_REASON);for(var r=0,i=X?X.length:0;r<i;r++){X[r].reset(ie)}!function unRegisterEvents(){Se.off(S.default.PLAYBACK_TIME_UPDATED,_onPlaybackTimeUpdated,t),Se.off(S.default.PLAYBACK_SEEKING,_onPlaybackSeeking,t),Se.off(S.default.PLAYBACK_ERROR,_onPlaybackError,t),Se.off(S.default.PLAYBACK_STARTED,_onPlaybackStarted,t),Se.off(S.default.PLAYBACK_PAUSED,_onPlaybackPaused,t),Se.off(S.default.PLAYBACK_ENDED,_onPlaybackEnded,t),Se.off(S.default.METRIC_ADDED,_onMetricAdded,t),Se.off(S.default.MANIFEST_VALIDITY_CHANGED,_onManifestValidityChanged,t),Se.off(S.default.BUFFER_LEVEL_UPDATED,_onBufferLevelUpdated,t),Se.off(S.default.QUALITY_CHANGE_REQUESTED,_onQualityChanged,t),g.default.KEY_SESSION_UPDATED&&Se.off(g.default.KEY_SESSION_UPDATED,_onKeySessionUpdated,t),Se.off(g.default.MANIFEST_UPDATED,_onManifestUpdated,t),Se.off(g.default.STREAM_BUFFERING_COMPLETED,_onStreamBufferingCompleted,t),Se.off(g.default.TIME_SYNCHRONIZATION_COMPLETED,_onTimeSyncCompleted,t),Se.off(g.default.CURRENT_TRACK_CHANGED,_onCurrentTrackChanged,t),Se.off(g.default.SETTING_UPDATED_LIVE_DELAY,_onLiveDelaySettingUpdated,t),Se.off(g.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,_onLiveDelaySettingUpdated,t)}(),z.reset(),k.reset(),V.reset(),j.clearAllCurrentMetrics(),L.setValue(null),O.reset(),q.reset(),W.reset(),oe&&(B.detachMediaSource(se),oe=null),se=null,J&&(J=null,te=null,L.getValue()&&Se.trigger(g.default.PROTECTION_DESTROYED,{data:L.getValue().url})),_stopPlaybackEndedTimerInterval(),Se.trigger(g.default.STREAM_TEARDOWN_COMPLETE),resetInitialSettings()}function _onMetricAdded(t){if(t.metric===u.default.DVR_INFO){var r=hasAudioTrack()?a.default.AUDIO:a.default.VIDEO;t.mediaType===r&&B.setSeekable(t.value.range.start,t.value.range.end)}}function getStreams(){return X}return t={initialize:function initialize(r,i){_checkConfig(),re=r,te=i,q.initialize(),(k=Object(c.default)(Me).create()).setConfig({manifestModel:L,adapter:R,manifestLoader:O,errHandler:K,settings:ve}),k.initialize(),(V=Object(C.default)(Me).getInstance()).setConfig({manifestUpdater:k,playbackController:ue,settings:ve}),V.start(),U.setConfig({dashMetrics:j,baseURLController:z,errHandler:K,settings:ve}),U.initialize(),J&&(Se.trigger(g.default.PROTECTION_CREATED,{controller:J}),J.setMediaElement(se.getElement()),te&&J.setProtectionData(te)),function registerEvents(){Se.on(S.default.PLAYBACK_TIME_UPDATED,_onPlaybackTimeUpdated,t),Se.on(S.default.PLAYBACK_SEEKING,_onPlaybackSeeking,t),Se.on(S.default.PLAYBACK_ERROR,_onPlaybackError,t),Se.on(S.default.PLAYBACK_STARTED,_onPlaybackStarted,t),Se.on(S.default.PLAYBACK_PAUSED,_onPlaybackPaused,t),Se.on(S.default.PLAYBACK_ENDED,_onPlaybackEnded,t),Se.on(S.default.METRIC_ADDED,_onMetricAdded,t),Se.on(S.default.MANIFEST_VALIDITY_CHANGED,_onManifestValidityChanged,t),Se.on(S.default.BUFFER_LEVEL_UPDATED,_onBufferLevelUpdated,t),Se.on(S.default.QUALITY_CHANGE_REQUESTED,_onQualityChanged,t),g.default.KEY_SESSION_UPDATED&&Se.on(g.default.KEY_SESSION_UPDATED,_onKeySessionUpdated,t);Se.on(g.default.MANIFEST_UPDATED,_onManifestUpdated,t),Se.on(g.default.STREAM_BUFFERING_COMPLETED,_onStreamBufferingCompleted,t),Se.on(g.default.TIME_SYNCHRONIZATION_COMPLETED,_onTimeSyncCompleted,t),Se.on(g.default.CURRENT_TRACK_CHANGED,_onCurrentTrackChanged,t),Se.on(g.default.SETTING_UPDATED_LIVE_DELAY,_onLiveDelaySettingUpdated,t),Se.on(g.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,_onLiveDelaySettingUpdated,t)}()},getActiveStreamInfo:getActiveStreamInfo,addDVRMetric:addDVRMetric,hasVideoTrack:hasVideoTrack,hasAudioTrack:hasAudioTrack,getStreamById:getStreamById,getStreamForTime:getStreamForTime,getTimeRelativeToStreamId:function getTimeRelativeToStreamId(t,r){for(var i=null,a=0,u=0,l=null,c=0;c<X.length;c++){if(u=(i=X[c]).getStartTime(),l=i.getDuration(),Number.isFinite(u)&&(a=u),i.getId()===r)return t-a;Number.isFinite(l)&&(a+=l)}return null},load:function load(t){_checkConfig(),O.load(t)},loadWithManifest:function loadWithManifest(t){!function _checkInitialize(){if(!k||!k.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),k.setManifest(t)},getActiveStreamProcessors:getActiveStreamProcessors,setConfig:function setConfig(t){t&&(t.capabilities&&(i=t.capabilities),t.capabilitiesFilter&&(p=t.capabilitiesFilter),t.manifestLoader&&(O=t.manifestLoader),t.manifestModel&&(L=t.manifestModel),t.mediaPlayerModel&&(ce=t.mediaPlayerModel),t.customParametersModel&&(de=t.customParametersModel),t.protectionController&&(J=t.protectionController),t.adapter&&(R=t.adapter),t.dashMetrics&&(j=t.dashMetrics),t.errHandler&&(K=t.errHandler),t.timelineConverter&&(q=t.timelineConverter),t.videoModel&&(se=t.videoModel),t.playbackController&&(ue=t.playbackController),t.serviceDescriptionController&&(le=t.serviceDescriptionController),t.textController&&(ee=t.textController),t.abrController&&(H=t.abrController),t.mediaController&&(Q=t.mediaController),t.settings&&(ve=t.settings),t.baseURLController&&(z=t.baseURLController),t.uriFragmentModel&&(G=t.uriFragmentModel),t.segmentBaseController&&(Y=t.segmentBaseController))},setProtectionData:function setProtectionData(t){te=t,J&&J.setProtectionData(te)},getIsStreamSwitchInProgress:function getIsStreamSwitchInProgress(){return ne},switchToVideoElement:function switchToVideoElement(t){Z&&(ue.initialize(getActiveStreamInfo()),_openMediaSource(t,!1))},getHasMediaOrInitialisationError:function getHasMediaOrInitialisationError(){return ie||ae},getStreams:getStreams,getActiveStream:function getActiveStream(){return Z},getInitialPlayback:function getInitialPlayback(){return he},getAutoPlay:function getAutoPlay(){return re},reset:reset},function setup(){r=Object(v.default)(Me).getInstance().getLogger(t),U=Object(E.default)(Me).getInstance(),B=Object(I.default)(Me).getInstance(),W=Object(b.default)(Me).getInstance(),$=Object(M.default)(Me).getInstance(),resetInitialSettings()}(),t}StreamController.__dashjs_factory_name="StreamController",r.default=p.default.getSingletonFactory(StreamController)},"./src/streaming/controllers/TimeSyncController.js":
/*!*********************************************************!*\
    !*** ./src/streaming/controllers/TimeSyncController.js ***!
    \*********************************************************/
/*! exports provided: default */function srcStreamingControllersTimeSyncControllerJs(t,r,i){i.r(r);var a=i(/*! ./../vo/DashJSError */"./src/streaming/vo/DashJSError.js"),u=i(/*! ../vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),l=i(/*! ./../../core/EventBus */"./src/core/EventBus.js"),c=i(/*! ./../../core/events/Events */"./src/core/events/Events.js"),d=i(/*! ./../../core/errors/Errors */"./src/core/errors/Errors.js"),g=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),p=i(/*! ../../core/Debug */"./src/core/Debug.js"),m=i(/*! ../utils/URLUtils */"./src/streaming/utils/URLUtils.js");function TimeSyncController(){var t,r,i,g,v,b,M,S,E,I,D,A,C,N,k,O,L=this.context,R=Object(l.default)(L).getInstance(),j=Object(m.default)(L).getInstance();function _resetInitialSettings(){S=[],E=[],I=null,D=null,C=null,A=NaN,i=!1,g=!1,N=v.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function _onAttemptBackgroundSync(){v.get().streaming.utcSynchronization.enabled&&!i&&!g&&C&&C.value&&C.schemeIdUri&&!isNaN(A)&&!isNaN(v.get().streaming.utcSynchronization.backgroundAttempts)&&(D&&(Date.now()-D)/1e3<30||(S=[],g=!0,_attemptBackgroundSync(isNaN(v.get().streaming.utcSynchronization.backgroundAttempts)?2:v.get().streaming.utcSynchronization.backgroundAttempts)))}function _attemptBackgroundSync(t){try{if(t<=0)return void _completeBackgroundTimeSyncSequence();var r=Date.now();b[C.schemeIdUri](C.value,(function(i){var a=Date.now(),u=_calculateOffset(r,a,i);S.push(u),_attemptBackgroundSync(t-1)}),(function(){_completeBackgroundTimeSyncSequence()}))}catch(t){_completeBackgroundTimeSyncSequence()}}function _attemptRecursiveSync(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=t||0;if(!E||0===E.length||r>=E.length)_onComplete();else{var i=E[r];if(i)if(b.hasOwnProperty(i.schemeIdUri)){var a=(new Date).getTime();b[i.schemeIdUri](i.value,(function(t){var r=(new Date).getTime(),u=_calculateOffset(a,r,t);C=i,_onComplete(u)}),(function(){_attemptRecursiveSync(r+1)}))}else _attemptRecursiveSync(r+1);else _onComplete()}}function _calculateOffset(t,r,i){return i-(r-(r-t)/2)}function _onComplete(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,r=isNaN(t);r&&v.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?_checkForDateHeader():_completeTimeSyncSequence(r,t)}function _xsdatetimeDecoder(t){var r=Date.parse(t);return isNaN(r)&&(r=function _alternateXsdatetimeDecoder(t){var r,i,a=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(t);return r=Date.UTC(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),a[6]&&(parseInt(a[6],10)||0),a[7]&&1e3*parseFloat(a[7])||0),a[9]&&a[10]&&(i=60*parseInt(a[9],10)+parseInt(a[10],10),r+=("+"===a[8]?-1:1)*i*60*1e3),new Date(r).getTime()}(t)),r}function _iso8601Decoder(t){return Date.parse(t)}function _rfc1123Decoder(t){return Date.parse(t)}function _notSupportedHandler(t,r,i){i()}function _directHandler(t,r,i){var a=_xsdatetimeDecoder(t);isNaN(a)?i():r(a)}function _httpHandler(t,r,i,a,l){var c,d,g=!1,p=new XMLHttpRequest,m=l?u.HTTPRequest.HEAD:u.HTTPRequest.GET,v=r.match(/\S+/g);if(r=v.shift(),c=function oncomplete(){g||(g=!0,v.length?_httpHandler(t,v.join(" "),i,a,l):a())},d=function onload(){var r,a;200===p.status&&(r=l?p.getResponseHeader("Date"):p.response,a=t(r),isNaN(a)||(i(a),g=!0))},j.isRelative(r)){var b=O.resolve();b&&(r=j.resolve(r,b.url))}p.open(m,r),p.timeout=5e3,p.onload=d,p.onloadend=c,p.send()}function _httpHeadHandler(t,r,i){_httpHandler(_rfc1123Decoder,t,r,i,!0)}function _checkForDateHeader(){var t=M.getLatestMPDRequestHeaderValueByID("Date"),r=null!==t?new Date(t).getTime():Number.NaN;isNaN(r)?_completeTimeSyncSequence(!0):_completeTimeSyncSequence(!1,r-Date.now())}function _completeTimeSyncSequence(t,u){if(isNaN(A)||isNaN(u)||t||function _adjustTimeBetweenSyncAttempts(t){try{var i,a=_isOffsetDriftWithinThreshold(t),u=isNaN(N)?30:N,l=isNaN(v.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:v.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,c=isNaN(v.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:v.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,d=isNaN(v.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:v.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;a?(i=Math.min(u*l,c),r.debug("Increasing timeBetweenSyncAttempts to ".concat(i))):(i=Math.max(u/l,d),r.debug("Decreasing timeBetweenSyncAttempts to ".concat(i))),N=i}catch(t){}}(u),!t&&!isNaN(u)){I=Date.now(),i=!1;var l=isNaN(A);A=u,l&&_onAttemptBackgroundSync(),r.debug("Completed UTC sync. Setting client - server offset to ".concat(u))}t&&(C=null,i=!1,k.error(new a.default(d.default.TIME_SYNC_FAILED_ERROR_CODE,d.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),R.trigger(c.default.UPDATE_TIME_SYNC_OFFSET,{offset:u}),R.trigger(c.default.TIME_SYNCHRONIZATION_COMPLETED)}function _completeBackgroundTimeSyncSequence(){if(S&&0!==S.length){var t=S.reduce((function(t,r){return t+r}),0)/S.length;_isOffsetDriftWithinThreshold(t)?r.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(r.debug("Completed background UTC sync. Setting client - server offset to ".concat(t)),A=t,R.trigger(c.default.UPDATE_TIME_SYNC_OFFSET,{offset:A})),g=!1,D=Date.now()}}function _isOffsetDriftWithinThreshold(t){try{if(isNaN(A))return!0;var r=v.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(v.get().streaming.utcSynchronization.maximumAllowedDrift)?v.get().streaming.utcSynchronization.maximumAllowedDrift:100;return t>=A-r&&t<=A+r}catch(t){return!0}}return t={initialize:function initialize(){_resetInitialSettings(),b={"urn:mpeg:dash:utc:http-head:2014":_httpHeadHandler,"urn:mpeg:dash:utc:http-xsdate:2014":_httpHandler.bind(null,_xsdatetimeDecoder),"urn:mpeg:dash:utc:http-iso:2014":_httpHandler.bind(null,_iso8601Decoder),"urn:mpeg:dash:utc:direct:2014":_directHandler,"urn:mpeg:dash:utc:http-head:2012":_httpHeadHandler,"urn:mpeg:dash:utc:http-xsdate:2012":_httpHandler.bind(null,_xsdatetimeDecoder),"urn:mpeg:dash:utc:http-iso:2012":_httpHandler.bind(null,_iso8601Decoder),"urn:mpeg:dash:utc:direct:2012":_directHandler,"urn:mpeg:dash:utc:http-ntp:2014":_notSupportedHandler,"urn:mpeg:dash:utc:ntp:2014":_notSupportedHandler,"urn:mpeg:dash:utc:sntp:2014":_notSupportedHandler}},attemptSync:function attemptSync(t,r){E=t,i||(!function _shouldPerformSynchronization(t){try{if(!t||!v.get().streaming.utcSynchronization.enabled)return!1;var r=isNaN(N)?30:N;return!(I&&r&&!isNaN(r))||(Date.now()-I)/1e3>=r}catch(t){return!0}}(r)?R.trigger(c.default.TIME_SYNCHRONIZATION_COMPLETED):(i=!0,_attemptRecursiveSync()))},setConfig:function setConfig(t){t&&(t.dashMetrics&&(M=t.dashMetrics),t.baseURLController&&(O=t.baseURLController),t.errHandler&&(k=t.errHandler),t.settings&&(v=t.settings))},reset:function reset(){_resetInitialSettings(),R.off(c.default.ATTEMPT_BACKGROUND_SYNC,_onAttemptBackgroundSync,t)}},function setup(){r=Object(p.default)(L).getInstance().getLogger(t),R.on(c.default.ATTEMPT_BACKGROUND_SYNC,_onAttemptBackgroundSync,t)}(),t}TimeSyncController.__dashjs_factory_name="TimeSyncController";var v=g.default.getSingletonFactory(TimeSyncController);v.HTTP_TIMEOUT_MS=5e3,g.default.updateSingletonFactory(TimeSyncController.__dashjs_factory_name,v),r.default=v},"./src/streaming/controllers/XlinkController.js":
/*!******************************************************!*\
    !*** ./src/streaming/controllers/XlinkController.js ***!
    \******************************************************/
/*! exports provided: default */function srcStreamingControllersXlinkControllerJs(t,r,i){i.r(r);var a=i(/*! ../XlinkLoader */"./src/streaming/XlinkLoader.js"),u=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),l=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),c=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),d=i(/*! ../../../externals/xml2json */"./externals/xml2json.js"),g=i(/*! ../utils/URLUtils */"./src/streaming/utils/URLUtils.js"),p=i(/*! ../../dash/constants/DashConstants */"./src/dash/constants/DashConstants.js"),m="onLoad";function XlinkController(t){t=t||{};var r,i,c,v,b,M,S=this.context,E=Object(u.default)(S).getInstance(),I=Object(g.default)(S).getInstance();function resolve(t,r,i){var a,u,l={};l.elements=t,l.type=r,l.resolveType=i,0===l.elements.length&&onXlinkAllElementsLoaded(l);for(var c=0;c<l.elements.length;c++)a=l.elements[c],u=I.isHTTPURL(a.url)?a.url:a.originalContent.BaseURL+a.url,M.load(u,a,l)}function onXlinkElementLoaded(t){var r,i,a="";if(r=t.element,i=t.resolveObject,r.resolvedContent){var u=0;0===r.resolvedContent.indexOf("<?xml")&&(u=r.resolvedContent.indexOf("?>")+2),a=r.resolvedContent.substr(0,u)+"<response>"+r.resolvedContent.substr(u)+"</response>",r.resolvedContent=b.xml_str2json(a)}(function isResolvingFinished(t){var r;for(r=0;r<t.elements.length;r++)if(!1===t.elements[r].resolved)return!1;return!0})(i)&&onXlinkAllElementsLoaded(i)}function onXlinkAllElementsLoaded(t){var r,i,a=[];if(function mergeElementsBack(t){var r,i,a,u,l,d,g=[];for(u=t.elements.length-1;u>=0;u--){if(i=(r=t.elements[u]).type+"_asArray",r.resolvedContent){if(r.resolvedContent)for(l=0;l<r.resolvedContent[i].length;l++)a=r.resolvedContent[i][l],g.push(a)}else delete r.originalContent["xlink:actuate"],delete r.originalContent["xlink:href"],g.push(r.originalContent);for(r.parentElement[i].splice(r.index,1),d=0;d<g.length;d++)r.parentElement[i].splice(r.index+d,0,g[d]);g=[]}t.elements.length>0&&c.run(v)}(t),"onActuate"===t.resolveType&&E.trigger(l.default.XLINK_READY,{manifest:v}),t.resolveType===m)switch(t.type){case p.default.PERIOD:for(r=0;r<v[p.default.PERIOD+"_asArray"].length;r++)(i=v[p.default.PERIOD+"_asArray"][r]).hasOwnProperty(p.default.ADAPTATION_SET+"_asArray")&&(a=a.concat(getElementsToResolve(i[p.default.ADAPTATION_SET+"_asArray"],i,p.default.ADAPTATION_SET,m))),i.hasOwnProperty(p.default.EVENT_STREAM+"_asArray")&&(a=a.concat(getElementsToResolve(i[p.default.EVENT_STREAM+"_asArray"],i,p.default.EVENT_STREAM,m)));resolve(a,p.default.ADAPTATION_SET,m);break;case p.default.ADAPTATION_SET:E.trigger(l.default.XLINK_READY,{manifest:v})}}function getElementsToResolve(t,r,i,a){var u,l,c,d=[];for(l=t.length-1;l>=0;l--)(u=t[l]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===u["xlink:href"]&&t.splice(l,1);for(l=0;l<t.length;l++)(u=t[l]).hasOwnProperty("xlink:href")&&u.hasOwnProperty("xlink:actuate")&&u["xlink:actuate"]===a&&(c=createXlinkObject(u["xlink:href"],r,i,l,a,u),d.push(c));return d}function createXlinkObject(t,r,i,a,u,l){return{url:t,parentElement:r,type:i,index:a,resolveType:u,originalContent:l,resolvedContent:null,resolved:!1}}return r={resolveManifestOnLoad:function resolveManifestOnLoad(t){b=new d.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:i}),(v=t).Period_asArray?resolve(getElementsToResolve(v.Period_asArray,v,p.default.PERIOD,m),p.default.PERIOD,m):E.trigger(l.default.XLINK_READY,{manifest:v})},setMatchers:function setMatchers(t){t&&(i=t)},setIron:function setIron(t){t&&(c=t)},reset:function reset(){E.off(l.default.XLINK_ELEMENT_LOADED,onXlinkElementLoaded,r),M&&(M.reset(),M=null)}},function setup(){E.on(l.default.XLINK_ELEMENT_LOADED,onXlinkElementLoaded,r),M=Object(a.default)(S).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,settings:t.settings})}(),r}XlinkController.__dashjs_factory_name="XlinkController",r.default=c.default.getClassFactory(XlinkController)},"./src/streaming/metrics/MetricsReporting.js":
/*!***************************************************!*\
    !*** ./src/streaming/metrics/MetricsReporting.js ***!
    \***************************************************/
/*! exports provided: default */function srcStreamingMetricsMetricsReportingJs(t,r,i){i.r(r);var a=i(/*! ./utils/DVBErrorsTranslator */"./src/streaming/metrics/utils/DVBErrorsTranslator.js"),u=i(/*! ./MetricsReportingEvents */"./src/streaming/metrics/MetricsReportingEvents.js"),l=i(/*! ./controllers/MetricsCollectionController */"./src/streaming/metrics/controllers/MetricsCollectionController.js"),c=i(/*! ./metrics/MetricsHandlerFactory */"./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),d=i(/*! ./reporting/ReportingFactory */"./src/streaming/metrics/reporting/ReportingFactory.js");function MetricsReporting(){var t,r=this.context;return t={createMetricsReporting:function createMetricsReporting(t){return Object(a.default)(r).getInstance({eventBus:t.eventBus,dashMetrics:t.dashMetrics,metricsConstants:t.metricsConstants,events:t.events}).initialise(),Object(l.default)(r).create(t)},getReportingFactory:function getReportingFactory(){return Object(d.default)(r).getInstance()},getMetricsHandlerFactory:function getMetricsHandlerFactory(){return Object(c.default)(r).getInstance()}},t}MetricsReporting.__dashjs_factory_name="MetricsReporting";var g=dashjs.FactoryMaker.getClassFactory(MetricsReporting);g.events=u.default,dashjs.FactoryMaker.updateClassFactory(MetricsReporting.__dashjs_factory_name,g),r.default=g},"./src/streaming/metrics/MetricsReportingEvents.js":
/*!*********************************************************!*\
    !*** ./src/streaming/metrics/MetricsReportingEvents.js ***!
    \*********************************************************/
/*! exports provided: default */function srcStreamingMetricsMetricsReportingEventsJs(t,r,i){function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}i.r(r);var a=new(function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(MetricsReportingEvents,t);var r=_createSuper(MetricsReportingEvents);function MetricsReportingEvents(){var t;return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MetricsReportingEvents),(t=r.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",t.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",t.CMCD_DATA_GENERATED="cmcdDataGenerated",t}return MetricsReportingEvents}(i(/*! ../../core/events/EventsBase */"./src/core/events/EventsBase.js").default));r.default=a},"./src/streaming/metrics/controllers/MetricsCollectionController.js":
/*!**************************************************************************!*\
    !*** ./src/streaming/metrics/controllers/MetricsCollectionController.js ***!
    \**************************************************************************/
/*! exports provided: default */function srcStreamingMetricsControllersMetricsCollectionControllerJs(t,r,i){i.r(r);var a=i(/*! ./MetricsController */"./src/streaming/metrics/controllers/MetricsController.js"),u=i(/*! ../utils/ManifestParsing */"./src/streaming/metrics/utils/ManifestParsing.js"),l=i(/*! ../MetricsReportingEvents */"./src/streaming/metrics/MetricsReportingEvents.js");function MetricsCollectionController(t){var r;t=t||{};var i={},c=this.context,d=t.eventBus,g=t.events;function update(r){if(!r.error){var g=Object.keys(i);Object(u.default)(c).getInstance({adapter:t.adapter,constants:t.constants}).getMetrics(r.manifest).forEach((function(r){var u=JSON.stringify(r);if(i.hasOwnProperty(u))g.splice(u,1);else try{var l=Object(a.default)(c).create(t);l.initialize(r),i[u]=l}catch(t){}})),g.forEach((function(t){i[t].reset(),delete i[t]})),d.trigger(l.default.METRICS_INITIALISATION_COMPLETE)}}function resetMetricsControllers(){Object.keys(i).forEach((function(t){i[t].reset()})),i={}}return r={reset:function reset(){d.off(g.MANIFEST_UPDATED,update,r),d.off(g.STREAM_TEARDOWN_COMPLETE,resetMetricsControllers,r)}},function setup(){d.on(g.MANIFEST_UPDATED,update,r),d.on(g.STREAM_TEARDOWN_COMPLETE,resetMetricsControllers,r)}(),r}MetricsCollectionController.__dashjs_factory_name="MetricsCollectionController",r.default=dashjs.FactoryMaker.getClassFactory(MetricsCollectionController)},"./src/streaming/metrics/controllers/MetricsController.js":
/*!****************************************************************!*\
    !*** ./src/streaming/metrics/controllers/MetricsController.js ***!
    \****************************************************************/
/*! exports provided: default */function srcStreamingMetricsControllersMetricsControllerJs(t,r,i){i.r(r);var a=i(/*! ./RangeController */"./src/streaming/metrics/controllers/RangeController.js"),u=i(/*! ./ReportingController */"./src/streaming/metrics/controllers/ReportingController.js"),l=i(/*! ./MetricsHandlersController */"./src/streaming/metrics/controllers/MetricsHandlersController.js");function MetricsController(t){var r,i,c;t=t||{};var d=this.context;function reset(){r&&r.reset(),i&&i.reset(),c&&c.reset()}return{initialize:function initialize(g){try{(c=Object(a.default)(d).create({mediaElement:t.mediaElement})).initialize(g.Range),(i=Object(u.default)(d).create({debug:t.debug,metricsConstants:t.metricsConstants,mediaPlayerModel:t.mediaPlayerModel})).initialize(g.Reporting,c),(r=Object(l.default)(d).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(g.metrics,i)}catch(t){throw reset(),t}},reset:reset}}MetricsController.__dashjs_factory_name="MetricsController",r.default=dashjs.FactoryMaker.getClassFactory(MetricsController)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":
/*!************************************************************************!*\
    !*** ./src/streaming/metrics/controllers/MetricsHandlersController.js ***!
    \************************************************************************/
/*! exports provided: default */function srcStreamingMetricsControllersMetricsHandlersControllerJs(t,r,i){i.r(r);var a=i(/*! ../metrics/MetricsHandlerFactory */"./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function MetricsHandlersController(t){t=t||{};var r,i=[],u=this.context,l=t.eventBus,c=t.events,d=Object(a.default)(u).getInstance({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants});function handle(t){i.forEach((function(r){r.handleNewMetric(t.metric,t.value,t.mediaType)}))}return r={initialize:function initialize(t,a){t.split(",").forEach((function(t,r,u){var l;if(-1!==t.indexOf("(")&&-1===t.indexOf(")")){var c=u[r+1];c&&-1===c.indexOf("(")&&-1!==c.indexOf(")")&&(t+=","+c,delete u[r+1])}(l=d.create(t,a))&&i.push(l)})),l.on(c.METRIC_ADDED,handle,r),l.on(c.METRIC_UPDATED,handle,r)},reset:function reset(){l.off(c.METRIC_ADDED,handle,r),l.off(c.METRIC_UPDATED,handle,r),i.forEach((function(t){return t.reset()})),i=[]}},r}MetricsHandlersController.__dashjs_factory_name="MetricsHandlersController",r.default=dashjs.FactoryMaker.getClassFactory(MetricsHandlersController)},"./src/streaming/metrics/controllers/RangeController.js":
/*!**************************************************************!*\
    !*** ./src/streaming/metrics/controllers/RangeController.js ***!
    \**************************************************************/
/*! exports provided: default */function srcStreamingMetricsControllersRangeControllerJs(t,r,i){i.r(r);var a=i(/*! ../../utils/CustomTimeRanges */"./src/streaming/utils/CustomTimeRanges.js");function RangeController(t){t=t||{};var r,i,u=!1,l=this.context,c=t.mediaElement;return r={initialize:function initialize(t){t&&t.length&&(t.forEach((function(t){var r=t.starttime,a=r+t.duration;i.add(r,a)})),u=!!t[0]._useWallClockTime)},reset:function reset(){i.clear()},isEnabled:function isEnabled(){var t,r=i.length;if(!r)return!0;t=u?(new Date).getTime()/1e3:c.currentTime;for(var a=0;a<r;a+=1){var l=i.start(a),d=i.end(a);if(l<=t&&t<d)return!0}return!1}},function setup(){i=Object(a.default)(l).create()}(),r}RangeController.__dashjs_factory_name="RangeController",r.default=dashjs.FactoryMaker.getClassFactory(RangeController)},"./src/streaming/metrics/controllers/ReportingController.js":
/*!******************************************************************!*\
    !*** ./src/streaming/metrics/controllers/ReportingController.js ***!
    \******************************************************************/
/*! exports provided: default */function srcStreamingMetricsControllersReportingControllerJs(t,r,i){i.r(r);var a=i(/*! ../reporting/ReportingFactory */"./src/streaming/metrics/reporting/ReportingFactory.js");function ReportingController(t){var r,i=[],u=Object(a.default)(this.context).getInstance(t);return r={initialize:function initialize(t,r){t.some((function(t){var a=u.create(t,r);if(a)return i.push(a),!0}))},reset:function reset(){i.forEach((function(t){return t.reset()})),i=[]},report:function report(t,r){i.forEach((function(i){return i.report(t,r)}))}},r}ReportingController.__dashjs_factory_name="ReportingController",r.default=dashjs.FactoryMaker.getClassFactory(ReportingController)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":
/*!****************************************************************!*\
    !*** ./src/streaming/metrics/metrics/MetricsHandlerFactory.js ***!
    \****************************************************************/
/*! exports provided: default */function srcStreamingMetricsMetricsMetricsHandlerFactoryJs(t,r,i){i.r(r);var a=i(/*! ./handlers/BufferLevelHandler */"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),u=i(/*! ./handlers/DVBErrorsHandler */"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),l=i(/*! ./handlers/HttpListHandler */"./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),c=i(/*! ./handlers/GenericMetricHandler */"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function MetricsHandlerFactory(t){var r,i=(t=t||{}).debug?t.debug.getLogger(r):{},d=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,g=this.context,p={BufferLevel:a.default,DVBErrors:u.default,HttpList:l.default,PlayList:c.default,RepSwitchList:c.default,TcpList:c.default};return r={create:function create(r,a){var u,l=r.match(d);if(l){try{(u=p[l[1]](g).create({eventBus:t.eventBus,metricsConstants:t.metricsConstants})).initialize(l[1],a,l[3],l[5])}catch(t){u=null,i.error("MetricsHandlerFactory: Could not create handler for type ".concat(l[1]," with args ").concat(l[3],", ").concat(l[5]," (").concat(t.message,")"))}return u}},register:function register(t,r){p[t]=r},unregister:function unregister(t){delete p[t]}}}MetricsHandlerFactory.__dashjs_factory_name="MetricsHandlerFactory",r.default=dashjs.FactoryMaker.getSingletonFactory(MetricsHandlerFactory)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":
/*!**********************************************************************!*\
    !*** ./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js ***!
    \**********************************************************************/
/*! exports provided: default */function srcStreamingMetricsMetricsHandlersBufferLevelHandlerJs(t,r,i){i.r(r);var a=i(/*! ../../utils/HandlerHelpers */"./src/streaming/metrics/utils/HandlerHelpers.js");function BufferLevelHandler(t){var r,i,u,l,c,d;t=t||{};var g=this.context,p=Object(a.default)(g).getInstance(),m=[],v=t.metricsConstants;function intervalCallback(){var t=function getLowestBufferLevelVO(){try{return Object.keys(m).map((function(t){return m[t]})).reduce((function(t,r){return t.level<r.level?t:r}))}catch(t){return}}();t&&d!==t.t&&(d=t.t,i.report(l,t))}return r={initialize:function initialize(t,r,a){r&&(u=p.validateN(a),i=r,l=p.reconstructFullMetricName(t,a),c=setInterval(intervalCallback,u))},reset:function reset(){clearInterval(c),c=null,u=0,i=null,d=null},handleNewMetric:function handleNewMetric(t,r,i){t===v.BUFFER_LEVEL&&(m[i]=r)}},r}BufferLevelHandler.__dashjs_factory_name="BufferLevelHandler",r.default=dashjs.FactoryMaker.getClassFactory(BufferLevelHandler)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":
/*!********************************************************************!*\
    !*** ./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js ***!
    \********************************************************************/
/*! exports provided: default */function srcStreamingMetricsMetricsHandlersDVBErrorsHandlerJs(t,r,i){i.r(r);var a=i(/*! ../../MetricsReportingEvents */"./src/streaming/metrics/MetricsReportingEvents.js");r.default=dashjs.FactoryMaker.getClassFactory((function DVBErrorsHandler(t){var r,i=(t=t||{}).eventBus,u=t.metricsConstants;function onInitialisationComplete(){i.off(a.default.METRICS_INITIALISATION_COMPLETE,onInitialisationComplete,this),i.trigger(a.default.BECAME_REPORTING_PLAYER)}return{initialize:function initialize(t,u){u&&(r=u,i.on(a.default.METRICS_INITIALISATION_COMPLETE,onInitialisationComplete,this))},reset:function reset(){r=null},handleNewMetric:function handleNewMetric(t,i){t===u.DVB_ERRORS&&r&&r.report(t,i)}}}))},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":
/*!************************************************************************!*\
    !*** ./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js ***!
    \************************************************************************/
/*! exports provided: default */function srcStreamingMetricsMetricsHandlersGenericMetricHandlerJs(t,r,i){function GenericMetricHandler(){var t,r,i;return t={initialize:function initialize(t,a){r=t,i=a},reset:function reset(){i=null,r=void 0},handleNewMetric:function handleNewMetric(t,a){t===r&&i&&i.report(r,a)}},t}i.r(r),GenericMetricHandler.__dashjs_factory_name="GenericMetricHandler",r.default=dashjs.FactoryMaker.getClassFactory(GenericMetricHandler)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":
/*!*******************************************************************!*\
    !*** ./src/streaming/metrics/metrics/handlers/HttpListHandler.js ***!
    \*******************************************************************/
/*! exports provided: default */function srcStreamingMetricsMetricsHandlersHttpListHandlerJs(t,r,i){i.r(r);var a=i(/*! ../../utils/HandlerHelpers */"./src/streaming/metrics/utils/HandlerHelpers.js");function HttpListHandler(t){var r,i,u,l,c;t=t||{};var d=[],g=Object(a.default)(this.context).getInstance(),p=t.metricsConstants;function intervalCallback(){var t=d;t.length&&r&&r.report(l,t),d=[]}return{initialize:function initialize(t,a,d,p){a&&(i=g.validateN(d),r=a,p&&p.length&&(u=p),l=g.reconstructFullMetricName(t,d,p),c=setInterval(intervalCallback,i))},reset:function reset(){clearInterval(c),c=null,i=null,u=null,d=[],r=null},handleNewMetric:function handleNewMetric(t,r){t===p.HTTP_REQUEST&&(u&&u!==r.type||d.push(r))}}}HttpListHandler.__dashjs_factory_name="HttpListHandler",r.default=dashjs.FactoryMaker.getClassFactory(HttpListHandler)},"./src/streaming/metrics/reporting/ReportingFactory.js":
/*!*************************************************************!*\
    !*** ./src/streaming/metrics/reporting/ReportingFactory.js ***!
    \*************************************************************/
/*! exports provided: default */function srcStreamingMetricsReportingReportingFactoryJs(t,r,i){i.r(r);var a=i(/*! ./reporters/DVBReporting */"./src/streaming/metrics/reporting/reporters/DVBReporting.js");function ReportingFactory(t){t=t||{};var r,i={"urn:dvb:dash:reporting:2014":a.default},u=this.context,l=t.debug?t.debug.getLogger(r):{},c=t.metricsConstants,d=t.mediaPlayerModel||{};return r={create:function create(t,r){var a;try{(a=i[t.schemeIdUri](u).create({metricsConstants:c,mediaPlayerModel:d})).initialize(t,r)}catch(r){a=null,l.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(t.schemeIdUri," (").concat(r.message,")"))}return a},register:function register(t,r){i[t]=r},unregister:function unregister(t){delete i[t]}}}ReportingFactory.__dashjs_factory_name="ReportingFactory",r.default=dashjs.FactoryMaker.getSingletonFactory(ReportingFactory)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":
/*!*******************************************************************!*\
    !*** ./src/streaming/metrics/reporting/reporters/DVBReporting.js ***!
    \*******************************************************************/
/*! exports provided: default */function srcStreamingMetricsReportingReportersDVBReportingJs(t,r,i){i.r(r);var a=i(/*! ../../utils/MetricSerialiser */"./src/streaming/metrics/utils/MetricSerialiser.js"),u=i(/*! ../../utils/RNG */"./src/streaming/metrics/utils/RNG.js"),l=i(/*! ../../../models/CustomParametersModel */"./src/streaming/models/CustomParametersModel.js");function DVBReporting(t){var r;t=t||{};var i,c,d,g,p,m,v,b=this.context,M=[],S=t.metricsConstants;function resetInitialSettings(){g=!1,p=!1,m=null,v=null}return r={report:function report(t,r){Array.isArray(r)||(r=[r]),p&&v.isEnabled()&&r.forEach((function(r){var a=i.serialise(r);t!==S.DVB_ERRORS&&(a="metricname=".concat(t,"&").concat(a)),function doGetRequest(t,r,i){var a=new XMLHttpRequest;a.withCredentials=c.getXHRWithCredentialsForType(S.HTTP_REQUEST_DVB_REPORTING_TYPE);var u=function oncomplete(){var t=M.indexOf(a);-1!==t&&(M.splice(t,1),a.status>=200&&a.status<300?r&&r():i&&i())};M.push(a);try{a.open("GET",t),a.onloadend=u,a.onerror=u,a.send()}catch(t){a.onerror()}}(a="".concat(m,"?").concat(a),null,(function(){p=!1}))}))},initialize:function initialize(t,r){var i;if(v=r,!(m=t.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");g||((i=t.dvb_probability)&&(1e3===i||i/1e3>=d.random())&&(p=!0),g=!0)},reset:function reset(){resetInitialSettings()}},function setup(){i=Object(a.default)(b).getInstance(),d=Object(u.default)(b).getInstance(),c=Object(l.default)(b).getInstance(),resetInitialSettings()}(),r}DVBReporting.__dashjs_factory_name="DVBReporting",r.default=dashjs.FactoryMaker.getClassFactory(DVBReporting)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":
/*!************************************************************!*\
    !*** ./src/streaming/metrics/utils/DVBErrorsTranslator.js ***!
    \************************************************************/
/*! exports provided: default */function srcStreamingMetricsUtilsDVBErrorsTranslatorJs(t,r,i){i.r(r);var a=i(/*! ../vo/DVBErrors */"./src/streaming/metrics/vo/DVBErrors.js"),u=i(/*! ../MetricsReportingEvents */"./src/streaming/metrics/MetricsReportingEvents.js");function DVBErrorsTranslator(t){var r,i,l=(t=t||{}).eventBus,c=t.dashMetrics,d=t.metricsConstants,g=t.events;function report(t){var r=new a.default;if(i){for(var u in t)t.hasOwnProperty(u)&&(r[u]=t[u]);r.mpdurl||(r.mpdurl=i.originalUrl||i.url),r.terror||(r.terror=new Date),c.addDVBErrors(r)}}function onManifestUpdate(t){t.error||(i=t.manifest)}function onServiceLocationChanged(t){report({errorcode:a.default.BASE_URL_CHANGED,servicelocation:t.entry})}function onBecameReporter(){report({errorcode:a.default.BECAME_REPORTER})}function onMetricEvent(t){if(t.metric===d.HTTP_REQUEST)!function handleHttpMetric(t){(0===t.responsecode||null==t.responsecode||t.responsecode>=400||t.responsecode<100||t.responsecode>=600)&&report({errorcode:t.responsecode||a.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}(t.value)}function onPlaybackError(t){var r;switch(t.error?t.error.code:0){case MediaError.MEDIA_ERR_NETWORK:r=a.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:r=a.default.CORRUPT_MEDIA_OTHER;break;default:return}report({errorcode:r})}return r={initialise:function initialise(){l.on(g.MANIFEST_UPDATED,onManifestUpdate,r),l.on(g.SERVICE_LOCATION_BLACKLIST_CHANGED,onServiceLocationChanged,r),l.on(g.METRIC_ADDED,onMetricEvent,r),l.on(g.METRIC_UPDATED,onMetricEvent,r),l.on(g.PLAYBACK_ERROR,onPlaybackError,r),l.on(u.default.BECAME_REPORTING_PLAYER,onBecameReporter,r)},reset:function reset(){l.off(g.MANIFEST_UPDATED,onManifestUpdate,r),l.off(g.SERVICE_LOCATION_BLACKLIST_CHANGED,onServiceLocationChanged,r),l.off(g.METRIC_ADDED,onMetricEvent,r),l.off(g.METRIC_UPDATED,onMetricEvent,r),l.off(g.PLAYBACK_ERROR,onPlaybackError,r),l.off(u.default.BECAME_REPORTING_PLAYER,onBecameReporter,r)}}}DVBErrorsTranslator.__dashjs_factory_name="DVBErrorsTranslator",r.default=dashjs.FactoryMaker.getSingletonFactory(DVBErrorsTranslator)},"./src/streaming/metrics/utils/HandlerHelpers.js":
/*!*******************************************************!*\
    !*** ./src/streaming/metrics/utils/HandlerHelpers.js ***!
    \*******************************************************/
/*! exports provided: default */function srcStreamingMetricsUtilsHandlerHelpersJs(t,r,i){function HandlerHelpers(){return{reconstructFullMetricName:function reconstructFullMetricName(t,r,i){var a=t;return r&&(a+="("+r,i&&i.length&&(a+=","+i),a+=")"),a},validateN:function validateN(t){if(!t)throw new Error("missing n");if(isNaN(t))throw new Error("n is NaN");if(t<0)throw new Error("n must be positive");return t}}}i.r(r),HandlerHelpers.__dashjs_factory_name="HandlerHelpers",r.default=dashjs.FactoryMaker.getSingletonFactory(HandlerHelpers)},"./src/streaming/metrics/utils/ManifestParsing.js":
/*!********************************************************!*\
    !*** ./src/streaming/metrics/utils/ManifestParsing.js ***!
    \********************************************************/
/*! exports provided: default */function srcStreamingMetricsUtilsManifestParsingJs(t,r,i){i.r(r);var a=i(/*! ../vo/Metrics */"./src/streaming/metrics/vo/Metrics.js"),u=i(/*! ../vo/Range */"./src/streaming/metrics/vo/Range.js"),l=i(/*! ../vo/Reporting */"./src/streaming/metrics/vo/Reporting.js");function ManifestParsing(t){var r,i=(t=t||{}).adapter,c=t.constants;return r={getMetrics:function getMetrics(t){var r=[];return t&&t.Metrics_asArray&&t.Metrics_asArray.forEach((function(d){var g=new a.default,p=i.getIsDynamic(t);d.hasOwnProperty("metrics")&&(g.metrics=d.metrics,d.Range_asArray&&d.Range_asArray.forEach((function(r){var a=new u.default;a.starttime=function getMetricsRangeStartTime(t,r,a){var u,l,d=0;return r?d=i.getAvailabilityStartTime(t)/1e3:(u=i.getRegularPeriods(t)).length&&(d=u[0].start),l=d,a&&a.hasOwnProperty(c.START_TIME)&&(l+=a.starttime),l}(t,p,r),r.hasOwnProperty("duration")?a.duration=r.duration:a.duration=i.getDuration(t),a._useWallClockTime=p,g.Range.push(a)})),d.Reporting_asArray&&(d.Reporting_asArray.forEach((function(t){var r=new l.default;t.hasOwnProperty(c.SCHEME_ID_URI)&&(r.schemeIdUri=t.schemeIdUri,t.hasOwnProperty("value")&&(r.value=t.value),t.hasOwnProperty(c.DVB_REPORTING_URL)&&(r.dvb_reportingUrl=t[c.DVB_REPORTING_URL]),t.hasOwnProperty(c.DVB_PROBABILITY)&&(r.dvb_probability=t[c.DVB_PROBABILITY]),g.Reporting.push(r))})),r.push(g)))})),r}},r}ManifestParsing.__dashjs_factory_name="ManifestParsing",r.default=dashjs.FactoryMaker.getSingletonFactory(ManifestParsing)},"./src/streaming/metrics/utils/MetricSerialiser.js":
/*!*********************************************************!*\
    !*** ./src/streaming/metrics/utils/MetricSerialiser.js ***!
    \*********************************************************/
/*! exports provided: default */function srcStreamingMetricsUtilsMetricSerialiserJs(t,r,i){function MetricSerialiser(){return{serialise:function serialise(t){var r,i,a=[],u=[];for(r in t)if(t.hasOwnProperty(r)&&0!==r.indexOf("_")){if(null==(i=t[r])&&(i=""),Array.isArray(i)){if(!i.length)continue;u=[],i.forEach((function(t){var r="Object"!==Object.prototype.toString.call(t).slice(8,-1);u.push(r?t:serialise(t))})),i=u.map(encodeURIComponent).join(",")}else"string"==typeof i?i=encodeURIComponent(i):i instanceof Date?i=i.toISOString():"number"==typeof i&&(i=Math.round(i));a.push(r+"="+i)}return a.join("&")}}}i.r(r),MetricSerialiser.__dashjs_factory_name="MetricSerialiser",r.default=dashjs.FactoryMaker.getSingletonFactory(MetricSerialiser)},"./src/streaming/metrics/utils/RNG.js":
/*!********************************************!*\
    !*** ./src/streaming/metrics/utils/RNG.js ***!
    \********************************************/
/*! exports provided: default */function srcStreamingMetricsUtilsRNGJs(t,r,i){function RNG(){var t,r,i,a=window.crypto||window.msCrypto,u=Uint32Array,l=Math.pow(2,8*u.BYTES_PER_ELEMENT)-1;function initialise(){a&&(t||(t=new u(10)),a.getRandomValues(t),r=0)}return i={random:function rand(i,u){var c;return i||(i=0),u||(u=1),a?(r===t.length&&initialise(),c=t[r]/l,r+=1):c=Math.random(),c*(u-i)+i}},initialise(),i}i.r(r),RNG.__dashjs_factory_name="RNG",r.default=dashjs.FactoryMaker.getSingletonFactory(RNG)},"./src/streaming/metrics/vo/DVBErrors.js":
/*!***********************************************!*\
    !*** ./src/streaming/metrics/vo/DVBErrors.js ***!
    \***********************************************/
/*! exports provided: default */function srcStreamingMetricsVoDVBErrorsJs(t,r,i){i.r(r);var a=function DVBErrors(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DVBErrors),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};a.SSL_CONNECTION_FAILED_PREFIX="SSL",a.DNS_RESOLUTION_FAILED="C00",a.HOST_UNREACHABLE="C01",a.CONNECTION_REFUSED="C02",a.CONNECTION_ERROR="C03",a.CORRUPT_MEDIA_ISOBMFF="M00",a.CORRUPT_MEDIA_OTHER="M01",a.BASE_URL_CHANGED="F00",a.BECAME_REPORTER="S00",r.default=a},"./src/streaming/metrics/vo/Metrics.js":
/*!*********************************************!*\
    !*** ./src/streaming/metrics/vo/Metrics.js ***!
    \*********************************************/
/*! exports provided: default */function srcStreamingMetricsVoMetricsJs(t,r,i){i.r(r);r.default=function Metrics(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Metrics),this.metrics="",this.Range=[],this.Reporting=[]}},"./src/streaming/metrics/vo/Range.js":
/*!*******************************************!*\
    !*** ./src/streaming/metrics/vo/Range.js ***!
    \*******************************************/
/*! exports provided: default */function srcStreamingMetricsVoRangeJs(t,r,i){i.r(r);r.default=function Range(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Range),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},"./src/streaming/metrics/vo/Reporting.js":
/*!***********************************************!*\
    !*** ./src/streaming/metrics/vo/Reporting.js ***!
    \***********************************************/
/*! exports provided: default */function srcStreamingMetricsVoReportingJs(t,r,i){i.r(r);r.default=function Reporting(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Reporting),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3}},"./src/streaming/models/BaseURLTreeModel.js":
/*!**************************************************!*\
    !*** ./src/streaming/models/BaseURLTreeModel.js ***!
    \**************************************************/
/*! exports provided: default */function srcStreamingModelsBaseURLTreeModelJs(t,r,i){i.r(r);var a=i(/*! ../utils/ObjectUtils */"./src/streaming/utils/ObjectUtils.js"),u=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");var l=NaN,c=function Node(t,r){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Node),this.data={baseUrls:t||null,selectedIdx:r||l},this.children=[]};function BaseURLTreeModel(){var t,r,i,u=this.context,d=Object(a.default)(u).getInstance();function updateChildData(t,r,a){var u=i.getBaseURLsFromElement(a);t[r]?d.areEqual(u,t[r].data.baseUrls)||(t[r].data.baseUrls=u,t[r].data.selectedIdx=l):t[r]=new c(u)}function getBaseURLCollectionsFromManifest(t){!function checkConfig(){if(!i||!i.hasOwnProperty("getBaseURLsFromElement")||!i.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var a=i.getBaseURLsFromElement(t);d.areEqual(a,r.data.baseUrls)||(r.data.baseUrls=a,r.data.selectedIdx=l),t&&t.Period_asArray&&t.Period_asArray.forEach((function(t,a){updateChildData(r.children,a,t),t.AdaptationSet_asArray&&t.AdaptationSet_asArray.forEach((function(t,u){updateChildData(r.children[a].children,u,t),t.Representation_asArray&&t.Representation_asArray.sort(i.getRepresentationSortFunction()).forEach((function(t,i){updateChildData(r.children[a].children[u].children,i,t)}))}))}))}function walk(t,i){var a=i||r;t(a.data),a.children&&a.children.forEach((function(r){return walk(t,r)}))}function reset(){r=new c}return t={reset:reset,update:function update(t){getBaseURLCollectionsFromManifest(t)},getForPath:function getForPath(t){var i=r,a=[i.data];return t&&t.forEach((function(t){(i=i.children[t])&&a.push(i.data)})),a.filter((function(t){return t.baseUrls.length}))},invalidateSelectedIndexes:function invalidateSelectedIndexes(t){walk((function(r){isNaN(r.selectedIdx)||t===r.baseUrls[r.selectedIdx].serviceLocation&&(r.selectedIdx=l)}))},setConfig:function setConfig(t){t.adapter&&(i=t.adapter)}},function setup(){reset()}(),t}BaseURLTreeModel.__dashjs_factory_name="BaseURLTreeModel",r.default=u.default.getClassFactory(BaseURLTreeModel)},"./src/streaming/models/CmcdModel.js":
/*!*******************************************!*\
    !*** ./src/streaming/models/CmcdModel.js ***!
    \*******************************************/
/*! exports provided: default */function srcStreamingModelsCmcdModelJs(t,r,i){i.r(r);var a=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),u=i(/*! ../MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),l=i(/*! ../metrics/MetricsReportingEvents */"./src/streaming/metrics/MetricsReportingEvents.js"),c=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),d=i(/*! ../../core/Settings */"./src/core/Settings.js"),g=i(/*! ../../streaming/constants/Constants */"./src/streaming/constants/Constants.js"),p=i(/*! ../vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),m=i(/*! ../../dash/models/DashManifestModel */"./src/dash/models/DashManifestModel.js"),v=i(/*! ../../core/Utils */"./src/core/Utils.js");function _createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,u=function F(){};return{s:u,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,d=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){d=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(d)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}var b="m",M="a",S="v",E="i",I="c",D="tt",A="k",C="o",N="d",k="s",O="v",L="l";function CmcdModel(){var t,r,i,c,R,j,B,U,z,Y,G=this.context,H=Object(a.default)(G).getInstance(),Q=Object(d.default)(G).getInstance();function _resetInitialSettings(){i={pr:1,nor:null,st:null,sf:null,sid:"".concat(v.default.generateUuid()),cid:null},z={},U={},Y={},_updateStreamProcessors()}function _onPeriodSwitchComplete(){_updateStreamProcessors()}function _updateStreamProcessors(){if(j){var t=j.getStreamController();if(t&&"function"==typeof t.getActiveStream){var r=t.getActiveStream();r&&(B=r.getProcessors())}}}function _copyParameters(t,r){var i,a={},u=_createForOfIteratorHelper(r);try{for(u.s();!(i=u.n()).done;){var l=i.value;t[l]&&(a[l]=t[l])}}catch(t){u.e(t)}finally{u.f()}return a}function _applyWhitelistByKeys(t){var r=Q.get().streaming.cmcd.enabledKeys;return t.filter((function(t){return r.includes(t)}))}function _getCmcdData(t){try{return t.type===p.HTTPRequest.MPD_TYPE?function _getCmcdDataForMpd(){var t=_getGenericCmcdData();return t.ot=b,t}():t.type===p.HTTPRequest.MEDIA_SEGMENT_TYPE?(function _initForMediaType(t){Y.hasOwnProperty(t)||(Y[t]=!1);U.hasOwnProperty(t)||(U[t]=!1);z.hasOwnProperty(t)||(z[t]=!1)}(t.mediaType),function _getCmcdDataForMediaSegment(t){var r,a=_getGenericCmcdData(),u=function _getBitrateByRequest(t){try{var r=t.quality,i=t.mediaInfo.bitrateList;return parseInt(i[r].bandwidth/1e3)}catch(t){return null}}(t),l=function _getObjectDurationByRequest(t){try{return isNaN(t.duration)?null:Math.round(1e3*t.duration)}catch(t){return null}}(t),d=function _getMeasuredThroughputByType(t){try{return 100*parseInt(c.getThroughputHistory().getSafeAverageThroughput(t)/100)}catch(t){return null}}(t.mediaType),p=function _getDeadlineByType(t){try{var r=i.pr,a=R.getCurrentBufferLevel(t);return isNaN(r)||isNaN(a)?null:100*parseInt(a/r*10)}catch(t){return null}}(t.mediaType),m=_getBufferLevelByType(t.mediaType),b=function _getTopBitrateByType(t){try{var r=c.getTopBitrateInfoFor(t);return Math.round(r.bitrate/1e3)}catch(t){return null}}(t.mediaType),E=i.pr,A=function _probeNextRequest(t){if(!B||0===B.length)return;var r,i=_createForOfIteratorHelper(B);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.getType()===t)return a.probeNextRequest()}}catch(t){i.e(t)}finally{i.f()}}(t.mediaType);t.mediaType===g.default.VIDEO&&(r=S);t.mediaType===g.default.AUDIO&&(r=M);t.mediaType===g.default.TEXT&&(r="application/mp4"===t.mediaInfo.mimeType?D:I);var C=Q.get().streaming.cmcd.rtp;C||(C=function _calculateRtp(t){var r=j.getPlaybackRate();r||(r=1);var i=t.quality,a=t.mediaType,u=t.mediaInfo,l=t.duration,c=_getBufferLevelByType(a);0===c&&(c=500);var d=u.bitrateList[i].bandwidth*l/1e3/(c/r/1e3),g=Q.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(Q.get().streaming.cmcd.rtpSafetyFactor)?Q.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(d*g/100)+1)}(t));a.rtp=C,A&&(t.url!==A.url?a.nor=encodeURIComponent(v.default.getRelativeUrl(t.url,A.url)):A.range&&(a.nrr=A.range));u&&(a.br=u);r&&(a.ot=r);isNaN(l)||(a.d=l);isNaN(d)||(a.mtp=d);isNaN(p)||(a.dl=p);isNaN(m)||(a.bl=m);isNaN(b)||(a.tb=b);isNaN(E)||1===E||(a.pr=E);z[t.mediaType]&&(a.bs=!0,z[t.mediaType]=!1);!U[t.mediaType]&&Y[t.mediaType]||(a.su=!0,U[t.mediaType]=!1,Y[t.mediaType]=!0);return a}(t)):t.type===p.HTTPRequest.INIT_SEGMENT_TYPE?function _getCmcdDataForInitSegment(){var t=_getGenericCmcdData();return t.ot=E,t.su=!0,t}():t.type===p.HTTPRequest.OTHER_TYPE||t.type===p.HTTPRequest.XLINK_EXPANSION_TYPE?function _getCmcdDataForOther(){var t=_getGenericCmcdData();return t.ot=C,t}():t.type===p.HTTPRequest.LICENSE?function _getCmcdDataForLicense(t){var r=_getGenericCmcdData();return r.ot=A,r}():null}catch(t){return null}}function _getGenericCmcdData(){var t={},r=Q.get().streaming.cmcd.cid?Q.get().streaming.cmcd.cid:i.cid;return t.v=1,t.sid=Q.get().streaming.cmcd.sid?Q.get().streaming.cmcd.sid:i.sid,t.sid="".concat(t.sid),r&&(t.cid="".concat(r)),isNaN(i.pr)||1===i.pr||null===i.pr||(t.pr=i.pr),i.st&&(t.st=i.st),i.sf&&(t.sf=i.sf),t}function _getBufferLevelByType(t){try{var r=R.getCurrentBufferLevel(t);return isNaN(r)?null:100*parseInt(10*r)}catch(t){return null}}function _onPlaybackRateChanged(t){try{i.pr=t.playbackRate}catch(t){}}function _onManifestLoaded(r){try{var a=t.getIsDynamic(r.data)?L:O,u=r.protocol&&"MSS"===r.protocol?k:N;i.st="".concat(a),i.sf="".concat(u)}catch(t){}}function _onBufferLevelStateChanged(t){try{t.state&&t.mediaType&&t.state===u.default.BUFFER_EMPTY&&(z[t.mediaType]||(z[t.mediaType]=!0),U[t.mediaType]||(U[t.mediaType]=!0))}catch(t){}}function _onPlaybackSeeked(){for(var t in z)z.hasOwnProperty(t)&&(z[t]=!0);for(var r in U)U.hasOwnProperty(r)&&(U[r]=!0)}function _buildFinalString(t){try{if(!t)return null;var r=Object.keys(t).sort((function(t,r){return t.localeCompare(r)})),i=r.length,a=r.reduce((function(r,a,u){return"v"===a&&1===t[a]||("string"==typeof t[a]&&"ot"!==a&&"sf"!==a&&"st"!==a?r+="".concat(a,"=").concat(JSON.stringify(t[a])):r+="".concat(a,"=").concat(t[a]),u<i-1&&(r+=",")),r}),"");return a=(a=a.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(t){return null}}return r={getQueryParameter:function getQueryParameter(t){try{if(Q.get().streaming.cmcd&&Q.get().streaming.cmcd.enabled){var r=_getCmcdData(t),i=function _applyWhitelist(t){try{var r=Q.get().streaming.cmcd.enabledKeys;return Object.keys(t).filter((function(t){return r.includes(t)})).reduce((function(r,i){return r[i]=t[i],r}),{})}catch(r){return t}}(r),a=_buildFinalString(i);return H.trigger(l.default.CMCD_DATA_GENERATED,{url:t.url,mediaType:t.mediaType,cmcdData:r,cmcdString:a}),{key:"CMCD",value:a}}return null}catch(t){return null}},getHeaderParameters:function getHeaderParameters(t){try{if(Q.get().streaming.cmcd&&Q.get().streaming.cmcd.enabled){var r=_getCmcdData(t),i=_copyParameters(r,_applyWhitelistByKeys(["br","d","ot","tb"])),a=_copyParameters(r,_applyWhitelistByKeys(["bl","dl","mtp","nor","nrr","su"])),u=_copyParameters(r,_applyWhitelistByKeys(["bs","rtp"])),c=_copyParameters(r,_applyWhitelistByKeys(["cid","pr","sf","sid","st","v"])),d={"CMCD-Object":_buildFinalString(i),"CMCD-Request":_buildFinalString(a),"CMCD-Status":_buildFinalString(u),"CMCD-Session":_buildFinalString(c)};return H.trigger(l.default.CMCD_DATA_GENERATED,{url:t.url,mediaType:t.mediaType,cmcdData:r,headers:d}),d}return null}catch(t){return null}},setConfig:function setConfig(t){t&&(t.abrController&&(c=t.abrController),t.dashMetrics&&(R=t.dashMetrics),t.playbackController&&(j=t.playbackController))},reset:function reset(){H.off(u.default.PLAYBACK_RATE_CHANGED,_onPlaybackRateChanged,this),H.off(u.default.MANIFEST_LOADED,_onManifestLoaded,this),H.off(u.default.BUFFER_LEVEL_STATE_CHANGED,_onBufferLevelStateChanged,r),H.off(u.default.PLAYBACK_SEEKED,_onPlaybackSeeked,r),_resetInitialSettings()},initialize:function initialize(){H.on(u.default.PLAYBACK_RATE_CHANGED,_onPlaybackRateChanged,r),H.on(u.default.MANIFEST_LOADED,_onManifestLoaded,r),H.on(u.default.BUFFER_LEVEL_STATE_CHANGED,_onBufferLevelStateChanged,r),H.on(u.default.PLAYBACK_SEEKED,_onPlaybackSeeked,r),H.on(u.default.PERIOD_SWITCH_COMPLETED,_onPeriodSwitchComplete,r)}},function setup(){t=Object(m.default)(G).getInstance(),_resetInitialSettings()}(),r}CmcdModel.__dashjs_factory_name="CmcdModel",r.default=c.default.getSingletonFactory(CmcdModel)},"./src/streaming/models/CustomParametersModel.js":
/*!*******************************************************!*\
    !*** ./src/streaming/models/CustomParametersModel.js ***!
    \*******************************************************/
/*! exports provided: default */function srcStreamingModelsCustomParametersModelJs(t,r,i){i.r(r);var a=i(/*! ../../dash/vo/UTCTiming */"./src/dash/vo/UTCTiming.js"),u=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),l=i(/*! ../../core/Settings */"./src/core/Settings.js"),c=i(/*! ../utils/SupervisorTools */"./src/streaming/utils/SupervisorTools.js"),d=i(/*! ../rules/abr/ABRRulesCollection */"./src/streaming/rules/abr/ABRRulesCollection.js"),g=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js");function CustomParametersModel(){var t,r,i,u,p,m,v,b,M=this.context,S=Object(l.default)(M).getInstance();function _resetInitialSettings(){u=[],p=[],m=[],b=[],v=null,r=[]}function _unregisterFilter(t,r){var i=-1;t.some((function(t,a){if(t===r)return i=a,!0})),i<0||t.splice(i,1)}function _findAbrCustomRuleIndex(t){var r;for(r=0;r<b.length;r++)if(b[r].rulename===t)return r;return-1}function addUTCTimingSource(t,i){removeUTCTimingSource(t,i);var u=new a.default;u.schemeIdUri=t,u.value=i,r.push(u)}function removeUTCTimingSource(t,i){Object(c.checkParameterType)(t,"string"),Object(c.checkParameterType)(i,"string"),r.forEach((function(a,u){a.schemeIdUri===t&&a.value===i&&r.splice(u,1)}))}return t={getCustomInitialTrackSelectionFunction:function getCustomInitialTrackSelectionFunction(){return v},setCustomInitialTrackSelectionFunction:function setCustomInitialTrackSelectionFunction(t){v=t},resetCustomInitialTrackSelectionFunction:function resetCustomInitialTrackSelectionFunction(){v=null},getLicenseResponseFilters:function getLicenseResponseFilters(){return p},getLicenseRequestFilters:function getLicenseRequestFilters(){return u},getCustomCapabilitiesFilters:function getCustomCapabilitiesFilters(){return m},registerCustomCapabilitiesFilter:function registerCustomCapabilitiesFilter(t){m.push(t)},registerLicenseResponseFilter:function registerLicenseResponseFilter(t){p.push(t)},registerLicenseRequestFilter:function registerLicenseRequestFilter(t){u.push(t)},unregisterCustomCapabilitiesFilter:function unregisterCustomCapabilitiesFilter(t){_unregisterFilter(m,t)},unregisterLicenseResponseFilter:function unregisterLicenseResponseFilter(t){_unregisterFilter(p,t)},unregisterLicenseRequestFilter:function unregisterLicenseRequestFilter(t){_unregisterFilter(u,t)},addAbrCustomRule:function addAbrCustomRule(t,r,i){if("string"!=typeof t||t!==d.default.ABANDON_FRAGMENT_RULES&&t!==d.default.QUALITY_SWITCH_RULES||"string"!=typeof r)throw g.default.BAD_ARGUMENT_ERROR;var a=_findAbrCustomRuleIndex(r);-1===a?b.push({type:t,rulename:r,rule:i}):(b[a].type=t,b[a].rule=i)},removeAllAbrCustomRule:function removeAllAbrCustomRule(){b=[]},removeAbrCustomRule:function removeAbrCustomRule(t){if(t){var r=_findAbrCustomRuleIndex(t);-1!==r&&b.splice(r,1)}else b=[]},getAbrCustomRules:function getAbrCustomRules(){return b},addUTCTimingSource:addUTCTimingSource,removeUTCTimingSource:removeUTCTimingSource,getUTCTimingSources:function getUTCTimingSources(){return r},clearDefaultUTCTimingSources:function clearDefaultUTCTimingSources(){r=[]},restoreDefaultUTCTimingSources:function restoreDefaultUTCTimingSources(){var t=S.get().streaming.utcSynchronization.defaultTimingSource;addUTCTimingSource(t.scheme,t.value)},setXHRWithCredentialsForType:function setXHRWithCredentialsForType(t,r){t?i[t]=!!r:Object.keys(i).forEach((function(t){setXHRWithCredentialsForType(t,r)}))},getXHRWithCredentialsForType:function getXHRWithCredentialsForType(t){var r=i[t];return void 0===r?i.default:r},setConfig:function setConfig(){},reset:function reset(){_resetInitialSettings()}},function setup(){i={default:false},_resetInitialSettings()}(),t}CustomParametersModel.__dashjs_factory_name="CustomParametersModel",r.default=u.default.getSingletonFactory(CustomParametersModel)},"./src/streaming/models/FragmentModel.js":
/*!***********************************************!*\
    !*** ./src/streaming/models/FragmentModel.js ***!
    \***********************************************/
/*! exports provided: default */function srcStreamingModelsFragmentModelJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../vo/FragmentRequest */"./src/streaming/vo/FragmentRequest.js"),l="loading",c="executed",d="failed";function FragmentModel(t){var r,i,a,g,p=(t=t||{}).eventBus,m=t.events,v=t.dashMetrics,b=t.fragmentLoader,M=t.debug,S=t.streamInfo,E=t.type;function isFragmentLoaded(t){return!!t&&function check(r){var i=!1;return r.some((function(r){if(function isEqualMedia(t,r){return!isNaN(t.index)&&t.startTime===r.startTime&&t.adaptationIndex===r.adaptationIndex&&t.type===r.type}(t,r)||function isEqualInit(t,r){return isNaN(t.index)&&isNaN(r.index)&&t.quality===r.quality}(t,r)||function isEqualComplete(t,r){return t.action===u.default.ACTION_COMPLETE&&t.action===r.action}(t,r))return i=!0})),i}(a)}function getRequestThreshold(t){return isNaN(t.duration)?.25:Math.min(t.duration/8,.5)}function removeExecutedRequestsBeforeTime(t){a=a.filter((function(r){var i=getRequestThreshold(r);return isNaN(r.startTime)||void 0!==t&&r.startTime>=t-i}))}function removeExecutedRequestsInTimeRange(t,r){r<=t+.5||(a=a.filter((function(i){var a=getRequestThreshold(i);return isNaN(i.startTime)||i.startTime>=r-a||isNaN(i.duration)||i.startTime+i.duration<=t+a})))}function getRequestForTime(t,r,i){for(var a=t.length-1;a>=0;a--){var u=t[a],l=u.startTime,c=l+u.duration;if(i=isNaN(i)?getRequestThreshold(u):i,!isNaN(l)&&!isNaN(c)&&r+i>=l&&r-i<c||isNaN(l)&&isNaN(r))return u}return null}function addSchedulingInfoMetrics(t,r){v.addSchedulingInfo(t,r),v.addRequestsQueue(t.mediaType,g,a)}function onLoadingCompleted(t){t.sender===b&&(g.splice(g.indexOf(t.request),1),t.response&&!t.error&&a.push(t.request),addSchedulingInfoMetrics(t.request,t.error?d:c),p.trigger(m.FRAGMENT_LOADING_COMPLETED,{request:t.request,response:t.response,error:t.error,sender:this},{streamId:S.id,mediaType:E}))}function onLoadingInProgress(t){t.sender===b&&p.trigger(m.FRAGMENT_LOADING_PROGRESS,{request:t.request,response:t.response,error:t.error,sender:this},{streamId:S.id,mediaType:E})}function onLoadingAborted(t){t.sender===b&&p.trigger(m.FRAGMENT_LOADING_ABANDONED,{request:t.request},{streamId:S.id,mediaType:E})}function resetInitialSettings(){a=[],g=[]}return r={getStreamId:function getStreamId(){return S.id},getType:function getType(){return E},getRequests:function getRequests(t){var r=t?t.state instanceof Array?t.state:[t.state]:[],i=[];return r.forEach((function(r){var u=function getRequestsForState(t){var r;switch(t){case l:r=g;break;case c:r=a;break;default:r=[]}return r}(r);i=i.concat(function filterRequests(t,r){if(r.hasOwnProperty("time"))return[getRequestForTime(t,r.time,r.threshold)];return t.filter((function(t){for(var i in r)if("state"!==i&&r.hasOwnProperty(i)&&t[i]!=r[i])return!1;return!0}))}(u,t))})),i},isFragmentLoaded:isFragmentLoaded,isFragmentLoadedOrPending:function isFragmentLoadedOrPending(t){var r,i=!1,a=0;if(!(i=isFragmentLoaded(t)))for(a=0;a<g.length;a++)r=g[a],t.url===r.url&&t.startTime===r.startTime&&(i=!0);return i},removeExecutedRequestsBeforeTime:removeExecutedRequestsBeforeTime,removeExecutedRequestsAfterTime:function removeExecutedRequestsAfterTime(t){a=a.filter((function(r){return isNaN(r.startTime)||void 0!==t&&r.startTime<t}))},syncExecutedRequestsWithBufferedRange:function syncExecutedRequestsWithBufferedRange(t,r){if(t&&0!==t.length){for(var i=0,a=0,u=t.length;a<u;a++)removeExecutedRequestsInTimeRange(i,t.start(a)),i=t.end(a);r>0&&removeExecutedRequestsInTimeRange(i,r)}else removeExecutedRequestsBeforeTime()},abortRequests:function abortRequests(){i.debug("abort requests"),b.abort(),g=[]},executeRequest:function executeRequest(t){if(t.action===u.default.ACTION_DOWNLOAD)addSchedulingInfoMetrics(t,l),g.push(t),function loadCurrentFragment(t){p.trigger(m.FRAGMENT_LOADING_STARTED,{request:t},{streamId:S.id,mediaType:E}),b.load(t)}(t);else i.warn("Unknown request action.")},reset:function reset(){p.off(m.LOADING_COMPLETED,onLoadingCompleted,this),p.off(m.LOADING_DATA_PROGRESS,onLoadingInProgress,this),p.off(m.LOADING_ABANDONED,onLoadingAborted,this),b&&b.reset(),resetInitialSettings()},resetInitialSettings:resetInitialSettings,addExecutedRequest:function addExecutedRequest(t){a.push(t)}},function setup(){i=M.getLogger(r),resetInitialSettings(),p.on(m.LOADING_COMPLETED,onLoadingCompleted,r),p.on(m.LOADING_DATA_PROGRESS,onLoadingInProgress,r),p.on(m.LOADING_ABANDONED,onLoadingAborted,r)}(),r}FragmentModel.__dashjs_factory_name="FragmentModel";var g=a.default.getClassFactory(FragmentModel);g.FRAGMENT_MODEL_LOADING=l,g.FRAGMENT_MODEL_EXECUTED=c,g.FRAGMENT_MODEL_CANCELED="canceled",g.FRAGMENT_MODEL_FAILED=d,a.default.updateClassFactory(FragmentModel.__dashjs_factory_name,g),r.default=g},"./src/streaming/models/LowLatencyThroughputModel.js":
/*!***********************************************************!*\
    !*** ./src/streaming/models/LowLatencyThroughputModel.js ***!
    \***********************************************************/
/*! exports provided: default */function srcStreamingModelsLowLatencyThroughputModelJs(t,r,i){i.r(r);var a=i(/*! ../../core/Debug */"./src/core/Debug.js"),u=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function LowLatencyThroughputModel(){var t,r,i=this.context,u={};function setup(){r=Object(a.default)(i).getInstance().getLogger(t)}function createBufferLevelTrendFunction(t){for(var r={},i=0,a=0,u=0,l=0,c=t.length,d=0;d<c;++d)i+=t[d].chunkDownloadTimeRelativeMS,a+=t[d].bufferLevel,u+=t[d].chunkDownloadTimeRelativeMS*t[d].bufferLevel,l+=t[d].chunkDownloadTimeRelativeMS*t[d].chunkDownloadTimeRelativeMS;return r.m=(u-i*a/c)/(l-i*i/c),r.b=a/c-r.m*i/c,function(t){return r.m*t+r.b}}function isBufferSafeAndStable(t){var r,i=!0,a=t.reduce((function(t,r){return t+r.bufferLevelAtSegmentEnd}),0)/t.length;return t.forEach((function(t){Math.abs(t.bufferLevelAtSegmentEnd/t.bufferLevelAtSegmentStart)<.95&&(i=!1),t.bufferLevelAtSegmentEnd/a<.8&&(i=!1),r?r>t.bitrate&&(i=!1):r=t.bitrate})),i}return t={setup:setup,addMeasurement:function addMeasurement(t,r,i,a,l){t&&t.mediaType&&!u[t.mediaType]&&(u[t.mediaType]=[]);var c=t.mediaInfo.bitrateList.find((function(r){return r.id===t.representationId}));u[t.mediaType].push({index:t.index,repId:t.representationId,mediaType:t.mediaType,requestTimeMS:a,adjustedAvailabilityStartTimeMS:t.availabilityStartTime.getTime(),segDurationMS:1e3*t.duration,chunksDurationMS:i.reduce((function(t,r){return t+r.chunkDownloadDurationMS}),0),segmentBytes:i.reduce((function(t,r){return t+r.chunkBytes}),0),bitrate:c&&c.bandwidth,bitrateList:t.mediaInfo.bitrateList,chunkMeasurements:i,fetchDownloadDurationMS:r,throughputCapacityDelayMS:l,getEstimatedBufferLevel:createBufferLevelTrendFunction(i.slice(1))}),u[t.mediaType].length>10&&u[t.mediaType].shift()},getThroughputCapacityDelayMS:function getThroughputCapacityDelayMS(t,r){var i=u[t.mediaType]&&u[t.mediaType].slice(-3);return!i||i.length<3?0:isBufferSafeAndStable(i)?r/4>250?250:r/4:0},getEstimatedDownloadDurationMS:function getEstimatedDownloadDurationMS(t){var i=u[t.mediaType].slice(-1).pop(),a=u[t.mediaType].slice(-3),l=i.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;i.bufferLevelAtSegmentStart=i.getEstimatedBufferLevel(l/2),i.bufferLevelAtSegmentEnd=i.getEstimatedBufferLevel(l);var c=isBufferSafeAndStable(a),d=c?.6:.8;if(i.isBufferStable&&1.05*i.segDurationMS<i.fetchDownloadDurationMS)return i.fetchDownloadDurationMS;if(!c||i.segDurationMS<i.fetchDownloadDurationMS)return.8*i.fetchDownloadDurationMS;if(i.adjustedAvailabilityStartTimeMS<=i.requestTimeMS+i.throughputCapacityDelayMS-i.segDurationMS)return.8*i.fetchDownloadDurationMS;for(var g=i.requestTimeMS+i.throughputCapacityDelayMS-i.adjustedAvailabilityStartTimeMS,p=0,m=0,v=0,b=0;b<i.chunkMeasurements.length;b++){var M=i.chunkMeasurements[b];if(g<m+M.chunkDownloadDurationMS)break;m+=M.chunkDownloadDurationMS,p+=M.chunkBytes,v++}if(g<0&&r.warn("request time was before adjusted availibitly start time"),p&&m&&v>.2*i.chunkMeasurements.length){var S=p/m,E=i.segmentBytes/S;return i.fetchDownloadDurationMS<E?i.fetchDownloadDurationMS*d:E*d}var I=i.bitrate;return i.bitrateList.some((function(t){if(t.bandwidth>i.bitrate)return I=t.bandwidth,!0})),I===i.bitrate?i.fetchDownloadDurationMS*d:d*i.segmentBytes*8*1e3/I}},setup(),t}LowLatencyThroughputModel.__dashjs_factory_name="LowLatencyThroughputModel",r.default=u.default.getSingletonFactory(LowLatencyThroughputModel)},"./src/streaming/models/ManifestModel.js":
/*!***********************************************!*\
    !*** ./src/streaming/models/ManifestModel.js ***!
    \***********************************************/
/*! exports provided: default */function srcStreamingModelsManifestModelJs(t,r,i){i.r(r);var a=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),u=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),l=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function ManifestModel(){var t,r=this.context,i=Object(a.default)(r).getInstance();return{getValue:function getValue(){return t},setValue:function setValue(r){t=r,r&&i.trigger(u.default.MANIFEST_LOADED,{data:r})}}}ManifestModel.__dashjs_factory_name="ManifestModel",r.default=l.default.getSingletonFactory(ManifestModel)},"./src/streaming/models/MediaPlayerModel.js":
/*!**************************************************!*\
    !*** ./src/streaming/models/MediaPlayerModel.js ***!
    \**************************************************/
/*! exports provided: default */function srcStreamingModelsMediaPlayerModelJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/Settings */"./src/core/Settings.js");function MediaPlayerModel(){var t,r,i,a=this.context,l=Object(u.default)(a).getInstance();function getStableBufferTime(){var t=l.get().streaming.buffer.stableBufferTime>0?l.get().streaming.buffer.stableBufferTime:l.get().streaming.buffer.fastSwitchEnabled?20:12,i=r.getLiveDelay();return!isNaN(i)&&i>0?Math.min(t,i):t}return t={getCatchupMaxDrift:function getCatchupMaxDrift(){if(!isNaN(l.get().streaming.liveCatchup.maxDrift)&&l.get().streaming.liveCatchup.maxDrift>0)return l.get().streaming.liveCatchup.maxDrift;var t=i.getServiceDescriptionSettings();return t&&t.liveCatchup&&!isNaN(t.liveCatchup.maxDrift)&&t.liveCatchup.maxDrift>0?t.liveCatchup.maxDrift:12},getCatchupModeEnabled:function getCatchupModeEnabled(){return null!==l.get().streaming.liveCatchup.enabled?l.get().streaming.liveCatchup.enabled:r.getInitialCatchupModeActivated()},getLiveCatchupLatencyThreshold:function getLiveCatchupLatencyThreshold(){try{var t=l.get().streaming.liveCatchup.latencyThreshold,i=r.getLiveDelay();return null===t||isNaN(t)?NaN:Math.max(t,i)}catch(t){return NaN}},getStableBufferTime:getStableBufferTime,getInitialBufferLevel:function getInitialBufferLevel(){var t=l.get().streaming.buffer.initialBufferLevel;return isNaN(t)||t<0?0:Math.min(getStableBufferTime(),t)},getRetryAttemptsForType:function getRetryAttemptsForType(t){var i=isNaN(l.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:l.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return r.getLowLatencyModeEnabled()?l.get().streaming.retryAttempts[t]*i:l.get().streaming.retryAttempts[t]},getRetryIntervalsForType:function getRetryIntervalsForType(t){var i=isNaN(l.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:l.get().streaming.retryIntervals.lowLatencyReductionFactor;return r.getLowLatencyModeEnabled()?l.get().streaming.retryIntervals[t]/i:l.get().streaming.retryIntervals[t]},getCatchupPlaybackRate:function getCatchupPlaybackRate(){if(!isNaN(l.get().streaming.liveCatchup.playbackRate)&&l.get().streaming.liveCatchup.playbackRate>0)return l.get().streaming.liveCatchup.playbackRate;var t=i.getServiceDescriptionSettings();return t&&t.liveCatchup&&!isNaN(t.liveCatchup.playbackRate)&&t.liveCatchup.playbackRate>0?t.liveCatchup.playbackRate:.5},getAbrBitrateParameter:function getAbrBitrateParameter(t,r){try{var a=l.get().streaming.abr[t][r];if(!isNaN(a)&&-1!==a)return a;var u=i.getServiceDescriptionSettings();return u&&u[t]&&!isNaN(u[t][r])?u[t][r]:-1}catch(t){return-1}},setConfig:function setConfig(t){t.playbackController&&(r=t.playbackController),t.serviceDescriptionController&&(i=t.serviceDescriptionController)},reset:function reset(){}},t}MediaPlayerModel.__dashjs_factory_name="MediaPlayerModel",r.default=a.default.getSingletonFactory(MediaPlayerModel)},"./src/streaming/models/MetricsModel.js":
/*!**********************************************!*\
    !*** ./src/streaming/models/MetricsModel.js ***!
    \**********************************************/
/*! exports provided: default */function srcStreamingModelsMetricsModelJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),l=i(/*! ../vo/MetricsList */"./src/streaming/vo/MetricsList.js"),c=i(/*! ../vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),d=i(/*! ../vo/metrics/RepresentationSwitch */"./src/streaming/vo/metrics/RepresentationSwitch.js"),g=i(/*! ../vo/metrics/BufferLevel */"./src/streaming/vo/metrics/BufferLevel.js"),p=i(/*! ../vo/metrics/BufferState */"./src/streaming/vo/metrics/BufferState.js"),m=i(/*! ../vo/metrics/DVRInfo */"./src/streaming/vo/metrics/DVRInfo.js"),v=i(/*! ../vo/metrics/DroppedFrames */"./src/streaming/vo/metrics/DroppedFrames.js"),b=i(/*! ../vo/metrics/ManifestUpdate */"./src/streaming/vo/metrics/ManifestUpdate.js"),M=i(/*! ../vo/metrics/SchedulingInfo */"./src/streaming/vo/metrics/SchedulingInfo.js"),S=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),E=i(/*! ../vo/metrics/RequestsQueue */"./src/streaming/vo/metrics/RequestsQueue.js"),I=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),D=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function MetricsModel(t){var r,i,D=(t=t||{}).settings,A=this.context,C=Object(S.default)(A).getInstance();function metricsChanged(){C.trigger(I.default.METRICS_CHANGED)}function metricChanged(t){C.trigger(I.default.METRIC_CHANGED,{mediaType:t}),metricsChanged()}function metricUpdated(t,r,i){C.trigger(I.default.METRIC_UPDATED,{mediaType:t,metric:r,value:i}),metricChanged(t)}function metricAdded(t,r,i){C.trigger(I.default.METRIC_ADDED,{mediaType:t,metric:r,value:i}),metricChanged(t)}function getMetricsFor(t,r){var a=null;return t?(i.hasOwnProperty(t)?a=i[t]:r||(a=new l.default,i[t]=a),a):a}function pushMetrics(t,r,i){var a=getMetricsFor(t);null!==a&&(a[r].push(i),a[r].length>D.get().streaming.metrics.maxListDepth&&a[r].shift())}function pushAndNotify(t,r,i){pushMetrics(t,r,i),metricAdded(t,r,i)}return r={clearCurrentMetricsForType:function clearCurrentMetricsForType(t){delete i[t],metricChanged(t)},clearAllCurrentMetrics:function clearAllCurrentMetrics(){i={},metricsChanged()},getMetricsFor:getMetricsFor,addHttpRequest:function addHttpRequest(t,r,i,a,l,d,g,p,m,v,b,M,S,E,I,D){var A=new c.HTTPRequest;d&&d!==a&&(addHttpRequest(t,null,i,a,l,null,null,p,m,null,null,null,S,null,null,D),A.actualurl=d),A.tcpid=r,A.type=i,A.url=a,A.range=p,A.trequest=m,A.tresponse=v,A.responsecode=M,A._tfinish=b,A._stream=t,A._mediaduration=S,A._quality=l,A._responseHeaders=E,A._serviceLocation=g,A._fileLoaderType=D,I?I.forEach((function(t){!function appendHttpTrace(t,r,i,a,u){var l=new c.HTTPRequestTrace;return l.s=r,l.d=i,l.b=a,l._t=u,t.trace.push(l),t.interval||(t.interval=0),t.interval+=i,l}(A,t.s,t.d,t.b,t.t)})):(delete A.interval,delete A.trace),pushAndNotify(t,u.default.HTTP_REQUEST,A)},addRepresentationSwitch:function addRepresentationSwitch(t,r,i,a,l){var c=new d.default;c.t=r,c.mt=i,c.to=a,l?c.lto=l:delete c.lto,pushAndNotify(t,u.default.TRACK_SWITCH,c)},addBufferLevel:function addBufferLevel(t,r,i){var a=new g.default;a.t=r,a.level=i,pushAndNotify(t,u.default.BUFFER_LEVEL,a)},addBufferState:function addBufferState(t,r,i){var a=new p.default;a.target=i,a.state=r,pushAndNotify(t,u.default.BUFFER_STATE,a)},addDVRInfo:function addDVRInfo(t,r,i,a){var l=new m.default;l.time=r,l.range=a,l.manifestInfo=i,pushAndNotify(t,u.default.DVR_INFO,l)},addDroppedFrames:function addDroppedFrames(t,r){var i=new v.default,a=getMetricsFor(t).DroppedFrames;r&&(i.time=r.creationTime,i.droppedFrames=r.droppedVideoFrames,a.length>0&&a[a.length-1]==i||pushAndNotify(t,u.default.DROPPED_FRAMES,i))},addSchedulingInfo:function addSchedulingInfo(t,r,i,a,l,c,d,g,p){var m=new M.default;m.mediaType=t,m.t=r,m.type=i,m.startTime=a,m.availabilityStartTime=l,m.duration=c,m.quality=d,m.range=g,m.state=p,pushAndNotify(t,u.default.SCHEDULING_INFO,m)},addRequestsQueue:function addRequestsQueue(t,r,i){var a=new E.default;a.loadingRequests=r,a.executedRequests=i,getMetricsFor(t).RequestsQueue=a,metricAdded(t,u.default.REQUESTS_QUEUE,a)},addManifestUpdate:function addManifestUpdate(t,r,i,l,c,d,g,p,m,v){var M=new b.ManifestUpdate;M.mediaType=t,M.type=r,M.requestTime=i,M.fetchTime=l,M.availabilityStartTime=c,M.presentationStartTime=d,M.clientTimeOffset=g,M.currentTime=p,M.buffered=m,M.latency=v,pushMetrics(a.default.STREAM,u.default.MANIFEST_UPDATE,M),metricAdded(t,u.default.MANIFEST_UPDATE,M)},updateManifestUpdateInfo:function updateManifestUpdateInfo(t,r){if(t){for(var i in r)t[i]=r[i];metricUpdated(t.mediaType,u.default.MANIFEST_UPDATE,t)}},addManifestUpdateStreamInfo:function addManifestUpdateStreamInfo(t,r,i,a,l){if(t){var c=new b.ManifestUpdateStreamInfo;c.id=r,c.index=i,c.start=a,c.duration=l,t.streamInfo.push(c),metricUpdated(t.mediaType,u.default.MANIFEST_UPDATE_STREAM_INFO,t)}},addManifestUpdateRepresentationInfo:function addManifestUpdateRepresentationInfo(t,r,i,a,l,c,d,g){if(t&&t.representationInfo){var p=new b.ManifestUpdateRepresentationInfo;p.id=r,p.index=i,p.streamIndex=a,p.mediaType=l,p.startNumber=d,p.fragmentInfoType=g,p.presentationTimeOffset=c,t.representationInfo.push(p),metricUpdated(t.mediaType,u.default.MANIFEST_UPDATE_TRACK_INFO,t)}},addPlayList:function addPlayList(t){t.trace&&Array.isArray(t.trace)?t.trace.forEach((function(t){t.hasOwnProperty("subreplevel")&&!t.subreplevel&&delete t.subreplevel})):delete t.trace,pushAndNotify(a.default.STREAM,u.default.PLAY_LIST,t)},addDVBErrors:function addDVBErrors(t){pushAndNotify(a.default.STREAM,u.default.DVB_ERRORS,t)}},function setup(){i={}}(),r}MetricsModel.__dashjs_factory_name="MetricsModel",r.default=D.default.getSingletonFactory(MetricsModel)},"./src/streaming/models/URIFragmentModel.js":
/*!**************************************************!*\
    !*** ./src/streaming/models/URIFragmentModel.js ***!
    \**************************************************/
/*! exports provided: default */function srcStreamingModelsURIFragmentModelJs(t,r,i){i.r(r);var a=i(/*! ../vo/URIFragmentData */"./src/streaming/vo/URIFragmentData.js"),u=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function URIFragmentModel(){var t;return{initialize:function initialize(r){if(t=new a.default,!r)return null;var i=r.indexOf("#");if(-1!==i)for(var u=r.substr(i+1).split("&"),l=0,c=u.length;l<c;++l){var d=u[l],g=d.indexOf("=");if(-1!==g){var p=d.substring(0,g);t.hasOwnProperty(p)&&(t[p]=d.substr(g+1))}}},getURIFragmentData:function getURIFragmentData(){return t}}}URIFragmentModel.__dashjs_factory_name="URIFragmentModel",r.default=u.default.getSingletonFactory(URIFragmentModel)},"./src/streaming/models/VideoModel.js":
/*!********************************************!*\
    !*** ./src/streaming/models/VideoModel.js ***!
    \********************************************/
/*! exports provided: default */function srcStreamingModelsVideoModelJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),l=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),c=i(/*! ../../core/Debug */"./src/core/Debug.js"),d=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),g=new Map([[d.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[d.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[d.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[d.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function VideoModel(){var t,r,i,a,p,m=this.context,v=Object(u.default)(m).getInstance(),b=[];function onPlaybackCanPlay(){i&&(i.playbackRate=1,i.removeEventListener("canplay",onPlaybackCanPlay))}function isStalled(){return b.length>0}function onPlaying(){if(i&&isStalled()&&0===i.playbackRate){var t=document.createEvent("Event");t.initEvent("waiting",!0,!1),i.dispatchEvent(t)}}function addEventListener(t,r){i&&i.addEventListener(t,r)}function removeEventListener(t,r){i&&i.removeEventListener(t,r)}function getReadyState(){return i?i.readyState:NaN}function getBufferRange(){return i?i.buffered:null}function getTextTrack(t,r,a,u,l){if(i)for(var c=0;c<i.textTracks.length;c++)if(i.textTracks[c].kind===t&&(!r||i.textTracks[c].label==r)&&i.textTracks[c].language===a&&i.textTracks[c].isTTML===u&&i.textTracks[c].isEmbedded===l)return i.textTracks[c];return null}function waitForReadyState(t,r){t===d.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||getReadyState()>=t?r():function _listenOnce(t,r){addEventListener(t,(function func(){removeEventListener(t,func),r(t)}))}(g.get(t),r)}return t={initialize:function initialize(){v.on(l.default.PLAYBACK_PLAYING,onPlaying,this)},setCurrentTime:function setCurrentTime(t,r){a=t,waitForReadyState(d.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){if(i){if(i.currentTime===a)return void(a=NaN);try{a=r?function stickTimeToBuffered(t){var r=getBufferRange(),i=t,a=9999999999;if(r)for(var u=0;u<r.length;u++){var l=r.start(u),c=r.end(u),d=Math.abs(l-t),g=Math.abs(c-t);if(t>=l&&t<=c)return t;d<a&&(a=d,i=l),g<a&&(a=g,i=c)}return i}(a):a,i.currentTime=a,a=NaN}catch(t){0===i.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout((function(){i.currentTime=a,a=NaN}),400)}}}))},play:function play(){if(i){i.autoplay=!0;var t=i.play();t&&t.catch&&"undefined"!=typeof Promise&&t.catch((function(t){"NotAllowedError"===t.name&&v.trigger(l.default.PLAYBACK_NOT_ALLOWED),r.warn("Caught pending play exception - continuing (".concat(t,")"))}))}},isPaused:function isPaused(){return i?i.paused:null},pause:function pause(){i&&(i.pause(),i.autoplay=!1)},isStalled:isStalled,isSeeking:function isSeeking(){return i?i.seeking||!isNaN(a):null},getTime:function getTime(){return i?isNaN(a)?i.currentTime:a:null},getPlaybackRate:function getPlaybackRate(){return i?i.playbackRate:null},setPlaybackRate:function setPlaybackRate(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i&&(!r&&i.readyState<=2&&t>0?i.addEventListener("canplay",onPlaybackCanPlay):i.playbackRate=t)},getPlayedRanges:function getPlayedRanges(){return i?i.played:null},getEnded:function getEnded(){return i?i.ended:null},setStallState:function setStallState(t,r){!function stallStream(t,r){r?function addStalledStream(t){if(null===t||!i||i.seeking||-1!==b.indexOf(t))return;b.push(t)}(t):function removeStalledStream(t){var r=b.indexOf(t);if(null===t)return;-1!==r&&b.splice(r,1)}(t)}(t,r)},getElement:function getElement(){return i},setElement:function setElement(t){if(!(null==t||t&&/^(VIDEO|AUDIO)$/i.test(t.nodeName)))throw"element is not video or audio DOM type!";(i=t)&&(i.preload="auto")},setSource:function setSource(t){i&&(t?i.src=t:(i.removeAttribute("src"),i.load()))},getSource:function getSource(){return i?i.src:null},getTTMLRenderingDiv:function getTTMLRenderingDiv(){return p},setTTMLRenderingDiv:function setTTMLRenderingDiv(t){(p=t).style.position="absolute",p.style.display="flex",p.style.overflow="hidden",p.style.pointerEvents="none",p.style.top=0,p.style.left=0},getPlaybackQuality:function getPlaybackQuality(){if(!i)return null;var t="webkitDroppedFrameCount"in i&&"webkitDecodedFrameCount"in i,r=null;return"getVideoPlaybackQuality"in i?r=i.getVideoPlaybackQuality():t&&(r={droppedVideoFrames:i.webkitDroppedFrameCount,totalVideoFrames:i.webkitDroppedFrameCount+i.webkitDecodedFrameCount,creationTime:new Date}),r},addEventListener:addEventListener,removeEventListener:removeEventListener,getReadyState:getReadyState,getBufferRange:getBufferRange,getClientWidth:function getClientWidth(){return i?i.clientWidth:NaN},getClientHeight:function getClientHeight(){return i?i.clientHeight:NaN},getTextTracks:function getTextTracks(){return i?i.textTracks:[]},getTextTrack:getTextTrack,addTextTrack:function addTextTrack(t,r,a,u,l){if(!i)return null;var c=getTextTrack(t,r,a,u,l);return c||((c=i.addTextTrack(t,r,a)).isEmbedded=l,c.isTTML=u),c},appendChild:function appendChild(t){i&&(i.appendChild(t),void 0!==t.isTTML&&(i.textTracks[i.textTracks.length-1].isTTML=t.isTTML,i.textTracks[i.textTracks.length-1].isEmbedded=t.isEmbedded))},removeChild:function removeChild(t){i&&i.removeChild(t)},getVideoWidth:function getVideoWidth(){return i?i.videoWidth:NaN},getVideoHeight:function getVideoHeight(){return i?i.videoHeight:NaN},getVideoRelativeOffsetTop:function getVideoRelativeOffsetTop(){var t=i.parentNode.host||i.parentNode;return t?i.getBoundingClientRect().top-t.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function getVideoRelativeOffsetLeft(){var t=i.parentNode.host||i.parentNode;return t?i.getBoundingClientRect().left-t.getBoundingClientRect().left:NaN},waitForReadyState:waitForReadyState,reset:function reset(){v.off(l.default.PLAYBACK_PLAYING,onPlaying,this)}},function setup(){r=Object(c.default)(m).getInstance().getLogger(t),a=NaN}(),t}VideoModel.__dashjs_factory_name="VideoModel",r.default=a.default.getSingletonFactory(VideoModel)},"./src/streaming/net/FetchLoader.js":
/*!******************************************!*\
    !*** ./src/streaming/net/FetchLoader.js ***!
    \******************************************/
/*! exports provided: default */function srcStreamingNetFetchLoaderJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/Settings */"./src/core/Settings.js"),l=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js");function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],a=!0,u=!1,l=void 0;try{for(var c,d=t[Symbol.iterator]();!(a=(c=d.next()).done)&&(i.push(c.value),!r||i.length!==r);a=!0);}catch(t){u=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(u)throw l}}return i}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}function FetchLoader(t){t=t||{};var r,i,a=this.context,c=t.requestModifier,d=t.lowLatencyThroughputModel,g=t.boxParser,p=Object(u.default)(a).getInstance();function read(t,r){t.reader.read().then(r).catch((function(r){t.onerror&&200===t.response.status&&t.onerror(r)}))}function calculateDownloadedTime(t,r){try{if((t=t.filter((function(i){return i.bytes>r/4/t.length}))).length>1){var i=0,a=(t[t.length-1].ts-t[0].ts)/t.length;return t.forEach((function(r,u){var l=t[u+1];if(l){var c=l.ts-r.ts;i+=c<a?c:0}})),i}return null}catch(t){return null}}return r={load:function load(t){var r,a=new Date,u=t.request,m=new Headers;if(u.range&&m.append("Range","bytes="+u.range),t.headers)for(var v in t.headers){var b=t.headers[v];b&&m.append(v,b)}u.requestStartDate||(u.requestStartDate=a),c&&c.modifyRequestHeader({setRequestHeader:function setRequestHeader(t,r){m.append(t,r)}}),"function"==typeof window.AbortController&&(r=new AbortController,t.abortController=r,r.signal.onabort=t.onabort);var M={method:t.method,headers:m,credentials:t.withCredentials?"include":void 0,signal:r?r.signal:void 0},S=p.get().streaming.abr.fetchThroughputCalculationMode,E=Date.now(),I=0;new Promise((function(t){if(S===l.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&d&&(I=d.getThroughputCapacityDelayMS(u,1e3*i.getCurrentBufferLevel(u.mediaType))))return setTimeout(t,I);t()})).then((function(){var r=Date.now();fetch(t.url,M).then((function(a){t.response||(t.response={}),t.response.status=a.status,t.response.statusText=a.statusText,t.response.responseURL=a.url,a.ok||t.onerror();var c,p="",m=function _createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,u=function F(){};return{s:u,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,d=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){d=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(d)throw l}}}}(a.headers.keys());try{for(m.s();!(c=m.n()).done;){var v=c.value;p+=v+": "+a.headers.get(v)+"\r\n"}}catch(t){m.e(t)}finally{m.f()}if(t.response.responseHeaders=p,!a.body)return a.arrayBuffer().then((function(r){t.response.response=r;var i={loaded:r.byteLength,total:r.byteLength,stream:!1};t.progress(i),t.onload(),t.onend()}));var b=parseInt(a.headers.get("Content-Length"),10),M=0,D=!1,A=new Uint8Array,C=0;if(S===l.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&d){var N=r,k=0,O=_slicedToArray(a.body.tee(),2),L=O[0],R=O[1];!function fetchMeassurement(a){var l=a.getReader(),c=[];l.read().then((function processFetch(a){var g=a.value,m=a.done;if(k=Date.now(),g&&g.length){var v=k-N,b=g.length;c.push({chunkDownloadTimeRelativeMS:k-r,chunkDownloadDurationMS:v,chunkBytes:b,kbps:Math.round(8*b/(v/1e3)),bufferLevel:i.getCurrentBufferLevel(u.mediaType)})}if(m){var M=k-r,S=c.reduce((function(t,r){return t+r.chunkBytes}),0);return d.addMeasurement(u,M,c,E,I,p),void t.progress({loaded:S,total:S,lengthComputable:!0,time:d.getEstimatedDownloadDurationMS(u),stream:!0})}return N=Date.now(),l.read().then(processFetch)}))}(L),t.reader=R.getReader()}else t.reader=a.body.getReader();var j=[],B=[],U=[],z=!0;read(t,(function processResult(r){var i=r.value;if(r.done){if(A){if(S!==l.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var a=null;S===l.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&(a=function calculateThroughputByChunkData(t,r){try{var i,a;i=t.filter((function(r,i){return i<t.length-1})),a=r.filter((function(t,i){return i<r.length-1}));var u=[];if(i.length>1){for(var l=0,c=0,d=0;d<i.length;d++)if(i[d]&&a[d]){var g=a[d].ts-i[d].ts;if(g>1)u.push(8*a[d].bytes/g);else{0===c&&(c=i[d].ts);var p=a[d].ts-c;p>1?(u.push(8*l/p),l=0,c=0):l+=a[d].bytes}}if(u.length>0)return u.reduce((function(t,r){return t+r}),0)/u.length}return null}catch(t){return null}}(B,U)),t.progress({loaded:M,total:isNaN(b)?M:b,lengthComputable:!0,time:calculateDownloadedTime(j,M),throughput:a,stream:!0})}t.response.response=A.buffer}return t.onload(),void t.onend()}if(i&&i.length>0){if(A=function concatTypedArray(t,r){if(0===t.length)return r;var i=new Uint8Array(t.length+r.length);return i.set(t),i.set(r,t.length),i}(A,i),M+=i.length,j.push({ts:Date.now(),bytes:i.length}),S===l.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&z)g.findLastTopIsoBoxCompleted(["moof"],A,C).found&&(z=!1,B.push({ts:performance.now(),bytes:i.length}));var u=g.findLastTopIsoBoxCompleted(["moov","mdat"],A,C);if(u.found){var c,d=u.lastCompletedOffset+u.size;S!==l.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||z||(z=!0,U.push({ts:performance.now(),bytes:A.length})),d===A.length?(c=A,A=new Uint8Array):(c=new Uint8Array(A.subarray(0,d)),A=A.subarray(d)),t.progress({data:c.buffer,lengthComputable:!1,noTrace:!0}),C=0}else C=u.lastCompletedOffset,D||(t.progress({lengthComputable:!1,noTrace:!0}),D=!0)}read(t,processResult)}))})).catch((function(r){t.onerror&&t.onerror(r)}))}))},abort:function abort(t){if(t.abortController)t.abortController.abort();else if(t.reader)try{t.reader.cancel(),t.onabort()}catch(t){}},calculateDownloadedTime:calculateDownloadedTime,setup:function setup(t){i=t.dashMetrics}},r}FetchLoader.__dashjs_factory_name="FetchLoader";var c=a.default.getClassFactory(FetchLoader);r.default=c},"./src/streaming/net/HTTPLoader.js":
/*!*****************************************!*\
    !*** ./src/streaming/net/HTTPLoader.js ***!
    \*****************************************/
/*! exports provided: default */function srcStreamingNetHTTPLoaderJs(t,r,i){i.r(r);var a=i(/*! ./XHRLoader */"./src/streaming/net/XHRLoader.js"),u=i(/*! ./FetchLoader */"./src/streaming/net/FetchLoader.js"),l=i(/*! ../vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),c=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),d=i(/*! ../vo/DashJSError */"./src/streaming/vo/DashJSError.js"),g=i(/*! ../models/CmcdModel */"./src/streaming/models/CmcdModel.js"),p=i(/*! ../../core/Utils */"./src/core/Utils.js"),m=i(/*! ../../core/Debug */"./src/core/Debug.js"),v=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),b=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),M=i(/*! ../../core/Settings */"./src/core/Settings.js"),S=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),E=i(/*! ../models/LowLatencyThroughputModel */"./src/streaming/models/LowLatencyThroughputModel.js"),I=i(/*! ../models/CustomParametersModel */"./src/streaming/models/CustomParametersModel.js");function _defineProperty(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function HTTPLoader(t){t=t||{};var r,i,c,D,A,C,N,k,O,L=this.context,R=t.errHandler,j=t.dashMetrics,B=t.mediaPlayerModel,U=t.requestModifier,z=t.boxParser,Y=t.errors,G=t.requestTimeout||0,H=Object(v.default)(L).getInstance(),Q=Object(M.default)(L).getInstance();function internalLoad(t,r){var g,m=t.request,v=[],M=!0,E=!0,I=new Date,Y=I,V=0,W=null;if(!U||!j||!R)throw new Error("config object is not correct or missing");var $,K=function handleLoaded(t){if(E=!1,m.requestStartDate=I,m.requestEndDate=new Date,m.firstByteDate=m.firstByteDate||I,m.fileLoaderType=W,!m.checkExistenceOnly){var r=g.response?g.response.responseURL:null,i=g.response?g.response.status:null,a=g.response&&g.response.getAllResponseHeaders?g.response.getAllResponseHeaders():g.response?g.response.responseHeaders:[];j.addHttpRequest(m,r,i,a,t?v:null),m.type===l.HTTPRequest.MPD_TYPE&&j.addManifestUpdate(m)}},q=function onloadend(){if(-1!==i.indexOf(g)&&(i.splice(i.indexOf(g),1),E))if(K(!1),r>0){try{if(Q.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&m.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE)B.getRetryAttemptsForType(l.HTTPRequest.MEDIA_SEGMENT_TYPE)===r&&H.trigger(b.default.ATTEMPT_BACKGROUND_SYNC)}catch(t){}r--;var a={config:t};D.push(a),a.timeout=setTimeout((function(){-1!==D.indexOf(a)&&(D.splice(D.indexOf(a),1),internalLoad(t,r))}),B.getRetryIntervalsForType(m.type))}else{if(m.type===l.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;R.error(new d.default(A[m.type],m.url+" is not available",{request:m,response:g.response})),t.error&&t.error(m,"error",g.response.statusText),t.complete&&t.complete(m,g.response.statusText)}};m.hasOwnProperty("availabilityTimeComplete")&&!1===m.availabilityTimeComplete&&window.fetch&&"arraybuffer"===m.responseType&&m.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE?(($=Object(u.default)(L).create({requestModifier:U,lowLatencyThroughputModel:k,boxParser:z})).setup({dashMetrics:j}),W=S.default.FILE_LOADER_TYPES.FETCH):($=Object(a.default)(L).create({requestModifier:U}),W=S.default.FILE_LOADER_TYPES.XHR);var X=null,Z=U.modifyRequestURL(m.url);if(Q.get().streaming.cmcd&&Q.get().streaming.cmcd.enabled){var J=Q.get().streaming.cmcd.mode;if(J===S.default.CMCD_MODE_QUERY){var ee=function _getAdditionalQueryParameter(t){try{var r=[],i=C.getQueryParameter(t);return i&&r.push(i),r}catch(t){return[]}}(m);Z=p.default.addAditionalQueryParameterToUrl(Z,ee)}else J===S.default.CMCD_MODE_HEADER&&(X=C.getHeaderParameters(m))}m.url=Z;var te=m.checkExistenceOnly?l.HTTPRequest.HEAD:l.HTTPRequest.GET,re=N.getXHRWithCredentialsForType(m.type);g={url:Z,method:te,withCredentials:re,request:m,onload:function onload(){g.response.status>=200&&g.response.status<=299&&(K(!0),t.success&&t.success(g.response.response,g.response.statusText,g.response.responseURL),t.complete&&t.complete(m,g.response.statusText))},onend:q,onerror:q,progress:function progress(r){var i=new Date;M&&(M=!1,(!r.lengthComputable||r.lengthComputable&&r.total!==r.loaded)&&(m.firstByteDate=i)),r.lengthComputable&&(m.bytesLoaded=r.loaded,m.bytesTotal=r.total),r.noTrace||(v.push({s:Y,d:r.time?r.time:i.getTime()-Y.getTime(),b:[r.loaded?r.loaded-V:0],t:r.throughput}),Y=i,V=r.loaded),t.progress&&r&&t.progress(r)},onabort:function onabort(){t.abort&&t.abort(m)},ontimeout:function ontimeout(t){var r;if(t.lengthComputable){var i=t.loaded/t.total*100;r="Request timeout: loaded: "+t.loaded+", out of: "+t.total+" : "+i.toFixed(3)+"% Completed"}else r="Request timeout: non-computable download size";O.warn(r)},loader:$,timeout:G,headers:X};var ne=(new Date).getTime();if(isNaN(m.delayLoadingTime)||ne>=m.delayLoadingTime)i.push(g),$.load(g);else{var ie={httpRequest:g};c.push(ie),ie.delayTimeout=setTimeout((function(){if(-1!==c.indexOf(ie)){c.splice(c.indexOf(ie),1);try{I=new Date,Y=I,i.push(ie.httpRequest),$.load(ie.httpRequest)}catch(t){ie.httpRequest.onerror()}}}),m.delayLoadingTime-ne)}}return r={load:function load(t){t.request?internalLoad(t,B.getRetryAttemptsForType(t.request.type)):t.error&&t.error(t.request,"error")},abort:function abort(){D.forEach((function(t){clearTimeout(t.timeout),t.config.request&&t.config.abort&&t.config.abort(t.config.request)})),D=[],c.forEach((function(t){return clearTimeout(t.delayTimeout)})),c=[],i.forEach((function(t){t.request.type!==l.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(t.onloadend=t.onerror=t.onprogress=void 0,t.loader.abort(t))})),i=[]}},function setup(){var t;O=Object(m.default)(L).getInstance().getLogger(r),i=[],c=[],D=[],C=Object(g.default)(L).getInstance(),k=Object(E.default)(L).getInstance(),N=Object(I.default)(L).getInstance(),_defineProperty(t={},l.HTTPRequest.MPD_TYPE,Y.DOWNLOAD_ERROR_ID_MANIFEST_CODE),_defineProperty(t,l.HTTPRequest.XLINK_EXPANSION_TYPE,Y.DOWNLOAD_ERROR_ID_XLINK_CODE),_defineProperty(t,l.HTTPRequest.INIT_SEGMENT_TYPE,Y.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),_defineProperty(t,l.HTTPRequest.MEDIA_SEGMENT_TYPE,Y.DOWNLOAD_ERROR_ID_CONTENT_CODE),_defineProperty(t,l.HTTPRequest.INDEX_SEGMENT_TYPE,Y.DOWNLOAD_ERROR_ID_CONTENT_CODE),_defineProperty(t,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,Y.DOWNLOAD_ERROR_ID_CONTENT_CODE),_defineProperty(t,l.HTTPRequest.OTHER_TYPE,Y.DOWNLOAD_ERROR_ID_CONTENT_CODE),A=t}(),r}HTTPLoader.__dashjs_factory_name="HTTPLoader";var D=c.default.getClassFactory(HTTPLoader);r.default=D},"./src/streaming/net/SchemeLoaderFactory.js":
/*!**************************************************!*\
    !*** ./src/streaming/net/SchemeLoaderFactory.js ***!
    \**************************************************/
/*! exports provided: default */function srcStreamingNetSchemeLoaderFactoryJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../streaming/net/HTTPLoader */"./src/streaming/net/HTTPLoader.js");function SchemeLoaderFactory(){var t,r;function unregisterAllLoader(){r={}}function reset(){unregisterAllLoader()}return function setup(){reset()}(),t={getLoader:function getLoader(t){for(var i in r)if(r.hasOwnProperty(i)&&t.startsWith(i))return r[i];return u.default},registerLoader:function registerLoader(t,i){r[t]=i},unregisterLoader:function unregisterLoader(t){r[t]&&delete r[t]},unregisterAllLoader:unregisterAllLoader,reset:reset},t}SchemeLoaderFactory.__dashjs_factory_name="SchemeLoaderFactory";var l=a.default.getSingletonFactory(SchemeLoaderFactory);r.default=l},"./src/streaming/net/URLLoader.js":
/*!****************************************!*\
    !*** ./src/streaming/net/URLLoader.js ***!
    \****************************************/
/*! exports provided: default */function srcStreamingNetURLLoaderJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../streaming/net/SchemeLoaderFactory */"./src/streaming/net/SchemeLoaderFactory.js");function URLLoader(t){t=t||{};var r,i,a,l=this.context;return i=Object(u.default)(l).getInstance(),r={load:function load(r){if(!a){var u=i.getLoader(r&&r.request?r.request.url:null);a=u(l).create({errHandler:t.errHandler,mediaPlayerModel:t.mediaPlayerModel,requestModifier:t.requestModifier,dashMetrics:t.dashMetrics,boxParser:t.boxParser?t.boxParser:null,constants:t.constants?t.constants:null,dashConstants:t.dashConstants?t.dashConstants:null,urlUtils:t.urlUtils?t.urlUtils:null,requestTimeout:isNaN(t.requestTimeout)?0:t.requestTimeout,errors:t.errors})}a.load(r)},abort:function abort(){a&&a.abort()}},r}URLLoader.__dashjs_factory_name="URLLoader";var l=a.default.getClassFactory(URLLoader);r.default=l},"./src/streaming/net/XHRLoader.js":
/*!****************************************!*\
    !*** ./src/streaming/net/XHRLoader.js ***!
    \****************************************/
/*! exports provided: default */function srcStreamingNetXHRLoaderJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function XHRLoader(t){var r=(t=t||{}).requestModifier;return{load:function load(t){var i=new Date,a=t.request,u=new XMLHttpRequest;if(u.open(t.method,t.url,!0),a.responseType&&(u.responseType=a.responseType),a.range&&u.setRequestHeader("Range","bytes="+a.range),a.requestStartDate||(a.requestStartDate=i),r&&(u=r.modifyRequestHeader(u)),t.headers)for(var l in t.headers){var c=t.headers[l];c&&u.setRequestHeader(l,c)}u.withCredentials=t.withCredentials,u.onload=t.onload,u.onloadend=t.onend,u.onerror=t.onerror,u.onprogress=t.progress,u.onabort=t.onabort,u.ontimeout=t.ontimeout,u.timeout=t.timeout,u.send(),t.response=u},abort:function abort(t){var r=t.response;r.onloadend=r.onerror=r.onprogress=void 0,r.abort()}}}XHRLoader.__dashjs_factory_name="XHRLoader";var u=a.default.getClassFactory(XHRLoader);r.default=u},"./src/streaming/protection/CommonEncryption.js":
/*!******************************************************!*\
    !*** ./src/streaming/protection/CommonEncryption.js ***!
    \******************************************************/
/*! exports provided: default */function srcStreamingProtectionCommonEncryptionJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},u=function(){function CommonEncryption(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,CommonEncryption)}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(CommonEncryption,null,[{key:"findCencContentProtection",value:function findCencContentProtection(t){for(var r=null,i=0;i<t.length;++i){var a=t[i];"urn:mpeg:dash:mp4protection:2011"!==a.schemeIdUri.toLowerCase()||"cenc"!==a.value.toLowerCase()&&"cbcs"!==a.value.toLowerCase()||(r=a)}return r}},{key:"getPSSHData",value:function getPSSHData(t){var r=8,i=new DataView(t),a=i.getUint8(r);return r+=20,a>0&&(r+=4+16*i.getUint32(r)),r+=4,t.slice(r)}},{key:"getPSSHForKeySystem",value:function getPSSHForKeySystem(t,r){var i=CommonEncryption.parsePSSHList(r);return t&&i.hasOwnProperty(t.uuid.toLowerCase())?i[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function parseInitDataFromContentProtection(t,r){return"pssh"in t?(t.pssh.__text=t.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),r.decodeArray(t.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function parsePSSHList(t){if(null==t)return[];for(var r=new DataView(t.buffer||t),i={},a=0;;){var u,l,c=void 0,d=a;if(a>=r.buffer.byteLength)break;if(u=a+r.getUint32(a),a+=4,1886614376===r.getUint32(a))if(a+=4,0===(l=r.getUint8(a))||1===l){a++,a+=3,c="";var g=void 0,p=void 0;for(g=0;g<4;g++)c+=1===(p=r.getUint8(a+g).toString(16)).length?"0"+p:p;for(a+=4,c+="-",g=0;g<2;g++)c+=1===(p=r.getUint8(a+g).toString(16)).length?"0"+p:p;for(a+=2,c+="-",g=0;g<2;g++)c+=1===(p=r.getUint8(a+g).toString(16)).length?"0"+p:p;for(a+=2,c+="-",g=0;g<2;g++)c+=1===(p=r.getUint8(a+g).toString(16)).length?"0"+p:p;for(a+=2,c+="-",g=0;g<6;g++)c+=1===(p=r.getUint8(a+g).toString(16)).length?"0"+p:p;a+=6,a+=4,i[c=c.toLowerCase()]=r.buffer.slice(d,u),a=u}else a=u;else a=u}return i}},{key:"getLicenseServerUrlFromMediaInfo",value:function getLicenseServerUrlFromMediaInfo(t,r){try{if(!t||0===t.length)return null;for(var i=0,u=null;i<t.length&&!u;){var l=t[i];if(l&&l.contentProtection&&l.contentProtection.length>0){var c=l.contentProtection.filter((function(t){return t.schemeIdUri&&t.schemeIdUri===r}));if(c&&c.length>0)for(var d=0;d<c.length&&!u;){for(var g=c[d],p=0;p<a.attributes.length&&!u;){for(var m=0,v=a.attributes[p];m<a.prefixes.length&&!u;){var b=a.prefixes[m];g[v]&&g[v].__prefix&&g[v].__prefix===b&&g[v].__text&&(u=g[v].__text),m+=1}p+=1}d+=1}}i+=1}return u}catch(t){return null}}}]),CommonEncryption}();r.default=u},"./src/streaming/protection/Protection.js":
/*!************************************************!*\
    !*** ./src/streaming/protection/Protection.js ***!
    \************************************************/
/*! exports provided: default */function srcStreamingProtectionProtectionJs(t,r,i){i.r(r);var a=i(/*! ./controllers/ProtectionController */"./src/streaming/protection/controllers/ProtectionController.js"),u=i(/*! ./controllers/ProtectionKeyController */"./src/streaming/protection/controllers/ProtectionKeyController.js"),l=i(/*! ./ProtectionEvents */"./src/streaming/protection/ProtectionEvents.js"),c=i(/*! ./errors/ProtectionErrors */"./src/streaming/protection/errors/ProtectionErrors.js"),d=i(/*! ./models/ProtectionModel_21Jan2015 */"./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),g=i(/*! ./models/ProtectionModel_3Feb2014 */"./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),p=i(/*! ./models/ProtectionModel_01b */"./src/streaming/protection/models/ProtectionModel_01b.js"),m=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],v=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Protection(){var t,r=this.context;function _getAPI(t,r){for(var i=0;i<r.length;i++){var a=r[i];if("function"==typeof t[a[Object.keys(a)[0]]])return a}return null}return t={createProtectionSystem:function createProtectionSystem(i){var l=null,c=Object(u.default)(r).getInstance();c.setConfig({debug:i.debug,BASE64:i.BASE64,settings:i.settings}),c.initialize();var b=function _getProtectionModel(i){var a=i.debug,u=a.getLogger(t),l=i.eventBus,c=i.errHandler,b=i.videoModel?i.videoModel.getElement():null;return b&&void 0===b.onencrypted||b&&void 0===b.mediaKeys?_getAPI(b,v)?(u.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Object(g.default)(r).create({debug:a,eventBus:l,events:i.events,api:_getAPI(b,v)})):_getAPI(b,m)?(u.info("EME detected on this user agent! (ProtectionModel_01b)"),Object(p.default)(r).create({debug:a,eventBus:l,errHandler:c,events:i.events,api:_getAPI(b,m)})):(u.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(u.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Object(d.default)(r).create({debug:a,eventBus:l,events:i.events}))}(i);return!l&&b&&(l=Object(a.default)(r).create({protectionModel:b,protectionKeyController:c,eventBus:i.eventBus,debug:i.debug,events:i.events,BASE64:i.BASE64,constants:i.constants,cmcdModel:i.cmcdModel,customParametersModel:i.customParametersModel,settings:i.settings}),i.capabilities.setEncryptedMediaSupported(!0)),l}},t}Protection.__dashjs_factory_name="Protection";var b=dashjs.FactoryMaker.getClassFactory(Protection);b.events=l.default,b.errors=c.default,dashjs.FactoryMaker.updateClassFactory(Protection.__dashjs_factory_name,b),r.default=b},"./src/streaming/protection/ProtectionEvents.js":
/*!******************************************************!*\
    !*** ./src/streaming/protection/ProtectionEvents.js ***!
    \******************************************************/
/*! exports provided: default */function srcStreamingProtectionProtectionEventsJs(t,r,i){function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}i.r(r);var a=new(function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(ProtectionEvents,t);var r=_createSuper(ProtectionEvents);function ProtectionEvents(){var t;return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ProtectionEvents),(t=r.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",t.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",t.KEY_ADDED="public_keyAdded",t.KEY_ERROR="public_keyError",t.KEY_MESSAGE="public_keyMessage",t.KEY_SESSION_CLOSED="public_keySessionClosed",t.KEY_SESSION_CREATED="public_keySessionCreated",t.KEY_SESSION_REMOVED="public_keySessionRemoved",t.KEY_STATUSES_CHANGED="public_keyStatusesChanged",t.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",t.KEY_SYSTEM_SELECTED="public_keySystemSelected",t.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",t.LICENSE_REQUEST_SENDING="public_licenseRequestSending",t.NEED_KEY="needkey",t.PROTECTION_CREATED="public_protectioncreated",t.PROTECTION_DESTROYED="public_protectiondestroyed",t.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",t.TEARDOWN_COMPLETE="protectionTeardownComplete",t.VIDEO_ELEMENT_SELECTED="videoElementSelected",t.KEY_SESSION_UPDATED="public_keySessionUpdated",t}return ProtectionEvents}(i(/*! ../../core/events/EventsBase */"./src/core/events/EventsBase.js").default));r.default=a},"./src/streaming/protection/controllers/ProtectionController.js":
/*!**********************************************************************!*\
    !*** ./src/streaming/protection/controllers/ProtectionController.js ***!
    \**********************************************************************/
/*! exports provided: default */function srcStreamingProtectionControllersProtectionControllerJs(t,r,i){i.r(r);var a=i(/*! ../CommonEncryption */"./src/streaming/protection/CommonEncryption.js"),u=i(/*! ../vo/MediaCapability */"./src/streaming/protection/vo/MediaCapability.js"),l=i(/*! ../vo/KeySystemConfiguration */"./src/streaming/protection/vo/KeySystemConfiguration.js"),c=i(/*! ../errors/ProtectionErrors */"./src/streaming/protection/errors/ProtectionErrors.js"),d=i(/*! ../../vo/DashJSError */"./src/streaming/vo/DashJSError.js"),g=i(/*! ../vo/LicenseRequest */"./src/streaming/protection/vo/LicenseRequest.js"),p=i(/*! ../vo/LicenseResponse */"./src/streaming/protection/vo/LicenseResponse.js"),m=i(/*! ../../vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),v=i(/*! ../../../core/Utils */"./src/core/Utils.js"),b=i(/*! ../../constants/Constants */"./src/streaming/constants/Constants.js"),M=i(/*! ../../../core/FactoryMaker */"./src/core/FactoryMaker.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function ProtectionController(t){var r,i,M,S,E,I,D,A,C,N,k,O=(t=t||{}).protectionKeyController,L=t.protectionModel,R=t.eventBus,j=t.events,B=t.debug,U=t.BASE64,z=t.constants,Y=[],G=t.cmcdModel,H=t.settings,Q=t.customParametersModel;function checkConfig(){if(!(R&&R.hasOwnProperty("on")&&O&&O.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function _selectKeySystem(t,r){C?M.push(t):A?A&&function _initiateWithExistingKeySystem(t){var r=t.findIndex((function(t){return t.ks===A})),i=t[r];if(-1===r||!i.initData)return;_loadOrCreateKeySession(i)}(t):function _selectInitialKeySystem(t,r){C=!0;var a,u=[];t=t.sort((function(r,i){return(E&&E[r.ks.systemString]&&E[r.ks.systemString].priority>=0?E[r.ks.systemString].priority:t.length)-(E&&E[i.ks.systemString]&&E[i.ks.systemString].priority>=0?E[i.ks.systemString].priority:t.length)})),M.push(t);for(var l=0;l<t.length;l++){var g=_getKeySystemConfiguration(t[l]);u.push({ks:t[l].ks,configs:[g],protData:t[l].protData})}L.requestKeySystemAccess(u).then((function(t){var r=(a=t.data).mksa&&a.mksa.selectedSystemString?a.mksa.selectedSystemString:a.keySystem.systemString;return i.info("DRM: KeySystem Access Granted for system string ("+r+")!  Selecting key system..."),L.selectKeySystem(a)})).then((function(t){if(A=t,C=!1,L){R.trigger(j.KEY_SYSTEM_SELECTED,{data:a});var r,i=_getProtDataForKeySystem(A);i&&i.serverCertificate&&i.serverCertificate.length>0&&L.setServerCertificate(U.decodeArray(i.serverCertificate).buffer);for(var u=0;u<M.length;u++)for(r=0;r<M[u].length;r++)if(A===M[u][r].ks){_loadOrCreateKeySession(M[u][r]);break}}})).catch((function(t){A=null,C=!1,r||R.trigger(j.KEY_SYSTEM_SELECTED,{data:null,error:new d.default(c.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,c.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+t.error)})}))}(t,r)}function _loadOrCreateKeySession(t){if(O.isClearKey(A)&&t.protData&&t.protData.hasOwnProperty("clearkeys")){var r={kids:Object.keys(t.protData.clearkeys)};t.initData=(new TextEncoder).encode(JSON.stringify(r))}t.sessionId?loadKeySession(t):null!==t.initData&&createKeySession(t)}function loadKeySession(t){checkConfig(),L.loadKeySession(t)}function createKeySession(t){var r=a.default.getPSSHForKeySystem(A,t?t.initData:null);if(r){if(function _isKeyIdDuplicate(t){if(!t)return!1;try{for(var r=L.getSessions(),i=0;i<r.length;i++)if(r[i].getKeyId()===t)return!0;return!1}catch(t){return!1}}(t.keyId))return;if(_isInitDataDuplicate(r))return;try{t.initData=r,L.createKeySession(t)}catch(t){R.trigger(j.KEY_SESSION_CREATED,{data:null,error:new d.default(c.default.KEY_SESSION_CREATED_ERROR_CODE,c.default.KEY_SESSION_CREATED_ERROR_MESSAGE+t.message)})}}else t&&t.initData?L.createKeySession(t):R.trigger(j.KEY_SESSION_CREATED,{data:null,error:new d.default(c.default.KEY_SESSION_CREATED_ERROR_CODE,c.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(A?A.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function _getProtDataForKeySystem(t){if(t){var r=t.systemString;if(E)return r in E?E[r]:null}return null}function _isInitDataDuplicate(t){if(!t)return!1;try{for(var r=L.getAllInitData(),a=0;a<r.length;a++)if(O.initDataEquals(t,r[a]))return i.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(t){return!1}}function setMediaElement(t){checkConfig(),t?(L.setMediaElement(t),R.on(j.NEED_KEY,_onNeedKey,r)):null===t&&(L.setMediaElement(t),R.off(j.NEED_KEY,_onNeedKey,r))}function _getKeySystemConfiguration(t){var r=t.protData,i=[],a=[],c=r&&r.audioRobustness&&r.audioRobustness.length>0?r.audioRobustness:D,d=r&&r.videoRobustness&&r.videoRobustness.length>0?r.videoRobustness:D,g=t.sessionType,p=r&&r.distinctiveIdentifier?r.distinctiveIdentifier:"optional",m=r&&r.persistentState?r.persistentState:"temporary"===g?"optional":"required";return S.forEach((function(t){t.type===z.AUDIO?i.push(new u.default(t.codec,c)):t.type===z.VIDEO&&a.push(new u.default(t.codec,d))})),new l.default(i,a,p,m,[g])}function _onKeyStatusChanged(t){t.error?R.trigger(j.KEY_STATUSES_CHANGED,{data:null,error:t.error}):i.debug("DRM: key status = "+t.status)}function _onKeyMessage(t){i.debug("DRM: onKeyMessage");var r=t.data;R.trigger(j.KEY_MESSAGE,{data:r});var u=r.messageType?r.messageType:"license-request",l=r.message,b=r.sessionToken,M=_getProtDataForKeySystem(A),E=O.getLicenseServerModelInstance(A,M,u),I={sessionToken:b,messageType:u};if(l&&0!==l.byteLength){if(!E)return i.debug("DRM: License server request not required for this message (type = "+t.data.messageType+").  Session ID = "+b.getSessionId()),void _sendLicenseRequestCompleteEvent(I);if(O.isClearKey(A)){var D=O.processClearKeyLicenseRequest(A,M,l);if(D)return i.debug("DRM: ClearKey license request handled by application!"),_sendLicenseRequestCompleteEvent(I),void L.updateKeySession(b,D)}!function _issueLicenseRequest(t,r,i){var u=t.sessionToken,l=t.messageType?t.messageType:"license-request",b={sessionToken:u,messageType:l},M=A?A.systemString:null,E=function _getLicenseServerUrl(t,r,i,u,l){var c=null,d=u.message;if(t&&t.serverURL){var g=t.serverURL;"string"==typeof g&&""!==g?c=g:"object"===_typeof(g)&&g.hasOwnProperty(r)&&(c=g[r])}else if(t&&t.laURL&&""!==t.laURL)c=t.laURL;else if(!(c=a.default.getLicenseServerUrlFromMediaInfo(S,A.schemeIdURI))&&!O.isClearKey(A)){var p=a.default.getPSSHData(i.initData);(c=A.getLicenseServerURLFromInitData(p))||(c=u.laURL)}return c=l.getServerURLFromMessage(c,d,r)}(i,l,u,t,r);if(!E)return void _sendLicenseRequestCompleteEvent(b,new d.default(c.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,c.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));var I={},D=!1;i&&_updateHeaders(I,i.httpRequestHeaders);var C=t.message,N=A.getRequestHeadersFromMessage(C);_updateHeaders(I,N),Object.keys(I).forEach((function(t){"authorization"===t.toLowerCase()&&(D=!0)})),i&&"boolean"==typeof i.withCredentials&&(D=i.withCredentials);var k=function onLoad(t){if(L)if(t.status>=200&&t.status<=299){var i=v.default.parseHttpHeaders(t.getAllResponseHeaders?t.getAllResponseHeaders():null),a=new p.default(t.responseURL,i,t.response);_applyFilters(Q.getLicenseResponseFilters(),a).then((function(){var i=r.getLicenseMessage(a.data,M,l);null!==i?(_sendLicenseRequestCompleteEvent(b),L.updateKeySession(u,i)):_reportError(t,b,M,l,r)}))}else _reportError(t,b,M,l,r)},R=function onAbort(t){_sendLicenseRequestCompleteEvent(b,new d.default(c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+M+' update, XHR aborted. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState))},j=function onError(t){_sendLicenseRequestCompleteEvent(b,new d.default(c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+M+' update, XHR error. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState))},B=A.getLicenseRequestFromMessage(C),U=r.getHTTPMethod(l),z=r.getResponseType(M,l),Y=i&&!isNaN(i.httpTimeout)?i.httpTimeout:8e3,G=u.getSessionId()||null,V=new g.default(E,U,z,I,D,l,G,B),W=isNaN(H.get().streaming.retryAttempts[m.HTTPRequest.LICENSE])?3:H.get().streaming.retryAttempts[m.HTTPRequest.LICENSE];_applyFilters(Q.getLicenseRequestFilters(),V).then((function(){_doLicenseRequest(V,W,Y,k,R,j)}))}(r,E,M)}else _sendLicenseRequestCompleteEvent(I,new d.default(c.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,c.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function _sendLicenseRequestCompleteEvent(t,r){R.trigger(j.LICENSE_REQUEST_COMPLETE,{data:t,error:r})}function _doLicenseRequest(t,r,a,u,l,c){var d=new XMLHttpRequest;if(H.get().streaming.cmcd&&H.get().streaming.cmcd.enabled&&H.get().streaming.cmcd.mode===b.default.CMCD_MODE_QUERY){var g=G.getQueryParameter({url:t.url,type:m.HTTPRequest.LICENSE});g&&(t.url=v.default.addAditionalQueryParameterToUrl(t.url,[g]))}for(var p in d.open(t.method,t.url,!0),d.responseType=t.responseType,d.withCredentials=t.withCredentials,a>0&&(d.timeout=a),t.headers)d.setRequestHeader(p,t.headers[p]);if(H.get().streaming.cmcd&&H.get().streaming.cmcd.enabled&&H.get().streaming.cmcd.mode===b.default.CMCD_MODE_HEADER){var M=G.getHeaderParameters({url:t.url,type:m.HTTPRequest.LICENSE});if(M)for(var S in M){var E=M[S];E&&d.setRequestHeader(S,E)}}var I=function _retryRequest(){r--;var i=isNaN(H.get().streaming.retryIntervals[m.HTTPRequest.LICENSE])?1e3:H.get().streaming.retryIntervals[m.HTTPRequest.LICENSE];k=setTimeout((function(){_doLicenseRequest(t,r,a,u,l,c)}),i)};d.onload=function(){N=null,this.status>=200&&this.status<=299||r<=0?u(this):(i.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+r),I())},d.ontimeout=d.onerror=function(){N=null,r<=0?c(this):(i.warn("License request network request failed . Retrying it... Pending retries: "+r),I())},d.onabort=function(){l(this)},R.trigger(j.LICENSE_REQUEST_SENDING,{url:t.url,headers:t.headers,payload:t.data,sessionId:t.sessionId}),N=d,d.send(t.data)}function _abortLicenseRequest(){N&&(N.onloadend=N.onerror=N.onprogress=void 0,N.abort(),N=null),k&&(clearTimeout(k),k=null)}function _updateHeaders(t,r){if(r)for(var i in r)t[i]=r[i]}function _reportError(t,r,i,a,u){var l=t.response?u.getErrorResponse(t.response,i,a):"NONE";_sendLicenseRequestCompleteEvent(r,new d.default(c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+i+' update, XHR complete. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState+".  Response is "+l))}function _applyFilters(t,r){return t?t.reduce((function(t,i){return t.then((function(){return i(r)}))}),Promise.resolve()):Promise.resolve()}function _onNeedKey(t,r){if(!H.get().streaming.protection.ignoreEmeEncryptedEvent){if(i.debug("DRM: onNeedKey"),"cenc"!==t.key.initDataType)return void i.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+t.key.initDataType);if(0===S.length&&(i.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(r=void 0===r?1:r+1)<5))return void Y.push(setTimeout((function(){_onNeedKey(t,r)}),500));var u=t.key.initData;if(ArrayBuffer.isView(u)&&(u=u.buffer),A){var l=a.default.getPSSHForKeySystem(A,u);if(l&&_isInitDataDuplicate(l))return}i.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(u)));var c=O.getSupportedKeySystemsFromSegmentPssh(u,E,I);if(0===c.length)return void i.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");_selectKeySystem(c,!1)}}return r={initializeForMedia:function initializeForMedia(t){if(!t)throw new Error("mediaInfo can not be null or undefined");checkConfig(),S.push(t);var r=O.getSupportedKeySystemsFromContentProtection(t.contentProtection,E,I);r&&r.length>0&&_selectKeySystem(r,!0)},clearMediaInfoArray:function clearMediaInfoArray(){S=[]},createKeySession:createKeySession,loadKeySession:loadKeySession,removeKeySession:function removeKeySession(t){checkConfig(),L.removeKeySession(t)},closeKeySession:function closeKeySession(t){checkConfig(),L.closeKeySession(t)},setServerCertificate:function setServerCertificate(t){checkConfig(),L.setServerCertificate(t)},setMediaElement:setMediaElement,setSessionType:function setSessionType(t){I=t},setRobustnessLevel:function setRobustnessLevel(t){D=t},setProtectionData:function setProtectionData(t){E=t,O.setProtectionData(t)},getSupportedKeySystemsFromContentProtection:function getSupportedKeySystemsFromContentProtection(t){return checkConfig(),O.getSupportedKeySystemsFromContentProtection(t,E,I)},getKeySystems:function getKeySystems(){return O?O.getKeySystems():[]},setKeySystems:function setKeySystems(t){O&&O.setKeySystems(t)},stop:function stop(){_abortLicenseRequest(),L&&L.stop()},reset:function reset(){R.off(j.INTERNAL_KEY_MESSAGE,_onKeyMessage,r),R.off(j.INTERNAL_KEY_STATUS_CHANGED,_onKeyStatusChanged,r),checkConfig(),_abortLicenseRequest(),setMediaElement(null),A=null,C=!1,L&&(L.reset(),L=null),Y.forEach((function(t){return clearTimeout(t)})),Y=[],S=[],M=[]}},function setup(){i=B.getLogger(r),M=[],S=[],I="temporary",D="",N=null,k=null,R.on(j.INTERNAL_KEY_MESSAGE,_onKeyMessage,r),R.on(j.INTERNAL_KEY_STATUS_CHANGED,_onKeyStatusChanged,r)}(),r}ProtectionController.__dashjs_factory_name="ProtectionController",r.default=M.default.getClassFactory(ProtectionController)},"./src/streaming/protection/controllers/ProtectionKeyController.js":
/*!*************************************************************************!*\
    !*** ./src/streaming/protection/controllers/ProtectionKeyController.js ***!
    \*************************************************************************/
/*! exports provided: default */function srcStreamingProtectionControllersProtectionKeyControllerJs(t,r,i){i.r(r);var a=i(/*! ./../CommonEncryption */"./src/streaming/protection/CommonEncryption.js"),u=i(/*! ./../drm/KeySystemClearKey */"./src/streaming/protection/drm/KeySystemClearKey.js"),l=i(/*! ./../drm/KeySystemW3CClearKey */"./src/streaming/protection/drm/KeySystemW3CClearKey.js"),c=i(/*! ./../drm/KeySystemWidevine */"./src/streaming/protection/drm/KeySystemWidevine.js"),d=i(/*! ./../drm/KeySystemPlayReady */"./src/streaming/protection/drm/KeySystemPlayReady.js"),g=i(/*! ./../servers/DRMToday */"./src/streaming/protection/servers/DRMToday.js"),p=i(/*! ./../servers/PlayReady */"./src/streaming/protection/servers/PlayReady.js"),m=i(/*! ./../servers/Widevine */"./src/streaming/protection/servers/Widevine.js"),v=i(/*! ./../servers/ClearKey */"./src/streaming/protection/servers/ClearKey.js"),b=i(/*! ../../constants/ProtectionConstants */"./src/streaming/constants/ProtectionConstants.js");function ProtectionKeyController(){var t,r,i,M,S,E,I,D,A=this.context;function _getProtDataForKeySystem(t,r){return r&&t in r?r[t]:null}function _getSessionId(t,r){return t&&t.sessionId?t.sessionId:r&&r.sessionId?r.sessionId:null}function _getSessionType(t,r){return t&&t.sessionType?t.sessionType:r}return t={initialize:function initialize(){var t;M=[],t=Object(d.default)(A).getInstance({BASE64:S,settings:E}),M.push(t),t=Object(c.default)(A).getInstance({BASE64:S}),M.push(t),t=Object(u.default)(A).getInstance({BASE64:S}),M.push(t),I=t,t=Object(l.default)(A).getInstance({BASE64:S,debug:r}),M.push(t),D=t},setProtectionData:function setProtectionData(t){for(var r=function getProtectionData(r){var i=null;return t&&(i=r in t?t[r]:null),i},i=0;i<M.length;i++){var a=M[i];a.hasOwnProperty("init")&&a.init(r(a.systemString))}},isClearKey:function isClearKey(t){return t===I||t===D},initDataEquals:function initDataEquals(t,r){if(t.byteLength===r.byteLength){for(var i=new Uint8Array(t),a=new Uint8Array(r),u=0;u<i.length;u++)if(i[u]!==a[u])return!1;return!0}return!1},getKeySystems:function getKeySystems(){return M},setKeySystems:function setKeySystems(t){M=t},getKeySystemBySystemString:function getKeySystemBySystemString(t){for(var r=0;r<M.length;r++)if(M[r].systemString===t)return M[r];return null},getSupportedKeySystemsFromContentProtection:function getSupportedKeySystemsFromContentProtection(t,r,i){var u,l,c,d,g=[];if(t){var p=a.default.findCencContentProtection(t);for(c=0;c<M.length;++c){var m=_getProtDataForKeySystem((l=M[c]).systemString,r);for(d=0;d<t.length;++d)if((u=t[d]).schemeIdUri.toLowerCase()===l.schemeIdURI){var v=l.getInitData(u,p);g.push({ks:M[c],keyId:u.keyId,initData:v,protData:m,cdmData:l.getCDMData(m?m.cdmData:null),sessionId:_getSessionId(m,u),sessionType:_getSessionType(m,i)})}}}return g},getSupportedKeySystemsFromSegmentPssh:function getSupportedKeySystemsFromSegmentPssh(t,r,i){for(var u,l=[],c=a.default.parsePSSHList(t),d=0;d<M.length;++d){var g=_getProtDataForKeySystem((u=M[d]).systemString,r);u.uuid in c&&l.push({ks:u,initData:c[u.uuid],protData:g,cdmData:u.getCDMData(g?g.cdmData:null),sessionId:_getSessionId(g),sessionType:_getSessionType(g,i)})}return l},getLicenseServerModelInstance:function getLicenseServerModelInstance(t,r,i){if("license-release"===i||"individualization-request"===i)return null;var a=null;return r&&r.hasOwnProperty("drmtoday")?a=Object(g.default)(A).getInstance({BASE64:S}):t.systemString===b.default.WIDEVINE_KEYSTEM_STRING?a=Object(m.default)(A).getInstance():t.systemString===b.default.PLAYREADY_KEYSTEM_STRING?a=Object(p.default)(A).getInstance():t.systemString===b.default.CLEARKEY_KEYSTEM_STRING&&(a=Object(v.default)(A).getInstance()),a},processClearKeyLicenseRequest:function processClearKeyLicenseRequest(t,r,a){try{return t.getClearKeysFromProtectionData(r,a)}catch(t){return i.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function setConfig(a){a&&(a.debug&&(r=a.debug,i=r.getLogger(t)),a.BASE64&&(S=a.BASE64),a.settings&&(E=a.settings))}},t}ProtectionKeyController.__dashjs_factory_name="ProtectionKeyController",r.default=dashjs.FactoryMaker.getSingletonFactory(ProtectionKeyController)},"./src/streaming/protection/drm/KeySystemClearKey.js":
/*!***********************************************************!*\
    !*** ./src/streaming/protection/drm/KeySystemClearKey.js ***!
    \***********************************************************/
/*! exports provided: default */function srcStreamingProtectionDrmKeySystemClearKeyJs(t,r,i){i.r(r);var a=i(/*! ../vo/KeyPair */"./src/streaming/protection/vo/KeyPair.js"),u=i(/*! ../vo/ClearKeyKeySet */"./src/streaming/protection/vo/ClearKeyKeySet.js"),l=i(/*! ../CommonEncryption */"./src/streaming/protection/CommonEncryption.js"),c=i(/*! ../../constants/ProtectionConstants */"./src/streaming/constants/ProtectionConstants.js"),d="e2719d58-a985-b3c9-781a-b030af78d30e",g=c.default.CLEARKEY_KEYSTEM_STRING;function KeySystemClearKey(t){var r=(t=t||{}).BASE64;return{uuid:d,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:g,getInitData:function getInitData(t,i){try{var a=l.default.parseInitDataFromContentProtection(t,r);if(!a&&i){var u={kids:[function cencDefaultKidToBase64Representation(t){try{var r=t.replace(/-/g,"");return(r=btoa(r.match(/\w{2}/g).map((function(t){return String.fromCharCode(parseInt(t,16))})).join(""))).replace(/=/g,"")}catch(t){return null}}(i["cenc:default_KID"])]};a=(new TextEncoder).encode(JSON.stringify(u))}return a}catch(t){return null}},getRequestHeadersFromMessage:function getRequestHeadersFromMessage(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function getLicenseRequestFromMessage(t){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))))},getLicenseServerURLFromInitData:function getLicenseServerURLFromInitData(){return null},getCDMData:function getCDMData(){return null},getClearKeysFromProtectionData:function getClearKeysFromProtectionData(t,r){var i=null;if(t){for(var l=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(r))),c=[],d=0;d<l.kids.length;d++){var g=l.kids[d],p=t.clearkeys&&t.clearkeys.hasOwnProperty(g)?t.clearkeys[g]:null;if(!p)throw new Error("DRM: ClearKey keyID ("+g+") is not known!");c.push(new a.default(g,p))}i=new u.default(c)}return i}}}KeySystemClearKey.__dashjs_factory_name="KeySystemClearKey",r.default=dashjs.FactoryMaker.getSingletonFactory(KeySystemClearKey)},"./src/streaming/protection/drm/KeySystemPlayReady.js":
/*!************************************************************!*\
    !*** ./src/streaming/protection/drm/KeySystemPlayReady.js ***!
    \************************************************************/
/*! exports provided: default */function srcStreamingProtectionDrmKeySystemPlayReadyJs(t,r,i){i.r(r);var a=i(/*! ../CommonEncryption */"./src/streaming/protection/CommonEncryption.js"),u=i(/*! ../../constants/ProtectionConstants */"./src/streaming/constants/ProtectionConstants.js"),l="9a04f079-9840-4286-ab92-e65be0885f95",c=u.default.PLAYREADY_KEYSTEM_STRING;function KeySystemPlayReady(t){var r="utf-16",i=(t=t||{}).BASE64,u=t.settings;function checkConfig(){if(!i||!i.hasOwnProperty("decodeArray")||!i.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:l,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:c,getInitData:function getInitData(t){var r,u,l,c,d,g=new Uint8Array([112,115,115,104,0,0,0,0]),p=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),m=0,v=null;if(checkConfig(),!t)return null;if("pssh"in t)return a.default.parseInitDataFromContentProtection(t,i);if("pro"in t)v=i.decodeArray(t.pro.__text);else{if(!("prheader"in t))return null;v=i.decodeArray(t.prheader.__text)}return r=v.length,u=4+g.length+p.length+4+r,l=new ArrayBuffer(u),c=new Uint8Array(l),(d=new DataView(l)).setUint32(m,u),m+=4,c.set(g,m),m+=g.length,c.set(p,m),m+=p.length,d.setUint32(m,r),m+=4,c.set(v,m),m+=r,c.buffer},getRequestHeadersFromMessage:function getRequestHeadersFromMessage(t){var i,a,l={},c=new DOMParser;if(u&&u.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===r&&t&&t.byteLength%2==1)return l["Content-Type"]="text/xml; charset=utf-8",l;var d="utf-16"===r?new Uint16Array(t):new Uint8Array(t);i=String.fromCharCode.apply(null,d);for(var g=(a=c.parseFromString(i,"application/xml")).getElementsByTagName("name"),p=a.getElementsByTagName("value"),m=0;m<g.length;m++)l[g[m].childNodes[0].nodeValue]=p[m].childNodes[0].nodeValue;return l.hasOwnProperty("Content")&&(l["Content-Type"]=l.Content,delete l.Content),l.hasOwnProperty("Content-Type")||(l["Content-Type"]="text/xml; charset=utf-8"),l},getLicenseRequestFromMessage:function getLicenseRequestFromMessage(t){var a=null,l=new DOMParser;if(u&&u.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===r&&t&&t.byteLength%2==1)return t;var c="utf-16"===r?new Uint16Array(t):new Uint8Array(t);checkConfig();var d=String.fromCharCode.apply(null,c),g=l.parseFromString(d,"application/xml");if(!g.getElementsByTagName("PlayReadyKeyMessage")[0])return t;var p=g.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return p&&(a=i.decode(p)),a},getLicenseServerURLFromInitData:function getLicenseServerURLFromInitData(t){if(t)for(var r=new DataView(t),i=r.getUint16(4,!0),a=6,u=new DOMParser,l=0;l<i;l++){var c=r.getUint16(a,!0);a+=2;var d=r.getUint16(a,!0);if(a+=2,1===c){var g=t.slice(a,a+d),p=String.fromCharCode.apply(null,new Uint16Array(g)),m=u.parseFromString(p,"application/xml");if(m.getElementsByTagName("LA_URL")[0]){var v=m.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(v)return v}if(m.getElementsByTagName("LUI_URL")[0]){var b=m.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(b)return b}}else a+=d}return null},getCDMData:function getCDMData(t){var r,a,u,l;if(checkConfig(),!t)return null;for(r=[],l=0;l<t.length;++l)r.push(t.charCodeAt(l)),r.push(0);for(r=String.fromCharCode.apply(null,r),r=i.encode(r),a='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",r),u=[],l=0;l<a.length;++l)u.push(a.charCodeAt(l)),u.push(0);return new Uint8Array(u).buffer},setPlayReadyMessageFormat:function setPlayReadyMessageFormat(t){if("utf-8"!==t&&"utf-16"!==t)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');r=t}}}KeySystemPlayReady.__dashjs_factory_name="KeySystemPlayReady",r.default=dashjs.FactoryMaker.getSingletonFactory(KeySystemPlayReady)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":
/*!**************************************************************!*\
    !*** ./src/streaming/protection/drm/KeySystemW3CClearKey.js ***!
    \**************************************************************/
/*! exports provided: default */function srcStreamingProtectionDrmKeySystemW3CClearKeyJs(t,r,i){i.r(r);var a=i(/*! ../vo/KeyPair */"./src/streaming/protection/vo/KeyPair.js"),u=i(/*! ../vo/ClearKeyKeySet */"./src/streaming/protection/vo/ClearKeyKeySet.js"),l=i(/*! ../CommonEncryption */"./src/streaming/protection/CommonEncryption.js"),c=i(/*! ../../constants/ProtectionConstants */"./src/streaming/constants/ProtectionConstants.js"),d="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",g=c.default.CLEARKEY_KEYSTEM_STRING;function KeySystemW3CClearKey(t){var r,i=t.BASE64,c=t.debug.getLogger(r);return r={uuid:d,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:g,getInitData:function getInitData(t){return l.default.parseInitDataFromContentProtection(t,i)},getRequestHeadersFromMessage:function getRequestHeadersFromMessage(){return null},getLicenseRequestFromMessage:function getLicenseRequestFromMessage(t){return new Uint8Array(t)},getLicenseServerURLFromInitData:function getLicenseServerURLFromInitData(){return null},getCDMData:function getCDMData(){return null},getClearKeysFromProtectionData:function getClearKeysFromProtectionData(t,r){var i=null;if(t){for(var l=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(r))),d=[],g=0;g<l.kids.length;g++){var p=l.kids[g],m=t.clearkeys&&t.clearkeys.hasOwnProperty(p)?t.clearkeys[p]:null;if(!m)throw new Error("DRM: ClearKey keyID ("+p+") is not known!");d.push(new a.default(p,m))}i=new u.default(d),c.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return i}}}KeySystemW3CClearKey.__dashjs_factory_name="KeySystemW3CClearKey",r.default=dashjs.FactoryMaker.getSingletonFactory(KeySystemW3CClearKey)},"./src/streaming/protection/drm/KeySystemWidevine.js":
/*!***********************************************************!*\
    !*** ./src/streaming/protection/drm/KeySystemWidevine.js ***!
    \***********************************************************/
/*! exports provided: default */function srcStreamingProtectionDrmKeySystemWidevineJs(t,r,i){i.r(r);var a=i(/*! ../CommonEncryption */"./src/streaming/protection/CommonEncryption.js"),u=i(/*! ../../constants/ProtectionConstants */"./src/streaming/constants/ProtectionConstants.js"),l="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",c=u.default.WIDEVINE_KEYSTEM_STRING;function KeySystemWidevine(t){var r=(t=t||{}).BASE64;return{uuid:l,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:c,getInitData:function getInitData(t){return a.default.parseInitDataFromContentProtection(t,r)},getRequestHeadersFromMessage:function getRequestHeadersFromMessage(){return null},getLicenseRequestFromMessage:function getLicenseRequestFromMessage(t){return new Uint8Array(t)},getLicenseServerURLFromInitData:function getLicenseServerURLFromInitData(){return null},getCDMData:function getCDMData(){return null}}}KeySystemWidevine.__dashjs_factory_name="KeySystemWidevine",r.default=dashjs.FactoryMaker.getSingletonFactory(KeySystemWidevine)},"./src/streaming/protection/errors/ProtectionErrors.js":
/*!*************************************************************!*\
    !*** ./src/streaming/protection/errors/ProtectionErrors.js ***!
    \*************************************************************/
/*! exports provided: default */function srcStreamingProtectionErrorsProtectionErrorsJs(t,r,i){function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}i.r(r);var a=new(function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(ProtectionErrors,t);var r=_createSuper(ProtectionErrors);function ProtectionErrors(){var t;return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ProtectionErrors),(t=r.call(this)).MEDIA_KEYERR_CODE=100,t.MEDIA_KEYERR_UNKNOWN_CODE=101,t.MEDIA_KEYERR_CLIENT_CODE=102,t.MEDIA_KEYERR_SERVICE_CODE=103,t.MEDIA_KEYERR_OUTPUT_CODE=104,t.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,t.MEDIA_KEYERR_DOMAIN_CODE=106,t.MEDIA_KEY_MESSAGE_ERROR_CODE=107,t.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,t.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,t.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,t.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,t.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,t.KEY_SESSION_CREATED_ERROR_CODE=113,t.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,t.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",t.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",t.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",t.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",t.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",t.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",t.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",t.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",t.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",t.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",t.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",t.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",t.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",t.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",t}return ProtectionErrors}(i(/*! ../../../core/errors/ErrorsBase */"./src/core/errors/ErrorsBase.js").default));r.default=a},"./src/streaming/protection/models/ProtectionModel_01b.js":
/*!****************************************************************!*\
    !*** ./src/streaming/protection/models/ProtectionModel_01b.js ***!
    \****************************************************************/
/*! exports provided: default */function srcStreamingProtectionModelsProtectionModel_01bJs(t,r,i){i.r(r);var a=i(/*! ../controllers/ProtectionKeyController */"./src/streaming/protection/controllers/ProtectionKeyController.js"),u=i(/*! ../vo/NeedKey */"./src/streaming/protection/vo/NeedKey.js"),l=i(/*! ../../vo/DashJSError */"./src/streaming/vo/DashJSError.js"),c=i(/*! ../vo/KeyMessage */"./src/streaming/protection/vo/KeyMessage.js"),d=i(/*! ../vo/KeySystemConfiguration */"./src/streaming/protection/vo/KeySystemConfiguration.js"),g=i(/*! ../vo/KeySystemAccess */"./src/streaming/protection/vo/KeySystemAccess.js"),p=i(/*! ../errors/ProtectionErrors */"./src/streaming/protection/errors/ProtectionErrors.js");function ProtectionModel_01b(t){t=t||{};var r,i,m,v,b,M,S,E,I,D=this.context,A=t.eventBus,C=t.events,N=t.debug,k=t.api,O=t.errHandler;function reset(){m&&removeEventListeners();for(var t=0;t<S.length;t++)closeKeySession(S[t]);A.trigger(C.TEARDOWN_COMPLETE)}function closeKeySession(t){try{m[k.cancelKeyRequest](v.systemString,t.sessionId)}catch(r){A.trigger(C.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionId+") "+r.message})}}function findSessionByID(t,r){if(r&&t){for(var i=t.length,a=0;a<i;a++)if(t[a].sessionId==r)return t[a];return null}return null}function removeEventListeners(){m.removeEventListener(k.keyerror,I),m.removeEventListener(k.needkey,I),m.removeEventListener(k.keymessage,I),m.removeEventListener(k.keyadded,I)}return r={getAllInitData:function getAllInitData(){for(var t=[],r=0;r<M.length;r++)t.push(M[r].initData);for(var i=0;i<S.length;i++)t.push(S[i].initData);return t},getSessions:function getSessions(){return S.concat(M)},requestKeySystemAccess:function requestKeySystemAccess(t){return new Promise((function(r,i){var a=m;a||(a=document.createElement("video"));for(var u=!1,l=0;l<t.length;l++)for(var c=t[l].ks.systemString,p=t[l].configs,v=null,M=null,S=0;S<p.length;S++){var E=p[S].videoCapabilities;if(E&&0!==E.length){M=[];for(var I=0;I<E.length;I++)""!==a.canPlayType(E[I].contentType,c)&&M.push(E[I])}if(M&&(!M||0!==M.length)){u=!0;var D=new d.default(v,M),N=b.getKeySystemBySystemString(c),k=new g.default(N,D);A.trigger(C.KEY_SYSTEM_ACCESS_COMPLETE,{data:k}),r({data:k});break}}if(!u){var O="Key system access denied! -- No valid audio/video content configurations detected!";A.trigger(C.KEY_SYSTEM_ACCESS_COMPLETE,{error:O}),i({error:O})}}))},selectKeySystem:function selectKeySystem(t){return v=t.keySystem,Promise.resolve(v)},setMediaElement:function setMediaElement(t){if(m!==t){if(m){removeEventListeners();for(var r=0;r<S.length;r++)closeKeySession(S[r]);S=[]}(m=t)&&(m.addEventListener(k.keyerror,I),m.addEventListener(k.needkey,I),m.addEventListener(k.keymessage,I),m.addEventListener(k.keyadded,I),A.trigger(C.VIDEO_ELEMENT_SELECTED))}},createKeySession:function createKeySession(t){if(!v)throw new Error("Can not create sessions until you have selected a key system");if(E||0===S.length){var r={sessionId:null,keyId:t.keyId,initData:t.initData,getKeyId:function getKeyId(){return this.keyId},getSessionId:function getSessionId(){return this.sessionId},getExpirationTime:function getExpirationTime(){return NaN},getSessionType:function getSessionType(){return"temporary"}};return M.push(r),m[k.generateKeyRequest](v.systemString,new Uint8Array(t.initData)),r}throw new Error("Multiple sessions not allowed!")},updateKeySession:function updateKeySession(t,r){var i=t.sessionId;if(b.isClearKey(v))for(var a=0;a<r.keyPairs.length;a++)m[k.addKey](v.systemString,r.keyPairs[a].key,r.keyPairs[a].keyID,i);else m[k.addKey](v.systemString,new Uint8Array(r),new Uint8Array(t.initData),i);A.trigger(C.KEY_SESSION_UPDATED)},closeKeySession:closeKeySession,setServerCertificate:function setServerCertificate(){},loadKeySession:function loadKeySession(){},removeKeySession:function removeKeySession(){},stop:reset,reset:reset},function setup(){i=N.getLogger(r),m=null,v=null,M=[],S=[],b=Object(a.default)(D).getInstance(),I=function createEventHandler(){return{handleEvent:function handleEvent(t){var r=null;switch(t.type){case k.needkey:var a=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;A.trigger(C.NEED_KEY,{key:new u.default(a,"cenc")});break;case k.keyerror:if((r=findSessionByID(S,t.sessionId))||(r=findSessionByID(M,t.sessionId)),r){var d=p.default.MEDIA_KEYERR_CODE,g="";switch(t.errorCode.code){case 1:d=p.default.MEDIA_KEYERR_UNKNOWN_CODE,g+="MEDIA_KEYERR_UNKNOWN - "+p.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:d=p.default.MEDIA_KEYERR_CLIENT_CODE,g+="MEDIA_KEYERR_CLIENT - "+p.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:d=p.default.MEDIA_KEYERR_SERVICE_CODE,g+="MEDIA_KEYERR_SERVICE - "+p.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:d=p.default.MEDIA_KEYERR_OUTPUT_CODE,g+="MEDIA_KEYERR_OUTPUT - "+p.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:d=p.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,g+="MEDIA_KEYERR_HARDWARECHANGE - "+p.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:d=p.default.MEDIA_KEYERR_DOMAIN_CODE,g+="MEDIA_KEYERR_DOMAIN - "+p.default.MEDIA_KEYERR_DOMAIN_MESSAGE}g+="  System Code = "+t.systemCode,A.trigger(C.KEY_ERROR,{error:new l.default(d,g,r)})}else i.error("No session token found for key error");break;case k.keyadded:(r=findSessionByID(S,t.sessionId))||(r=findSessionByID(M,t.sessionId)),r?(i.debug("DRM: Key added."),A.trigger(C.KEY_ADDED,{data:r})):i.debug("No session token found for key added");break;case k.keymessage:if((E=null!==t.sessionId&&void 0!==t.sessionId)?!(r=findSessionByID(S,t.sessionId))&&M.length>0&&(r=M.shift(),S.push(r),r.sessionId=t.sessionId,A.trigger(C.KEY_SESSION_CREATED,{data:r})):M.length>0&&(r=M.shift(),S.push(r),0!==M.length&&O.error(new l.default(p.default.MEDIA_KEY_MESSAGE_ERROR_CODE,p.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),r){var m=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;r.keyMessage=m,A.trigger(C.INTERNAL_KEY_MESSAGE,{data:new c.default(r,m,t.defaultURL)})}else i.warn("No session token found for key message")}}}}()}(),r}ProtectionModel_01b.__dashjs_factory_name="ProtectionModel_01b",r.default=dashjs.FactoryMaker.getClassFactory(ProtectionModel_01b)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":
/*!**********************************************************************!*\
    !*** ./src/streaming/protection/models/ProtectionModel_21Jan2015.js ***!
    \**********************************************************************/
/*! exports provided: default */function srcStreamingProtectionModelsProtectionModel_21Jan2015Js(t,r,i){i.r(r);var a=i(/*! ../controllers/ProtectionKeyController */"./src/streaming/protection/controllers/ProtectionKeyController.js"),u=i(/*! ../vo/NeedKey */"./src/streaming/protection/vo/NeedKey.js"),l=i(/*! ../errors/ProtectionErrors */"./src/streaming/protection/errors/ProtectionErrors.js"),c=i(/*! ../../vo/DashJSError */"./src/streaming/vo/DashJSError.js"),d=i(/*! ../vo/KeyMessage */"./src/streaming/protection/vo/KeyMessage.js"),g=i(/*! ../vo/KeySystemAccess */"./src/streaming/protection/vo/KeySystemAccess.js"),p=i(/*! ../../constants/ProtectionConstants */"./src/streaming/constants/ProtectionConstants.js"),m={};function ProtectionModel_21Jan2015(t){t=t||{};var r,i,v,b,M,S,E,I,D=this.context,A=t.eventBus,C=t.events,N=t.debug;function _requestKeySystemAccessInternal(t,r,i,a){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var u="Insecure origins are not allowed";return A.trigger(C.KEY_SYSTEM_ACCESS_COMPLETE,{error:u}),void a({error:u})}var l=t[r].protData&&t[r].protData.systemStringPriority?t[r].protData.systemStringPriority:null,c=t[r].configs,d=t[r].ks,p=d.systemString;(function _checkAccessForKeySystem(t,r){return new Promise((function(i,a){_checkAccessForSystemStrings(t,r,0,i,a)}))})(l||(m[p]?m[p]:[p]),c).then((function(t){var r="function"==typeof t.getConfiguration?t.getConfiguration():null,a=new g.default(d,r);a.mksa=t,A.trigger(C.KEY_SYSTEM_ACCESS_COMPLETE,{data:a}),i({data:a})})).catch((function(u){if(r+1<t.length)_requestKeySystemAccessInternal(t,r+1,i,a);else{var l="Key system access denied! ";A.trigger(C.KEY_SYSTEM_ACCESS_COMPLETE,{error:l+u.message}),a({error:l+u.message})}}))}function _checkAccessForSystemStrings(t,r,a,u,l){var c=t[a];i.debug("Requesting key system access for system string ".concat(c)),navigator.requestMediaKeySystemAccess(c,r).then((function(t){t.selectedSystemString=c,u(t)})).catch((function(i){a+1<t.length?_checkAccessForSystemStrings(t,r,a+1,u,l):l(i)}))}function _closeKeySessionInternal(t){var r=t.session;return r.removeEventListener("keystatuseschange",t),r.removeEventListener("message",t),r.close()}function removeSession(t){for(var r=0;r<S.length;r++)if(S[r]===t){S.splice(r,1);break}}function parseKeyStatus(t){var r,i;return t&&t.length>0&&(t[0]&&("string"==typeof t[0]?r=t[0]:i=t[0]),t[1]&&("string"==typeof t[1]?r=t[1]:i=t[1])),{status:r,keyId:i}}function createSessionToken(t,r){var a={session:t,keyId:r.keyId,initData:r.initData,sessionId:r.sessionId,sessionType:r.sessionType,handleEvent:function handleEvent(t){switch(t.type){case"keystatuseschange":A.trigger(C.KEY_STATUSES_CHANGED,{data:this}),t.target.keyStatuses.forEach((function(){var t=parseKeyStatus(arguments);if("expired"===t.status)A.trigger(C.INTERNAL_KEY_STATUS_CHANGED,{error:new c.default(l.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,l.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});else A.trigger(C.INTERNAL_KEY_STATUS_CHANGED,t)}));break;case"message":var r=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;A.trigger(C.INTERNAL_KEY_MESSAGE,{data:new d.default(this,r,void 0,t.messageType)})}},getKeyId:function getKeyId(){return this.keyId},getSessionId:function getSessionId(){return t.sessionId},getSessionType:function getSessionType(){return this.sessionType},getExpirationTime:function getExpirationTime(){return t.expiration},getKeyStatuses:function getKeyStatuses(){return t.keyStatuses},getUsable:function getUsable(){var r=!1;return t.keyStatuses.forEach((function(){var t=parseKeyStatus(arguments);"usable"===t.status&&(r=!0)})),r}};return t.addEventListener("keystatuseschange",a),t.addEventListener("message",a),t.closed.then((function(){removeSession(a),i.debug("DRM: Session closed.  SessionID = "+a.getSessionId()),A.trigger(C.KEY_SESSION_CLOSED,{data:a.getSessionId()})})),S.push(a),a}return r={getAllInitData:function getAllInitData(){for(var t=[],r=0;r<S.length;r++)S[r].initData&&t.push(S[r].initData);return t},getSessions:function getSessions(){return S},requestKeySystemAccess:function requestKeySystemAccess(t){return new Promise((function(r,i){_requestKeySystemAccessInternal(t,0,r,i)}))},selectKeySystem:function selectKeySystem(t){return new Promise((function(r,i){t.mksa.createMediaKeys().then((function(r){return v=t.keySystem,M=r,b?b.setMediaKeys(M):Promise.resolve()})).then((function(){r(v)})).catch((function(){i({error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))}))},setMediaElement:function setMediaElement(t){b!==t&&(b&&(b.removeEventListener("encrypted",E),b.setMediaKeys&&b.setMediaKeys(null)),(b=t)&&(b.addEventListener("encrypted",E),b.setMediaKeys&&M&&b.setMediaKeys(M)))},setServerCertificate:function setServerCertificate(t){if(!v||!M)throw new Error("Can not set server certificate until you have selected a key system");M.setServerCertificate(t).then((function(){i.info("DRM: License server certificate successfully updated."),A.trigger(C.SERVER_CERTIFICATE_UPDATED)})).catch((function(t){A.trigger(C.SERVER_CERTIFICATE_UPDATED,{error:new c.default(l.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,l.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+t.name)})}))},createKeySession:function createKeySession(t){if(!v||!M)throw new Error("Can not create sessions until you have selected a key system");var r=M.createSession(t.sessionType),a=createSessionToken(r,t),u=v.systemString===p.default.CLEARKEY_KEYSTEM_STRING&&(t.initData||t.protData&&t.protData.clearkeys)?p.default.INITIALIZATION_DATA_TYPE_KEYIDS:p.default.INITIALIZATION_DATA_TYPE_CENC;r.generateRequest(u,t.initData).then((function(){i.debug("DRM: Session created.  SessionID = "+a.getSessionId()),A.trigger(C.KEY_SESSION_CREATED,{data:a})})).catch((function(t){removeSession(a),A.trigger(C.KEY_SESSION_CREATED,{data:null,error:new c.default(l.default.KEY_SESSION_CREATED_ERROR_CODE,l.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+t.name)})}))},updateKeySession:function updateKeySession(t,r){var i=t.session;I.isClearKey(v)&&(r=r.toJWK()),i.update(r).then((function(){A.trigger(C.KEY_SESSION_UPDATED)})).catch((function(r){A.trigger(C.KEY_ERROR,{error:new c.default(l.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+r.name,t)})}))},loadKeySession:function loadKeySession(t){if(!v||!M)throw new Error("Can not load sessions until you have selected a key system");for(var r=t.sessionId,a=0;a<S.length;a++)if(r===S[a].sessionId)return void i.warn("DRM: Ignoring session ID because we have already seen it!");var u=M.createSession(t.sessionType),d=createSessionToken(u,t);u.load(r).then((function(t){t?(i.debug("DRM: Session loaded.  SessionID = "+d.getSessionId()),A.trigger(C.KEY_SESSION_CREATED,{data:d})):(removeSession(d),A.trigger(C.KEY_SESSION_CREATED,{data:null,error:new c.default(l.default.KEY_SESSION_CREATED_ERROR_CODE,l.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+r+")")}))})).catch((function(t){removeSession(d),A.trigger(C.KEY_SESSION_CREATED,{data:null,error:new c.default(l.default.KEY_SESSION_CREATED_ERROR_CODE,l.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+r+")! "+t.name)})}))},removeKeySession:function removeKeySession(t){t.session.remove().then((function(){i.debug("DRM: Session removed.  SessionID = "+t.getSessionId()),A.trigger(C.KEY_SESSION_REMOVED,{data:t.getSessionId()})}),(function(r){A.trigger(C.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionId()+"). "+r.name})}))},closeKeySession:function closeKeySession(t){_closeKeySessionInternal(t).catch((function(r){removeSession(t),A.trigger(C.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionId()+") "+r.name})}))},stop:function stop(){for(var t,r=0;r<S.length;r++)(t=S[r]).getUsable()||_closeKeySessionInternal(t).catch((function(){removeSession(t)}))},reset:function reset(){var t,r=S.length;0!==r?function(){for(var i=function done(t){removeSession(t),0===S.length&&(b?(b.removeEventListener("encrypted",E),b.setMediaKeys(null).then((function(){A.trigger(C.TEARDOWN_COMPLETE)}))):A.trigger(C.TEARDOWN_COMPLETE))},a=0;a<r;a++)!function(r){t.session.closed.then((function(){i(r)})),_closeKeySessionInternal(t).catch((function(){i(r)}))}(t=S[a])}():A.trigger(C.TEARDOWN_COMPLETE)}},function setup(){i=N.getLogger(r),v=null,b=null,M=null,S=[],I=Object(a.default)(D).getInstance(),E=function createEventHandler(){return{handleEvent:function handleEvent(t){if("encrypted"===t.type)if(t.initData){var r=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;A.trigger(C.NEED_KEY,{key:new u.default(r,t.initDataType)})}}}}()}(),r}m[p.default.PLAYREADY_KEYSTEM_STRING]=[p.default.PLAYREADY_KEYSTEM_STRING,p.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],m[p.default.WIDEVINE_KEYSTEM_STRING]=[p.default.WIDEVINE_KEYSTEM_STRING],m[p.default.CLEARKEY_KEYSTEM_STRING]=[p.default.CLEARKEY_KEYSTEM_STRING],ProtectionModel_21Jan2015.__dashjs_factory_name="ProtectionModel_21Jan2015",r.default=dashjs.FactoryMaker.getClassFactory(ProtectionModel_21Jan2015)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":
/*!*********************************************************************!*\
    !*** ./src/streaming/protection/models/ProtectionModel_3Feb2014.js ***!
    \*********************************************************************/
/*! exports provided: default */function srcStreamingProtectionModelsProtectionModel_3Feb2014Js(t,r,i){i.r(r);var a=i(/*! ../controllers/ProtectionKeyController */"./src/streaming/protection/controllers/ProtectionKeyController.js"),u=i(/*! ../vo/NeedKey */"./src/streaming/protection/vo/NeedKey.js"),l=i(/*! ../../vo/DashJSError */"./src/streaming/vo/DashJSError.js"),c=i(/*! ../errors/ProtectionErrors */"./src/streaming/protection/errors/ProtectionErrors.js"),d=i(/*! ../vo/KeyMessage */"./src/streaming/protection/vo/KeyMessage.js"),g=i(/*! ../vo/KeySystemConfiguration */"./src/streaming/protection/vo/KeySystemConfiguration.js"),p=i(/*! ../vo/KeySystemAccess */"./src/streaming/protection/vo/KeySystemAccess.js");function ProtectionModel_3Feb2014(t){t=t||{};var r,i,m,v,b,M,S,E,I,D=this.context,A=t.eventBus,C=t.events,N=t.debug,k=t.api;function reset(){try{for(var t=0;t<S.length;t++)closeKeySession(S[t]);m&&m.removeEventListener(k.needkey,E),A.trigger(C.TEARDOWN_COMPLETE)}catch(t){A.trigger(C.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+t.message})}}function closeKeySession(t){var r=t.session;r.removeEventListener(k.error,t),r.removeEventListener(k.message,t),r.removeEventListener(k.ready,t),r.removeEventListener(k.close,t);for(var i=0;i<S.length;i++)if(S[i]===t){S.splice(i,1);break}r[k.release]()}function setMediaKeys(){var t=null,r=function doSetKeys(){m.removeEventListener("loadedmetadata",t),m[k.setMediaKeys](b),A.trigger(C.VIDEO_ELEMENT_SELECTED)};m.readyState>=1?r():(t=r.bind(this),m.addEventListener("loadedmetadata",t))}return r={getAllInitData:function getAllInitData(){for(var t=[],r=0;r<S.length;r++)t.push(S[r].initData);return t},getSessions:function getSessions(){return S},requestKeySystemAccess:function requestKeySystemAccess(t){return new Promise((function(r,i){for(var a=!1,u=0;u<t.length;u++)for(var l=t[u].ks.systemString,c=t[u].configs,d=null,m=null,v=0;v<c.length;v++){var b=c[v].audioCapabilities,M=c[v].videoCapabilities;if(b&&0!==b.length){d=[];for(var S=0;S<b.length;S++)window[k.MediaKeys].isTypeSupported(l,b[S].contentType)&&d.push(b[S])}if(M&&0!==M.length){m=[];for(var E=0;E<M.length;E++)window[k.MediaKeys].isTypeSupported(l,M[E].contentType)&&m.push(M[E])}if(!(!d&&!m||d&&0===d.length||m&&0===m.length)){a=!0;var D=new g.default(d,m),N=I.getKeySystemBySystemString(l),O=new p.default(N,D);A.trigger(C.KEY_SYSTEM_ACCESS_COMPLETE,{data:O}),r({data:O});break}}if(!a){var L="Key system access denied! -- No valid audio/video content configurations detected!";A.trigger(C.KEY_SYSTEM_ACCESS_COMPLETE,{error:L}),i({error:L})}}))},selectKeySystem:function selectKeySystem(t){return new Promise((function(r,i){try{b=t.mediaKeys=new window[k.MediaKeys](t.keySystem.systemString),v=t.keySystem,M=t,m&&setMediaKeys(),r(v)}catch(t){i({error:"Error selecting keys system ("+v.systemString+")! Could not create MediaKeys -- TODO"})}}))},setMediaElement:function setMediaElement(t){m!==t&&(m&&m.removeEventListener(k.needkey,E),(m=t)&&(m.addEventListener(k.needkey,E),b&&setMediaKeys()))},createKeySession:function createKeySession(t){if(!v||!b||!M)throw new Error("Can not create sessions until you have selected a key system");var r=null;if(M.ksConfiguration.videoCapabilities&&M.ksConfiguration.videoCapabilities.length>0&&(r=M.ksConfiguration.videoCapabilities[0]),null===r&&M.ksConfiguration.audioCapabilities&&M.ksConfiguration.audioCapabilities.length>0&&(r=M.ksConfiguration.audioCapabilities[0]),null===r)throw new Error("Can not create sessions for unknown content types.");var a=r.contentType,u=b.createSession(a,new Uint8Array(t.initData),t.cdmData?new Uint8Array(t.cdmData):null),g=function createSessionToken(t,r){return{session:t,keyId:r.keyId,initData:r.initData,getKeyId:function getKeyId(){return this.keyId},getSessionId:function getSessionId(){return this.session.sessionId},getExpirationTime:function getExpirationTime(){return NaN},getSessionType:function getSessionType(){return"temporary"},handleEvent:function handleEvent(t){switch(t.type){case k.error:var r="KeyError";A.trigger(C.KEY_ERROR,{error:new l.default(c.default.MEDIA_KEYERR_CODE,r,this)});break;case k.message:var a=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;A.trigger(C.INTERNAL_KEY_MESSAGE,{data:new d.default(this,a,t.destinationURL)});break;case k.ready:i.debug("DRM: Key added."),A.trigger(C.KEY_ADDED);break;case k.close:i.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),A.trigger(C.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(u,t);u.addEventListener(k.error,g),u.addEventListener(k.message,g),u.addEventListener(k.ready,g),u.addEventListener(k.close,g),S.push(g),i.debug("DRM: Session created.  SessionID = "+g.getSessionId()),A.trigger(C.KEY_SESSION_CREATED,{data:g})},updateKeySession:function updateKeySession(t,r){var i=t.session;I.isClearKey(v)?i.update(new Uint8Array(r.toJWK())):i.update(new Uint8Array(r)),A.trigger(C.KEY_SESSION_UPDATED)},closeKeySession:closeKeySession,setServerCertificate:function setServerCertificate(){},loadKeySession:function loadKeySession(){},removeKeySession:function removeKeySession(){},stop:reset,reset:reset},function setup(){i=N.getLogger(r),m=null,v=null,b=null,M=null,S=[],I=Object(a.default)(D).getInstance(),E=function createEventHandler(){return{handleEvent:function handleEvent(t){if(t.type===k.needkey)if(t.initData){var r=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;A.trigger(C.NEED_KEY,{key:new u.default(r,"cenc")})}}}}()}(),r}ProtectionModel_3Feb2014.__dashjs_factory_name="ProtectionModel_3Feb2014",r.default=dashjs.FactoryMaker.getClassFactory(ProtectionModel_3Feb2014)},"./src/streaming/protection/servers/ClearKey.js":
/*!******************************************************!*\
    !*** ./src/streaming/protection/servers/ClearKey.js ***!
    \******************************************************/
/*! exports provided: default */function srcStreamingProtectionServersClearKeyJs(t,r,i){i.r(r);var a=i(/*! ../vo/KeyPair */"./src/streaming/protection/vo/KeyPair.js"),u=i(/*! ../vo/ClearKeyKeySet */"./src/streaming/protection/vo/ClearKeyKeySet.js");function ClearKey(){return{getServerURLFromMessage:function getServerURLFromMessage(t){return t},getHTTPMethod:function getHTTPMethod(){return"POST"},getResponseType:function getResponseType(){return"json"},getLicenseMessage:function getLicenseMessage(t){if(!t.hasOwnProperty("keys"))return null;for(var r=[],i=0;i<t.keys.length;i++){var l=t.keys[i],c=l.kid.replace(/=/g,""),d=l.k.replace(/=/g,"");r.push(new a.default(c,d))}return new u.default(r)},getErrorResponse:function getErrorResponse(t){return String.fromCharCode.apply(null,new Uint8Array(t))}}}ClearKey.__dashjs_factory_name="ClearKey",r.default=dashjs.FactoryMaker.getSingletonFactory(ClearKey)},"./src/streaming/protection/servers/DRMToday.js":
/*!******************************************************!*\
    !*** ./src/streaming/protection/servers/DRMToday.js ***!
    \******************************************************/
/*! exports provided: default */function srcStreamingProtectionServersDRMTodayJs(t,r,i){i.r(r);var a=i(/*! ../../constants/ProtectionConstants */"./src/streaming/constants/ProtectionConstants.js");function DRMToday(t){var r=(t=t||{}).BASE64,i={};return i[a.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function getLicenseMessage(t){return r.decodeArray(t.license)},getErrorResponse:function getErrorResponse(t){return t}},i[a.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function getLicenseMessage(t){return t},getErrorResponse:function getErrorResponse(t){return String.fromCharCode.apply(null,new Uint8Array(t))}},{getServerURLFromMessage:function getServerURLFromMessage(t){return t},getHTTPMethod:function getHTTPMethod(){return"POST"},getResponseType:function getResponseType(t){return i[t].responseType},getLicenseMessage:function getLicenseMessage(t,a){return function checkConfig(){if(!r||!r.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),i[a].getLicenseMessage(t)},getErrorResponse:function getErrorResponse(t,r){return i[r].getErrorResponse(t)}}}DRMToday.__dashjs_factory_name="DRMToday",r.default=dashjs.FactoryMaker.getSingletonFactory(DRMToday)},"./src/streaming/protection/servers/PlayReady.js":
/*!*******************************************************!*\
    !*** ./src/streaming/protection/servers/PlayReady.js ***!
    \*******************************************************/
/*! exports provided: default */function srcStreamingProtectionServersPlayReadyJs(t,r,i){function PlayReady(){var t="http://schemas.xmlsoap.org/soap/envelope/";function uintToString(t){var r=String.fromCharCode.apply(null,new Uint8Array(t));return decodeURIComponent(escape(r))}function parseServerResponse(r){if(window.DOMParser){var i=uintToString(r),a=(new window.DOMParser).parseFromString(i,"text/xml"),u=a?a.getElementsByTagNameNS(t,"Envelope")[0]:null,l=u?u.getElementsByTagNameNS(t,"Body")[0]:null;if(l?l.getElementsByTagNameNS(t,"Fault")[0]:null)return null}return r}function parseErrorResponse(r){var i="",a="",u="",l=-1,c=-1;if(window.DOMParser){var d=uintToString(r),g=(new window.DOMParser).parseFromString(d,"text/xml"),p=g?g.getElementsByTagNameNS(t,"Envelope")[0]:null,m=p?p.getElementsByTagNameNS(t,"Body")[0]:null,v=m?m.getElementsByTagNameNS(t,"Fault")[0]:null,b=v?v.getElementsByTagName("detail")[0]:null,M=b?b.getElementsByTagName("Exception")[0]:null,S=null;if(null===v)return d;i=(S=v.getElementsByTagName("faultstring")[0].firstChild)?S.nodeValue:null,null!==M&&(a=(S=M.getElementsByTagName("StatusCode")[0])?S.firstChild.nodeValue:null,l=(u=(S=M.getElementsByTagName("Message")[0])?S.firstChild.nodeValue:null)?u.lastIndexOf("[")+1:-1,c=u?u.indexOf("]"):-1,u=u?u.substring(l,c):"")}var E="code: ".concat(a,", name: ").concat(i);return u&&(E+=", message: ".concat(u)),E}return{getServerURLFromMessage:function getServerURLFromMessage(t){return t},getHTTPMethod:function getHTTPMethod(){return"POST"},getResponseType:function getResponseType(){return"arraybuffer"},getLicenseMessage:function getLicenseMessage(t){return parseServerResponse.call(this,t)},getErrorResponse:function getErrorResponse(t){return parseErrorResponse.call(this,t)}}}i.r(r),PlayReady.__dashjs_factory_name="PlayReady",r.default=dashjs.FactoryMaker.getSingletonFactory(PlayReady)},"./src/streaming/protection/servers/Widevine.js":
/*!******************************************************!*\
    !*** ./src/streaming/protection/servers/Widevine.js ***!
    \******************************************************/
/*! exports provided: default */function srcStreamingProtectionServersWidevineJs(t,r,i){function Widevine(){return{getServerURLFromMessage:function getServerURLFromMessage(t){return t},getHTTPMethod:function getHTTPMethod(){return"POST"},getResponseType:function getResponseType(){return"arraybuffer"},getLicenseMessage:function getLicenseMessage(t){return t},getErrorResponse:function getErrorResponse(t){return String.fromCharCode.apply(null,new Uint8Array(t))}}}i.r(r),Widevine.__dashjs_factory_name="Widevine",r.default=dashjs.FactoryMaker.getSingletonFactory(Widevine)},"./src/streaming/protection/vo/ClearKeyKeySet.js":
/*!*******************************************************!*\
    !*** ./src/streaming/protection/vo/ClearKeyKeySet.js ***!
    \*******************************************************/
/*! exports provided: default */function srcStreamingProtectionVoClearKeyKeySetJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=function(){function ClearKeyKeySet(t,r){if(function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ClearKeyKeySet),r&&"persistent"!==r&&"temporary"!==r)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=r}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(ClearKeyKeySet,[{key:"toJWK",value:function toJWK(){var t,r=this.keyPairs.length,i={keys:[]};for(t=0;t<r;t++){var a={kty:"oct",alg:"A128KW",kid:this.keyPairs[t].keyID,k:this.keyPairs[t].key};i.keys.push(a)}this.type&&(i.type=this.type);var u=JSON.stringify(i),l=u.length,c=new ArrayBuffer(l),d=new Uint8Array(c);for(t=0;t<l;t++)d[t]=u.charCodeAt(t);return c}}]),ClearKeyKeySet}();r.default=a},"./src/streaming/protection/vo/KeyMessage.js":
/*!***************************************************!*\
    !*** ./src/streaming/protection/vo/KeyMessage.js ***!
    \***************************************************/
/*! exports provided: default */function srcStreamingProtectionVoKeyMessageJs(t,r,i){i.r(r);r.default=function KeyMessage(t,r,i,a){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,KeyMessage),this.sessionToken=t,this.message=r,this.defaultURL=i,this.messageType=a||"license-request"}},"./src/streaming/protection/vo/KeyPair.js":
/*!************************************************!*\
    !*** ./src/streaming/protection/vo/KeyPair.js ***!
    \************************************************/
/*! exports provided: default */function srcStreamingProtectionVoKeyPairJs(t,r,i){i.r(r);r.default=function KeyPair(t,r){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,KeyPair),this.keyID=t,this.key=r}},"./src/streaming/protection/vo/KeySystemAccess.js":
/*!********************************************************!*\
    !*** ./src/streaming/protection/vo/KeySystemAccess.js ***!
    \********************************************************/
/*! exports provided: default */function srcStreamingProtectionVoKeySystemAccessJs(t,r,i){i.r(r);r.default=function KeySystemAccess(t,r){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,KeySystemAccess),this.keySystem=t,this.ksConfiguration=r}},"./src/streaming/protection/vo/KeySystemConfiguration.js":
/*!***************************************************************!*\
    !*** ./src/streaming/protection/vo/KeySystemConfiguration.js ***!
    \***************************************************************/
/*! exports provided: default */function srcStreamingProtectionVoKeySystemConfigurationJs(t,r,i){i.r(r);r.default=function KeySystemConfiguration(t,r,i,a,u){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,KeySystemConfiguration),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),r&&r.length&&(this.videoCapabilities=r),this.distinctiveIdentifier=i,this.persistentState=a,this.sessionTypes=u}},"./src/streaming/protection/vo/LicenseRequest.js":
/*!*******************************************************!*\
    !*** ./src/streaming/protection/vo/LicenseRequest.js ***!
    \*******************************************************/
/*! exports provided: default */function srcStreamingProtectionVoLicenseRequestJs(t,r,i){i.r(r);r.default=function LicenseRequest(t,r,i,a,u,l,c,d){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,LicenseRequest),this.url=t,this.method=r,this.responseType=i,this.headers=a,this.withCredentials=u,this.messageType=l,this.sessionId=c,this.data=d}},"./src/streaming/protection/vo/LicenseResponse.js":
/*!********************************************************!*\
    !*** ./src/streaming/protection/vo/LicenseResponse.js ***!
    \********************************************************/
/*! exports provided: default */function srcStreamingProtectionVoLicenseResponseJs(t,r,i){i.r(r);r.default=function LicenseResponse(t,r,i){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,LicenseResponse),this.url=t,this.headers=r,this.data=i}},"./src/streaming/protection/vo/MediaCapability.js":
/*!********************************************************!*\
    !*** ./src/streaming/protection/vo/MediaCapability.js ***!
    \********************************************************/
/*! exports provided: default */function srcStreamingProtectionVoMediaCapabilityJs(t,r,i){i.r(r);r.default=function MediaCapability(t,r){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MediaCapability),this.contentType=t,this.robustness=r}},"./src/streaming/protection/vo/NeedKey.js":
/*!************************************************!*\
    !*** ./src/streaming/protection/vo/NeedKey.js ***!
    \************************************************/
/*! exports provided: default */function srcStreamingProtectionVoNeedKeyJs(t,r,i){i.r(r);r.default=function NeedKey(t,r){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,NeedKey),this.initData=t,this.initDataType=r}},"./src/streaming/rules/DroppedFramesHistory.js":
/*!*****************************************************!*\
    !*** ./src/streaming/rules/DroppedFramesHistory.js ***!
    \*****************************************************/
/*! exports provided: default */function srcStreamingRulesDroppedFramesHistoryJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function DroppedFramesHistory(){var t={},r={},i={};return{push:function push(a,u,l){if(u){t[a]||(t[a]=[],r[a]=0,i[a]=0);var c=l&&l.droppedVideoFrames?l.droppedVideoFrames:0,d=l&&l.totalVideoFrames?l.totalVideoFrames:0,g=c-r;r[a]=c;var p=d-i;i[a]=d;var m=t[a];isNaN(u)||(m[u]?(m[u].droppedVideoFrames+=g,m[u].totalVideoFrames+=p):m[u]={droppedVideoFrames:g,totalVideoFrames:p})}},getFrameHistory:function getFrameHistory(r){return t[r]},clearForStream:function clearForStream(a){try{delete t[a],delete r[a],delete i[a]}catch(t){}},reset:function reset(){t={},r={},i={}}}}DroppedFramesHistory.__dashjs_factory_name="DroppedFramesHistory";var u=a.default.getClassFactory(DroppedFramesHistory);r.default=u},"./src/streaming/rules/RulesContext.js":
/*!*********************************************!*\
    !*** ./src/streaming/rules/RulesContext.js ***!
    \*********************************************/
/*! exports provided: default */function srcStreamingRulesRulesContextJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function RulesContext(t){var r=(t=t||{}).abrController,i=t.switchHistory,a=t.droppedFramesHistory,u=t.currentRequest,l=t.useBufferOccupancyABR,c=t.useL2AABR,d=t.useLoLPABR,g=t.streamProcessor?t.streamProcessor.getScheduleController():null,p=t.streamProcessor?t.streamProcessor.getRepresentationInfo():null,m=t.videoModel?t.videoModel:null;function getMediaInfo(){return p?p.mediaInfo:null}return{getMediaType:function getMediaType(){var t=getMediaInfo();return t?t.type:null},getMediaInfo:getMediaInfo,getDroppedFramesHistory:function getDroppedFramesHistory(){return a},getCurrentRequest:function getCurrentRequest(){return u},getSwitchHistory:function getSwitchHistory(){return i},getStreamInfo:function getStreamInfo(){var t=getMediaInfo();return t?t.streamInfo:null},getScheduleController:function getScheduleController(){return g},getAbrController:function getAbrController(){return r},getRepresentationInfo:function getRepresentationInfo(){return p},useBufferOccupancyABR:function useBufferOccupancyABR(){return l},useL2AABR:function useL2AABR(){return c},useLoLPABR:function useLoLPABR(){return d},getVideoModel:function getVideoModel(){return m}}}RulesContext.__dashjs_factory_name="RulesContext",r.default=a.default.getClassFactory(RulesContext)},"./src/streaming/rules/SwitchRequest.js":
/*!**********************************************!*\
    !*** ./src/streaming/rules/SwitchRequest.js ***!
    \**********************************************/
/*! exports provided: default */function srcStreamingRulesSwitchRequestJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u={DEFAULT:.5,STRONG:1,WEAK:0};function SwitchRequest(t,r,i){var a,l;return a=void 0===t?-1:t,l=function getPriority(t){var r=u.DEFAULT;return t!==u.DEFAULT&&t!==u.STRONG&&t!==u.WEAK||(r=t),r}(i),{quality:a,reason:void 0===r?null:r,priority:l}}SwitchRequest.__dashjs_factory_name="SwitchRequest";var l=a.default.getClassFactory(SwitchRequest);l.NO_CHANGE=-1,l.PRIORITY=u,a.default.updateClassFactory(SwitchRequest.__dashjs_factory_name,l),r.default=l},"./src/streaming/rules/SwitchRequestHistory.js":
/*!*****************************************************!*\
    !*** ./src/streaming/rules/SwitchRequestHistory.js ***!
    \*****************************************************/
/*! exports provided: default */function srcStreamingRulesSwitchRequestHistoryJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ./SwitchRequest */"./src/streaming/rules/SwitchRequest.js");function SwitchRequestHistory(){var t=[],r=[];return{push:function push(i){i.newValue===u.default.NO_CHANGE&&(i.newValue=i.oldValue),t[i.oldValue]||(t[i.oldValue]={noDrops:0,drops:0,dropSize:0});var a=i.newValue-i.oldValue,l=a<0?1:0,c=l?-a:0,d=l?0:1;if(t[i.oldValue].drops+=l,t[i.oldValue].dropSize+=c,t[i.oldValue].noDrops+=d,r.push({idx:i.oldValue,noDrop:d,drop:l,dropSize:c}),r.length>8){var g=r.shift();t[g.idx].drops-=g.drop,t[g.idx].dropSize-=g.dropSize,t[g.idx].noDrops-=g.noDrop}},getSwitchRequests:function getSwitchRequests(){return t},reset:function reset(){t=[],r=[]}}}SwitchRequestHistory.__dashjs_factory_name="SwitchRequestHistory";var l=a.default.getClassFactory(SwitchRequestHistory);r.default=l},"./src/streaming/rules/ThroughputHistory.js":
/*!**************************************************!*\
    !*** ./src/streaming/rules/ThroughputHistory.js ***!
    \**************************************************/
/*! exports provided: default */function srcStreamingRulesThroughputHistoryJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function ThroughputHistory(t){var r,i,u,l,c,d=(t=t||{}).settings;function updateEwmaEstimate(t,r,i,a){var u=Math.pow(.5,i/a.fast);t.fastEstimate=(1-u)*r+u*t.fastEstimate;var l=Math.pow(.5,i/a.slow);t.slowEstimate=(1-l)*r+l*t.slowEstimate,t.totalWeight+=i}function getAverage(t,g,p){return d.get().streaming.abr.movingAverageMethod!==a.default.MOVING_AVERAGE_SLIDING_WINDOW?function getAverageEwma(t,r){var i=t?c.throughputHalfLife:c.latencyHalfLife,a=t?u[r]:l[r];if(!a||a.totalWeight<=0)return NaN;var d=a.fastEstimate/(1-Math.pow(.5,a.totalWeight/i.fast)),g=a.slowEstimate/(1-Math.pow(.5,a.totalWeight/i.slow));return t?Math.min(d,g):Math.max(d,g)}(t,g):function getAverageSlidingWindow(t,a,u){var l=function getSampleSize(t,a,u){var l,c;if(t?(l=r[a],c=u?3:4):(l=i[a],c=4),l){if(c>=l.length)c=l.length;else if(t)for(var d=1;d<c;++d){var g=l[l.length-d]/l[l.length-d-1];if((g>=1.3||g<=1/1.3)&&(c+=1)===l.length)break}}else c=0;return c}(t,a,u),c=(t?r:i)[a];if(0===l||!c||0===c.length)return NaN;return(c=c.slice(-l)).reduce((function(t,r){return t+r}))/c.length}(t,g,p)}function getAverageThroughput(t,r){return getAverage(!0,t,r)}function checkSettingsForMediaType(t){r[t]=r[t]||[],i[t]=i[t]||[],u[t]=u[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0},l[t]=l[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function reset(){r={},i={},u={},l={}}var g={push:function push(t,g,p){if(g.trace&&g.trace.length){var m=g.tresponse.getTime()-g.trequest.getTime()||1,v=g._tfinish.getTime()-g.tresponse.getTime()||1,b=g.trace.reduce((function(t,r){return t+r.b[0]}),0),M=0,S=0;if(g._fileLoaderType&&g._fileLoaderType===a.default.FILE_LOADER_TYPES.FETCH){if(d.get().streaming.abr.fetchThroughputCalculationMode===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING){var E=g.trace.reduce((function(t,r){return t+r._t}),0);S=Math.round(E/g.trace.length)}0===S&&(M=g.trace.reduce((function(t,r){return t+r.d}),0))}else M=p?v:m+v;if(0!==M&&(S=Math.round(8*b/M)),checkSettingsForMediaType(t),function isCachedResponse(t,r,i){return t===a.default.VIDEO?i<d.get().streaming.cacheLoadThresholds[a.default.VIDEO]:t===a.default.AUDIO?i<d.get().streaming.cacheLoadThresholds[a.default.AUDIO]:void 0}(t,0,v)){if(r[t].length>0&&!r[t].hasCachedEntries)return;r[t].hasCachedEntries=!0}else r[t]&&r[t].hasCachedEntries&&function clearSettingsForMediaType(t){delete r[t],delete i[t],delete u[t],delete l[t],checkSettingsForMediaType(t)}(t);r[t].push(S),r[t].length>20&&r[t].shift(),i[t].push(m),i[t].length>20&&i[t].shift(),updateEwmaEstimate(u[t],S,.001*v,c.throughputHalfLife),updateEwmaEstimate(l[t],m,1,c.latencyHalfLife)}},getAverageThroughput:getAverageThroughput,getSafeAverageThroughput:function getSafeAverageThroughput(t,r){var i=getAverageThroughput(t,r);return isNaN(i)||(i*=d.get().streaming.abr.bandwidthSafetyFactor),i},getAverageLatency:function getAverageLatency(t){return getAverage(!1,t)},reset:reset};return function setup(){c={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},reset()}(),g}ThroughputHistory.__dashjs_factory_name="ThroughputHistory",r.default=u.default.getClassFactory(ThroughputHistory)},"./src/streaming/rules/abr/ABRRulesCollection.js":
/*!*******************************************************!*\
    !*** ./src/streaming/rules/abr/ABRRulesCollection.js ***!
    \*******************************************************/
/*! exports provided: default */function srcStreamingRulesAbrABRRulesCollectionJs(t,r,i){i.r(r);var a=i(/*! ./ThroughputRule */"./src/streaming/rules/abr/ThroughputRule.js"),u=i(/*! ./InsufficientBufferRule */"./src/streaming/rules/abr/InsufficientBufferRule.js"),l=i(/*! ./AbandonRequestsRule */"./src/streaming/rules/abr/AbandonRequestsRule.js"),c=i(/*! ./DroppedFramesRule */"./src/streaming/rules/abr/DroppedFramesRule.js"),d=i(/*! ./SwitchHistoryRule */"./src/streaming/rules/abr/SwitchHistoryRule.js"),g=i(/*! ./BolaRule */"./src/streaming/rules/abr/BolaRule.js"),p=i(/*! ./L2ARule.js */"./src/streaming/rules/abr/L2ARule.js"),m=i(/*! ./lolp/LoLpRule.js */"./src/streaming/rules/abr/lolp/LoLpRule.js"),v=i(/*! ../../../core/FactoryMaker */"./src/core/FactoryMaker.js"),b=i(/*! ../SwitchRequest */"./src/streaming/rules/SwitchRequest.js"),M=i(/*! ../../constants/Constants */"./src/streaming/constants/Constants.js"),S="qualitySwitchRules",E="abandonFragmentRules";function ABRRulesCollection(t){t=t||{};var r,i,v=this.context,I=t.mediaPlayerModel,D=t.customParametersModel,A=t.dashMetrics,C=t.settings;function _getRulesWithChange(t){return t.filter((function(t){return t.quality>b.default.NO_CHANGE}))}function getMinSwitchRequest(t){var r,i,a,u,l,c={},d=null;if(0!==t.length){for(c[b.default.PRIORITY.STRONG]={quality:b.default.NO_CHANGE,reason:null},c[b.default.PRIORITY.WEAK]={quality:b.default.NO_CHANGE,reason:null},c[b.default.PRIORITY.DEFAULT]={quality:b.default.NO_CHANGE,reason:null},r=0,i=t.length;r<i;r+=1)(a=t[r]).quality!==b.default.NO_CHANGE&&(c[a.priority].quality===b.default.NO_CHANGE||c[a.priority].quality>a.quality)&&(c[a.priority].quality=a.quality,c[a.priority].reason=a.reason||null);return c[b.default.PRIORITY.WEAK].quality!==b.default.NO_CHANGE&&(d=c[b.default.PRIORITY.WEAK]),c[b.default.PRIORITY.DEFAULT].quality!==b.default.NO_CHANGE&&(d=c[b.default.PRIORITY.DEFAULT]),c[b.default.PRIORITY.STRONG].quality!==b.default.NO_CHANGE&&(d=c[b.default.PRIORITY.STRONG]),d&&(u=d.quality,l=d.reason),Object(b.default)(v).create(u,l)}}return{initialize:function initialize(){r=[],i=[],C.get().streaming.abr.useDefaultABRRules&&(C.get().streaming.abr.ABRStrategy===M.default.ABR_STRATEGY_L2A?r.push(Object(p.default)(v).create({dashMetrics:A,settings:C})):C.get().streaming.abr.ABRStrategy===M.default.ABR_STRATEGY_LoLP?r.push(Object(m.default)(v).create({dashMetrics:A})):(r.push(Object(g.default)(v).create({dashMetrics:A,mediaPlayerModel:I,settings:C})),r.push(Object(a.default)(v).create({dashMetrics:A})),C.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&r.push(Object(u.default)(v).create({dashMetrics:A,settings:C})),C.get().streaming.abr.additionalAbrRules.switchHistoryRule&&r.push(Object(d.default)(v).create()),C.get().streaming.abr.additionalAbrRules.droppedFramesRule&&r.push(Object(c.default)(v).create()),C.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&i.push(Object(l.default)(v).create({dashMetrics:A,mediaPlayerModel:I,settings:C})))),D.getAbrCustomRules().forEach((function(t){t.type===S&&r.push(t.rule(v).create()),t.type===E&&i.push(t.rule(v).create())}))},reset:function reset(){[r,i].forEach((function(t){t&&t.length&&t.forEach((function(t){return t.reset&&t.reset()}))})),r=[],i=[]},getMaxQuality:function getMaxQuality(t){return getMinSwitchRequest(_getRulesWithChange(r.map((function(r){return r.getMaxIndex(t)}))))||Object(b.default)(v).create()},getMinSwitchRequest:getMinSwitchRequest,shouldAbandonFragment:function shouldAbandonFragment(t,r){return getMinSwitchRequest(_getRulesWithChange(i.map((function(i){return i.shouldAbandon(t,r)}))))||Object(b.default)(v).create()},getQualitySwitchRules:function getQualitySwitchRules(){return r}}}ABRRulesCollection.__dashjs_factory_name="ABRRulesCollection";var I=v.default.getClassFactory(ABRRulesCollection);I.QUALITY_SWITCH_RULES=S,I.ABANDON_FRAGMENT_RULES=E,v.default.updateSingletonFactory(ABRRulesCollection.__dashjs_factory_name,I),r.default=I},"./src/streaming/rules/abr/AbandonRequestsRule.js":
/*!********************************************************!*\
    !*** ./src/streaming/rules/abr/AbandonRequestsRule.js ***!
    \********************************************************/
/*! exports provided: default */function srcStreamingRulesAbrAbandonRequestsRuleJs(t,r,i){i.r(r);var a=i(/*! ../SwitchRequest */"./src/streaming/rules/SwitchRequest.js"),u=i(/*! ../../../core/FactoryMaker */"./src/core/FactoryMaker.js"),l=i(/*! ../../../core/Debug */"./src/core/Debug.js");function AbandonRequestsRule(t){t=t||{};var r,i,u,c,d,g=this.context,p=t.mediaPlayerModel,m=t.dashMetrics,v=t.settings;function reset(){u={},c={},d=[]}return r={shouldAbandon:function shouldAbandon(t){var r=Object(a.default)(g).create(a.default.NO_CHANGE,{name:AbandonRequestsRule.__dashjs_factory_name});if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getCurrentRequest")&&t.hasOwnProperty("getRepresentationInfo")&&t.hasOwnProperty("getAbrController")))return r;var l=t.getMediaInfo(),b=t.getMediaType(),M=t.getStreamInfo(),S=M?M.id:null,E=t.getCurrentRequest();if(!isNaN(E.index)){!function setFragmentRequestDict(t,r){u[t]=u[t]||{},u[t][r]=u[t][r]||{}}(b,E.index);var I=p.getStableBufferTime();if(m.getCurrentBufferLevel(b)>I)return r;var D=u[b][E.index];if(null===D||null===E.firstByteDate||c.hasOwnProperty(D.id))return r;if(void 0===D.firstByteTime&&(d[b]=[],D.firstByteTime=E.firstByteDate.getTime(),D.segmentDuration=E.duration,D.bytesTotal=E.bytesTotal,D.id=E.index),D.bytesLoaded=E.bytesLoaded,D.elapsedTime=(new Date).getTime()-D.firstByteTime,D.bytesLoaded>0&&D.elapsedTime>0&&function storeLastRequestThroughputByType(t,r){d[t]=d[t]||[],d[t].push(r)}(b,Math.round(8*D.bytesLoaded/D.elapsedTime)),d[b].length>=5&&D.elapsedTime>500&&D.bytesLoaded<D.bytesTotal){var A=d[b].reduce((function(t,r){return t+r}),0);if(D.measuredBandwidthInKbps=Math.round(A/d[b].length),D.estimatedTimeOfDownload=+(8*D.bytesTotal/D.measuredBandwidthInKbps/1e3).toFixed(2),D.estimatedTimeOfDownload<1.8*D.segmentDuration||0===t.getRepresentationInfo().quality)return r;if(!c.hasOwnProperty(D.id)){var C=t.getAbrController(),N=D.bytesTotal-D.bytesLoaded,k=C.getBitrateList(l),O=C.getQualityForBitrate(l,D.measuredBandwidthInKbps*v.get().streaming.abr.bandwidthSafetyFactor,S),L=C.getMinAllowedIndexFor(b,S),R=void 0!==L?Math.max(L,O):O;N>D.bytesTotal*k[R].bitrate/k[C.getQualityFor(b,S)].bitrate&&(r.quality=R,r.reason.throughput=D.measuredBandwidthInKbps,r.reason.fragmentID=D.id,c[D.id]=D,i.debug("["+b+"] frag id",D.id," is asking to abandon and switch to quality to ",R," measured bandwidth was",D.measuredBandwidthInKbps),delete u[b][D.id])}}else D.bytesLoaded===D.bytesTotal&&delete u[b][D.id]}return r},reset:reset},function setup(){i=Object(l.default)(g).getInstance().getLogger(r),reset()}(),r}AbandonRequestsRule.__dashjs_factory_name="AbandonRequestsRule",r.default=u.default.getClassFactory(AbandonRequestsRule)},"./src/streaming/rules/abr/BolaRule.js":
/*!*********************************************!*\
    !*** ./src/streaming/rules/abr/BolaRule.js ***!
    \*********************************************/
/*! exports provided: default */function srcStreamingRulesAbrBolaRuleJs(t,r,i){i.r(r);var a=i(/*! ../../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),u=i(/*! ../SwitchRequest */"./src/streaming/rules/SwitchRequest.js"),l=i(/*! ../../../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! ../../vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),d=i(/*! ../../../core/EventBus */"./src/core/EventBus.js"),g=i(/*! ../../../core/events/Events */"./src/core/events/Events.js"),p=i(/*! ../../../core/Debug */"./src/core/Debug.js"),m=i(/*! ../../MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),v=i(/*! ../../constants/Constants */"./src/streaming/constants/Constants.js"),b=10;function BolaRule(t){t=t||{};var r,i,l,M=this.context,S=t.dashMetrics,E=t.mediaPlayerModel,I=Object(d.default)(M).getInstance();function calculateBolaParameters(t,r,i){var a=i.reduce((function(t,r,a){return r>i[t]?a:t}),0);if(0===a)return null;var u=Math.max(t,b+2*r.length),l=(i[a]-1)/(u/b-1);return{gp:l,Vp:b/l}}function getInitialBolaState(t){var r={},i=t.getMediaInfo().bitrateList.map((function(t){return t.bandwidth})),a=function utilitiesFromBitrates(t){return t.map((function(t){return Math.log(t)}))}(i);a=a.map((function(t){return t-a[0]+1}));var u=E.getStableBufferTime(),l=calculateBolaParameters(u,i,a);return l?(r.state=1,r.bitrates=i,r.utilities=a,r.stableBufferTime=u,r.Vp=l.Vp,r.gp=l.gp,r.lastQuality=0,clearBolaStateOnSeek(r)):r.state=0,r}function clearBolaStateOnSeek(t){t.placeholderBuffer=0,t.mostAdvancedSegmentStart=NaN,t.lastSegmentWasReplacement=!1,t.lastSegmentStart=NaN,t.lastSegmentDurationS=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN}function checkBolaStateStableBufferTime(t,r){var i=E.getStableBufferTime();if(t.stableBufferTime!==i){var a=calculateBolaParameters(i,t.bitrates,t.utilities);if(a.Vp!==t.Vp||a.gp!==t.gp){var u=S.getCurrentBufferLevel(r),l=u+t.placeholderBuffer;l-=b,l*=a.Vp/t.Vp,l+=b,t.stableBufferTime=i,t.Vp=a.Vp,t.gp=a.gp,t.placeholderBuffer=Math.max(0,l-u)}}}function maxBufferLevelForQuality(t,r){return t.Vp*(t.utilities[r]+t.gp)}function minBufferLevelForQuality(t,r){for(var i=t.bitrates[r],a=t.utilities[r],u=0,l=r-1;l>=0;--l)if(t.utilities[l]<t.utilities[r]){var c=t.bitrates[l],d=t.utilities[l],g=t.Vp*(t.gp+(i*d-c*a)/(i-c));u=Math.max(u,g)}return u}function onBufferEmpty(t){var r=t.mediaType===v.default.AUDIO?[v.default.AUDIO]:l;for(var i in r)l.hasOwnProperty(i)&&2===l[i].state&&(l[i].placeholderBuffer=0)}function onPlaybackSeeking(){for(var t in l)if(l.hasOwnProperty(t)){var r=l[t];0!==r.state&&(r.state=1,clearBolaStateOnSeek(r))}}function onMediaFragmentLoaded(t){if(t&&t.chunk&&t.chunk.mediaInfo){var r=l[t.chunk.mediaInfo.type];if(r&&0!==r.state){var i=t.chunk.start;isNaN(r.mostAdvancedSegmentStart)||i>r.mostAdvancedSegmentStart?(r.mostAdvancedSegmentStart=i,r.lastSegmentWasReplacement=!1):r.lastSegmentWasReplacement=!0,r.lastSegmentStart=i,r.lastSegmentDurationS=t.chunk.duration,r.lastQuality=t.chunk.quality,checkNewSegment(r,t.chunk.mediaInfo.type)}}}function onMetricAdded(t){if(t&&t.metric===a.default.HTTP_REQUEST&&t.value&&t.value.type===c.HTTPRequest.MEDIA_SEGMENT_TYPE&&t.value.trace&&t.value.trace.length){var r=l[t.mediaType];r&&0!==r.state&&(r.lastSegmentRequestTimeMs=t.value.trequest.getTime(),r.lastSegmentFinishTimeMs=t.value._tfinish.getTime(),checkNewSegment(r,t.mediaType))}}function checkNewSegment(t,r){if(!isNaN(t.lastSegmentStart)&&!isNaN(t.lastSegmentRequestTimeMs)&&!isNaN(t.placeholderBuffer)){if(t.placeholderBuffer*=.99,!isNaN(t.lastSegmentFinishTimeMs)){var i=S.getCurrentBufferLevel(r)+.001*(t.lastSegmentFinishTimeMs-t.lastSegmentRequestTimeMs),a=maxBufferLevelForQuality(t,t.lastQuality),u=Math.max(0,a-i);t.placeholderBuffer=Math.min(u,t.placeholderBuffer)}t.lastSegmentWasReplacement&&!isNaN(t.lastSegmentDurationS)&&(t.placeholderBuffer+=t.lastSegmentDurationS),t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN}}function onQualityChangeRequested(t){if(t){var r=l[t.mediaType];r&&0!==r.state&&(r.abrQuality=t.newQuality)}}function onFragmentLoadingAbandoned(t){if(t){var r=l[t.mediaType];if(r&&0!==r.state){var i,a=S.getCurrentBufferLevel(t.mediaType);i=r.abrQuality>0?minBufferLevelForQuality(r,r.abrQuality):b;var u=Math.max(0,i-a);r.placeholderBuffer=Math.min(r.placeholderBuffer,u)}}}function resetInitialSettings(){l={}}return r={getMaxIndex:function getMaxIndex(t){var r=Object(u.default)(M).create();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getScheduleController")&&t.hasOwnProperty("getStreamInfo")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("useBufferOccupancyABR")))return r;var a=t.getMediaInfo(),c=t.getMediaType(),d=t.getScheduleController(),g=t.getStreamInfo(),p=t.getAbrController(),m=p.getThroughputHistory(),v=g?g.id:null,b=g&&g.manifestInfo&&g.manifestInfo.isDynamic,E=t.useBufferOccupancyABR();if(r.reason=r.reason||{},!E)return r;d.setTimeToLoadDelay(0);var I=function getBolaState(t){var r=t.getMediaType(),i=l[r];return i?0!==i.state&&checkBolaStateStableBufferTime(i,r):(i=getInitialBolaState(t),l[r]=i),i}(t);if(0===I.state)return r;var D,A=S.getCurrentBufferLevel(c),C=m.getAverageThroughput(c,b),N=m.getSafeAverageThroughput(c,b),k=m.getAverageLatency(c);if(r.reason.state=I.state,r.reason.throughput=C,r.reason.latency=k,isNaN(C))return r;switch(I.state){case 1:D=p.getQualityForBitrate(a,N,v,k),r.quality=D,r.reason.throughput=N,I.placeholderBuffer=Math.max(0,minBufferLevelForQuality(I,D)-A),I.lastQuality=D,!isNaN(I.lastSegmentDurationS)&&A>=I.lastSegmentDurationS&&(I.state=2);break;case 2:!function updatePlaceholderBuffer(t,r){var i=Date.now();if(isNaN(t.lastSegmentFinishTimeMs)){if(!isNaN(t.lastCallTimeMs)){var a=.001*(i-t.lastCallTimeMs);t.placeholderBuffer+=Math.max(0,a)}}else{var u=.001*(i-t.lastSegmentFinishTimeMs);t.placeholderBuffer+=Math.max(0,u)}t.lastCallTimeMs=i,t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN,checkBolaStateStableBufferTime(t,r)}(I,c),D=function getQualityFromBufferLevel(t,r){for(var i=t.bitrates.length,a=NaN,u=NaN,l=0;l<i;++l){var c=(t.Vp*(t.utilities[l]+t.gp)-r)/t.bitrates[l];(isNaN(u)||c>=u)&&(u=c,a=l)}return a}(I,A+I.placeholderBuffer);var O=p.getQualityForBitrate(a,N,v,k);D>I.lastQuality&&D>O&&(D=Math.max(O,I.lastQuality));var L=Math.max(0,A+I.placeholderBuffer-maxBufferLevelForQuality(I,D));L<=I.placeholderBuffer?(I.placeholderBuffer-=L,L=0):(L-=I.placeholderBuffer,I.placeholderBuffer=0,D<p.getMaxAllowedIndexFor(c,v)?d.setTimeToLoadDelay(1e3*L):L=0),r.quality=D,r.reason.throughput=C,r.reason.latency=k,r.reason.bufferLevel=A,r.reason.placeholderBuffer=I.placeholderBuffer,r.reason.delay=L,I.lastQuality=D;break;default:i.debug("BOLA ABR rule invoked in bad state."),r.quality=p.getQualityForBitrate(a,N,v,k),r.reason.state=I.state,r.reason.throughput=N,r.reason.latency=k,I.state=1,clearBolaStateOnSeek(I)}return r},reset:function reset(){resetInitialSettings(),I.off(m.default.BUFFER_EMPTY,onBufferEmpty,r),I.off(m.default.PLAYBACK_SEEKING,onPlaybackSeeking,r),I.off(m.default.METRIC_ADDED,onMetricAdded,r),I.off(m.default.QUALITY_CHANGE_REQUESTED,onQualityChangeRequested,r),I.off(m.default.FRAGMENT_LOADING_ABANDONED,onFragmentLoadingAbandoned,r),I.off(g.default.MEDIA_FRAGMENT_LOADED,onMediaFragmentLoaded,r)}},function setup(){i=Object(p.default)(M).getInstance().getLogger(r),resetInitialSettings(),I.on(m.default.BUFFER_EMPTY,onBufferEmpty,r),I.on(m.default.PLAYBACK_SEEKING,onPlaybackSeeking,r),I.on(m.default.METRIC_ADDED,onMetricAdded,r),I.on(m.default.QUALITY_CHANGE_REQUESTED,onQualityChangeRequested,r),I.on(m.default.FRAGMENT_LOADING_ABANDONED,onFragmentLoadingAbandoned,r),I.on(g.default.MEDIA_FRAGMENT_LOADED,onMediaFragmentLoaded,r)}(),r}BolaRule.__dashjs_factory_name="BolaRule",r.default=l.default.getClassFactory(BolaRule)},"./src/streaming/rules/abr/DroppedFramesRule.js":
/*!******************************************************!*\
    !*** ./src/streaming/rules/abr/DroppedFramesRule.js ***!
    \******************************************************/
/*! exports provided: default */function srcStreamingRulesAbrDroppedFramesRuleJs(t,r,i){i.r(r);var a=i(/*! ../../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../SwitchRequest */"./src/streaming/rules/SwitchRequest.js"),l=i(/*! ../../../core/Debug */"./src/core/Debug.js");function DroppedFramesRule(){var t,r,i=this.context;return t={getMaxIndex:function getMaxIndex(t){var a=Object(u.default)(i).create();if(!t||!t.hasOwnProperty("getDroppedFramesHistory"))return a;var l=t.getDroppedFramesHistory(),c=t.getStreamInfo().id;if(l){var d=l.getFrameHistory(c);if(!d||0===d.length)return a;for(var g=0,p=0,m=u.default.NO_CHANGE,v=1;v<d.length;v++)if(d[v]&&(g=d[v].droppedVideoFrames,(p=d[v].totalVideoFrames)>375&&g/p>.15)){m=v-1,r.debug("index: "+m+" Dropped Frames: "+g+" Total Frames: "+p);break}return Object(u.default)(i).create(m,{droppedFrames:g})}return a}},function setup(){r=Object(l.default)(i).getInstance().getLogger(t)}(),t}DroppedFramesRule.__dashjs_factory_name="DroppedFramesRule",r.default=a.default.getClassFactory(DroppedFramesRule)},"./src/streaming/rules/abr/InsufficientBufferRule.js":
/*!***********************************************************!*\
    !*** ./src/streaming/rules/abr/InsufficientBufferRule.js ***!
    \***********************************************************/
/*! exports provided: default */function srcStreamingRulesAbrInsufficientBufferRuleJs(t,r,i){i.r(r);var a=i(/*! ../../../core/EventBus */"./src/core/EventBus.js"),u=i(/*! ../../../core/events/Events */"./src/core/events/Events.js"),l=i(/*! ../../../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! ../../../core/Debug */"./src/core/Debug.js"),d=i(/*! ../SwitchRequest */"./src/streaming/rules/SwitchRequest.js"),g=i(/*! ../../constants/Constants */"./src/streaming/constants/Constants.js"),p=i(/*! ../../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),m=i(/*! ../../MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js");function InsufficientBufferRule(t){t=t||{};var r,i,l,v=this.context,b=Object(a.default)(v).getInstance(),M=t.dashMetrics;function resetInitialSettings(){(l={})[g.default.VIDEO]={ignoreCount:2},l[g.default.AUDIO]={ignoreCount:2}}function _onPlaybackSeeking(){resetInitialSettings()}function _onBytesAppended(t){isNaN(t.startTime)||t.mediaType!==g.default.AUDIO&&t.mediaType!==g.default.VIDEO||l[t.mediaType].ignoreCount>0&&l[t.mediaType].ignoreCount--}return r={getMaxIndex:function getMaxIndex(t){var r=Object(d.default)(v).create();if(!t||!t.hasOwnProperty("getMediaType"))return r;!function checkConfig(){if(!M||!M.hasOwnProperty("getCurrentBufferLevel")||!M.hasOwnProperty("getCurrentBufferState"))throw new Error(g.default.MISSING_CONFIG_ERROR)}();var a=t.getMediaType(),u=M.getCurrentBufferState(a),c=t.getRepresentationInfo().fragmentDuration,m=t.getStreamInfo(),b=m?m.id:null,S=t.getScheduleController(),E=m&&m.manifestInfo&&m.manifestInfo.isDynamic;if(function shouldIgnore(t,r){return!t&&l[r].ignoreCount>0}(S.getPlaybackController().getLowLatencyModeEnabled(),a)||!c)return r;if(u&&u.state===p.default.BUFFER_EMPTY)i.debug("["+a+"] Switch to index 0; buffer is empty."),r.quality=0,r.reason="InsufficientBufferRule: Buffer is empty";else{var I=t.getMediaInfo(),D=t.getAbrController(),A=D.getThroughputHistory(),C=M.getCurrentBufferLevel(a),N=A.getAverageThroughput(a,E),k=A.getAverageLatency(a),O=N*(C/c)*.5;r.quality=D.getQualityForBitrate(I,O,b,k),r.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return r},reset:function reset(){resetInitialSettings(),b.off(m.default.PLAYBACK_SEEKING,_onPlaybackSeeking,r),b.off(u.default.BYTES_APPENDED_END_FRAGMENT,_onBytesAppended,r)}},function setup(){i=Object(c.default)(v).getInstance().getLogger(r),resetInitialSettings(),b.on(m.default.PLAYBACK_SEEKING,_onPlaybackSeeking,r),b.on(u.default.BYTES_APPENDED_END_FRAGMENT,_onBytesAppended,r)}(),r}InsufficientBufferRule.__dashjs_factory_name="InsufficientBufferRule",r.default=l.default.getClassFactory(InsufficientBufferRule)},"./src/streaming/rules/abr/L2ARule.js":
/*!********************************************!*\
    !*** ./src/streaming/rules/abr/L2ARule.js ***!
    \********************************************/
/*! exports provided: default */function srcStreamingRulesAbrL2ARuleJs(t,r,i){i.r(r);var a=i(/*! ../../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),u=i(/*! ../SwitchRequest */"./src/streaming/rules/SwitchRequest.js"),l=i(/*! ../../../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! ../../vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),d=i(/*! ../../../core/EventBus */"./src/core/EventBus.js"),g=i(/*! ../../../core/events/Events */"./src/core/events/Events.js"),p=i(/*! ../../../core/Debug */"./src/core/Debug.js"),m=i(/*! ../../constants/Constants */"./src/streaming/constants/Constants.js");function L2ARule(t){t=t||{};var r,i,l,v,b=this.context,M=t.dashMetrics,S=Object(d.default)(b).getInstance();function _getInitialL2AState(t){var r={},i=t.getMediaInfo(),a=i.bitrateList.map((function(t){return t.bandwidth/1e3}));return r.state=1,r.bitrates=a,r.lastQuality=0,function _initializeL2AParameters(t){if(!t||!t.type)return;l[t.type]={},l[t.type].w=[],l[t.type].prev_w=[],l[t.type].Q=0,l[t.type].segment_request_start_s=0,l[t.type].segment_download_finish_s=0,l[t.type].B_target=1.5}(i),_clearL2AStateOnSeek(r),r}function _clearL2AStateOnSeek(t){t.placeholderBuffer=0,t.mostAdvancedSegmentStart=NaN,t.lastSegmentWasReplacement=!1,t.lastSegmentStart=NaN,t.lastSegmentDurationS=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN}function _onPlaybackSeeking(){for(var t in i)if(i.hasOwnProperty(t)){var r=i[t];0!==r.state&&(r.state=1,_clearL2AStateOnSeek(r))}}function _onMediaFragmentLoaded(t){if(t&&t.chunk&&t.chunk.mediaInfo){var r=i[t.chunk.mediaInfo.type],a=l[t.chunk.mediaInfo.type];if(r&&0!==r.state){var u=t.chunk.start;isNaN(r.mostAdvancedSegmentStart)||u>r.mostAdvancedSegmentStart?(r.mostAdvancedSegmentStart=u,r.lastSegmentWasReplacement=!1):r.lastSegmentWasReplacement=!0,r.lastSegmentStart=u,r.lastSegmentDurationS=t.chunk.duration,r.lastQuality=t.chunk.quality,_checkNewSegment(r,a)}}}function _onMetricAdded(t){if(t&&t.metric===a.default.HTTP_REQUEST&&t.value&&t.value.type===c.HTTPRequest.MEDIA_SEGMENT_TYPE&&t.value.trace&&t.value.trace.length){var r=i[t.mediaType],u=l[t.mediaType];r&&0!==r.state&&(r.lastSegmentRequestTimeMs=t.value.trequest.getTime(),r.lastSegmentFinishTimeMs=t.value._tfinish.getTime(),_checkNewSegment(r,u))}}function _checkNewSegment(t,r){isNaN(t.lastSegmentStart)||isNaN(t.lastSegmentRequestTimeMs)||(r.segment_request_start_s=.001*t.lastSegmentRequestTimeMs,r.segment_download_finish_s=.001*t.lastSegmentFinishTimeMs,t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN)}function _onQualityChangeRequested(t){if(t&&t.mediaType){var r=i[t.mediaType];r&&0!==r.state&&(r.abrQuality=t.newQuality)}}function _dotmultiplication(t,r){if(t.length!==r.length)return-1;for(var i=0,a=0;a<t.length;a++)i+=t[a]*r[a];return i}function _resetInitialSettings(){i={},l={}}return r={getMaxIndex:function getMaxIndex(t){var r,a=Object(u.default)(b).create(),c=Math.pow(4,.99),d=Math.max(Math.pow(4,1),c*Math.sqrt(4)),g=t.getMediaInfo(),p=t.getMediaType(),S=g.bitrateList.map((function(t){return t.bandwidth})),E=S.length,I=t.getScheduleController(),D=t.getStreamInfo(),A=t.getAbrController(),C=A.getThroughputHistory(),N=D&&D.manifestInfo&&D.manifestInfo.isDynamic,k=t.useL2AABR(),O=M.getCurrentBufferLevel(p,!0),L=C.getSafeAverageThroughput(p,N),R=C.getAverageThroughput(p,N),j=C.getAverageLatency(p),B=t.getVideoModel().getPlaybackRate();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getScheduleController")&&t.hasOwnProperty("getStreamInfo")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("useL2AABR")))return a;if(a.reason=a.reason||{},!k||p===m.default.AUDIO)return a;I.setTimeToLoadDelay(0);var U=function _getL2AState(t){var r=t.getMediaType(),a=i[r];return a||(a=_getInitialL2AState(t),i[r]=a),a}(t);if(0===U.state)return a;var z=l[p];if(!z)return a;if(a.reason.state=U.state,a.reason.throughput=R,a.reason.latency=j,isNaN(R))return a;switch(U.state){case 1:if(r=A.getQualityForBitrate(g,L,D.id,j),a.quality=r,a.reason.throughput=L,U.lastQuality=r,!isNaN(U.lastSegmentDurationS)&&O>=z.B_target){U.state=2,z.Q=c;for(var Y=0;Y<E;++Y)Y===U.lastQuality?z.prev_w[Y]=1:z.prev_w[Y]=0}break;case 2:var G=[],H=M.getCurrentHttpRequest(p).trace.reduce((function(t,r){return t+r.d}),0),Q=M.getCurrentHttpRequest(p).trace.reduce((function(t,r){return t+r.b[0]}),0),V=Math.round(8*Q/H);V<1&&(V=1);for(var W=U.lastSegmentDurationS,$=1,K=0;K<E;++K)S[K]=S[K]/1e3,B*S[K]>V&&($=-1),z.w[K]=z.prev_w[K]+$*(W/(2*d))*((z.Q+c)*(B*S[K]/V));z.w=function euclideanProjection(t){for(var r=t.length,i=!1,a=[],u=0;u<r;++u)a[u]=t[u];for(var l=t.sort((function(t,r){return r-t})),c=0,d=0,g=[],p=0;p<r-1;++p)if((d=((c+=l[p])-1)/(p+1))>=l[p+1]){i=!0;break}i||(d=(c+l[r-1]-1)/r);for(var m=0;m<r;++m)g[m]=Math.max(a[m]-d,0);return g}(z.w);for(var q=0;q<E;++q)G[q]=z.w[q]-z.prev_w[q],z.prev_w[q]=z.w[q];z.Q=Math.max(0,z.Q-W+W*B*((_dotmultiplication(S,z.prev_w)+_dotmultiplication(S,G))/V));for(var X=[],Z=0;Z<E;++Z)X[Z]=Math.abs(S[Z]-_dotmultiplication(z.w,S));(r=X.indexOf(Math.min.apply(Math,X)))>U.lastQuality&&S[U.lastQuality+1]<=V&&(r=U.lastQuality+1),S[r]>=V&&(z.Q=2*Math.max(c,z.Q)),a.quality=r,a.reason.throughput=R,a.reason.latency=j,a.reason.bufferLevel=O,U.lastQuality=a.quality;break;default:v.debug("L2A ABR rule invoked in bad state."),a.quality=A.getQualityForBitrate(g,L,D.id,j),a.reason.state=U.state,a.reason.throughput=L,a.reason.latency=j,U.state=1,_clearL2AStateOnSeek(U)}return a},reset:function reset(){_resetInitialSettings(),S.off(g.default.PLAYBACK_SEEKING,_onPlaybackSeeking,r),S.off(g.default.MEDIA_FRAGMENT_LOADED,_onMediaFragmentLoaded,r),S.off(g.default.METRIC_ADDED,_onMetricAdded,r),S.off(g.default.QUALITY_CHANGE_REQUESTED,_onQualityChangeRequested,r)}},function setup(){v=Object(p.default)(b).getInstance().getLogger(r),_resetInitialSettings(),S.on(g.default.PLAYBACK_SEEKING,_onPlaybackSeeking,r),S.on(g.default.MEDIA_FRAGMENT_LOADED,_onMediaFragmentLoaded,r),S.on(g.default.METRIC_ADDED,_onMetricAdded,r),S.on(g.default.QUALITY_CHANGE_REQUESTED,_onQualityChangeRequested,r)}(),r}L2ARule.__dashjs_factory_name="L2ARule",r.default=l.default.getClassFactory(L2ARule)},"./src/streaming/rules/abr/SwitchHistoryRule.js":
/*!******************************************************!*\
    !*** ./src/streaming/rules/abr/SwitchHistoryRule.js ***!
    \******************************************************/
/*! exports provided: default */function srcStreamingRulesAbrSwitchHistoryRuleJs(t,r,i){i.r(r);var a=i(/*! ../../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../../core/Debug */"./src/core/Debug.js"),l=i(/*! ../SwitchRequest */"./src/streaming/rules/SwitchRequest.js");function SwitchHistoryRule(){var t,r,i=this.context;return t={getMaxIndex:function getMaxIndex(t){for(var a=t?t.getSwitchHistory():null,u=a?a.getSwitchRequests():[],c=0,d=0,g=0,p=Object(l.default)(i).create(),m=0;m<u.length;m++)if(void 0!==u[m]&&(c+=u[m].drops,d+=u[m].noDrops,g+=u[m].dropSize,c+d>=6&&c/d>.075)){p.quality=m>0&&u[m].drops>0?m-1:m,p.reason={index:p.quality,drops:c,noDrops:d,dropSize:g},r.debug("Switch history rule index: "+p.quality+" samples: "+(c+d)+" drops: "+c);break}return p}},function setup(){r=Object(u.default)(i).getInstance().getLogger(t)}(),t}SwitchHistoryRule.__dashjs_factory_name="SwitchHistoryRule",r.default=a.default.getClassFactory(SwitchHistoryRule)},"./src/streaming/rules/abr/ThroughputRule.js":
/*!***************************************************!*\
    !*** ./src/streaming/rules/abr/ThroughputRule.js ***!
    \***************************************************/
/*! exports provided: default */function srcStreamingRulesAbrThroughputRuleJs(t,r,i){i.r(r);var a=i(/*! ../../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../SwitchRequest */"./src/streaming/rules/SwitchRequest.js"),l=i(/*! ../../constants/Constants */"./src/streaming/constants/Constants.js"),c=i(/*! ../../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js");function ThroughputRule(t){t=t||{};var r=this.context,i=t.dashMetrics;return{getMaxIndex:function getMaxIndex(t){var a=Object(u.default)(r).create();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("useBufferOccupancyABR")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("getScheduleController")))return a;!function checkConfig(){if(!i||!i.hasOwnProperty("getCurrentBufferState"))throw new Error(l.default.MISSING_CONFIG_ERROR)}();var d=t.getMediaInfo(),g=t.getMediaType(),p=i.getCurrentBufferState(g),m=t.getScheduleController(),v=t.getAbrController(),b=t.getStreamInfo(),M=b?b.id:null,S=b&&b.manifestInfo?b.manifestInfo.isDynamic:null,E=v.getThroughputHistory(),I=E.getSafeAverageThroughput(g,S),D=E.getAverageLatency(g),A=t.useBufferOccupancyABR();return isNaN(I)||!p||A||v.getAbandonmentStateFor(M,g)!==c.default.ABANDON_LOAD&&(p.state===c.default.BUFFER_LOADED||S)&&(a.quality=v.getQualityForBitrate(d,I,M,D),m.setTimeToLoadDelay(0),a.reason={throughput:I,latency:D}),a},reset:function reset(){}}}ThroughputRule.__dashjs_factory_name="ThroughputRule",r.default=a.default.getClassFactory(ThroughputRule)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":
/*!***************************************************************!*\
    !*** ./src/streaming/rules/abr/lolp/LearningAbrController.js ***!
    \***************************************************************/
/*! exports provided: default */function srcStreamingRulesAbrLolpLearningAbrControllerJs(t,r,i){i.r(r);var a=i(/*! ../../../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../../../core/Debug */"./src/core/Debug.js"),l="manual_weight_selection",c="random_weight_selection",d="dynamic_weight_selection";function LearningAbrController(){var t,r,i,a,g,p,m,v,b,M=this.context;function _resetInitialSettings(){i=null,a=1,g=100,p=0,m=null,v=null,b=d}function _getMaxThroughput(){var t=0;if(i)for(var r=0;r<i.length;r++){var a=i[r];a.state.throughput>t&&(t=a.state.throughput)}return t}function _getDistance(t,r,i){var a=t.map((function(t,a){return i[a]*Math.pow(t-r[a],2)})).reduce((function(t,r){return t+r}));return(a<0?-1:1)*Math.sqrt(Math.abs(a))}function _getNeuronDistance(t,r){return _getDistance([t.state.throughput,t.state.latency,t.state.rebuffer,t.state.switch],[r.state.throughput,r.state.latency,r.state.rebuffer,r.state.switch],[1,1,1,1])}function _updateNeurons(t,r,i){for(var a=0;a<r.length;a++){var u=r[a],l=_getNeuronDistance(u,t);_updateNeuronState(u,i,Math.exp(-1*Math.pow(l,2)/(2*Math.pow(.1,2))))}}function _updateNeuronState(t,r,i){var a=t.state,u=[.01,.01,.01,.01];a.throughput=a.throughput+(r[0]-a.throughput)*u[0]*i,a.latency=a.latency+(r[1]-a.latency)*u[1]*i,a.rebuffer=a.rebuffer+(r[2]-a.rebuffer)*u[2]*i,a.switch=a.switch+(r[3]-a.switch)*u[3]*i}function _dynamicWeightSelection(t,r,i,a,u,l,c){m||(m=v[v.length-1]);var d=t.findWeightVector(r,i,a,u,l,c);null!==d&&-1!==d&&(m=d)}return t={getNextQuality:function getNextQuality(t,u,d,M,S,E,I){var D=d,A=M,C=u,N=function _getSomBitrateNeurons(t){if(!i){i=[];var r=t.bitrateList,u=[];p=r[0].bandwidth,r.forEach((function(t){u.push(t.bandwidth),t.bandwidth<p&&(p=t.bandwidth)})),a=function _getMagnitude(t){var r=t.map((function(t){return Math.pow(t,2)})).reduce((function(t,r){return t+r}));return Math.sqrt(r)}(u);for(var l=0;l<r.length;l++){var c={qualityIndex:l,bitrate:r[l].bandwidth,state:{throughput:r[l].bandwidth/a,latency:0,rebuffer:0,switch:0}};i.push(c)}v=function _getInitialKmeansPlusPlusCenters(t){var r=[],i=function _getRandomData(t){for(var r=[],i=0;i<t;i++){var a=[Math.random()*_getMaxThroughput(),Math.random(),Math.random(),Math.random()];r.push(a)}return r}(Math.pow(t.length,2));r.push(i[0]);for(var a=[1,1,1,1],u=1;u<t.length;u++){for(var l=null,c=null,d=0;d<i.length;d++){for(var g=i[d],p=null,m=0;m<r.length;m++){var v=_getDistance(g,r[m],a);(null===p||v<p)&&(p=v)}(null===c||p>c)&&(l=g,c=p)}r.push(l)}for(var b=null,M=null,S=0;S<r.length;S++){for(var E=0,I=0;I<r.length;I++)S!==I&&(E+=_getDistance(r[S],r[I],a));(null===b||E>b)&&(b=E,M=S)}var D=[];D.push(r[M]),r.splice(M,1);for(;r.length>0;){for(var A=null,C=null,N=0;N<r.length;N++){var k=_getDistance(D[0],r[N],a);(null===A||k<A)&&(A=k,C=N)}D.push(r[C]),r.splice(C,1)}return D}(i)}return i}(t),k=u/a;k>1&&(k=_getMaxThroughput()),d/=g,r.debug("getNextQuality called throughput:".concat(k," latency:").concat(d," bufferSize:").concat(M," currentQualityIndex:").concat(E," playbackRate:").concat(S));var O=N[E],L=O.bitrate*I.getSegmentDuration()/C,R=Math.max(0,L-A);if(A-L<I.getMinBuffer())return r.debug("Buffer is low for bitrate= ".concat(O.bitrate," downloadTime=").concat(L," currentBuffer=").concat(A," rebuffer=").concat(R)),function _getDownShiftNeuron(t,r){var a=0,u=t;if(i)for(var l=0;l<i.length;l++){var c=i[l];c.bitrate<t.bitrate&&c.bitrate>a&&r>c.bitrate&&(a=c.bitrate,u=c)}return u}(O,C).qualityIndex;switch(b){case l:!function _manualWeightSelection(){m=[.4,.4,.4,.4]}();break;case c:!function _randomWeightSelection(t){m=function _getXavierWeights(t,r){for(var i=[],a=Math.sqrt(2/t),u=0;u<r;u++)i.push(Math.random()*a);return m=i}(t.length,4)}(N);break;default:_dynamicWeightSelection(I,N,D,A,R,C,S)}for(var j=null,B=null,U=null,z=0;z<N.length;z++){var Y=N[z],G=Y.state,H=[G.throughput,G.latency,G.rebuffer,G.switch],Q=m.slice(),V=I.getNextBufferWithBitrate(Y.bitrate,A,C),W=V<I.getMinBuffer();W&&r.debug("Buffer is low for bitrate=".concat(Y.bitrate," downloadTime=").concat(L," currentBuffer=").concat(A," nextBuffer=").concat(V)),(Y.bitrate>u-1e4||W)&&Y.bitrate!==p&&(Q[0]=100);var $=_getDistance(H,[k,0,0,0],Q);(null===j||$<j)&&(j=$,B=Y.qualityIndex,U=Y)}var K=Math.abs(O.bitrate-U.bitrate)/a;return _updateNeurons(O,N,[k,d,R,K]),_updateNeurons(U,N,[k,0,0,K]),B},reset:function reset(){_resetInitialSettings()}},function _setup(){r=Object(u.default)(M).getInstance().getLogger(t),_resetInitialSettings()}(),t}LearningAbrController.__dashjs_factory_name="LearningAbrController",r.default=a.default.getClassFactory(LearningAbrController)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":
/*!**********************************************************!*\
    !*** ./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js ***!
    \**********************************************************/
/*! exports provided: default */function srcStreamingRulesAbrLolpLoLpQoEEvaluatorJs(t,r,i){i.r(r);var a=i(/*! ../../../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ./QoeInfo */"./src/streaming/rules/abr/lolp/QoeInfo.js");function LoLpQoeEvaluator(){var t,r,i,a,l;function _resetInitialSettings(){r=null,i=null,a=null,l=null}function _createQoeInfo(t,r,i,a){var l=new u.default;return l.type=t,l.weights.bitrateReward=r||1,l.weights.bitrateSwitchPenalty=1,l.weights.rebufferPenalty=i||1e3,l.weights.latencyPenalty=[],l.weights.latencyPenalty.push({threshold:1.1,penalty:.05*a}),l.weights.latencyPenalty.push({threshold:1e8,penalty:.1*i}),l.weights.playbackSpeedPenalty=a||200,l}function _logMetricsInQoeInfo(t,r,i,a,u){u.bitrateWSum+=u.weights.bitrateReward*t,u.lastBitrate&&(u.bitrateSwitchWSum+=u.weights.bitrateSwitchPenalty*Math.abs(t-u.lastBitrate)),u.lastBitrate=t,u.rebufferWSum+=u.weights.rebufferPenalty*r;for(var l=0;l<u.weights.latencyPenalty.length;l++){var c=u.weights.latencyPenalty[l];if(i<=c.threshold){u.latencyWSum+=c.penalty*i;break}}u.playbackSpeedWSum+=u.weights.playbackSpeedPenalty*Math.abs(1-a),u.totalQoe=u.bitrateWSum-u.bitrateSwitchWSum-u.rebufferWSum-u.latencyWSum-u.playbackSpeedWSum}return t={setupPerSegmentQoe:function setupPerSegmentQoe(t,u,c){r=_createQoeInfo("segment",t,u,c),i=t,a=u,l=c},logSegmentMetrics:function logSegmentMetrics(t,i,a,u){r&&_logMetricsInQoeInfo(t,i,a,u,r)},getPerSegmentQoe:function getPerSegmentQoe(){return r},calculateSingleUseQoe:function calculateSingleUseQoe(t,r,u,c){var d=null;return i&&a&&l&&(d=_createQoeInfo("segment",i,a,l)),d?(_logMetricsInQoeInfo(t,r,u,c,d),d.totalQoe):0},reset:function reset(){_resetInitialSettings()}},function _setup(){_resetInitialSettings()}(),t}LoLpQoeEvaluator.__dashjs_factory_name="LoLpQoeEvaluator",r.default=a.default.getClassFactory(LoLpQoeEvaluator)},"./src/streaming/rules/abr/lolp/LoLpRule.js":
/*!**************************************************!*\
    !*** ./src/streaming/rules/abr/lolp/LoLpRule.js ***!
    \**************************************************/
/*! exports provided: default */function srcStreamingRulesAbrLolpLoLpRuleJs(t,r,i){i.r(r);var a=i(/*! ../../../../core/Debug */"./src/core/Debug.js"),u=i(/*! ../../../../core/FactoryMaker */"./src/core/FactoryMaker.js"),l=i(/*! ./LearningAbrController */"./src/streaming/rules/abr/lolp/LearningAbrController.js"),c=i(/*! ./LoLpQoEEvaluator */"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),d=i(/*! ../../SwitchRequest */"./src/streaming/rules/SwitchRequest.js"),g=i(/*! ../../../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js"),p=i(/*! ./LoLpWeightSelector */"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),m=i(/*! ../../../constants/Constants */"./src/streaming/constants/Constants.js");function LoLPRule(t){var r,i,u,v,b=(t=t||{}).dashMetrics,M=this.context;return i={getMaxIndex:function getMaxIndex(t){try{var i=Object(d.default)(M).create(),a=t.getMediaInfo().type,l=t.getAbrController(),c=t.getStreamInfo(),S=l.getQualityFor(a,c.id),E=t.getMediaInfo(),I=b.getCurrentBufferState(a),D=t.getScheduleController(),A=b.getCurrentBufferLevel(a,!0),C=c&&c.manifestInfo?c.manifestInfo.isDynamic:null,N=D.getPlaybackController(),k=N.getCurrentLiveLatency();if(!t.useLoLPABR()||a===m.default.AUDIO)return i;k||(k=0);var O=N.getPlaybackRate(),L=l.getThroughputHistory().getSafeAverageThroughput(a,C);if(r.debug("Throughput ".concat(Math.round(L)," kbps")),isNaN(L)||!I)return i;if(l.getAbandonmentStateFor(c.id,a)===g.default.ABANDON_LOAD)return i;for(var R=E.bitrateList,j=t.getRepresentationInfo().fragmentDuration,B=R[0].bandwidth/1e3,U=R[R.length-1].bandwidth/1e3,z=0;z<R.length;z++){var Y=R[z].bandwidth/1e3;Y>U?U=Y:Y<B&&(B=Y)}var G=R[S].bandwidth/1e3,H=b.getCurrentHttpRequest(a,!0),Q=(H.tresponse.getTime()-H.trequest.getTime())/1e3,V=Q>j?Q-j:0;v.setupPerSegmentQoe(j,U,B),v.logSegmentMetrics(G,V,k,O);var W=Object(p.default)(M).create({targetLatency:1.5,bufferMin:.3,segmentDuration:j,qoeEvaluator:v});return i.quality=u.getNextQuality(E,1e3*L,k,A,O,S,W),i.reason={throughput:L,latency:k},i.priority=d.default.PRIORITY.STRONG,D.setTimeToLoadDelay(0),i.quality!==S&&console.log("[TgcLearningRule]["+a+"] requesting switch to index: ",i.quality,"Average throughput",Math.round(L),"kbps"),i}catch(t){throw t}},reset:function reset(){!function _resetInitialSettings(){u.reset(),v.reset()}()}},function _setup(){r=Object(a.default)(M).getInstance().getLogger(i),u=Object(l.default)(M).create(),v=Object(c.default)(M).create()}(),i}LoLPRule.__dashjs_factory_name="LoLPRule",r.default=u.default.getClassFactory(LoLPRule)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":
/*!************************************************************!*\
    !*** ./src/streaming/rules/abr/lolp/LoLpWeightSelector.js ***!
    \************************************************************/
/*! exports provided: default */function srcStreamingRulesAbrLolpLoLpWeightSelectorJs(t,r,i){i.r(r);var a=i(/*! ../../../../core/FactoryMaker */"./src/core/FactoryMaker.js");function LoLpWeightSelector(t){var r,i,a,u=t.targetLatency,l=t.bufferMin,c=t.segmentDuration,d=t.qoeEvaluator;function getSegmentDuration(){return c}function getNextBuffer(t,r){var i=getSegmentDuration();return r>i?t-i:t+i-r}return r={getMinBuffer:function getMinBuffer(){return l},getSegmentDuration:getSegmentDuration,getNextBufferWithBitrate:function getNextBufferWithBitrate(t,r,i){return getNextBuffer(r,t*c/i)},getNextBuffer:getNextBuffer,findWeightVector:function findWeightVector(t,r,g,p,m,v){var b=null,M=null,S=null,E=Math.abs(r-a);return t.forEach((function(t){i.forEach((function(i){i[0];var a=i[1],p=i[2],I=(i[3],t.bitrate*c/m),D=getNextBuffer(g,I),A=(0===p?10:1/p)*Math.max(1e-5,I-D),C=(0===a?10:1/a)*t.state.latency,N=d.calculateSingleUseQoe(t.bitrate,A,C,v);(null===b||N>b)&&function _checkConstraints(t,r,i){if(t>u+i)return!1;return r>=l}(r,D,E)&&(b=N,M=i,S=t.bitrate)}))})),null===M&&null===S&&(M=-1),a=r,M}},function _setup(){!function _resetInitialSettings(){i=function _getPermutations(t,r){var i=t.map((function(t){return[t]})),a=function generate(r,i,a){if(a===i)return r;for(var u=r.length,l=0;l<u;l++)for(var c=r.shift(),d=0;d<t.length;d++)r.push(c.concat(t[d]));return generate(r,i,a+1)};return a(i,r,1)}([.2,.4,.6,.8,1],4),a=0}()}(),r}LoLpWeightSelector.__dashjs_factory_name="LoLpWeightSelector",r.default=a.default.getClassFactory(LoLpWeightSelector)},"./src/streaming/rules/abr/lolp/QoeInfo.js":
/*!*************************************************!*\
    !*** ./src/streaming/rules/abr/lolp/QoeInfo.js ***!
    \*************************************************/
/*! exports provided: default */function srcStreamingRulesAbrLolpQoeInfoJs(t,r,i){i.r(r);r.default=function QoeInfo(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,QoeInfo),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},"./src/streaming/text/EmbeddedTextHtmlRender.js":
/*!******************************************************!*\
    !*** ./src/streaming/text/EmbeddedTextHtmlRender.js ***!
    \******************************************************/
/*! exports provided: default */function srcStreamingTextEmbeddedTextHtmlRenderJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function EmbeddedTextHtmlRender(){var t,r=0;function checkIndent(t){for(var r="",i=0;i<t.length;++i){r+=t[i].uchar}return r.length-r.replace(/^\s+/,"").length}function getRegionProperties(t){return"left: "+3.125*t.x+"%; top: "+6.66*t.y1+"%; width: "+(100-3.125*t.x)+"%; height: "+6.66*Math.max(t.y2-1-t.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function createRGB(t){return"red"===t?"rgb(255, 0, 0)":"green"===t?"rgb(0, 255, 0)":"blue"===t?"rgb(0, 0, 255)":"cyan"===t?"rgb(0, 255, 255)":"magenta"===t?"rgb(255, 0, 255)":"yellow"===t?"rgb(255, 255, 0)":"white"===t?"rgb(255, 255, 255)":"black"===t?"rgb(0, 0, 0)":t}function getStyle(t,r){var i=t.videoHeight/15;return r?"font-size: "+i+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(r.foreground?createRGB(r.foreground):"rgb(255, 255, 255)")+"; font-style: "+(r.italics?"italic":"normal")+"; text-decoration: "+(r.underline?"underline":"none")+"; white-space: pre; background-color: "+(r.background?createRGB(r.background):"transparent")+";":"font-size: "+i+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function ltrim(t){return t.replace(/^\s+/g,"")}function rtrim(t){return t.replace(/\s+$/g,"")}return t={createHTMLCaptionsFromScreen:function createHTMLCaptionsFromScreen(t,i,a,u){var l,c,d=null,g=!1,p=-1,m={start:i,end:a,spans:[]},v="style_cea608_white_black",b={},M={},S=[];for(l=0;l<15;++l){var E=u.rows[l],I="",D=null;if(!1===E.isEmpty()){var A=checkIndent(E.chars);null===d&&(d={x:A,y1:l,y2:l+1,p:[]}),A!==p&&g&&(d.p.push(m),m={start:i,end:a,spans:[]},d.y2=l,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===b.hasOwnProperty(d.name)?(S.push(d),b[d.name]=d):b[d.name].p.contat(d.p),d={x:A,y1:l,y2:l+1,p:[]});for(var C=0;C<E.chars.length;++C){var N=E.chars[C],k=N.penState;if(null===D||!k.equals(D)){I.trim().length>0&&(m.spans.push({name:v,line:I,row:l}),I="");var O="style_cea608_"+k.foreground+"_"+k.background;k.underline&&(O+="_underline"),k.italics&&(O+="_italics"),M.hasOwnProperty(O)||(M[O]=JSON.parse(JSON.stringify(k))),D=k,v=O}I+=N.uchar}I.trim().length>0&&m.spans.push({name:v,line:I,row:l}),g=!0,p=A}else g=!1,p=-1,d&&(d.p.push(m),m={start:i,end:a,spans:[]},d.y2=l,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===b.hasOwnProperty(d.name)?(S.push(d),b[d.name]=d):b[d.name].p.contat(d.p),d=null)}d&&(d.p.push(m),d.y2=l+1,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===b.hasOwnProperty(d.name)?(S.push(d),b[d.name]=d):b[d.name].p.contat(d.p),d=null);var L=[];for(l=0;l<S.length;++l){var R=S[l],j="sub_cea608_"+r++,B=document.createElement("div");B.id=j;var U=getRegionProperties(R);B.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+U;var z=document.createElement("div");z.className="paragraph bodyStyle",z.style.cssText=getStyle(t);var Y=document.createElement("div");Y.className="cueUniWrapper",Y.style.cssText="unicode-bidi: normal; direction: ltr;";for(var G=0;G<R.p.length;++G){var H=R.p[G],Q=0;for(c=0;c<H.spans.length;++c){var V=H.spans[c];if(V.line.length>0){if(0!==c&&Q!=V.row){var W=document.createElement("br");W.className="lineBreak",Y.appendChild(W)}var $=!1;Q===V.row&&($=!0),Q=V.row;var K=M[V.name],q=document.createElement("span");q.className="spanPadding "+V.name+" customSpanColor",q.style.cssText=getStyle(t,K),0!==c&&$?c===H.spans.length-1?q.textContent=rtrim(V.line):q.textContent=V.line:H.spans.length>1&&c<H.spans.length-1&&V.row===H.spans[c+1].row?q.textContent=ltrim(V.line):q.textContent=V.line.trim(),Y.appendChild(q)}}}z.appendChild(Y),B.appendChild(z);var X={bodyStyle:["%",90]};for(var Z in M)M.hasOwnProperty(Z)&&(X[Z]=["%",90]);L.push({type:"html",start:i,end:a,cueHTMLElement:B,cueID:j,cellResolution:[32,15],isFromCEA608:!0,fontSize:X,lineHeight:{},linePadding:{}})}return L}},t}EmbeddedTextHtmlRender.__dashjs_factory_name="EmbeddedTextHtmlRender",r.default=a.default.getSingletonFactory(EmbeddedTextHtmlRender)},"./src/streaming/text/NotFragmentedTextBufferController.js":
/*!*****************************************************************!*\
    !*** ./src/streaming/text/NotFragmentedTextBufferController.js ***!
    \*****************************************************************/
/*! exports provided: default */function srcStreamingTextNotFragmentedTextBufferControllerJs(t,r,i){i.r(r);var a=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),u=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),l=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! ../utils/InitCache */"./src/streaming/utils/InitCache.js"),d=i(/*! ../SourceBufferSink */"./src/streaming/SourceBufferSink.js"),g=i(/*! ../../streaming/vo/DashJSError */"./src/streaming/vo/DashJSError.js"),p=i(/*! ../../core/errors/Errors */"./src/core/errors/Errors.js"),m="NotFragmentedTextBufferController";function NotFragmentedTextBufferController(t){t=t||{};var r,i,l,v,b,M,S=this.context,E=Object(a.default)(S).getInstance(),I=t.textController,D=t.errHandler,A=t.streamInfo,C=t.type;function setMediaSource(t){v=t}function setIsBufferingCompleted(t){i!==t&&(i=t)&&function triggerEvent(t,r){var i=r||{};E.trigger(t,i,{streamId:A.id,mediaType:C})}(u.default.BUFFERING_COMPLETED)}function _onInitFragmentLoaded(t){t.chunk.bytes&&!i&&(M.save(t.chunk),b.append(t.chunk),setIsBufferingCompleted(!0))}return r={initialize:function initialize(t){setMediaSource(t)},getStreamId:function getStreamId(){return A.id},getType:function getType(){return C},getBufferControllerType:function getBufferControllerType(){return m},createBufferSink:function createBufferSink(t){return new Promise((function(r,i){try{(b=Object(d.default)(S).create({mediaSource:v,textController:I,eventBus:E})).initializeForFirstUse(A,t),l||(b.getBuffer()&&"function"==typeof b.getBuffer().initialize&&b.getBuffer().initialize(),l=!0),r(b)}catch(t){D.error(new g.default(p.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,p.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+C)),i(t)}}))},getBuffer:function getBuffer(){return b},getBufferLevel:function getBufferLevel(){return 0},getRangeAt:function getRangeAt(){return null},getAllRangesWithSafetyFactor:function getAllRangesWithSafetyFactor(){return[]},getContinuousBufferTimeForTargetTime:function getContinuousBufferTimeForTargetTime(){return Number.POSITIVE_INFINITY},setMediaSource:setMediaSource,getMediaSource:function getMediaSource(){return v},appendInitSegmentFromCache:function appendInitSegmentFromCache(t){return null!==M.extract(A.id,t)},getIsBufferingCompleted:function getIsBufferingCompleted(){return i},setIsBufferingCompleted:setIsBufferingCompleted,getIsPruningInProgress:function getIsPruningInProgress(){return!1},reset:function reset(t){E.off(u.default.INIT_FRAGMENT_LOADED,_onInitFragmentLoaded,r),!t&&b&&(b.abort(),b.reset(),b=null)},clearBuffers:function clearBuffers(){return Promise.resolve()},prepareForPlaybackSeek:function prepareForPlaybackSeek(){return Promise.resolve()},prepareForReplacementTrackSwitch:function prepareForReplacementTrackSwitch(){return i=!1,Promise.resolve()},setSeekTarget:function setSeekTarget(){},updateAppendWindow:function updateAppendWindow(){return Promise.resolve()},pruneAllSafely:function pruneAllSafely(){return Promise.resolve()},updateBufferTimestampOffset:function updateBufferTimestampOffset(){return Promise.resolve()},segmentRequestingCompleted:function segmentRequestingCompleted(){}},function setup(){l=!1,v=null,i=!1,M=Object(c.default)(S).getInstance(),E.on(u.default.INIT_FRAGMENT_LOADED,_onInitFragmentLoaded,r)}(),r}NotFragmentedTextBufferController.__dashjs_factory_name=m,r.default=l.default.getClassFactory(NotFragmentedTextBufferController)},"./src/streaming/text/TextController.js":
/*!**********************************************!*\
    !*** ./src/streaming/text/TextController.js ***!
    \**********************************************/
/*! exports provided: default */function srcStreamingTextTextControllerJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),l=i(/*! ./TextSourceBuffer */"./src/streaming/text/TextSourceBuffer.js"),c=i(/*! ./TextTracks */"./src/streaming/text/TextTracks.js"),d=i(/*! ../utils/VTTParser */"./src/streaming/utils/VTTParser.js"),g=i(/*! ../utils/TTMLParser */"./src/streaming/utils/TTMLParser.js"),p=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),m=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),v=i(/*! ../../streaming/MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),b=i(/*! ../utils/SupervisorTools */"./src/streaming/utils/SupervisorTools.js");function TextController(t){var r,i,u,M,S,E,I,D,A,C,N,k,O,L=this.context,R=t.adapter,j=t.errHandler,B=t.manifestModel,U=t.mediaController,z=t.videoModel,Y=t.settings;function _onTextTracksAdded(t){var r=t.tracks,a=t.index,u=t.streamId;!1===Y.get().streaming.text.defaultEnabled&&!isTextEnabled()||O?setTextTrack(u,-1):(D&&r.some((function(t,r){if(U.matchSettings(D,t))return setTextTrack(u,r),a=r,!0})),C=!1),i[u].lastEnabledIndex=a,I.trigger(v.default.TEXT_TRACKS_ADDED,{enabled:isTextEnabled(),index:a,tracks:r,streamId:u}),k=!0}function _onCurrentTrackChanged(t){if(!A&&t&&t.newMediaInfo){var r=t.newMediaInfo;r.type===a.default.TEXT&&(D={lang:r.lang,role:r.roles[0],index:r.index,codec:r.codec,accessibility:r.accessibility[0]})}}function isTextEnabled(){var t=!0;return C&&!N&&(t=!1),t}function setTextTrack(t,r){(C=-1===r)&&U&&U.saveTextSettingsDisabled();var i=getCurrentTrackIdx(t);if(i!==r&&M[t]){M[t].setModeForTrackIdx(i,a.default.TEXT_HIDDEN),M[t].setCurrentTrackIdx(r),M[t].setModeForTrackIdx(r,a.default.TEXT_SHOWING);var l=M[t].getCurrentTrackInfo();l&&l.isFragmented&&!l.isEmbedded?function _setFragmentedTextTrack(t,r,i){if(!u[t])return;for(var l=u[t].getConfig().fragmentedTracks,c=0;c<l.length;c++){var d=l[c];if(r.lang===d.lang&&(d.id?r.id===d.id:r.index===d.index)){var g=U.getCurrentTrackFor(a.default.TEXT,t);(d.id?g.id!==d.id:g.index!==d.index)?(M[t].deleteCuesFromTrackIdx(i),u[t].setCurrentFragmentedTrackIdx(c)):-1===i&&I.trigger(m.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:t,mediaType:a.default.TEXT})}}}(t,l,i):l&&!l.isFragmented&&function _setNonFragmentedTextTrack(t,r){I.trigger(m.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:r},{streamId:t,mediaType:a.default.TEXT})}(t,l),U.setTrack(l)}}function getCurrentTrackIdx(t){return M[t].getCurrentTrackIdx()}function resetInitialSettings(){u={},M={},i={},C=!0,k=!1,O=!1}return r={deactivateStream:function deactivateStream(t){if(t){var r=t.id;u[r]&&u[r].resetMediaInfos(),M[r]&&M[r].deleteAllTextTracks()}},initialize:function initialize(){I.on(m.default.CURRENT_TRACK_CHANGED,_onCurrentTrackChanged,r),I.on(m.default.TEXT_TRACKS_QUEUE_INITIALIZED,_onTextTracksAdded,r)},initializeForStream:function initializeForStream(t){var r=t.id,a=Object(c.default)(L).create({videoModel:z,streamInfo:t});a.initialize(),M[r]=a;var d=Object(l.default)(L).create({errHandler:j,adapter:R,manifestModel:B,mediaController:U,videoModel:z,textTracks:a,vttParser:S,ttmlParser:E,streamInfo:t});d.initialize(),u[r]=d,i[r]={},i[r].lastEnabledIndex=-1},createTracks:function createTracks(t){var r=t.id;M[r]&&M[r].createTracks()},getTextSourceBuffer:function getTextSourceBuffer(t){var r=t.id;if(u&&u[r])return u[r]},getAllTracksAreDisabled:function getAllTracksAreDisabled(){return C},addEmbeddedTrack:function addEmbeddedTrack(t,r){var i=t.id;u[i]&&u[i].addEmbeddedTrack(r)},setInitialSettings:function setInitialSettings(t){D=t,A=!0},enableText:function enableText(t,r){Object(b.checkParameterType)(r,"boolean"),isTextEnabled()!==r&&(r&&setTextTrack(t,i[t].lastEnabledIndex),r||(i[t].lastEnabledIndex=getCurrentTrackIdx(t),k?setTextTrack(t,-1):O=!0))},isTextEnabled:isTextEnabled,setTextTrack:setTextTrack,getCurrentTrackIdx:getCurrentTrackIdx,enableForcedTextStreaming:function enableForcedTextStreaming(t){Object(b.checkParameterType)(t,"boolean"),N=t},addMediaInfosToBuffer:function addMediaInfosToBuffer(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=t.id;u[l]&&u[l].addMediaInfos(r,i,a)},reset:function reset(){resetInitialSettings(),I.off(m.default.CURRENT_TRACK_CHANGED,_onCurrentTrackChanged,r),I.off(m.default.TEXT_TRACKS_QUEUE_INITIALIZED,_onTextTracksAdded,r),Object.keys(u).forEach((function(t){u[t].resetEmbedded(),u[t].reset()}))}},function setup(){D=null,N=!1,k=!1,A=!1,O=!1,S=Object(d.default)(L).getInstance(),E=Object(g.default)(L).getInstance(),I=Object(p.default)(L).getInstance(),resetInitialSettings()}(),r}TextController.__dashjs_factory_name="TextController",r.default=u.default.getClassFactory(TextController)},"./src/streaming/text/TextSourceBuffer.js":
/*!************************************************!*\
    !*** ./src/streaming/text/TextSourceBuffer.js ***!
    \************************************************/
/*! exports provided: default */function srcStreamingTextTextSourceBufferJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js"),l=i(/*! ../vo/TextTrackInfo */"./src/streaming/vo/TextTrackInfo.js"),c=i(/*! ../utils/BoxParser */"./src/streaming/utils/BoxParser.js"),d=i(/*! ../utils/CustomTimeRanges */"./src/streaming/utils/CustomTimeRanges.js"),g=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),p=i(/*! ../../core/Debug */"./src/core/Debug.js"),m=i(/*! ./EmbeddedTextHtmlRender */"./src/streaming/text/EmbeddedTextHtmlRender.js"),v=i(/*! codem-isoboxer */"./node_modules/codem-isoboxer/dist/iso_boxer.js"),b=i.n(v),M=i(/*! ../../../externals/cea608-parser */"./externals/cea608-parser.js"),S=i.n(M),E=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),I=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),D=i(/*! ../vo/DashJSError */"./src/streaming/vo/DashJSError.js"),A=i(/*! ../../core/errors/Errors */"./src/core/errors/Errors.js");function TextSourceBuffer(t){var r,i,g,v,M,C,N,k,O,L,R,j,B,U,z,Y,G=t.errHandler,H=t.manifestModel,Q=t.mediaController,V=t.videoModel,W=t.textTracks,$=t.vttParser,K=t.ttmlParser,q=t.streamInfo,X=this.context,Z=Object(E.default)(X).getInstance(),J=!1;function resetInitialSettings(){!function _resetFragmented(){C=null,k=NaN,O=[],L=null,N=!1}(),M=[],v=null}function _createTextTrackFromMediaInfo(t){var r=new l.default;for(var i in t)r[i]=t[i];r.labels=t.labels,r.defaultTrack=function getIsDefault(t){var r=!1;j.length>1&&t.isEmbedded?r=t.id&&t.id===a.default.CC1:1===j.length?t.id&&"string"==typeof t.id&&"CC"===t.id.substring(0,2)&&(r=!0):0===j.length&&(r=t.index===M[0].index);return r}(t),r.isFragmented=t.isFragmented,r.isEmbedded=!!t.isEmbedded,r.isTTML=function _checkTtml(t){return t.codec&&t.codec.search(a.default.STPP)>=0||t.mimeType&&t.mimeType.search(a.default.TTML)>=0}(t),r.kind=function _getKind(t,r){var i=t.roles&&t.roles.length>0?r[t.roles[0]]:r.caption;return i=i===r.caption||i===r.subtitle?i:r.caption}(t,{subtitle:"subtitles",caption:"captions"}),W.addTextTrack(r)}function _onVideoChunkReceived(t){var r=t.chunk;r.mediaInfo.embeddedCaptions&&append(r.bytes,r)}function setCurrentFragmentedTrackIdx(t){R=t}function append(t,l){var c=l.mediaInfo,d=c.type,p=c.mimeType,m=c.codec||p;m?-1!==c.codec.indexOf("application/mp4")?function _appendFragmentedText(t,u,l){var c;if("InitializationSegment"===u.segmentType)N=!0,k=g.getMediaTimescaleFromMoov(t);else{if(!N)return;(c=g.getSamplesInfo(t).sampleList).length>0&&(L=c[0].cts-u.start*k),l.search(a.default.STPP)>=0?function _appendFragmentedSttp(t,u,l){var c,d;for(v=null!==v?v:getParser(l),c=0;c<u.length;c++){var g=u[c],p=g.cts,m=_getTimestampOffset(),M=m+p/k,S=M+g.duration/k;r.buffered.add(M,S);var E=new DataView(t,g.offset,g.subSizes[0]),I=b.a.Utils.dataViewToString(E,a.default.UTF8),D=[],A=g.offset+g.subSizes[0];for(d=1;d<g.subSizes.length;d++){var N=new Uint8Array(t,A,g.subSizes[d]),O=String.fromCharCode.apply(null,N);D.push(O),A+=g.subSizes[d]}try{var L=H.getValue().ttmlTimeIsRelative?p/k:0,j=v.parse(I,L,p/k,(p+g.duration)/k,D);W.addCaptions(R,m,j)}catch(t){C.removeExecutedRequestsBeforeTime(),this.remove(),i.error("TTML parser error: "+t.message)}}}(t,c,l):function _appendFragmentedWebVtt(t,a){var u,l,c,d=[];for(u=0;u<a.length;u++){var g=a[u];g.cts-=L;var p=_getTimestampOffset()+g.cts/k,m=p+g.duration/k;r.buffered.add(p,m);var v=t.slice(g.offset,g.offset+g.size),M=b.a.parseBuffer(v);for(l=0;l<M.boxes.length;l++){var S=M.boxes[l];if(i.debug("VTT box1: "+S.type),"vtte"!==S.type&&"vttc"===S.type)for(i.debug("VTT vttc boxes.length = "+S.boxes.length),c=0;c<S.boxes.length;c++){var E=S.boxes[c];if(i.debug("VTT box2: "+E.type),"payl"===E.type){var I=E.cue_text;i.debug("VTT cue_text = "+I);var D=g.cts/k,A=(g.cts+g.duration)/k;d.push({start:D,end:A,data:I,styles:{}}),i.debug("VTT "+D+"-"+A+" : "+I)}}}}d.length>0&&W.addCaptions(R,0,d)}(t,c)}}(t,l,m):d===a.default.VIDEO?function _appendEmbeddedText(t,r){var a,l;if(r.segmentType===u.HTTPRequest.INIT_SEGMENT_TYPE)0===B&&(B=g.getMediaTimescaleFromMoov(t));else if(r.segmentType===u.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===B)return void i.warn("CEA-608: No timescale for embeddedTextTrack yet");var c=(l=g.getSamplesInfo(t)).lastSequenceNumber;if(z[0]||z[1]||function _setupCeaParser(){for(var t,r=0;r<j.length;r++){if(-1===(t=W.getTrackIdxForId(j[r].id)))return void i.warn("CEA-608: data before track is ready.");var a=_makeCueAdderForIndex(t);z[r]=new S.a.Cea608Parser(r+1,{newCue:a},null)}}(),B){if(null!==U&&c!==U+l.numSequences)for(a=0;a<z.length;a++)z[a]&&z[a].reset();for(var d=function _extractCea608Data(t,r){if(0===r.length)return null;for(var i={splits:[],fields:[[],[]]},a=new DataView(t),u=0;u<r.length;u++)for(var l=r[u],c=S.a.findCea608Nalus(a,l.offset,l.size),d=null,g=0,p=0;p<c.length;p++)for(var m=S.a.extractCea608DataFromRange(a,c[p]),v=0;v<2;v++)if(m[v].length>0){l.cts!==d?g=0:g+=1;var b=_getTimestampOffset();i.fields[v].push([l.cts+b*B,m[v],g]),d=l.cts}return i.fields.forEach((function sortField(t){t.sort((function(t,r){return t[0]===r[0]?t[2]-r[2]:t[0]-r[0]}))})),i}(t,l.sampleList),p=0;p<z.length;p++){var m=d.fields[p],v=z[p];if(v)for(a=0;a<m.length;a++)v.addData(m[a][0]/B,m[a][1])}U=c}}}(t,l):function _appendText(t,i,u){var l,c,d=new DataView(t,0,t.byteLength);c=b.a.Utils.dataViewToString(d,a.default.UTF8);try{l=getParser(u).parse(c,0),W.addCaptions(W.getCurrentTrackIdx(),0,l),r.buffered&&r.buffered.add(i.start,i.end)}catch(t){G.error(new D.default(A.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,A.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+t.message,c))}}(t,l,m):i.error("No text type defined")}function _makeCueAdderForIndex(t){return function newCue(r,i,a){var u;u=V.getTTMLRenderingDiv()?Y.createHTMLCaptionsFromScreen(V.getElement(),r,i,a):[{start:r,end:i,data:a.getDisplayText(),styles:{}}],u&&W.addCaptions(t,0,u)}}function _getTimestampOffset(){return isNaN(r.timestampOffset)?0:r.timestampOffset}function getParser(t){var r;return t.search(a.default.VTT)>=0?r=$:(t.search(a.default.TTML)>=0||t.search(a.default.STPP)>=0)&&(r=K),r}function onVideoBufferCleared(t){j.forEach((function(r){var i=W.getTrackIdxForId(r.id);i>=0&&W.deleteCuesFromTrackIdx(i,t.from,t.to)}))}return r={initialize:function initialize(){J||function _initEmbedded(){j=[],R=null,B=0,z=[],U=null,J=!0,Y=Object(m.default)(X).getInstance(),Z.on(I.default.VIDEO_CHUNK_RECEIVED,_onVideoChunkReceived,r),Z.on(I.default.BUFFER_CLEARED,onVideoBufferCleared,r)}()},addMediaInfos:function addMediaInfos(t,i,u){if(M=M.concat(i),t===a.default.TEXT&&i[0].isFragmented&&!i[0].isEmbedded){C=u,r.buffered=Object(d.default)(X).create(),O=Q.getTracksFor(a.default.TEXT,q.id).filter((function(t){return t.isFragmented}));for(var l=Q.getCurrentTrackFor(a.default.TEXT,q.id),c=0;c<O.length;c++)if(O[c]===l){setCurrentFragmentedTrackIdx(c);break}}for(var g=0;g<i.length;g++)_createTextTrackFromMediaInfo(i[g])},resetMediaInfos:function resetMediaInfos(){M=[]},getStreamId:function getStreamId(){return q.id},append:append,abort:function abort(){},addEmbeddedTrack:function addEmbeddedTrack(t){if(J&&t)if(t.id===a.default.CC1||t.id===a.default.CC3){for(var r=0;r<j.length;r++)if(j[r].id===t.id)return;j.push(t)}else i.warn("Embedded track "+t.id+" not supported!")},resetEmbedded:function resetEmbedded(){Z.off(I.default.VIDEO_CHUNK_RECEIVED,_onVideoChunkReceived,r),Z.off(I.default.BUFFER_CLEARED,onVideoBufferCleared,r),W&&W.deleteAllTextTracks(),J=!1,j=[],z=[null,null],U=null},getConfig:function getConfig(){return{fragmentModel:C,fragmentedTracks:O,videoModel:V}},setCurrentFragmentedTrackIdx:setCurrentFragmentedTrackIdx,remove:function remove(t,i){void 0===t&&t===i&&(t=r.buffered.start(0),i=r.buffered.end(r.buffered.length-1)),r.buffered.remove(t,i),W.deleteCuesFromTrackIdx(R,t,i)},reset:function reset(){resetInitialSettings(),M=[],g=null}},function setup(){i=Object(p.default)(X).getInstance().getLogger(r),g=Object(c.default)(X).getInstance(),resetInitialSettings()}(),r}TextSourceBuffer.__dashjs_factory_name="TextSourceBuffer",r.default=g.default.getClassFactory(TextSourceBuffer)},"./src/streaming/text/TextTracks.js":
/*!******************************************!*\
    !*** ./src/streaming/text/TextTracks.js ***!
    \******************************************/
/*! exports provided: default */function srcStreamingTextTextTracksJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),l=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),c=i(/*! ../../streaming/MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),d=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),g=i(/*! ../../core/Debug */"./src/core/Debug.js"),p=i(/*! imsc */"./node_modules/imsc/src/main/js/main.js");function TextTracks(t){var r,i,d,m,v,b,M,S,E,I,D,A,C,N,k,O,L,R=this.context,j=Object(u.default)(R).getInstance(),B=t.videoModel,U=t.streamInfo;function getVideoVisibleVideoSize(t,r,i,a,u,l){var c=0,d=0;t/r>i/a?c=(d=r)/a*i:d=(c=t)/i*a;var g,p,m=0,v=0;return c/d>u?(v=d,m=d*u):(m=c,v=c/u),g=(t-m)/2,p=(r-v)/2,l?{x:g+.1*m,y:p+.1*v,w:.8*m,h:.8*v}:{x:g,y:p,w:m,h:v}}function checkVideoSize(t,r){var i=B.getClientWidth(),a=B.getClientHeight(),u=B.getVideoWidth(),l=B.getVideoHeight(),d=B.getVideoRelativeOffsetTop(),g=B.getVideoRelativeOffsetLeft();if(0!==u&&0!==l){var p=u/l,m=!1;t.isFromCEA608&&(p=3.5/3,m=!0);var v=getVideoVisibleVideoSize.call(this,i,a,u,l,p,m),b=v.w,A=v.h,k=v.x,L=v.y;if(b!=E||A!=I||k!=M||L!=S||r){if(M=k+g,S=L+d,E=b,I=A,D){var R=D.style;R&&(R.left=M+"px",R.top=S+"px",R.width=E+"px",R.height=I+"px",R.zIndex=C&&document[C]||N?O:null,j.trigger(c.default.CAPTION_CONTAINER_RESIZE))}var U=t.activeCues;if(U)for(var z=U.length,Y=0;Y<z;++Y){var G=U[Y];G.scaleCue(G)}}}}function scaleCue(t){var r,i,a,u,l,c=E,d=I;if(t.cellResolution){var g=[c/t.cellResolution[0],d/t.cellResolution[1]];if(t.linePadding)for(r in t.linePadding)if(t.linePadding.hasOwnProperty(r)){i=(t.linePadding[r]*g[0]).toString();for(var p=document.getElementsByClassName("spanPadding"),m=0;m<p.length;m++)p[m].style.cssText=p[m].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i),p[m].style.cssText=p[m].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(t.fontSize){for(r in t.fontSize)if(t.fontSize.hasOwnProperty(r)){"%"===t.fontSize[r][0]?a=t.fontSize[r][1]/100:"c"===t.fontSize[r][0]&&(a=t.fontSize[r][1]),i=(a*g[1]).toString(),l="defaultFontSize"!==r?document.getElementsByClassName(r):document.getElementsByClassName("paragraph");for(var v=0;v<l.length;v++)l[v].style.cssText=l[v].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(t.lineHeight)for(r in t.lineHeight)if(t.lineHeight.hasOwnProperty(r)){"%"===t.lineHeight[r][0]?u=t.lineHeight[r][1]/100:"c"===t.fontSize[r][0]&&(u=t.lineHeight[r][1]),i=(u*g[1]).toString(),l=document.getElementsByClassName(r);for(var b=0;b<l.length;b++)l[b].style.cssText=l[b].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}}}if(t.isd){var M=document.getElementById(t.cueID);M&&D.removeChild(M),renderCaption(t)}}function renderCaption(t){if(D){var r=document.createElement("div");D.appendChild(r),k=Object(p.renderHTML)(t.isd,r,(function(r){var i=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,a=/^#(.*)$/;if(i.test(r)){var u=i.exec(r),l=parseInt(u[4],10)-1;return"data:image/png;base64,"+btoa(t.images[l])}if(a.test(r)){var c=a.exec(r)[1];return"data:image/png;base64,"+t.embeddedImages[c]}return null}),D.clientHeight,D.clientWidth,!1,(function(t){i.info("renderCaption :",t)}),k,!0),r.id=t.cueID,j.trigger(c.default.CAPTION_RENDERED,{captionDiv:r,currentTrackIdx:b})}}function addCaptions(t,r,u){var l=getTrackByIdx(t),g=this;if(l&&Array.isArray(u)&&0!==u.length)for(var p=0;p<u.length;p++){var m=void 0,v=u[p];l.cellResolution=v.cellResolution,l.isFromCEA608=v.isFromCEA608,"html"!==v.type||!D||isNaN(v.start)||isNaN(v.end)?!v.data||isNaN(v.start)||isNaN(v.end)||(m=new d(v.start-r,v.end-r,v.data),v.styles&&(void 0!==v.styles.align&&"align"in m&&(m.align=v.styles.align),void 0!==v.styles.line&&"line"in m&&(m.line=v.styles.line),void 0!==v.styles.position&&"position"in m&&(m.position=v.styles.position),void 0!==v.styles.size&&"size"in m&&(m.size=v.styles.size)),m.onenter=function(){l.mode===a.default.TEXT_SHOWING&&j.trigger(c.default.CAPTION_RENDERED,{currentTrackIdx:b})}):((m=new d(v.start+r,v.end+r,"")).cueHTMLElement=v.cueHTMLElement,m.isd=v.isd,m.images=v.images,m.embeddedImages=v.embeddedImages,m.cueID=v.cueID,m.scaleCue=scaleCue.bind(g),m.cellResolution=v.cellResolution,m.lineHeight=v.lineHeight,m.linePadding=v.linePadding,m.fontSize=v.fontSize,D.style.left=M+"px",D.style.top=S+"px",D.style.width=E+"px",D.style.height=I+"px",m.onenter=function(){l.mode===a.default.TEXT_SHOWING&&(this.isd?(renderCaption(this),i.debug("Cue enter id:"+this.cueID)):(D.appendChild(this.cueHTMLElement),scaleCue.call(g,this),j.trigger(c.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:b})))},m.onexit=function(){if(D)for(var t=D.childNodes,r=0;r<t.length;++r)t[r].id===this.cueID&&(i.debug("Cue exit id:"+t[r].id),D.removeChild(t[r]),--r)});try{m?cueInTrack(l,m)||l.addCue(m):i.error("impossible to display subtitles.")}catch(t){throw deleteTrackCues(l),l.addCue(m),t}}}function getTrackByIdx(t){return t>=0&&m[t]?B.getTextTrack(m[t].kind,m[t].id,m[t].lang,m[t].isTTML,m[t].isEmbedded):null}function setCurrentTrackIdx(t){var r=this;if(t!==b){var i=getTrackByIdx(b=t);setCueStyleOnTrack.call(this,i),A&&(clearInterval(A),A=null),i&&"html"===i.renderingType&&(checkVideoSize.call(this,i,!0),window.ResizeObserver?(L=new window.ResizeObserver((function(){checkVideoSize.call(r,i,!0)}))).observe(B.getElement()):A=setInterval(checkVideoSize.bind(this,i),500))}}function setCueStyleOnTrack(t){clearCaptionContainer.call(this),t&&"html"===t.renderingType?setNativeCueStyle.call(this):removeNativeCueStyle.call(this)}function cueInTrack(t,r){if(!t.cues)return!1;for(var i=0;i<t.cues.length;i++)if(t.cues[i].startTime===r.startTime&&t.cues[i].endTime===r.endTime)return!0;return!1}function cueInRange(t,r,i){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(isNaN(r)||(a?t.startTime:t.endTime)>=r)&&(isNaN(i)||(a?t.endTime:t.startTime)<=i)}function deleteTrackCues(t,r,i){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t.cues)for(var u=t.cues,l=u.length-1,c=l;c>=0;c--)cueInRange(u[c],r,i,a)&&(u[c].onexit&&u[c].onexit(),t.removeCue(u[c]))}function setNativeCueStyle(){var t=document.getElementById("native-cue-style");if(!t){(t=document.createElement("style")).id="native-cue-style",document.head.appendChild(t);var r=t.sheet,a=B.getElement();try{a&&(a.id?r.insertRule("#"+a.id+"::cue {background: transparent}",0):0!==a.classList.length?r.insertRule("."+a.className+"::cue {background: transparent}",0):r.insertRule("video::cue {background: transparent}",0))}catch(t){i.info(""+t.message)}}}function removeNativeCueStyle(){var t=document.getElementById("native-cue-style");t&&document.head.removeChild(t)}function clearCaptionContainer(){if(D)for(;D.firstChild;)D.removeChild(D.firstChild)}return r={initialize:function initialize(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(d=window.VTTCue||window.TextTrackCue,m=[],v=[],b=-1,M=0,S=0,E=0,I=0,D=null,A=null,N=!1,O=2147483647,k=null,void 0!==document.fullscreenElement?C="fullscreenElement":void 0!==document.webkitIsFullScreen?C="webkitIsFullScreen":document.msFullscreenElement?C="msFullscreenElement":document.mozFullScreen&&(C="mozFullScreen"))},getStreamId:function getStreamId(){return U.id},addTextTrack:function addTextTrack(t){m.push(t)},addCaptions:addCaptions,createTracks:function createTracks(){m.sort((function(t,r){return t.index-r.index})),D=B.getTTMLRenderingDiv();for(var t,r,i,u,d,g,p=-1,M=0;M<m.length;M++){var S=(t=m[M],r=void 0,i=void 0,u=void 0,d=void 0,g=void 0,r=t.kind,i=void 0!==t.id?t.id:t.lang,u=t.lang,d=t.isTTML,g=t.isEmbedded,B.addTextTrack(r,i,u,d,g));v.push(S),m[M].defaultTrack&&(S.default=!0,p=M);var E=getTrackByIdx(M);E&&(E.mode=a.default.TEXT_SHOWING,D&&(m[M].isTTML||m[M].isEmbedded)?E.renderingType="html":E.renderingType="default"),addCaptions(M,0,m[M].captionData),j.trigger(c.default.TEXT_TRACK_ADDED)}if(setCurrentTrackIdx.call(this,p),p>=0){j.on(c.default.PLAYBACK_METADATA_LOADED,(function onMetadataLoaded(){var t=getTrackByIdx(p);t&&"html"===t.renderingType&&checkVideoSize.call(this,t,!0),j.off(c.default.PLAYBACK_METADATA_LOADED,onMetadataLoaded,this)}),this);for(var I=0;I<m.length;I++){var A=getTrackByIdx(I);A&&(A.mode=I===p?a.default.TEXT_SHOWING:a.default.TEXT_HIDDEN)}}j.trigger(l.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:b,tracks:m,streamId:U.id})},getCurrentTrackIdx:function getCurrentTrackIdx(){return b},setCurrentTrackIdx:setCurrentTrackIdx,getTrackIdxForId:function getTrackIdxForId(t){for(var r=-1,i=0;i<m.length;i++)if(m[i].id===t){r=i;break}return r},getCurrentTrackInfo:function getCurrentTrackInfo(){return m[b]},setModeForTrackIdx:function setModeForTrackIdx(t,r){var i=getTrackByIdx(t);i&&i.mode!==r&&(i.mode=r)},deleteCuesFromTrackIdx:function deleteCuesFromTrackIdx(t,r,i){var a=getTrackByIdx(t);a&&deleteTrackCues(a,r,i)},deleteAllTextTracks:function deleteAllTextTracks(){for(var t=v?v.length:0,r=0;r<t;r++){var i=getTrackByIdx(r);i&&deleteTrackCues.call(this,i,U.start,U.start+U.duration,!1)}v=[],m=[],A&&(clearInterval(A),A=null),L&&B&&(L.unobserve(B.getElement()),L=null),b=-1,clearCaptionContainer.call(this)},deleteTextTrack:function deleteTextTrack(t){B.removeChild(v[t]),v.splice(t,1)}},function setup(){i=Object(g.default)(R).getInstance().getLogger(r)}(),r}TextTracks.__dashjs_factory_name="TextTracks",r.default=d.default.getClassFactory(TextTracks)},"./src/streaming/thumbnail/ThumbnailController.js":
/*!********************************************************!*\
    !*** ./src/streaming/thumbnail/ThumbnailController.js ***!
    \********************************************************/
/*! exports provided: default */function srcStreamingThumbnailThumbnailControllerJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),l=i(/*! ../vo/Thumbnail */"./src/streaming/vo/Thumbnail.js"),c=i(/*! ./ThumbnailTracks */"./src/streaming/thumbnail/ThumbnailTracks.js"),d=i(/*! ../vo/BitrateInfo */"./src/streaming/vo/BitrateInfo.js"),g=i(/*! ../../dash/utils/SegmentsUtils */"./src/dash/utils/SegmentsUtils.js");function ThumbnailController(t){var r,i,a=this.context,p=t.streamInfo;function setTrackByIndex(t){i.setTrackByIndex(t)}function reset(){i&&i.reset()}return r={getStreamId:function getStreamId(){return p.id},initialize:function initialize(){i.addTracks();var t=i.getTracks();t&&t.length>0&&setTrackByIndex(0)},provide:function provide(t,r){if("function"==typeof r){var a,u,c=i.getCurrentTrack();if(!c||c.segmentDuration<=0||null==t)r(null);else{(u=i.getThumbnailRequestForTime(t))&&(c.segmentDuration=u.duration),a=t%c.segmentDuration;var d=Math.floor(a*c.tilesHor*c.tilesVert/c.segmentDuration),p=new l.default;if(p.width=Math.floor(c.widthPerTile),p.height=Math.floor(c.heightPerTile),p.x=Math.floor(d%c.tilesHor)*c.widthPerTile,p.y=Math.floor(d/c.tilesHor)*c.heightPerTile,"readThumbnail"in c)return c.readThumbnail(t,(function(t){p.url=t,r(p)}));if(u)p.url=u.url,c.segmentDuration=NaN;else{var m=Math.floor(t/c.segmentDuration);p.url=function _buildUrlFromTemplate(t,r){var i=r+t.startNumber,a=Object(g.replaceTokenForTemplate)(t.templateUrl,"Number",i);return a=Object(g.replaceTokenForTemplate)(a,"Time",(i-1)*t.segmentDuration*t.timescale),a=Object(g.replaceTokenForTemplate)(a,"Bandwidth",t.bandwidth),Object(g.unescapeDollarsInTemplate)(a)}(c,m)}r(p)}}},setTrackByIndex:setTrackByIndex,getCurrentTrackIndex:function getCurrentTrackIndex(){return i.getCurrentTrackIndex()},getBitrateList:function getBitrateList(){var t=i.getTracks(),r=0;return t.map((function(t){var i=new d.default;return i.mediaType=u.default.IMAGE,i.qualityIndex=r++,i.bitrate=t.bitrate,i.width=t.width,i.height=t.height,i}))},reset:reset},function setup(){reset(),i=Object(c.default)(a).create({streamInfo:p,adapter:t.adapter,baseURLController:t.baseURLController,timelineConverter:t.timelineConverter,debug:t.debug,eventBus:t.eventBus,events:t.events,dashConstants:t.dashConstants,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController})}(),r}ThumbnailController.__dashjs_factory_name="ThumbnailController",r.default=a.default.getClassFactory(ThumbnailController)},"./src/streaming/thumbnail/ThumbnailTracks.js":
/*!****************************************************!*\
    !*** ./src/streaming/thumbnail/ThumbnailTracks.js ***!
    \****************************************************/
/*! exports provided: THUMBNAILS_SCHEME_ID_URIS, default */function srcStreamingThumbnailThumbnailTracksJs(t,r,i){i.r(r),i.d(r,"THUMBNAILS_SCHEME_ID_URIS",(function(){return M}));var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),u=i(/*! ../../dash/constants/DashConstants */"./src/dash/constants/DashConstants.js"),l=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! ../vo/ThumbnailTrackInfo */"./src/streaming/vo/ThumbnailTrackInfo.js"),d=i(/*! ../../streaming/utils/URLUtils */"./src/streaming/utils/URLUtils.js"),g=i(/*! ../../dash/utils/SegmentsUtils */"./src/dash/utils/SegmentsUtils.js"),p=i(/*! ../../streaming/utils/BoxParser */"./src/streaming/utils/BoxParser.js"),m=i(/*! ../../streaming/net/XHRLoader */"./src/streaming/net/XHRLoader.js"),v=i(/*! ../../dash/DashHandler */"./src/dash/DashHandler.js"),b=i(/*! ../../dash/controllers/SegmentsController */"./src/dash/controllers/SegmentsController.js"),M=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function ThumbnailTracks(t){var r,i,l,S,E,I,D,A,C=this.context,N=t.adapter,k=t.baseURLController,O=t.streamInfo,L=t.timelineConverter,R=t.debug,j=t.eventBus,B=t.events,U=t.dashConstants,z=Object(d.default)(C).getInstance();function _createTrack(t,r){var a=new c.default;a.id=t.id,a.bitrate=t.bandwidth,a.width=t.width,a.height=t.height,a.tilesHor=1,a.tilesVert=1,t.essentialProperties&&t.essentialProperties.forEach((function(t){if(M.indexOf(t.schemeIdUri)>=0&&t.value){var r=t.value.split("x");2!==r.length||isNaN(r[0])||isNaN(r[1])||(a.tilesHor=parseInt(r[0],10),a.tilesVert=parseInt(r[1],10))}})),r?I.updateSegmentData(t).then((function(r){!function _handleUpdatedSegmentData(t,r,i){var a=[],u=function _normalizeSegments(t,r){var i,a,u,l,c=[],d=0;for(i=0,a=t.segments.length;i<a;i++)u=t.segments[i],(l=Object(g.getTimeBasedSegment)(L,N.getIsDynamic(),r,u.startTime,u.duration,u.timescale,u.media,u.mediaRange,d))&&(c.push(l),l=null,d++);return c}(i,r);r.segments=u,t.segmentDuration=r.segments[0].duration,t.readThumbnail=function(t,i){var u=null;a.some((function(r){if(r.start<=t&&r.end>t)return u=r.url,!0})),u?i(u):r.segments.some((function(u){if(u.mediaStartTime<=t&&u.mediaStartTime+u.duration>t){var l=k.resolve(r.path);return D.load({method:"get",url:l.url,request:{range:u.mediaRange,responseType:"arraybuffer"},onload:function onload(t){var r=A.getSamplesInfo(t.target.response),l=new Blob([t.target.response.slice(r.sampleList[0].offset,r.sampleList[0].offset+r.sampleList[0].size)],{type:"image/jpeg"}),c=window.URL.createObjectURL(l);a.push({start:u.mediaStartTime,end:u.mediaStartTime+u.duration,url:c}),i&&i(c)}}),!0}}))}}(a,t,r)})):(a.startNumber=t.startNumber,a.segmentDuration=t.segmentDuration,a.timescale=t.timescale,a.templateUrl=function buildTemplateUrl(t){var r=z.isRelative(t.media)?z.resolve(t.media,k.resolve(t.path).url):t.media;if(!r)return"";return Object(g.replaceIDForTemplate)(r,t.id)}(t)),a.tilesHor>0&&a.tilesVert>0&&(a.widthPerTile=a.width/a.tilesHor,a.heightPerTile=a.height/a.tilesVert,i.push(a))}function reset(){i=[],S=-1,E=null}return r={getTracks:function getTracks(){return i},addTracks:function addTracks(){if(O&&N&&(E=N.getMediaInfoForType(O,a.default.IMAGE))){var t=N.getVoRepresentations(E);t&&t.length>0&&t.forEach((function(t){(t.segmentInfoType===u.default.SEGMENT_TEMPLATE&&t.segmentDuration>0&&t.media||t.segmentInfoType===u.default.SEGMENT_TIMELINE)&&_createTrack(t),t.segmentInfoType===u.default.SEGMENT_BASE&&_createTrack(t,!0)})),i.length>0&&i.sort((function(t,r){return t.bitrate-r.bitrate}))}},reset:reset,setTrackByIndex:function setTrackByIndex(t){i&&0!==i.length&&(t>=i.length&&(t=i.length-1),S=t)},getCurrentTrack:function getCurrentTrack(){return S<0?null:i[S]},getCurrentTrackIndex:function getCurrentTrackIndex(){return S},getThumbnailRequestForTime:function getThumbnailRequestForTime(t){for(var r,a=N.getVoRepresentations(E),u=0;u<a.length;u++)if(i[S].id===a[u].id){r=a[u];break}return l.getSegmentRequestForTime(E,r,t)}},function setup(){reset(),D=Object(m.default)(C).create({}),A=Object(p.default)(C).getInstance(),I=Object(b.default)(C).create({events:B,eventBus:j,streamInfo:O,timelineConverter:L,dashConstants:U,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController,type:a.default.IMAGE}),(l=Object(v.default)(C).create({streamInfo:O,type:a.default.IMAGE,timelineConverter:L,segmentsController:I,baseURLController:k,debug:R,eventBus:j,events:B,dashConstants:U,urlUtils:z})).initialize(!!N&&N.getIsDynamic())}(),r}ThumbnailTracks.__dashjs_factory_name="ThumbnailTracks",r.default=l.default.getClassFactory(ThumbnailTracks)},"./src/streaming/utils/BaseURLSelector.js":
/*!************************************************!*\
    !*** ./src/streaming/utils/BaseURLSelector.js ***!
    \************************************************/
/*! exports provided: default */function srcStreamingUtilsBaseURLSelectorJs(t,r,i){i.r(r);var a=i(/*! ../../core/errors/Errors */"./src/core/errors/Errors.js"),u=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),l=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),c=i(/*! ../controllers/BlacklistController */"./src/streaming/controllers/BlacklistController.js"),d=i(/*! ./baseUrlResolution/DVBSelector */"./src/streaming/utils/baseUrlResolution/DVBSelector.js"),g=i(/*! ./baseUrlResolution/BasicSelector */"./src/streaming/utils/baseUrlResolution/BasicSelector.js"),p=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),m=i(/*! ../vo/DashJSError */"./src/streaming/vo/DashJSError.js"),v=i(/*! ../utils/SupervisorTools */"./src/streaming/utils/SupervisorTools.js");function BaseURLSelector(){var t,r,i,p,b,M=this.context,S=Object(u.default)(M).getInstance();function reset(){r.reset()}return t={chooseSelector:function chooseSelector(t){Object(v.checkParameterType)(t,"boolean"),b=t?p:i},select:function select(t){if(t){var r=t.baseUrls,u=t.selectedIdx;if(!isNaN(u))return r[u];var c=b.select(r);return c?(t.selectedIdx=r.indexOf(c),c):(S.trigger(l.default.URL_RESOLUTION_FAILED,{error:new m.default(a.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,a.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(b===i&&reset()))}},reset:reset,setConfig:function setConfig(t){t.selector&&(b=t.selector)}},function setup(){r=Object(c.default)(M).create({updateEventName:l.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:l.default.SERVICE_LOCATION_BLACKLIST_ADD}),i=Object(g.default)(M).create({blacklistController:r}),p=Object(d.default)(M).create({blacklistController:r}),b=i}(),t}BaseURLSelector.__dashjs_factory_name="BaseURLSelector",r.default=p.default.getClassFactory(BaseURLSelector)},"./src/streaming/utils/BoxParser.js":
/*!******************************************!*\
    !*** ./src/streaming/utils/BoxParser.js ***!
    \******************************************/
/*! exports provided: default */function srcStreamingUtilsBoxParserJs(t,r,i){i.r(r);var a=i(/*! ../../core/Debug */"./src/core/Debug.js"),u=i(/*! ./IsoFile */"./src/streaming/utils/IsoFile.js"),l=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),c=i(/*! codem-isoboxer */"./node_modules/codem-isoboxer/dist/iso_boxer.js"),d=i.n(c),g=i(/*! ../vo/IsoBoxSearchInfo */"./src/streaming/vo/IsoBoxSearchInfo.js");function BoxParser(){var t,r,i=this.context;function parse(t){if(!t)return null;void 0===t.fileStart&&(t.fileStart=0);var r=d.a.parseBuffer(t),a=Object(u.default)(i).create();return a.setData(r),a}function parseUint32(t,r){return t[r+3]>>>0|t[r+2]<<8>>>0|t[r+1]<<16>>>0|t[r]<<24>>>0}function parseIsoBoxType(t,r){return String.fromCharCode(t[r++])+String.fromCharCode(t[r++])+String.fromCharCode(t[r++])+String.fromCharCode(t[r])}return r={parse:parse,findLastTopIsoBoxCompleted:function findLastTopIsoBoxCompleted(t,r,i){if(void 0===i&&(i=0),!r||i+8>=r.byteLength)return new g.default(0,!1);for(var a,u=r instanceof ArrayBuffer?new Uint8Array(r):r,l=0;i<u.byteLength;){var c=parseUint32(u,i),d=parseIsoBoxType(u,i+4);if(0===c)break;i+c<=u.byteLength&&(t.indexOf(d)>=0?a=new g.default(i,!0,c):l=i+c),i+=c}return a||new g.default(l,!1)},getMediaTimescaleFromMoov:function getMediaTimescaleFromMoov(t){var r=parse(t),i=r?r.getBox("mdhd"):void 0;return i?i.timescale:NaN},getSamplesInfo:function getSamplesInfo(t){if(!t||0===t.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var r,i,a,u,l,c,d,g,p,m,v,b,M,S,E,I,D=parse(t),A=D.getBoxes("moof"),C=D.getBoxes("mfhd");E=D.getBoxes("moof").length,S=C[C.length-1].sequence_number,i=0,l=[];var N=-1,k=-1;for(m=0;m<A.length;m++){var O=A[m],L=O.getChildBoxes("traf");for(g=0;g<L.length;g++){var R=L[g],j=R.getChildBox("tfhd"),B=R.getChildBox("tfdt");u=B.baseMediaDecodeTime;var U=R.getChildBoxes("trun"),z=R.getChildBoxes("subs");for(p=0;p<U.length;p++){var Y=U[p];for(i=Y.sample_count,M=(j.base_data_offset||0)+(Y.data_offset||0),d=0;d<i;d++){r=void 0!==(c=Y.samples[d]).sample_duration?c.sample_duration:j.default_sample_duration,a=void 0!==c.sample_size?c.sample_size:j.default_sample_size;var G={dts:u,cts:u+(void 0!==c.sample_composition_time_offset?c.sample_composition_time_offset:0),duration:r,offset:O.offset+M,size:a,subSizes:[a]};if(z)for(v=0;v<z.length;v++){var H=z[v];if(N<H.entry_count-1&&d>k&&(N++,k+=H.entries[N].sample_delta),d==k){G.subSizes=[];var Q=H.entries[N];for(b=0;b<Q.subsample_count;b++)G.subSizes.push(Q.subsamples[b].subsample_size)}}l.push(G),M+=a,u+=r}}I=u-B.baseMediaDecodeTime}}return{sampleList:l,lastSequenceNumber:S,totalDuration:I,numSequences:E}},findInitRange:function findInitRange(r){var i=null,a=parse(r);if(!a)return i;var u=a.getBox("ftyp"),l=a.getBox("moov");return t.debug("Searching for initialization."),l&&l.isComplete&&(i=(u?u.offset:l.offset)+"-"+(l.offset+l.size-1),t.debug("Found the initialization.  Range: "+i)),i},parsePayload:function parsePayload(t,r,i){if(void 0===i&&(i=0),!r||i+8>=r.byteLength)return new g.default(0,!1);for(var a,u=r instanceof ArrayBuffer?new Uint8Array(r):r,l=0;i<u.byteLength;){var c=parseUint32(u,i),d=parseIsoBoxType(u,i+4);if(0===c)break;i+c<=u.byteLength&&(t.indexOf(d)>=0?a=new g.default(i,!0,c,d):l=i+c),i+=c}return a||new g.default(l,!1)}},function setup(){t=Object(a.default)(i).getInstance().getLogger(r)}(),r}BoxParser.__dashjs_factory_name="BoxParser",r.default=l.default.getSingletonFactory(BoxParser)},"./src/streaming/utils/Capabilities.js":
/*!*********************************************!*\
    !*** ./src/streaming/utils/Capabilities.js ***!
    \*********************************************/
/*! exports provided: supportsMediaSource, default */function srcStreamingUtilsCapabilitiesJs(t,r,i){i.r(r),i.d(r,"supportsMediaSource",(function(){return supportsMediaSource}));var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../thumbnail/ThumbnailTracks */"./src/streaming/thumbnail/ThumbnailTracks.js"),l=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),c=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function supportsMediaSource(){var t="WebKitMediaSource"in window,r="MediaSource"in window;return t||r}function Capabilities(){var t,r,i;return t={setConfig:function setConfig(t){t&&t.settings&&(r=t.settings)},supportsMediaSource:supportsMediaSource,supportsEncryptedMedia:function supportsEncryptedMedia(){return i},supportsCodec:function supportsCodec(t,i){return i!==l.default.AUDIO&&i!==l.default.VIDEO?Promise.resolve(!0):function _canUseMediaCapabilitiesApi(t,i){return r.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(t.codec&&i===l.default.AUDIO||i===l.default.VIDEO&&t.codec&&t.width&&t.height&&t.bitrate&&t.framerate)}(t,i)?function _checkCodecWithMediaCapabilities(t,r){return new Promise((function(i){if(t&&t.codec){var a={type:"media-source"};a[r]={},a[r].contentType=t.codec,a[r].width=t.width,a[r].height=t.height,a[r].bitrate=parseInt(t.bitrate),a[r].framerate=parseFloat(t.framerate),navigator.mediaCapabilities.decodingInfo(a).then((function(t){i(t.supported)})).catch((function(){i(!1)}))}else i(!1)}))}(t,i):function _checkCodecWithMse(t){return new Promise((function(r){if(t&&t.codec){var i=t.codec;t.width&&t.height&&(i+=';width="'+t.width+'";height="'+t.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(i)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(i)?r(!0):r(!1)}else r(!1)}))}(t)},setEncryptedMediaSupported:function setEncryptedMediaSupported(t){i=t},supportsEssentialProperty:function supportsEssentialProperty(t){try{return-1!==u.THUMBNAILS_SCHEME_ID_URIS.indexOf(t.schemeIdUri)}catch(t){return!0}},codecRootCompatibleWithCodec:function codecRootCompatibleWithCodec(t,r){for(var i,a=t.split(".")[0],u=0===r.indexOf(a),l=0;l<c.length;l++)if(c[l].codec===a){i=c[l];break}return i?u||i.compatibleCodecs.some((function(t){return 0===r.indexOf(t)})):u}},function setup(){i=!1}(),t}Capabilities.__dashjs_factory_name="Capabilities",r.default=a.default.getSingletonFactory(Capabilities)},"./src/streaming/utils/CapabilitiesFilter.js":
/*!***************************************************!*\
    !*** ./src/streaming/utils/CapabilitiesFilter.js ***!
    \***************************************************/
/*! exports provided: default */function srcStreamingUtilsCapabilitiesFilterJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/Debug */"./src/core/Debug.js"),l=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),c=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),d=i(/*! ../../core/events/Events */"./src/core/events/Events.js");function CapabilitiesFilter(){var t,r,i,a,g,p,m=this.context,v=Object(c.default)(m).getInstance();function _filterUnsupportedCodecs(t,a){if(!a||!a.Period_asArray||0===a.Period_asArray.length)return Promise.resolve();var u=[];return a.Period_asArray.forEach((function(a){u.push(function _filterUnsupportedAdaptationSetsOfPeriod(t,a){return new Promise((function(u){if(t&&t.AdaptationSet_asArray&&0!==t.AdaptationSet_asArray.length){var c=[];t.AdaptationSet_asArray.forEach((function(t){r.getIsTypeOf(t,a)&&c.push(function _filterUnsupportedRepresentationsOfAdaptation(t,a){return new Promise((function(u){if(t.Representation_asArray&&0!==t.Representation_asArray.length){var c=[],d=[];t.Representation_asArray.forEach((function(u,g){var p=r.getCodec(t,g,!1),m=function _createConfiguration(t,r,i){switch(t){case l.default.VIDEO:return function _createVideoConfiguration(t,r){var i=t.width||null,a=t.height||null,u=t.frameRate||null,l=t.bandwidth||null;return{codec:r,width:i,height:a,framerate:u,bitrate:l}}(r,i);case l.default.AUDIO:return function _createAudioConfiguration(t,r){var i=t.audioSamplingRate||null,a=t.bandwidth||null;return{codec:r,bitrate:a,samplerate:i}}(r,i);default:return null}}(a,u,p);d.push(m),c.push(i.supportsCodec(m,a))})),Promise.all(c).then((function(r){t.Representation_asArray=t.Representation_asArray.filter((function(t,i){return r[i]||p.debug("[Stream] Codec ".concat(d[i].codec," not supported ")),r[i]})),u()})).catch((function(){u()}))}else u()}))}(t,a))})),Promise.all(c).then((function(){t.AdaptationSet_asArray=t.AdaptationSet_asArray.filter((function(t){var r=t.Representation_asArray&&t.Representation_asArray.length>0;return r||(v.trigger(d.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:t}),p.warn("AdaptationSet has been removed because of no supported Representation")),r})),u()})).catch((function(){u()}))}else u()}))}(a,t))})),Promise.all(u)}return t={setConfig:function setConfig(t){t&&(t.adapter&&(r=t.adapter),t.capabilities&&(i=t.capabilities),t.settings&&(a=t.settings),t.customParametersModel&&(g=t.customParametersModel))},filterUnsupportedFeatures:function filterUnsupportedFeatures(t){return new Promise((function(u){var c=[];c.push(_filterUnsupportedCodecs(l.default.VIDEO,t)),c.push(_filterUnsupportedCodecs(l.default.AUDIO,t)),Promise.all(c).then((function(){a.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function _filterUnsupportedEssentialProperties(t){if(!t||!t.Period_asArray||0===t.Period_asArray.length)return;t.Period_asArray.forEach((function(t){t.AdaptationSet_asArray=t.AdaptationSet_asArray.filter((function(t){return!t.Representation_asArray||0===t.Representation_asArray.length||(t.Representation_asArray=t.Representation_asArray.filter((function(t){var a=r.getEssentialPropertiesForRepresentation(t);if(a&&a.length>0)for(var u=0;u<a.length;){if(!i.supportsEssentialProperty(a[u]))return p.debug("[Stream] EssentialProperty not supported: "+a[u].schemeIdUri),!1;u+=1}return!0})),t.Representation_asArray&&t.Representation_asArray.length>0)}))}))}(t),function _applyCustomFilters(t){var r=g.getCustomCapabilitiesFilters();if(!r||0===r.length||!t||!t.Period_asArray||0===t.Period_asArray.length)return;t.Period_asArray.forEach((function(t){t.AdaptationSet_asArray=t.AdaptationSet_asArray.filter((function(t){return!t.Representation_asArray||0===t.Representation_asArray.length||(t.Representation_asArray=t.Representation_asArray.filter((function(t){return!r.some((function(r){return!r(t)}))})),t.Representation_asArray&&t.Representation_asArray.length>0)}))}))}(t),u()})).catch((function(){u()}))}))}},function setup(){p=Object(u.default)(m).getInstance().getLogger(t)}(),t}CapabilitiesFilter.__dashjs_factory_name="CapabilitiesFilter",r.default=a.default.getSingletonFactory(CapabilitiesFilter)},"./src/streaming/utils/CustomTimeRanges.js":
/*!*************************************************!*\
    !*** ./src/streaming/utils/CustomTimeRanges.js ***!
    \*************************************************/
/*! exports provided: default */function srcStreamingUtilsCustomTimeRangesJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../utils/SupervisorTools */"./src/streaming/utils/SupervisorTools.js");function CustomTimeRanges(){return{customTimeRangeArray:[],length:0,add:function add(t,r){var i=0;for(i=0;i<this.customTimeRangeArray.length&&t>this.customTimeRangeArray[i].start;i++);for(this.customTimeRangeArray.splice(i,0,{start:t,end:r}),i=0;i<this.customTimeRangeArray.length-1;i++)this.mergeRanges(i,i+1)&&i--;this.length=this.customTimeRangeArray.length},clear:function clear(){this.customTimeRangeArray=[],this.length=0},remove:function remove(t,r){for(var i=0;i<this.customTimeRangeArray.length;i++)if(t<=this.customTimeRangeArray[i].start&&r>=this.customTimeRangeArray[i].end)this.customTimeRangeArray.splice(i,1),i--;else{if(t>this.customTimeRangeArray[i].start&&r<this.customTimeRangeArray[i].end){this.customTimeRangeArray.splice(i+1,0,{start:r,end:this.customTimeRangeArray[i].end}),this.customTimeRangeArray[i].end=t;break}t>this.customTimeRangeArray[i].start&&t<this.customTimeRangeArray[i].end?this.customTimeRangeArray[i].end=t:r>this.customTimeRangeArray[i].start&&r<this.customTimeRangeArray[i].end&&(this.customTimeRangeArray[i].start=r)}this.length=this.customTimeRangeArray.length},mergeRanges:function mergeRanges(t,r){var i=this.customTimeRangeArray[t],a=this.customTimeRangeArray[r];return i.start<=a.start&&a.start<=i.end&&i.end<=a.end?(i.end=a.end,this.customTimeRangeArray.splice(r,1),!0):a.start<=i.start&&i.start<=a.end&&a.end<=i.end?(i.start=a.start,this.customTimeRangeArray.splice(r,1),!0):a.start<=i.start&&i.start<=a.end&&i.end<=a.end?(this.customTimeRangeArray.splice(t,1),!0):i.start<=a.start&&a.start<=i.end&&a.end<=i.end&&(this.customTimeRangeArray.splice(r,1),!0)},start:function start(t){return Object(u.checkInteger)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].start},end:function end(t){return Object(u.checkInteger)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].end}}}CustomTimeRanges.__dashjs_factory_name="CustomTimeRanges",r.default=a.default.getClassFactory(CustomTimeRanges)},"./src/streaming/utils/DOMStorage.js":
/*!*******************************************!*\
    !*** ./src/streaming/utils/DOMStorage.js ***!
    \*******************************************/
/*! exports provided: default */function srcStreamingUtilsDOMStorageJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/Debug */"./src/core/Debug.js"),l=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js"),c=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],d="dashjs_?_bitrate",g="dashjs_?_settings",p="localStorage",m="lastBitrate",v="lastMediaSettings";function DOMStorage(t){t=t||{};var r,i,a,b=this.context,M=t.settings;function isSupported(t){if(void 0!==a)return a;a=!1;var r;try{"undefined"!=typeof window&&(r=window[t])}catch(t){return i.warn("DOMStorage access denied: "+t.message),a}if(!r||t!==p&&"sessionStorage"!==t)return a;try{r.setItem("1","1"),r.removeItem("1"),a=!0}catch(t){i.warn("DOMStorage is supported, but cannot be used: "+t.message)}return a}function getTimestamp(){var t=6e5;return Math.round((new Date).getTime()/t)*t}function canStore(t,r){return isSupported(t)&&M.get().streaming[r+"CachingInfo"].enabled}function checkConfig(){if(!M)throw new Error(l.default.MISSING_CONFIG_ERROR)}return r={getSavedBitrateSettings:function getSavedBitrateSettings(t){var r=NaN;if(checkConfig(),canStore(p,m)){var a=d.replace(/\?/,t);try{var u=JSON.parse(localStorage.getItem(a))||{},l=(new Date).getTime()-parseInt(u.timestamp,10)>=M.get().streaming.lastBitrateCachingInfo.ttl||!1,c=parseFloat(u.bitrate);isNaN(c)||l?l&&localStorage.removeItem(a):(r=c,i.debug("Last saved bitrate for "+t+" was "+c))}catch(t){return null}}return r},setSavedBitrateSettings:function setSavedBitrateSettings(t,r){if(canStore(p,m)&&r){var a=d.replace(/\?/,t);try{localStorage.setItem(a,JSON.stringify({bitrate:r.toFixed(3),timestamp:getTimestamp()}))}catch(t){i.error(t.message)}}},getSavedMediaSettings:function getSavedMediaSettings(t){var r=null;if(checkConfig(),canStore(p,v)){var i=g.replace(/\?/,t);try{var a=JSON.parse(localStorage.getItem(i))||{},u=(new Date).getTime()-parseInt(a.timestamp,10)>=M.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;r=a.settings,u&&(localStorage.removeItem(i),r=null)}catch(t){return null}}return r},setSavedMediaSettings:function setSavedMediaSettings(t,r){if(canStore(p,v)){var a=g.replace(/\?/,t);try{localStorage.setItem(a,JSON.stringify({settings:r,timestamp:getTimestamp()}))}catch(t){i.error(t.message)}}}},function setup(){i=Object(u.default)(b).getInstance().getLogger(r),function translateLegacyKeys(){isSupported(p)&&c.forEach((function(t){var r=localStorage.getItem(t.oldKey);if(r){localStorage.removeItem(t.oldKey);try{localStorage.setItem(t.newKey,r)}catch(t){i.error(t.message)}}}))}()}(),r}DOMStorage.__dashjs_factory_name="DOMStorage";var b=a.default.getSingletonFactory(DOMStorage);r.default=b},"./src/streaming/utils/DefaultURLUtils.js":
/*!************************************************!*\
    !*** ./src/streaming/utils/DefaultURLUtils.js ***!
    \************************************************/
/*! exports provided: default */function srcStreamingUtilsDefaultURLUtilsJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function DefaultURLUtils(){var t,r=/^[a-z][a-z0-9+\-_.]*:/i,i=/^https?:\/\//i,a=/^https:\/\//i,u=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,l=function nativeURLResolver(t,r){try{return new window.URL(t,r).toString()}catch(r){return t}},c=function dumbURLResolver(t,r){var i=parseBaseUrl;if(!r)return t;if(!isRelative(t))return t;isPathAbsolute(t)&&(i=parseOrigin),isSchemeRelative(t)&&(i=parseScheme);var a=i(r),u="/"!==a.charAt(a.length-1)&&"/"!==t.charAt(0)?"/":"";return[a,t].join(u)};function parseBaseUrl(t){var r=t.indexOf("/"),i=t.lastIndexOf("/");return-1!==r?i===r+1?t:(-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),t.substring(0,i+1)):""}function parseOrigin(t){var r=t.match(u);return r?r[1]:""}function parseScheme(t){var i=t.match(r);return i?i[0]:""}function isRelative(t){return!r.test(t)}function isPathAbsolute(t){return isRelative(t)&&"/"===t.charAt(0)}function isSchemeRelative(t){return 0===t.indexOf("//")}!function setup(){try{new window.URL("x","http://y");t=l}catch(t){}finally{t=t||c}}();var d={parseBaseUrl:parseBaseUrl,parseOrigin:parseOrigin,parseScheme:parseScheme,isRelative:isRelative,isPathAbsolute:isPathAbsolute,isSchemeRelative:isSchemeRelative,isHTTPURL:function isHTTPURL(t){return i.test(t)},isHTTPS:function isHTTPS(t){return a.test(t)},removeHostname:function removeHostname(t){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(t)[2].substring(1)},resolve:function resolve(r,i){return t(r,i)}};return d}DefaultURLUtils.__dashjs_factory_name="DefaultURLUtils",r.default=a.default.getSingletonFactory(DefaultURLUtils)},"./src/streaming/utils/EBMLParser.js":
/*!*******************************************!*\
    !*** ./src/streaming/utils/EBMLParser.js ***!
    \*******************************************/
/*! exports provided: default */function srcStreamingUtilsEBMLParserJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function EBMLParser(t){var r;t=t||{};var i=new DataView(t.data),a=0;function consumeTag(t,r){var u=!0,l=0;if(void 0===r&&(r=!1),t.tag>16777215?(i.getUint32(a)!==t.tag&&(u=!1),l=4):t.tag>65535?(256*i.getUint16(a)+i.getUint8(a+2)!==t.tag&&(u=!1),l=3):t.tag>255?(i.getUint16(a)!==t.tag&&(u=!1),l=2):(i.getUint8(a)!==t.tag&&(u=!1),l=1),!u&&t.required&&!r)throw new Error("required tag not found");return u&&(a+=l),u}function getMatroskaCodedNum(t){var r=1,u=128,l=-1,c=0,d=i.getUint8(a),g=0;for(g=0;g<8;g+=1){if((d&u)===u){c=void 0===t?d&~u:d,l=g;break}u>>=1}for(g=0;g<l;g+=1,r+=1)c=c<<8|255&i.getUint8(a+r);return a+=r,c}return r={getPos:function getPos(){return a},setPos:function setPos(t){a=t},consumeTag:consumeTag,consumeTagAndSize:function consumeTagAndSize(t,r){var i=consumeTag(t,r);return i&&getMatroskaCodedNum(),i},parseTag:function parseTag(t){var i;return consumeTag(t),i=getMatroskaCodedNum(),r[t.parse](i)},skipOverElement:function skipOverElement(t,r){var i,u=consumeTag(t,r);return u&&(i=getMatroskaCodedNum(),a+=i),u},getMatroskaCodedNum:getMatroskaCodedNum,getMatroskaFloat:function getMatroskaFloat(t){var r;switch(t){case 4:r=i.getFloat32(a),a+=4;break;case 8:r=i.getFloat64(a),a+=8}return r},getMatroskaUint:function getMatroskaUint(t){for(var r=0,u=0;u<t;u+=1)r<<=8,r|=255&i.getUint8(a+u);return a+=t,r},moreData:function moreData(){return a<i.byteLength}},r}EBMLParser.__dashjs_factory_name="EBMLParser",r.default=a.default.getClassFactory(EBMLParser)},"./src/streaming/utils/ErrorHandler.js":
/*!*********************************************!*\
    !*** ./src/streaming/utils/ErrorHandler.js ***!
    \*********************************************/
/*! exports provided: default */function srcStreamingUtilsErrorHandlerJs(t,r,i){i.r(r);var a=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),u=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),l=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function ErrorHandler(){var t=this.context,r=Object(a.default)(t).getInstance();return{error:function error(t){r.trigger(u.default.ERROR,{error:t})}}}ErrorHandler.__dashjs_factory_name="ErrorHandler",r.default=l.default.getSingletonFactory(ErrorHandler)},"./src/streaming/utils/InitCache.js":
/*!******************************************!*\
    !*** ./src/streaming/utils/InitCache.js ***!
    \******************************************/
/*! exports provided: default */function srcStreamingUtilsInitCacheJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function InitCache(){var t={};var r={save:function save(r){var i=r.streamId,a=r.representationId;t[i]=t[i]||{},t[i][a]=r},extract:function extract(r,i){return t&&t[r]&&t[r][i]?t[r][i]:null},reset:function reset(){t={}}};return r}InitCache.__dashjs_factory_name="InitCache",r.default=a.default.getSingletonFactory(InitCache)},"./src/streaming/utils/IsoFile.js":
/*!****************************************!*\
    !*** ./src/streaming/utils/IsoFile.js ***!
    \****************************************/
/*! exports provided: default */function srcStreamingUtilsIsoFileJs(t,r,i){i.r(r);var a=i(/*! ../vo/IsoBox */"./src/streaming/vo/IsoBox.js"),u=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function IsoFile(){var t,r;function getBoxes(t){var i=[];if(!t||!r||"function"!=typeof r.fetchAll)return i;for(var a,u=r.fetchAll(t),l=0,c=u.length;l<c;l++)(a=convertToDashIsoBox(u[l]))&&i.push(a);return i}function convertToDashIsoBox(t){if(!t)return null;var r=new a.default(t);return t.hasOwnProperty("_incomplete")&&(r.isComplete=!t._incomplete),r}return t={getBox:function getBox(t){return t&&r&&r.boxes&&0!==r.boxes.length&&"function"==typeof r.fetch?convertToDashIsoBox(r.fetch(t)):null},getBoxes:getBoxes,setData:function setData(t){r=t},getLastBox:function getLastBox(){if(!r||!r.boxes||!r.boxes.length)return null;var t=getBoxes(r.boxes[r.boxes.length-1].type);return t.length>0?t[t.length-1]:null}},t}IsoFile.__dashjs_factory_name="IsoFile",r.default=u.default.getClassFactory(IsoFile)},"./src/streaming/utils/ObjectUtils.js":
/*!********************************************!*\
    !*** ./src/streaming/utils/ObjectUtils.js ***!
    \********************************************/
/*! exports provided: default */function srcStreamingUtilsObjectUtilsJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! fast-deep-equal */"./node_modules/fast-deep-equal/index.js"),l=i.n(u);function ObjectUtils(){return{areEqual:function areEqual(t,r){return l()(t,r)}}}ObjectUtils.__dashjs_factory_name="ObjectUtils",r.default=a.default.getSingletonFactory(ObjectUtils)},"./src/streaming/utils/RequestModifier.js":
/*!************************************************!*\
    !*** ./src/streaming/utils/RequestModifier.js ***!
    \************************************************/
/*! exports provided: default */function srcStreamingUtilsRequestModifierJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js");function RequestModifier(){return{modifyRequestURL:function modifyRequestURL(t){return t},modifyRequestHeader:function modifyRequestHeader(t){return t}}}RequestModifier.__dashjs_factory_name="RequestModifier",r.default=a.default.getSingletonFactory(RequestModifier)},"./src/streaming/utils/SupervisorTools.js":
/*!************************************************!*\
    !*** ./src/streaming/utils/SupervisorTools.js ***!
    \************************************************/
/*! exports provided: checkParameterType, checkInteger, checkRange, checkIsVideoOrAudioType */function srcStreamingUtilsSupervisorToolsJs(t,r,i){i.r(r),i.d(r,"checkParameterType",(function(){return checkParameterType})),i.d(r,"checkInteger",(function(){return checkInteger})),i.d(r,"checkRange",(function(){return checkRange})),i.d(r,"checkIsVideoOrAudioType",(function(){return checkIsVideoOrAudioType}));var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function checkParameterType(t,r){if(_typeof(t)!==r)throw a.default.BAD_ARGUMENT_ERROR}function checkInteger(t){if(!(null!==t&&!isNaN(t)&&t%1==0))throw a.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function checkRange(t,r,i){if(t<r||t>i)throw a.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function checkIsVideoOrAudioType(t){if("string"!=typeof t||t!==a.default.AUDIO&&t!==a.default.VIDEO)throw a.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":
/*!*******************************************!*\
    !*** ./src/streaming/utils/TTMLParser.js ***!
    \*******************************************/
/*! exports provided: default */function srcStreamingUtilsTTMLParserJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/Debug */"./src/core/Debug.js"),l=i(/*! ../../core/EventBus */"./src/core/EventBus.js"),c=i(/*! ../../core/events/Events */"./src/core/events/Events.js"),d=i(/*! imsc */"./node_modules/imsc/src/main/js/main.js"),g=i(/*! ../MediaPlayerEvents */"./src/streaming/MediaPlayerEvents.js"),p=i(/*! ../constants/ConformanceViolationConstants */"./src/streaming/constants/ConformanceViolationConstants.js");function TTMLParser(){var t,r,i=this.context,a=Object(l.default)(i).getInstance(),m=0;function getCueID(){var t="cue_TTML_"+m;return m++,t}return t={parse:function parse(t,i,u,l,m){var v,b,M,S="",E=[],I={},D={},A="",C="",N={onOpenTag:function onOpenTag(t,i,u){if(u[" imagetype"]&&!u[" imageType"]&&(a.trigger(g.default.CONFORMANCE_VIOLATION,{level:p.default.LEVELS.ERROR,event:p.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),u[" imageType"]=u[" imagetype"]),"image"===i&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===t||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===t)){if(!u[" imageType"]||"PNG"!==u[" imageType"].value)return void r.warn("smpte-tt imageType != PNG. Discarded");A=u["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function onCloseTag(){A&&(D[A]=C.trim()),C="",A=""},onText:function onText(t){A&&(C+=t)}};if(!t)throw S="no ttml data to parse",new Error(S);I.data=t,a.trigger(c.default.TTML_TO_PARSE,I);var k=Object(d.fromXML)(I.data,(function(t){S=t}),N);a.trigger(c.default.TTML_PARSED,{ttmlString:I.data,ttmlDoc:k});var O=k.getMediaTimeEvents();for(M=0;M<O.length;M++){var L=Object(d.generateISD)(k,O[M],(function(t){S=t}));L.contents.some((function(t){return t.contents.length}))&&(v=O[M]+i<u?u:O[M]+i)<(b=O[M+1]+i>l?l:O[M+1]+i)&&E.push({start:v,end:b,type:"html",cueID:getCueID(),isd:L,images:m,embeddedImages:D})}if(""!==S)throw r.error(S),new Error(S);return E}},function setup(){r=Object(u.default)(i).getInstance().getLogger(t)}(),t}TTMLParser.__dashjs_factory_name="TTMLParser",r.default=a.default.getSingletonFactory(TTMLParser)},"./src/streaming/utils/URLUtils.js":
/*!*****************************************!*\
    !*** ./src/streaming/utils/URLUtils.js ***!
    \*****************************************/
/*! exports provided: default */function srcStreamingUtilsURLUtilsJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ./DefaultURLUtils */"./src/streaming/utils/DefaultURLUtils.js");function URLUtils(){var t,r,i=[],a=this.context;function internalCall(t,a,u){var l=function getUtils(t){var a;for(a=0;a<i.length;a++)if(i[a].regex.test(t))return i[a].utils;return r}(u||a);return l&&"function"==typeof l[t]?l[t](a,u):r[t](a,u)}return function setup(){r=Object(u.default)(a).getInstance()}(),t={registerUrlRegex:function registerUrlRegex(t,r){i.push({regex:t,utils:r})},parseBaseUrl:function parseBaseUrl(t){return internalCall("parseBaseUrl",t)},parseOrigin:function parseOrigin(t){return internalCall("parseOrigin",t)},parseScheme:function parseScheme(t){return internalCall("parseScheme",t)},isRelative:function isRelative(t){return internalCall("isRelative",t)},isPathAbsolute:function isPathAbsolute(t){return internalCall("isPathAbsolute",t)},isSchemeRelative:function isSchemeRelative(t){return internalCall("isSchemeRelative",t)},isHTTPURL:function isHTTPURL(t){return internalCall("isHTTPURL",t)},isHTTPS:function isHTTPS(t){return internalCall("isHTTPS",t)},removeHostname:function removeHostname(t){return internalCall("removeHostname",t)},resolve:function resolve(t,r){return internalCall("resolve",t,r)}},t}URLUtils.__dashjs_factory_name="URLUtils";var l=a.default.getSingletonFactory(URLUtils);r.default=l},"./src/streaming/utils/VTTParser.js":
/*!******************************************!*\
    !*** ./src/streaming/utils/VTTParser.js ***!
    \******************************************/
/*! exports provided: default */function srcStreamingUtilsVTTParserJs(t,r,i){i.r(r);var a=i(/*! ../../core/FactoryMaker */"./src/core/FactoryMaker.js"),u=i(/*! ../../core/Debug */"./src/core/Debug.js");function VTTParser(){var t,r,i,a,l,c,d=this.context;function convertCuePointTimes(t){var r=t.split(":"),i=r.length-1;return t=60*parseInt(r[i-1],10)+parseFloat(r[i]),2===i&&(t+=3600*parseInt(r[0],10)),t}function parseItemAttributes(t){var r=t.split(a),i=r[1].split(c);return i.shift(),r[1]=i[0],i.shift(),{cuePoints:r,styles:getCaptionStyles(i)}}function getCaptionStyles(t){var r={};return t.forEach((function(t){if(t.split(/:/).length>1){var i=t.split(/:/)[1];i&&-1!=i.search(/%/)&&(i=parseInt(i.replace(/%/,""),10)),(t.match(/align/)||t.match(/A/))&&(r.align=i),(t.match(/line/)||t.match(/L/))&&(r.line=i),(t.match(/position/)||t.match(/P/))&&(r.position=i),(t.match(/size/)||t.match(/S/))&&(r.size=i)}})),r}function getSublines(t,r){for(var i,u=r,l="",c="";""!==t[u]&&u<t.length;)u++;if((i=u-r)>1)for(var d=0;d<i;d++){if((c=t[r+d]).match(a)){l="";break}l+=c,d!==i-1&&(l+="\n")}else(c=t[r]).match(a)||(l=c);return l}return t={parse:function parse(t){var u,c,d=[];if(!t)return d;u=(t=t.split(i)).length,c=-1;for(var g=0;g<u;g++){var p=t[g];if(p.length>0&&"WEBVTT"!==p&&p.match(a)){var m=parseItemAttributes(p),v=m.cuePoints,b=m.styles,M=getSublines(t,g+1),S=convertCuePointTimes(v[0].replace(l,"")),E=convertCuePointTimes(v[1].replace(l,""));!isNaN(S)&&!isNaN(E)&&S>=c&&E>S?""!==M?(c=S,d.push({start:S,end:E,data:M,styles:b})):r.error("Skipping cue due to empty/malformed cue text"):r.error("Skipping cue due to incorrect cue timing")}}return d}},function setup(){r=Object(u.default)(d).getInstance().getLogger(t),i=/(?:\r\n|\r|\n)/gm,a=/-->/,l=/(^[\s]+|[\s]+$)/g,c=/\s\b/g}(),t}VTTParser.__dashjs_factory_name="VTTParser",r.default=a.default.getSingletonFactory(VTTParser)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":
/*!****************************************************************!*\
    !*** ./src/streaming/utils/baseUrlResolution/BasicSelector.js ***!
    \****************************************************************/
/*! exports provided: default */function srcStreamingUtilsBaseUrlResolutionBasicSelectorJs(t,r,i){i.r(r);var a=i(/*! ../../../core/FactoryMaker */"./src/core/FactoryMaker.js");function BasicSelector(t){var r,i=(t=t||{}).blacklistController;return r={select:function select(t){var r,a=0;return t&&t.some((function(t,r){return a=r,!i.contains(t.serviceLocation)}))&&(r=t[a]),r}},r}BasicSelector.__dashjs_factory_name="BasicSelector",r.default=a.default.getClassFactory(BasicSelector)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":
/*!**************************************************************!*\
    !*** ./src/streaming/utils/baseUrlResolution/DVBSelector.js ***!
    \**************************************************************/
/*! exports provided: default */function srcStreamingUtilsBaseUrlResolutionDVBSelectorJs(t,r,i){i.r(r);var a=i(/*! ../../../core/FactoryMaker */"./src/core/FactoryMaker.js");function DVBSelector(t){var r,i=(t=t||{}).blacklistController;return r={select:function select(t){return t&&function selectByWeight(t){var r,i,a=0,u=[],l=0;if(i=t.sort((function prioritySorter(t,r){var i=t.dvb_priority-r.dvb_priority;return isNaN(i)?0:i})).filter((function topPriorityFilter(t,r,i){return!r||i[0].dvb_priority&&t.dvb_priority&&i[0].dvb_priority===t.dvb_priority})),i.length)return i.length>1&&(i.forEach((function(t){a+=t.dvb_weight,u.push(a)})),r=Math.floor(Math.random()*(a-1)),u.every((function(t,i){return l=i,!(r<t)}))),i[l]}(function getNonBlacklistedBaseUrls(t){var r=[];return t.filter((function serviceLocationFilter(t){return!i.contains(t.serviceLocation)||(t.dvb_priority&&r.push(t.dvb_priority),!1)})).filter((function samePrioritiesFilter(t){return!r.length||!t.dvb_priority||-1===r.indexOf(t.dvb_priority)}))}(t))}},r}DVBSelector.__dashjs_factory_name="DVBSelector",r.default=a.default.getClassFactory(DVBSelector)},"./src/streaming/vo/BitrateInfo.js":
/*!*****************************************!*\
    !*** ./src/streaming/vo/BitrateInfo.js ***!
    \*****************************************/
/*! exports provided: default */function srcStreamingVoBitrateInfoJs(t,r,i){i.r(r);r.default=function BitrateInfo(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BitrateInfo),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}},"./src/streaming/vo/DashJSError.js":
/*!*****************************************!*\
    !*** ./src/streaming/vo/DashJSError.js ***!
    \*****************************************/
/*! exports provided: default */function srcStreamingVoDashJSErrorJs(t,r,i){i.r(r);r.default=function DashJSError(t,r,i){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DashJSError),this.code=t||null,this.message=r||null,this.data=i||null}},"./src/streaming/vo/DataChunk.js":
/*!***************************************!*\
    !*** ./src/streaming/vo/DataChunk.js ***!
    \***************************************/
/*! exports provided: default */function srcStreamingVoDataChunkJs(t,r,i){i.r(r);r.default=function DataChunk(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DataChunk),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}},"./src/streaming/vo/FragmentRequest.js":
/*!*********************************************!*\
    !*** ./src/streaming/vo/FragmentRequest.js ***!
    \*********************************************/
/*! exports provided: default */function srcStreamingVoFragmentRequestJs(t,r,i){i.r(r);var a=i(/*! ../vo/metrics/HTTPRequest */"./src/streaming/vo/metrics/HTTPRequest.js");function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function FragmentRequest(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,FragmentRequest),this.action=FragmentRequest.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=t||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(FragmentRequest,[{key:"isInitializationRequest",value:function isInitializationRequest(){return this.type&&this.type===a.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function setInfo(t){this.type=t&&t.init?a.HTTPRequest.INIT_SEGMENT_TYPE:a.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=t&&t.url?t.url:null,this.range=t&&t.range?t.range.start+"-"+t.range.end:null,this.mediaType=t&&t.mediaType?t.mediaType:null}}]),FragmentRequest}();u.ACTION_DOWNLOAD="download",u.ACTION_COMPLETE="complete",r.default=u},"./src/streaming/vo/HeadRequest.js":
/*!*****************************************!*\
    !*** ./src/streaming/vo/HeadRequest.js ***!
    \*****************************************/
/*! exports provided: default */function srcStreamingVoHeadRequestJs(t,r,i){function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}i.r(r);var a=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(HeadRequest,t);var r=_createSuper(HeadRequest);function HeadRequest(t){var i;return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,HeadRequest),(i=r.call(this,t)).checkForExistenceOnly=!0,i}return HeadRequest}(i(/*! ./FragmentRequest */"./src/streaming/vo/FragmentRequest.js").default);r.default=a},"./src/streaming/vo/IsoBox.js":
/*!************************************!*\
    !*** ./src/streaming/vo/IsoBox.js ***!
    \************************************/
/*! exports provided: default */function srcStreamingVoIsoBoxJs(t,r,i){function _defineProperties(t,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(r);var a=function(){function IsoBox(t){if(function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,IsoBox),this.offset=t._offset,this.type=t.type,this.size=t.size,this.boxes=[],t.boxes)for(var r=0;r<t.boxes.length;r++)this.boxes.push(new IsoBox(t.boxes[r]));switch(this.isComplete=!0,t.type){case"sidx":if(this.timescale=t.timescale,this.earliest_presentation_time=t.earliest_presentation_time,this.first_offset=t.first_offset,this.references=t.references,t.references){this.references=[];for(var i=0;i<t.references.length;i++){var a={reference_type:t.references[i].reference_type,referenced_size:t.references[i].referenced_size,subsegment_duration:t.references[i].subsegment_duration};this.references.push(a)}}break;case"emsg":this.id=t.id,this.version=1===t.version?1:0,this.value=t.value,this.timescale=t.timescale,this.scheme_id_uri=t.scheme_id_uri,this.presentation_time_delta=1===t.version?t.presentation_time:t.presentation_time_delta,this.event_duration=t.event_duration,this.message_data=t.message_data;break;case"mdhd":this.timescale=t.timescale;break;case"mfhd":this.sequence_number=t.sequence_number;break;case"subs":this.entry_count=t.entry_count,this.entries=t.entries;break;case"tfhd":this.base_data_offset=t.base_data_offset,this.sample_description_index=t.sample_description_index,this.default_sample_duration=t.default_sample_duration,this.default_sample_size=t.default_sample_size,this.default_sample_flags=t.default_sample_flags,this.flags=t.flags;break;case"tfdt":this.version=t.version,this.baseMediaDecodeTime=t.baseMediaDecodeTime,this.flags=t.flags;break;case"trun":if(this.sample_count=t.sample_count,this.first_sample_flags=t.first_sample_flags,this.data_offset=t.data_offset,this.flags=t.flags,this.samples=t.samples,t.samples){this.samples=[];for(var u=0,l=t.samples.length;u<l;u++){var c={sample_size:t.samples[u].sample_size,sample_duration:t.samples[u].sample_duration,sample_composition_time_offset:t.samples[u].sample_composition_time_offset};this.samples.push(c)}}}}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}(IsoBox,[{key:"getChildBox",value:function getChildBox(t){for(var r=0;r<this.boxes.length;r++)if(this.boxes[r].type===t)return this.boxes[r]}},{key:"getChildBoxes",value:function getChildBoxes(t){for(var r=[],i=0;i<this.boxes.length;i++)this.boxes[i].type===t&&r.push(this.boxes[i]);return r}}]),IsoBox}();r.default=a},"./src/streaming/vo/IsoBoxSearchInfo.js":
/*!**********************************************!*\
    !*** ./src/streaming/vo/IsoBoxSearchInfo.js ***!
    \**********************************************/
/*! exports provided: default */function srcStreamingVoIsoBoxSearchInfoJs(t,r,i){i.r(r);r.default=function IsoBoxSearchInfo(t,r,i){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,IsoBoxSearchInfo),this.lastCompletedOffset=t,this.found=r,this.size=i}},"./src/streaming/vo/MetricsList.js":
/*!*****************************************!*\
    !*** ./src/streaming/vo/MetricsList.js ***!
    \*****************************************/
/*! exports provided: default */function srcStreamingVoMetricsListJs(t,r,i){i.r(r);r.default=function MetricsList(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MetricsList),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},"./src/streaming/vo/TextRequest.js":
/*!*****************************************!*\
    !*** ./src/streaming/vo/TextRequest.js ***!
    \*****************************************/
/*! exports provided: default */function srcStreamingVoTextRequestJs(t,r,i){i.r(r);var a=i(/*! ../constants/Constants */"./src/streaming/constants/Constants.js");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var u=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(TextRequest,t);var r=_createSuper(TextRequest);function TextRequest(t,i){var u;return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TextRequest),(u=r.call(this)).url=t||null,u.type=i||null,u.mediaType=a.default.STREAM,u.responseType="",u}return TextRequest}(i(/*! ./FragmentRequest */"./src/streaming/vo/FragmentRequest.js").default);r.default=u},"./src/streaming/vo/TextTrackInfo.js":
/*!*******************************************!*\
    !*** ./src/streaming/vo/TextTrackInfo.js ***!
    \*******************************************/
/*! exports provided: default */function srcStreamingVoTextTrackInfoJs(t,r,i){function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,a=_getPrototypeOf(t);if(r){var u=_getPrototypeOf(this).constructor;i=Reflect.construct(a,arguments,u)}else i=a.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}i.r(r);var a=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(TextTrackInfo,t);var r=_createSuper(TextTrackInfo);function TextTrackInfo(){var t;return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TextTrackInfo),(t=r.call(this)).captionData=null,t.label=null,t.defaultTrack=!1,t.kind=null,t.isFragmented=!1,t.isEmbedded=!1,t.isTTML=null,t}return TextTrackInfo}(i(/*! ./../../dash/vo/MediaInfo */"./src/dash/vo/MediaInfo.js").default);r.default=a},"./src/streaming/vo/Thumbnail.js":
/*!***************************************!*\
    !*** ./src/streaming/vo/Thumbnail.js ***!
    \***************************************/
/*! exports provided: default */function srcStreamingVoThumbnailJs(t,r,i){i.r(r);r.default=function Thumbnail(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Thumbnail),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},"./src/streaming/vo/ThumbnailTrackInfo.js":
/*!************************************************!*\
    !*** ./src/streaming/vo/ThumbnailTrackInfo.js ***!
    \************************************************/
/*! exports provided: default */function srcStreamingVoThumbnailTrackInfoJs(t,r,i){i.r(r);r.default=function ThumbnailTrackInfo(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ThumbnailTrackInfo),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},"./src/streaming/vo/URIFragmentData.js":
/*!*********************************************!*\
    !*** ./src/streaming/vo/URIFragmentData.js ***!
    \*********************************************/
/*! exports provided: default */function srcStreamingVoURIFragmentDataJs(t,r,i){i.r(r);r.default=function URIFragmentData(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,URIFragmentData),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}},"./src/streaming/vo/metrics/BufferLevel.js":
/*!*************************************************!*\
    !*** ./src/streaming/vo/metrics/BufferLevel.js ***!
    \*************************************************/
/*! exports provided: default */function srcStreamingVoMetricsBufferLevelJs(t,r,i){i.r(r);r.default=function BufferLevel(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BufferLevel),this.t=null,this.level=null}},"./src/streaming/vo/metrics/BufferState.js":
/*!*************************************************!*\
    !*** ./src/streaming/vo/metrics/BufferState.js ***!
    \*************************************************/
/*! exports provided: default */function srcStreamingVoMetricsBufferStateJs(t,r,i){i.r(r);var a=i(/*! ../../constants/MetricsConstants */"./src/streaming/constants/MetricsConstants.js");r.default=function BufferState(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BufferState),this.target=null,this.state=a.default.BUFFER_EMPTY}},"./src/streaming/vo/metrics/DVRInfo.js":
/*!*********************************************!*\
    !*** ./src/streaming/vo/metrics/DVRInfo.js ***!
    \*********************************************/
/*! exports provided: default */function srcStreamingVoMetricsDVRInfoJs(t,r,i){i.r(r);r.default=function DVRInfo(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DVRInfo),this.time=null,this.range=null,this.manifestInfo=null}},"./src/streaming/vo/metrics/DroppedFrames.js":
/*!***************************************************!*\
    !*** ./src/streaming/vo/metrics/DroppedFrames.js ***!
    \***************************************************/
/*! exports provided: default */function srcStreamingVoMetricsDroppedFramesJs(t,r,i){i.r(r);r.default=function DroppedFrames(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DroppedFrames),this.time=null,this.droppedFrames=null}},"./src/streaming/vo/metrics/HTTPRequest.js":
/*!*************************************************!*\
    !*** ./src/streaming/vo/metrics/HTTPRequest.js ***!
    \*************************************************/
/*! exports provided: HTTPRequest, HTTPRequestTrace */function srcStreamingVoMetricsHTTPRequestJs(t,r,i){function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}i.r(r),i.d(r,"HTTPRequest",(function(){return a})),i.d(r,"HTTPRequestTrace",(function(){return u}));var a=function HTTPRequest(){_classCallCheck(this,HTTPRequest),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},u=function HTTPRequestTrace(){_classCallCheck(this,HTTPRequestTrace),this.s=null,this.d=null,this.b=[],this._t=null};a.GET="GET",a.HEAD="HEAD",a.MPD_TYPE="MPD",a.XLINK_EXPANSION_TYPE="XLinkExpansion",a.INIT_SEGMENT_TYPE="InitializationSegment",a.INDEX_SEGMENT_TYPE="IndexSegment",a.MEDIA_SEGMENT_TYPE="MediaSegment",a.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",a.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",a.DVB_REPORTING_TYPE="DVBReporting",a.LICENSE="license",a.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":
/*!****************************************************!*\
    !*** ./src/streaming/vo/metrics/ManifestUpdate.js ***!
    \****************************************************/
/*! exports provided: ManifestUpdate, ManifestUpdateStreamInfo, ManifestUpdateRepresentationInfo */function srcStreamingVoMetricsManifestUpdateJs(t,r,i){function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}i.r(r),i.d(r,"ManifestUpdate",(function(){return a})),i.d(r,"ManifestUpdateStreamInfo",(function(){return u})),i.d(r,"ManifestUpdateRepresentationInfo",(function(){return l}));var a=function ManifestUpdate(){_classCallCheck(this,ManifestUpdate),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},u=function ManifestUpdateStreamInfo(){_classCallCheck(this,ManifestUpdateStreamInfo),this.id=null,this.index=null,this.start=null,this.duration=null},l=function ManifestUpdateRepresentationInfo(){_classCallCheck(this,ManifestUpdateRepresentationInfo),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},"./src/streaming/vo/metrics/PlayList.js":
/*!**********************************************!*\
    !*** ./src/streaming/vo/metrics/PlayList.js ***!
    \**********************************************/
/*! exports provided: PlayList, PlayListTrace */function srcStreamingVoMetricsPlayListJs(t,r,i){function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}i.r(r),i.d(r,"PlayList",(function(){return a})),i.d(r,"PlayListTrace",(function(){return u}));var a=function PlayList(){_classCallCheck(this,PlayList),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};a.INITIAL_PLAYOUT_START_REASON="initial_playout",a.SEEK_START_REASON="seek",a.RESUME_FROM_PAUSE_START_REASON="resume",a.METRICS_COLLECTION_START_REASON="metrics_collection_start";var u=function PlayListTrace(){_classCallCheck(this,PlayListTrace),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};u.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",u.REBUFFERING_REASON="rebuffering",u.USER_REQUEST_STOP_REASON="user_request",u.END_OF_PERIOD_STOP_REASON="end_of_period",u.END_OF_CONTENT_STOP_REASON="end_of_content",u.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",u.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":
/*!**********************************************************!*\
    !*** ./src/streaming/vo/metrics/RepresentationSwitch.js ***!
    \**********************************************************/
/*! exports provided: default */function srcStreamingVoMetricsRepresentationSwitchJs(t,r,i){i.r(r);r.default=function RepresentationSwitch(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,RepresentationSwitch),this.t=null,this.mt=null,this.to=null,this.lto=null}},"./src/streaming/vo/metrics/RequestsQueue.js":
/*!***************************************************!*\
    !*** ./src/streaming/vo/metrics/RequestsQueue.js ***!
    \***************************************************/
/*! exports provided: default */function srcStreamingVoMetricsRequestsQueueJs(t,r,i){i.r(r);r.default=function RequestsQueue(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,RequestsQueue),this.loadingRequests=[],this.executedRequests=[]}},"./src/streaming/vo/metrics/SchedulingInfo.js":
/*!****************************************************!*\
    !*** ./src/streaming/vo/metrics/SchedulingInfo.js ***!
    \****************************************************/
/*! exports provided: default */function srcStreamingVoMetricsSchedulingInfoJs(t,r,i){i.r(r);r.default=function SchedulingInfo(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,SchedulingInfo),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null}},0:
/*!**********************!*\
    !*** util (ignored) ***!
    \**********************/
/*! no static exports found */function _(t,r){},1:
/*!**********************!*\
    !*** util (ignored) ***!
    \**********************/
/*! no static exports found */function _(t,r){}}).default}))}(DN);var AN=getDefaultExportFromCjs(DN.exports),CN=null,NN={debug:{logLevel:AN.Debug.LOG_LEVEL_NONE},streaming:{scheduling:{scheduleWhilePaused:!1},buffer:{fastSwitchEnabled:!0}}},xN=function unload(t){CN&&CN.destroy&&CN.destroy instanceof Function&&(CN.destroy(),CN=null),t.removeAttribute("src"),t.load()},kN=function loader(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a){var u=_objectSpread2({},i),l=u.protectionData||null;delete u.protectionData,xN(r),(CN=AN.MediaPlayer().create()).updateSettings(_objectSpread2(_objectSpread2({},NN),u)),CN.initialize(),CN.attachView(r),l&&CN.setProtectionData(l),CN.on(AN.MediaPlayer.events.MANIFEST_LOADED,(function(){return a()})),CN.on(AN.MediaPlayer.events.ERROR,(function(t){ln._consumer&&(ln._consumer.fire("$videoPlayerError",t,ln.currentTime),ln._consumer.fire("$videoPlayerEvent","Error",t,ln.currentTime)),ln.close()})),CN.attachSource(t)}))},wN=function unloader(t){return new Promise((function(r){xN(t),r()}))},ON=null,LN=null,RN=null,jN={open:function open(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=_objectSpread2({},r);if(LN=i.forceFormat||uN.detectFormat(t),delete i.forceFormat,ON===oN)vN.consumer(RN),vN.open(t,i);else{switch(LN){case aN:throw"Unable to detect format or incompatible format detected. Please check the URL or set the format using the forceFormat attribute in options eg. {forceFormat: Format.HLS}";case tN:ln.loader(EN),ln.unloader(IN);break;case rN:case nN:ln.loader(kN),ln.unloader(wN);break;default:ln.loader(null),ln.unloader(null)}ln.consumer(RN),ln.open(t,i)}},close:function close(){if(ON===oN)vN.close();else ln.close();LN=null},consumer:function consumer(t){RN=t},get currentFormat(){return LN}},PN=function setup(t){ON=uN.detectPlayer(),g("Player",ON);var r=autoSetupMixin(t),i=[].concat(_toConsumableArray(Object.keys(t)),["loader","unloader"]),a=function detectRelayObject(){return ON===oN?vN:ln}();return Object.keys(a).filter((function(t){return!i.includes(t)})).reduce((function(t,r){switch(!0){case a[r]instanceof Function:Object.defineProperty(t,r,{value:function value(){for(var t=arguments.length,i=new Array(t),u=0;u<t;u++)i[u]=arguments[u];return a[r].apply(a,i)}});break;case Object.getOwnPropertyDescriptor(a,r).get instanceof Function:Object.defineProperty(t,r,{get:function get(){return a[r]}});break;case Object.getOwnPropertyDescriptor(a,r).set instanceof Function:Object.defineProperty(t,r,{set:function set(){for(var t=arguments.length,i=new Array(t),u=0;u<t;u++)i[u]=arguments[u];return a[r].apply(a,i)}});break;default:t[r]=a[r]}return t}),r)}(jN),FN="visible",BN="invisible",UN="fadingIn",zN="fadingOut",YN="autoPlayNext",GN="contentRating",HN="playback",QN="relatedContent",VN="subtitleSidebar",WN=function(t){_inherits(EmptyCard,t);var r=_createSuper(EmptyCard);function EmptyCard(){return _classCallCheck(this,EmptyCard),r.apply(this,arguments)}return _createClass(EmptyCard,[{key:"_handleEnter",value:function _handleEnter(){this.fireAncestors("$setView",HN)}},{key:"announce",get:function get(){return"Return to video player"}}],[{key:"_template",value:function _template(){return{Card:{Borders:KE(EmptyCard.width,EmptyCard.height)}}}},{key:"width",get:function get(){return 321}},{key:"height",get:function get(){return 181}}]),EmptyCard}(cI),$N=function(t){_inherits(CountdownShader,t);var r=_createSuper(CountdownShader);function CountdownShader(t){var i;return _classCallCheck(this,CountdownShader),(i=r.call(this,t))._progress=1,i._stroke=20,i._c=4294967295,i._normalizedC=i._getNormalizedColor(i._c),i._bc=16777215,i._normalizedBC=i._getNormalizedColor(i._bc),i}return _createClass(CountdownShader,[{key:"progress",value:function progress(t){this._progress=1-t,this.redraw()}},{key:"setupUniforms",value:function setupUniforms(t){_get(_getPrototypeOf(CountdownShader.prototype),"setupUniforms",this).call(this,t);var r=t.shaderOwner,i=this._radius||r._w/2;0===this._stroke&&(this._stroke=.33*i),this._setUniform("resolution",new Float32Array([r._w,r._h]),this.gl.uniform2fv),this._setUniform("color",this._normalizedC,this.gl.uniform4fv),this._setUniform("backgroundColor",this._normalizedBC,this.gl.uniform4fv),this._setUniform("radius",i,this.gl.uniform1f),this._setUniform("stroke",this._stroke,this.gl.uniform1f),this._setUniform("progress",this._progress,this.gl.uniform1f),this._sc===this._bc&&this._stroke===.5*i||this.redraw()}}]),CountdownShader}(j.shaders.Spinner2);$N.fragmentShaderSource='\n  #ifdef GL_ES\n  # ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  # else\n  precision lowp float;\n  # endif\n  #endif\n\n  #define PI 3.1415926536\n  #define TWO_PI 6.2831853072\n\n  varying vec2 vTextureCoord;\n  varying vec4 vColor;\n\n  uniform sampler2D uSampler;\n  uniform vec2 resolution;\n  uniform vec4 color;\n  uniform vec4 backgroundColor;\n  uniform float radius;\n  uniform float stroke;\n  uniform float progress;\n\n  float circleDist(vec2 p, float radius) {\n    return length(p) - radius;\n  }\n\n  float fillMask(float dist) {\n    return clamp(-dist, 0.0, 1.0);\n  }\n\n  float angleBetween(vec2 v1, vec2 v2) {\n    return atan( v1.x - v2.x, v1.y - v2.y ) + PI;\n  }\n\n  float getTargetAngle() {\n    return clamp( progress * TWO_PI, 0.0, TWO_PI );\n  }\n\n  // OpenGL uses upper left as origin by default\n  bool shouldDrawFragment(vec2 fragCoord) {\n    float targetAngle = getTargetAngle();\n\n    vec2 halfRes = 0.5 * resolution.xy;\n    vec2 center = vTextureCoord.xy * resolution - halfRes;\n\n    float a = angleBetween(center, fragCoord);\n\n    return a <= targetAngle;\n  }\n\n  void main() {\n    vec2 halfRes = 0.5 * resolution.xy;\n    vec2 center = vTextureCoord.xy * resolution - halfRes;\n\n    float c = max(-circleDist(center, radius - stroke), circleDist(center, radius));\n    float a = atan(center.x, center.y) * PI * 0.05 + 0.45;\n\n    vec4 cBase = mix(vec4(0.0), color, fillMask(c));\n    vec4 bcBase = mix(vec4(0.0), backgroundColor, fillMask(c));\n\n    // Either draws part of the circle in the "color" or "backgroundColor" (invisible)\n    if (shouldDrawFragment(vTextureCoord)) {\n      gl_FragColor = mix(cBase, color, fillMask(c) * a);\n    } else {\n      gl_FragColor = mix(bcBase, backgroundColor, fillMask(c) * a);\n    }\n  }\n';var KN=function(t){_inherits(Card,t);var r=_createSuper(Card);function Card(){var t;_classCallCheck(this,Card);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_progress",0),t}return _createClass(Card,[{key:"_init",value:function _init(){this._timeFromEnd=PE(15,["playback","chainPlaySqueezeback"],hE())}},{key:"item",set:function set(t){this._item=t;var r=this._item,i=r.title,a=r.description,u=PE("",["images","wallpaper"],this._item);u&&(u=Mg.reformatImageSrc(u,{w:Card.width})),this.patch({Card:{Image:{texture:Img(u).cover(Card.width,Card.height)}},Details:{Title:{text:{text:i}},Description:{text:{text:a}}}})}},{key:"duration",get:function get(){return this._duration},set:function set(t){this.tag("TimerText").patch({visible:Boolean(t)}),this.tag("TimerCircle").patch({visible:Boolean(t)}),this.tag("Overlay").patch({color:t?kg.colours.playerAutoNextCard:0}),this._duration=t}},{key:"currentTime",set:function set(t){if(this.duration){var r=this.duration-t;r>=0&&r<=this._timeFromEnd&&(this._progress=1-r/this._timeFromEnd,this.tag("TimerCircle").shader.progress(this._progress),this.tag("TimerText").patch({text:{text:"".concat(Math.round(r),"s")}}))}}},{key:"_handleEnter",value:function _handleEnter(){this.fireAncestors("$playNextAsset")}},{key:"announce",get:function get(){var t=this._item,r=t.title,i=t.description;return"".concat(Mg.pronounceTTS(r),", ").concat(i)}}],[{key:"_template",value:function _template(){return{Card:{Image:{x:0,y:0,w:Card.width,h:Card.height,zIndex:1},Borders:KE(Card.width,Card.height),Overlay:{x:0,y:0,w:Card.width,h:Card.height,zIndex:2,rect:!0,color:kg.colours.playerAutoNextCard},TimerText:{x:(Card.width-38)/2,y:(Card.height-42)/2,zIndex:3,text:_objectSpread2({text:""},kg.TextStyles.bodyCopy)}},TimerCircle:{w:80,h:80,x:(Card.width-80)/2,y:(Card.height-80)/2,zIndex:5,shader:{type:$N,radius:40,width:20,stroke:8},rect:!0},Details:{w:721,x:Card.width+18,flex:{direction:"column"},Title:{text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.h4),{},{lineHeight:42})},Description:{text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.bodyCopy),{},{wordWrapWidth:721,maxLines:4,lineHeight:42})}}}}},{key:"width",get:function get(){return 383}},{key:"height",get:function get(){return 215}},{key:"offset",get:function get(){return 0}}]),Card}(cI),qN=function(t){_inherits(AutoPlayNext,t);var r=_createSuper(AutoPlayNext);function AutoPlayNext(){var t;_classCallCheck(this,AutoPlayNext);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_shouldPlayerBeDisplayed",!0),t}return _createClass(AutoPlayNext,[{key:"shouldPlayerBeDisplayed",get:function get(){return this._shouldPlayerBeDisplayed},set:function set(t){this.tag("VideoCard").patch({visible:t}),this.tag("Background").patch({shader:t?{type:j.shaders.Hole,x:116,y:89,w:321,h:181}:null}),this.index=1,this._shouldPlayerBeDisplayed=t}},{key:"currentTime",set:function set(t){this.tag("NextAsset").currentTime=t}},{key:"duration",set:function set(t){this.tag("NextAsset").duration=t}},{key:"data",set:function set(t){var r=this,i=_slicedToArray(t,2),a=i[0],u=i[1],l=PE("",["images","wallpaper"],u);l&&this.tag("Background").patch({texture:Img(Mg.reformatImageSrc(l,{w:1920,h:1080})).cover(1920,1080)}),this.title=a.title,this.description=a.description,this.tag("NextAsset").item=a,this.tag("ButtonRow").items=[{callback:function callback(){return r.fireAncestors("$playNextAsset")},text:"Play Next Episode"},{callback:function callback(){return r.fireAncestors("$seeAllEpisodes")},text:"See All Episodes"}]}},{key:"_init",value:function _init(){this.index=1}},{key:"_getFocused",value:function _getFocused(){return 1===this.index?(0===this.tag("ButtonRow")._index?this.tag("NextAsset")._focus():1===this.tag("ButtonRow")._index&&this.tag("NextAsset")._unfocus(),this.tag("ButtonRow")):(this.tag("NextAsset")._unfocus(),this.tag("VideoCard"))}},{key:"_handleUp",value:function _handleUp(){return(this.index>0&&this.shouldPlayerBeDisplayed||this.index>1&&!this.shouldPlayerBeDisplayed)&&(this.index-=1),this.tag("NextAsset")._unfocus(),!0}},{key:"_handleDown",value:function _handleDown(){return this.index<1&&(this.index+=1),!0}},{key:"announce",get:function get(){return[this.tag("Heading").text.text,Mg.pronounceTTS(this.title)]}}],[{key:"_template",value:function _template(){return{y:549,x:685,Background:{y:-549,x:-685,w:1920,h:1080,zIndex:-1,shader:{type:j.shaders.Hole,x:116,y:89,w:321,h:181}},Overlay:{w:1920,h:1080,y:-549,x:-685,zIndex:1,rect:!0,colorBottom:"0xff000000",colorTop:"0x00000000"},Heading:{zIndex:2,text:_objectSpread2({text:"Next Episode"},kg.TextStyles.h2)},VideoCard:{y:-461,x:-570,type:WN},NextAsset:{zIndex:2,y:74,type:KN},ButtonRow:{zIndex:2,h:QA.height,y:74+KN.height,type:QA}}}}]),AutoPlayNext}(j.Component),XN=function(t){_inherits(ContentRating,t);var r=_createSuper(ContentRating);function ContentRating(){return _classCallCheck(this,ContentRating),r.apply(this,arguments)}return _createClass(ContentRating,[{key:"item",set:function set(t){var r=PE("",["classification","name"],t),i=PE("",["advisoryText"],t);this.rating=r,this.descriptor=i,this.patch({Rating:{Text:{text:{text:r}}},Descriptor:{visible:!!i,text:{text:i}}})}},{key:"_focus",value:function _focus(){var t=this;this.setSmooth("alpha",1,{duration:.75}),this.timeout=setTimeout((function(){t.anim=t.setSmooth("alpha",0,{duration:.75}),t.anim.once("finish",(function(){t.parent.view=HN}))}),5e3)}},{key:"_unfocus",value:function _unfocus(){this.timeout&&clearTimeout(this.timeout),this.anim&&(this.anim.stop(),this.anim.removeAllListeners("finish"))}},{key:"announce",get:function get(){return["Rated ".concat(this.rating,"."),"".concat(this.descriptor)]}}],[{key:"_template",value:function _template(){return{w:1920,h:500,alpha:0,rect:!0,colorTop:kg.colours.playerOverlayStart,colorBottom:kg.colours.playerOverlayEnd,flex:{direction:"column"},Rating:{y:88,x:115,flex:{direction:"row",alignItems:"center"},Block:{zIndex:2,h:45,w:10,color:kg.colours.lightBlue500,rect:!0,flexItem:{marginBottom:6,marginRight:15}},Text:{flexItem:{marginTop:3,marginRight:15},zIndex:2,text:_objectSpread2(_objectSpread2({},kg.TextStyles.h3),{},{lineheight:45})}},Descriptor:{y:106,x:115,flexItem:{marginLeft:20,marginRight:20},zIndex:2,text:_objectSpread2(_objectSpread2({},kg.TextStyles.bodyCopy),{},{lineHeight:1.5*kg.TextStyles.bodyCopy.fontSize,wordWrap:!0,wordWrapWidth:845})}}}}]),ContentRating}(j.Component),ZN=function(t){_inherits(Card,t);var r=_createSuper(Card);function Card(){return _classCallCheck(this,Card),r.apply(this,arguments)}return _createClass(Card,[{key:"item",get:function get(){return this._item||{}},set:function set(t){this._item=t;var r=this._item,i=r.description,a=r.imageSrc,u=r.title;this.patch({Title:{Text:{text:{text:u}}},Card:{y:72,Image:{texture:Img(a).cover(1.5*Card.width,1.5*Card.height)}},Description:{text:{text:i}}})}},{key:"_init",value:function _init(){this._animation=this.tag("Card").animation({duration:.25,stopMethod:"reverse",stopDuration:.125,actions:[{p:"scale",v:{0:1,1:1.5}},{p:"h",v:{0:Card.height,1:1.5*Card.height}},{p:"y",v:{0:72,1:0}}]}),this._titleAnimation=this.tag("Title").animation({duration:.25,stopMethod:"reverse",stopDuration:.125,actions:[{p:"y",v:{0:72,1:0}}]})}},{key:"_focus",value:function _focus(){_get(_getPrototypeOf(Card.prototype),"_focus",this).call(this),this._animation.start(),this._titleAnimation.start(),this.tag("Description").patch({visible:!0}),this.tag("Title").patch({Text:{text:{wordWrapWidth:380}}})}},{key:"_unfocus",value:function _unfocus(){_get(_getPrototypeOf(Card.prototype),"_unfocus",this).call(this),this._animation.stop(),this._titleAnimation.stop(),this.tag("Description").patch({visible:!1}),this.tag("Title").patch({Text:{text:{wordWrapWidth:265}}})}},{key:"_handleEnter",value:function _handleEnter(){return this.fireAncestors("$close"),Cr.navigate("dynamic/".concat(lE(this.item.path))),!0}},{key:"announce",get:function get(){var t=this._item,r=t.title,i=t.description;return"".concat(Mg.pronounceTTS(r),", ").concat(i)}}],[{key:"offset",get:function get(){return 30}},{key:"_template",value:function _template(){return{flex:{direction:"column",justifyContent:"flex-end"},Title:{y:72,h:64,Text:{y:64,mountY:1,text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.h4),{},{wordWrapWidth:265,lineHeight:32,verticalAlign:"middle",maxLines:2})}},Card:{h:Card.height,pivot:0,flexItem:{marginTop:16,marginBottom:32},Image:{x:0,y:0,w:Card.width,h:Card.height,zIndex:1},Borders:KE(Card.width,Card.height)},Description:{visible:!1,text:_objectSpread2({text:"",wordWrapWidth:380,lineHeight:28},kg.TextStyles.smallCopy)}}}},{key:"width",get:function get(){return 265}},{key:"height",get:function get(){return 150}}]),Card}(cI),JN=function(t){_inherits(RelatedContent,t);var r=_createSuper(RelatedContent);function RelatedContent(){var t;_classCallCheck(this,RelatedContent);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_shouldPlayerBeDisplayed",!0),t}return _createClass(RelatedContent,[{key:"data",set:function set(t){var r=this,i=_slicedToArray(t,2),a=i[0],u=i[1],l=PE("",["images","wallpaper"],u);l&&this.tag("Background").patch({texture:Img(Mg.reformatImageSrc(l,{w:1920,h:1080})).cover(1920,1080)});var c=JD(a).map((function(t,i){return{x:r._calcXPos(i),type:ZN,item:t}}));this.tag("Items").add(c)}},{key:"shouldPlayerBeDisplayed",get:function get(){return this._shouldPlayerBeDisplayed},set:function set(t){this.tag("VideoCard").patch({visible:t}),this.tag("Background").patch({shader:t?{type:j.shaders.Hole,x:116,y:89,w:321,h:181}:null}),this.index=0,this._verticalIndex=1,this._animateToSelected(),this._shouldPlayerBeDisplayed=t}},{key:"_init",value:function _init(){this._index=0,this._verticalIndex=1}},{key:"_getFocused",value:function _getFocused(){return 0===this._verticalIndex?this.tag("VideoCard"):this.tag("Items").children[this._index]}},{key:"_handleUp",value:function _handleUp(){return this.shouldPlayerBeDisplayed&&(this._verticalIndex=0,this._animateToSelected()),!0}},{key:"_handleDown",value:function _handleDown(){return this._verticalIndex=1,this._animateToSelected(),!0}},{key:"_handleRight",value:function _handleRight(){return 0===this._verticalIndex?(this._verticalIndex=1,this._animateToSelected()):this._index<this.tag("Items").children.length-1&&0!==this._verticalIndex&&(this._index+=1,this._animateToSelected()),!0}},{key:"_handleLeft",value:function _handleLeft(){if(0===this._verticalIndex)return!0;if(0===this._index){if(!this.tag("VideoCard").visible)return!0;this._verticalIndex=0,this._animateToSelected()}else this._index-=1,this._animateToSelected();return!0}},{key:"_animateToSelected",value:function _animateToSelected(){var t=this;this.tag("Items").children.forEach((function(r,i){r.x=i>t._index&&1===t._verticalIndex?t._calcXPos(i):i*(ZN.width+ZN.offset)}));var r=this._index*(ZN.width+ZN.offset)*-1;this.tag("Items").setSmooth("x",r,{duration:.25})}},{key:"_calcXPos",value:function _calcXPos(t){return 0===t?0:(t-1+1.5)*(ZN.width+ZN.offset)}},{key:"announce",get:function get(){return"\n      ".concat(this.tag("Heading").text.text,"\n    ")}}],[{key:"_template",value:function _template(){return{y:163,x:800,Background:{y:-163,x:-800,w:1920,h:1080,zIndex:-1,shader:{type:j.shaders.Hole,x:116,y:89,w:321,h:181}},Overlay:{w:1920,h:1080,y:-163,x:-800,zIndex:1,rect:!0,colorBottom:"0xff000000",colorTop:"0x00000000"},Heading:{zIndex:2,text:_objectSpread2({text:"You Might Also Like"},kg.TextStyles.h2)},Items:{y:112,zIndex:2},VideoCard:{x:-685,y:-75,type:WN}}}}]),RelatedContent}(j.Component),ex={aa:{name:"Afar",nativeName:"Afaraf"},ab:{name:"Abkhaz",nativeName:"аҧсуа бызшәа"},ae:{name:"Avestan",nativeName:"avesta"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},am:{name:"Amharic",nativeName:"አማርኛ"},an:{name:"Aragonese",nativeName:"aragonés"},ar:{name:"Arabic",nativeName:"اَلْعَرَبِيَّةُ"},as:{name:"Assamese",nativeName:"অসমীয়া"},av:{name:"Avaric",nativeName:"авар мацӀ"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"azərbaycan dili"},ba:{name:"Bashkir",nativeName:"башҡорт теле"},be:{name:"Belarusian",nativeName:"беларуская мова"},bg:{name:"Bulgarian",nativeName:"български език"},bi:{name:"Bislama",nativeName:"Bislama"},bm:{name:"Bambara",nativeName:"bamanankan"},bn:{name:"Bengali",nativeName:"বাংলা"},bo:{name:"Tibetan",nativeName:"བོད་ཡིག"},br:{name:"Breton",nativeName:"brezhoneg"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},ca:{name:"Catalan",nativeName:"Català"},ce:{name:"Chechen",nativeName:"нохчийн мотт"},ch:{name:"Chamorro",nativeName:"Chamoru"},co:{name:"Corsican",nativeName:"corsu"},cr:{name:"Cree",nativeName:"ᓀᐦᐃᔭᐍᐏᐣ"},cs:{name:"Czech",nativeName:"čeština"},cu:{name:"Old Church Slavonic",nativeName:"ѩзыкъ словѣньскъ"},cv:{name:"Chuvash",nativeName:"чӑваш чӗлхи"},cy:{name:"Welsh",nativeName:"Cymraeg"},da:{name:"Danish",nativeName:"dansk"},de:{name:"German",nativeName:"Deutsch"},dv:{name:"Divehi",nativeName:"ދިވެހި"},dz:{name:"Dzongkha",nativeName:"རྫོང་ཁ"},ee:{name:"Ewe",nativeName:"Eʋegbe"},el:{name:"Greek",nativeName:"Ελληνικά"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},es:{name:"Spanish",nativeName:"Español"},et:{name:"Estonian",nativeName:"eesti"},eu:{name:"Basque",nativeName:"euskara"},fa:{name:"Persian",nativeName:"فارسی"},ff:{name:"Fula",nativeName:"Fulfulde"},fi:{name:"Finnish",nativeName:"suomi"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fo:{name:"Faroese",nativeName:"føroyskt"},fr:{name:"French",nativeName:"Français"},fy:{name:"Western Frisian",nativeName:"Frysk"},ga:{name:"Irish",nativeName:"Gaeilge"},gd:{name:"Scottish Gaelic",nativeName:"Gàidhlig"},gl:{name:"Galician",nativeName:"galego"},gn:{name:"Guaraní",nativeName:"Avañe'ẽ"},gu:{name:"Gujarati",nativeName:"ગુજરાતી"},gv:{name:"Manx",nativeName:"Gaelg"},ha:{name:"Hausa",nativeName:"هَوُسَ"},he:{name:"Hebrew",nativeName:"עברית"},hi:{name:"Hindi",nativeName:"हिन्दी"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hr:{name:"Croatian",nativeName:"Hrvatski"},ht:{name:"Haitian",nativeName:"Kreyòl ayisyen"},hu:{name:"Hungarian",nativeName:"magyar"},hy:{name:"Armenian",nativeName:"Հայերեն"},hz:{name:"Herero",nativeName:"Otjiherero"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Interlingue"},ig:{name:"Igbo",nativeName:"Asụsụ Igbo"},ii:{name:"Nuosu",nativeName:"ꆈꌠ꒿ Nuosuhxop"},ik:{name:"Inupiaq",nativeName:"Iñupiaq"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"Íslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"ᐃᓄᒃᑎᑐᑦ"},ja:{name:"Japanese",nativeName:"日本語"},jv:{name:"Javanese",nativeName:"basa Jawa"},ka:{name:"Georgian",nativeName:"ქართული"},kg:{name:"Kongo",nativeName:"Kikongo"},ki:{name:"Kikuyu",nativeName:"Gĩkũyũ"},kj:{name:"Kwanyama",nativeName:"Kuanyama"},kk:{name:"Kazakh",nativeName:"қазақ тілі"},kl:{name:"Kalaallisut",nativeName:"kalaallisut"},km:{name:"Khmer",nativeName:"ខេមរភាសា"},kn:{name:"Kannada",nativeName:"ಕನ್ನಡ"},ko:{name:"Korean",nativeName:"한국어"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"कश्मीरी"},ku:{name:"Kurdish",nativeName:"Kurdî"},kv:{name:"Komi",nativeName:"коми кыв"},kw:{name:"Cornish",nativeName:"Kernewek"},ky:{name:"Kyrgyz",nativeName:"Кыргызча"},la:{name:"Latin",nativeName:"latine"},lb:{name:"Luxembourgish",nativeName:"Lëtzebuergesch"},lg:{name:"Ganda",nativeName:"Luganda"},li:{name:"Limburgish",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Lingála"},lo:{name:"Lao",nativeName:"ພາສາລາວ"},lt:{name:"Lithuanian",nativeName:"lietuvių kalba"},lu:{name:"Luba-Katanga",nativeName:"Kiluba"},lv:{name:"Latvian",nativeName:"latviešu valoda"},mg:{name:"Malagasy",nativeName:"fiteny malagasy"},mh:{name:"Marshallese",nativeName:"Kajin M̧ajeļ"},mi:{name:"Māori",nativeName:"te reo Māori"},mk:{name:"Macedonian",nativeName:"македонски јазик"},ml:{name:"Malayalam",nativeName:"മലയാളം"},mn:{name:"Mongolian",nativeName:"Монгол хэл"},mr:{name:"Marathi",nativeName:"मराठी"},ms:{name:"Malay",nativeName:"Bahasa Melayu"},mt:{name:"Maltese",nativeName:"Malti"},my:{name:"Burmese",nativeName:"ဗမာစာ"},na:{name:"Nauru",nativeName:"Dorerin Naoero"},nb:{name:"Norwegian Bokmål",nativeName:"Norsk bokmål"},nd:{name:"Northern Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"नेपाली"},ng:{name:"Ndonga",nativeName:"Owambo"},nl:{name:"Dutch",nativeName:"Nederlands"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},nr:{name:"Southern Ndebele",nativeName:"isiNdebele"},nv:{name:"Navajo",nativeName:"Diné bizaad"},ny:{name:"Chichewa",nativeName:"chiCheŵa"},oc:{name:"Occitan",nativeName:"occitan"},oj:{name:"Ojibwe",nativeName:"ᐊᓂᔑᓈᐯᒧᐎᓐ"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"ଓଡ଼ିଆ"},os:{name:"Ossetian",nativeName:"ирон æвзаг"},pa:{name:"Panjabi",nativeName:"ਪੰਜਾਬੀ"},pi:{name:"Pāli",nativeName:"पाऴि"},pl:{name:"Polish",nativeName:"Polski"},ps:{name:"Pashto",nativeName:"پښتو"},pt:{name:"Portuguese",nativeName:"Português"},qu:{name:"Quechua",nativeName:"Runa Simi"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"Ikirundi"},ro:{name:"Romanian",nativeName:"Română"},ru:{name:"Russian",nativeName:"Русский"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},sa:{name:"Sanskrit",nativeName:"संस्कृतम्"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"सिन्धी"},se:{name:"Northern Sami",nativeName:"Davvisámegiella"},sg:{name:"Sango",nativeName:"yângâ tî sängö"},si:{name:"Sinhala",nativeName:"සිංහල"},sk:{name:"Slovak",nativeName:"slovenčina"},sl:{name:"Slovenian",nativeName:"slovenščina"},sm:{name:"Samoan",nativeName:"gagana fa'a Samoa"},sn:{name:"Shona",nativeName:"chiShona"},so:{name:"Somali",nativeName:"Soomaaliga"},sq:{name:"Albanian",nativeName:"Shqip"},sr:{name:"Serbian",nativeName:"српски језик"},ss:{name:"Swati",nativeName:"SiSwati"},st:{name:"Southern Sotho",nativeName:"Sesotho"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sv:{name:"Swedish",nativeName:"Svenska"},sw:{name:"Swahili",nativeName:"Kiswahili"},ta:{name:"Tamil",nativeName:"தமிழ்"},te:{name:"Telugu",nativeName:"తెలుగు"},tg:{name:"Tajik",nativeName:"тоҷикӣ"},th:{name:"Thai",nativeName:"ไทย"},ti:{name:"Tigrinya",nativeName:"ትግርኛ"},tk:{name:"Turkmen",nativeName:"Türkmençe"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"Türkçe"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"татар теле"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uyghur",nativeName:"ئۇيغۇرچە‎"},uk:{name:"Ukrainian",nativeName:"Українська"},ur:{name:"Urdu",nativeName:"اردو"},uz:{name:"Uzbek",nativeName:"Ўзбек"},ve:{name:"Venda",nativeName:"Tshivenḓa"},vi:{name:"Vietnamese",nativeName:"Tiếng Việt"},vo:{name:"Volapük",nativeName:"Volapük"},wa:{name:"Walloon",nativeName:"walon"},wo:{name:"Wolof",nativeName:"Wollof"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"ייִדיש"},yo:{name:"Yoruba",nativeName:"Yorùbá"},za:{name:"Zhuang",nativeName:"Saɯ cueŋƅ"},zh:{name:"Chinese",nativeName:"中文"},zu:{name:"Zulu",nativeName:"isiZulu"}},tx=function(){function ISO6391(){_classCallCheck(this,ISO6391)}return _createClass(ISO6391,null,[{key:"getLanguages",value:function getLanguages(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return{code:t,name:ISO6391.getName(t),nativeName:ISO6391.getNativeName(t)}}))}},{key:"getName",value:function getName(t){return ISO6391.validate(t)?ex[t].name:""}},{key:"getAllNames",value:function getAllNames(){return Object.values(ex).map((function(t){return t.name}))}},{key:"getNativeName",value:function getNativeName(t){return ISO6391.validate(t)?ex[t].nativeName:""}},{key:"getAllNativeNames",value:function getAllNativeNames(){return Object.values(ex).map((function(t){return t.nativeName}))}},{key:"getCode",value:function getCode(t){var r=Object.keys(ex).find((function(r){var i=ex[r];return i.name.toLowerCase()===t.toLowerCase()||i.nativeName.toLowerCase()===t.toLowerCase()}));return r||""}},{key:"getAllCodes",value:function getAllCodes(){return Object.keys(ex)}},{key:"validate",value:function validate(t){return ex.hasOwnProperty(t)}}]),ISO6391}(),rx="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAzNCAyNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xOC4xMTk5IDAuODI3MTI1QzE4Ljc2NzcgMS43MjE3NiAxOC41Njc3IDIuOTcyMTkgMTcuNjczIDMuNjIwMDNMOC4xNzE5MSAxMC41MDAxSDMxLjVDMzIuNjA0NiAxMC41MDAxIDMzLjUgMTEuMzk1NiAzMy41IDEyLjUwMDFDMzMuNSAxMy42MDQ3IDMyLjYwNDYgMTQuNTAwMSAzMS41IDE0LjUwMDFIOC4xNzE5MUwxNy42NzMgMjEuMzgwM0MxOC41Njc3IDIyLjAyODEgMTguNzY3NyAyMy4yNzg1IDE4LjExOTkgMjQuMTczMkMxNy40NzIgMjUuMDY3OCAxNi4yMjE2IDI1LjI2NzkgMTUuMzI3IDI0LjYyTDAuODI2OTggMTQuMTJDMC4zMDc1NDcgMTMuNzQzOSAwIDEzLjE0MTUgMCAxMi41MDAxQzAgMTEuODU4OCAwLjMwNzU0NyAxMS4yNTY0IDAuODI2OTggMTAuODgwM0wxNS4zMjcgMC4zODAyNkMxNi4yMjE2IC0wLjI2NzU4MSAxNy40NzIgLTAuMDY3NTEyNiAxOC4xMTk5IDAuODI3MTI1WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",nx="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODEiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MSA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8xMDIzNF82NTExIiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNjMuNzUzNSA0MS45MDM0QzY0Ljg2MDEgNDEuMTA1MiA2NC44NjAxIDM5LjQ1NzYgNjMuNzUzNSAzOC42NTkzTDQzLjk2IDI0LjM4MTVDNDIuNjM3MiAyMy40MjczIDQwLjc4OTkgMjQuMzcyNSA0MC43ODk5IDI2LjAwMzZMNDAuNzg5OSA1NC41NTkyQzQwLjc4OTkgNTYuMTkwMiA0Mi42MzcyIDU3LjEzNTQgNDMuOTYgNTYuMTgxMkw2My43NTM1IDQxLjkwMzRaTTM4LjM2OTggNDEuOTAzNEMzOS40NzY0IDQxLjEwNTIgMzkuNDc2NCAzOS40NTc2IDM4LjM2OTggMzguNjU5M0wxOC41NzYzIDI0LjM4MTVDMTcuMjUzNSAyMy40MjczIDE1LjQwNjIgMjQuMzcyNSAxNS40MDYyIDI2LjAwMzZMMTUuNDA2MiA1NC41NTkyQzE1LjQwNjIgNTYuMTkwMiAxNy4yNTM1IDU3LjEzNTQgMTguNTc2MyA1Ni4xODEyTDM4LjM2OTggNDEuOTAzNFoiLz4KPC9tYXNrPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYzLjc1MzUgNDEuOTAzNEM2NC44NjAxIDQxLjEwNTIgNjQuODYwMSAzOS40NTc2IDYzLjc1MzUgMzguNjU5M0w0My45NiAyNC4zODE1QzQyLjYzNzIgMjMuNDI3MyA0MC43ODk5IDI0LjM3MjUgNDAuNzg5OSAyNi4wMDM2TDQwLjc4OTkgNTQuNTU5MkM0MC43ODk5IDU2LjE5MDIgNDIuNjM3MiA1Ny4xMzU0IDQzLjk2IDU2LjE4MTJMNjMuNzUzNSA0MS45MDM0Wk0zOC4zNjk4IDQxLjkwMzRDMzkuNDc2NCA0MS4xMDUyIDM5LjQ3NjQgMzkuNDU3NiAzOC4zNjk4IDM4LjY1OTNMMTguNTc2MyAyNC4zODE1QzE3LjI1MzUgMjMuNDI3MyAxNS40MDYyIDI0LjM3MjUgMTUuNDA2MiAyNi4wMDM2TDE1LjQwNjIgNTQuNTU5MkMxNS40MDYyIDU2LjE5MDIgMTcuMjUzNSA1Ny4xMzU0IDE4LjU3NjMgNTYuMTgxMkwzOC4zNjk4IDQxLjkwMzRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNjMuNzUzNSAzOC42NTkzTDY1LjUwODYgMzYuMjI2M0w2NS41MDg1IDM2LjIyNjNMNjMuNzUzNSAzOC42NTkzWk02My43NTM1IDQxLjkwMzRMNjEuOTk4NCAzOS40NzA0TDYxLjk5ODQgMzkuNDcwNEw2My43NTM1IDQxLjkwMzRaTTQzLjk2IDI0LjM4MTVMNDIuMjA0OSAyNi44MTQ2TDQyLjIwNDkgMjYuODE0Nkw0My45NiAyNC4zODE1Wk00MC43ODk5IDI2LjAwMzZMNDMuNzg5OSAyNi4wMDM2TDQzLjc4OTkgMjYuMDAzNkw0MC43ODk5IDI2LjAwMzZaTTQwLjc4OTkgNTQuNTU5MkwzNy43ODk5IDU0LjU1OTJMNDAuNzg5OSA1NC41NTkyWk00My45NiA1Ni4xODEyTDQyLjIwNDkgNTMuNzQ4Mkw0My45NiA1Ni4xODEyWk0zOC4zNjk4IDM4LjY1OTNMMzYuNjE0NyA0MS4wOTI0TDM4LjM2OTggMzguNjU5M1pNMzguMzY5OCA0MS45MDM0TDQwLjEyNDkgNDQuMzM2NUwzOC4zNjk4IDQxLjkwMzRaTTE4LjU3NjMgMjQuMzgxNUwxNi44MjEyIDI2LjgxNDZMMTguNTc2MyAyNC4zODE1Wk0xNS40MDYyIDI2LjAwMzZMMTguNDA2MiAyNi4wMDM2TDE1LjQwNjIgMjYuMDAzNlpNMTUuNDA2MiA1NC41NTkyTDEyLjQwNjIgNTQuNTU5MkwxNS40MDYyIDU0LjU1OTJaTTE4LjU3NjMgNTYuMTgxMkwxNi44MjEyIDUzLjc0ODJMMTYuODIxMiA1My43NDgyTDE4LjU3NjMgNTYuMTgxMlpNNjEuOTk4NCA0MS4wOTI0QzYxLjQ0NTEgNDAuNjkzMyA2MS40NDUxIDM5Ljg2OTUgNjEuOTk4NCAzOS40NzA0TDY1LjUwODUgNDQuMzM2NUM2OC4yNzUxIDQyLjM0MDkgNjguMjc1MSAzOC4yMjE5IDY1LjUwODYgMzYuMjI2M0w2MS45OTg0IDQxLjA5MjRaTTQyLjIwNDkgMjYuODE0Nkw2MS45OTg0IDQxLjA5MjRMNjUuNTA4NSAzNi4yMjYzTDQ1LjcxNSAyMS45NDg1TDQyLjIwNDkgMjYuODE0NlpNNDMuNzg5OSAyNi4wMDM2QzQzLjc4OTkgMjYuODE5MSA0Mi44NjYzIDI3LjI5MTcgNDIuMjA0OSAyNi44MTQ2TDQ1LjcxNSAyMS45NDg1QzQyLjQwODEgMTkuNTYzIDM3Ljc4OTkgMjEuOTI2IDM3Ljc4OTkgMjYuMDAzNkw0My43ODk5IDI2LjAwMzZaTTQzLjc4OTkgNTQuNTU5Mkw0My43ODk5IDI2LjAwMzZMMzcuNzg5OSAyNi4wMDM2TDM3Ljc4OTkgNTQuNTU5Mkw0My43ODk5IDU0LjU1OTJaTTQyLjIwNDkgNTMuNzQ4MkM0Mi44NjYzIDUzLjI3MTEgNDMuNzg5OSA1My43NDM3IDQzLjc4OTkgNTQuNTU5MkwzNy43ODk5IDU0LjU1OTJDMzcuNzg5OSA1OC42MzY3IDQyLjQwODEgNjAuOTk5NyA0NS43MTUgNTguNjE0M0w0Mi4yMDQ5IDUzLjc0ODJaTTYxLjk5ODQgMzkuNDcwNEw0Mi4yMDQ5IDUzLjc0ODJMNDUuNzE1IDU4LjYxNDNMNjUuNTA4NSA0NC4zMzY1TDYxLjk5ODQgMzkuNDcwNFpNMzYuNjE0NyA0MS4wOTI0QzM2LjA2MTQgNDAuNjkzMyAzNi4wNjE0IDM5Ljg2OTUgMzYuNjE0NyAzOS40NzA0TDQwLjEyNDkgNDQuMzM2NUM0Mi44OTE0IDQyLjM0MDkgNDIuODkxNCAzOC4yMjE5IDQwLjEyNDkgMzYuMjI2M0wzNi42MTQ3IDQxLjA5MjRaTTE2LjgyMTIgMjYuODE0NkwzNi42MTQ3IDQxLjA5MjRMNDAuMTI0OSAzNi4yMjYzTDIwLjMzMTMgMjEuOTQ4NUwxNi44MjEyIDI2LjgxNDZaTTE4LjQwNjIgMjYuMDAzNkMxOC40MDYyIDI2LjgxOSAxNy40ODI2IDI3LjI5MTcgMTYuODIxMiAyNi44MTQ2TDIwLjMzMTMgMjEuOTQ4NUMxNy4wMjQ0IDE5LjU2MyAxMi40MDYzIDIxLjkyNiAxMi40MDYyIDI2LjAwMzZMMTguNDA2MiAyNi4wMDM2Wk0xOC40MDYyIDU0LjU1OTJMMTguNDA2MiAyNi4wMDM2TDEyLjQwNjIgMjYuMDAzNkwxMi40MDYyIDU0LjU1OTJMMTguNDA2MiA1NC41NTkyWk0xNi44MjEyIDUzLjc0ODJDMTcuNDgyNiA1My4yNzExIDE4LjQwNjIgNTMuNzQzNyAxOC40MDYyIDU0LjU1OTJMMTIuNDA2MiA1NC41NTkyQzEyLjQwNjIgNTguNjM2NyAxNy4wMjQ0IDYwLjk5OTcgMjAuMzMxMyA1OC42MTQzTDE2LjgyMTIgNTMuNzQ4MlpNMzYuNjE0NyAzOS40NzA0TDE2LjgyMTIgNTMuNzQ4MkwyMC4zMzEzIDU4LjYxNDNMNDAuMTI0OSA0NC4zMzY1TDM2LjYxNDcgMzkuNDcwNFoiIGZpbGw9IndoaXRlIiBtYXNrPSJ1cmwoI3BhdGgtMS1pbnNpZGUtMV8xMDIzNF82NTExKSIvPgo8L3N2Zz4K",ix="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyNSAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xOC4yODEgMTQuMjYzMUMxOS4xNDIzIDEzLjY0MTcgMTkuMTQyMyAxMi4zNTkyIDE4LjI4MSAxMS43Mzc5TDIuODczNzkgMC42MjQxMTNDMS44NDQxNSAtMC4xMTg2MDggMC40MDYyNTQgMC42MTcxMzUgMC40MDYyNTQgMS44ODY3TDAuNDA2MjUgMjQuMTE0M0MwLjQwNjI1IDI1LjM4MzggMS44NDQxNCAyNi4xMTk2IDIuODczNzkgMjUuMzc2OUwxOC4yODEgMTQuMjYzMVpNMjEuODg2OCAwLjU0NjIxNUMyMS4wMjcgMC41NDYyMTUgMjAuMzMgMS4yNDMyMSAyMC4zMyAyLjEwM1YyMy44OTgxQzIwLjMzIDI0Ljc1NzggMjEuMDI3IDI1LjQ1NDggMjEuODg2OCAyNS40NTQ4SDIzLjQ0MzZDMjQuMzAzNCAyNS40NTQ4IDI1LjAwMDQgMjQuNzU3OCAyNS4wMDA0IDIzLjg5ODFWMi4xMDNDMjUuMDAwNCAxLjI0MzIxIDI0LjMwMzQgMC41NDYyMTUgMjMuNDQzNiAwLjU0NjIxNUgyMS44ODY4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",ax="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODEiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MSA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MC40MDYyIDc2QzYwLjI4ODUgNzYgNzYuNDA2MiA1OS44ODIzIDc2LjQwNjIgNDBDNzYuNDA2MiAyMC4xMTc3IDYwLjI4ODUgNCA0MC40MDYyIDRDMjAuNTI0IDQgNC40MDYyNSAyMC4xMTc3IDQuNDA2MjUgNDBDNC40MDYyNSA1OS44ODIzIDIwLjUyNCA3NiA0MC40MDYyIDc2Wk00MC40MDYyIDgwQzYyLjQ5NzYgODAgODAuNDA2MiA2Mi4wOTE0IDgwLjQwNjIgNDBDODAuNDA2MiAxNy45MDg2IDYyLjQ5NzYgMCA0MC40MDYyIDBDMTguMzE0OSAwIDAuNDA2MjUgMTcuOTA4NiAwLjQwNjI1IDQwQzAuNDA2MjUgNjIuMDkxNCAxOC4zMTQ5IDgwIDQwLjQwNjIgODBaIiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSIyOC44ODI4IiB5PSIyNC40MDYyIiB3aWR0aD0iOC4xMzU1OSIgaGVpZ2h0PSIzMi41NDI0IiByeD0iNC4wNjc4IiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSI0My43OTY5IiB5PSIyNC40MDYyIiB3aWR0aD0iOC4xMzU1OSIgaGVpZ2h0PSIzMi41NDI0IiByeD0iNC4wNjc4IiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",ox="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODEiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MSA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MC40MDYyIDc2QzYwLjI4ODUgNzYgNzYuNDA2MiA1OS44ODIzIDc2LjQwNjIgNDBDNzYuNDA2MiAyMC4xMTc3IDYwLjI4ODUgNCA0MC40MDYyIDRDMjAuNTI0IDQgNC40MDYyNSAyMC4xMTc3IDQuNDA2MjUgNDBDNC40MDYyNSA1OS44ODIzIDIwLjUyNCA3NiA0MC40MDYyIDc2Wk00MC40MDYyIDgwQzYyLjQ5NzYgODAgODAuNDA2MiA2Mi4wOTE0IDgwLjQwNjIgNDBDODAuNDA2MiAxNy45MDg2IDYyLjQ5NzYgMCA0MC40MDYyIDBDMTguMzE0OSAwIDAuNDA2MjUgMTcuOTA4NiAwLjQwNjI1IDQwQzAuNDA2MjUgNjIuMDkxNCAxOC4zMTQ5IDgwIDQwLjQwNjIgODBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNTkuMDMxMyAzOS41NjY4QzU5LjM2NDYgMzkuNzU5MyA1OS4zNjQ2IDQwLjI0MDQgNTkuMDMxMiA0MC40MzI4TDMxLjQ3MTkgNTYuMzQ0MkMzMS4xMzg2IDU2LjUzNjcgMzAuNzIxOSA1Ni4yOTYxIDMwLjcyMTkgNTUuOTExMkwzMC43MjE5IDI0LjA4ODRDMzAuNzIxOSAyMy43MDM2IDMxLjEzODYgMjMuNDYzIDMxLjQ3MTkgMjMuNjU1NEw1OS4wMzEzIDM5LjU2NjhaIiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIzIi8+Cjwvc3ZnPgo=",sx="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODEiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MSA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8xMDIzNF82NTAyIiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTcuMDU5IDQxLjkwMzRDMTUuOTUyNCA0MS4xMDUyIDE1Ljk1MjQgMzkuNDU3NiAxNy4wNTkgMzguNjU5M0wzNi44NTI1IDI0LjM4MTVDMzguMTc1MyAyMy40MjczIDQwLjAyMjYgMjQuMzcyNSA0MC4wMjI2IDI2LjAwMzZMNDAuMDIyNiA1NC41NTkyQzQwLjAyMjYgNTYuMTkwMiAzOC4xNzUzIDU3LjEzNTQgMzYuODUyNSA1Ni4xODEyTDE3LjA1OSA0MS45MDM0Wk00Mi40NDI3IDQxLjkwMzRDNDEuMzM2MSA0MS4xMDUyIDQxLjMzNjEgMzkuNDU3NiA0Mi40NDI3IDM4LjY1OTNMNjIuMjM2MiAyNC4zODE1QzYzLjU1OSAyMy40MjczIDY1LjQwNjMgMjQuMzcyNSA2NS40MDYzIDI2LjAwMzZMNjUuNDA2MyA1NC41NTkyQzY1LjQwNjMgNTYuMTkwMiA2My41NTkgNTcuMTM1NCA2Mi4yMzYyIDU2LjE4MTJMNDIuNDQyNyA0MS45MDM0WiIvPgo8L21hc2s+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTcuMDU5IDQxLjkwMzRDMTUuOTUyNCA0MS4xMDUyIDE1Ljk1MjQgMzkuNDU3NiAxNy4wNTkgMzguNjU5M0wzNi44NTI1IDI0LjM4MTVDMzguMTc1MyAyMy40MjczIDQwLjAyMjYgMjQuMzcyNSA0MC4wMjI2IDI2LjAwMzZMNDAuMDIyNiA1NC41NTkyQzQwLjAyMjYgNTYuMTkwMiAzOC4xNzUzIDU3LjEzNTQgMzYuODUyNSA1Ni4xODEyTDE3LjA1OSA0MS45MDM0Wk00Mi40NDI3IDQxLjkwMzRDNDEuMzM2MSA0MS4xMDUyIDQxLjMzNjEgMzkuNDU3NiA0Mi40NDI3IDM4LjY1OTNMNjIuMjM2MiAyNC4zODE1QzYzLjU1OSAyMy40MjczIDY1LjQwNjMgMjQuMzcyNSA2NS40MDYzIDI2LjAwMzZMNjUuNDA2MyA1NC41NTkyQzY1LjQwNjMgNTYuMTkwMiA2My41NTkgNTcuMTM1NCA2Mi4yMzYyIDU2LjE4MTJMNDIuNDQyNyA0MS45MDM0WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE3LjA1OSAzOC42NTkzTDE1LjMwMzkgMzYuMjI2M0wxNS4zMDQgMzYuMjI2M0wxNy4wNTkgMzguNjU5M1pNMTcuMDU5IDQxLjkwMzRMMTguODE0MSAzOS40NzA0TDE4LjgxNDEgMzkuNDcwNEwxNy4wNTkgNDEuOTAzNFpNMzYuODUyNSAyNC4zODE1TDM4LjYwNzYgMjYuODE0NkwzOC42MDc2IDI2LjgxNDZMMzYuODUyNSAyNC4zODE1Wk00MC4wMjI2IDI2LjAwMzZMMzcuMDIyNiAyNi4wMDM2TDM3LjAyMjYgMjYuMDAzNkw0MC4wMjI2IDI2LjAwMzZaTTQwLjAyMjYgNTQuNTU5Mkw0My4wMjI2IDU0LjU1OTJMNDAuMDIyNiA1NC41NTkyWk0zNi44NTI1IDU2LjE4MTJMMzguNjA3NiA1My43NDgyTDM2Ljg1MjUgNTYuMTgxMlpNNDIuNDQyNyAzOC42NTkzTDQ0LjE5NzggNDEuMDkyNEw0Mi40NDI3IDM4LjY1OTNaTTQyLjQ0MjcgNDEuOTAzNEw0MC42ODc2IDQ0LjMzNjVMNDIuNDQyNyA0MS45MDM0Wk02Mi4yMzYyIDI0LjM4MTVMNjMuOTkxMyAyNi44MTQ2TDYyLjIzNjIgMjQuMzgxNVpNNjUuNDA2MyAyNi4wMDM2TDYyLjQwNjMgMjYuMDAzNkw2NS40MDYzIDI2LjAwMzZaTTY1LjQwNjMgNTQuNTU5Mkw2OC40MDYzIDU0LjU1OTJMNjUuNDA2MyA1NC41NTkyWk02Mi4yMzYyIDU2LjE4MTJMNjMuOTkxMyA1My43NDgyTDYzLjk5MTMgNTMuNzQ4Mkw2Mi4yMzYyIDU2LjE4MTJaTTE4LjgxNDEgNDEuMDkyNEMxOS4zNjc0IDQwLjY5MzMgMTkuMzY3NCAzOS44Njk1IDE4LjgxNDEgMzkuNDcwNEwxNS4zMDQgNDQuMzM2NUMxMi41Mzc0IDQyLjM0MDkgMTIuNTM3NCAzOC4yMjE5IDE1LjMwMzkgMzYuMjI2M0wxOC44MTQxIDQxLjA5MjRaTTM4LjYwNzYgMjYuODE0NkwxOC44MTQxIDQxLjA5MjRMMTUuMzA0IDM2LjIyNjNMMzUuMDk3NSAyMS45NDg1TDM4LjYwNzYgMjYuODE0NlpNMzcuMDIyNiAyNi4wMDM2QzM3LjAyMjYgMjYuODE5MSAzNy45NDYyIDI3LjI5MTcgMzguNjA3NiAyNi44MTQ2TDM1LjA5NzUgMjEuOTQ4NUMzOC40MDQ0IDE5LjU2MyA0My4wMjI2IDIxLjkyNiA0My4wMjI2IDI2LjAwMzZMMzcuMDIyNiAyNi4wMDM2Wk0zNy4wMjI2IDU0LjU1OTJMMzcuMDIyNiAyNi4wMDM2TDQzLjAyMjYgMjYuMDAzNkw0My4wMjI2IDU0LjU1OTJMMzcuMDIyNiA1NC41NTkyWk0zOC42MDc2IDUzLjc0ODJDMzcuOTQ2MiA1My4yNzExIDM3LjAyMjYgNTMuNzQzNyAzNy4wMjI2IDU0LjU1OTJMNDMuMDIyNiA1NC41NTkyQzQzLjAyMjYgNTguNjM2NyAzOC40MDQ0IDYwLjk5OTcgMzUuMDk3NSA1OC42MTQzTDM4LjYwNzYgNTMuNzQ4MlpNMTguODE0MSAzOS40NzA0TDM4LjYwNzYgNTMuNzQ4MkwzNS4wOTc1IDU4LjYxNDNMMTUuMzA0IDQ0LjMzNjVMMTguODE0MSAzOS40NzA0Wk00NC4xOTc4IDQxLjA5MjRDNDQuNzUxMSA0MC42OTMzIDQ0Ljc1MTEgMzkuODY5NSA0NC4xOTc4IDM5LjQ3MDRMNDAuNjg3NiA0NC4zMzY1QzM3LjkyMTEgNDIuMzQwOSAzNy45MjExIDM4LjIyMTkgNDAuNjg3NiAzNi4yMjYzTDQ0LjE5NzggNDEuMDkyNFpNNjMuOTkxMyAyNi44MTQ2TDQ0LjE5NzggNDEuMDkyNEw0MC42ODc2IDM2LjIyNjNMNjAuNDgxMiAyMS45NDg1TDYzLjk5MTMgMjYuODE0NlpNNjIuNDA2MyAyNi4wMDM2QzYyLjQwNjMgMjYuODE5IDYzLjMyOTkgMjcuMjkxNyA2My45OTEzIDI2LjgxNDZMNjAuNDgxMiAyMS45NDg1QzYzLjc4ODEgMTkuNTYzIDY4LjQwNjIgMjEuOTI2IDY4LjQwNjMgMjYuMDAzNkw2Mi40MDYzIDI2LjAwMzZaTTYyLjQwNjMgNTQuNTU5Mkw2Mi40MDYzIDI2LjAwMzZMNjguNDA2MyAyNi4wMDM2TDY4LjQwNjMgNTQuNTU5Mkw2Mi40MDYzIDU0LjU1OTJaTTYzLjk5MTMgNTMuNzQ4MkM2My4zMjk5IDUzLjI3MTEgNjIuNDA2MyA1My43NDM3IDYyLjQwNjMgNTQuNTU5Mkw2OC40MDYzIDU0LjU1OTJDNjguNDA2MyA1OC42MzY3IDYzLjc4ODEgNjAuOTk5NyA2MC40ODEyIDU4LjYxNDNMNjMuOTkxMyA1My43NDgyWk00NC4xOTc4IDM5LjQ3MDRMNjMuOTkxMyA1My43NDgyTDYwLjQ4MTIgNTguNjE0M0w0MC42ODc2IDQ0LjMzNjVMNDQuMTk3OCAzOS40NzA0WiIgZmlsbD0id2hpdGUiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzEwMjM0XzY1MDIpIi8+Cjwvc3ZnPgo=",ux="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODEiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MSA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yOC4xNTk5IDE4LjI2MjhDMjcuODY0NiAxOC40NTk2IDI3Ljg2NDcgMTguODkzNSAyOC4xNTk5IDE5LjA5MDRMNDAuNDI3NSAyNy4yNjg4QzQwLjc1ODEgMjcuNDg5MSA0MS4yMDA4IDI3LjI1MjIgNDEuMjAwOCAyNi44NTVWMjAuNjk0MUM1My4xOTY1IDIxLjI4NyA2Mi43NDAyIDMxLjIwMDggNjIuNzQwMiA0My4zNDM2QzYyLjc0MDIgNTUuODY4MSA1Mi41ODcxIDY2LjAyMTMgNDAuMDYyNiA2Ni4wMjEzQzI3LjUzODEgNjYuMDIxMyAxNy4zODUgNTUuODY4MSAxNy4zODUgNDMuMzQzNkMxNy4zODUgMzcuNjQyOCAxOS40ODYgMzIuNDM3NiAyMi45NTg3IDI4LjQ1MjVMMTkuOTU5IDI1LjgzODZDMTUuODc5MiAzMC41MjA0IDEzLjQwNjIgMzYuNjQ1NyAxMy40MDYyIDQzLjM0MzZDMTMuNDA2MiA1OC4wNjU1IDI1LjM0MDcgNzAgNDAuMDYyNiA3MEM1NC43ODQ1IDcwIDY2LjcxOSA1OC4wNjU1IDY2LjcxOSA0My4zNDM2QzY2LjcxOSAyOS4wMDMgNTUuMzk0NyAxNy4zMDczIDQxLjIwMDggMTYuNzExMVYxMC40OTgyQzQxLjIwMDggMTAuMTAxIDQwLjc1ODEgOS44NjQwMiA0MC40Mjc1IDEwLjA4NDRMMjguMTU5OSAxOC4yNjI4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTI5LjI5OTYgNTEuNDQ4SDM4Ljk2MThWNDguOTc2OEgzNS41MzMzVjM1LjY0MTJIMzMuMDE3NUwyOS4wNTQ3IDM5LjQ0ODJMMzAuNzQ2NyA0MS4yMjkyTDMyLjAxNTcgNDAuMDI3QzMyLjUyNzcgMzkuNTE1IDMyLjcwNTkgMzkuMTM2NSAzMi43MDU5IDM5LjEzNjVIMzIuNzUwNEMzMi43NTA0IDM5LjEzNjUgMzIuNzI4MSAzOS42NzA4IDMyLjcyODEgNDAuMjA1MVY0OC45NzY4SDI5LjI5OTZWNTEuNDQ4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTQ2LjQ4MDUgNTEuNzE1MkM1MC43OTk2IDUxLjcxNTIgNTIuMjI0NCA0OC4wNjQgNTIuMjI0NCA0My41MjI0QzUyLjIyNDQgMzguOTgwNyA1MC43OTk2IDM1LjM3NCA0Ni40ODA1IDM1LjM3NEM0Mi4xNjE0IDM1LjM3NCA0MC43NTg5IDM4Ljk4MDcgNDAuNzU4OSA0My41MjI0QzQwLjc1ODkgNDguMDY0IDQyLjE2MTQgNTEuNzE1MiA0Ni40ODA1IDUxLjcxNTJaTTQ2LjQ4MDUgNDkuMDg4MUM0NC4zMjEgNDkuMDg4MSA0My42OTc2IDQ2LjYzOTIgNDMuNjk3NiA0My41MjI0QzQzLjY5NzYgNDAuNDUgNDQuMzIxIDM4LjAyMzMgNDYuNDgwNSAzOC4wMjMzQzQ4LjY0IDM4LjAyMzMgNDkuMjYzNCA0MC40NSA0OS4yNjM0IDQzLjUyMjRDNDkuMjYzNCA0Ni42MzkyIDQ4LjY0IDQ5LjA4ODEgNDYuNDgwNSA0OS4wODgxWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",lx="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODEiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MSA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01MS45NjUxIDE4LjI2MjhDNTIuMjYwNCAxOC40NTk2IDUyLjI2MDMgMTguODkzNSA1MS45NjUxIDE5LjA5MDRMMzkuNjk3NSAyNy4yNjg4QzM5LjM2NjkgMjcuNDg5MSAzOC45MjQyIDI3LjI1MjIgMzguOTI0MiAyNi44NTVWMjAuNjk0MUMyNi45Mjg1IDIxLjI4NyAxNy4zODQ4IDMxLjIwMDggMTcuMzg0OCA0My4zNDM2QzE3LjM4NDggNTUuODY4MSAyNy41Mzc5IDY2LjAyMTMgNDAuMDYyNCA2Ni4wMjEzQzUyLjU4NjkgNjYuMDIxMyA2Mi43NCA1NS44NjgxIDYyLjc0IDQzLjM0MzZDNjIuNzQgMzcuNjQyOCA2MC42MzkgMzIuNDM3NiA1Ny4xNjYzIDI4LjQ1MjVMNjAuMTY2IDI1LjgzODZDNjQuMjQ1OCAzMC41MjA0IDY2LjcxODggMzYuNjQ1NyA2Ni43MTg4IDQzLjM0MzZDNjYuNzE4OCA1OC4wNjU1IDU0Ljc4NDMgNzAgNDAuMDYyNCA3MEMyNS4zNDA1IDcwIDEzLjQwNiA1OC4wNjU1IDEzLjQwNiA0My4zNDM2QzEzLjQwNiAyOS4wMDMgMjQuNzMwMyAxNy4zMDczIDM4LjkyNDIgMTYuNzExMVYxMC40OTgyQzM4LjkyNDIgMTAuMTAxIDM5LjM2NjkgOS44NjQwMiAzOS42OTc1IDEwLjA4NDRMNTEuOTY1MSAxOC4yNjI4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTI5LjI5OTYgNTEuNDQ4SDM4Ljk2MThWNDguOTc2OEgzNS41MzMzVjM1LjY0MTJIMzMuMDE3NUwyOS4wNTQ3IDM5LjQ0ODJMMzAuNzQ2NyA0MS4yMjkyTDMyLjAxNTcgNDAuMDI3QzMyLjUyNzcgMzkuNTE1IDMyLjcwNTkgMzkuMTM2NSAzMi43MDU5IDM5LjEzNjVIMzIuNzUwNEMzMi43NTA0IDM5LjEzNjUgMzIuNzI4MSAzOS42NzA4IDMyLjcyODEgNDAuMjA1MVY0OC45NzY4SDI5LjI5OTZWNTEuNDQ4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTQ2LjQ4MDUgNTEuNzE1MkM1MC43OTk2IDUxLjcxNTIgNTIuMjI0NCA0OC4wNjQgNTIuMjI0NCA0My41MjI0QzUyLjIyNDQgMzguOTgwNyA1MC43OTk2IDM1LjM3NCA0Ni40ODA1IDM1LjM3NEM0Mi4xNjE0IDM1LjM3NCA0MC43NTg5IDM4Ljk4MDcgNDAuNzU4OSA0My41MjI0QzQwLjc1ODkgNDguMDY0IDQyLjE2MTQgNTEuNzE1MiA0Ni40ODA1IDUxLjcxNTJaTTQ2LjQ4MDUgNDkuMDg4MUM0NC4zMjEgNDkuMDg4MSA0My42OTc2IDQ2LjYzOTIgNDMuNjk3NiA0My41MjI0QzQzLjY5NzYgNDAuNDUgNDQuMzIxIDM4LjAyMzMgNDYuNDgwNSAzOC4wMjMzQzQ4LjY0IDM4LjAyMzMgNDkuMjYzNCA0MC40NSA0OS4yNjM0IDQzLjUyMjRDNDkuMjYzNCA0Ni42MzkyIDQ4LjY0IDQ5LjA4ODEgNDYuNDgwNSA0OS4wODgxWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",cx="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODEiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MSA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02My40MDYyIDQ4LjgxVjIxSDE2LjQwNjJWNDguODFINDYuMjA2MlY1NC4wNkw1Mi4wMTYzIDQ5LjY2TDUzLjA4NjMgNDguODFINjMuNDA2MlpNMTYuNDA2MiAxN0g2My40MDYyQzY0LjQ2NzEgMTcgNjUuNDg0NSAxNy40MjE0IDY2LjIzNDcgMTguMTcxNkM2Ni45ODQ4IDE4LjkyMTcgNjcuNDA2MiAxOS45MzkxIDY3LjQwNjIgMjFWNDguNzlDNjcuNDA2MiA0OS44NTA5IDY2Ljk4NDggNTAuODY4MyA2Ni4yMzQ3IDUxLjYxODRDNjUuNDg0NSA1Mi4zNjg2IDY0LjQ2NzEgNTIuNzkgNjMuNDA2MiA1Mi43OUg1NC40MDYyTDQyLjIwNjIgNjIuMDVWNTIuODFIMTYuNDA2MkMxNS4zNDU0IDUyLjgxIDE0LjMyOCA1Mi4zODg2IDEzLjU3NzggNTEuNjM4NEMxMi44Mjc3IDUwLjg4ODMgMTIuNDA2MiA0OS44NzA5IDEyLjQwNjIgNDguODFWMjFDMTIuNDA2MiAxOS45MzkxIDEyLjgyNzcgMTguOTIxNyAxMy41Nzc4IDE4LjE3MTZDMTQuMzI4IDE3LjQyMTQgMTUuMzQ1NCAxNyAxNi40MDYyIDE3Wk0yMC40MjYyIDM0LjA3MDFDMjAuNDI2MiAzMi45NjU1IDIxLjMyMTcgMzIuMDcwMSAyMi40MjYyIDMyLjA3MDFINDUuOTE2MkM0Ny4wMjA4IDMyLjA3MDEgNDcuOTE2MiAzMi45NjU1IDQ3LjkxNjIgMzQuMDcwMUM0Ny45MTYyIDM1LjE3NDYgNDcuMDIwOCAzNi4wNzAxIDQ1LjkxNjIgMzYuMDcwMUgyMi40MjYyQzIxLjMyMTcgMzYuMDcwMSAyMC40MjYyIDM1LjE3NDYgMjAuNDI2MiAzNC4wNzAxWk01MC4wOTYyIDM0LjA3MDFDNTAuMDk2MiAzMi45NjU1IDUwLjk5MTcgMzIuMDcwMSA1Mi4wOTYyIDMyLjA3MDFINTcuNDI2MkM1OC41MzA4IDMyLjA3MDEgNTkuNDI2MiAzMi45NjU1IDU5LjQyNjIgMzQuMDcwMUM1OS40MjYyIDM1LjE3NDYgNTguNTMwOCAzNi4wNzAxIDU3LjQyNjIgMzYuMDcwMUg1Mi4wOTYyQzUwLjk5MTcgMzYuMDcwMSA1MC4wOTYyIDM1LjE3NDYgNTAuMDk2MiAzNC4wNzAxWk0zMy45MzYyIDM5LjU1QzMyLjgzMTcgMzkuNTUgMzEuOTM2MiA0MC40NDU1IDMxLjkzNjIgNDEuNTVDMzEuOTM2MiA0Mi42NTQ2IDMyLjgzMTcgNDMuNTUgMzMuOTM2MiA0My41NUg1Ny40MjYyQzU4LjUzMDggNDMuNTUgNTkuNDI2MiA0Mi42NTQ2IDU5LjQyNjIgNDEuNTVDNTkuNDI2MiA0MC40NDU1IDU4LjUzMDggMzkuNTUgNTcuNDI2MiAzOS41NUgzMy45MzYyWk0yMC40MjYyIDQxLjU1QzIwLjQyNjIgNDAuNDQ1NSAyMS4zMjE3IDM5LjU1IDIyLjQyNjIgMzkuNTVIMjcuNzU2MkMyOC44NjA4IDM5LjU1IDI5Ljc1NjIgNDAuNDQ1NSAyOS43NTYyIDQxLjU1QzI5Ljc1NjIgNDIuNjU0NiAyOC44NjA4IDQzLjU1IDI3Ljc1NjIgNDMuNTVIMjIuNDI2MkMyMS4zMjE3IDQzLjU1IDIwLjQyNjIgNDIuNjU0NiAyMC40MjYyIDQxLjU1WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",dx="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02MyAxNy4wM0gxNkMxNC45MzkxIDE3LjAzIDEzLjkyMTcgMTcuNDUxNCAxMy4xNzE2IDE4LjIwMTZDMTIuNDIxNCAxOC45NTE3IDEyIDE5Ljk2OTEgMTIgMjEuMDNWNDguODFDMTIgNDkuODcwOSAxMi40MjE0IDUwLjg4ODMgMTMuMTcxNiA1MS42Mzg0QzEzLjkyMTcgNTIuMzg4NiAxNC45MzkxIDUyLjgxIDE2IDUyLjgxSDQxLjhWNjIuMDVMNTQgNTIuNzlINjNDNjQuMDYwOSA1Mi43OSA2NS4wNzgzIDUyLjM2ODYgNjUuODI4NCA1MS42MTg0QzY2LjU3ODYgNTAuODY4MyA2NyA0OS44NTA5IDY3IDQ4Ljc5VjIxQzY3IDE5LjkzOTEgNjYuNTc4NiAxOC45MjE3IDY1LjgyODQgMTguMTcxNkM2NS4wNzgzIDE3LjQyMTQgNjQuMDYwOSAxNyA2MyAxN1YxNy4wM1pNMjAuMDIgMzQuMDcwMUMyMC4wMiAzMi45NjU1IDIwLjkxNTQgMzIuMDcwMSAyMi4wMiAzMi4wNzAxSDQ1LjUxQzQ2LjYxNDYgMzIuMDcwMSA0Ny41MSAzMi45NjU1IDQ3LjUxIDM0LjA3MDFDNDcuNTEgMzUuMTc0NiA0Ni42MTQ2IDM2LjA3MDEgNDUuNTEgMzYuMDcwMUgyMi4wMkMyMC45MTU0IDM2LjA3MDEgMjAuMDIgMzUuMTc0NiAyMC4wMiAzNC4wNzAxWk01MS42OSAzMi4wNzAxQzUwLjU4NTQgMzIuMDcwMSA0OS42OSAzMi45NjU1IDQ5LjY5IDM0LjA3MDFDNDkuNjkgMzUuMTc0NiA1MC41ODU0IDM2LjA3MDEgNTEuNjkgMzYuMDcwMUg1Ny4wMkM1OC4xMjQ2IDM2LjA3MDEgNTkuMDIgMzUuMTc0NiA1OS4wMiAzNC4wNzAxQzU5LjAyIDMyLjk2NTUgNTguMTI0NiAzMi4wNzAxIDU3LjAyIDMyLjA3MDFINTEuNjlaTTMxLjUzIDQxLjU1QzMxLjUzIDQwLjQ0NTUgMzIuNDI1NCAzOS41NSAzMy41MyAzOS41NUg1Ny4wMkM1OC4xMjQ2IDM5LjU1IDU5LjAyIDQwLjQ0NTUgNTkuMDIgNDEuNTVDNTkuMDIgNDIuNjU0NiA1OC4xMjQ2IDQzLjU1IDU3LjAyIDQzLjU1SDMzLjUzQzMyLjQyNTQgNDMuNTUgMzEuNTMgNDIuNjU0NiAzMS41MyA0MS41NVpNMjIuMDIgMzkuNTVDMjAuOTE1NCAzOS41NSAyMC4wMiA0MC40NDU1IDIwLjAyIDQxLjU1QzIwLjAyIDQyLjY1NDYgMjAuOTE1NCA0My41NSAyMi4wMiA0My41NUgyNy4zNUMyOC40NTQ2IDQzLjU1IDI5LjM1IDQyLjY1NDYgMjkuMzUgNDEuNTVDMjkuMzUgNDAuNDQ1NSAyOC40NTQ2IDM5LjU1IDI3LjM1IDM5LjU1SDIyLjAyWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggb3BhY2l0eT0iMC4zIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYzIDE3LjAzSDE2QzE0LjkzOTEgMTcuMDMgMTMuOTIxNyAxNy40NTE0IDEzLjE3MTYgMTguMjAxNkMxMi40MjE0IDE4Ljk1MTcgMTIgMTkuOTY5MSAxMiAyMS4wM1Y0OC44MUMxMiA0OS44NzA5IDEyLjQyMTQgNTAuODg4MyAxMy4xNzE2IDUxLjYzODRDMTMuOTIxNyA1Mi4zODg2IDE0LjkzOTEgNTIuODEgMTYgNTIuODFINDEuOFY2Mi4wNUw1NCA1Mi43OUg2M0M2NC4wNjA5IDUyLjc5IDY1LjA3ODMgNTIuMzY4NiA2NS44Mjg0IDUxLjYxODRDNjYuNTc4NiA1MC44NjgzIDY3IDQ5Ljg1MDkgNjcgNDguNzlWMjFDNjcgMTkuOTM5MSA2Ni41Nzg2IDE4LjkyMTcgNjUuODI4NCAxOC4xNzE2QzY1LjA3ODMgMTcuNDIxNCA2NC4wNjA5IDE3IDYzIDE3VjE3LjAzWk0yMC4wMiAzNC4wNzAxQzIwLjAyIDMyLjk2NTUgMjAuOTE1NCAzMi4wNzAxIDIyLjAyIDMyLjA3MDFINDUuNTFDNDYuNjE0NiAzMi4wNzAxIDQ3LjUxIDMyLjk2NTUgNDcuNTEgMzQuMDcwMUM0Ny41MSAzNS4xNzQ2IDQ2LjYxNDYgMzYuMDcwMSA0NS41MSAzNi4wNzAxSDIyLjAyQzIwLjkxNTQgMzYuMDcwMSAyMC4wMiAzNS4xNzQ2IDIwLjAyIDM0LjA3MDFaTTUxLjY5IDMyLjA3MDFDNTAuNTg1NCAzMi4wNzAxIDQ5LjY5IDMyLjk2NTUgNDkuNjkgMzQuMDcwMUM0OS42OSAzNS4xNzQ2IDUwLjU4NTQgMzYuMDcwMSA1MS42OSAzNi4wNzAxSDU3LjAyQzU4LjEyNDYgMzYuMDcwMSA1OS4wMiAzNS4xNzQ2IDU5LjAyIDM0LjA3MDFDNTkuMDIgMzIuOTY1NSA1OC4xMjQ2IDMyLjA3MDEgNTcuMDIgMzIuMDcwMUg1MS42OVpNMzEuNTMgNDEuNTVDMzEuNTMgNDAuNDQ1NSAzMi40MjU0IDM5LjU1IDMzLjUzIDM5LjU1SDU3LjAyQzU4LjEyNDYgMzkuNTUgNTkuMDIgNDAuNDQ1NSA1OS4wMiA0MS41NUM1OS4wMiA0Mi42NTQ2IDU4LjEyNDYgNDMuNTUgNTcuMDIgNDMuNTVIMzMuNTNDMzIuNDI1NCA0My41NSAzMS41MyA0Mi42NTQ2IDMxLjUzIDQxLjU1Wk0yMi4wMiAzOS41NUMyMC45MTU0IDM5LjU1IDIwLjAyIDQwLjQ0NTUgMjAuMDIgNDEuNTVDMjAuMDIgNDIuNjU0NiAyMC45MTU0IDQzLjU1IDIyLjAyIDQzLjU1SDI3LjM1QzI4LjQ1NDYgNDMuNTUgMjkuMzUgNDIuNjU0NiAyOS4zNSA0MS41NUMyOS4zNSA0MC40NDU1IDI4LjQ1NDYgMzkuNTUgMjcuMzUgMzkuNTVIMjIuMDJaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",fx="data:image/svg+xml;base64, PHN2ZyB3aWR0aD0iNDIiIGhlaWdodD0iNDIiIHZpZXdCb3g9IjAgMCA0MiA0MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMTUuNzUxMyAyOC4yOTcyTDguNDUzNzUgMjAuOTk5N0w1Ljk2ODc1IDIzLjQ2NzJMMTUuNzUxMyAzMy4yNDk3TDM2Ljc1MTMgMTIuMjQ5N0wzNC4yODM4IDkuNzgyMjNMMTUuNzUxMyAyOC4yOTcyWiIgZmlsbD0iI2ZmZmZmZiIvPgo8L3N2Zz4K",hx=function(t){_inherits(CaptionCTA,t);var r=_createSuper(CaptionCTA);function CaptionCTA(){return _classCallCheck(this,CaptionCTA),r.apply(this,arguments)}return _createClass(CaptionCTA,[{key:"track",get:function get(){return this._track},set:function set(t){var r=t.label,i=t.language;this._track=i,this.tag("Label").patch({text:{text:r}})}},{key:"selected",get:function get(){return this._selected},set:function set(t){this._selected=t,this.tag("CheckMark").patch({alpha:t?1:.01})}},{key:"_focus",value:function _focus(){this.selected&&this.tag("CheckMark").patch({color:kg.colours.lightBlue500}),this.tag("Label").patch({color:kg.colours.lightBlue500})}},{key:"_unfocus",value:function _unfocus(){this.selected&&this.tag("CheckMark").patch({color:kg.colours.white500}),this.tag("Label").patch({color:kg.colours.white500})}},{key:"_handleEnter",value:function _handleEnter(){this.fireAncestors("$changeTrack",this.track)}},{key:"announce",get:function get(){var t=this.tag("Label").text.text.replace("CC","Closed Captions");return"".concat(t," ").concat(this.selected?"selected":"")}}],[{key:"height",get:function get(){return 42}},{key:"offset",get:function get(){return 24}},{key:"_template",value:function _template(){return{h:42,w:551,flex:{direction:"row",alignItems:"center",wrap:!1},CheckMark:{alpha:.01,flexItem:{marginRight:10},h:42,w:42,color:kg.colours.white500,texture:j.Tools.getSvgTexture(fx,42,42)},Label:{text:_objectSpread2(_objectSpread2({},kg.TextStyles.bodyCopy),{},{color:kg.colours.white500,text:""})}}}}]),CaptionCTA}(j.Component),gx=function(t){_inherits(SubtitleSidebar,t);var r=_createSuper(SubtitleSidebar);function SubtitleSidebar(){return _classCallCheck(this,SubtitleSidebar),r.apply(this,arguments)}return _createClass(SubtitleSidebar,[{key:"_init",value:function _init(){this._index=0}},{key:"tracks",get:function get(){return this._tracks||[]},set:function set(t){var r=this;if(void 0===t&&(t=[]),t.length){this._tracks=t,this._currentTrack=G("bb_captions_lang")||null;var i=t.map((function(t,i){var a=t.language,u=t.purpose,l=_slicedToArray(a.split("-"),1)[0],c=tx.getName(l);"hard-of-hearing"===u&&(c+=" (CC)");var d=a===r._currentTrack;return d&&(r._index=i+1),{type:hx,selected:d,track:{label:c,language:a},flexItem:{marginBottom:hx.offset}}}));i.unshift({type:hx,selected:!this._currentTrack,track:{label:"Off",language:null},flexItem:{marginBottom:hx.offset}}),this.tag("Container").children=i}}},{key:"$changeTrack",value:function $changeTrack(t){var r=this;t!==this._currentTrack?(this._currentTrack=t,this.tag("Container").children.forEach((function(t){t.selected=t.track===r._currentTrack})),t?H("bb_captions_lang",t):Q("bb_captions_lang"),this.fireAncestors("$changeTextTrack",t)):this.fireAncestors("$setView",HN)}},{key:"_inactive",value:function _inactive(){var t=this;if(null!==this._currentTrack){var r=this.tracks.find((function(r){return r.language===t._currentTrack}));this._index=this.tracks.indexOf(r)+1}else this._index=0}},{key:"_getFocused",value:function _getFocused(){return this.tag("Container").children[this._index]}},{key:"_handleUp",value:function _handleUp(){this._index>0&&(this._index-=1)}},{key:"_handleDown",value:function _handleDown(){this._index<this.tag("Container").children.length-1&&(this._index+=1)}},{key:"announce",get:function get(){return this.tag("Title").text.text}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,Overlay:{w:1255,h:1080,rect:!0,color:kg.colours.playerSubtitleOverlay},Sidebar:{x:1255,w:665,h:1080,rect:!0,color:kg.colours.mutedBlue500,Title:{y:210,x:56,text:_objectSpread2(_objectSpread2({},kg.TextStyles.h2),{},{text:"Subtitles"})},Container:{y:300,x:56,flex:{direction:"column",wrap:!1}}}}}}]),SubtitleSidebar}(j.Component),px=function(t){_inherits(BaseButton,t);var r=_createSuper(BaseButton);function BaseButton(){return _classCallCheck(this,BaseButton),r.apply(this,arguments)}return _createClass(BaseButton,[{key:"icon",set:function set(t){this.patch({texture:j.Tools.getSvgTexture(t,80,80)})}},{key:"label",set:function set(t){t&&(this._label=t)}},{key:"_focus",value:function _focus(){this.patch({color:kg.colours.lightBlue500})}},{key:"_unfocus",value:function _unfocus(){this.patch({color:kg.colours.lightBlue50})}},{key:"_handleEnter",value:function _handleEnter(){return!!this.signalName&&(this.signal(this.signalName),!0)}},{key:"announce",get:function get(){return this._label?"".concat(this._label," button"):""}}],[{key:"_template",value:function _template(){return{w:80,h:80,color:kg.colours.lightBlue50}}}]),BaseButton}(j.Component);function calculateProgressBarPosition(t,r){var i=t/r;return Math.round(1450*i)}var mx=function(t){_inherits(ProgressBar,t);var r=_createSuper(ProgressBar);function ProgressBar(){return _classCallCheck(this,ProgressBar),r.apply(this,arguments)}return _createClass(ProgressBar,[{key:"currentTime",set:function set(t){if(t&&this.duration&&!(t>this.duration)){var r=t/this.duration*ProgressBar.progressWidth;this.patch({CurrentTime:{text:{text:Mg.secondsToTime(t)}},ProgressBar:{Progress:{w:r}},Duration:{text:{text:Mg.secondsToTime(this.duration-t)}}})}}},{key:"seeking",set:function set(t){var r=t.seeking,i=t.position,a=void 0===i?0:i;r&&this.patch({CurrentTime:{text:{text:Mg.secondsToTime(a)}},ProgressBar:{Progress:{w:calculateProgressBarPosition(a,this._duration)}}})}},{key:"duration",get:function get(){return this._duration||null},set:function set(t){this._duration=t}}],[{key:"_template",value:function _template(){return{w:1690,h:42,flex:{direction:"row",alignItems:"center",justifyContent:"space-between",wrap:!1},CurrentTime:{w:120,text:_objectSpread2({text:""},kg.TextStyles.bodyCopy)},ProgressBar:{w:ProgressBar.progressWidth,h:10,Progress:{zIndex:2,w:0,h:function h(t){return t},rect:!0,color:kg.colours.lightBlue50,shader:{type:j.shaders.RoundedRectangle,radius:8,stroke:4,strokeColor:kg.colours.lightBlue50}},Background:{zIndex:1,w:ProgressBar.progressWidth,h:function h(t){return t},rect:!0,color:kg.colours.playerProgressBar,shader:{type:j.shaders.RoundedRectangle,radius:8,stroke:4,strokeColor:kg.colours.playerProgressBar}}},Duration:{w:120,text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.bodyCopy),{},{textAlign:"right"})}}}},{key:"progressWidth",get:function get(){return 1450}}]),ProgressBar}(j.Component),yx=function(t){_inherits(SeekDisplay,t);var r=_createSuper(SeekDisplay);function SeekDisplay(){var t;_classCallCheck(this,SeekDisplay);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_width",250),t}return _createClass(SeekDisplay,[{key:"duration",get:function get(){return this._duration},set:function set(t){this._duration=t}},{key:"seeking",set:function set(t){var r=t.seeking,i=t.position,a=t.forwards,u=t.speed;if(r){var l=this._calculatePosition(i),c=a?nx:sx,d="".concat(Math.abs(u),"x");this.patch({x:l,visible:!0,Container:{Time:{text:{text:Mg.secondsToTime(i)}},Speed:{Icon:{texture:j.Tools.getSvgTexture(c,28,28)},Text:{text:{text:d}}}}})}else this.patch({visible:!1})}},{key:"_calculatePosition",value:function _calculatePosition(t){var r=235-this._width/2;return calculateProgressBarPosition(t,this._duration)+r}}],[{key:"_template",value:function _template(){return{visible:!1,Container:{y:182,h:120,w:250,rect:!0,color:kg.colours.playerSeekDisplay,zIndex:1,flex:{direction:"column",alignItems:"center",justifyContent:"center"},Speed:{h:70,w:250,rect:!0,color:kg.colours.darkBlue500,flex:{direction:"row",alignItems:"center",justifyContent:"center"},Icon:{h:28,w:28,flexItem:{marginRight:16}},Text:{text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.smallCopy),{},{fontFace:"MuseoSansRounded_bold",fontSize:24,verticalAlign:"middle"})}},Time:{h:50,text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.smallCopy),{},{fontSize:24,lineHeight:33,verticalAlign:"middle"})}},Arrow:{y:301,x:93,h:32,w:64,clipping:!0,color:kg.colours.heroOverlayEnd,rect:!0,Inner:{y:-52,h:64,w:64,rect:!0,color:kg.colours.playerSeekDisplay,rotation:.7854}}}}}]),SeekDisplay}(j.Component),vx=function(t){_inherits(ThumbnailShader,t);var r=_createSuper(ThumbnailShader);function ThumbnailShader(t){var i;return _classCallCheck(this,ThumbnailShader),(i=r.call(this,t))._x=0,i._y=0,i._w=0,i._h=0,i._finalW=0,i._finalH=0,i}return _createClass(ThumbnailShader,[{key:"x",get:function get(){return this._x},set:function set(t){this._x=t,this.redraw()}},{key:"y",get:function get(){return this._y},set:function set(t){this._y=t,this.redraw()}},{key:"w",get:function get(){return this._w},set:function set(t){this._w=t,this.redraw()}},{key:"h",get:function get(){return this._h},set:function set(t){this._h=t,this.redraw()}},{key:"finalW",get:function get(){return this._finalW},set:function set(t){this._finalW=t,this.redraw()}},{key:"finalH",get:function get(){return this._finalH},set:function set(t){this._finalH=t,this.redraw()}},{key:"setupUniforms",value:function setupUniforms(t){_get(_getPrototypeOf(ThumbnailShader.prototype),"setupUniforms",this).call(this,t);var r=this.ctx.stage.getRenderPrecision();this._setUniform("x",this._x*r,this.gl.uniform1f),this._setUniform("y",this._y*r,this.gl.uniform1f),this._setUniform("w",this._w*r,this.gl.uniform1f),this._setUniform("h",this._h*r,this.gl.uniform1f),this._setUniform("finalW",this._finalW*r,this.gl.uniform1f),this._setUniform("finalH",this._finalH*r,this.gl.uniform1f)}},{key:"useDefault",value:function useDefault(){return 0===this._x&&0===this._y&&0===this._w&&0===this._h&&0===this._finalW&&0===this._finalH}}]),ThumbnailShader}(j.shaders.WebGLDefaultShader);vx.fragmentShaderSource="\n  #ifdef GL_ES\n  # ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  # else\n  precision lowp float;\n  # endif\n  #endif\n\n  varying vec2 vTextureCoord;\n  varying vec4 vColor;\n  uniform sampler2D uSampler;\n  uniform float x;\n  uniform float y;\n  uniform float w;\n  uniform float h;\n  uniform float finalW;\n  uniform float finalH;\n\n  vec4 getPixelAtPos() {\n    float scale = finalW / w;\n    float gridSize = 5.0; // The thumbnail images are a 5x5 grid\n\n    // If the current pixel is outside of the required image size, ignore it and return an empty pixel instead\n    if (vTextureCoord.x > finalW / (w * gridSize) || vTextureCoord.y > finalH / (h * gridSize)) {\n      return vec4(0.0);\n    }\n\n    // Gets the pixel at the target frame that corresponds to the current pixel position\n    // This essentially moves the target image to the top left which is the visible area\n    vec2 coord = (vTextureCoord + vec2((x * scale) / (w * gridSize), (y * scale) / (h * gridSize))) / scale;\n\n    return texture2D(uSampler, coord);\n  }\n\n  void main(void) {\n    vec4 colour = getPixelAtPos();\n    gl_FragColor = colour;\n  }\n";var _x=function(t){_inherits(SeekDisplayWithThumbnails,t);var r=_createSuper(SeekDisplayWithThumbnails);function SeekDisplayWithThumbnails(){var t;_classCallCheck(this,SeekDisplayWithThumbnails);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_width",448),_defineProperty(_assertThisInitialized(t),"_currentThumbnailIndex",0),_defineProperty(_assertThisInitialized(t),"_currentThumbnail",""),_defineProperty(_assertThisInitialized(t),"_thumbnails",[]),t}return _createClass(SeekDisplayWithThumbnails,[{key:"thumbnails",get:function get(){return this._thumbnails},set:function set(t){this._thumbnails=t}},{key:"seeking",set:function set(t){var r=t.seeking,i=t.position,a=t.forwards,u=t.speed;_set(_getPrototypeOf(SeekDisplayWithThumbnails.prototype),"seeking",{seeking:r,position:i,forwards:a,speed:u},this,!0),this.thumbnails.length&&this._updateThumbnail(i)}},{key:"currentThumbnail",set:function set(t){if(this._currentThumbnail!==t)if(this._currentThumbnail=t,t){var r=_slicedToArray(t.split("#xywh="),2),i=r[0],a=_slicedToArray(r[1].split(","),4),u=a[0],l=a[1],c=a[2],d=a[3];this.tag("Thumbnail").patch({Image:{texture:Img(i).original(),shader:{type:vx,x:u,y:l,w:c,h:d,finalW:448,finalH:252}}})}else this.patch({visible:!1})}},{key:"_updateThumbnail",value:function _updateThumbnail(t){var r=Mg.getIndexFromTime(this.thumbnails,t,this._currentThumbnailIndex);if(null!==r){var i=this.thumbnails[r];this.currentThumbnail=i.text,this._currentThumbnailIndex=r}else this.currentThumbnail=""}}],[{key:"_template",value:function _template(){return{visible:!1,Thumbnail:{w:448,h:252,rect:!0,color:kg.colours.darkBlue500,clipping:!0,zIndex:2},Container:{y:251,h:50,w:448,rect:!0,color:kg.colours.playerSeekDisplay,zIndex:1,flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},Time:{flexItem:{marginLeft:20},text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.smallCopy),{},{fontSize:24,verticalAlign:"middle"})},Speed:{flex:{direction:"row",alignItems:"center",justifyContent:"center"},Icon:{h:28,w:28,flexItem:{marginRight:16}},Text:{flexItem:{marginRight:20},text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.smallCopy),{},{fontFace:"MuseoSansRounded_bold",fontSize:24,verticalAlign:"middle"})}}},Arrow:{y:301,x:192,h:32,w:64,clipping:!0,color:kg.colours.heroOverlayEnd,rect:!0,Inner:{y:-52,h:64,w:64,rect:!0,color:kg.colours.playerSeekDisplay,rotation:.7854}}}}}]),SeekDisplayWithThumbnails}(yx),Tx=function(t){_inherits(Controls,t);var r=_createSuper(Controls);function Controls(){var t;_classCallCheck(this,Controls);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_index",3),t}return _createClass(Controls,[{key:"visibilityStatus",set:function set(t){this.buttonsVisible="invisible"!==t&&"fadingOut"!==t}},{key:"paused",get:function get(){return this._paused},set:function set(t){this._paused=t;var r=t?ox:ax,i=t?"Play":"Pause";this.tag("PlayPause").patch({icon:r,label:i})}},{key:"currentTime",get:function get(){return this._currentTime},set:function set(t){this._currentTime=t,this.tag("ProgressBar").currentTime=t}},{key:"duration",get:function get(){return this._duration},set:function set(t){this._duration=t,this.tag("ProgressBar").duration=t;var r=this.thumbnails?"SeekDisplayWithThumbnails":"SeekDisplay";this.tag(r).duration=t}},{key:"seeking",set:function set(t){var r=this.thumbnails?"SeekDisplayWithThumbnails":"SeekDisplay";this.tag(r).seeking=t,this.tag("ProgressBar").seeking=t}},{key:"hasNextEpisode",set:function set(t){var r=this;this.tag("NextEpisodeButton").patch({visible:!!t,item:{icon:ix,iconPosition:"after",text:"Next Episode",callback:function callback(){return r.fireAncestors("$playNextAsset")}}})}},{key:"hasTextTracks",set:function set(t){this.tag("Subtitles").patch({visible:!!t})}},{key:"thumbnails",get:function get(){return this._thumbnails||null},set:function set(t){this._thumbnails=t,this.tag("SeekDisplayWithThumbnails").thumbnails=t}},{key:"isSubtitleActive",set:function set(t){this.tag("Subtitles").patch({icon:t?dx:cx})}},{key:"_toggleSubtitles",value:function _toggleSubtitles(){this.fireAncestors("$toggleSubtitles")}},{key:"_skipBack",value:function _skipBack(){this.fireAncestors("$skip",-10)}},{key:"_rewind",value:function _rewind(){this.fireAncestors("$rewind")}},{key:"_playPause",value:function _playPause(){this.paused?(this.fireAncestors("$play"),this.fireAncestors("$announce",["Pause button"])):(this.fireAncestors("$pause"),this.fireAncestors("$announce",["Play button"]))}},{key:"_fastForward",value:function _fastForward(){this.fireAncestors("$fastForward")}},{key:"_skipForward",value:function _skipForward(){this.fireAncestors("$skip",10)}},{key:"_getFocused",value:function _getFocused(){return!!this.buttonsVisible&&this.tag("Buttons").children[this._index]}},{key:"_handleRight",value:function _handleRight(){var t=this.tag("Buttons").children[this._index+1];return t&&t.visible&&(this._index+=1),!0}},{key:"_handleLeft",value:function _handleLeft(){var t=this.tag("Buttons").children[this._index-1];return t&&t.visible&&(this._index-=1),!0}},{key:"resetFocus",value:function resetFocus(){this._index=3,this._refocus()}}],[{key:"_template",value:function _template(){return{SeekDisplay:{visible:!1,y:-224,type:yx},SeekDisplayWithThumbnails:{visible:!1,y:-224,type:_x},ProgressBar:{x:115,y:88,type:mx},Buttons:{y:165,Subtitles:{x:455,visible:!1,type:px,signalName:"toggleSubtitles",signals:{toggleSubtitles:"_toggleSubtitles"},label:"Subtitles"},SkipBack:{x:610,type:px,icon:ux,signalName:"skipBack",signals:{skipBack:"_skipBack"},label:"Skip Back 10 seconds"},Rewind:{x:765,type:px,icon:sx,signalName:"rewind",signals:{rewind:"_rewind"},label:"Rewind"},PlayPause:{x:920,type:px,icon:ax,signalName:"playPause",signals:{playPause:"_playPause"}},FastForward:{x:1075,type:px,icon:nx,signalName:"fastForward",signals:{fastForward:"_fastForward"},label:"Fast Forward"},SkipForward:{x:1230,type:px,icon:lx,signalName:"skipForward",signals:{skipForward:"_skipForward"},label:"Skip Forward  10 seconds"},NextEpisodeButton:{visible:!1,w:332,x:1473,type:uI}}}}}]),Controls}(j.Component),bx=function(t){_inherits(BackButton,t);var r=_createSuper(BackButton);function BackButton(){return _classCallCheck(this,BackButton),r.apply(this,arguments)}return _createClass(BackButton,[{key:"icon",set:function set(t){this.patch({texture:j.Tools.getSvgTexture(t,34,25)})}},{key:"label",set:function set(t){t&&(this._label=t)}},{key:"_focus",value:function _focus(){this.patch({color:kg.colours.lightBlue500})}},{key:"_unfocus",value:function _unfocus(){this.patch({color:kg.colours.lightBlue50})}},{key:"_handleEnter",value:function _handleEnter(){return!!this.signalName&&(this.signal(this.signalName),!0)}},{key:"announce",get:function get(){return this._label?"".concat(this._label," button"):""}}],[{key:"_template",value:function _template(){return{w:34,h:25,color:kg.colours.lightBlue50}}}]),BackButton}(j.Component),Mx=function(t){_inherits(Info,t);var r=_createSuper(Info);function Info(){return _classCallCheck(this,Info),r.apply(this,arguments)}return _createClass(Info,[{key:"item",set:function set(t){var r=t.episodeName,i=t.showTitle,a=t.title,u=t.type,l=t.episodeNumber,c=t.season,d=i,g="episode"===u?"S".concat(c.seasonNumber," E").concat(l," • ").concat(r):a;"movie"!==u&&"trailer"!==u&&"program"!==u||(d=a,g=null),this.patch({Heading:{text:{text:d}},SubHeading:{visible:!!g,text:{text:g}},BackButton:{icon:rx,signalName:"back",signals:{back:"_backHandler"},label:"Back"}})}},{key:"_getFocused",value:function _getFocused(){return this.tag("BackButton")}},{key:"_backHandler",value:function _backHandler(){this.fireAncestors("$back")}}],[{key:"_template",value:function _template(){return{flex:{direction:"column",wrap:!1},Heading:{text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.h2),{},{lineHeight:30,fontWeight:600,fontSize:38})},SubHeading:{text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.featuredCopy),{},{fontWeight:400,fontSize:32,lineHeight:30})},BackButton:{type:bx,y:24,w:34,h:25}}}}]),Info}(j.Component),Sx=function(t){_inherits(UI,t);var r=_createSuper(UI);function UI(){var t;_classCallCheck(this,UI);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_index",1),t}return _createClass(UI,[{key:"item",set:function set(t){this.tag("Info").item=t}},{key:"nextAsset",set:function set(t){t&&(this.tag("Controls").hasNextEpisode=!0)}},{key:"hasTextTracks",set:function set(t){void 0===t&&(t=!1),this.tag("Controls").hasTextTracks=t}},{key:"subtitleStatus",set:function set(t){void 0===t&&(t=!1),this.tag("Controls").patch({isSubtitleActive:t})}},{key:"thumbnails",set:function set(t){this.tag("Controls").thumbnails=t}},{key:"paused",get:function get(){return this._paused},set:function set(t){t!==this.paused&&(this._paused=t,this.tag("Controls").paused=t)}},{key:"currentTime",get:function get(){return this._currentTime||0},set:function set(t){t!==this.currentTime&&(this._currentTime=t,this.tag("Controls").currentTime=t)}},{key:"duration",set:function set(t){this.tag("Controls").duration=t}},{key:"seeking",set:function set(t){this.tag("Controls").seeking=t}},{key:"visibilityStatus",set:function set(t){this.tag("Controls").visibilityStatus=t}},{key:"_handleUp",value:function _handleUp(){return this._index=0,!0}},{key:"_handleDown",value:function _handleDown(){return this._index=1,!0}},{key:"_getFocused",value:function _getFocused(){return 0===this._index?this.tag("Info"):this.tag("Controls")}},{key:"resetFocus",value:function resetFocus(){this._index=1,this.tag("Controls").resetFocus()}}],[{key:"_template",value:function _template(){return{TopOverlay:{w:1920,h:540,rect:!0,colorTop:kg.colours.playerOverlayStart,colorBottom:kg.colours.playerOverlayEnd},BottomOverlay:{w:1920,h:540,y:540,rect:!0,colorTop:kg.colours.playerOverlayEnd,colorBottom:kg.colours.playerOverlayStart},Info:{zIndex:1,x:115,y:88,type:Mx},Controls:{zIndex:1,x:0,y:744,type:Tx}}}}]),UI}(j.Component),Ex=function(t){_inherits(SubtitleContainer,t);var r,i=_createSuper(SubtitleContainer);function SubtitleContainer(){var t;_classCallCheck(this,SubtitleContainer);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=i.call.apply(i,[this].concat(a))),"_currentSubtitleIndex",0),_defineProperty(_assertThisInitialized(t),"_currentText",""),_defineProperty(_assertThisInitialized(t),"_subtitles",[]),_defineProperty(_assertThisInitialized(t),"_currentTime",0),t}return _createClass(SubtitleContainer,[{key:"subtitles",get:function get(){return this._subtitles},set:function set(t){this._subtitles=t}},{key:"fetchSubtitlesFromCaption",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r;return regeneratorRuntime.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Ni.getCaptionVTT(t.href);case 2:r=i.sent,this.subtitles=r.entries;case 4:case"end":return i.stop()}}),_callee,this)}))),function fetchSubtitlesFromCaption(t){return r.apply(this,arguments)})},{key:"caption",set:function set(t){t!==this._caption&&(this._caption=t,this.patch({visible:Boolean(t)}),t&&this.fetchSubtitlesFromCaption(t))}},{key:"status",set:function set(t){this._status=t,this.patch({y:t===BN?SubtitleContainer.yPosDefault:SubtitleContainer.yPosWithControls})}},{key:"currentText",get:function get(){return this._currentText},set:function set(t){var r=this;if(this._currentText!==t){this._currentText=t;var i=t.split("\n").map((function(t,i){return{flexItem:{marginTop:0===i?0:12},text:_objectSpread2(_objectSpread2({},r.closedCaptionsStyles),{},{text:t})}}));this.tag("SubtitleContent").patch({children:i})}}},{key:"currentTime",set:function set(t){if(this._currentTime!==t&&(this._currentTime=t,this.subtitles.length)){var r=Mg.getIndexFromTime(this.subtitles,t,this._currentSubtitleIndex);if(null!==r){var i=this.subtitles[r];this.currentText=i.text,this._currentSubtitleIndex=r}else this.currentText=""}}},{key:"closedCaptionsStyles",get:function get(){return this._closedCaptionsStyles},set:function set(t){var r=_objectSpread2(_objectSpread2({},SubtitleContainer.subtitleLineStyle),t),i=r.fontFace,a=Mg.getMappedFontName(i);this._closedCaptionsStyles=_objectSpread2(_objectSpread2({},r),{},{fontFace:a})}},{key:"_attach",value:function _attach(){var t=this;this.subtitles=[],this._closedCaptionsStyles=_objectSpread2({},SubtitleContainer.subtitleLineStyle),this._closedCaptionsSubscription=UM.accessibilitySettings$.subscribe((function(r){var i=Mg.mapClosedCaptionsSettingsToLightning(r);i.enabled&&(t.closedCaptionsStyles=i.styles)}))}},{key:"_inactive",value:function _inactive(){var t;this.subtitles=[],this._currentSubtitleIndex=0,null===(t=this._closedCaptionsSubscription)||void 0===t||t.unsubscribe()}}],[{key:"_template",value:function _template(){return{w:1920,h:this.contentHeight+this.paddingBottom,y:this.yPosDefault,flex:{alignItems:"flex-end",justifyContent:"center"},SubtitleContent:{flexItem:{marginBottom:this.paddingBottom},w:function w(t){return t},h:function h(t){return t},flex:{direction:"column",alignItems:"center",justifyContent:"flex-end"}}}}}]),SubtitleContainer}(j.Component);_defineProperty(Ex,"contentHeight",234),_defineProperty(Ex,"paddingBottom",60),_defineProperty(Ex,"paddingWithControls",312),_defineProperty(Ex,"yPosDefault",1080-Ex.contentHeight-Ex.paddingBottom),_defineProperty(Ex,"yPosWithControls",1080-Ex.contentHeight-Ex.paddingWithControls),_defineProperty(Ex,"subtitleLineStyle",_objectSpread2(_objectSpread2({},kg.TextStyles.subtitle),{},{textColor:4294967295,highlight:!0,highlightPaddingLeft:16,highlightPaddingRight:16,highlightColor:2147483648,textAlign:"center"}));var Ix=function(t){_inherits(VideoPlayer,t);var r=_createSuper(VideoPlayer);function VideoPlayer(){var t;_classCallCheck(this,VideoPlayer);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_view",HN),_defineProperty(_assertThisInitialized(t),"_previousView",""),_defineProperty(_assertThisInitialized(t),"_visibilityStatus",BN),_defineProperty(_assertThisInitialized(t),"_initiated",!1),_defineProperty(_assertThisInitialized(t),"_autoNextInitiated",!1),_defineProperty(_assertThisInitialized(t),"_timeFromEnd",30),_defineProperty(_assertThisInitialized(t),"_reportInterval",void 0),_defineProperty(_assertThisInitialized(t),"_isBuffering",!1),_defineProperty(_assertThisInitialized(t),"_bufferStarted",!1),_defineProperty(_assertThisInitialized(t),"_seekTarget",null),_defineProperty(_assertThisInitialized(t),"_seekTime",null),_defineProperty(_assertThisInitialized(t),"_seekInterval",void 0),_defineProperty(_assertThisInitialized(t),"_fastForwarding",!1),_defineProperty(_assertThisInitialized(t),"_rewinding",!1),_defineProperty(_assertThisInitialized(t),"_speed",1),_defineProperty(_assertThisInitialized(t),"_continuedWatchingCurrentAsset",!1),_defineProperty(_assertThisInitialized(t),"_manifestIndex",{captions:0,thumbnails:0,video:0}),_defineProperty(_assertThisInitialized(t),"_precision",window.innerHeight/1080),t}return _createClass(VideoPlayer,[{key:"onForeground",value:function onForeground(){this.play()}},{key:"onBackground",value:function onBackground(){this.view!==YN&&this.view!==QN&&(this.view=HN),this._stopSeekInterval(),this._reportPosition(),this.pause()}},{key:"currentTime",get:function get(){return this._currentTime||0},set:function set(t){if(t>=0){if(this._isBuffering){var r=Math.abs(t-this._seekTarget);!this._bufferStarted&&(t===this._seekTarget||r>4)?(this._bufferStarted=!0,this._showLoadingSpinner()):this._bufferStarted&&t!==this.currentTime&&(this._bufferStarted=!1,this._seekTarget=null,this._hideLoadingSpinner())}this.view!==HN||this.visibilityStatus===BN&&PN.playing||(this.tag("UI").currentTime=t,this.tag("UI").paused=!PN.playing),this.duration>0&&t>=this.duration-this._timeFromEnd&&!this._autoNextInitiated&&(this._autoNextInitiated=!0,this.nextAsset?this._displayNextAsset():"trailer"!==this.item.type&&"program"!==this.item.type&&this._displayRelatedContent()),this.view===YN&&(this.tag("AutoPlayNext").currentTime=t),this.tag("Subtitles").visible&&(this.tag("Subtitles").currentTime=t),this._currentTime=t,this._maybeSendPlayLearnAction()}}},{key:"duration",get:function get(){return this._duration},set:function set(t){t>=0&&t!==1/0&&(this._duration=t,this.tag("UI").duration=t,this.tag("AutoPlayNext").duration=t)}},{key:"view",get:function get(){return this._view},set:function set(t){if(t!==this.view){switch(this._previousView=this.view,this._view=t,t){case YN:this.visibilityStatus=BN,this.tag("UI").patch({alpha:.01,visible:!1}),this._hideLoadingSpinner(),this.continuedWatchingCurrentAsset?this.close():this.resizePlayer(323,183,115,88),this.tag("AutoPlayNext").patch({visible:!0}),this.tag("Subtitles").visible=!1;break;case GN:this._hideLoadingSpinner(),this.tag("ContentRating").patch({visible:!0});break;case QN:this.visibilityStatus=BN,this.tag("UI").patch({alpha:.01,visible:!1}),this._hideLoadingSpinner(),this.continuedWatchingCurrentAsset?this.close():this.resizePlayer(323,183,115,88),this.tag("RelatedContent").patch({visible:!0}),this.tag("Subtitles").visible=!1;break;case VN:this.visibilityStatus=BN,this.tag("UI").patch({alpha:.01,visible:!1}),this.tag("SubtitleSidebar").patch({visible:!0});break;default:this.tag("ContentRating").patch({visible:!1}),this.tag("SubtitleSidebar").patch({visible:!1}),this.tag("AutoPlayNext").patch({visible:!1}),this.tag("RelatedContent").patch({visible:!1}),this.resizePlayer(1920,1080),this.visibilityStatus=BN,this.tag("UI").patch({alpha:.01,visible:!0})}this._refocus()}}},{key:"previousView",get:function get(){return this._previousView},set:function set(t){this._previousView=t}},{key:"continuedWatchingCurrentAsset",get:function get(){return this._continuedWatchingCurrentAsset},set:function set(t){this._continuedWatchingCurrentAsset=t}},{key:"resizePlayer",value:function resizePlayer(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;PN.area(a*this._precision,(t+i)*this._precision,(r+a)*this._precision,i*this._precision)}},{key:"_init",value:function _init(){this.appConfig=hE(),this._reportPosition=this._reportPosition.bind(this),this._displayNextAsset=this._displayNextAsset.bind(this),this._displayRelatedContent=this._displayRelatedContent.bind(this),this._showLoadingSpinner=this._showLoadingSpinner.bind(this),this._hideLoadingSpinner=this._hideLoadingSpinner.bind(this),this._taThreshold=PE(.3,["general","customFields","taPlayedThreshold"],this.appConfig),this._timeFromEnd=PE(15,["playback","chainPlaySqueezeback"],this.appConfig)}},{key:"_firstActive",value:function _firstActive(){PN.consumer(this)}},{key:"_active",value:function _active(){var t=this,r=this.manifests.video[this._manifestIndex.video].href,i=!!this.manifests.captions.length;this._showLoadingSpinner(),this._seekTarget=this.startPosition;var a={startPosition:this.startPosition};if(this.drmInfo){var u=this._getDrmConfig(this.drmInfo);a=_objectSpread2(_objectSpread2({},a),u)}if(this.resizePlayer(1920,1080),PN.open(r,a),this.tag("ContentRating").item=this.item,this.tag("SubtitleSidebar").tracks=this.manifests.captions,this._currentSubtitleTrack=G("bb_captions_lang")||null,this._currentSubtitleTrack){var l,c=null===(l=this.manifests.captions)||void 0===l?void 0:l.find((function(r){return r.language===t._currentSubtitleTrack}));this.tag("Subtitles").caption=c}this.tag("UI").patch({item:this.item,nextAsset:this.nextAsset,hasTextTracks:i,thumbnails:this.thumbnails,subtitleStatus:Boolean(this._currentSubtitleTrack)}),this._startTime=Date.now()}},{key:"_getFocused",value:function _getFocused(){return this.view===YN?this.tag("AutoPlayNext"):this.view===GN?this.tag("ContentRating"):this.view===QN?this.tag("RelatedContent"):this.view===VN?this.tag("SubtitleSidebar"):this.view===HN?this.tag("UI"):null}},{key:"_displayNextAsset",value:function _displayNextAsset(){this.nextAsset&&(this.tag("AutoPlayNext").data=[this.nextAsset,this.item],this.view=YN)}},{key:"_displayRelatedContent",value:function _displayRelatedContent(){var t=this;Ni.getRelatedContent(this.item.id).then((function(r){var i=r.items,a=void 0===i?[]:i;return a.length&&(t.tag("RelatedContent").data=[a,t.item],t.view=QN),null})).catch((function(t){}))}},{key:"_showLoadingSpinner",value:function _showLoadingSpinner(){this._isBuffering=!0,this.tag("LoadingSpinner").patch({visible:!0})}},{key:"_hideLoadingSpinner",value:function _hideLoadingSpinner(){this._isBuffering=!1,this.tag("LoadingSpinner").patch({visible:!1})}},{key:"_maybeSendPlayLearnAction",value:function _maybeSendPlayLearnAction(){this.currentTime>=this.duration*this._taThreshold&&!Mg.recordExistsForCustomId(this.item.customId)&&this._sendPlayLearnAction()}},{key:"_sendPlayLearnAction",value:function _sendPlayLearnAction(){if(isValidTAVideoType(this.item.type)){var t=this._getThinkAnalyticsRequestData();Tn.sendPlayLearnAction(t)}}},{key:"_sendStopLearnAction",value:function _sendStopLearnAction(){if(isValidTAVideoType(this.item.type)){var t=this._getThinkAnalyticsRequestData();Tn.sendStopLearnAction(t)}}},{key:"_getThinkAnalyticsRequestData",value:function _getThinkAnalyticsRequestData(){var t=getThinkAnalyticsData(),r=t.pageTemplate,i=t.pagePath,a=t.timezone,u=t.refUseCase;return{customId:this.item.customId||this.item.id,position:Math.floor(this.currentTime),sessionDuration:Math.floor((Date.now()-this._startTime)/1e3),timezone:a,pageTemplate:r,pagePath:i,refUseCase:u}}},{key:"$videoPlayerTimeUpdate",value:function $videoPlayerTimeUpdate(t,r){if(this.currentTime=r,!this._initiated&&0!==r){this._initiated=!0;XE("player:media_start",{callbacks:{getPosition:function getPosition(){return 1e3*this.currentTime},getTimestamp:function getTimestamp(){return 0}},currentTime:this.currentTime,assetId:this.item.customId});var i=PE(60,["playback","heartbeatFrequency"],this.appConfig);this._reportInterval=setInterval(this._reportPosition,1e3*i),this.resizePlayer(1920,1080),this.view=GN}}},{key:"$videoPlayerDurationChange",value:function $videoPlayerDurationChange(){this.duration=PN.duration}},{key:"$videoPlayerPlaying",value:function $videoPlayerPlaying(){XE("player:play",{currentTime:this.currentTime}),this.tag("UI").paused=!PN.playing}},{key:"$videoPlayerPause",value:function $videoPlayerPause(){XE("player:pause",{currentTime:this.currentTime}),this.tag("UI").paused=!PN.playing}},{key:"$videoPlayerSeeking",value:function $videoPlayerSeeking(){XE("player:seek_start",{currentTime:this.currentTime})}},{key:"$videoPlayerSeeked",value:function $videoPlayerSeeked(){XE("player:play",{currentTime:this.currentTime}),this.view===HN&&(this.visibilityStatus=UN)}},{key:"$videoPlayerError",value:function $videoPlayerError(t){var r=kE(["error","code"],t);return!r&&this.currentTime>=this.duration?this.$videoPlayerEnded():eN("1E-00".concat(r))}},{key:"$videoPlayerEvent",value:function $videoPlayerEvent(t,r){}},{key:"$videoPlayerEnded",value:function $videoPlayerEnded(){XE("player:ended",{currentTime:this.currentTime}),"trailer"!==this.item.type&&"program"!==this.item.type?this.nextAsset&&this.view===YN?this.$playNextAsset():this.view===HN&&(this.nextAsset?(this.tag("AutoPlayNext").shouldPlayerBeDisplayed=!this.continuedWatchingCurrentAsset,this.tag("AutoPlayNext").duration=void 0,this.view=YN):(this.tag("RelatedContent").shouldPlayerBeDisplayed=!this.continuedWatchingCurrentAsset,this.view=QN)):this.$back()}},{key:"$videoPlayerClear",value:function $videoPlayerClear(){this.currentTime&&this.duration&&XE("player:stop",{currentTime:this.currentTime,finished:this._autoNextInitiated,progress:(this.currentTime/this.duration).toFixed(2)||0,assetId:this.item.customId})}},{key:"startTimeAnnouncement",value:function startTimeAnnouncement(){var t=this;this.announceTime=setInterval((function(){t.fireAncestors("$announce",["time ".concat(Mg.secondsToTime(t._seekTime))],{append:!0})}),5e3)}},{key:"$pause",value:function $pause(){this.pause()}},{key:"pause",value:function pause(){PN.pause(),this.tag("UI").currentTime=this.currentTime}},{key:"$play",value:function $play(){this.play(),clearInterval(this.announceTime)}},{key:"play",value:function play(){if(this._seekTime)return this.seek(this._seekTime),void this._stopSeekInterval();PN.play()}},{key:"$skip",value:function $skip(t){this._stopSeekInterval(),this.skip(t)}},{key:"skip",value:function skip(t){this._bufferStarted=!1,this._seekTarget=t+this.currentTime,this._showLoadingSpinner(),PN.skip(t)}},{key:"seek",value:function seek(t){this._seekTarget=t,this._showLoadingSpinner(),PN.seek(t)}},{key:"$rewind",value:function $rewind(){this._rewinding||(this._stopSeekInterval(),this._seekTime=this.currentTime,this._rewinding=!0,this.startTimeAnnouncement()),PN.playing&&this.pause(),this._speed=Math.max(-128,-2*Math.abs(this._speed)),XE("player:rw",{currentTime:this.currentTime,speed:this._speed}),this._seekInterval||this._startSeekInterval(),this.fireAncestors("$announce",["rewind rate times ".concat(this._speed.toString().replace(/-/g,""))])}},{key:"$fastForward",value:function $fastForward(){this._fastForwarding||(this._stopSeekInterval(),this._seekTime=this.currentTime,this._fastForwarding=!0,this.startTimeAnnouncement()),PN.playing&&this.pause(),this._speed=Math.min(128,2*this._speed),XE("player:ff",{currentTime:this.currentTime,speed:this._speed}),this._seekInterval||this._startSeekInterval(),this.fireAncestors("$announce",["fast forward rate times ".concat(this._speed)])}},{key:"_startSeekInterval",value:function _startSeekInterval(){var t=this,r=!1;this._seekInterval=setInterval((function(){if(void 0!==t._seekTime){var i=t._seekTime+t._speed;if(i<=0&&(i=1,r=!0),"trailer"===t.item.type||"program"===t.item.type?i>=t.duration-5&&(i=t.duration-5,r=!0):i>=t.duration-t._timeFromEnd&&(i=t.duration-t._timeFromEnd,r=!0),r)return t.seek(i),t._stopSeekInterval(),void clearInterval(t.announceTime);t._seekTime=i,t.tag("UI").seeking={seeking:!0,position:t._seekTime,forwards:t._fastForwarding,speed:t._speed}}else t._stopSeekInterval()}),1e3)}},{key:"_stopSeekInterval",value:function _stopSeekInterval(){this._seekInterval&&(clearInterval(this._seekInterval),this._seekInterval=void 0),this._fastForwarding=!1,this._rewinding=!1,this._speed=1,this._seekTime=null,this._bufferStarted=!1,this.tag("UI").seeking={seeking:!1},clearInterval(this.announceTime)}},{key:"$toggleSubtitles",value:function $toggleSubtitles(){if(this.manifests.captions.length)return this.view===HN?((PN.playing||this._fastForwarding||this._rewinding)&&(this._stopSeekInterval(),this.pause()),void(this.view=VN)):void(this.view===VN&&(PN.playing||this.play(),this.view=HN,this.visibilityStatus=UN))}},{key:"$changeTextTrack",value:function $changeTextTrack(t){var r,i,a=null===(r=this.manifests)||void 0===r||null===(i=r.captions)||void 0===i?void 0:i.find((function(r){return r.language===t}));this.tag("Subtitles").caption=a,this.tag("UI").patch({subtitleStatus:Boolean(a)}),PN.playing||this.play(),this.view=HN}},{key:"$seeAllEpisodes",value:function $seeAllEpisodes(){this.close();var t=Cr.getHistory()||[],r=t[t.length-1];return r&&r.hash.includes("%2Fseason%2")?(this._updatePrevHistory(!0),void Cr.back()):r&&r.hash.includes("%2Fshow%2")?(this.item.season.availableEpisodeCount>0&&this._updatePrevHistory(!0),void Cr.back()):void Cr.navigate("dynamic/".concat(lE(this.item.season.show.path)))}},{key:"$back",value:function $back(){this.close();var t=Cr.getHistory()||[];if(!t.length)return this.backURL?void Cr.navigate("dynamic/".concat(lE(this.backURL))):void Cr.navigate("home");var r=t[t.length-1];r&&(function isSeasonLink(t){return/season/g.test(t)}(r.hash)||function isShowLink(t){return/show/g.test(t)}(r.hash))&&this._updatePrevHistory(),Cr.back()}},{key:"_updatePrevHistory",value:function _updatePrevHistory(){var t,r,i,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],u=Cr.getHistoryState(),l=null===(t=this.item)||void 0===t||null===(r=t.season)||void 0===r?void 0:r.id,c=null===(i=this.item)||void 0===i?void 0:i.episodeNumber,d=!1;this.item.episodeNumber||(l=u.focusIndex,c=u.focusedItemIndex,d=!0),Cr.replaceHistoryState(_objectSpread2(_objectSpread2({},u),{},{secondaryFocus:l,focusedItemIndex:c,isExtraContent:d,focusType:"episode",backFromPlayer:!0,focusNext:a}))}},{key:"$close",value:function $close(){this.close()}},{key:"close",value:function close(){this._reportPosition(),this._reportInterval&&clearInterval(this._reportInterval),this._sendStopLearnAction(),this._stopSeekInterval(),this._fadeOutControls(),this.resizePlayer(1920,1080),PN.close()}},{key:"$playNextAsset",value:function $playNextAsset(){this.view!==YN&&this.view!==QN||(this.continuedWatchingCurrentAsset=!1),Cr.navigate(dE(this.nextAsset.watchPath)),this.close()}},{key:"$setView",value:function $setView(t){this.view!==YN&&this.view!==QN||t!==HN||(this.continuedWatchingCurrentAsset=!0),this.view===VN&&t===HN&&this.play(),this.view=t}},{key:"_reportPosition",value:function _reportPosition(){if("episode"===this.item.type||"movie"===this.item.type||this._initiated){var t=0===this.currentTime?1:Math.ceil(this.currentTime);Ni.reportPlaybackPosition(this.item.id,t)}}},{key:"_captureBack",value:function _captureBack(){return this.view===VN?(this.$toggleSubtitles(),!0):((this._fastForwarding||this._rewinding)&&this._stopSeekInterval(),this.visibilityStatus!==BN&&this.visibilityStatus!==zN||this.$back(),this.visibilityStatus===FN&&this._fadeOutControls(),!0)}},{key:"_captureKey",value:function _captureKey(t){return this.view===GN?(this.view=HN,this.visibilityStatus=UN,!0):!(this.view!==HN||!this._initiated)&&(function isKeyFastForward(t){return 417===t.which||228===t.which}(t)?(this.$fastForward(),this.visibilityStatus=UN,!0):function isKeyRewind(t){return 412===t.which||227===t.which}(t)?(this.$rewind(),this.visibilityStatus=UN,!0):function isKeyPlayPause(t){return 415===t.which||179===t.which}(t)?(this.visibilityStatus=UN,PN.playing?this.pause():this.play(),!0):function isKeyStop(t){return 413===t.which||178===t.which}(t)?(this.$back(),!0):function isKeyText(t){return 230===t.which}(t)?(this.visibilityStatus=UN,this.$toggleSubtitles(),!0):this.visibilityStatus===BN?(function isKeyEnter(t){return"Enter"===t.key||"Enter"===t.code||13===t.keyCode}(t)&&(PN.playing?this.pause():this.play()),this.visibilityStatus=UN,!0):(this.visibilityStatus===FN&&this._startFadeoutTimeout(),this.visibilityStatus===zN&&(this.visibilityStatus=UN),!1))}},{key:"visibilityStatus",get:function get(){return this._visibilityStatus},set:function set(t){switch(this._visibilityStatus=t,this.tag("Subtitles").status=t,t){case FN:this._startFadeoutTimeout(),this._clearTransition();break;case UN:this._fadeInControls();break;case zN:this._clearTimeout();break;case BN:this._clearTransition(),this.resetFocus()}this.tag("UI").visibilityStatus=this._visibilityStatus}},{key:"resetFocus",value:function resetFocus(){this.previousView!==VN&&this.view!==VN&&(this._refocus(),this.tag("UI").resetFocus())}},{key:"_clearTimeout",value:function _clearTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=null}},{key:"_clearTransition",value:function _clearTransition(){this._transition=null}},{key:"_fadeOutControls",value:function _fadeOutControls(){var t=this;this._clearTimeout(),this.view===HN&&this.visibilityStatus===FN&&(this.previousView=""),this._transition=this.tag("UI").setSmooth("alpha",.01,{duration:.75}),this.visibilityStatus=zN,this._transition.once("finish",(function(){t.visibilityStatus=BN}))}},{key:"_fadeInControls",value:function _fadeInControls(){var t=this;this._transition&&(this._transition.stop(),this._transition.removeAllListeners("finish")),this._clearTimeout(),this._transition=this.tag("UI").setSmooth("alpha",1,{duration:.5}),this._transition.once("finish",(function(){t.visibilityStatus=FN}))}},{key:"_startFadeoutTimeout",value:function _startFadeoutTimeout(){var t=this;this._clearTimeout(),this._timeout=setTimeout((function(){return t.view===HN&&PN.playing&&t._fadeOutControls()}),5e3)}},{key:"_getDrmConfig",value:function _getDrmConfig(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.token,i=t.licence_server;return r&&i?{protectionData:{"com.microsoft.playready":{serverUrl:i,token:r}}}:{}}}],[{key:"_template",value:function _template(){return{UI:{visible:!1,type:Sx,alpha:.01},LoadingSpinner:{type:RI,x:893,y:473,visible:!1},AutoPlayNext:{visible:!1,type:qN},Subtitles:{type:Ex},ContentRating:{visible:!1,type:XN},RelatedContent:{visible:!1,type:JN},SubtitleSidebar:{visible:!1,type:gx}}}}]),VideoPlayer}(j.Component),Dx=function(t){_inherits(ProgressBar,t);var r=_createSuper(ProgressBar);function ProgressBar(){return _classCallCheck(this,ProgressBar),r.apply(this,arguments)}return _createClass(ProgressBar,null,[{key:"_template",value:function _template(){return{w:1690,h:42,flex:{direction:"row",alignItems:"center",justifyContent:"space-between",wrap:!1},ProgressBar:{w:function w(t){return t},h:10,rect:!0,color:kg.colours.lightBlue50,shader:{type:j.shaders.RoundedRectangle,radius:8,stroke:4,strokeColor:kg.colours.lightBlue50}}}}}]),ProgressBar}(j.Component),Ax=function(t){_inherits(Controls,t);var r=_createSuper(Controls);function Controls(){return _classCallCheck(this,Controls),r.apply(this,arguments)}return _createClass(Controls,[{key:"_getFocused",value:function _getFocused(){return null}}],[{key:"_template",value:function _template(){return{ProgressBar:{x:115,y:88,type:Dx},LiveTag:{x:115,y:165,w:208,h:64,texture:j.Tools.getSvgTexture(SI,208,64)}}}}]),Controls}(j.Component),Cx=function(t){_inherits(Info,t);var r=_createSuper(Info);function Info(){return _classCallCheck(this,Info),r.apply(this,arguments)}return _createClass(Info,[{key:"item",set:function set(t){var r=t.title,i=t.description;this.patch({Heading:{text:{text:r||i}},BackButton:{icon:rx,signalName:"back",signals:{back:"_backHandler"}}})}},{key:"_getFocused",value:function _getFocused(){return this.tag("BackButton")}},{key:"_backHandler",value:function _backHandler(){this.fireAncestors("$back")}}],[{key:"_template",value:function _template(){return{flex:{direction:"column",wrap:!1},Heading:{text:_objectSpread2({text:""},kg.TextStyles.h2)},BackButton:{type:bx,w:34,h:25}}}}]),Info}(j.Component),Nx=function(t){_inherits(UI,t);var r=_createSuper(UI);function UI(){return _classCallCheck(this,UI),r.apply(this,arguments)}return _createClass(UI,[{key:"_getFocused",value:function _getFocused(){return this.tag("Info")}},{key:"resetFocus",value:function resetFocus(){}}],[{key:"_template",value:function _template(){return{TopOverlay:{w:1920,h:540,rect:!0,colorTop:kg.colours.playerOverlayStart,colorBottom:kg.colours.playerOverlayEnd},BottomOverlay:{w:1920,h:540,y:540,rect:!0,colorTop:kg.colours.playerOverlayEnd,colorBottom:kg.colours.playerOverlayStart},Info:{zIndex:1,x:115,y:88,type:Cx},Controls:{zIndex:1,x:0,y:744,type:Ax}}}}]),UI}(Sx),xx=function(t){_inherits(LivePlayer,t);var r=_createSuper(LivePlayer);function LivePlayer(){return _classCallCheck(this,LivePlayer),r.apply(this,arguments)}return _createClass(LivePlayer,[{key:"view",get:function get(){return this._view},set:function set(t){t!==this.view&&(this._view=t,this.resizePlayer(1920,1080),this.visibilityStatus=BN,this.tag("UI").patch({alpha:.01,visible:!0}),this._refocus())}},{key:"duration",get:function get(){return this._duration},set:function set(t){t>=0&&t!==1/0&&(this._duration=t,this.tag("UI").duration=t)}},{key:"currentTime",get:function get(){return this._currentTime||0},set:function set(t){if(t>=0){if(this._isBuffering){var r=Math.abs(t-this._seekTarget);!this._bufferStarted&&(t===this._seekTarget||r>4)?(this._bufferStarted=!0,this._showLoadingSpinner()):this._bufferStarted&&t!==this.currentTime&&(this._bufferStarted=!1,this._seekTarget=null,this._hideLoadingSpinner())}this.view===HN&&this.visibilityStatus!==BN&&(this.tag("UI").currentTime=t,this.tag("UI").paused=!PN.playing),this._currentTime=t}}},{key:"visibilityStatus",get:function get(){return this._visibilityStatus},set:function set(t){switch(this._visibilityStatus=t,t){case FN:this._startFadeoutTimeout(),this._clearTransition();break;case UN:this._fadeInControls();break;case zN:this._clearTimeout();break;case BN:this._clearTransition(),this.resetFocus()}}},{key:"_active",value:function _active(){var t=this.manifests.video[this._manifestIndex.video].href;this._showLoadingSpinner();var r={startPosition:this.startPosition};PN.open(t,r),this.resizePlayer(1920,1080),this.tag("UI").patch({item:this.item})}},{key:"$videoPlayerError",value:function $videoPlayerError(t){var r=kE(["data","details"],t);return eN(Mg.hlsErrorMapper(r))}},{key:"pause",value:function pause(){PN.pause(),this.tag("UI").currentTime=this.currentTime}},{key:"$pause",value:function $pause(){return!0}},{key:"play",value:function play(){PN.play()}},{key:"$play",value:function $play(){return!0}},{key:"$skip",value:function $skip(){return!0}},{key:"skip",value:function skip(){}},{key:"seek",value:function seek(){}},{key:"$rewind",value:function $rewind(){return!0}},{key:"$fastForward",value:function $fastForward(){return!0}},{key:"$toggleSubtitles",value:function $toggleSubtitles(){}},{key:"_reportPosition",value:function _reportPosition(){}}],[{key:"_template",value:function _template(){return{UI:{visible:!1,type:Nx,alpha:.01},LoadingSpinner:{type:RI,x:893,y:473}}}}]),LivePlayer}(Ix),kx=new rE,wx=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Ni.getPage("/account").then((function(t){var r=t.entries,i=(void 0===r?[]:r).find((function(t){return"TX1"===t.template})),a=PE([],["list","items"],i),u=a.find((function(t){return"Terms & Conditions"===t.title})),l=a.find((function(t){return"Privacy Policy"===t.title}));return{termsPath:null!=u&&u.path?u.path:"/terms-and-conditions",privacyPath:null!=l&&l.path?l.path:"/privacy"}})).catch((function(t){return{termsPath:"/terms-and-conditions",privacyPath:"/privacy"}})));case 1:case"end":return t.stop()}}),_callee)})));return function resolveAccountLinks(){return t.apply(this,arguments)}}(),Ox=jE([0,"template"],"Image Header Live"),Lx=function isSeasonLink(t){return/season/g.test(t)},Rx=function(t){_inherits(PageTemplate,t);var r=_createSuper(PageTemplate);function PageTemplate(){return _classCallCheck(this,PageTemplate),r.apply(this,arguments)}return _createClass(PageTemplate,[{key:"_init",value:function _init(){this._index=0,this.backToTop=this.backToTop.bind(this)}},{key:"main",set:function set(t){var r=this;this._items=t;var i={type:sI,item:{text:"Back to Top",callback:function callback(){return r.backToTop()}}};Ox(this._items)?this.tag("Items").children=_toConsumableArray(this._items):this.tag("Items").children=[].concat(_toConsumableArray(this._items),[i]);var a=this.tag("Items").__childList._items[0].hideMenuBar?0:MA.height;this.tag("Items").children.forEach((function(t,r){t.y=a,"Editorial Text"===t.template?a+=t.height+50:a+=t.constructor.height,r>1&&t.template&&(FE(t)||function isHero(t){return t.template.includes("H")}(t)||(a-=48))}))}},{key:"activeItem",get:function get(){return this.tag("Items").children[this._index]}},{key:"scrollLimit",get:function get(){var t=this.tag("Items").children[this.tag("Items").children.length-1];if(!t)return 0;var r=t.finalY+t.constructor.height+65;return Math.max(r-1080,0)}},{key:"_animateToSelected",value:function _animateToSelected(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._index,i=-this.activeItem.finalY;"Editorial Image"!==this.activeItem.template&&"Editorial Text"!==this.activeItem.template&&r>0&&1080!==this.activeItem.h&&(1080===this.tag("Items").children[this._index-1].h?(i=0,this.tag("Items").children.filter((function(r,i){return i<t._index})).forEach((function(t){i-=t.y}))):i+=250),0===r||0===this.scrollLimit?(_n.getInstance().emit(yA,!Ox(this._items)),i=0):_n.getInstance().emit(yA,!1),this.tag("Items").setSmooth("y",i<-this.scrollLimit?-this.scrollLimit:i)}},{key:"focusItem",value:function focusItem(t){this._index+=t,this._animateToSelected()}},{key:"_handleUp",value:function _handleUp(){return 0===this._index?(Cr.focusWidget("MenuBar"),!0):(this.focusItem(-1),!0)}},{key:"_handleDown",value:function _handleDown(){return this._index<this.tag("Items").children.length-1&&(this.focusItem(1),!0)}},{key:"_handleBack",value:function _handleBack(){if(_n.getInstance().emit("BACK_TO_TOP"),"home"===Cr.getActiveRoute())return this._index=0,this.tag("Items").y=0,_n.getInstance().emit(yA,!0),Cr.focusWidget("MenuBar"),!0;var t=Cr.getHistory()||[];if(!t.length||1===t.length&&"home"!==t[t.length-1].hash)return Cr.navigate("home"),!0;if(Lx(Cr.getActiveHash())){var r=t.map((function(t){return Lx(t.hash)})).lastIndexOf(!1);return Cr.go(-(t.length-(function isShowLink(t){return/show/g.test(t)}(t[r].hash)?r-1:r))),!0}return Cr.back(),!0}},{key:"$firstItemCreated",value:function $firstItemCreated(){this._refocus()}},{key:"_getFocused",value:function _getFocused(){return this.tag("Items").children[this._index]}},{key:"setBackToTopButton",value:function setBackToTopButton(){var t=this.tag("Items").children,r=t.findIndex((function(t){return t._item&&"Back to Top"===t._item.text})),i=t[r];t.splice(r,1),t.splice(t.length,0,i),this.tag("Items").children=t;var a=MA.height;this.tag("Items").children.forEach((function(t){t.y=a,a+=t.constructor.height}))}},{key:"backToTop",value:function backToTop(){return _n.getInstance().emit("BACK_TO_TOP"),this._index=0,Cr.focusWidget("MenuBar"),this._animateToSelected(),!0}}],[{key:"_template",value:function _template(){return{Items:{x:115,y:0}}}}]),PageTemplate}(j.Component),jx=function(t){_inherits(Account,t);var r,i=_createSuper(Account);function Account(){return _classCallCheck(this,Account),i.apply(this,arguments)}return _createClass(Account,[{key:"main",set:function set(t){var r=this;qE("page:loaded",{path:"account",title:"Account"});var i=PE("",["accountDetails","firstName"],t),a=t.accountPaths,u=a.termsPath,l=a.privacyPath,c=kE(["accountDetails","isAlertNotificationEmail"],t),d=kE(["parentalControlDetails","parentalControl"],t),g=kE(["parentalControlDetails","parentalControlLevel"],t),p=kE(["parentalControlDetails","parentalControlPIN"],t);this._parentalControlPIN=p,this._parentalControl=d,this._isFirstTimeParentalControl=!p;var m={type:SC,content:{heading:"PIN required for content rated above:",parentalControlLevel:g}},v=[{type:GI,content:{text:"Hi ".concat(i,"!")}},{type:bC,content:{title:"ACCOUNT DETAILS",text:"Please visit <color=0xff00b6e6>britbox.com</color> to review or update your subscription and payment details."}},{type:bC,content:{title:"SUBSCRIPTION",text:"Your subscription can be changed from the platform where you registered."}},{type:HI,defaultState:d,heading:"PARENTAL LOCK",callback:this.toggleParentalControl},{type:TC,defaultState:"true"===c,heading:"EMAIL NOTIFICATIONS",description:"Service updates, new features, newly added content.",callback:this._emailToggle},{type:QA,items:[{path:"account/logout",text:"Sign Out",static:!0},{path:u,text:"Terms & Conditions",static:!0},{path:l,text:"Privacy Policy",static:!0}]},{type:QA,items:[{callback:function callback(){return r.backToTop(!0)},text:"Back to Top",static:!0}]}];this._parentalControl&&v.splice(4,0,m),this.tag("Items").children=v;var b=MA.height;this.tag("Items").children.forEach((function(t,i){t.y=b,b+=t.constructor.height,i!==r._index||r._resettable||r._refocus()}))}},{key:"historyState",value:function historyState(t){return t?(this._index=t.focusedIndex,!this._resettable&&t.subFocusedIndex&&(this.tag("Items").children[this._index]._index=t.subFocusedIndex),{}):{focusedIndex:this._index,subFocusedIndex:this.tag("Items").children[this._index]._index}}},{key:"backToTop",value:function backToTop(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._index=0,this.tag("Items").y=0,_n.getInstance().emit(yA,!0),t&&this._animateToSelected()}},{key:"resetPage",value:function resetPage(){this.backToTop(),Cr.focusWidget("MenuBar")}},{key:"_emailToggle",value:function _emailToggle(t){return Ni.updateProfile({alertNotificationEmail:t}).then((function(t){return"1"===t.responseCode}))}},{key:"_init",value:function _init(){_get(_getPrototypeOf(Account.prototype),"_init",this).call(this),this._index=0,this._subFocusedIndex=0,this._resettable=!0,this._isFirstTimeParentalControl=!1,this._parentalControl=!1,this._parentalControlPIN="",this.toggleParentalControl=this.toggleParentalControl.bind(this)}},{key:"_active",value:function _active(){return this._resettable=this.resettable(),this.resettable()?(this.resetPage(),!0):(this._index>0&&_n.getInstance().emit(yA,!1),Cr.focusPage(),!0)}},{key:"toggleParentalControl",value:function toggleParentalControl(t){return Cr.navigate("password-confirmation/".concat(this._isFirstTimeParentalControl,"/").concat(!t)),Promise.resolve()}},{key:"resettable",value:function resettable(){if(!Cr.getHistoryState("account"))switch(Cr.getActiveRoute()){case"account/text/:path":case"account/logout":case"password-confirmation/:isFirstPC/:toggleOff":case"parental-control":case"pin-page":case"inactive":return!1;default:return!0}return!0}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,color:kg.colours.darkBlue500,rect:!0,Items:{x:115,y:0}}}},{key:"getAccountLinks",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t,r,i;return regeneratorRuntime.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,wx();case 2:return t=a.sent,r=t.privacyPath,i=t.termsPath,a.abrupt("return",{termsPath:"account/text".concat(i),privacyPath:"account/text".concat(r)});case 6:case"end":return a.stop()}}),_callee)}))),function getAccountLinks(){return r.apply(this,arguments)})},{key:"getData",value:function getData(t){return Promise.all([Ni.getAccountDetail(),Ni.getParentalControlDetails(),Account.getAccountLinks()]).then((function(r){var i=_slicedToArray(r,3),a=i[0],u=i[1],l=i[2];return t.main={accountDetails:a,parentalControlDetails:u,accountPaths:l},!0})).catch(function(){var r=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(r){var i,a,u,l;return regeneratorRuntime.wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:if("0C-A401"===r.message){c.next=3;break}return c.abrupt("return",eN(r.message));case 3:return i=G("bb_refresh_token"),c.next=6,Ni.refreshAuthToken(i);case 6:if(a=c.sent,u=a.accessToken,l=a.refreshToken,u||l){c.next=18;break}return Ry.sendUserEvent("user:logout"),V(),ZE(),Ni.setSubscriptionCode(),rI([]),bA(),GE(),c.abrupt("return",eN(r.message));case 18:return H("bb_token",u),H("bb_refresh_token",l),ZE(u,l),bA(),c.abrupt("return",Account.getData(t));case 23:case"end":return c.stop()}}),_callee2)})));return function(t){return r.apply(this,arguments)}}())}}]),Account}(Rx),Px=function(t){_inherits(AccountTextPage,t);var r,i=_createSuper(AccountTextPage);function AccountTextPage(){return _classCallCheck(this,AccountTextPage),i.apply(this,arguments)}return _createClass(AccountTextPage,[{key:"data",set:function set(t){var r=t.heading,i=t.subHeading,a=t.body;this._bodyText=a;var u=a.trim().split("\n");u&&(this.tag("Body").children=u.map((function(t){return{text:_objectSpread2({text:t},kg.TextStyles.featuredCopy)}}))),this.patch({Heading:{Title:{text:{text:r}},SubHeading:{text:{text:i||""},visible:!0}}})}},{key:"_active",value:function _active(){_n.getInstance().emit(yA,!0),this.y=MA.height,Cr.focusWidget("MenuBar"),this._refocus()}},{key:"_inactive",value:function _inactive(){Cr.focusPage()}},{key:"_handleUp",value:function _handleUp(){return Cr.focusWidget("MenuBar"),!0}},{key:"announce",get:function get(){return"\n      ".concat(this.tag("Title").text.text,",\n      ").concat(this.tag("SubHeading").text.text,",\n      ").concat(this._bodyText,"\n    ")}}],[{key:"_template",value:function _template(){return{y:MA.height,flex:{direction:"column",paddingLeft:115},Heading:{w:1920,h:264,x:-115,rect:!0,color:kg.colours.accountHeadingBackground,flexItem:{marginBottom:30},Title:{x:115,y:70,text:_objectSpread2({text:""},kg.TextStyles.h1)},SubHeading:{x:115,y:166,text:_objectSpread2({text:""},kg.TextStyles.featuredCopy),visible:!1}},Body:{w:1690,flex:{direction:"column"}}}}},{key:"getData",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t,r){var i;return regeneratorRuntime.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,DA("/".concat(r));case 2:i=a.sent,qE("page:loaded",{path:r,title:i.heading}),t.data=i;case 5:case"end":return a.stop()}}),_callee)}))),function getData(t,i){return r.apply(this,arguments)})}]),AccountTextPage}(j.Component),Fx=jE(["item","type"],"episode"),Bx=function resolveDeeplinkURL(t){return Ni.getPage(t,{ff:"idp,ldp",use_custom_id:!0}).then(function(){var r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(r){var i,a,u,l,c,d,g,p,m,v,b,M;return regeneratorRuntime.wrap((function _callee$(S){for(;;)switch(S.prev=S.next){case 0:if(!(t.indexOf("/watch/")>-1)){S.next=5;break}return i=PE({},["entries",0,"item"],r),a=i.customId,u=i.id,l=i.watchPath,c=l.replace(a,u),S.abrupt("return",dE(c));case 5:if(!t.includes("show")){S.next=11;break}return S.next=8,Ni.getItem(r.item.showId);case 8:return d=S.sent,g=lE("/show/".concat(d.id)),S.abrupt("return","dynamic/".concat(g));case 11:return p=Fx(r)?r.item.season:r.item,m=p.customId,v=p.id,b=p.path,M=b.replace(m,v),S.abrupt("return","dynamic/".concat(lE(M)));case 14:case"end":return S.stop()}}),_callee)})));return function(t){return r.apply(this,arguments)}}()).catch((function(t){}))},Ux=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var t,r,i,a,u,l,c,d=arguments;return regeneratorRuntime.wrap((function _callee2$(g){for(;;)switch(g.prev=g.next){case 0:t=d.length>0&&void 0!==d[0]?d[0]:{},r=t.action,i=t.customId,a=t.entityType,u=t.searchQuery,g.t0=r,g.next="entity"===g.t0?5:"playback"===g.t0?11:"search"===g.t0?17:(g.t0,18);break;case 5:return g.next=7,Bx("/".concat(a,"/").concat(i));case 7:if(l=g.sent){g.next=10;break}return g.abrupt("return",{path:"home"});case 10:return g.abrupt("return",{path:l});case 11:return g.next=13,Bx("/watch/".concat(i));case 13:if(c=g.sent){g.next=16;break}return g.abrupt("return",{path:"home"});case 16:return g.abrupt("return",{path:c});case 17:return g.abrupt("return",{path:"search",params:{searchQuery:u}});case 18:return g.abrupt("return",{path:"home"});case 19:case"end":return g.stop()}}),_callee2)})));return function resolveDeeplink(){return t.apply(this,arguments)}}(),zx=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var t,r,i,a,u=arguments;return regeneratorRuntime.wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},l.next=3,Ux(t);case 3:if(r=l.sent,i=r.path,a=r.params,i){l.next=8;break}return l.abrupt("return");case 8:Cr.navigate(i,a);case 9:case"end":return l.stop()}}),_callee3)})));return function handleDeeplink(){return t.apply(this,arguments)}}(),Yx=function getParameterByName(t){var r=t.replace(/[[]]/g,"\\$&"),i=new RegExp("[?&]".concat(r,"(=([^&#]*)|&|#|$)")).exec(window.location.href);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},Gx=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t,r,i,a;return regeneratorRuntime.wrap((function _callee$(u){for(;;)switch(u.prev=u.next){case 0:u.next=17;break;case 3:if(!(t=u.sent)){u.next=10;break}return u.next=7,Ux(t);case 7:u.t0=u.sent,u.next=11;break;case 10:u.t0=void 0;case 11:if(r=u.t0,yE()){u.next=14;break}return u.abrupt("return",Promise.resolve({path:"splash-screen",params:{deeplinkParams:r}}));case 14:if(t){u.next=16;break}return u.abrupt("return",Promise.resolve({path:"home"}));case 16:return u.abrupt("return",Promise.resolve(r));case 17:if(!(i=Yx("deeplink"))){u.next=24;break}return u.next=21,Bx(i);case 21:if(!(a=u.sent)){u.next=24;break}return u.abrupt("return",Promise.resolve({path:a}));case 24:return u.abrupt("return",Promise.resolve({path:"home"}));case 25:case"end":return u.stop()}}),_callee)})));return function bootstrapRouter(){return t.apply(this,arguments)}}(),Hx=function(t){_inherits(BootScreen,t);var r=_createSuper(BootScreen);function BootScreen(){return _classCallCheck(this,BootScreen),r.apply(this,arguments)}return _createClass(BootScreen,[{key:"_active",value:function _active(){Gx().then((function(t){var r=t.path,i=t.params;return Cr.navigate(r,i)})).catch((function(){return Cr.navigate("home")}))}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,src:A("images/britbox-fullscreen.jpg")}}}]),BootScreen}(j.Component),Qx=function resolveBookmarksList(){return Ni.getBookmarksList().then(function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){return regeneratorRuntime.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",t.items);case 1:case"end":return r.stop()}}),_callee)})));return function(r){return t.apply(this,arguments)}}()).catch((function(t){}))},Vx=function resolveWatchingList(){return Promise.all([Ni.getContinueWatchingList(),Ni.getWatched()]).then((function(t){var r=_slicedToArray(t,2),i=r[0],a=void 0===i?[]:i,u=r[1];return a.items.map((function(t){var r=PE([],["listData","ContinueWatching","itemInclusions"],a);return _objectSpread2(_objectSpread2({},t),{},{showDetail:r[t.id],progress:u[t.id]?u[t.id].position:0})}))})).catch((function(t){}))},Wx=function resolveRecommendationLists(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all(t.map((function(t){var r=t.item;return Ni.getRecommendationsList(r.list.id)})))},$x=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r,i,a,u;return regeneratorRuntime.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:if(null!=t&&null!==(r=t.item)&&void 0!==r&&r.id){l.next=2;break}return l.abrupt("return",[]);case 2:return l.next=4,Ni.getRecommendedItems(t.item.id);case 4:if(i=l.sent,(a=null==i?void 0:i.items)&&a.length){l.next=11;break}return l.next=9,Ni.getRelatedContent(t.item.id,20);case 9:u=l.sent,a=u.items;case 11:return l.abrupt("return",a);case 12:case"end":return l.stop()}}),_callee)})));return function resolveRecommendedItems(r){return t.apply(this,arguments)}}(),Kx=["episode","show","season","movie"],qx=jE(["list","id"],"ContinueWatching"),Xx=jE(["list","id"],"Bookmarks"),Zx=jE(["template"],"DH1"),Jx=jE(["template"],"D3"),ek=jE(["list","paging","page"],0),tk=function isThinkAnalyticsRail(t){return"BBCTHA1"===t.template||"BBCTHA2"===t.template},rk=function isThinkAnalyticsItem(t){return"D90"===t.template||"D91"===t.template},nk=function isTrailerOrBonus(t){return/program|trailer/.test(t)},ik=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r,i,a;return regeneratorRuntime.wrap((function _callee$(u){for(;;)switch(u.prev=u.next){case 0:if(r=kE(["item","showId"],t),i=kE(["item","id"],t),!r){u.next=8;break}return u.next=5,Ni.getNextVideo(r);case 5:u.t0=u.sent,u.next=11;break;case 8:return u.next=10,Ni.getWatchedItemById(i);case 10:u.t0=u.sent;case 11:return a=u.t0,u.abrupt("return",a);case 13:case"end":return u.stop()}}),_callee)})));return function getCurrentAsset(r){return t.apply(this,arguments)}}(),ak=function resolvePage(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Ni.getPage(t,r).then(function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(t){var a,u,l,c,d,g,p,m,v,b,M,S,E,I,D,A,C,N,k,O,L,R,j;return regeneratorRuntime.wrap((function _callee2$(B){for(;;)switch(B.prev=B.next){case 0:if(a=t.entries||[],u=t.title||"",l=[],c=[],d="ShowDetailNew"===t.key||"SeasonDetailNew"===t.key,!a.length){B.next=57;break}if(g=[],p=[],m=[],v=[],b=null,M=null,S=!1,"Credit"===t.key&&"Sub Category"===t.template&&c.push({title:t.title,template:"Heading"}),a.forEach((function(t,r){return qx(t)?(c.push(t),g.push(r)):Xx(t)?(c.push(t),p.push(r)):(Zx(t)&&(b=r),Jx(t)&&(M=r),tk(t)?(c.push(t),m.push({item:t,index:r})):rk(t)?(c.push(t),v.push(r)):(S||(S=ek(t)),S?l.push(t):(c.push(t),null)))})),!i||!M){B.next=22;break}return E=PE([],["item","show","seasons","items"],t),I=E.find((function(t){return t.id===i.seasonId})),B.next=20,Ni.getPage(I.path,r);case 20:D=B.sent,t=D;case 22:if(!yE()){B.next=57;break}if(!(g.length>0)){B.next=29;break}return B.next=26,Vx();case 26:C=B.sent,N=C.filter((function(t){return!nk(t.type)})),g.forEach((function(t){a[t].list.items=N}));case 29:if(!(p.length>0)){B.next=34;break}return B.next=32,Qx();case 32:k=B.sent,p.forEach((function(t){a[t].list.items=k}));case 34:if(!(m.length>0)){B.next=39;break}return B.next=37,Wx(m);case 37:B.sent.forEach((function(t,r){var i=m[r].index;a[i].list.items=t}));case 39:if(!(v.length>0)){B.next=44;break}return B.next=42,$x(t);case 42:O=B.sent,v.forEach((function(t){a[t].list.items=O}));case 44:if(!Kx.includes(null===(A=t.item)||void 0===A?void 0:A.type)){B.next=51;break}if(null===b){B.next=51;break}return B.next=48,ik(t);case 48:L=B.sent,a[b].currentAsset=L,null===M||i||(a[M].currentAsset=L);case 51:if(!d){B.next=57;break}return B.next=54,Ni.getWatched();case 54:R=B.sent,PE([],["item","episodes","items"],t).forEach((function(t){var r=R[t.id];r&&(t.progress=r.isFullyWatched?t.duration:r.position)}));case 57:return j=c.map((function(r){return WC(r,t)})).filter((function(t){return!!t})),B.abrupt("return",{pageEntries:j,notListed:l,pageTitle:u,pageTemplate:t.template,pagePath:t.path});case 59:case"end":return B.stop()}}),_callee2)})));return function(r){return t.apply(this,arguments)}}()).catch((function(t){eN(t)}))},ok=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r,i;return regeneratorRuntime.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return r=t.map((function(t){var r;return null===(r=t.list)||void 0===r?void 0:r.id})).filter((function(t){return!!t})).join(","),a.next=3,Ni.getLists(r,1,24);case 3:return i=a.sent,a.abrupt("return",t.map((function(t){var r=PE("",["list","id"],t);if(!r)return WC(t);var a=i.find((function(t){return t.id===r}));return WC(_objectSpread2(_objectSpread2({},t),{},{list:a}))})).filter((function(t){return!!t})));case 5:case"end":return a.stop()}}),_callee)})));return function resolveList(r){return t.apply(this,arguments)}}(),sk=jE(["refocusItemParameters","focusType"],"episode"),uk=function(t){_inherits(DynamicPage,t);var r,i,a,u=_createSuper(DynamicPage);function DynamicPage(){var t;_classCallCheck(this,DynamicPage);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return _defineProperty(_assertThisInitialized(t=u.call.apply(u,[this].concat(i))),"loadMoreData",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var r;return regeneratorRuntime.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(t._pageItems.length&&!t._requestInFlight){i.next=2;break}return i.abrupt("return");case 2:t._requestInFlight=!0,r=t._pageItems.shift(),t.attachItems(r),t._requestInFlight=!1;case 6:case"end":return i.stop()}}),_callee)})))),t}return _createClass(DynamicPage,[{key:"params",set:function set(t){t.focusIndex&&(this.refocusItemParameters=t),this.taArgs=t.taArgs||{}}},{key:"resetPage",value:function resetPage(){var t,r,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=null===(t=this.refocusItemParameters)||void 0===t?void 0:t.y;this._index=null!==(r=this.refocusItemParameters)&&void 0!==r&&r.y?1:0,this.tag("Items").y=null!=a?a:0,i||_n.getInstance().emit(yA,!0),this.refocusItemParameters=null}},{key:"historyState",value:function historyState(t){return t?(this.refocusItem(t),{}):this.saveStates()}},{key:"data",set:function set(t){var r=t.notListed,i=t.pagePath,a=t.pageTemplate,u=t.stage;this.pagePath=i,this.pageTemplate=a,this._pageItems=this.splitArray(r,5),this._stage=u,this.refocusItemParameters&&this.refocusItem(this.refocusItemParameters)}},{key:"_init",value:function _init(){this._index=0,this.loadMoreData=this.loadMoreData.bind(this),this.splitArray=this.splitArray.bind(this)}},{key:"_firstActive",value:function _firstActive(){return!!function isSeasonLink(t){return/season/g.test(t)}(this.pagePath)&&this.focusItem(1)}},{key:"_active",value:function _active(){var t=Cr.getHistoryState();return t&&(this.backToProgrammeDetailPage=t.backToProgrammeDetailPage,this.focusOnWatchButton=t.focusOnWatchButton,this.isExtraContent=t.isExtraContent),!(t&&function isShowOrSeason(t){return/season|show/g.test(t)}(this.pagePath)&&this.backToProgrammeDetailPage)||(this.focusOnWatchButton?this.focusItem(this.focusOnWatchButton):this.refocusItem(t))}},{key:"_inactive",value:function _inactive(){this.refocusItemParameters=null}},{key:"_handleDown",value:function _handleDown(){return!(this._index>=this.tag("Items").children.length-1)&&(_get(_getPrototypeOf(DynamicPage.prototype),"_handleDown",this).call(this),(this._pageItems.length>0||this._requestInFlight)&&this.loadMoreData(),!0)}},{key:"splitArray",value:function splitArray(t,r){var i,a,u,l=[];for(i=0,a=t.length;i<a;i+=r)u=t.slice(i,i+r),l.push(u);return l}},{key:"attachItems",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(t){var r,i,a,u,l,c=this;return regeneratorRuntime.wrap((function _callee2$(d){for(;;)switch(d.prev=d.next){case 0:return r=this.tag("Items").children.length,i=this.tag("Items").children[r-1],a=i.finalY+i.constructor.height+(i.constructor.offset||0),d.next=5,ok(t);case 5:u=d.sent,(l=u.filter((function(t){return t.item||t.items&&t.items.length})).map((function(t){return c._stage.c(t)}))).forEach((function(t){var r=t.constructor,i=r.height,u=r.offset;t.y=a;var l=0;t===c.tag("Items").children[0]||FE(t)||(l=-48),a+=i+(u||0)+l})),this.tag("Items").add(l),this.setBackToTopButton();case 10:case"end":return d.stop()}}),_callee2,this)}))),function attachItems(t){return a.apply(this,arguments)})},{key:"saveStates",value:function saveStates(){var t,r=this.tag("Items").children[this._index],i="T3"===r.template,a="H1"===r.template,u={focusIndex:this._index,y:this.tag("Items").y,focusedItemIndex:r._index||0,pagePath:this.pagePath||"",pageTemplate:this.pageTemplate||"",taArgs:this.taArgs||{}};if(this.taArgs={},i){var l=r._indexY;return r._items=0===l?r.row1Items:r.row2Items,_objectSpread2(_objectSpread2({},u),{},{itemsLength:r._items.length,indexY:r._indexY,indexX:r._indexX})}return a?_objectSpread2(_objectSpread2({},u),{},{template:r.template}):r._state.name.startsWith("Rail")?_objectSpread2(_objectSpread2({},u),{},{itemsLength:r._items.length}):"Grid"===r._state.name?_objectSpread2(_objectSpread2({},u),{},{focusedItem:r._focusItem,indexY:r._indexY,indexX:r._indexX,itemsContent:r.tag("Items").children,pageIndex:r._pageIndex,numRows:r.numRows,pagesLoaded:r._pagesLoaded,sortButtonLabel:null===(t=r.tag("SortButton"))||void 0===t?void 0:t.label,order:r._order,orderBy:r._orderBy}):u}},{key:"refocusItem",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(t){var r,i,a,u,l,c,d,g;return regeneratorRuntime.wrap((function _callee3$(p){for(;;)switch(p.prev=p.next){case 0:if(i=t.focusIndex,a=t.y,u=t.focusType,l=t.indexY,c=t.taArgs,d=t.template,Cr.focusPage(),i>0&&_n.getInstance().emit(yA,!1),this._index=i,this.taArgs=c,this.tag("Items").y=a,!((null===(r=this._pageItems)||void 0===r?void 0:r.length)>0&&this._index>this.tag("Items").children.length-4)){p.next=10;break}return p.next=9,this.attachItems(this._pageItems.flat());case 9:this._pageItems=[];case 10:if(g=this.tag("Items").children[this._index]){p.next=13;break}return p.abrupt("return");case 13:if("H1"!==d){p.next=16;break}return this.handleRefocusOnH1Rail(t),p.abrupt("return");case 16:if(!g._state.name.startsWith("Rail")||0!==l&&1!==l){p.next=19;break}return this.handleRefocusOnT3Rail(t),p.abrupt("return");case 19:if(!g._state.name.startsWith("Rail")&&"episode"!==u){p.next=22;break}return this.handleRefocusOnRail(t),p.abrupt("return");case 22:"Grid"===g._state.name&&this.handleRefocusOnGrid(t);case 23:case"end":return p.stop()}}),_callee3,this)}))),function refocusItem(t){return i.apply(this,arguments)})},{key:"handleRefocusOnH1Rail",value:function handleRefocusOnH1Rail(t){var r=t.focusedItemIndex;this.tag("Items").children[this._index].index=r}},{key:"handleRefocusOnT3Rail",value:function handleRefocusOnT3Rail(t){var r=t.indexX,i=t.indexY,a=this.tag("Items").children[this._index],u=a.tag("Container"),l=0===i?u.tag("Row1"):u.tag("Row2");if(a._indexY=i,a._indexX=r,l.children.length>a._maxItems){var c=l.children.length-a._maxItems;a._indexX<=c?a._animateToSelected():u.x=-l.children[c].finalX}}},{key:"handleRefocusOnRail",value:function handleRefocusOnRail(t){var r=t.focusedItemIndex,i=t.itemsLength,a=t.focusType,u=t.isExtraContent,l=this.tag("Items").children[this._index],c=l.tag("Items"),d=l.pageId,g=PE(!0,["wasItemWatched"],t);if(l._items.length<i||"ContinueWatching"===d&&g?l._index=0:l._index=r,("episode"!==a&&!u||(_n.getInstance().emit("SEASON_RAIL:FOCUS",t),u))&&("SeasonSelectorRail"===l._focusedItem&&(l._focusedItem="EpisodeRail"),c.children.length>l._maxItems)){var p=c.children.length-l._maxItems;l._index<=p?l._animateToSelected():c.x=-c.children[p].finalX}}},{key:"handleRefocusOnGrid",value:function handleRefocusOnGrid(t){var r=t.itemsContent,i=t.pageIndex,a=t.focusedItem,u=t.pagesLoaded,l=t.indexX,c=t.indexY,d=t.numRows,g=t.sortButtonLabel,p=t.order,m=t.orderBy,v=this.tag("Items").children[this._index],b=v.tag("Items");v._pagesLoaded=u,v._focusItem=a,"SortButton"!==a&&v.fadeOutSortButton(),v.tag("SortButton")&&g&&(v.tag("SortButton").label=g),v._pageIndex=i,v._order=p,v._orderBy=m,b.children=r,v._indexX=l,v._indexY=c,b.y=c<d-3||d<3?-v.activeRow.finalY:-b.children[d-3].finalY}}],[{key:"getData",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(t,r,i){var a,u,l,c,d,g,p,m,v;return regeneratorRuntime.wrap((function _callee4$(b){for(;;)switch(b.prev=b.next){case 0:return u=sk(t)?{seasonId:t.refocusItemParameters.secondaryFocus}:null,b.next=3,ak(cE(i),{ff:"idp,ldp"},u);case 3:l=b.sent,c=l.pageEntries,d=l.notListed,g=l.pageTitle,p=l.pageTemplate,m=l.pagePath,qE("page:loaded",{path:i,title:g}),v=c.filter((function(t){var r="/watchlist"===i&&0===t.items.length&&jE(["pageId"],"Bookmarks",t);return t.item||t.items&&t.items.length||r})).map((function(t){return r.c(t)})),t.main=v,t.data={notListed:d,pageTemplate:p,pagePath:m,stage:r},t.resetPage(null===(a=v[0])||void 0===a?void 0:a.hideMenuBar);case 14:case"end":return b.stop()}}),_callee4)}))),function getData(t,i,a){return r.apply(this,arguments)})}]),DynamicPage}(Rx),lk=["clearEmail","clearPassword"],ck="email",dk="customerPassword",fk="firstName",hk="lastName",gk="SIGNUP::CLEAR_VALUES",pk=function(t){_inherits(SignUp,t);var r,i,a=_createSuper(SignUp);function SignUp(){var t;_classCallCheck(this,SignUp);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=a.call.apply(a,[this].concat(i))),"_formValues",{}),_defineProperty(_assertThisInitialized(t),"_errorMessages",{}),t}return _createClass(SignUp,[{key:"links",set:function set(t){var r=t.privacyPath,i=t.termsPath;this._privacyPath=r,this._termsPath=i}},{key:"params",set:function set(t){var r=t.formValues,i=t.deeplinkParams;this.deeplinkParams=i,this.setInputValues(r)}},{key:"clearValues",value:function clearValues(){this._formValues={},this._errorMessages={}}},{key:"resetForm",value:function resetForm(){this.clearValues(),this.setDisabledButtons()}},{key:"_init",value:function _init(){this._index=0}},{key:"_attach",value:function _attach(){this.resetForm=this.resetForm.bind(this),_n.getInstance().addEventListener(gk,this.resetForm)}},{key:"_detach",value:function _detach(){_n.getInstance().removeEventListener(gk,this.resetForm)}},{key:"_active",value:function _active(){this.widgets.keyboard.x=114,this.widgets.keyboard.y=855,this.keyboardToggle=this.keyboardToggle.bind(this),_n.getInstance().addEventListener(gA.OPEN,this.keyboardToggle),_n.getInstance().addEventListener(gA.CLOSE,this.keyboardToggle),this.setDisabledButtons(),0===this.tag("HelperContainer").alpha&&this.tag("Container").patch({Separator:{alpha:1},HelperContainer:{alpha:1,HelperText:{alpha:1,text:{text:"You will use this email to sign in to your BritBox account"}}}})}},{key:"_inactive",value:function _inactive(){this._index=0,_n.getInstance().removeEventListener(gA.OPEN,this.keyboardToggle),_n.getInstance().removeEventListener(gA.CLOSE,this.keyboardToggle)}},{key:"setInputValues",value:function setInputValues(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t[ck]&&(this.tag("Email").defaultValue=t[ck]),t[dk]&&(this.tag("Password").defaultValue=t[dk]),t[fk]&&(this.tag("FirstName").defaultValue=t[fk]),t[hk]&&(this.tag("LastName").defaultValue=t[hk])}},{key:"historyState",value:function historyState(t){var r;if(t){t.clearEmail,t.clearPassword;var i=_objectWithoutProperties(t,lk);return this._formValues=_objectSpread2({},i),this.setInputValues(i),{}}return _defineProperty(r={},ck,this._formValues[ck]),_defineProperty(r,dk,this._formValues[dk]),_defineProperty(r,fk,this._formValues[fk]),_defineProperty(r,hk,this._formValues[hk]),r}},{key:"_handleUp",value:function _handleUp(){this._index>0&&(this._index-=1)}},{key:"_handleDown",value:function _handleDown(){this._index<this.tag("FormContainer").children.length-2&&(this._index+=1)}},{key:"_getFocused",value:function _getFocused(){return this._index>=this.tag("FormContainer").children.length-2?this.tag("Buttons"):(this.setDisabledButtons(),this.setHelperOrErrorMessage(),this.tag("FormContainer").children[this._index])}},{key:"createNewUser",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t,r,i;return regeneratorRuntime.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return Mg.loadingSpinnerVisible$.next(!0),a.prev=1,a.next=4,Ni.createUser(_objectSpread2(_objectSpread2({},this._formValues),{},{alertNotificationEmail:"true"}));case 4:return t=a.sent,r=t.accessToken,i=t.refreshToken,H("bb_token",r),H("bb_refresh_token",i),ZE(r,i),Ni.getAccount().then((function(t){var r=t.subscriptionCode,i=t.gigyaId,a=t.entitlements,u=t.address;return Ry.sendUserEvent("user:login",{subscriptionCode:r,userId:i,entitlements:a,address:u}),Ni.setSubscriptionCode(r),bA(),!1})).catch((function(t){})),this.clearValues(),a.abrupt("return",Cr.navigate("subscription-picker",{deeplinkParams:this.deeplinkParams}));case 15:if(a.prev=15,a.t0=a.catch(1),"0C-A401"===a.t0.message){a.next=20;break}return a.abrupt("return",eN(a.t0.message));case 20:return a.abrupt("return",!1);case 21:case"end":return a.stop()}}),_callee,this,[[1,15]])}))),function createNewUser(){return i.apply(this,arguments)})},{key:"keyboardToggle",value:function keyboardToggle(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.open,i=t.direction;this.tag("FormContainer").patch({Disclaimer:{alpha:r?.01:1}}),r||"up"!==i||this.widgets.keyboard.closeKeyboard()}},{key:"setDisabledButtons",value:function setDisabledButtons(){var t=this,r=this._formValues[ck]&&this._formValues[dk]&&this._formValues[fk],i=Object.keys(this._formValues).find((function(r){return hk!==r&&""===t._formValues[r]})),a=Boolean(i)||!r,u=Object.keys(this._errorMessages).length>0||a;this.tag("Buttons").patch({items:[{text:"Create account",callback:function callback(){return t.createNewUser()},disabled:u,instructions:[this.tag("Disclaimer").text.text],static:!0},{text:"Terms & Conditions",static:!0,callback:function callback(){t.widgets.popup.openPopUp(t._termsPath)}},{text:"Privacy Policy",static:!0,callback:function callback(){t.widgets.popup.openPopUp(t._privacyPath)}}]})}},{key:"setHelperOrErrorMessage",value:function setHelperOrErrorMessage(){var t=this.tag("FormContainer").children[this._index],r={duration:.1,timingFunction:"ease-in-out"};if(t.fieldName!==hk){var i=t.fieldName===fk&&this._errorMessages[t.fieldName];this.tag("Container").patch({Separator:{smooth:{alpha:[t.fieldName!==fk||i?1:0,r]}},HelperContainer:{smooth:{alpha:[t.fieldName!==fk||i?1:0,r]},ErrorIcon:{visible:Boolean(this._errorMessages[t.fieldName]),smooth:{alpha:[this._errorMessages[t.fieldName]?1:0,r]}}}});var a=this._errorMessages[t.fieldName],u=t.fieldName===ck?"You will use this email to sign in to your BritBox account":"Your password needs to be at least 6 characters long and include a number or special character",l=t.fieldName!==fk?u:"";t.announceInstructions=[null!=a?a:l],this.tag("HelperText").patch({text:{text:null!=a?a:l}})}else this.tag("Container").patch({Separator:{smooth:{alpha:[0,r]}},HelperContainer:{smooth:{alpha:[0,r]},ErrorIcon:{alpha:0}}})}},{key:"$updateInputValue",value:function $updateInputValue(t,r){this._formValues=_objectSpread2(_objectSpread2({},this._formValues),{},_defineProperty({},t,r)),this._errorMessages[t]&&delete this._errorMessages[t]}},{key:"$handleInputError",value:function $handleInputError(t,r){this._errorMessages=_objectSpread2(_objectSpread2({},this._errorMessages),{},_defineProperty({},t,r))}},{key:"announce",get:function get(){return[this.tag("Title").text.text,Object.keys(this._errorMessages).length>0?"‘The Create Account’ button was disabled because there are some fields with some errors. Please check your information and try again.":""]}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,flex:{direction:"column",alignItems:"flex-start",justifyContent:"center",paddingLeft:105},Title:{w:1148,flexItem:{marginBottom:24},text:_objectSpread2(_objectSpread2({},kg.TextStyles.h1),{},{text:"Create your account",lineHeight:73,wordWrapWidth:1148})},Container:{flex:{direction:"row"},FormContainer:{flex:{direction:"column",alignItems:"flex-start"},Email:{w:1148,type:BC,closeKeyboardOnUp:!0,closeKeyboardOnDown:!1,shouldInputBeValidated:!0,placeholder:"Enter your email",fieldName:ck,inputType:"email",flexItem:{marginBottom:24}},Password:{w:1178,type:UC,closeKeyboardOnUp:!0,closeKeyboardOnDown:!1,shouldInputBeValidated:!0,placeholder:"Choose a password",fieldName:dk,flexItem:{marginBottom:24}},FirstName:{w:1148,type:BC,closeKeyboardOnUp:!0,closeKeyboardOnDown:!1,shouldInputBeValidated:!0,customErrorMessage:"Please enter a name",placeholder:"Your first name",fieldName:fk,inputType:"name",flexItem:{marginBottom:24}},LastName:{w:1148,type:BC,closeKeyboardOnUp:!0,closeKeyboardOnDown:!1,placeholder:"Your last name",fieldName:hk,inputType:"name"},Buttons:{h:QA.height,type:QA,yValue:42},Disclaimer:{alpha:1,text:_objectSpread2(_objectSpread2({},kg.TextStyles.helperBody),{},{textColor:kg.colours.mutedBlue200,lineHeight:42,wordWrapWidth:1178,text:"By clicking ‘Create Account’ you agree to the BritBox Terms & conditions and Privacy Policy. We’ll send you regular BritBox newsletters along with the special offers and promotions. You can opt out at anytime by clicking on the unsubscribe link in our emails."})}},Separator:{w:2,h:419,rect:!0,color:kg.colours.white500,alpha:1,flexItem:{marginLeft:75,marginRight:75}},HelperContainer:{flex:{direction:"column"},ErrorIcon:{alpha:0,texture:j.Tools.getSvgTexture(TI,74,74),flexItem:{marginBottom:25}},HelperText:{alpha:1,text:_objectSpread2(_objectSpread2({},kg.TextStyles.helperBody),{},{textColor:kg.colours.white500,lineHeight:42,wordWrapWidth:406,text:"You will use this email to sign in to your BritBox account"})}}},Logo:{x:1645,y:35,flexItem:!1,texture:j.Tools.getSvgTexture(II,151,60)}}}},{key:"getData",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(t){var r,i,a;return regeneratorRuntime.wrap((function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,wx();case 2:r=u.sent,i=r.privacyPath,a=r.termsPath,t.links={privacyPath:i,termsPath:a};case 6:case"end":return u.stop()}}),_callee2)}))),function getData(t){return r.apply(this,arguments)})}]),SignUp}(j.Component),mk=["focusedIndex"],yk="contactUserName",vk="contactPassword",_k=function(t){_inherits(SignInEmail,t);var r,i=_createSuper(SignInEmail);function SignInEmail(){var t;_classCallCheck(this,SignInEmail);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=i.call.apply(i,[this].concat(a))),"_formValues",{}),_defineProperty(_assertThisInitialized(t),"_errorMessages",{}),t}return _createClass(SignInEmail,[{key:"_init",value:function _init(){this._index=0}},{key:"_active",value:function _active(){this._resetIndex=!0,this.widgets.keyboard.x=114,this.widgets.keyboard.y=855,this.setDisabledButtons()}},{key:"_inactive",value:function _inactive(){this._resetIndex&&(this._index=0)}},{key:"params",set:function set(t){var r=t.formValues,i=t.focusedIndex,a=t.redirectUrl,u=t.deeplinkParams;a&&(this.redirectUrl=a||u.path),u&&(this.redirectUrl=u.path,this.deeplinkParams=u.params),i&&(this._index=i),r&&(this._formValues=_objectSpread2({},r),this.setInputValues(r))}},{key:"setInputValues",value:function setInputValues(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t[yk]&&(this.tag("Email").defaultValue=t[yk]),t[vk]&&(this.tag("Password").defaultValue=t[vk])}},{key:"historyState",value:function historyState(t){if(!t)return _objectSpread2({},this._formValues);var r=t.focusedIndex,i=_objectWithoutProperties(t,mk);return this.params={focusedIndex:r,formValues:i},{}}},{key:"setDisabledButtons",value:function setDisabledButtons(){var t=this,r=this._formValues[yk]&&this._formValues[vk],i=Object.keys(this._formValues).find((function(r){return""===t._formValues[r].trim()})),a=Boolean(i)||!r,u=Object.keys(this._errorMessages).length>0||a;this.tag("Buttons").patch({items:[{text:"Sign in",callback:function callback(){return t.authenticateUser()},disabled:u,static:!0},{text:"Forgot Password",callback:function callback(){t._resetIndex=!1,eN("FORGOT-PASSWORD")},static:!0}]})}},{key:"_handleUp",value:function _handleUp(){this._index>0&&(this._index-=1)}},{key:"_handleDown",value:function _handleDown(){this._index<this.tag("FormContainer").children.length-1&&(this._index+=1)}},{key:"_getFocused",value:function _getFocused(){return this._index>=this.tag("FormContainer").children.length-1?this.tag("Buttons"):(this.setErrorMessage(),this.setDisabledButtons(),this.tag("FormContainer").children[this._index])}},{key:"authenticateUser",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t,r,i;return regeneratorRuntime.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return Mg.loadingSpinnerVisible$.next(!0),a.prev=1,a.next=4,Ni.authenticateCustomer(_objectSpread2({},this._formValues));case 4:if(t=a.sent,r=t.accessToken,i=t.refreshToken,r){a.next=9;break}return a.abrupt("return",!1);case 9:return H("bb_token",r),H("bb_refresh_token",i),ZE(r,i),this._formValues={},Ni.getParentalControlDetails().then((function(t){var r=t.parentalControlLevel;return H("parental_control_level",r),""})).catch((function(t){})),Ni.getWatchlist().then((function(t){return rI(Object.keys(t)),{}})).catch((function(t){})),a.abrupt("return",Cr.navigate("login-confirmation",{redirectUrl:this.redirectUrl,payload:this.deeplinkParams}));case 18:if(a.prev=18,a.t0=a.catch(1),"0C-A401"===a.t0.message){a.next=23;break}return a.abrupt("return",eN(a.t0.message));case 23:return a.abrupt("return",!1);case 24:case"end":return a.stop()}}),_callee,this,[[1,18]])}))),function authenticateUser(){return r.apply(this,arguments)})},{key:"setErrorMessage",value:function setErrorMessage(){var t=this.tag("FormContainer").children[this._index],r={duration:.1,timingFunction:"ease-in-out"};if(t.fieldName===yk){this.tag("Container").patch({Separator:{smooth:{alpha:[this._errorMessages[t.fieldName]?1:0,r]}},ErrorContainer:{smooth:{alpha:[this._errorMessages[t.fieldName]?1:0,r]},ErrorIcon:{visible:Boolean(this._errorMessages[t.fieldName]),smooth:{alpha:[this._errorMessages[t.fieldName]?1:0,r]}},ErrorText:{smooth:{alpha:[this._errorMessages[t.fieldName]?1:0,r]}}}});var i=this._errorMessages[t.fieldName];t.announceInstructions=[null!=i?i:""],this.tag("ErrorText").patch({text:{text:null!=i?i:""}})}else this.tag("Container").patch({Separator:{smooth:{alpha:[0,r]}},ErrorContainer:{smooth:{alpha:[0,r]},ErrorIcon:{alpha:0}}})}},{key:"$updateInputValue",value:function $updateInputValue(t,r){this._formValues=_objectSpread2(_objectSpread2({},this._formValues),{},_defineProperty({},t,r)),this._errorMessages[t]&&delete this._errorMessages[t]}},{key:"$handleInputError",value:function $handleInputError(t,r){this._errorMessages=_objectSpread2(_objectSpread2({},this._errorMessages),{},_defineProperty({},t,r))}},{key:"announce",get:function get(){return[this.tag("Title").text.text,this.tag("Subtitle").text.text,Object.keys(this._errorMessages).length>0&&"‘Sign in’ button was disabled because there are some fields with some errors. Please check your information and try again."]}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,flex:{direction:"column",alignItems:"flex-start",paddingLeft:105,paddingTop:129},Title:{w:1148,text:_objectSpread2(_objectSpread2({},kg.TextStyles.h1),{},{text:"Sign In",wordWrapWidth:1148})},Subtitle:{w:1148,flexItem:{marginBottom:24},text:_objectSpread2(_objectSpread2({},kg.TextStyles.helperBody),{},{text:"Enter your email and password to sign in.",wordWrapWidth:1148})},Container:{flex:{direction:"row"},FormContainer:{flex:{direction:"column",alignItems:"flex-start"},Email:{w:1148,type:BC,closeKeyboardOnUp:!1,closeKeyboardOnDown:!1,placeholder:"Enter your email",fieldName:yk,inputType:"email",shouldInputBeValidated:!0,flexItem:{marginBottom:24}},Password:{w:1178,type:UC,closeKeyboardOnUp:!1,closeKeyboardOnDown:!1,placeholder:"Enter your password",fieldName:vk,flexItem:{marginBottom:24}},Buttons:{h:QA.height,type:QA,flexItem:{marginTop:-72}}},Separator:{w:2,h:207,rect:!0,color:kg.colours.white500,alpha:0,flexItem:{marginLeft:75,marginRight:75}},ErrorContainer:{flex:{direction:"column"},ErrorIcon:{alpha:0,texture:j.Tools.getSvgTexture(TI,74,74),flexItem:{marginBottom:25}},ErrorText:{alpha:0,text:_objectSpread2(_objectSpread2({},kg.TextStyles.helperBody),{},{textColor:kg.colours.white500,lineHeight:42,wordWrapWidth:406,text:""})}}},Logo:{x:1645,y:35,flexItem:!1,texture:j.Tools.getSvgTexture(II,151,60)}}}}]),SignInEmail}(j.Component),Tk=function(t){_inherits(ErrorPage,t);var r=_createSuper(ErrorPage);function ErrorPage(){return _classCallCheck(this,ErrorPage),r.apply(this,arguments)}return _createClass(ErrorPage,[{key:"_updateButtons",value:function _updateButtons(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=r.map((function(r){switch(r){case Ig.ErrorButton.Login:return{text:"Login",callback:function callback(){return Cr.navigate("sign-in-pin-and-pair")}};case Ig.ErrorButton.Ok:return{text:"Ok",callback:function callback(){return Cr.back()}};case Ig.ErrorButton.TryAgain:return{text:"Try Again",callback:function callback(){return Cr.back()}};case Ig.ErrorButton.Signin:return{text:"Sign in",callback:function callback(){return _n.getInstance().emit(gk),Cr.navigate("sign-in-picker")}};case Ig.ErrorButton.Subscribe:return{text:"Subscribe",callback:function callback(){return Cr.navigate("subscription-picker")}};case Ig.ErrorButton.DifferentEmail:return{text:"Use different email",callback:function callback(){var t=Cr.getHistory()||[],r=_objectSpread2({},Cr.getHistoryState());return delete r[ck],Cr.replaceHistoryState(_objectSpread2({},r)),t.length?Cr.back():Cr.navigate("sign-up",{formValues:r})}};case Ig.ErrorButton.DifferentPassword:return{text:"Use different password",callback:function callback(){var t=Cr.getHistory()||[],r=_objectSpread2({},Cr.getHistoryState());return delete r[dk],Cr.replaceHistoryState(_objectSpread2({},r)),t.length?Cr.back():Cr.navigate("sign-up",{formValues:r})}};case Ig.ErrorButton.Home:return{text:"Back",callback:function callback(){return Cr.navigate("home")}};case Ig.ErrorButton.Dismiss:return{text:"Dismiss",callback:function callback(){t.back()}};case Ig.ErrorButton.SignInPW:return{text:"Sign in with New Password",callback:function callback(){var t=Cr.getHistory()||[],r=_objectSpread2({},Cr.getHistoryState());return delete r[vk],t.length?(Cr.replaceHistoryState(_objectSpread2(_objectSpread2({},r),{},{focusedIndex:1})),Cr.back()):Cr.navigate("sign-in-email",{formValues:r,focusedIndex:1})}};case Ig.ErrorButton.SignInCode:return{text:"Sign in with Code",callback:function callback(){return Cr.navigate("sign-in-pin-and-pair")}};case Ig.ErrorButton.Back:default:return{text:"Back",callback:function callback(){return t.back()}}}}));this.tag("Buttons").items=i}},{key:"_patchItems",value:function _patchItems(){if(this._updateButtons(this.buttons),this.title&&this.patch({Title:{visible:!0,text:{text:this.title}}}),this.description){var t=this.description.trim().split("\n");this.tag("DescriptionContainer").children=t.map((function(t){return{text:_objectSpread2(_objectSpread2({height:36,text:t},kg.TextStyles.featuredCopy),{},{advancedRenderer:!0})}}))}this.patch({ErrorCode:{visible:!!this.errorCode,text:{text:this.errorCode?"Error Code ".concat(this.errorCode):""}}}),this._refocus()}},{key:"_active",value:function _active(){var t=this;qE("page:loaded",{path:"error",title:"Error"}),this.subscription=Mg.errorStream$.subscribe((function(r){var i=r.buttons,a=r.title,u=r.description,l=r.errorCode;t.buttons=i,t.title=a,t.description=u,t.errorCode=l,t._patchItems()}))}},{key:"_inactive",value:function _inactive(){this.subscription.unsubscribe()}},{key:"params",set:function set(t){var r=t.redirect;this.redirect=r}},{key:"back",value:function back(){var t,r=Cr.getHistory()||[];if(!r.length)return this.redirect?Cr.navigate("dynamic/".concat(lE(this.redirect))):Cr.navigate("home");var i=r[r.length-1],a=!1,u=!1;(function isSeasonOrShow(t){return/season|show/g.test(t)})(null==i||null===(t=i.state)||void 0===t?void 0:t.pagePath)&&(a=!0,i.state.focusIndex>1&&(u=!0));var l=Cr.getHistoryState()||{};return!!["sign-in-email","sign-up"].includes(i.hash)||Cr.replaceHistoryState(_objectSpread2(_objectSpread2({},l),{},{backToProgrammeDetailPage:a,isExtraContent:u})),Cr.back()}},{key:"_handleBack",value:function _handleBack(){return this.back()}},{key:"_getFocused",value:function _getFocused(){return this.tag("Buttons")}},{key:"announce",get:function get(){var t="\n      ".concat(this.tag("Title").text.text?this.tag("Title").text.text:"",".\n      ").concat(this.description,".\n      ").concat(this.tag("ErrorCode").visible?this.tag("ErrorCode").text.text:"",".\n    ");return Mg.pronounceTTS(t)}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,flex:{direction:"column",alignItems:"flex-start",justifyContent:"center",paddingLeft:105},Logo:{x:1645,y:35,flexItem:!1,texture:j.Tools.getSvgTexture(II,151,60)},Icon:{y:-78,w:104,h:104,texture:j.Tools.getSvgTexture(TI,104,104)},Title:{w:1105,y:-48,visible:!1,text:_objectSpread2(_objectSpread2({},kg.TextStyles.h1),{},{text:"",wordWrapWidth:1105})},DescriptionContainer:{w:1105,y:-48,flexItem:{marginBottom:24},flex:{direction:"column",justifyContent:"center",alignItems:"flex-start"}},ErrorCode:{w:1105,y:-48,flexItem:{marginBottom:24},text:_objectSpread2(_objectSpread2({h:63},kg.TextStyles.h2),{},{text:"",textColor:kg.colours.lightBlue500})},Buttons:{y:-120,x:0,type:QA}}}}]),ErrorPage}(j.Component),bk=function(t){_inherits(ExitPrompt,t);var r=_createSuper(ExitPrompt);function ExitPrompt(){return _classCallCheck(this,ExitPrompt),r.apply(this,arguments)}return _createClass(ExitPrompt,[{key:"_handleDown",value:function _handleDown(){return this._index<this.tag("ButtonContainer").children.length-1&&(this.focusItem(1),!0)}},{key:"_handleUp",value:function _handleUp(){return 0===this._index||this.focusItem(-1),!0}},{key:"_getFocused",value:function _getFocused(){return this.tag("ButtonContainer").children[this._index]}},{key:"activeItem",get:function get(){return this.tag("ButtonContainer").children[this._index]}},{key:"_active",value:function _active(){qE("page:loaded",{path:"exit",title:"Exit"}),this._index=0}},{key:"_handleBack",value:function _handleBack(){return Cr.back(),!0}},{key:"_animateToSelected",value:function _animateToSelected(){}},{key:"announce",get:function get(){return"\n      ".concat(this.tag("Title").text.text,", \n      ").concat(this.tag("Description").text.text,"\n    ")}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,rect:!0,color:kg.colours.darkBlue500,flex:{alignItems:"flex-end",justifyContent:"flex-end"},Title:{text:_objectSpread2({text:"Exit App"},kg.TextStyles.h1),flexItem:{marginRight:-550,marginBottom:551}},Description:{text:_objectSpread2({text:"Are you sure you want to exit the app?"},kg.TextStyles.featuredCopy),flexItem:{marginRight:77,marginBottom:479}},ButtonContainer:{w:722,h:1080,rect:!0,color:kg.colours.mutedBlue500,CancelButton:{y:24,type:DC,item:{text:"Cancel",textAlign:"flex-start",verticalAlign:"flex-start",callback:function callback(){return Cr.back()}},flexItem:{marginRight:130}},ExitButton:{y:24,type:DC,item:{text:"Exit",textAlign:"flex-start",verticalAlign:"flex-start",callback:ExitPrompt.onClose},flexItem:{marginRight:130,marginBottom:510}},flex:{direction:"column",alignItems:"flex-end",justifyContent:"flex-end",marginLeft:1e3}}}}},{key:"onClose",value:function onClose(){Ry.sendEvent({type:"app",action:"app:exit"}),window.parent.postMessage("close","*")}}]),ExitPrompt}(Rx),Mk=function(t){_inherits(Inactive,t);var r=_createSuper(Inactive);function Inactive(){var t;_classCallCheck(this,Inactive);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_interval",null),t}return _createClass(Inactive,[{key:"_active",value:function _active(){var t=this;this._interval=setInterval((function(){t.stage.gc()}),5e3)}},{key:"_inactive",value:function _inactive(){clearInterval(this._interval),this._interval=null}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,src:A("images/britbox-fullscreen.jpg")}}}]),Inactive}(j.Component),Sk=function(t){_inherits(LoginConfirmation,t);var r=_createSuper(LoginConfirmation);function LoginConfirmation(){return _classCallCheck(this,LoginConfirmation),r.apply(this,arguments)}return _createClass(LoginConfirmation,[{key:"params",set:function set(t){var r=t.payload,i=void 0===r?{}:r,a=t.redirectUrl,u=i.addToWatchlist,l=void 0!==u&&u,c=i.id,d=void 0===c?"":c,g=i.customId;this.payload=i,this.redirectUrl=a,l&&!iI(d)&&(aI(g),tI(d).catch((function(t){})))}},{key:"_active",value:function _active(){var t=this;qE("page:loaded",{path:"login_confirmation",title:"Login Confirmation"}),GE(),Ni.getAccount().then((function(t){var r=t.subscriptionCode,i=t.gigyaId,a=t.entitlements,u=t.address;return Ry.sendUserEvent("user:login",{subscriptionCode:r,userId:i,entitlements:a,address:u}),Ni.setSubscriptionCode(r),bA(),!1})).catch((function(t){})),setTimeout((function(){var r=t.redirectUrl?t.redirectUrl:"home",i=Cr.getHistory(),a=i[i.length-1];if(a&&function isSeasonLink(t){return/season/g.test(t)}(a.hash)){var u=Cr.getHistoryState();Cr.replaceHistoryState(_objectSpread2(_objectSpread2({},u),{},{focusOnWatchButton:!0}))}a&&"home"===a.hash&&Cr.replaceHistoryState({focusIndex:0,focusedItemIndex:0,pagePath:"/",pageTemplate:"Home",y:0,refUseCase:""}),Cr.navigate(r,t.payload)}),3e3)}},{key:"_handleBack",value:function _handleBack(){}},{key:"announce",get:function get(){return"\n      ".concat(this.tag("Title").text.text,", \n      ").concat(this.tag("Description").text.text,"\n    ")}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,rect:!0,color:kg.colours.darkBlue500,flex:{direction:"column",alignItems:"center",justifyContent:"center",marginLeft:115,marginRight:115},Logo:{w:274,h:114,texture:j.Tools.getSvgTexture(II,274,114),flexItem:{marginBottom:72}},Title:{text:_objectSpread2({text:"Welcome to the world of British TV",lineHeight:96},kg.TextStyles.h1),flexItem:{marginBottom:24}},Description:{text:_objectSpread2({text:"Great! Your TV is now connected to your account!",lineHeight:48},kg.TextStyles.featuredCopy),flexItem:{marginBottom:72}},LoadingSpinner:{w:134,h:134,type:RI}}}}]),LoginConfirmation}(j.Component),Ek=function(t){_inherits(Logout,t);var r,i=_createSuper(Logout);function Logout(){return _classCallCheck(this,Logout),i.apply(this,arguments)}return _createClass(Logout,[{key:"_init",value:function _init(){this._logoutHandler=this._logoutHandler.bind(this),this._onLogout=this._onLogout.bind(this),this.tag("CancelButton").patch({item:{text:"Cancel",callback:this._cancelHandler}}),this.tag("ConfirmButton").patch({item:{text:"Yes",callback:this._logoutHandler}})}},{key:"_logoutHandler",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t,r=this;return regeneratorRuntime.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!this.inProgress){i.next=2;break}return i.abrupt("return");case 2:return Mg.loadingSpinnerVisible$.next(!0),this.inProgress=!0,i.next=6,Mg.getDeviceDetails();case 6:t=i.sent,Ni.removeDevice(t).then(this._onLogout).catch((function(t){r._onLogout()}));case 8:case"end":return i.stop()}}),_callee,this)}))),function _logoutHandler(){return r.apply(this,arguments)})},{key:"_onLogout",value:function _onLogout(){Ry.sendUserEvent("user:logout"),V(),ZE(),Ni.setSubscriptionCode(),rI([]),bA(),GE(),Cr.navigate("home"),this.inProgress=!1}},{key:"_cancelHandler",value:function _cancelHandler(){Cr.back()}},{key:"_getFocused",value:function _getFocused(){return 0===this._index?this.tag("ConfirmButton"):this.tag("CancelButton")}},{key:"_active",value:function _active(){this._index=1,qE("page:loaded",{path:"logout",title:"Logout"})}},{key:"_handleUp",value:function _handleUp(){this._index=0}},{key:"_handleDown",value:function _handleDown(){this._index=1}},{key:"announce",get:function get(){return"\n      ".concat(this.tag("Title").text.text,", \n      ").concat(this.tag("Description").text.text,",\n    ")}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,rect:!0,color:kg.colours.darkBlue500,flex:{direction:"column",alignItems:"center",justifyContent:"center"},Title:{flexItem:{marginBottom:24},text:_objectSpread2({text:"Sign Out"},kg.TextStyles.h1)},Description:{flexItem:{marginBottom:48},text:_objectSpread2({text:"Are you sure you want to sign out?"},kg.TextStyles.featuredCopy)},ConfirmButton:{type:sI,item:{text:"Yes"}},CancelButton:{y:24,type:sI,item:{text:"Cancel"}}}}}]),Logout}(j.Component),Ik=function(t){_inherits(OutOfLocation,t);var r,i=_createSuper(OutOfLocation);function OutOfLocation(){return _classCallCheck(this,OutOfLocation),i.apply(this,arguments)}return _createClass(OutOfLocation,[{key:"main",set:function set(t){var r=PE("",["item","images","wallpaper"],t);if(r){var i=Mg.reformatImageSrc(r,{w:1920,h:1080});this.patch({Image:{texture:Img(i).cover(1920,1080)}})}}},{key:"_animateToSelected",value:function _animateToSelected(){}},{key:"_handleUp",value:function _handleUp(){}},{key:"_handleDown",value:function _handleDown(){}},{key:"_handleBack",value:function _handleBack(){Cr.navigate("exit-prompt")}},{key:"_getFocused",value:function _getFocused(){}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,Image:{y:0,x:0,w:OutOfLocation.width,h:OutOfLocation.height},MenuBar:{y:0,w:1920,h:170,zIndex:1,Background:{w:function w(t){return t},h:function h(t){return t},color:kg.colours.darkBlue500,rect:!0},Container:{w:function w(t){return t},h:function h(t){return t},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},Icon:{flexItem:{marginLeft:115},texture:j.Tools.getSvgTexture(II,151,60)}}}}}},{key:"width",get:function get(){return 1920}},{key:"height",get:function get(){return 1080}},{key:"getData",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r;return regeneratorRuntime.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return qE("page:loaded",{path:"out_of_country",title:"Out Of Country"}),i.next=3,Ni.getPage("/home");case 3:r=i.sent,t.main={item:r.entries[0]};case 5:case"end":return i.stop()}}),_callee)}))),function getData(t){return r.apply(this,arguments)})}]),OutOfLocation}(Rx),Dk=function(t){_inherits(ParentalControl,t);var r,i=_createSuper(ParentalControl);function ParentalControl(){return _classCallCheck(this,ParentalControl),i.apply(this,arguments)}return _createClass(ParentalControl,[{key:"_updateParentalControl",value:function _updateParentalControl(t){var r=t.parentalControl,i=t.parentalControlLevel,a=t.parentalControlPIN;return Ni.updateParentalControl({parentalControl:r,parentalControlLevel:i,oldParentalControlPin:this._parentalControlPIN||a}).then((function(t){var a=t.responseCode;return"1"===a&&(r?H("parental_control_level",i):Q("parental_control_level"),Cr.back()),"1"===a})).catch((function(t){}))}},{key:"main",set:function set(t){var r=this;this._parentalControlPIN=kE(["parentalControlDetails","parentalControlPIN"],t);var i=hE().classification.map((function(t){var i=t.name,a=t.level;return{type:QC,item:{text:i,callback:function callback(){return r._updateParentalControl({parentalControl:!0,parentalControlLevel:a})}}}}));this.tag("Items").children=i;var a=0;this.tag("Items").children.forEach((function(t){t.y=a,a+=t.constructor.height}))}},{key:"_init",value:function _init(){this._index=0,this._refocus()}},{key:"_handleUp",value:function _handleUp(){return this._index>0?(this.focusItem(-1),!0):(this.signal("_handleFocus"),!0)}},{key:"activeItem",get:function get(){return this.tag("Items").children[this._index]}},{key:"_animateToSelected",value:function _animateToSelected(){}},{key:"_attach",value:function _attach(){_n.getInstance().addEventListener("PARENTAL_CONTROL:UPDATE",this._updateParentalControl)}},{key:"_detach",value:function _detach(){_n.getInstance().removeEventListener("PARENTAL_CONTROL:UPDATE",this._updateParentalControl)}},{key:"_handleBack",value:function _handleBack(){Cr.back()}},{key:"announce",get:function get(){return this.tag("Content").text.text}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,color:kg.colours.darkBlue500,rect:!0,Content:{x:745,y:88,text:_objectSpread2(_objectSpread2({text:"Classification"},kg.TextStyles.h1),{},{wordWrapWidth:GI.width-230})},Items:{x:745,y:318}}}},{key:"getData",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r;return regeneratorRuntime.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return qE("page:loaded",{path:"account.parental_controls",title:"Parental Controls"}),i.next=3,Ni.getParentalControlDetails();case 3:r=i.sent,t.main={parentalControlDetails:r};case 5:case"end":return i.stop()}}),_callee)}))),function getData(t){return r.apply(this,arguments)})}]),ParentalControl}(Rx),Ak=function(t){_inherits(PasswordConfirmation,t);var r,i,a=_createSuper(PasswordConfirmation);function PasswordConfirmation(){var t;_classCallCheck(this,PasswordConfirmation);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=a.call.apply(a,[this].concat(i))),"_getPCDetails",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var r,i;return regeneratorRuntime.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ni.getParentalControlDetails();case 2:r=a.sent,i=r.parentalControlPIN,t.parentalControlPIN=i;case 5:case"end":return a.stop()}}),_callee)})))),t}return _createClass(PasswordConfirmation,[{key:"_init",value:function _init(){this._isFirstTimeParentalControl=!1,this._index=0,this._pwdValueForValidate="",this.validatePassword=this.validatePassword.bind(this),this.formatPasswordInput=this.formatPasswordInput.bind(this),this.keyboardClose=this.keyboardClose.bind(this),this._getPCDetails=this._getPCDetails.bind(this),this.tag("PasswordConfirmation").patch({buttons:[{text:"Confirm",callback:this.validatePassword,disabled:!0},{text:"Cancel",callback:this._handleBack}]})}},{key:"_active",value:function _active(){this.widgets.keyboard.x=114,this.widgets.keyboard.y=932,_n.getInstance().addEventListener(gA.CLOSE,this.keyboardClose)}},{key:"_inactive",value:function _inactive(){this._index=0,this.formatPasswordInput(),this.tag("PasswordConfirmation").patch({buttons:[{text:"Confirm",callback:this.validatePassword,disabled:!0},{text:"Cancel",callback:this._handleBack}]}),_n.getInstance().removeEventListener(gA.CLOSE,this.keyboardClose)}},{key:"keyboardClose",value:function keyboardClose(t){"up"===t.direction&&this.widgets.keyboard.closeKeyboard()}},{key:"_getFocused",value:function _getFocused(){return this.tag("PasswordConfirmation")}},{key:"_handleBack",value:function _handleBack(){return Cr.back(),!0}},{key:"validatePassword",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this._pwdValueForValidate.length){t.next=5;break}this.tag("PasswordConfirmation").patch({errorText:"Please enter the password."}),this.fireAncestors("$announce",["Please enter the password."]),t.next=26;break;case 5:return t.next=7,Ni.validateContactPassword({contactPassword:this._pwdValueForValidate});case 7:if("1"!==t.sent.responseCode){t.next=23;break}if(!this._isFirstTimeParentalControl){t.next=13;break}return Cr.navigate("pin-page",{preferGoingBack:!0}),t.abrupt("return",!0);case 13:if(!this._isToggleOff){t.next=20;break}return t.next=16,this._getPCDetails();case 16:return Mg.loadingSpinnerVisible$.next(!0),t.next=19,Ni.updateParentalControl({parentalControl:!1,parentalControlPIN:this.parentalControlPIN,oldParentalControlPin:this.parentalControlPIN}).then((function(){return Q("parental_control_level"),Cr.back(),!0})).catch((function(t){})).finally((function(){Mg.loadingSpinnerVisible$.next(!0)}));case 19:return t.abrupt("return",!0);case 20:Cr.navigate("parental-control"),t.next=26;break;case 23:this.tag("PasswordConfirmation").patch({errorText:"Password incorrect. Please try again.\nTo reset your password, please go to britbox.com, sign-in and select ‘Forgot Password’"}),this.fireAncestors("$announce",["Password incorrect. Please try again.","To reset your password, please go to britbox.com, sign-in and select ‘Forgot Password’"]);case 26:case"end":return t.stop()}}),_callee2,this)}))),function validatePassword(){return i.apply(this,arguments)})},{key:"formatPasswordInput",value:function formatPasswordInput(){this._pwdValueForValidate="",this.tag("PasswordConfirmation").patch({errorText:""})}},{key:"$updateInputValue",value:function $updateInputValue(t,r){this.tag("PasswordConfirmation").patch({buttons:[{text:"Confirm",callback:this.validatePassword,disabled:""===r},{text:"Cancel",callback:this._handleBack}]}),this._pwdValueForValidate=r}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,color:kg.colours.darkBlue500,rect:!0,PasswordConfirmation:{type:zC,title:"Enter Password",errorText:""}}}},{key:"setData",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(t,r,i){return regeneratorRuntime.wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:t._isFirstTimeParentalControl="true"===r,t._isToggleOff="true"===i;case 2:case"end":return a.stop()}}),_callee3)}))),function setData(t,i,a){return r.apply(this,arguments)})}]),PasswordConfirmation}(Rx),Ck=function(t){_inherits(PinPage,t);var r,i=_createSuper(PinPage);function PinPage(){return _classCallCheck(this,PinPage),i.apply(this,arguments)}return _createClass(PinPage,[{key:"params",set:function set(t){var r=t.validatePin,i=t.redirectURL,a=t.backURL,u=t.isExtraContent,l=t.preferGoingBack;this.validatePin=r,this.redirectURL=i,this.backURL=a,this.isExtraContent=u,this.preferGoingBack=l,this.validatePin&&this.tag("Content").patch({Pin:{title:"Enter PIN",description:"Restricted content, please enter your Pin."}})}},{key:"_init",value:function _init(){this._pinValue="",this.updatePin=this.updatePin.bind(this),this.submitPin=this.submitPin.bind(this)}},{key:"_active",value:function _active(){this.widgets.keyboard.x=114,this.widgets.keyboard.y=1e3,_n.getInstance().emit(gA.REQUEST_OPEN,{target:"Pin",value:this.value,backURL:this.backURL,preferGoingBack:this.preferGoingBack,closeOnUp:!1,closeOnDown:!1,isExtraContent:this.isExtraContent}),Cr.focusWidget("Keyboard"),this.fireAncestors("$announce",[this.validatePin?"Enter PIN. Restricted content, please enter your Pin.":"Create PIN. A restricted profile requires a Pin.","1"]),_n.getInstance().addEventListener("PIN:UPDATE",this.updatePin),_n.getInstance().addEventListener("PIN:SUBMIT",this.submitPin)}},{key:"_inactive",value:function _inactive(){this._index=0,this._pinValue="",this.tag("ErrorMessage").visible=!1,_n.getInstance().emit("PIN:RESET"),this.widgets.keyboard.closeKeyboard(),_n.getInstance().removeEventListener("PIN:UPDATE",this.updatePin),_n.getInstance().removeEventListener("PIN:SUBMIT",this.submitPin)}},{key:"_getFocused",value:function _getFocused(){return this.tag("Pin")}},{key:"_handleBack",value:function _handleBack(){}},{key:"updatePin",value:function updatePin(t){var r=t.value;-1===r?this._pinValue=this._pinValue.slice(0,-1):this._pinValue.length<4&&(this._pinValue+=r)}},{key:"submitPin",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(!this.validatePin){t.next=7;break}return t.next=3,Ni.validateParentalControlPIN({parentalControlPin:this._pinValue});case 3:return"1"===t.sent.responseCode?(this.tag("Content").patch({ErrorMessage:{visible:!1}}),this.widgets.keyboard.closeKeyboard(),this.redirectURL&&Cr.navigate(this.redirectURL,{validatedPin:!0})):(this.tag("Content").patch({ErrorMessage:{visible:!0}}),_n.getInstance().emit("PIN:RESET"),this._index=0,this._pinValue="",this.fireAncestors("$announce",["".concat(this.tag("ErrorMessage").text.text)])),t.abrupt("return");case 7:return t.next=9,Ni.updateParentalControl({parentalControl:"true",parentalControlLevel:"1",newParentalControlPin:this._pinValue});case 9:"1"===t.sent.responseCode&&(this.widgets.keyboard.closeKeyboard(),Cr.navigate("parental-control"));case 12:case"end":return t.stop()}}),_callee,this)}))),function submitPin(){return r.apply(this,arguments)})}],[{key:"_template",value:function _template(){return{w:1920,h:1080,color:kg.colours.darkBlue500,rect:!0,flex:{alignItems:"center",justifyContent:"center"},Content:{flex:{alignItems:"center",justifyContent:"center",direction:"column"},Pin:{type:HC,title:"Create PIN",description:"A restricted profile requires a Pin."},ErrorMessage:{visible:!1,flexItem:{marginTop:54},text:_objectSpread2(_objectSpread2({},kg.TextStyles.bodyCopy),{},{textColor:kg.colours.verificationFailed,text:"Sorry, your PIN is incorrect. Please try again."})}}}}}]),PinPage}(Rx),Nk=jE(["entries",0,"template"],"Player Standard"),xk=function resolvePlayerPage(t){return Ni.getPage(t).then((function(t){return Nk(t)?t.entries[0].item:null}))},kk=jE(["customFields","DRM"],"T"),wk=jE(["customFields","UHDFlag"],"True"),Ok=function isExtraContent(t){return/program|trailer/.test(t)},Lk=function(t){_inherits(Player,t);var r,i,a,u=_createSuper(Player);function Player(){return _classCallCheck(this,Player),u.apply(this,arguments)}return _createClass(Player,[{key:"initPlayer",value:function initPlayer(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=PE(null,["data","thumbnails"],this),i=PE({},["data","manifests"],this),a=PE({},["data","item"],this),u=PE(null,["data","drmInfo"],this),l=PE(null,["data","nextAsset","next"],this);this.tag("Modal").patch({visible:!1}),this.tag("Player").patch({visible:!0}),this.tag("Player").children=[{type:Ix,w:1920,h:1080,manifests:i,item:a,startPosition:t,drmInfo:u,nextAsset:l,thumbnails:r,backURL:this._backURL}],this._refocus()}},{key:"initLivePlayer",value:function initLivePlayer(){var t=PE({},["data","manifests"],this),r=PE({},["data","liveInfo"],this);this.tag("Modal").patch({visible:!1}),this.tag("Player").patch({visible:!0}),this.tag("Player").children=[{type:xx,w:1920,h:1080,manifests:t,item:r}],this._refocus()}},{key:"_onDataProvided",value:function _onDataProvided(){var t=this;if(this._errorCode)return"0C-D002"===this._errorCode?(Cr.navigate("sign-in-pin-and-pair",{videoRedirectUrl:this._redirectURL}),this._errorCode=null,void(this._redirectURL=null)):(eN(this._errorCode,this._backURL),this._errorCode=null,void(this._redirectURL=null));if(this._redirectURL)return Cr.navigate("pin-page",{validatePin:!0,redirectURL:this._redirectURL,backURL:this._backURL,isExtraContent:this._isExtraContent}),this._redirectURL=null,void(this._backURL=null);if(PE(null,["data","liveInfo"],this))this.initLivePlayer();else{var r=PE(0,["data","startPosition"],this),i=PE("",["data","item","type"],this),a=Ok(i);if(r&&!a){this._index=0;var u=PE("",["data","item","title"],this);jE(["data","item","type"],"episode",this)&&(u=PE("",["data","item","showTitle"],this));var l=PE(!1,["data","item","episodeName"],this),c=PE(!1,["data","item","seasonTitle"],this);this.tag("Player").patch({visible:!1}),this.tag("Modal").patch({visible:!0,Title:{text:{text:u}},SubTitle:{visible:!!c||!!l,text:{text:"".concat(c,", ").concat(l)}},ResumeButton:{item:{text:"Resume",callback:function callback(){return t.initPlayer(r)}}},StartFromBeginningButton:{item:{text:"Start from Beginning",callback:function callback(){return t.initPlayer()}}}}),this._refocus()}else this.initPlayer()}}},{key:"onForeground",value:function onForeground(){this.tag("Player").visible&&this.tag("Player").children[0].onForeground()}},{key:"onBackground",value:function onBackground(){this.tag("Player").visible&&this.tag("Player").children[0].onBackground()}},{key:"_disable",value:function _disable(){this.tag("Player").children=[]}},{key:"_active",value:function _active(){this._errorCode||this._redirectURL||kx.next(!1)}},{key:"_inactive",value:function _inactive(){kx.next(!0),PN.src&&PN.close()}},{key:"_getFocused",value:function _getFocused(){var t=this.tag("Player").children[0];return t&&this.tag("Player").visible?t:this.tag("Modal").visible?0===this._index?this.tag("ResumeButton"):this.tag("StartFromBeginningButton"):null}},{key:"_handleUp",value:function _handleUp(){return this._index=0,!0}},{key:"_handleDown",value:function _handleDown(){return this._index=1,!0}},{key:"_handleBack",value:function _handleBack(){if((Cr.getHistory()||[]).length){var t=Cr.getHistoryState();return Cr.replaceHistoryState(_objectSpread2(_objectSpread2({},t),{},{wasItemWatched:!1})),Cr.back(),!0}return this._backURL?(Cr.navigate("dynamic/".concat(lE(this._backURL))),this._backURL=null,!0):(Cr.navigate("home"),!0)}},{key:"announce",get:function get(){if(!this.tag("Modal").visible)return!1;var t="\n    ".concat(this.tag("Title").text.text,",\n    ").concat(this.tag("SubTitle").text.text,",\n    ").concat(this.tag("Description").text.text,"\n  ");return Mg.pronounceTTS(t)}}],[{key:"resolveLivePlaybackInfo",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t,r,i){var a,u,l;return regeneratorRuntime.wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Ni.getActiveSubscriptions();case 3:return c.next=5,Ni.getManifests(r,null,{live:!0});case 5:a=c.sent,u="/watch/".concat(r),l=i.title||i.description,qE("page:loaded",{path:u,title:l}),a&&(XE("player:init",{asset:{duration:-1,id:r,isLive:!0,title:l}}),t.data={manifests:a,liveInfo:i}),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(0),t._errorCode=c.t0.message;case 15:return c.abrupt("return",null);case 16:case"end":return c.stop()}}),_callee,null,[[0,12]])}))),function resolveLivePlaybackInfo(t,r,i){return a.apply(this,arguments)})},{key:"resolveVODPlaybackInfo",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(t,r,i){var a,u,l,c,d,g,p,m,v,b,M,S,E,I,D,A,C,N,k,O;return regeneratorRuntime.wrap((function _callee2$(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,a="/watch/".concat(cE(r)),L.next=4,xk(a);case 4:if(u=L.sent,l="trailer"===u.type,qE("page:loaded",{path:a,title:u.title}),c=Number(G("parental_control_level")),t._backURL="episode"===u.type?u.season.path:u.path,u){L.next=11;break}return L.abrupt("return",!1);case 11:if(Ok(u.type)&&(t._isExtraContent=!0,t._backURL=""),d=kk(u),g=wk(u),l){L.next=20;break}return L.next=17,Ni.getVideoInfo(u.id,g);case 17:L.t0=L.sent,L.next=21;break;case 20:L.t0={};case 21:if(p=L.t0){L.next=24;break}return L.abrupt("return",!1);case 24:if(i||!c){L.next=30;break}if(m=PE(null,["classification","name"],u),!(UE(m)>c)){L.next=30;break}return t._redirectURL="/watch/".concat(lE(r)),L.abrupt("return",!1);case 30:if(v=PE("",["customFields","PrimaryVpid"],u),b=p.token,M=p.url,S="urn:bbc:pips:pid:".concat(M||v),!d){L.next=37;break}return L.next=36,Ni.getDRMInfo(S,b);case 36:E=L.sent;case 37:return L.next=39,Ni.getManifests(S,b,{drm:d,uhd:g});case 39:if(I=L.sent,l){L.next=46;break}return L.next=43,Ni.getWatchedItemById(u.id);case 43:L.t1=L.sent,L.next=47;break;case 46:L.t1={};case 47:if(D=L.t1,A=D.position,L.t2="episode"===u.type,!L.t2){L.next=54;break}return L.next=53,Ni.getNextVideo(u.id);case 53:L.t2=L.sent;case 54:if(C=L.t2,!I){L.next=64;break}return N=u.duration,k=u.title,L.next=59,Player.fetchThumbnailsFromManifest(I);case 59:return O=L.sent,XE("player:init",{asset:{duration:N,id:M||v,isLive:!1,title:k}}),t.data={item:u,manifests:I,startPosition:A,drmInfo:E,nextAsset:C,thumbnails:O,backURL:this._backURL},L.abrupt("return",!!I);case 64:L.next=70;break;case 66:L.prev=66,L.t3=L.catch(0),t._errorCode=L.t3.message,t._redirectURL="/watch/".concat(lE(r));case 70:return L.abrupt("return",null);case 71:case"end":return L.stop()}}),_callee2,this,[[0,66]])}))),function resolveVODPlaybackInfo(t,r,a){return i.apply(this,arguments)})},{key:"fetchThumbnailsFromManifest",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(t){var r,i,a,u;return regeneratorRuntime.wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:if(!((r=t.thumbnails).length>0)){l.next=6;break}return a=_slicedToArray(r,1),u=a[0],l.next=5,Ni.getThumbnailVTT(u.href);case 5:i=l.sent;case 6:return l.abrupt("return",PE(null,["entries"],i));case 7:case"end":return l.stop()}}),_callee3)}))),function fetchThumbnailsFromManifest(t){return r.apply(this,arguments)})},{key:"before",value:function before(t,r){var i=r.liveInfo,a=void 0===i?null:i,u=r.path,l=r.validatedPin;return a?Player.resolveLivePlaybackInfo(t,u,a):Player.resolveVODPlaybackInfo(t,u,l)}},{key:"_template",value:function _template(){return{Player:{w:1920,h:1080},Modal:{visible:!1,w:1920,h:1080,rect:!0,color:kg.colours.darkBlue500,flex:{direction:"column",alignItems:"center",justifyContent:"center"},Title:{flexItem:{marginBottom:24},text:_objectSpread2({text:""},kg.TextStyles.h1)},SubTitle:{visible:!1,flexItem:{marginBottom:48},text:_objectSpread2({text:""},kg.TextStyles.featuredCopy)},Description:{flexItem:{marginBottom:24},text:_objectSpread2({text:"Would you like to continue watching or play from the beginning?"},kg.TextStyles.featuredCopy)},ResumeButton:{flexItem:{marginBottom:24},type:sI},StartFromBeginningButton:{type:sI}}}}}]),Player}(j.Component),Rk={duration:2},jk=function(t){_inherits(Screensaver,t);var r=_createSuper(Screensaver);function Screensaver(){var t;_classCallCheck(this,Screensaver);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(a))),"_backgroundImages",[A("images/Screensaver/BritBox-01.jpg"),A("images/Screensaver/BritBox-02.jpg"),A("images/Screensaver/BritBox-03.jpg"),A("images/Screensaver/BritBox-04.jpg"),A("images/Screensaver/BritBox-05.jpg"),A("images/Screensaver/BritBox-06.jpg"),A("images/Screensaver/BritBox-07.jpg"),A("images/Screensaver/BritBox-08.jpg"),A("images/Screensaver/BritBox-09.jpg"),A("images/Screensaver/BritBox-10.jpg")]),_defineProperty(_assertThisInitialized(t),"_backgroundIndex",1),t}return _createClass(Screensaver,[{key:"_active",value:function _active(){var t=this;this.tag("PrimaryBackgroundImage").on("txLoaded",(function(){t.tag("PrimaryBackgroundImage").setSmooth("alpha",1,{duration:2})})),this._animationInterval=Qe.setInterval((function(){t._backgroundIndex%2==0?(t.tag("PrimaryBackgroundImage").patch({src:t._backgroundImages[t._backgroundIndex]}),t.tag("SecondaryBackgroundImage").setSmooth("alpha",0,Rk),t.tag("PrimaryBackgroundImage").setSmooth("alpha",1,Rk)):(t.tag("SecondaryBackgroundImage").patch({src:t._backgroundImages[t._backgroundIndex]}),t.tag("PrimaryBackgroundImage").setSmooth("alpha",0,Rk),t.tag("SecondaryBackgroundImage").setSmooth("alpha",1,Rk)),t._backgroundIndex===t._backgroundImages.length-1?t._backgroundIndex=0:t._backgroundIndex+=1}),15e3)}},{key:"_inactive",value:function _inactive(){Qe.clearInterval(this._animationInterval)}},{key:"_handleKey",value:function _handleKey(){Cr.back()}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,PrimaryBackgroundImage:{alpha:.01,rect:!0,w:function w(t){return t},h:function h(t){return t},src:A("images/Screensaver/BritBox-01.jpg")},SecondaryBackgroundImage:{alpha:0,rect:!0,w:function w(t){return t},h:function h(t){return t}}}}}]),Screensaver}(j.Component),Pk=new rE,Fk=Pk.pipe(function switchMap(t,r){return operate((function(i,a){var u=null,l=0,c=!1,d=function checkComplete(){return c&&!u&&a.complete()};i.subscribe(createOperatorSubscriber(a,(function(i){null==u||u.unsubscribe();var c=0,g=l++;innerFrom(t(i,g)).subscribe(u=createOperatorSubscriber(a,(function(t){return a.next(r?r(i,t,g,c++):t)}),(function(){u=null,d()})))}),(function(){c=!0,d()})))}))}((function(t){return from(Ni.getSearch(t,!0))})),map((function(t){var r=t.term,i=t.movies,a=t.tv,u=t.people;return{term:r,items:[{template:"T1",title:"Movies",list:{items:i.items}},{template:"T1",title:"TV",list:{items:a.items}},{template:"AP",title:"People",list:{items:u}}]}}))),Bk=function resolveSearch(t){Pk.next(t)},Uk="Search",zk=function(t){_inherits(Search,t);var r,i=_createSuper(Search);function Search(){return _classCallCheck(this,Search),i.apply(this,arguments)}return _createClass(Search,[{key:"params",set:function set(t){var r=t.viaMenuBar,i=t.searchQuery;this.viaMenuBar=r,this.searchQuery=i}},{key:"resetPage",value:function resetPage(){this.tag("RecentSearches").reloadItems(),this.tag("RecentSearches").resetDefaultVisibility(),this.tag("Results").content="none",this.tag("Container").y=0,this.focusedItem="SearchInput",this.tag("SearchInput").resetInput(),this.tag("Results").resetResults()}},{key:"setResultsContainerPosition",value:function setResultsContainerPosition(){this.tag("Results").railCount>2?(this.tag("Container").setSmooth("y",-348),this.widgets.keyboard.setSmooth("y",-6),_n.getInstance().emit(yA,!1)):(this.tag("Container").setSmooth("y",1===this.tag("Results").railCount?0:-175),this.widgets.keyboard.setSmooth("y",1===this.tag("Results").railCount?342:298))}},{key:"historyState",value:function historyState(){return{}}},{key:"_init",value:function _init(){this.keyboardToggle=this.keyboardToggle.bind(this),this.handleRecentSearch=this.handleRecentSearch.bind(this)}},{key:"_focus",value:function _focus(){"MenuBar"!==this.focusedItem||Cr.isNavigating()||this.focusKeyboard()}},{key:"_getFocused",value:function _getFocused(){switch(this.tag("SearchInput").isFocused="SearchInput"===this.focusedItem,this.focusedItem){case"Results":return this.setResultsContainerPosition(),this.tag("Results");case"RecentSearches":return this.tag("RecentSearches");default:return}}},{key:"focusKeyboard",value:function focusKeyboard(){this.focusedItem="SearchInput",this.tag("SearchInput").isFocused=!0,_n.getInstance().emit(yA,!0),_n.getInstance().emit(gA.REQUEST_OPEN,{target:Uk,value:this.value,preferGoingBack:!0,closeOnDown:this.tag("RecentSearches").isVisible||this.tag("Results").hasResults}),Cr.focusWidget("Keyboard"),this.fireAncestors("$announce",["",""===this.tag("SearchInput").currentValue?"Enter a search term. A. button.":"Search term: ".concat(this.tag("SearchInput").currentValue,". A. button.")])}},{key:"keyboardToggle",value:function keyboardToggle(t){var r=t.open,i=t.direction;(this.tag("SearchInput").showText(r),r)?this.tag("ResultsContainer").y=502:(this.tag("SearchInput").currentValue.trim()&&YE(this.tag("SearchInput").currentValue),this.maybeShowRecentSearches(),"up"===i?(this.focusedItem="MenuBar",this.widgets.keyboard.closeKeyboard(!1),Cr.focusWidget("MenuBar"),this.tag("ResultsContainer").y=372):"down"===i&&(this.tag("RecentSearches").isVisible?(this.focusedItem="RecentSearches",this.widgets.keyboard.closeKeyboard(),this.tag("ResultsContainer").y=372):this.tag("Results").hasResults&&(this.focusedItem="Results",this.widgets.keyboard.closeKeyboard(),this.tag("ResultsContainer").y=372)))}},{key:"handleRecentSearch",value:function handleRecentSearch(t){_n.getInstance().emit(gA.VALUE_UPDATE,{target:Uk,value:t}),this.tag("RecentSearches").isVisible=!1,this.focusKeyboard()}},{key:"_inactive",value:function _inactive(){_n.getInstance().removeEventListener(gA.OPEN,this.keyboardToggle),_n.getInstance().removeEventListener(gA.CLOSE,this.keyboardToggle),_n.getInstance().removeEventListener("RECENT:SEARCH",this.handleRecentSearch),this.resetPage(),this.subscriber.unsubscribe()}},{key:"_active",value:function _active(){var t=this;qE("page:loaded",{path:"search",title:"Search"}),_n.getInstance().addEventListener(gA.OPEN,this.keyboardToggle),_n.getInstance().addEventListener(gA.CLOSE,this.keyboardToggle),_n.getInstance().addEventListener("RECENT:SEARCH",this.handleRecentSearch),this.viaMenuBar&&this.resetPage(),Cr.focusPage(),this.history=Cr.getHistory()||[],0===this.history.length&&setTimeout((function(){t.focusKeyboard()}),500),this.widgets.keyboard.x=115,this.widgets.keyboard.y=342,this.subscriber=Fk.subscribe((function(r){var i=r.term,a=r.items;""===i?(t.tag("Results").content="none","Results"===t.focusedItem&&(t.tag("Container").setSmooth("y",0),t.widgets.keyboard.setSmooth("y",342),t.focusKeyboard())):(t.tag("Results").content=a,t.tag("Results").hasResults||"Results"!==t.focusedItem?t.tag("Results").hasResults&&"Results"===t.focusedItem&&(t.setResultsContainerPosition(),t._refocus()):t.handleFocus()),t.maybeShowRecentSearches(),t.widgets.keyboard.closeOnDown=t.tag("RecentSearches").isVisible||t.tag("Results").hasResults})),this.searchQuery&&(this.tag("SearchInput").currentValue=this.searchQuery,Bk(this.searchQuery),YE(this.searchQuery),this.searchQuery=null),this.maybeShowRecentSearches(),(!this.focusedItem||"Results"!==this.focusedItem&&"ResultsContainer"!==this.focusedItem)&&this.focusKeyboard()}},{key:"handleSearch",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){return regeneratorRuntime.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:Bk(t.trim());case 1:case"end":return r.stop()}}),_callee)}))),function handleSearch(t){return r.apply(this,arguments)})},{key:"_handleBack",value:function _handleBack(){return(Cr.getHistory||[]).length?Cr.back():Cr.navigate("home")}},{key:"handleFocus",value:function handleFocus(){this.tag("Container").setSmooth("y",0),this.widgets.keyboard.setSmooth("y",342),this.focusKeyboard(),this.tag("SearchInput").patch({recentSearchStatus:this.tag("RecentSearches").isVisible}),this._refocus()}},{key:"maybeShowRecentSearches",value:function maybeShowRecentSearches(){var t,r;this.tag("RecentSearches").isVisible=(null===(t=QE())||void 0===t?void 0:t.length)>0&&!this.tag("Results").hasResults&&0===(null===(r=this.tag("SearchInput").currentValue)||void 0===r?void 0:r.length)}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,rect:!0,color:kg.colours.darkBlue500,flex:{direction:"column"},Container:{SearchInput:{y:170,x:115,signals:{_handleSearch:"handleSearch"},type:VC,name:Uk},ResultsContainer:{x:115,y:414,Results:{type:$C,signals:{_handleFocus:"handleFocus"}},RecentSearches:{type:qC,signals:{_handleFocus:"handleFocus"}}}}}}}]),Search}(j.Component),Yk=function(t){_inherits(SignInPicker,t);var r=_createSuper(SignInPicker);function SignInPicker(){return _classCallCheck(this,SignInPicker),r.apply(this,arguments)}return _createClass(SignInPicker,[{key:"params",set:function set(t){var r=t.deeplinkParams;this.deeplinkParams=r,r&&(this.tag("Code").deeplinkParams=r,this.tag("Email").deeplinkParams=r)}},{key:"_init",value:function _init(){this._focusItem=this.tag("Email")}},{key:"_active",value:function _active(){var t=Cr.getHistoryState()||[];t.deeplinkParams&&(this.deeplinkParams=t.deeplinkParams)}},{key:"_getFocused",value:function _getFocused(){return this._focusItem}},{key:"_handleLeft",value:function _handleLeft(){this._focusItem=this.tag("Email")}},{key:"_handleRight",value:function _handleRight(){this._focusItem=this.tag("Code")}},{key:"_handleBack",value:function _handleBack(){var t=Cr.getHistoryState();return Cr.replaceHistoryState(_objectSpread2(_objectSpread2({},t),{},{deeplinkUrl:this.deeplinkUrl})),this.deeplinkUrl?Cr.navigate("splash-screen",{deeplinkURL:this.deeplinkUrl}):Cr.back()}},{key:"announce",get:function get(){return[this.tag("Title").text.text,this.tag("Description").text.text]}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,flex:{direction:"column"},Logo:{x:1634,y:35,flexItem:!1,texture:j.Tools.getSvgTexture(II,151,60)},Title:{flexItem:{marginTop:128,marginLeft:115},text:_objectSpread2({text:"2 Ways to Sign In",textAlign:"center",verticalAlign:"center",textColor:kg.colours.white500,textOverflow:"ellipsis"},kg.TextStyles.h1)},Description:{w:800,flexItem:{marginLeft:115,marginBottom:46},text:_objectSpread2(_objectSpread2({text:"Use your BritBox account to sign in on this device \nor use an activation code on the BritBox website.",textColor:kg.colours.white500},kg.TextStyles.h4),{},{lineHeight:42})},ButtonRow:{flex:{direction:"row",alignItems:"center",justifyContent:"center"},Email:{type:JC,item:{path:"sign-in-email",static:!0,type:"default",title:"On My TV",icon:{img:wI,w:130,h:81},description:"Sign in on this device with your email and password"}},Divider:{flex:{direction:"column",alignItems:"center",justifyContent:"center"},flexItem:{marginLeft:63,marginRight:63},UpperDivider:{w:2,h:150,rect:!0,color:kg.colours.white500},MiddleText:{flexItem:{marginTop:24,marginBottom:24},text:_objectSpread2(_objectSpread2({text:"OR",textAlign:"center",verticalAlign:"center",textColor:kg.colours.white500},kg.TextStyles.featuredCopy),{},{lineHeight:0})},LowerDivider:{w:2,h:150,rect:!0,color:kg.colours.white500}},Code:{type:JC,item:{path:"sign-in-pin-and-pair",static:!0,type:"default",title:"On the Web",icon:{img:LI,w:208,h:81},description:"Sign in with code on the Britbox website to activate this app"}}}}}}]),SignInPicker}(j.Component),Gk=function(t){_inherits(SignInPinPair,t);var r,i,a=_createSuper(SignInPinPair);function SignInPinPair(){return _classCallCheck(this,SignInPinPair),a.apply(this,arguments)}return _createClass(SignInPinPair,[{key:"params",set:function set(t){var r=t.redirectUrl,i=t.videoRedirectUrl,a=t.deeplinkParams;i?this.redirectUrl=i:r?this.redirectUrl="dynamic/".concat(lE(r)):a&&(this.redirectUrl=a.path,this.payload=a.params)}},{key:"data",set:function set(t){var r=t.code,i=t.linkUrl,a=t.subTitle;this._code=r,this._linkUrl=i,this._subTitle=a,this.tag("BoxContainer").patch({items:{code:this._code,linkUrl:this._linkUrl}}),this.tag("SubTitle").patch({text:{text:a}})}},{key:"_init",value:function _init(){this.device=Mg.getDeviceType()}},{key:"_active",value:function _active(){var t=this;this.intervalId=setInterval((function(){SignInPinPair.getDeviceCode().then((function(r){var i=r.accessToken,a=r.refreshToken;return!!i&&(clearInterval(t.intervalId),delete t.intervalId,H("bb_token",i),H("bb_refresh_token",a),ZE(i,a),Ni.getParentalControlDetails().then((function(t){var r=t.parentalControlLevel;return H("parental_control_level",r),""})).catch((function(t){})),Ni.getWatchlist().then((function(t){return rI(Object.keys(t)),{}})).catch((function(t){})),Cr.navigate("login-confirmation",{redirectUrl:t.redirectUrl,payload:t.payload}))})).catch((function(t){}))}),5e3);var r=this.tag("Title").text.text,i=this.tag("SubTitle").text.text,a=Mg.pronounceTTS(this._linkUrl),u=this._code?this._code.split("").toString():"",l=[r,i,"Step 1, on a desktop or mobile, visit ".concat(a,",\n       Step 2, enter this 6 digit code when prompted, ").concat(u,",\n       Step 3, wait for this screen to refresh and you're ready to start watching,\n       Not hearing a code?,")];this.repeatInstructions=setInterval((function(){return t.fireAncestors("$announce",[].concat(l,["request code button"]))}),4e4),this.tag("RequestButton").patch({item:{text:"Request Code",instructions:l}})}},{key:"_inactive",value:function _inactive(){clearInterval(this.repeatInstructions),clearInterval(this.intervalId),delete this.intervalId}},{key:"_getFocused",value:function _getFocused(){return this.tag("RequestButton")}},{key:"_handleBack",value:function _handleBack(){var t=Cr.getHistory()||[];return"sign-in-email"===t[t.length-1].hash?(Cr.go(-2),!0):(Cr.back(),!0)}}],[{key:"_template",value:function _template(){return{h:1080,w:1980,color:kg.colours.darkBlue500,Logo:{x:1634,y:35,flexItem:!1,texture:j.Tools.getSvgTexture(II,151,60)},Container:{x:115,y:128,flex:{direction:"column"},TitleContainer:{flex:{direction:"column"},Title:{h:96,text:_objectSpread2(_objectSpread2({},kg.TextStyles.h1),{},{lineHeight:64,wordWrapWidth:874,text:"Sign In with Code"})},SubTitle:{h:84,text:_objectSpread2(_objectSpread2({},kg.TextStyles.bodyCopy),{},{lineHeight:42,wordWrapWidth:874,text:""})},flexItem:{marginBottom:88}},BoxContainer:{h:270,type:IC,flexItem:{marginBottom:48}},Question:{h:30,text:_objectSpread2(_objectSpread2({},kg.TextStyles.smallCopy),{},{textColor:kg.colours.white500,lineHeight:29,text:"Not seeing a code?"}),flexItem:{marginBottom:32}},RequestButton:{type:sI,item:{text:"Request Code"}}}}}},{key:"getDeviceCode",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t;return regeneratorRuntime.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Mg.getDeviceDetails();case 2:return t=r.sent,r.abrupt("return",Ni.generateDeviceActivationCode(t));case 4:case"end":return r.stop()}}),_callee)}))),function getDeviceCode(){return i.apply(this,arguments)})},{key:"getData",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(t){var r,i,a,u,l,c,d,g,p,m,v,b;return regeneratorRuntime.wrap((function _callee2$(M){for(;;)switch(M.prev=M.next){case 0:return qE("page:loaded",{path:"sign-in-pin-and-pair",title:"Sign in Pin and Pair"}),M.next=3,SignInPinPair.getDeviceCode();case 3:if(r=M.sent,i=r.accessToken,a=r.activationCode,u=r.refreshToken,!i){M.next=21;break}return H("bb_token",i),H("bb_refresh_token",u),ZE(i,u),M.next=13,Ni.getParentalControlDetails();case 13:return l=M.sent,(c=l.parentalControlLevel)&&H("parental_control_level",c),M.next=18,Ni.getWatchlist();case 18:return d=M.sent,rI(Object.keys(d)),M.abrupt("return",Cr.navigate("login-confirmation",{redirectUrl:t.redirectUrl,payload:t.payload}));case 21:return g=hE(),p=ji.getRegion(),M.next=25,SignInPinPair.setConfigKeys(g,p);case 25:return m=M.sent,v=m.linkUrl,b=m.subTitle,t.data={code:a,linkUrl:v,subTitle:b},M.abrupt("return",!0);case 29:case"end":return M.stop()}}),_callee2)}))),function getData(t){return r.apply(this,arguments)})}]),SignInPinPair}(j.Component);_defineProperty(Gk,"setConfigKeys",_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var t,r,i,a,u,l,c,d,g=arguments;return regeneratorRuntime.wrap((function _callee3$(p){for(;;)switch(p.prev=p.next){case 0:if(t=g.length>0&&void 0!==g[0]?g[0]:{},r=g.length>1?g[1]:void 0,i=Mg.getDeviceType(),a="tether_url_".concat(i),u="".concat(r,"_PinAndPair_").concat(JE(i)),i!==Mg.DeviceType.comcast){p.next=11;break}return p.next=8,Mg.getDeviceDetails();case 8:l=p.sent,a="tether_url_".concat(l.deviceType.toLowerCase()),u="".concat(r,"_PinAndPair_").concat(l.deviceType.toLowerCase());case 11:return c=PE("britbox.com/connect",["general","customFields",a],t),d=PE("Follow the instructions below to access the best of British TV",["general","customFields",u],t),p.abrupt("return",{linkUrl:c,subTitle:d});case 14:case"end":return p.stop()}}),_callee3)}))));var Hk,Qk,Vk,Wk,$k,Kk,qk,Xk,Zk,Jk,ew,tw,rw,nw=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t,r,i,a,u;return regeneratorRuntime.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Ni.getPage("/logged_out_home");case 2:if(t=l.sent,r=t.entries,i=[],a="",u="",0!==r.length){l.next=9;break}return l.abrupt("return",null);case 9:return r.forEach((function(t){if(!t)return null;"Editorial Image"===t.template&&(u=PE("",["images","tile"],t)),"Editorial Text"===t.template&&(a=PE("",["text"],t)),"HERO-HEADLINE"===t.title&&i.push(PE("",["customFields","key"],t))})),l.abrupt("return",{title:i,subTitle:a,backgroundImageSrc:u});case 11:case"end":return l.stop()}}),_callee)})));return function resolveSplashScreen(){return t.apply(this,arguments)}}(),iw={h:72,w:780,text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.h1),{},{textAlign:"center",lineHeight:72,wordWrapWidth:785}),flexItem:{marginBottom:8}},aw=function(t){_inherits(SplashScreen,t);var r,i=_createSuper(SplashScreen);function SplashScreen(){return _classCallCheck(this,SplashScreen),i.apply(this,arguments)}return _createClass(SplashScreen,[{key:"items",set:function set(t){var r=t.title,i=t.subTitle,a=t.backgroundImageSrc,u=t.comcastDevice;this.patch({Container:{Title1:{text:{text:r[0]}},Title2:{text:{text:r[1]}},SubTitle:{text:{text:i}}},src:a}),this.xClass=u===Mp.ComcastDevice.xclass}},{key:"params",set:function set(t){var r=t.deeplinkParams;r&&(this.deeplinkParams=r)}},{key:"_active",value:function _active(){var t=this;this._focusItem=this.tag("SignInButton"),this.xClass?this.tag("ButtonContainer").patch({flexItem:{marginTop:32}}):(this.tag("SubTitle").patch({visible:!0}),this.tag("SignUpButton").patch({visible:!0}));var r=[this.tag("Title1").text.text,this.tag("Title2").text.text],i=this.xClass?"":this.tag("SubTitle").text.text;this.instructions=[r,i],this.announceInstructions=setInterval((function(){return t.fireAncestors("$announce",[t.instructions,"".concat(t._focusItem.item.text," button")])}),3e4),this.deeplinkParams&&(this.tag("SignUpButton").deeplinkParams=this.deeplinkParams,this.tag("SignInButton").deeplinkParams=this.deeplinkParams)}},{key:"_inactive",value:function _inactive(){clearInterval(this.announceInstructions)}},{key:"_handleLeft",value:function _handleLeft(){return!this.xClass&&(this._focusItem=this.tag("SignInButton"),!0)}},{key:"_handleRight",value:function _handleRight(){return!this.xClass&&(this._focusItem=this.tag("SignUpButton"),!0)}},{key:"_handleBack",value:function _handleBack(){Cr.navigate("exit-prompt")}},{key:"_getFocused",value:function _getFocused(){return this._focusItem}},{key:"announce",get:function get(){return this.instructions}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,src:"",OverlayBottom:{x:0,y:SplashScreen.height/2,w:SplashScreen.width,h:SplashScreen.height/2,rect:!0,colorTop:kg.colours.heroOverlayEnd,colorBottom:kg.colours.heroOverlayStart},OverlayLeft:{x:0,y:0,w:SplashScreen.width/2,h:SplashScreen.height,rect:!0,colorLeft:kg.colours.heroOverlayStart,colorRight:kg.colours.heroOverlayEnd},Container:{flex:{direction:"column",justifyContent:"space-between",alignItems:"center"},y:600,x:570,Title1:_objectSpread2({},iw),Title2:_objectSpread2({},iw),SubTitle:{h:84,w:780,visible:!1,text:_objectSpread2(_objectSpread2({text:""},kg.TextStyles.bodyCopy),{},{textAlign:"center",lineHeight:42,wordWrapWidth:780}),flexItem:{marginBottom:32}},ButtonContainer:{flex:{direction:"row",alignItems:"center"},SignInButton:{type:sI,item:{static:!0,path:"sign-in-picker",text:"Sign in"},flexItem:{marginRight:12}},SignUpButton:{visible:!1,type:sI,item:{static:!0,path:"sign-up",text:"Sign up"}}}}}}},{key:"height",get:function get(){return 1080}},{key:"width",get:function get(){return 1920}},{key:"getData",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r,i,a,u,l;return regeneratorRuntime.wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return qE("page:loaded",{path:"splash-screen",title:"Splash screen"}),c.next=3,nw();case 3:return r=c.sent,i=r.title,a=r.subTitle,u=r.backgroundImageSrc,c.next=7,Mg.getComcastDeviceType();case 7:l=c.sent,t.items={title:i,subTitle:a,backgroundImageSrc:u,comcastDevice:l};case 9:case"end":return c.stop()}}),_callee)}))),function getData(t){return r.apply(this,arguments)})}]),SplashScreen}(j.Component),ow=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var t,r,i,a;return regeneratorRuntime.wrap((function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Ni.isEligibleForFreeTrial();case 2:return t=u.sent,u.next=5,Ni.getProducts();case 5:return r=u.sent,i=r.productsResponseMessage,a=function getProductInfo(){return i.map(function(){var r=_asyncToGenerator(regeneratorRuntime.mark((function _callee(r){var i,a,u,l,c,d,g,p;return regeneratorRuntime.wrap((function _callee$(m){for(;;)switch(m.prev=m.next){case 0:return i=r.bbDescription,a=r.appChannels,u=a.filter((function(r){return t&&r.freeTrial||!t&&!r.freeTrial})),l=PE("",[0,"appID"],u),m.next=5,kM.getProductBySKU(l);case 5:return c=m.sent,Array.isArray(c)?(d=c[0].description,g=c[0].price,p=c[0].subscriptionPeriod):(d=c.description,g=c.price,p=c.subscriptionPeriod),m.abrupt("return",{title:i,description:d,retailPrice:g,skuCode:l,period:p.includes("Monthly")?"/mo":"/yr"});case 8:case"end":return m.stop()}}),_callee)})));return function(t){return r.apply(this,arguments)}}())},u.t0=t,u.next=11,Promise.all(a());case 11:return u.t1=u.sent,u.abrupt("return",{isEligibleFreeTrial:u.t0,plans:u.t1});case 13:case"end":return u.stop()}}),_callee2)})));return function resolveSubscriptionPicker(){return t.apply(this,arguments)}}(),sw=function(t){_inherits(SubscriptionPicker,t);var r,i,a=_createSuper(SubscriptionPicker);function SubscriptionPicker(){return _classCallCheck(this,SubscriptionPicker),a.apply(this,arguments)}return _createClass(SubscriptionPicker,[{key:"_init",value:function _init(){this._focusedItem=null}},{key:"_handleUp",value:function _handleUp(){this._focusedItem=this.tag("Container")}},{key:"_handleDown",value:function _handleDown(){this._focusedItem=this.tag("ConfirmButton")}},{key:"_handleBack",value:function _handleBack(){var t=Cr.getHistory()||[],r=t[t.length-1];return t.length?"sign-up"===r.hash?this.deeplinkUrl?Cr.navigate(this.deeplinkUrl):(Cr.navigate("home"),!0):(Cr.back(),!0):Cr.navigate("home")}},{key:"_getFocused",value:function _getFocused(){return this._focusedItem}},{key:"params",set:function set(t){var r=t.deeplinkParams;this.deeplinkParams=r}},{key:"handleConfirmButton",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r,i,a,u,l,c,d,g,p,m,v,b,M;return regeneratorRuntime.wrap((function _callee$(S){for(;;)switch(S.prev=S.next){case 0:return S.prev=0,S.next=3,kM.getAllSubscriptions();case 3:if(r=S.sent,!((i=r.currentSubscriptions)&&i.length>0)){S.next=8;break}return eN("ACTIVE-SUBSCRIPTION"),S.abrupt("return");case 8:return a=Cr.getHistory(),u=a[a.length-1],this.deeplinkParams?(l=this.deeplinkParams.path,c=this.deeplinkParams.params):l="sign-up"===u.hash?"home":u.hash,S.next=13,kM.makePurchase(t);case 13:d=S.sent,g=d.complete,p=d.oat,m=d.transactionId,v=d.data,b=v.purchaseId,M=v.sku,g&&(Ni.activateCustomer(M,m,p,b),Cr.navigate("login-confirmation",{redirectUrl:l,payload:c})),S.next=31;break;case 23:if(S.prev=23,S.t0=S.catch(0),403!==S.t0.statusCode){S.next=30;break}return eN("ACTIVE-SUBSCRIPTION"),S.abrupt("return");case 30:eN();case 31:case"end":return S.stop()}}),_callee,this,[[0,23]])}))),function handleConfirmButton(t){return i.apply(this,arguments)})},{key:"updateConfirmButton",value:function updateConfirmButton(t,r){var i=this,a="Continue with ".concat(t);this.tag("ConfirmButton").patch({item:{callback:function callback(){return i.handleConfirmButton(r)},tts:a},label:a})}},{key:"isEligibleForFreeTrial",set:function set(t){this._isEligibleForFreeTrial=t}},{key:"items",set:function set(t){var r=this,i=t.reverse().map((function(t,i){var a=t.title,u=t.description,l=t.retailPrice,c=t.skuCode,d=t.period;return 0===i&&r.updateConfirmButton(a,c),{customClass:JC,itemInfo:{type:"subscription",title:a,subTitle:u,retailPrice:"".concat(l).concat(d),checkmark:0===i,callback:function callback(){_n.getInstance().emit("RESET::CHECKMARK"),r.updateConfirmButton(a,c)}}}}));this.tag("Container").items=i,this._focusedItem=this.tag("Container")}},{key:"description",set:function set(t){this.tag("Description").text.text=t}},{key:"announce",get:function get(){var t=this.tag("Title").text.text,r=this.tag("Description").text.text;return this._isEligibleForFreeTrial?[t,r]:[t]}}],[{key:"_template",value:function _template(){return{w:1920,h:1080,flex:{direction:"column"},Logo:{x:1634,y:35,flexItem:!1,texture:j.Tools.getSvgTexture(II,151,60)},Title:{flexItem:{marginTop:128,marginLeft:115},text:_objectSpread2({text:"Select the Plan that’s Right for You",textColor:kg.colours.white500,textOverflow:"ellipsis"},kg.TextStyles.h1)},Description:{flexItem:{marginLeft:115},text:_objectSpread2({text:"",textColor:kg.colours.mutedBlue200},kg.TextStyles.h4)},Container:{x:115,h:JC.height,type:QA,flexItem:{marginTop:-48,marginBottom:72}},ConfirmButton:{flexItem:{marginLeft:115,marginTop:46},type:sI,label:"",textOverflow:!1},Note:{flexItem:{marginLeft:115,marginTop:26},text:_objectSpread2({text:"*Free trial available only to new users",textColor:kg.colours.mutedBlue200},kg.TextStyles.smallCopy)}}}},{key:"getData",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(t){var r,i,a,u,l,c,d,g;return regeneratorRuntime.wrap((function _callee2$(p){for(;;)switch(p.prev=p.next){case 0:return qE("page:loaded",{path:"subscription-picker",title:"Subscription Picker"}),p.prev=1,p.next=4,ow();case 4:return r=p.sent,i=r.isEligibleFreeTrial,a=r.plans,u=hE(),l=ji.getRegion(),p.next=11,Mg.getComcastDeviceType();case 11:c=p.sent,d="".concat(l,"_Subscribe_").concat(c.toLowerCase()),g=PE("Free 7-days trial*, then continue with monthly or annual plan.",["general","customFields",d],u),t.items=a,t.isEligibleForFreeTrial=i,t.description=g,p.next=23;break;case 19:p.prev=19,p.t0=p.catch(1),eN("SUBSCRIPTION-DATA");case 23:case"end":return p.stop()}}),_callee2,null,[[1,19]])}))),function getData(t){return r.apply(this,arguments)})}]),SubscriptionPicker}(j.Component),uw=function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var t,r,i,a,u,l,c,d,g,p,m,v,b,M,S,E,I,D,A,C;return regeneratorRuntime.wrap((function _callee$(N){for(;;)switch(N.prev=N.next){case 0:return(t=G("recent_searches"))&&HE(t),N.next=4,Ni.checkRegion();case 4:return r=N.sent,Ni.setRegion(r),N.next=8,Ni.getAppConfig();case 8:if(i=N.sent,gE(i),a=PE({},["general","itemImageTypes"],i),Mg.setItemImageType(a),u=Mg.getDeviceType(),l=u===Mg.DeviceType.comcast?"BBI MediaSelector":"BBC MediaSelector",c=kE(["general","customFields",l],i),Ni.setMediaSelectorBaseUrl(c),Mg.bootstrapPlayRecords(i),d=G("bb_token")){N.next=22;break}return Ry.sendUserEvent("user:details"),bA(),N.abrupt("return",Promise.resolve());case 22:return g=G("bb_refresh_token"),ZE(d,g),N.next=26,Ni.refreshAuthToken(g);case 26:if(p=N.sent,m=p.accessToken,v=p.refreshToken,m||v){N.next=37;break}return Ry.sendUserEvent("user:logout"),V(),ZE(),Ni.setSubscriptionCode(),rI([]),bA(),GE(),N.abrupt("return",Promise.resolve());case 37:return H("bb_token",m),H("bb_refresh_token",v),ZE(m,v),N.next=42,Ni.getAccount();case 42:if(!(b=N.sent)){N.next=56;break}return N.next=46,Ni.getWatchlist();case 46:return(M=N.sent)&&rI(Object.keys(M)),S=b.subscriptionCode,E=b.gigyaId,I=b.entitlements,D=b.address,S&&Ni.setSubscriptionCode(S),Ry.sendUserEvent("user:details",{subscriptionCode:S,userId:E,entitlements:I,address:D}),N.next=53,Ni.getParentalControlDetails();case 53:A=N.sent,(C=A.parentalControlLevel)?H("parental_control_level",C):Q("parental_control_level");case 56:return bA(),N.abrupt("return",Promise.resolve());case 58:case"end":return N.stop()}}),_callee)})));return function bootstrapApp(){return t.apply(this,arguments)}}(),lw={boot:uw,root:"boot-screen",beforeEachRoute:function beforeEachRoute(){return Mg.loadingSpinnerVisible$.next(!0),Promise.resolve(!0)},afterEachRoute:function afterEachRoute(){Mg.loadingSpinnerVisible$.next(!1)},routes:[{path:"account",component:jx,before:(tw=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){return regeneratorRuntime.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",jx.getData(t));case 1:case"end":return r.stop()}}),_callee)}))),function before(t){return tw.apply(this,arguments)}),widgets:["MenuBar"]},{path:"account/logout",component:Ek,widgets:[],options:{preventStorage:!0}},{path:"account/text/:path",component:Px,before:(ew=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(t,r){var i;return regeneratorRuntime.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return i=r.path,a.abrupt("return",Px.getData(t,i));case 2:case"end":return a.stop()}}),_callee2)}))),function before(t,r){return ew.apply(this,arguments)}),widgets:["MenuBar"]},{path:"boot-screen",component:Hx,widgets:[],options:{preventStorage:!0}},{path:"dynamic/:path",component:uk,before:(Jk=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(t,r){var i;return regeneratorRuntime.wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:return i=r.path,a.abrupt("return",uk.getData(t,Hk,i));case 2:case"end":return a.stop()}}),_callee3)}))),function before(t,r){return Jk.apply(this,arguments)}),widgets:["MenuBar","SortOverlay"]},{path:"error",component:Tk,widgets:[],options:{preventStorage:!0}},{path:"exit-prompt",component:bk,widgets:[],options:{preventStorage:!0}},{path:"home",component:uk,before:(Zk=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(t){return regeneratorRuntime.wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",uk.getData(t,Hk,"/"));case 1:case"end":return r.stop()}}),_callee4)}))),function before(t){return Zk.apply(this,arguments)}),widgets:["MenuBar"],options:{clearHistory:!0}},{path:"inactive",component:Mk,widgets:[],options:{preventStorage:!0}},{path:"login-confirmation",component:Sk,widgets:[],options:{preventStorage:!0,clearHistory:!0}},{path:"out-of-location",component:Ik,widgets:[],before:(Xk=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(t){return regeneratorRuntime.wrap((function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Ik.getData(t,Hk));case 1:case"end":return r.stop()}}),_callee5)}))),function before(t){return Xk.apply(this,arguments)})},{path:"parental-control",component:Dk,before:(qk=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(t){return regeneratorRuntime.wrap((function _callee6$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Dk.getData(t));case 1:case"end":return r.stop()}}),_callee6)}))),function before(t){return qk.apply(this,arguments)}),widgets:[],options:{preventStorage:!0}},{path:"password-confirmation/:isFirstPC/:toggleOff",component:Ak,before:(Kk=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(t,r){var i,a;return regeneratorRuntime.wrap((function _callee7$(u){for(;;)switch(u.prev=u.next){case 0:return i=r.isFirstPC,a=r.toggleOff,u.abrupt("return",Ak.setData(t,i,a));case 2:case"end":return u.stop()}}),_callee7)}))),function before(t,r){return Kk.apply(this,arguments)}),widgets:["Keyboard"],options:{preventStorage:!0}},{path:"pin-page",component:Ck,widgets:["Keyboard"],options:{preventStorage:!0}},{path:"screensaver",component:jk,widgets:[],options:{preventStorage:!0}},{path:"search",component:zk,widgets:["Keyboard","MenuBar"]},{path:"sign-in-picker",component:Yk,widgets:[]},{path:"sign-in-pin-and-pair",component:Gk,before:($k=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(t){return regeneratorRuntime.wrap((function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Gk.getData(t));case 1:case"end":return r.stop()}}),_callee8)}))),function before(t){return $k.apply(this,arguments)}),widgets:[],options:{preventStorage:!0}},{path:"sign-in-email",component:_k,widgets:["Keyboard"]},{path:"sign-up",component:pk,before:(Wk=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(t,r){var i;return regeneratorRuntime.wrap((function _callee9$(a){for(;;)switch(a.prev=a.next){case 0:return i=r.path,a.abrupt("return",pk.getData(t,i));case 2:case"end":return a.stop()}}),_callee9)}))),function before(t,r){return Wk.apply(this,arguments)}),widgets:["Keyboard","PopUp"]},{path:"splash-screen",component:aw,before:(Vk=_asyncToGenerator(regeneratorRuntime.mark((function _callee10(t){return regeneratorRuntime.wrap((function _callee10$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",aw.getData(t,Hk));case 1:case"end":return r.stop()}}),_callee10)}))),function before(t){return Vk.apply(this,arguments)}),widgets:[]},{path:"subscription-picker",component:sw,widgets:[],before:(Qk=_asyncToGenerator(regeneratorRuntime.mark((function _callee11(t){return regeneratorRuntime.wrap((function _callee11$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",sw.getData(t));case 1:case"end":return r.stop()}}),_callee11)}))),function before(t){return Qk.apply(this,arguments)})},{path:"/watch/:path",component:Lk,before:Lk.before,widgets:[],options:{preventStorage:!0}}]};function screensaverTimer(){Qe.clearTimeout(rw),rw=Qe.setTimeout((function(){PN.playing||Cr.navigate("screensaver")}),9e5)}var cw=Ry.events$.pipe(filter((function(t){return"page:loaded"===t.action})),function take(t){return t<=0?function(){return iE}:operate((function(r,i){var a=0;r.subscribe(createOperatorSubscriber(i,(function(r){++a<=t&&(i.next(r),t<=a&&i.complete())})))}))}(1)),dw=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Speech,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(t){_inherits(Announcer,t);var a=_createSuper(Announcer);function Announcer(){return _classCallCheck(this,Announcer),a.apply(this,arguments)}return _createClass(Announcer,[{key:"_construct",value:function _construct(){this._announceEndedTimeout,this._currentlySpeaking=""}},{key:"announcerEnabled",get:function get(){return this._announcerEnabled},set:function set(t){this._announcerEnabled=t,this._focusChange()}},{key:"_voiceOut",value:function _voiceOut(t){var a=this;if(!this._voiceOutDisabled){var u=r(t);u&&u.series&&u.series.then((function(){a.stage.emit("announceEnded")}));var l=(Array.isArray(t)?t.concat().join(" "):t).split(" ").length*(i.voiceOutDelay||500);return clearTimeout(this._announceEndedTimeout),this._announceEndedTimeout=setTimeout((function(){a.stage.emit("announceTimeoutEnded")}),l),u}}},{key:"_build",value:function _build(){var t=this;_get(_getPrototypeOf(Announcer.prototype),"_build",this)&&_get(_getPrototypeOf(Announcer.prototype),"_build",this).call(this),this._debounceAnnounceFocusChanges=LS.debounce(this._announceFocusChanges.bind(this),Number.isInteger(this.announcerFocusDebounce)?this.announcerFocusDebounce:400),this.announcerTimeout=Number.isInteger(this.announcerTimeout)?this.announcerTimeout:RS,this._resetFocusTimer=LS.debounce((function(){t._lastFocusPath=void 0}),this.announcerTimeout)}},{key:"_firstEnable",value:function _firstEnable(){_get(_getPrototypeOf(Announcer.prototype),"_firstEnable",this)&&_get(_getPrototypeOf(Announcer.prototype),"_firstEnable",this).call(this),this._focusChange()}},{key:"_disable",value:function _disable(){clearTimeout(this._announceEndedTimeout),this.stage.emit("announceEnded"),this.stage.emit("announceTimeoutEnded")}},{key:"_focusChange",value:function _focusChange(){this._resetFocusTimer&&(this._resetFocusTimer(),this.$announcerCancel(),this._debounceAnnounceFocusChanges())}},{key:"_announceFocusChanges",value:function _announceFocusChanges(){var t=this.application.focusPath||[],r=this._lastFocusPath||[],i=t.every((function(t){return!t.loading})),a=t.filter((function(t){return!r.includes(t)}));if(i){if(this._lastFocusPath=t.slice(0),this.focusDiffHook=a,this.announcerEnabled){var u=a.reduce((function(t,r){return r.announce?t.push([elmName(r),"Announce",r.announce]):r.title?t.push([elmName(r),"Title",r.title||""]):t.push([elmName(r),"Label",r.label||""]),t}),[]);a.reverse().reduce((function(t,r){return r.announceContext?t.push([elmName(r),"Context",r.announceContext]):t.push([elmName(r),"No Context",""]),t}),u),this.debug&&console.table(u),(u=u.reduce((function(t,r){var i=r[2];return i&&t.push(i),t}),[])).length&&(this.$announcerCancel(),this._currentlySpeaking=this._voiceOut(u.reduce((function(t,r){return t.concat(r)}),[])))}}else this._debounceAnnounceFocusChanges()}},{key:"$announce",value:function $announce(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.append,u=void 0!==a&&a,l=i.notification,c=void 0!==l&&l;this.announcerEnabled&&(this._debounceAnnounceFocusChanges.flush(),u&&this._currentlySpeaking&&this._currentlySpeaking.active?this._currentlySpeaking.append(t):(this.$announcerCancel(),this._currentlySpeaking=this._voiceOut(t)),c&&(this._voiceOutDisabled=!0,this._currentlySpeaking.series.finally((function(){r._voiceOutDisabled=!1,r.$announcerRefresh()}))))}},{key:"$announcerCancel",value:function $announcerCancel(){this._currentlySpeaking&&this._currentlySpeaking.cancel()}},{key:"$announcerRefresh",value:function $announcerRefresh(t){this._lastFocusPath=t?this._lastFocusPath.slice(0,t):void 0,this._resetFocusTimer(),this._focusChange()}}]),Announcer}(t)}(Cr.App),fw=function(t){_inherits(App,t);var r=_createSuper(App);function App(){return _classCallCheck(this,App),r.apply(this,arguments)}return _createClass(App,[{key:"_setup",value:function _setup(){var t=this;!function bootstrapRoutes(t){Hk=t}(this.stage),Cr.startRouter(lw,this),Mg.loadingSpinnerVisible$.subscribe((function(r){t.tag("Loading").patch({visible:r}),t.tag("MenuBar").patch({alpha:r?0:1})})),kx.subscribe((function(r){var i=r?kg.colours.darkBlue500:"0x00ffffff";t.patch({color:i})})),"fetch"===Mg.getDeviceType()&&(document.body.style.background="none"),"comcast"===Mg.getDeviceType()&&UM.accessibilitySettings$.subscribe((function(t){null!=t&&t.enabled&&function forceFontLoad(t){if(t&&"undefined"!=typeof document){var r=Mg.getMappedFontName(t);if(r){var i=A("fonts/".concat(r,".ttf"));new FontFace(r,"url(".concat(i,")")).load().then((function(t){return document.fonts.add(t),console.log("Font :: success - ".concat(r," loaded successfully")),!0})).catch((function(t){}))}}}(t.styles.fontFamily)})),function bootstrapScreensaver(){screensaverTimer(),Qe.addEventListener(document.body,"keydown",screensaverTimer)}()}},{key:"_firstActive",value:function _firstActive(){var t=this;cw.subscribe((function(){Ry.sendEvent({type:"app",action:Ry.AppActions.INIT})}));var r=!1;Ry.events$.pipe(filter((function(t){var r=t.type,i=t.data,a=(i=void 0===i?{}:i).state;return"app"===r&&a}))).subscribe((function(t){var i=t.action,a=t.data,u=(a=void 0===a?{}:a).state,l=(u=void 0===u?{}:u).prev,c=Cr.getActivePage();i===Ry.AppActions.FOREGROUND&&"inactive"!==l&&c&&c.onForeground&&"function"==typeof c.onForeground&&c.onForeground(),i===Ry.AppActions.BACKGROUND&&"inactive"!==l&&c&&c.onBackground&&"function"==typeof c.onBackground&&c.onBackground(),i===Ry.AppActions.INACTIVE&&"initializing"!==l&&(Cr.navigate("inactive"),r=!0),i===Ry.AppActions.FOREGROUND&&"inactive"===l&&r&&(Cr.back(),r=!1)})),UM.voiceGuidanceEnabled$.subscribe((function(r){t.announcerEnabled=r})),UM.deeplink$.subscribe(zx)}},{key:"_captureKey",value:function _captureKey(){return!!Mg.loadingSpinnerVisible$.getValue()}},{key:"$showMenu",value:function $showMenu(){this.tag("MenuBar").patch({visible:!0})}},{key:"$hideMenu",value:function $hideMenu(){this.tag("MenuBar").patch({visible:!1})}}],[{key:"getFonts",value:function getFonts(){return[{family:"MuseoSansRounded_light",url:A("fonts/MuseoSansRounded-300.ttf")},{family:"MuseoSansRounded_medium",url:A("fonts/MuseoSansRounded-500.ttf")},{family:"MuseoSansRounded_bold",url:A("fonts/MuseoSansRounded-700.ttf")}]}},{key:"_template",value:function _template(){return _objectSpread2(_objectSpread2({},_get(_getPrototypeOf(App),"_template",this).call(this)),{},{rect:!0,color:kg.colours.darkBlue500,w:1920,h:1080,Widgets:{Keyboard:{type:mA,isOpen:!1},MenuBar:{type:MA},SortOverlay:{type:IA,alpha:0},PopUp:{type:AA,isOpen:!1}},Loading:{type:jI,visible:!1}})}}]),App}(dw),hw=Mg.getDeviceType();return"fetch"===hw&&(document.body.style.background="#00202B"),function BootstrapLightning(t,r,i){return"fetch"===hw&&Mg.loadScript("https://mw.fetchtv.com.au/v2/releases/partner_libs/prod/1652311945_545acabdce4b4092241854169d848c546daa567c/hardware.js"),Mg.loadScript("https://mybbc-analytics.files.bbci.co.uk/echo-client-js/echo-12.17.1.min.js").then(Tn.bootstrapEcho).catch((function(t){})),wS(),kM.bootstrapIAP(),function Launch(t,r,i,a){var u=_objectSpread2(_objectSpread2({},r),{},{stage:_objectSpread2(_objectSpread2({},r.stage||{}),maybeUseAutoResolution(r))});return _Launch(t,u,i)}(fw,t,r)}}();
//# sourceMappingURL=appBundle.js.map
